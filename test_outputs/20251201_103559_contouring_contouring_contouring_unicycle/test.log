2025-12-01 10:35:59,375 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2025-12-01 10:35:59,375 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2025-12-01 10:35:59,375 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2025-12-01 10:35:59,375 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2025-12-01 10:35:59,376 - INFO - integration_test - Creating objective module: contouring
2025-12-01 10:35:59,381 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2025-12-01 10:35:59,381 - INFO - integration_test - Creating 1 constraint module(s): ['contouring']
2025-12-01 10:35:59,381 - DEBUG - integration_test - Creating constraint module: contouring
2025-12-01 10:35:59,387 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2025-12-01 10:35:59,387 - INFO - integration_test - Created 1 constraint module(s)
2025-12-01 10:35:59,402 - INFO - integration_test - Setting solver on all modules...
2025-12-01 10:35:59,402 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2025-12-01 10:35:59,402 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2025-12-01 10:35:59,402 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2025-12-01 10:35:59,402 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2025-12-01 10:35:59,402 - DEBUG - integration_test -   Set solver on module: contouring_objective
2025-12-01 10:35:59,402 - WARNING - integration_test - Error shaping obstacles: 'max_obstacles'
2025-12-01 10:35:59,402 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2025-12-01 10:35:59,402 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2025-12-01 10:35:59,402 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2025-12-01 10:35:59,402 - INFO - integration_test - Reference path start: (0.00, 0.00)
2025-12-01 10:35:59,402 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2025-12-01 10:35:59,402 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2025-12-01 10:35:59,403 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2025-12-01 10:35:59,403 - INFO - integration_test - Added spline variable: 0.0000
2025-12-01 10:35:59,403 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2025-12-01 10:35:59,403 - INFO - integration_test - Step 0 (contouring until path end)
2025-12-01 10:35:59,403 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2025-12-01 10:35:59,404 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m)
2025-12-01 10:35:59,404 - DEBUG - integration_test -   Set spline state to 0.0000
2025-12-01 10:35:59,404 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:35:59,419 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2025-12-01 10:35:59,419 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2025-12-01 10:35:59,421 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:35:59,423 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:35:59,423 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2025-12-01 10:35:59,423 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:35:59,424 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.1], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2025-12-01 10:35:59,425 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.2], ws=[0.2, 0.0, 0.0, 1.0, 0.2127494608332952], res=[0.0, 0.0, 0.0, 0.0, -0.0127494608332952], res_norm=1.275e-02
2025-12-01 10:35:59,425 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.31274946083329525], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.3386985848683951], res=[0.0, 0.0, 0.0, 0.0, -0.025949124035099858], res_norm=2.595e-02
2025-12-01 10:35:59,440 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,451 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,478 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,493 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,504 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,519 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,530 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,546 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,557 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,573 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,583 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,598 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,609 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,624 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,634 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,649 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,661 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,678 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,690 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:35:59,707 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:35:59,719 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,516 - INFO - integration_test - Step 0: MPC solve successful
2025-12-01 10:36:00,542 - INFO - integration_test - Step 0: Computed 10 numeric contouring constraints for visualization (s=0.000)
2025-12-01 10:36:00,543 - DEBUG - integration_test - Step 0: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:00,543 - DEBUG - integration_test - Linearized constraints module not found at step 0
2025-12-01 10:36:00,543 - INFO - integration_test - === Applying control at step 0 ===
2025-12-01 10:36:00,543 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199998085, 'w': 0.8000000099948057}
2025-12-01 10:36:00,543 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:00,543 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:00,544 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:00,545 - INFO - integration_test - Step 0 completed in 1.142s
2025-12-01 10:36:00,571 - INFO - integration_test - Step 1 (contouring until path end)
2025-12-01 10:36:00,573 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2025-12-01 10:36:00,573 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m)
2025-12-01 10:36:00,573 - DEBUG - integration_test -   Set spline state to 0.1200
2025-12-01 10:36:00,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:00,590 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2025-12-01 10:36:00,591 - WARNING - integration_test - Could not update reference path at step 1: x and y must have the same length
2025-12-01 10:36:00,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2025-12-01 10:36:00,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:00,595 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:00,595 - INFO - integration_test - Warmstart k=0: x0=0.10987737537796691 , y0=0.004530845114943671 , psi0=0.08000000099948057 , v0=1.2000000019999808 , spline0=0.12000000019999808 , a0=0.0 , w0=0.0
2025-12-01 10:36:00,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:00,596 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803240549, 0.01412060852678125, 0.08000000099948057, 1.2000000019999808, 0.24000000039999617], ws=[0.2294935803240549, 0.014120608526781252, 0.08000000099948057, 1.2000000019999808, 0.28256625370038907], res=[0.0, -1.734723475976807e-18, 0.0, 0.0, -0.0425662533003929], res_norm=4.257e-02
2025-12-01 10:36:00,597 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097852701429, 0.02371037193861883, 0.08000000099948057, 1.2000000019999808, 0.40256625390038714], ws=[0.3491097852701429, 0.023710371938618833, 0.08000000099948057, 1.2000000019999808, 0.4628520712936823], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, -0.06028581739329514], res_norm=6.029e-02
2025-12-01 10:36:00,599 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259902162309, 0.03330013535045641, 0.08000000099948057, 1.2000000019999808, 0.5828520714936803], ws=[0.4687259902162309, 0.033300135350456415, 0.08000000099948057, 1.2000000019999808, 0.6617370077585167], res=[0.0, -6.938893903907228e-18, 0.0, 0.0, -0.07888493626483639], res_norm=7.888e-02
2025-12-01 10:36:00,618 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,631 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,651 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,664 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,684 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,697 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,718 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,732 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,755 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,774 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,797 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,811 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,831 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,846 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,864 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,876 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,900 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,911 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,926 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,936 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:00,951 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:00,963 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,200 - INFO - integration_test - Step 1: MPC solve successful
2025-12-01 10:36:01,208 - INFO - integration_test - Step 1: Computed 10 numeric contouring constraints for visualization (s=0.120)
2025-12-01 10:36:01,209 - DEBUG - integration_test - Step 1: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:01,209 - INFO - integration_test - === Applying control at step 1 ===
2025-12-01 10:36:01,209 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199810173, 'w': 0.8000000095670401}
2025-12-01 10:36:01,209 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:01,209 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:01,210 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:01,210 - INFO - integration_test - Step 1 completed in 0.638s
2025-12-01 10:36:01,231 - INFO - integration_test - Step 2 (contouring until path end)
2025-12-01 10:36:01,231 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2025-12-01 10:36:01,232 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m)
2025-12-01 10:36:01,232 - DEBUG - integration_test -   Set spline state to 0.2600
2025-12-01 10:36:01,232 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:01,246 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2025-12-01 10:36:01,247 - WARNING - integration_test - Could not update reference path at step 2: x and y must have the same length
2025-12-01 10:36:01,247 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2025-12-01 10:36:01,249 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:01,250 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:01,250 - INFO - integration_test - Warmstart k=0: x0=0.23889212816342462 , y0=0.020221622009725257 , psi0=0.16000000195618458 , v0=1.4000000039980827 , spline0=0.2600000005998064 , a0=0.0 , w0=0.0
2025-12-01 10:36:01,250 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:01,251 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039481870822, 0.04252617126978426, 0.16000000195618458, 1.4000000039980827, 0.40000000099961464], ws=[0.3771039481870822, 0.042526171269784266, 0.1600000019561847, 1.4000000039980827, 0.4922268652053315], res=[0.0, -6.938893903907228e-18, -1.1102230246251565e-16, 0.0, -0.09222686420571685], res_norm=9.223e-02
2025-12-01 10:36:01,252 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157682107398, 0.06483072052984329, 0.1600000019561847, 1.4000000039980827, 0.6322268656051397], ws=[0.5153157682107398, 0.06483072052984329, 0.1600000019561847, 1.4000000039980827, 0.7474945961782282], res=[0.0, 0.0, 0.0, 0.0, -0.11526773057308848], res_norm=1.153e-01
2025-12-01 10:36:01,253 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275882343974, 0.08713526978990231, 0.1600000019561847, 1.4000000039980827, 0.8874945965780365], ws=[0.6535275882343974, 0.08713526978990231, 0.1600000019561847, 1.4000000039980827, 0.9682208638895013], res=[0.0, 0.0, 0.0, 0.0, -0.08072626731146482], res_norm=8.073e-02
2025-12-01 10:36:01,268 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,279 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,295 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,306 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,321 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,332 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,347 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,358 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,373 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,384 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,410 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,425 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,436 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,451 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,462 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,477 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,488 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,504 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,514 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,541 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,761 - INFO - integration_test - Step 2: MPC solve successful
2025-12-01 10:36:01,769 - INFO - integration_test - Step 2: Computed 10 numeric contouring constraints for visualization (s=0.260)
2025-12-01 10:36:01,769 - DEBUG - integration_test - Step 2: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:01,769 - INFO - integration_test - === Applying control at step 2 ===
2025-12-01 10:36:01,769 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018022567, 'w': 0.7999999550556585}
2025-12-01 10:36:01,769 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:01,769 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:01,770 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:01,770 - INFO - integration_test - Step 2 completed in 0.539s
2025-12-01 10:36:01,788 - INFO - integration_test - Step 3 (contouring until path end)
2025-12-01 10:36:01,789 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2025-12-01 10:36:01,790 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m)
2025-12-01 10:36:01,790 - DEBUG - integration_test -   Set spline state to 0.4200
2025-12-01 10:36:01,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:01,803 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2025-12-01 10:36:01,804 - WARNING - integration_test - Could not update reference path at step 3: x and y must have the same length
2025-12-01 10:36:01,804 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2025-12-01 10:36:01,806 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:01,808 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:01,808 - INFO - integration_test - Warmstart k=0: x0=0.3858364357167554 , y0=0.05014471666422919 , psi0=0.23999999746175044 , v0=1.6000000058003394 , spline0=0.4200000011798403 , a0=0.0 , w0=0.0
2025-12-01 10:36:01,808 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:01,809 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505123530249, 0.0881771366359666, 0.23999999746175044, 1.6000000058003394, 0.5800000017598743], ws=[0.5412505123530249, 0.0881771366359666, 0.2399999974617506, 1.6000000058003394, 0.7289817606495488], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -0.14898175888967446], res_norm=1.490e-01
2025-12-01 10:36:01,809 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645889892944, 0.12620955660770405, 0.2399999974617506, 1.6000000058003394, 0.8889817612295827], ws=[0.6966645889892944, 0.12620955660770405, 0.2399999974617506, 1.6000000058003394, 1.0077625418059482], res=[0.0, 0.0, 0.0, 0.0, -0.11878078057636543], res_norm=1.188e-01
2025-12-01 10:36:01,810 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786656255639, 0.1642419765794415, 0.2399999974617506, 1.6000000058003394, 1.167762542385982], ws=[0.8520786656255639, 0.1642419765794415, 0.2399999974617506, 1.6000000058003394, 1.3126338160168092], res=[0.0, 0.0, 0.0, 0.0, -0.14487127363082708], res_norm=1.449e-01
2025-12-01 10:36:01,824 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,835 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,851 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,861 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,877 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,887 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,914 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,929 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,940 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,956 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,967 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:01,983 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:01,994 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,009 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,020 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,035 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,046 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,062 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,073 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,089 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,100 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,321 - INFO - integration_test - Step 3: MPC solve successful
2025-12-01 10:36:02,330 - INFO - integration_test - Step 3: Computed 10 numeric contouring constraints for visualization (s=0.420)
2025-12-01 10:36:02,330 - DEBUG - integration_test - Step 3: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:02,330 - INFO - integration_test - === Applying control at step 3 ===
2025-12-01 10:36:02,330 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999540633817, 'w': 0.7999978917697279}
2025-12-01 10:36:02,330 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:02,330 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:02,331 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:02,332 - INFO - integration_test - Step 3 completed in 0.543s
2025-12-01 10:36:02,352 - INFO - integration_test - Step 4 (contouring until path end)
2025-12-01 10:36:02,352 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913547 0.09724074 0.31999979 1.8        0.6       ]
2025-12-01 10:36:02,353 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.455m)
2025-12-01 10:36:02,353 - DEBUG - integration_test -   Set spline state to 0.6000
2025-12-01 10:36:02,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:02,369 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2025-12-01 10:36:02,369 - WARNING - integration_test - Could not update reference path at step 4: x and y must have the same length
2025-12-01 10:36:02,369 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2025-12-01 10:36:02,372 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:02,373 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:02,373 - INFO - integration_test - Warmstart k=0: x0=0.5491354663452305 , y0=0.09724073921905951 , psi0=0.31999978663872325 , v0=1.8000000012066777 , spline0=0.6000000013005081 , a0=0.0 , w0=0.0
2025-12-01 10:36:02,373 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:02,374 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978537955463, 0.1538626837125029, 0.31999978663872325, 1.8000000012066777, 0.7800000014211759], ws=[0.7199978537955463, 0.1538626837125029, 0.3199997866387232, 1.8000000012066777, 0.9928306764957163], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -0.21283067507454045], res_norm=2.128e-01
2025-12-01 10:36:02,375 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602412458619, 0.21048462820594627, 0.3199997866387232, 1.8000000012066777, 1.172830676616384], ws=[0.8908602412458619, 0.21048462820594627, 0.3199997866387232, 1.8000000012066777, 1.361989351775597], res=[0.0, 0.0, 0.0, 0.0, -0.18915867515921292], res_norm=1.892e-01
2025-12-01 10:36:02,376 - INFO - integration_test - Dyn residual k=2: pred=[1.0617226286961776, 0.26710657269938964, 0.3199997866387232, 1.8000000012066777, 1.5419893518962648], ws=[1.0617226286961776, 0.26710657269938964, 0.3199997866387232, 1.8000000012066777, 1.764173077746689], res=[0.0, 0.0, 0.0, 0.0, -0.22218372585042423], res_norm=2.222e-01
2025-12-01 10:36:02,391 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,402 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,417 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,428 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,444 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,455 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,471 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,482 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,497 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,508 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,523 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,534 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,550 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,561 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,576 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,586 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,602 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,613 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,628 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,638 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,654 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,665 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:02,910 - INFO - integration_test - Step 4: MPC solve successful
2025-12-01 10:36:02,918 - INFO - integration_test - Step 4: Computed 10 numeric contouring constraints for visualization (s=0.600)
2025-12-01 10:36:02,919 - DEBUG - integration_test - Step 4: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:02,919 - INFO - integration_test - === Applying control at step 4 ===
2025-12-01 10:36:02,919 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000175190484, 'w': 0.7999998933272986}
2025-12-01 10:36:02,919 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:02,919 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:02,920 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:02,921 - INFO - integration_test - Step 4 completed in 0.568s
2025-12-01 10:36:02,946 - INFO - integration_test - Step 5 (contouring until path end)
2025-12-01 10:36:02,946 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686151 0.16427971 0.39999978 2.         0.8       ]
2025-12-01 10:36:02,946 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.375m)
2025-12-01 10:36:02,947 - DEBUG - integration_test -   Set spline state to 0.8000
2025-12-01 10:36:02,947 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:02,961 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2025-12-01 10:36:02,961 - WARNING - integration_test - Could not update reference path at step 5: x and y must have the same length
2025-12-01 10:36:02,961 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2025-12-01 10:36:02,964 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:02,965 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:02,965 - INFO - integration_test - Warmstart k=0: x0=0.7268615078947744 , y0=0.16427971152413515 , psi0=0.3999997759714531 , v0=2.0000000029585827 , spline0=0.8000000015963664 , a0=0.0 , w0=0.0
2025-12-01 10:36:02,965 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:02,966 - INFO - integration_test - Dyn residual k=0: pred=[0.9110737244160154, 0.24216333883228464, 0.3999997759714531, 2.0000000029585827, 1.0000000018922246], ws=[0.9110737244160154, 0.24216333883228464, 0.3999997759714531, 2.0000000029585827, 1.2100959686957742], res=[0.0, 0.0, 0.0, 0.0, -0.21009596680354958], res_norm=2.101e-01
2025-12-01 10:36:02,967 - INFO - integration_test - Dyn residual k=1: pred=[1.0952859409372564, 0.32004696614043415, 0.3999997759714531, 2.0000000029585827, 1.4100959689916324], ws=[1.0952859409372564, 0.32004696614043415, 0.3999997759714531, 2.0000000029585827, 1.6563639885099468], res=[0.0, 0.0, 0.0, 0.0, -0.24626801951831445], res_norm=2.463e-01
2025-12-01 10:36:02,967 - INFO - integration_test - Dyn residual k=2: pred=[1.2794981574584974, 0.39793059344858367, 0.3999997759714531, 2.0000000029585827, 1.8563639888058052], ws=[1.2794981574584974, 0.39793059344858367, 0.3999997759714531, 2.0000000029585827, 2.0825433323826745], res=[0.0, 0.0, 0.0, 0.0, -0.2261793435768693], res_norm=2.262e-01
2025-12-01 10:36:02,982 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:02,993 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,008 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,019 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,035 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,045 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,061 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,073 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,089 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,100 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,115 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,126 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,141 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,152 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,168 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,179 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,195 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,206 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,221 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,232 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,247 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,258 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,520 - INFO - integration_test - Step 5: MPC solve successful
2025-12-01 10:36:03,528 - INFO - integration_test - Step 5: Computed 10 numeric contouring constraints for visualization (s=0.800)
2025-12-01 10:36:03,529 - DEBUG - integration_test - Step 5: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:03,529 - INFO - integration_test - === Applying control at step 5 ===
2025-12-01 10:36:03,529 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019945016, 'w': 0.80000000695113}
2025-12-01 10:36:03,529 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:03,529 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:03,530 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:03,530 - INFO - integration_test - Step 5 completed in 0.585s
2025-12-01 10:36:03,549 - INFO - integration_test - Step 6 (contouring until path end)
2025-12-01 10:36:03,550 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675194 0.25382371 0.47999978 2.2        1.02      ]
2025-12-01 10:36:03,551 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.373m)
2025-12-01 10:36:03,551 - DEBUG - integration_test -   Set spline state to 1.0200
2025-12-01 10:36:03,551 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:03,566 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2025-12-01 10:36:03,566 - WARNING - integration_test - Could not update reference path at step 6: x and y must have the same length
2025-12-01 10:36:03,566 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2025-12-01 10:36:03,569 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:03,570 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:03,570 - INFO - integration_test - Warmstart k=0: x0=0.9167519414327371 , y0=0.2538237088422584 , psi0=0.47999977666656607 , v0=2.2000000049530843 , spline0=1.0200000020916749 , a0=0.0 , w0=0.0
2025-12-01 10:36:03,570 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:03,571 - INFO - integration_test - Dyn residual k=0: pred=[1.1118908475722713, 0.3554150841090683, 0.47999977666656607, 2.2000000049530843, 1.2400000025869833], ws=[1.1118908475722713, 0.3554150841090683, 0.479999776666566, 2.2000000049530843, 1.5284219559423815], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -0.2884219533553982], res_norm=2.884e-01
2025-12-01 10:36:03,572 - INFO - integration_test - Dyn residual k=1: pred=[1.3070297537118054, 0.4570064593758782, 0.479999776666566, 2.2000000049530843, 1.74842195643769], ws=[1.3070297537118054, 0.4570064593758782, 0.479999776666566, 2.2000000049530843, 2.0213814252994773], res=[0.0, 0.0, 0.0, 0.0, -0.27295946886178735], res_norm=2.730e-01
2025-12-01 10:36:03,572 - INFO - integration_test - Dyn residual k=2: pred=[1.5021686598513395, 0.5585978346426881, 0.479999776666566, 2.2000000049530843, 2.2413814257947857], ws=[1.5021686598513395, 0.5585978346426881, 0.479999776666566, 2.2000000049530843, 2.5576012400295607], res=[0.0, 0.0, 0.0, 0.0, -0.31621981423477497], res_norm=3.162e-01
2025-12-01 10:36:03,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,598 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,614 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,624 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,640 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,650 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,666 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,677 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,693 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,704 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,719 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,730 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,746 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,757 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,773 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,783 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,799 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,810 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,825 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,836 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:03,851 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:03,862 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,140 - INFO - integration_test - Step 6: MPC solve successful
2025-12-01 10:36:04,149 - INFO - integration_test - Step 6: Computed 10 numeric contouring constraints for visualization (s=1.020)
2025-12-01 10:36:04,150 - DEBUG - integration_test - Step 6: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:04,150 - INFO - integration_test - === Applying control at step 6 ===
2025-12-01 10:36:04,150 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019403289, 'w': 0.7999999531561437}
2025-12-01 10:36:04,150 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:04,150 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:04,151 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:04,151 - INFO - integration_test - Step 6 completed in 0.602s
2025-12-01 10:36:04,172 - INFO - integration_test - Step 7 (contouring until path end)
2025-12-01 10:36:04,172 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623093 0.3681913  0.55999977 2.40000001 1.26      ]
2025-12-01 10:36:04,173 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.475m)
2025-12-01 10:36:04,173 - DEBUG - integration_test -   Set spline state to 1.2600
2025-12-01 10:36:04,173 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:04,187 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2025-12-01 10:36:04,188 - WARNING - integration_test - Could not update reference path at step 7: x and y must have the same length
2025-12-01 10:36:04,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2025-12-01 10:36:04,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:04,192 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:04,192 - INFO - integration_test - Warmstart k=0: x0=1.116230926925763 , y0=0.36819130293960195 , psi0=0.5599997719821804 , v0=2.4000000068934133 , spline0=1.260000002781016 , a0=0.0 , w0=0.0
2025-12-01 10:36:04,192 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:04,193 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721832218061, 0.495675944441356, 0.5599997719821804, 2.4000000068934133, 1.5000000034703573], ws=[1.3195721832218061, 0.495675944441356, 0.5599997719821803, 2.4000000068934133, 1.8738630790855617], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.3738630756152044], res_norm=3.739e-01
2025-12-01 10:36:04,194 - INFO - integration_test - Dyn residual k=1: pred=[1.5229134395178492, 0.62316058594311, 0.5599997719821803, 2.4000000068934133, 2.113863079774903], ws=[1.5229134395178492, 0.62316058594311, 0.5599997719821803, 2.4000000068934133, 2.481385931982026], res=[0.0, 0.0, 0.0, 0.0, -0.3675228522071232], res_norm=3.675e-01
2025-12-01 10:36:04,194 - INFO - integration_test - Dyn residual k=2: pred=[1.7262546958138922, 0.750645227444864, 0.5599997719821803, 2.4000000068934133, 2.7213859326713674], ws=[1.7262546958138922, 0.7506452274448641, 0.5599997719821803, 2.4000000068934133, 3.082301545942009], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.3609156132706417], res_norm=3.609e-01
2025-12-01 10:36:04,210 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,221 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,236 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,247 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,263 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,274 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,290 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,300 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,315 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,326 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,341 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,352 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,368 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,379 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,394 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,406 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,421 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,431 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,447 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,458 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,474 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,485 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,778 - INFO - integration_test - Step 7: MPC solve successful
2025-12-01 10:36:04,786 - INFO - integration_test - Step 7: Computed 10 numeric contouring constraints for visualization (s=1.260)
2025-12-01 10:36:04,786 - DEBUG - integration_test - Step 7: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:04,786 - INFO - integration_test - === Applying control at step 7 ===
2025-12-01 10:36:04,786 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019884225, 'w': 0.7999999969187513}
2025-12-01 10:36:04,787 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:04,787 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:04,788 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:04,788 - INFO - integration_test - Step 7 completed in 0.616s
2025-12-01 10:36:04,807 - INFO - integration_test - Step 8 (contouring until path end)
2025-12-01 10:36:04,808 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243458 0.50942425 0.63999977 2.60000001 1.52      ]
2025-12-01 10:36:04,808 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.429m)
2025-12-01 10:36:04,808 - DEBUG - integration_test -   Set spline state to 1.5200
2025-12-01 10:36:04,809 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:04,822 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2025-12-01 10:36:04,822 - WARNING - integration_test - Could not update reference path at step 8: x and y must have the same length
2025-12-01 10:36:04,822 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2025-12-01 10:36:04,825 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:04,826 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:04,826 - INFO - integration_test - Warmstart k=0: x0=1.3224345829024107 , y0=0.5094242522776511 , psi0=0.6399997716740555 , v0=2.600000008881836 , spline0=1.5200000036691996 , a0=0.0 , w0=0.0
2025-12-01 10:36:04,826 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:04,827 - INFO - integration_test - Dyn residual k=0: pred=[1.5309795161170852, 0.6646950199460775, 0.6399997716740555, 2.600000008881836, 1.7800000045573832], ws=[1.5309795161170852, 0.6646950199460775, 0.6399997716740558, 2.600000008881836, 2.172269512376569], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.392269507819186], res_norm=3.923e-01
2025-12-01 10:36:04,828 - INFO - integration_test - Dyn residual k=1: pred=[1.7395244493317596, 0.8199657876145039, 0.6399997716740558, 2.600000008881836, 2.4322695132647527], ws=[1.7395244493317596, 0.8199657876145039, 0.6399997716740558, 2.600000008881836, 2.820811507482576], res=[0.0, 0.0, 0.0, 0.0, -0.3885419942178232], res_norm=3.885e-01
2025-12-01 10:36:04,829 - INFO - integration_test - Dyn residual k=2: pred=[1.9480693825464341, 0.9752365552829303, 0.6399997716740558, 2.600000008881836, 3.0808115083707595], ws=[1.9480693825464341, 0.9752365552829303, 0.6399997716740558, 2.600000008881836, 3.465637722138812], res=[0.0, 0.0, 0.0, 0.0, -0.3848262137680525], res_norm=3.848e-01
2025-12-01 10:36:04,843 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,853 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,869 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,880 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,896 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,907 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,922 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,933 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:04,948 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:04,959 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,015 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,025 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,040 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,051 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,067 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,078 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,093 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,104 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,121 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,131 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,146 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,157 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,562 - INFO - integration_test - Step 8: MPC solve successful
2025-12-01 10:36:05,570 - INFO - integration_test - Step 8: Computed 10 numeric contouring constraints for visualization (s=1.520)
2025-12-01 10:36:05,570 - DEBUG - integration_test - Step 8: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:05,570 - INFO - integration_test - === Applying control at step 8 ===
2025-12-01 10:36:05,570 - INFO - integration_test -   Control dict from planner: {'a': 1.999999874246484, 'w': 0.7999816539953897}
2025-12-01 10:36:05,570 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:05,570 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:05,571 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:05,572 - INFO - integration_test - Step 8 completed in 0.764s
2025-12-01 10:36:05,591 - INFO - integration_test - Step 9 (contouring until path end)
2025-12-01 10:36:05,591 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223962 0.67925651 0.71999794 2.8        1.8       ]
2025-12-01 10:36:05,591 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.464m)
2025-12-01 10:36:05,592 - DEBUG - integration_test -   Set spline state to 1.8000
2025-12-01 10:36:05,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:05,605 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2025-12-01 10:36:05,606 - WARNING - integration_test - Could not update reference path at step 9: x and y must have the same length
2025-12-01 10:36:05,606 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2025-12-01 10:36:05,608 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:05,609 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:05,609 - INFO - integration_test - Warmstart k=0: x0=1.5322396217386387 , y0=0.6792565099174237 , psi0=0.7199979370735945 , v0=2.799999996306484 , spline0=1.800000003299848 , a0=0.0 , w0=0.0
2025-12-01 10:36:05,609 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:05,610 - INFO - integration_test - Dyn residual k=0: pred=[1.7427456064933344, 0.8638837835679298, 0.7199979370735945, 2.799999996306484, 2.0800000029304964], ws=[1.7427456064933347, 0.8638837835679298, 0.7199979370735945, 2.799999996306484, 2.5726637888055475], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.4926637858750511], res_norm=4.927e-01
2025-12-01 10:36:05,611 - INFO - integration_test - Dyn residual k=1: pred=[1.9532515912480304, 1.048511057218436, 0.7199979370735945, 2.799999996306484, 2.852663788436196], ws=[1.9532515912480306, 1.048511057218436, 0.7199979370735945, 2.799999996306484, 3.3533832660220133], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.5007194775858173], res_norm=5.007e-01
2025-12-01 10:36:05,612 - INFO - integration_test - Dyn residual k=2: pred=[2.1637575760027263, 1.233138330868942, 0.7199979370735945, 2.799999996306484, 3.633383265652662], ws=[2.1637575760027263, 1.233138330868942, 0.7199979370735945, 2.799999996306484, 4.144520066607501], res=[0.0, 0.0, 0.0, 0.0, -0.5111368009548389], res_norm=5.111e-01
2025-12-01 10:36:05,626 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,637 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,653 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,664 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,680 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,691 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,706 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,717 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,733 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,744 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,760 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,771 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,787 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,798 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,814 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,824 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,840 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,851 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,867 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,878 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:05,899 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:05,910 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,194 - INFO - integration_test - Step 9: MPC solve successful
2025-12-01 10:36:06,202 - INFO - integration_test - Step 9: Computed 10 numeric contouring constraints for visualization (s=1.800)
2025-12-01 10:36:06,202 - DEBUG - integration_test - Step 9: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:06,202 - INFO - integration_test - === Applying control at step 9 ===
2025-12-01 10:36:06,202 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998853, 'w': 0.8000000097766694}
2025-12-01 10:36:06,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:06,202 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:06,203 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:06,204 - INFO - integration_test - Step 9 completed in 0.613s
2025-12-01 10:36:06,222 - INFO - integration_test - Step 10 (contouring until path end)
2025-12-01 10:36:06,223 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.7422946  0.87908665 0.79999794 3.         2.1       ]
2025-12-01 10:36:06,223 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.397m)
2025-12-01 10:36:06,224 - DEBUG - integration_test -   Set spline state to 2.1000
2025-12-01 10:36:06,224 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:06,237 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2025-12-01 10:36:06,238 - WARNING - integration_test - Could not update reference path at step 10: x and y must have the same length
2025-12-01 10:36:06,238 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2025-12-01 10:36:06,240 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:06,241 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:06,241 - INFO - integration_test - Warmstart k=0: x0=1.7422945985815086 , y0=0.8790866451329183 , psi0=0.7999979380512614 , v0=2.9999999983063694 , spline0=2.100000003130485 , a0=0.0 , w0=0.0
2025-12-01 10:36:06,242 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:06,242 - INFO - integration_test - Dyn residual k=0: pred=[1.9513070550126632, 1.0942930413087681, 0.7999979380512614, 2.9999999983063694, 2.400000002961122], ws=[1.9513070550126632, 1.0942930413087681, 0.7999979380512614, 2.9999999983063694, 3.000185597669665], res=[0.0, 0.0, 0.0, 0.0, -0.600185594708543], res_norm=6.002e-01
2025-12-01 10:36:06,243 - INFO - integration_test - Dyn residual k=1: pred=[2.160319511443818, 1.309499437484618, 0.7999979380512614, 2.9999999983063694, 3.300185597500302], ws=[2.160319511443818, 1.309499437484618, 0.7999979380512614, 2.9999999983063694, 3.8602040901415937], res=[0.0, 0.0, 0.0, 0.0, -0.5600184926412917], res_norm=5.600e-01
2025-12-01 10:36:06,244 - INFO - integration_test - Dyn residual k=2: pred=[2.3693319678749725, 1.524705833660468, 0.7999979380512614, 2.9999999983063694, 4.160204089972231], ws=[2.3693319678749725, 1.524705833660468, 0.7999979380512614, 2.9999999983063694, 4.7396203541830015], res=[0.0, 0.0, 0.0, 0.0, -0.5794162642107707], res_norm=5.794e-01
2025-12-01 10:36:06,259 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,271 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,287 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,298 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,313 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,324 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,339 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,350 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,367 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,378 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,393 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,404 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,420 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,431 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,446 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,457 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,473 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,484 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,499 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,510 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,525 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,535 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:06,913 - INFO - integration_test - Step 10: MPC solve successful
2025-12-01 10:36:06,920 - INFO - integration_test - Step 10: Computed 10 numeric contouring constraints for visualization (s=2.100)
2025-12-01 10:36:06,921 - DEBUG - integration_test - Step 10: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:06,921 - INFO - integration_test - === Applying control at step 10 ===
2025-12-01 10:36:06,921 - INFO - integration_test -   Control dict from planner: {'a': 3.1693505247283785e-07, 'w': 0.8000000086013627}
2025-12-01 10:36:06,921 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:06,921 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:06,922 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:06,922 - INFO - integration_test - Step 10 completed in 0.700s
2025-12-01 10:36:06,940 - INFO - integration_test - Step 11 (contouring until path end)
2025-12-01 10:36:06,940 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94248052 1.10241961 0.87999794 3.00000003 2.40000001]
2025-12-01 10:36:06,941 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.398m)
2025-12-01 10:36:06,941 - DEBUG - integration_test -   Set spline state to 2.4000
2025-12-01 10:36:06,942 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:06,955 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2025-12-01 10:36:06,956 - WARNING - integration_test - Could not update reference path at step 11: x and y must have the same length
2025-12-01 10:36:06,956 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2025-12-01 10:36:06,959 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:06,960 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:06,960 - INFO - integration_test - Warmstart k=0: x0=1.9424805177600906 , y0=1.1024196059969193 , psi0=0.8799979389113977 , v0=3.0 , spline0=2.4000000061304725 , a0=0.0 , w0=0.0
2025-12-01 10:36:06,960 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:06,961 - INFO - integration_test - Dyn residual k=0: pred=[2.1336263375875943, 1.3336408756986307, 0.8799979389113977, 3.0, 2.7000000061304723], ws=[2.1336263375875943, 1.3336408756986307, 0.8799979389113979, 3.0, 3.333156021075866], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.6331560149453939], res_norm=6.332e-01
2025-12-01 10:36:06,962 - INFO - integration_test - Dyn residual k=1: pred=[2.324772157415098, 1.564862145400342, 0.8799979389113979, 3.0, 3.633156021075866], ws=[2.324772157415098, 1.564862145400342, 0.8799979389113979, 3.0, 4.2919688368432025], res=[0.0, 0.0, 0.0, 0.0, -0.6588128157673365], res_norm=6.588e-01
2025-12-01 10:36:06,963 - INFO - integration_test - Dyn residual k=2: pred=[2.5159179772426015, 1.7960834151020533, 0.8799979389113979, 3.0, 4.591968836843202], ws=[2.515917977242602, 1.7960834151020533, 0.8799979389113979, 3.0, 5.217337874212482], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.6253690373692793], res_norm=6.254e-01
2025-12-01 10:36:06,978 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:06,989 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,005 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,015 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,030 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,041 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,057 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,068 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,083 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,094 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,109 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,120 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,147 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,163 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,175 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,191 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,201 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,216 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,227 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,242 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,253 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,489 - INFO - integration_test - Step 11: MPC solve successful
2025-12-01 10:36:07,497 - INFO - integration_test - Step 11: Computed 10 numeric contouring constraints for visualization (s=2.400)
2025-12-01 10:36:07,498 - DEBUG - integration_test - Step 11: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:07,498 - INFO - integration_test - === Applying control at step 11 ===
2025-12-01 10:36:07,498 - INFO - integration_test -   Control dict from planner: {'a': -2.262749537989825e-12, 'w': -0.5598946833934186}
2025-12-01 10:36:07,498 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:07,498 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:07,499 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:07,499 - INFO - integration_test - Step 11 completed in 0.559s
2025-12-01 10:36:07,519 - INFO - integration_test - Step 12 (contouring until path end)
2025-12-01 10:36:07,519 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13999778 1.32817041 0.82400847 3.00000003 2.70000001]
2025-12-01 10:36:07,520 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.279m)
2025-12-01 10:36:07,520 - DEBUG - integration_test -   Set spline state to 2.7000
2025-12-01 10:36:07,520 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:07,535 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.140, 1.328), path_start=(0.000, 0.000), dist=2.519m
2025-12-01 10:36:07,536 - WARNING - integration_test - Could not update reference path at step 12: x and y must have the same length
2025-12-01 10:36:07,536 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2025-12-01 10:36:07,538 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:07,539 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:07,539 - INFO - integration_test - Warmstart k=0: x0=2.13999777510219 , y0=1.3281704127907412 , psi0=0.8240084705720558 , v0=3.0 , spline0=2.7000000091304375 , a0=0.0 , w0=0.0
2025-12-01 10:36:07,539 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:07,540 - INFO - integration_test - Dyn residual k=0: pred=[2.343783262409729, 1.5483327964143498, 0.8240084705720558, 3.0, 3.0000000091304377], ws=[2.343783262409729, 1.5483327964143498, 0.8240084705720561, 3.0, 3.7417212126136175], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.7417212034831797], res_norm=7.417e-01
2025-12-01 10:36:07,541 - INFO - integration_test - Dyn residual k=1: pred=[2.5475687497172674, 1.7684951800379585, 0.8240084705720561, 3.0, 4.041721212613617], ws=[2.5475687497172674, 1.7684951800379585, 0.8240084705720561, 3.0, 4.756998221144171], res=[0.0, 0.0, 0.0, 0.0, -0.7152770085305535], res_norm=7.153e-01
2025-12-01 10:36:07,542 - INFO - integration_test - Dyn residual k=2: pred=[2.751354237024806, 1.988657563661567, 0.8240084705720561, 3.0, 5.056998221144171], ws=[2.751354237024806, 1.988657563661567, 0.8240084705720561, 3.0, 5.809989507409929], res=[0.0, 0.0, 0.0, 0.0, -0.7529912862657584], res_norm=7.530e-01
2025-12-01 10:36:07,557 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,568 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,584 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,595 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,610 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,620 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,636 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,646 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,662 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,673 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,688 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,699 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,714 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,725 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,740 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,751 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,767 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,777 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,793 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,803 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:07,819 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:07,829 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,053 - INFO - integration_test - Step 12: MPC solve successful
2025-12-01 10:36:08,061 - INFO - integration_test - Step 12: Computed 10 numeric contouring constraints for visualization (s=2.700)
2025-12-01 10:36:08,061 - DEBUG - integration_test - Step 12: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:08,061 - INFO - integration_test - === Applying control at step 12 ===
2025-12-01 10:36:08,061 - INFO - integration_test -   Control dict from planner: {'a': -9.322491285165178e-08, 'w': -0.5875608082702456}
2025-12-01 10:36:08,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:08,062 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:08,063 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:08,063 - INFO - integration_test - Step 12 completed in 0.544s
2025-12-01 10:36:08,083 - INFO - integration_test - Step 13 (contouring until path end)
2025-12-01 10:36:08,083 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.35013211 1.54222105 0.76525239 3.00000002 3.00000001]
2025-12-01 10:36:08,084 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.330m)
2025-12-01 10:36:08,084 - DEBUG - integration_test -   Set spline state to 3.0000
2025-12-01 10:36:08,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:08,098 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.350, 1.542), path_start=(0.000, 0.000), dist=2.811m
2025-12-01 10:36:08,098 - WARNING - integration_test - Could not update reference path at step 13: x and y must have the same length
2025-12-01 10:36:08,098 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2025-12-01 10:36:08,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:08,102 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:08,102 - INFO - integration_test - Warmstart k=0: x0=2.350132110153879 , y0=1.542221047918546 , psi0=0.7652523897450313 , v0=3.0 , spline0=3.000000011198153 , a0=0.0 , w0=0.0
2025-12-01 10:36:08,102 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:08,103 - INFO - integration_test - Dyn residual k=0: pred=[2.566494373721598, 1.750036761722514, 0.7652523897450313, 3.0, 3.3000000111981533], ws=[2.566494373721598, 1.750036761722514, 0.7652523897450312, 3.0, 4.073841085519513], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.7738410743213597], res_norm=7.738e-01
2025-12-01 10:36:08,103 - INFO - integration_test - Dyn residual k=1: pred=[2.7828566372893175, 1.9578524755264821, 0.7652523897450312, 3.0, 4.373841085519513], ws=[2.7828566372893175, 1.9578524755264821, 0.7652523897450312, 3.0, 5.18698981253841], res=[0.0, 0.0, 0.0, 0.0, -0.8131487270188975], res_norm=8.131e-01
2025-12-01 10:36:08,104 - INFO - integration_test - Dyn residual k=2: pred=[2.999218900857037, 2.16566818933045, 0.7652523897450312, 3.0, 5.48698981253841], ws=[2.999218900857037, 2.16566818933045, 0.7652523897450312, 3.0, 6.282408794405824], res=[0.0, 0.0, 0.0, 0.0, -0.7954189818674138], res_norm=7.954e-01
2025-12-01 10:36:08,119 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,129 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,144 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,155 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,172 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,183 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,198 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,208 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,223 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,234 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,248 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,260 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,275 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,286 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,301 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,311 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,326 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,337 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,352 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,363 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,378 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,389 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,635 - INFO - integration_test - Step 13: MPC solve successful
2025-12-01 10:36:08,643 - INFO - integration_test - Step 13: Computed 10 numeric contouring constraints for visualization (s=3.000)
2025-12-01 10:36:08,643 - DEBUG - integration_test - Step 13: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:08,643 - INFO - integration_test - === Applying control at step 13 ===
2025-12-01 10:36:08,643 - INFO - integration_test -   Control dict from planner: {'a': 6.162744155446301e-08, 'w': -0.46404984390998116}
2025-12-01 10:36:08,643 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:08,643 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:08,644 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:08,645 - INFO - integration_test - Step 13 completed in 0.561s
2025-12-01 10:36:08,668 - INFO - integration_test - Step 14 (contouring until path end)
2025-12-01 10:36:08,668 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.57123771 1.74494294 0.71884741 3.00000003 3.30000001]
2025-12-01 10:36:08,668 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.196m)
2025-12-01 10:36:08,669 - DEBUG - integration_test -   Set spline state to 3.3000
2025-12-01 10:36:08,669 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:08,683 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.571, 1.745), path_start=(0.000, 0.000), dist=3.107m
2025-12-01 10:36:08,683 - WARNING - integration_test - Could not update reference path at step 14: x and y must have the same length
2025-12-01 10:36:08,684 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2025-12-01 10:36:08,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:08,687 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:08,687 - INFO - integration_test - Warmstart k=0: x0=2.571237708211412 , y0=1.744942942919086 , psi0=0.7188474053540331 , v0=3.0 , spline0=3.3000000138821433 , a0=0.0 , w0=0.0
2025-12-01 10:36:08,687 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:08,688 - INFO - integration_test - Dyn residual k=0: pred=[2.7970072780627775, 1.9424982549942857, 0.7188474053540331, 3.0, 3.600000013882143], ws=[2.7970072780627775, 1.9424982549942857, 0.7188474053540332, 3.0, 4.483692212667388], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.8836921987852451], res_norm=8.837e-01
2025-12-01 10:36:08,689 - INFO - integration_test - Dyn residual k=1: pred=[3.022776847914143, 2.1400535670694856, 0.7188474053540332, 3.0, 4.783692212667388], ws=[3.022776847914143, 2.1400535670694856, 0.7188474053540332, 3.0, 5.6539292663870135], res=[0.0, 0.0, 0.0, 0.0, -0.8702370537196256], res_norm=8.702e-01
2025-12-01 10:36:08,690 - INFO - integration_test - Dyn residual k=2: pred=[3.2485464177655077, 2.3376088791446854, 0.7188474053540332, 3.0, 5.953929266387013], ws=[3.248546417765508, 2.3376088791446854, 0.7188474053540332, 3.0, 6.810199384362647], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.856270117975634], res_norm=8.563e-01
2025-12-01 10:36:08,704 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,715 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,730 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,741 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,756 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,767 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,782 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,793 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,808 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,819 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,845 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,860 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,871 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,886 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,897 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,912 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,922 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,938 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,948 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:08,963 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:08,974 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,241 - INFO - integration_test - Step 14: MPC solve successful
2025-12-01 10:36:09,249 - INFO - integration_test - Step 14: Computed 10 numeric contouring constraints for visualization (s=3.300)
2025-12-01 10:36:09,249 - DEBUG - integration_test - Step 14: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:09,249 - INFO - integration_test - === Applying control at step 14 ===
2025-12-01 10:36:09,249 - INFO - integration_test -   Control dict from planner: {'a': 2.1065595504001526e-08, 'w': -0.5157571457615654}
2025-12-01 10:36:09,249 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:09,249 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:09,250 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:09,251 - INFO - integration_test - Step 14 completed in 0.583s
2025-12-01 10:36:09,274 - INFO - integration_test - Step 15 (contouring until path end)
2025-12-01 10:36:09,275 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.8020006  1.93658986 0.66727169 3.00000003 3.60000002]
2025-12-01 10:36:09,275 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.319m)
2025-12-01 10:36:09,275 - DEBUG - integration_test -   Set spline state to 3.6000
2025-12-01 10:36:09,276 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:09,291 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.802, 1.937), path_start=(0.000, 0.000), dist=3.406m
2025-12-01 10:36:09,291 - WARNING - integration_test - Could not update reference path at step 15: x and y must have the same length
2025-12-01 10:36:09,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2025-12-01 10:36:09,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:09,296 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:09,296 - INFO - integration_test - Warmstart k=0: x0=2.802000599851574 , y0=1.9365898612837018 , psi0=0.6672716907778766 , v0=3.0 , spline0=3.6000000167767894 , a0=0.0 , w0=0.0
2025-12-01 10:36:09,296 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:09,297 - INFO - integration_test - Dyn residual k=0: pred=[3.0376544963477596, 2.122243412464833, 0.6672716907778766, 3.0, 3.900000016776789], ws=[3.0376544963477596, 2.122243412464833, 0.6672716907778766, 3.0, 4.814597712478316], res=[0.0, 0.0, 0.0, 0.0, -0.9145976957015272], res_norm=9.146e-01
2025-12-01 10:36:09,297 - INFO - integration_test - Dyn residual k=1: pred=[3.2733083928439455, 2.3078969636459643, 0.6672716907778766, 3.0, 5.114597712478316], ws=[3.2733083928439455, 2.3078969636459643, 0.6672716907778766, 3.0, 6.016085631496743], res=[0.0, 0.0, 0.0, 0.0, -0.9014879190184271], res_norm=9.015e-01
2025-12-01 10:36:09,298 - INFO - integration_test - Dyn residual k=2: pred=[3.5089622893401313, 2.4935505148270956, 0.6672716907778766, 3.0, 6.316085631496743], ws=[3.5089622893401313, 2.4935505148270956, 0.6672716907778766, 3.0, 7.2758220903063044], res=[0.0, 0.0, 0.0, 0.0, -0.9597364588095614], res_norm=9.597e-01
2025-12-01 10:36:09,314 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,325 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,343 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,354 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,372 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,382 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,397 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,408 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,423 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,434 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,450 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,462 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,478 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,489 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,504 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,515 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,530 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,541 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,557 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,568 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,583 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,594 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,826 - INFO - integration_test - Step 15: MPC solve successful
2025-12-01 10:36:09,834 - INFO - integration_test - Step 15: Computed 10 numeric contouring constraints for visualization (s=3.600)
2025-12-01 10:36:09,834 - DEBUG - integration_test - Step 15: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:09,834 - INFO - integration_test - === Applying control at step 15 ===
2025-12-01 10:36:09,834 - INFO - integration_test -   Control dict from planner: {'a': 4.02031748418557e-09, 'w': -0.3019609351276978}
2025-12-01 10:36:09,834 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:09,834 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:09,835 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:09,836 - INFO - integration_test - Step 15 completed in 0.561s
2025-12-01 10:36:09,857 - INFO - integration_test - Step 16 (contouring until path end)
2025-12-01 10:36:09,858 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.04042148 2.11865756 0.6370756  3.00000003 3.90000002]
2025-12-01 10:36:09,859 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.160m)
2025-12-01 10:36:09,859 - DEBUG - integration_test -   Set spline state to 3.9000
2025-12-01 10:36:09,859 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:09,874 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.040, 2.119), path_start=(0.000, 0.000), dist=3.706m
2025-12-01 10:36:09,874 - WARNING - integration_test - Could not update reference path at step 16: x and y must have the same length
2025-12-01 10:36:09,875 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2025-12-01 10:36:09,877 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:09,879 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:09,879 - INFO - integration_test - Warmstart k=0: x0=3.040421481689007 , y0=2.1186575590829078 , psi0=0.6370755972651069 , v0=3.0 , spline0=3.9000000197116385 , a0=0.0 , w0=0.0
2025-12-01 10:36:09,879 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:09,880 - INFO - integration_test - Dyn residual k=0: pred=[3.281573111358593, 2.297111731092707, 0.6370755972651069, 3.0, 4.200000019711639], ws=[3.281573111358593, 2.297111731092707, 0.637075597265107, 3.0, 5.225875786608553], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.025875766896914], res_norm=1.026e+00
2025-12-01 10:36:09,880 - INFO - integration_test - Dyn residual k=1: pred=[3.5227247410281786, 2.475565903102506, 0.637075597265107, 3.0, 5.525875786608553], ws=[3.5227247410281786, 2.475565903102506, 0.637075597265107, 3.0, 6.552028014961211], res=[0.0, 0.0, 0.0, 0.0, -1.0261522283526583], res_norm=1.026e+00
2025-12-01 10:36:09,881 - INFO - integration_test - Dyn residual k=2: pred=[3.7638763706977643, 2.6540200751123053, 0.637075597265107, 3.0, 6.852028014961211], ws=[3.7638763706977643, 2.6540200751123053, 0.637075597265107, 3.0, 7.879756861227604], res=[0.0, 0.0, 0.0, 0.0, -1.0277288462663936], res_norm=1.028e+00
2025-12-01 10:36:09,896 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,907 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,922 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,933 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,949 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,960 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:09,975 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:09,986 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,001 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,011 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,026 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,037 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,052 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,063 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,079 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,090 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,104 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,115 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,130 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,141 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,156 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,167 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,403 - INFO - integration_test - Step 16: MPC solve successful
2025-12-01 10:36:10,411 - INFO - integration_test - Step 16: Computed 10 numeric contouring constraints for visualization (s=3.900)
2025-12-01 10:36:10,411 - DEBUG - integration_test - Step 16: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:10,411 - INFO - integration_test - === Applying control at step 16 ===
2025-12-01 10:36:10,411 - INFO - integration_test -   Control dict from planner: {'a': 4.341375692779018e-09, 'w': -0.3623624781394669}
2025-12-01 10:36:10,411 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:10,411 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:10,412 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:10,413 - INFO - integration_test - Step 16 completed in 0.555s
2025-12-01 10:36:10,432 - INFO - integration_test - Step 17 (contouring until path end)
2025-12-01 10:36:10,432 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.28475324 2.29270394 0.60083935 3.00000003 4.20000002]
2025-12-01 10:36:10,433 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.319m)
2025-12-01 10:36:10,433 - DEBUG - integration_test -   Set spline state to 4.2000
2025-12-01 10:36:10,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:10,447 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.285, 2.293), path_start=(0.000, 0.000), dist=4.006m
2025-12-01 10:36:10,447 - WARNING - integration_test - Could not update reference path at step 17: x and y must have the same length
2025-12-01 10:36:10,447 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2025-12-01 10:36:10,450 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:10,451 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:10,451 - INFO - integration_test - Warmstart k=0: x0=3.2847532437498375 , y0=2.2927039447631294 , psi0=0.6008393494511601 , v0=3.0 , spline0=4.200000022689902 , a0=0.0 , w0=0.0
2025-12-01 10:36:10,451 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:10,452 - INFO - integration_test - Dyn residual k=0: pred=[3.532211661316127, 2.4623044505866316, 0.6008393494511601, 3.0, 4.5000000226899015], ws=[3.532211661316127, 2.462304450586632, 0.6008393494511601, 3.0, 5.5553091046177], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -1.0553090819277982], res_norm=1.055e+00
2025-12-01 10:36:10,452 - INFO - integration_test - Dyn residual k=1: pred=[3.7796700788824165, 2.6319049564101347, 0.6008393494511601, 3.0, 5.8553091046176995], ws=[3.7796700788824165, 2.6319049564101347, 0.6008393494511601, 3.0, 6.9119668718207965], res=[0.0, 0.0, 0.0, 0.0, -1.056657767203097], res_norm=1.057e+00
2025-12-01 10:36:10,453 - INFO - integration_test - Dyn residual k=2: pred=[4.027128496448706, 2.801505462233637, 0.6008393494511601, 3.0, 7.211966871820796], ws=[4.027128496448706, 2.8015054622336373, 0.6008393494511601, 3.0, 8.271319817339121], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -1.0593529455183246], res_norm=1.059e+00
2025-12-01 10:36:10,468 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,479 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,495 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,505 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,521 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,532 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,547 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,558 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,574 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,584 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,599 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,610 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,625 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,635 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,650 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,661 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,677 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,689 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,704 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,715 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,730 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:10,740 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:10,956 - INFO - integration_test - Step 17: MPC solve successful
2025-12-01 10:36:10,965 - INFO - integration_test - Step 17: Computed 10 numeric contouring constraints for visualization (s=4.200)
2025-12-01 10:36:10,965 - DEBUG - integration_test - Step 17: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:10,965 - INFO - integration_test - === Applying control at step 17 ===
2025-12-01 10:36:10,965 - INFO - integration_test -   Control dict from planner: {'a': 1.3347382616743058e-09, 'w': -0.257197626329718}
2025-12-01 10:36:10,965 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:10,965 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:10,966 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:10,966 - INFO - integration_test - Step 17 completed in 0.534s
2025-12-01 10:36:10,988 - INFO - integration_test - Step 18 (contouring until path end)
2025-12-01 10:36:10,988 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.5343653  2.45910364 0.57511959 3.00000003 4.50000003]
2025-12-01 10:36:10,989 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.156m)
2025-12-01 10:36:10,989 - DEBUG - integration_test -   Set spline state to 4.5000
2025-12-01 10:36:10,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:11,003 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.534, 2.459), path_start=(0.000, 0.000), dist=4.306m
2025-12-01 10:36:11,004 - WARNING - integration_test - Could not update reference path at step 18: x and y must have the same length
2025-12-01 10:36:11,004 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2025-12-01 10:36:11,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:11,008 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:11,008 - INFO - integration_test - Warmstart k=0: x0=3.5343653043418657 , y0=2.4591036437958658 , psi0=0.5751195868181883 , v0=3.0 , spline0=4.500000025681512 , a0=0.0 , w0=0.0
2025-12-01 10:36:11,008 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:11,009 - INFO - integration_test - Dyn residual k=0: pred=[3.7861034826262427, 2.6222841867354676, 0.5751195868181883, 3.0, 4.800000025681512], ws=[3.7861034826262427, 2.6222841867354676, 0.5751195868181882, 3.0, 5.968010660049737], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.1680106343682253], res_norm=1.168e+00
2025-12-01 10:36:11,010 - INFO - integration_test - Dyn residual k=1: pred=[4.03784166091062, 2.785464729675069, 0.5751195868181882, 3.0, 6.268010660049737], ws=[4.03784166091062, 2.785464729675069, 0.5751195868181882, 3.0, 7.449479616768911], res=[0.0, 0.0, 0.0, 0.0, -1.1814689567191738], res_norm=1.181e+00
2025-12-01 10:36:11,010 - INFO - integration_test - Dyn residual k=2: pred=[4.289579839194997, 2.9486452726146704, 0.5751195868181882, 3.0, 7.749479616768911], ws=[4.289579839194997, 2.9486452726146704, 0.5751195868181882, 3.0, 8.873391039632434], res=[0.0, 0.0, 0.0, 0.0, -1.1239114228635234], res_norm=1.124e+00
2025-12-01 10:36:11,025 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,036 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,051 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,062 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,078 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,089 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,104 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,114 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,129 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,139 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,155 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,167 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,182 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,192 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,207 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,218 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,233 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,243 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,259 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,270 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,286 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,296 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,537 - INFO - integration_test - Step 18: MPC solve successful
2025-12-01 10:36:11,544 - INFO - integration_test - Step 18: Computed 10 numeric contouring constraints for visualization (s=4.500)
2025-12-01 10:36:11,545 - DEBUG - integration_test - Step 18: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:11,545 - INFO - integration_test - === Applying control at step 18 ===
2025-12-01 10:36:11,545 - INFO - integration_test -   Control dict from planner: {'a': 5.544207999150678e-10, 'w': -0.2844950959388231}
2025-12-01 10:36:11,545 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:11,545 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:11,546 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:11,546 - INFO - integration_test - Step 18 completed in 0.558s
2025-12-01 10:36:11,569 - INFO - integration_test - Step 19 (contouring until path end)
2025-12-01 10:36:11,569 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.78839057 2.6186815  0.54667008 3.00000003 4.80000003]
2025-12-01 10:36:11,570 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.301m)
2025-12-01 10:36:11,570 - DEBUG - integration_test -   Set spline state to 4.8000
2025-12-01 10:36:11,570 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:11,584 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.788, 2.619), path_start=(0.000, 0.000), dist=4.605m
2025-12-01 10:36:11,584 - WARNING - integration_test - Could not update reference path at step 19: x and y must have the same length
2025-12-01 10:36:11,584 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2025-12-01 10:36:11,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:11,588 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:11,588 - INFO - integration_test - Warmstart k=0: x0=3.7883905748342874 , y0=2.6186815045504197 , psi0=0.546670077224306 , v0=3.0 , spline0=4.800000028678666 , a0=0.0 , w0=0.0
2025-12-01 10:36:11,588 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:11,589 - INFO - integration_test - Dyn residual k=0: pred=[4.044668664952826, 2.7746351531938362, 0.546670077224306, 3.0, 5.100000028678666], ws=[4.044668664952826, 2.7746351531938362, 0.5466700772243058, 3.0, 6.295829158539221], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.195829129860555], res_norm=1.196e+00
2025-12-01 10:36:11,590 - INFO - integration_test - Dyn residual k=1: pred=[4.300946755071364, 2.930588801837253, 0.5466700772243058, 3.0, 6.595829158539221], ws=[4.300946755071364, 2.930588801837253, 0.5466700772243058, 3.0, 7.806720761134686], res=[0.0, 0.0, 0.0, 0.0, -1.2108916025954652], res_norm=1.211e+00
2025-12-01 10:36:11,590 - INFO - integration_test - Dyn residual k=2: pred=[4.557224845189903, 3.0865424504806693, 0.5466700772243058, 3.0, 8.106720761134687], ws=[4.557224845189903, 3.0865424504806693, 0.5466700772243058, 3.0, 9.330224853181454], res=[0.0, 0.0, 0.0, 0.0, -1.2235040920467668], res_norm=1.224e+00
2025-12-01 10:36:11,604 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,615 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,630 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,641 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,656 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,667 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,682 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,693 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,708 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,719 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,735 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,746 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,762 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,772 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,787 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,798 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,813 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,823 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,838 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,849 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:11,864 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:11,875 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,138 - INFO - integration_test - Step 19: MPC solve successful
2025-12-01 10:36:12,146 - INFO - integration_test - Step 19: Computed 10 numeric contouring constraints for visualization (s=4.800)
2025-12-01 10:36:12,147 - DEBUG - integration_test - Step 19: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:12,147 - INFO - integration_test - === Applying control at step 19 ===
2025-12-01 10:36:12,147 - INFO - integration_test -   Control dict from planner: {'a': 1.1447049641795033e-10, 'w': -0.24471955758332592}
2025-12-01 10:36:12,147 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:12,147 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:12,148 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:12,149 - INFO - integration_test - Step 19 completed in 0.580s
2025-12-01 10:36:12,168 - INFO - integration_test - Step 20 (contouring until path end)
2025-12-01 10:36:12,169 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.04655124 2.77148393 0.52219812 3.00000003 5.10000003]
2025-12-01 10:36:12,169 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.172m)
2025-12-01 10:36:12,169 - DEBUG - integration_test -   Set spline state to 5.1000
2025-12-01 10:36:12,170 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:12,184 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.047, 2.771), path_start=(0.000, 0.000), dist=4.905m
2025-12-01 10:36:12,184 - WARNING - integration_test - Could not update reference path at step 20: x and y must have the same length
2025-12-01 10:36:12,184 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2025-12-01 10:36:12,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:12,188 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:12,188 - INFO - integration_test - Warmstart k=0: x0=4.046551238667816 , y0=2.7714839324925697 , psi0=0.5221981214659734 , v0=3.0 , spline0=5.100000031676966 , a0=0.0 , w0=0.0
2025-12-01 10:36:12,188 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:12,189 - INFO - integration_test - Dyn residual k=0: pred=[4.306568703004889, 2.9211198848560262, 0.5221981214659734, 3.0, 5.400000031676965], ws=[4.306568703004889, 2.9211198848560262, 0.5221981214659737, 3.0, 6.709752980581777], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.3097529489048112], res_norm=1.310e+00
2025-12-01 10:36:12,190 - INFO - integration_test - Dyn residual k=1: pred=[4.5665861673419625, 3.0707558372194828, 0.5221981214659737, 3.0, 7.009752980581776], ws=[4.5665861673419625, 3.0707558372194828, 0.5221981214659737, 3.0, 8.27392710801447], res=[0.0, 0.0, 0.0, 0.0, -1.2641741274326943], res_norm=1.264e+00
2025-12-01 10:36:12,190 - INFO - integration_test - Dyn residual k=2: pred=[4.826603631679036, 3.2203917895829393, 0.5221981214659737, 3.0, 8.573927108014471], ws=[4.826603631679036, 3.2203917895829393, 0.5221981214659737, 3.0, 9.85225088185287], res=[0.0, 0.0, 0.0, 0.0, -1.2783237738383981], res_norm=1.278e+00
2025-12-01 10:36:12,205 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,215 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,231 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,241 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,256 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,267 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,282 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,292 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,307 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,317 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,332 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,343 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,358 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,369 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,384 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,395 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,410 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,421 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,436 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,447 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,462 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,474 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,727 - INFO - integration_test - Step 20: MPC solve successful
2025-12-01 10:36:12,734 - INFO - integration_test - Step 20: Computed 10 numeric contouring constraints for visualization (s=5.100)
2025-12-01 10:36:12,735 - DEBUG - integration_test - Step 20: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:12,735 - INFO - integration_test - === Applying control at step 20 ===
2025-12-01 10:36:12,735 - INFO - integration_test -   Control dict from planner: {'a': -7.050060783472227e-11, 'w': -0.24615892513770526}
2025-12-01 10:36:12,735 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:12,735 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:12,736 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:12,736 - INFO - integration_test - Step 20 completed in 0.568s
2025-12-01 10:36:12,761 - INFO - integration_test - Step 21 (contouring until path end)
2025-12-01 10:36:12,761 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.30838407 2.91790466 0.49758223 3.00000003 5.40000003]
2025-12-01 10:36:12,762 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.295m)
2025-12-01 10:36:12,762 - DEBUG - integration_test -   Set spline state to 5.4000
2025-12-01 10:36:12,762 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:12,777 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.308, 2.918), path_start=(0.000, 0.000), dist=5.203m
2025-12-01 10:36:12,777 - WARNING - integration_test - Could not update reference path at step 21: x and y must have the same length
2025-12-01 10:36:12,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2025-12-01 10:36:12,780 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:12,781 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:12,781 - INFO - integration_test - Warmstart k=0: x0=4.308384065456984 , y0=2.9179046556255215 , psi0=0.49758222895220294 , v0=3.0 , spline0=5.40000003467456 , a0=0.0 , w0=0.0
2025-12-01 10:36:12,781 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:12,782 - INFO - integration_test - Dyn residual k=0: pred=[4.572005806540009, 3.061095359333389, 0.49758222895220294, 3.0, 5.700000034674559], ws=[4.572005806540009, 3.061095359333389, 0.49758222895220294, 3.0, 7.122338726384561], res=[0.0, 0.0, 0.0, 0.0, -1.4223386917100012], res_norm=1.422e+00
2025-12-01 10:36:12,783 - INFO - integration_test - Dyn residual k=1: pred=[4.835627547623034, 3.204286063041257, 0.49758222895220294, 3.0, 7.42233872638456], ws=[4.835627547623034, 3.204286063041257, 0.49758222895220294, 3.0, 8.809372039329254], res=[0.0, 0.0, 0.0, 0.0, -1.387033312944694], res_norm=1.387e+00
2025-12-01 10:36:12,784 - INFO - integration_test - Dyn residual k=2: pred=[5.0992492887060585, 3.3474767667491245, 0.49758222895220294, 3.0, 9.109372039329255], ws=[5.0992492887060585, 3.3474767667491245, 0.49758222895220294, 3.0, 10.44382294211439], res=[0.0, 0.0, 0.0, 0.0, -1.334450902785136], res_norm=1.334e+00
2025-12-01 10:36:12,798 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,809 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,836 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,851 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,862 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,888 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,904 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,914 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,929 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,940 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,955 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,967 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:12,982 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:12,993 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,007 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,018 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,033 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,044 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,059 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,070 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,315 - INFO - integration_test - Step 21: MPC solve successful
2025-12-01 10:36:13,323 - INFO - integration_test - Step 21: Computed 10 numeric contouring constraints for visualization (s=5.400)
2025-12-01 10:36:13,323 - DEBUG - integration_test - Step 21: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:13,323 - INFO - integration_test - === Applying control at step 21 ===
2025-12-01 10:36:13,323 - INFO - integration_test -   Control dict from planner: {'a': -3.4384594033506224e-09, 'w': -0.21681841103975183}
2025-12-01 10:36:13,324 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:13,324 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:13,325 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:13,325 - INFO - integration_test - Step 21 completed in 0.564s
2025-12-01 10:36:13,348 - INFO - integration_test - Step 22 (contouring until path end)
2025-12-01 10:36:13,349 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.57353741 3.05822635 0.47590039 3.00000003 5.70000004]
2025-12-01 10:36:13,350 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.198m)
2025-12-01 10:36:13,350 - DEBUG - integration_test -   Set spline state to 5.7000
2025-12-01 10:36:13,350 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:13,364 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.574, 3.058), path_start=(0.000, 0.000), dist=5.502m
2025-12-01 10:36:13,365 - WARNING - integration_test - Could not update reference path at step 22: x and y must have the same length
2025-12-01 10:36:13,365 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2025-12-01 10:36:13,367 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:13,369 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:13,369 - INFO - integration_test - Warmstart k=0: x0=4.57353741304972 , y0=3.0582263515632664 , psi0=0.47590038784822775 , v0=3.0 , spline0=5.7000000376377695 , a0=0.0 , w0=0.0
2025-12-01 10:36:13,369 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:13,370 - INFO - integration_test - Dyn residual k=0: pred=[4.840201586817047, 3.1956680425779966, 0.47590038784822775, 3.0, 6.000000037637769], ws=[4.840201586817047, 3.1956680425779966, 0.4759003878482275, 3.0, 7.450611669950329], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.45061163231256], res_norm=1.451e+00
2025-12-01 10:36:13,370 - INFO - integration_test - Dyn residual k=1: pred=[5.106865760584374, 3.333109733592727, 0.4759003878482275, 3.0, 7.750611669950329], ws=[5.106865760584374, 3.333109733592727, 0.4759003878482275, 3.0, 9.164081723606213], res=[0.0, 0.0, 0.0, 0.0, -1.4134700536558835], res_norm=1.413e+00
2025-12-01 10:36:13,371 - INFO - integration_test - Dyn residual k=2: pred=[5.373529934351701, 3.470551424607457, 0.4759003878482275, 3.0, 9.464081723606213], ws=[5.373529934351701, 3.470551424607457, 0.4759003878482275, 3.0, 10.822871055452998], res=[0.0, 0.0, 0.0, 0.0, -1.3587893318467845], res_norm=1.359e+00
2025-12-01 10:36:13,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,397 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,412 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,422 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,438 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,448 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,464 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,475 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,490 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,500 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,516 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,526 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,542 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,553 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,568 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,579 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,594 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,604 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,620 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,630 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,645 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,656 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:13,916 - INFO - integration_test - Step 22: MPC solve successful
2025-12-01 10:36:13,924 - INFO - integration_test - Step 22: Computed 10 numeric contouring constraints for visualization (s=5.700)
2025-12-01 10:36:13,925 - DEBUG - integration_test - Step 22: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:13,925 - INFO - integration_test - === Applying control at step 22 ===
2025-12-01 10:36:13,925 - INFO - integration_test -   Control dict from planner: {'a': -4.795823907050102e-08, 'w': -0.24040215792159716}
2025-12-01 10:36:13,925 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:13,925 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:13,926 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:13,926 - INFO - integration_test - Step 22 completed in 0.577s
2025-12-01 10:36:13,950 - INFO - integration_test - Step 23 (contouring until path end)
2025-12-01 10:36:13,950 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.84182789 3.19244963 0.45186017 3.00000002 6.00000004]
2025-12-01 10:36:13,951 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.418m)
2025-12-01 10:36:13,951 - DEBUG - integration_test -   Set spline state to 6.0000
2025-12-01 10:36:13,951 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:13,965 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.842, 3.192), path_start=(0.000, 0.000), dist=5.800m
2025-12-01 10:36:13,966 - WARNING - integration_test - Could not update reference path at step 23: x and y must have the same length
2025-12-01 10:36:13,966 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2025-12-01 10:36:13,968 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:13,970 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:13,970 - INFO - integration_test - Warmstart k=0: x0=4.841827888791959 , y0=3.192449627765778 , psi0=0.45186017205606804 , v0=3.0 , spline0=6.000000040121397 , a0=0.0 , w0=0.0
2025-12-01 10:36:13,970 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:13,971 - INFO - integration_test - Dyn residual k=0: pred=[5.111718819053838, 3.3234415579079726, 0.45186017205606804, 3.0, 6.300000040121397], ws=[5.111718819053838, 3.3234415579079726, 0.451860172056068, 3.0, 7.8632935040730585], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -1.5632934639516618], res_norm=1.563e+00
2025-12-01 10:36:13,971 - INFO - integration_test - Dyn residual k=1: pred=[5.381609749315717, 3.4544334880501673, 0.451860172056068, 3.0, 8.163293504073058], ws=[5.381609749315717, 3.4544334880501673, 0.451860172056068, 3.0, 9.69366007822206], res=[0.0, 0.0, 0.0, 0.0, -1.5303665741490011], res_norm=1.530e+00
2025-12-01 10:36:13,972 - INFO - integration_test - Dyn residual k=2: pred=[5.651500679577596, 3.585425418192362, 0.451860172056068, 3.0, 9.99366007822206], ws=[5.651500679577596, 3.585425418192362, 0.451860172056068, 3.0, 11.402131414624181], res=[0.0, 0.0, 0.0, 0.0, -1.4084713364021209], res_norm=1.408e+00
2025-12-01 10:36:13,987 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:13,998 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,013 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,024 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,039 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,049 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,065 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,076 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,091 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,101 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,116 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,127 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,142 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,153 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,168 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,178 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,193 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,203 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,219 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,229 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,244 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,254 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,486 - INFO - integration_test - Step 23: MPC solve successful
2025-12-01 10:36:14,494 - INFO - integration_test - Step 23: Computed 10 numeric contouring constraints for visualization (s=6.000)
2025-12-01 10:36:14,494 - DEBUG - integration_test - Step 23: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:14,494 - INFO - integration_test - === Applying control at step 23 ===
2025-12-01 10:36:14,494 - INFO - integration_test -   Control dict from planner: {'a': -3.223585911076756e-07, 'w': -0.24471932358024567}
2025-12-01 10:36:14,494 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:14,494 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:14,496 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:14,496 - INFO - integration_test - Step 23 completed in 0.546s
2025-12-01 10:36:14,518 - INFO - integration_test - Step 24 (contouring until path end)
2025-12-01 10:36:14,518 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.11329462 3.32012627 0.42738824 2.99999999 6.30000004]
2025-12-01 10:36:14,519 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.360m)
2025-12-01 10:36:14,519 - DEBUG - integration_test -   Set spline state to 6.3000
2025-12-01 10:36:14,519 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:14,533 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.113, 3.320), path_start=(0.000, 0.000), dist=6.097m
2025-12-01 10:36:14,534 - WARNING - integration_test - Could not update reference path at step 24: x and y must have the same length
2025-12-01 10:36:14,534 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2025-12-01 10:36:14,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:14,537 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:14,537 - INFO - integration_test - Warmstart k=0: x0=5.11329461500872 , y0=3.3201262725613523 , psi0=0.42738823969804346 , v0=2.9999999926004133 , spline0=6.300000039381438 , a0=0.0 , w0=0.0
2025-12-01 10:36:14,537 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:14,538 - INFO - integration_test - Dyn residual k=0: pred=[5.386310038802721, 3.4444748870554713, 0.42738823969804346, 2.9999999926004133, 6.60000003864148], ws=[5.386310038802721, 3.4444748870554713, 0.4273882396980433, 2.9999999926004133, 8.189872455704304], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -1.589872417062824], res_norm=1.590e+00
2025-12-01 10:36:14,539 - INFO - integration_test - Dyn residual k=1: pred=[5.659325462596722, 3.5688235015495904, 0.4273882396980433, 2.9999999926004133, 8.489872454964345], ws=[5.659325462596722, 3.5688235015495904, 0.4273882396980433, 2.9999999926004133, 10.04472204165309], res=[0.0, 0.0, 0.0, 0.0, -1.5548495866887446], res_norm=1.555e+00
2025-12-01 10:36:14,540 - INFO - integration_test - Dyn residual k=2: pred=[5.9323408863907225, 3.6931721160437094, 0.4273882396980433, 2.9999999926004133, 10.344722040913132], ws=[5.9323408863907225, 3.6931721160437094, 0.4273882396980433, 2.9999999926004133, 11.839796323142526], res=[0.0, 0.0, 0.0, 0.0, -1.4950742822293943], res_norm=1.495e+00
2025-12-01 10:36:14,554 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,565 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,581 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,592 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,607 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,618 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,633 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,643 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,659 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,673 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,688 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,698 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,713 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,724 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,739 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,750 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,766 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,777 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,792 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,803 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:14,818 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:14,828 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,081 - INFO - integration_test - Step 24: MPC solve successful
2025-12-01 10:36:15,089 - INFO - integration_test - Step 24: Computed 10 numeric contouring constraints for visualization (s=6.300)
2025-12-01 10:36:15,089 - DEBUG - integration_test - Step 24: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:15,089 - INFO - integration_test - === Applying control at step 24 ===
2025-12-01 10:36:15,089 - INFO - integration_test -   Control dict from planner: {'a': 2.472276802472157e-07, 'w': -0.17979494798319703}
2025-12-01 10:36:15,089 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:15,089 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:15,090 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:15,091 - INFO - integration_test - Step 24 completed in 0.573s
2025-12-01 10:36:15,110 - INFO - integration_test - Step 25 (contouring until path end)
2025-12-01 10:36:15,111 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.38741316 3.44201391 0.40940874 3.00000002 6.60000004]
2025-12-01 10:36:15,111 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.229m)
2025-12-01 10:36:15,111 - DEBUG - integration_test -   Set spline state to 6.6000
2025-12-01 10:36:15,112 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:15,125 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.387, 3.442), path_start=(0.000, 0.000), dist=6.393m
2025-12-01 10:36:15,126 - WARNING - integration_test - Could not update reference path at step 25: x and y must have the same length
2025-12-01 10:36:15,126 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2025-12-01 10:36:15,128 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:15,129 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:15,129 - INFO - integration_test - Warmstart k=0: x0=5.387413163439311 , y0=3.442013914551474 , psi0=0.4094087448997238 , v0=3.0 , spline0=6.6000000411137565 , a0=0.0 , w0=0.0
2025-12-01 10:36:15,129 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:15,130 - INFO - integration_test - Dyn residual k=0: pred=[5.66262006612821, 3.561434016345029, 0.4094087448997238, 3.0, 6.900000041113756], ws=[5.66262006612821, 3.561434016345029, 0.4094087448997237, 3.0, 8.601681980332952], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.7016819392191955], res_norm=1.702e+00
2025-12-01 10:36:15,131 - INFO - integration_test - Dyn residual k=1: pred=[5.937826968817109, 3.6808541181385843, 0.4094087448997237, 3.0, 8.901681980332953], ws=[5.937826968817109, 3.6808541181385843, 0.4094087448997237, 3.0, 10.502433879258463], res=[0.0, 0.0, 0.0, 0.0, -1.6007518989255107], res_norm=1.601e+00
2025-12-01 10:36:15,132 - INFO - integration_test - Dyn residual k=2: pred=[6.213033871506007, 3.8002742199321395, 0.4094087448997237, 3.0, 10.802433879258464], ws=[6.213033871506007, 3.8002742199321395, 0.4094087448997237, 3.0, 12.341001816689062], res=[0.0, 0.0, 0.0, 0.0, -1.5385679374305976], res_norm=1.539e+00
2025-12-01 10:36:15,146 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,157 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,173 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,184 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,199 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,210 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,225 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,236 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,251 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,262 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,278 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,288 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,303 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,314 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,329 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,340 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,356 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,367 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,382 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,393 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,408 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,419 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,664 - INFO - integration_test - Step 25: MPC solve successful
2025-12-01 10:36:15,672 - INFO - integration_test - Step 25: Computed 10 numeric contouring constraints for visualization (s=6.600)
2025-12-01 10:36:15,673 - DEBUG - integration_test - Step 25: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:15,673 - INFO - integration_test - === Applying control at step 25 ===
2025-12-01 10:36:15,673 - INFO - integration_test -   Control dict from planner: {'a': 8.450751833385259e-08, 'w': -0.3311485749707275}
2025-12-01 10:36:15,673 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:15,673 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:15,674 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:15,675 - INFO - integration_test - Step 25 completed in 0.564s
2025-12-01 10:36:15,696 - INFO - integration_test - Step 26 (contouring until path end)
2025-12-01 10:36:15,697 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.66454688 3.55685589 0.37629389 3.00000003 6.90000004]
2025-12-01 10:36:15,698 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.381m)
2025-12-01 10:36:15,698 - DEBUG - integration_test -   Set spline state to 6.9000
2025-12-01 10:36:15,698 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:15,712 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.665, 3.557), path_start=(0.000, 0.000), dist=6.689m
2025-12-01 10:36:15,712 - WARNING - integration_test - Could not update reference path at step 26: x and y must have the same length
2025-12-01 10:36:15,712 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2025-12-01 10:36:15,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:15,716 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:15,716 - INFO - integration_test - Warmstart k=0: x0=5.664546881772813 , y0=3.5568558902303025 , psi0=0.376293887402651 , v0=3.0 , spline0=6.90000004369115 , a0=0.0 , w0=0.0
2025-12-01 10:36:15,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:15,717 - INFO - integration_test - Dyn residual k=0: pred=[5.943556760092165, 3.66709874850339, 0.376293887402651, 3.0, 7.2000000436911495], ws=[5.943556760092165, 3.66709874850339, 0.3762938874026509, 3.0, 8.92653683178122], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.7265367880900708], res_norm=1.727e+00
2025-12-01 10:36:15,717 - INFO - integration_test - Dyn residual k=1: pred=[6.222566638411518, 3.777341606776478, 0.3762938874026509, 3.0, 9.226536831781221], ws=[6.222566638411518, 3.777341606776478, 0.3762938874026509, 3.0, 10.911896890468196], res=[0.0, 0.0, 0.0, 0.0, -1.6853600586869746], res_norm=1.685e+00
2025-12-01 10:36:15,718 - INFO - integration_test - Dyn residual k=2: pred=[6.501576516730871, 3.8875844650495655, 0.3762938874026509, 3.0, 11.211896890468196], ws=[6.501576516730871, 3.8875844650495655, 0.3762938874026509, 3.0, 12.769249165453385], res=[0.0, 0.0, 0.0, 0.0, -1.5573522749851882], res_norm=1.557e+00
2025-12-01 10:36:15,732 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,743 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,770 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,786 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,797 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,812 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,823 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,838 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,849 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,865 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,876 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,891 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,901 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,916 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,927 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,942 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,952 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,968 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:15,980 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:15,994 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,005 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,265 - INFO - integration_test - Step 26: MPC solve successful
2025-12-01 10:36:16,274 - INFO - integration_test - Step 26: Computed 10 numeric contouring constraints for visualization (s=6.900)
2025-12-01 10:36:16,274 - DEBUG - integration_test - Step 26: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:16,274 - INFO - integration_test - === Applying control at step 26 ===
2025-12-01 10:36:16,275 - INFO - integration_test -   Control dict from planner: {'a': 2.712096431243596e-08, 'w': -0.2473389650151263}
2025-12-01 10:36:16,275 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:16,275 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:16,276 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:16,276 - INFO - integration_test - Step 26 completed in 0.579s
2025-12-01 10:36:16,297 - INFO - integration_test - Step 27 (contouring until path end)
2025-12-01 10:36:16,299 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.94489161 3.66363718 0.35155999 3.00000003 7.20000005]
2025-12-01 10:36:16,299 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.261m)
2025-12-01 10:36:16,299 - DEBUG - integration_test -   Set spline state to 7.2000
2025-12-01 10:36:16,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:16,314 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.945, 3.664), path_start=(0.000, 0.000), dist=6.983m
2025-12-01 10:36:16,314 - WARNING - integration_test - Could not update reference path at step 27: x and y must have the same length
2025-12-01 10:36:16,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2025-12-01 10:36:16,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:16,318 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:16,318 - INFO - integration_test - Warmstart k=0: x0=5.944891613644496 , y0=3.6636371845387723 , psi0=0.3515599909011384 , v0=3.0 , spline0=7.200000046539753 , a0=0.0 , w0=0.0
2025-12-01 10:36:16,318 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:16,319 - INFO - integration_test - Dyn residual k=0: pred=[6.226542609421357, 3.766946025292614, 0.3515599909011384, 3.0, 7.5000000465397525], ws=[6.226542609421357, 3.766946025292614, 0.35155999090113843, 3.0, 9.336205392744047], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.8362053462042942], res_norm=1.836e+00
2025-12-01 10:36:16,319 - INFO - integration_test - Dyn residual k=1: pred=[6.508193605198218, 3.870254866046456, 0.35155999090113843, 3.0, 9.636205392744047], ws=[6.508193605198218, 3.870254866046456, 0.35155999090113843, 3.0, 11.363410355704865], res=[0.0, 0.0, 0.0, 0.0, -1.7272049629608173], res_norm=1.727e+00
2025-12-01 10:36:16,320 - INFO - integration_test - Dyn residual k=2: pred=[6.789844600975079, 3.973563706800298, 0.35155999090113843, 3.0, 11.663410355704865], ws=[6.789844600975079, 3.973563706800298, 0.35155999090113843, 3.0, 13.261682761014876], res=[0.0, 0.0, 0.0, 0.0, -1.598272405310011], res_norm=1.598e+00
2025-12-01 10:36:16,335 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,346 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,362 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,373 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,389 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,399 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,414 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,425 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,440 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,451 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,477 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,493 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,504 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,519 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,529 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,544 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,555 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,571 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,582 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,598 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,609 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,865 - INFO - integration_test - Step 27: MPC solve successful
2025-12-01 10:36:16,873 - INFO - integration_test - Step 27: Computed 10 numeric contouring constraints for visualization (s=7.200)
2025-12-01 10:36:16,874 - DEBUG - integration_test - Step 27: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:16,874 - INFO - integration_test - === Applying control at step 27 ===
2025-12-01 10:36:16,874 - INFO - integration_test -   Control dict from planner: {'a': -4.897954281100396e-08, 'w': -0.23343101131665817}
2025-12-01 10:36:16,874 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:16,874 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:16,875 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:16,876 - INFO - integration_test - Step 27 completed in 0.577s
2025-12-01 10:36:16,897 - INFO - integration_test - Step 28 (contouring until path end)
2025-12-01 10:36:16,898 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.22772275 3.76364949 0.32821689 3.00000002 7.50000005]
2025-12-01 10:36:16,898 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.409m)
2025-12-01 10:36:16,898 - DEBUG - integration_test -   Set spline state to 7.5000
2025-12-01 10:36:16,899 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:16,913 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.228, 3.764), path_start=(0.000, 0.000), dist=7.277m
2025-12-01 10:36:16,913 - WARNING - integration_test - Could not update reference path at step 28: x and y must have the same length
2025-12-01 10:36:16,913 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2025-12-01 10:36:16,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:16,917 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:16,917 - INFO - integration_test - Warmstart k=0: x0=6.2277227535872965 , y0=3.7636494896857653 , psi0=0.32821688976947255 , v0=3.0 , spline0=7.50000004889856 , a0=0.0 , w0=0.0
2025-12-01 10:36:16,917 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:16,917 - INFO - integration_test - Dyn residual k=0: pred=[6.511708346697091, 3.8603561745947115, 0.32821688976947255, 3.0, 7.80000004889856], ws=[6.511708346697091, 3.8603561745947115, 0.3282168897694726, 3.0, 9.659325816771519], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.8593257678729591], res_norm=1.859e+00
2025-12-01 10:36:16,918 - INFO - integration_test - Dyn residual k=1: pred=[6.795693939806886, 3.9570628595036577, 0.3282168897694726, 3.0, 9.95932581677152], ws=[6.795693939806886, 3.9570628595036577, 0.3282168897694726, 3.0, 11.705435761774712], res=[0.0, 0.0, 0.0, 0.0, -1.7461099450031927], res_norm=1.746e+00
2025-12-01 10:36:16,919 - INFO - integration_test - Dyn residual k=2: pred=[7.07967953291668, 4.053769544412604, 0.3282168897694726, 3.0, 12.005435761774713], ws=[7.07967953291668, 4.053769544412604, 0.3282168897694726, 3.0, 13.68803633791292], res=[0.0, 0.0, 0.0, 0.0, -1.6826005761382063], res_norm=1.683e+00
2025-12-01 10:36:16,933 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,944 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,960 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,970 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:16,986 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:16,997 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,012 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,022 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,038 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,049 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,085 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,102 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,114 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,129 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,141 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,157 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,168 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,184 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,194 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,209 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,219 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,576 - INFO - integration_test - Step 28: MPC solve successful
2025-12-01 10:36:17,584 - INFO - integration_test - Step 28: Computed 10 numeric contouring constraints for visualization (s=7.500)
2025-12-01 10:36:17,584 - DEBUG - integration_test - Step 28: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:17,584 - INFO - integration_test - === Applying control at step 28 ===
2025-12-01 10:36:17,584 - INFO - integration_test -   Control dict from planner: {'a': 3.7079922769549636e-08, 'w': -0.314094557045261}
2025-12-01 10:36:17,584 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:17,585 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:17,585 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:17,586 - INFO - integration_test - Step 28 completed in 0.688s
2025-12-01 10:36:17,614 - INFO - integration_test - Step 29 (contouring until path end)
2025-12-01 10:36:17,614 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.51318028 3.85588073 0.29680743 3.00000003 7.80000005]
2025-12-01 10:36:17,615 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.293m)
2025-12-01 10:36:17,615 - DEBUG - integration_test -   Set spline state to 7.8000
2025-12-01 10:36:17,615 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:17,630 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.513, 3.856), path_start=(0.000, 0.000), dist=7.569m
2025-12-01 10:36:17,630 - WARNING - integration_test - Could not update reference path at step 29: x and y must have the same length
2025-12-01 10:36:17,630 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2025-12-01 10:36:17,633 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:17,634 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:17,634 - INFO - integration_test - Warmstart k=0: x0=6.513180284313106 , y0=3.8558807253283613 , psi0=0.2968074340649465 , v0=3.0 , spline0=7.8000000516281665 , a0=0.0 , w0=0.0
2025-12-01 10:36:17,634 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:17,635 - INFO - integration_test - Dyn residual k=0: pred=[6.800062810307872, 3.9436213446495296, 0.2968074340649465, 3.0, 8.100000051628166], ws=[6.800062810307872, 3.9436213446495296, 0.2968074340649465, 3.0, 10.065420211882675], res=[0.0, 0.0, 0.0, 0.0, -1.9654201602545083], res_norm=1.965e+00
2025-12-01 10:36:17,636 - INFO - integration_test - Dyn residual k=1: pred=[7.086945336302638, 4.031361963970698, 0.2968074340649465, 3.0, 10.365420211882675], ws=[7.086945336302638, 4.031361963970698, 0.2968074340649465, 3.0, 12.20821767871123], res=[0.0, 0.0, 0.0, 0.0, -1.8427974668285554], res_norm=1.843e+00
2025-12-01 10:36:17,637 - INFO - integration_test - Dyn residual k=2: pred=[7.3738278622974045, 4.119102583291867, 0.2968074340649465, 3.0, 12.508217678711231], ws=[7.3738278622974045, 4.119102583291867, 0.2968074340649465, 3.0, 14.231097897866995], res=[0.0, 0.0, 0.0, 0.0, -1.7228802191557637], res_norm=1.723e+00
2025-12-01 10:36:17,654 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,666 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,685 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,700 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,720 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,733 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,751 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,764 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,782 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,794 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,811 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,823 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,841 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,853 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,870 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,883 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,900 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,912 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,929 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,941 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:17,958 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:17,970 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,397 - INFO - integration_test - Step 29: MPC solve successful
2025-12-01 10:36:18,408 - INFO - integration_test - Step 29: Computed 10 numeric contouring constraints for visualization (s=7.800)
2025-12-01 10:36:18,408 - DEBUG - integration_test - Step 29: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:18,409 - INFO - integration_test - === Applying control at step 29 ===
2025-12-01 10:36:18,409 - INFO - integration_test -   Control dict from planner: {'a': 1.361414456237288e-08, 'w': -0.26079138221310666}
2025-12-01 10:36:18,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:18,409 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:18,410 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:18,410 - INFO - integration_test - Step 29 completed in 0.797s
2025-12-01 10:36:18,451 - INFO - integration_test - Step 30 (contouring until path end)
2025-12-01 10:36:18,452 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[6.80117433 3.93987079 0.2707283  3.00000003 8.10000005]
2025-12-01 10:36:18,453 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.323m)
2025-12-01 10:36:18,453 - DEBUG - integration_test -   Set spline state to 8.1000
2025-12-01 10:36:18,454 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:18,480 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(6.801, 3.940), path_start=(0.000, 0.000), dist=7.860m
2025-12-01 10:36:18,480 - WARNING - integration_test - Could not update reference path at step 30: x and y must have the same length
2025-12-01 10:36:18,480 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2025-12-01 10:36:18,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:18,485 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:18,486 - INFO - integration_test - Warmstart k=0: x0=6.801174330012828 , y0=3.939870787560086 , psi0=0.27072829584363584 , v0=3.0 , spline0=8.100000054493915 , a0=0.0 , w0=0.0
2025-12-01 10:36:18,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:18,487 - INFO - integration_test - Dyn residual k=0: pred=[7.090247244428981, 4.020100770427787, 0.27072829584363584, 3.0, 8.400000054493916], ws=[7.090247244428981, 4.020100770427787, 0.2707282958436359, 3.0, 10.386816998778725], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.9868169442848096], res_norm=1.987e+00
2025-12-01 10:36:18,489 - INFO - integration_test - Dyn residual k=1: pred=[7.379320158845133, 4.100330753295487, 0.2707282958436359, 3.0, 10.686816998778726], ws=[7.379320158845133, 4.100330753295487, 0.2707282958436359, 3.0, 12.547186120933532], res=[0.0, 0.0, 0.0, 0.0, -1.8603691221548058], res_norm=1.860e+00
2025-12-01 10:36:18,490 - INFO - integration_test - Dyn residual k=2: pred=[7.668393073261286, 4.180560736163187, 0.2707282958436359, 3.0, 12.847186120933532], ws=[7.668393073261286, 4.180560736163187, 0.2707282958436359, 3.0, 14.589401274863778], res=[0.0, 0.0, 0.0, 0.0, -1.7422151539302462], res_norm=1.742e+00
2025-12-01 10:36:18,509 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,523 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,544 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,558 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,577 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,589 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,607 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,620 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,640 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,653 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,674 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,687 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,719 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,739 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,751 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,769 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,782 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,799 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,812 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:18,830 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:18,843 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,185 - INFO - integration_test - Step 30: MPC solve successful
2025-12-01 10:36:19,194 - INFO - integration_test - Step 30: Computed 10 numeric contouring constraints for visualization (s=8.100)
2025-12-01 10:36:19,194 - DEBUG - integration_test - Step 30: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:19,194 - INFO - integration_test - === Applying control at step 30 ===
2025-12-01 10:36:19,194 - INFO - integration_test -   Control dict from planner: {'a': 2.3305621969356322e-09, 'w': -0.25563914208742045}
2025-12-01 10:36:19,194 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:19,194 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:19,195 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:19,196 - INFO - integration_test - Step 30 completed in 0.744s
2025-12-01 10:36:19,231 - INFO - integration_test - Step 31 (contouring until path end)
2025-12-01 10:36:19,232 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.0912412  4.01639732 0.24516438 3.00000003 8.40000006]
2025-12-01 10:36:19,233 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.395m)
2025-12-01 10:36:19,233 - DEBUG - integration_test -   Set spline state to 8.4000
2025-12-01 10:36:19,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:19,254 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.091, 4.016), path_start=(0.000, 0.000), dist=8.150m
2025-12-01 10:36:19,255 - WARNING - integration_test - Could not update reference path at step 31: x and y must have the same length
2025-12-01 10:36:19,255 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2025-12-01 10:36:19,259 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:19,261 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:19,261 - INFO - integration_test - Warmstart k=0: x0=7.091241203116886 , y0=4.016397316519781 , psi0=0.2451643816348938 , v0=3.0 , spline0=8.400000057382968 , a0=0.0 , w0=0.0
2025-12-01 10:36:19,261 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:19,262 - INFO - integration_test - Dyn residual k=0: pred=[7.382270435135005, 4.089212054800873, 0.2451643816348938, 3.0, 8.700000057382969], ws=[7.382270435135005, 4.089212054800873, 0.24516438163489385, 3.0, 10.78802472267547], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.088024665292501], res_norm=2.088e+00
2025-12-01 10:36:19,263 - INFO - integration_test - Dyn residual k=1: pred=[7.673299667153123, 4.162026793081965, 0.24516438163489385, 3.0, 11.08802472267547], ws=[7.673299667153123, 4.162026793081965, 0.24516438163489385, 3.0, 12.983823629541549], res=[0.0, 0.0, 0.0, 0.0, -1.8957989068660783], res_norm=1.896e+00
2025-12-01 10:36:19,265 - INFO - integration_test - Dyn residual k=2: pred=[7.9643288991712415, 4.234841531363058, 0.24516438163489385, 3.0, 13.28382362954155], ws=[7.9643288991712415, 4.234841531363058, 0.24516438163489385, 3.0, 15.068711342407942], res=[0.0, 0.0, 0.0, 0.0, -1.784887712866393], res_norm=1.785e+00
2025-12-01 10:36:19,293 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,318 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,349 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,373 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,400 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,416 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,441 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,458 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,483 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,498 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,519 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,533 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,558 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,581 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,604 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,617 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,635 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,647 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,665 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,678 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:19,695 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:19,706 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,077 - INFO - integration_test - Step 31: MPC solve successful
2025-12-01 10:36:20,085 - INFO - integration_test - Step 31: Computed 10 numeric contouring constraints for visualization (s=8.400)
2025-12-01 10:36:20,085 - DEBUG - integration_test - Step 31: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:20,085 - INFO - integration_test - === Applying control at step 31 ===
2025-12-01 10:36:20,085 - INFO - integration_test -   Control dict from planner: {'a': -4.1805312367965475e-07, 'w': -0.32604633484067425}
2025-12-01 10:36:20,085 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:20,085 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:20,086 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:20,087 - INFO - integration_test - Step 31 completed in 0.855s
2025-12-01 10:36:20,106 - INFO - integration_test - Step 32 (contouring until path end)
2025-12-01 10:36:20,107 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.38340582 4.08445512 0.21255975 2.99999999 8.70000006]
2025-12-01 10:36:20,108 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.353m)
2025-12-01 10:36:20,108 - DEBUG - integration_test -   Set spline state to 8.7000
2025-12-01 10:36:20,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:20,121 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.383, 4.084), path_start=(0.000, 0.000), dist=8.438m
2025-12-01 10:36:20,121 - WARNING - integration_test - Could not update reference path at step 32: x and y must have the same length
2025-12-01 10:36:20,121 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2025-12-01 10:36:20,124 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:20,125 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:20,125 - INFO - integration_test - Warmstart k=0: x0=7.383405818845192 , y0=4.084455124174552 , psi0=0.21255974815082637 , v0=2.999999987085225 , spline0=8.70000005609149 , a0=0.0 , w0=0.0
2025-12-01 10:36:20,125 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:20,126 - INFO - integration_test - Dyn residual k=0: pred=[7.676654049468072, 4.147743941999374, 0.21255974815082637, 2.999999987085225, 9.000000054800012], ws=[7.676654049468072, 4.147743941999374, 0.21255974815082634, 2.999999987085225, 11.107767785396627], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, -2.107767730596615], res_norm=2.108e+00
2025-12-01 10:36:20,127 - INFO - integration_test - Dyn residual k=1: pred=[7.9699022800909525, 4.211032759824196, 0.21255974815082634, 2.999999987085225, 11.407767784105149], ws=[7.9699022800909525, 4.211032759824196, 0.21255974815082634, 2.999999987085225, 13.377060125737207], res=[0.0, 0.0, 0.0, 0.0, -1.969292341632059], res_norm=1.969e+00
2025-12-01 10:36:20,127 - INFO - integration_test - Dyn residual k=2: pred=[8.263150510713833, 4.274321577649018, 0.21255974815082634, 2.999999987085225, 13.67706012444573], ws=[8.263150510713833, 4.274321577649018, 0.21255974815082634, 2.999999987085225, 15.557261940321467], res=[0.0, 0.0, 0.0, 0.0, -1.880201815875738], res_norm=1.880e+00
2025-12-01 10:36:20,141 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,152 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,168 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,179 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,194 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,204 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,219 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,229 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,244 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,255 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,270 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,281 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,296 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,306 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,321 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,331 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,348 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,360 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,376 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,388 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,404 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,415 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,707 - INFO - integration_test - Step 32: MPC solve successful
2025-12-01 10:36:20,714 - INFO - integration_test - Step 32: Computed 10 numeric contouring constraints for visualization (s=8.700)
2025-12-01 10:36:20,714 - DEBUG - integration_test - Step 32: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:20,714 - INFO - integration_test - === Applying control at step 32 ===
2025-12-01 10:36:20,715 - INFO - integration_test -   Control dict from planner: {'a': 2.558866636413118e-07, 'w': -0.3195910277873688}
2025-12-01 10:36:20,715 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:20,715 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:20,715 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:20,716 - INFO - integration_test - Step 32 completed in 0.609s
2025-12-01 10:36:20,735 - INFO - integration_test - Step 33 (contouring until path end)
2025-12-01 10:36:20,736 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.67761537 4.14304759 0.18060065 3.00000001 9.00000006]
2025-12-01 10:36:20,737 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.431m)
2025-12-01 10:36:20,737 - DEBUG - integration_test -   Set spline state to 9.0000
2025-12-01 10:36:20,737 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:20,751 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.678, 4.143), path_start=(0.000, 0.000), dist=8.724m
2025-12-01 10:36:20,751 - WARNING - integration_test - Could not update reference path at step 33: x and y must have the same length
2025-12-01 10:36:20,752 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2025-12-01 10:36:20,754 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:20,755 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:20,755 - INFO - integration_test - Warmstart k=0: x0=7.677615374366272 , y0=4.143047592777475 , psi0=0.18060064537208947 , v0=3.0 , spline0=9.000000057358879 , a0=0.0 , w0=0.0
2025-12-01 10:36:20,756 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:20,757 - INFO - integration_test - Dyn residual k=0: pred=[7.972736168977315, 4.1969337374544375, 0.18060064537208947, 3.0, 9.30000005735888], ws=[7.972736168977315, 4.1969337374544375, 0.18060064537208964, 3.0, 11.50331492622746], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.2033148688685813], res_norm=2.203e+00
2025-12-01 10:36:20,757 - INFO - integration_test - Dyn residual k=1: pred=[8.267856963588358, 4.2508198821314, 0.18060064537208964, 3.0, 11.803314926227461], ws=[8.267856963588358, 4.2508198821314, 0.18060064537208964, 3.0, 13.807018303069604], res=[0.0, 0.0, 0.0, 0.0, -2.003703376842143], res_norm=2.004e+00
2025-12-01 10:36:20,758 - INFO - integration_test - Dyn residual k=2: pred=[8.5629777581994, 4.304706026808362, 0.18060064537208964, 3.0, 14.107018303069605], ws=[8.5629777581994, 4.304706026808362, 0.18060064537208964, 3.0, 16.03423465692566], res=[0.0, 0.0, 0.0, 0.0, -1.9272163538560534], res_norm=1.927e+00
2025-12-01 10:36:20,773 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,784 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,799 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,810 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,825 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,835 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,850 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,861 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,876 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,887 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,902 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,912 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,927 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,937 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,953 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,964 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:20,979 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:20,989 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,004 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,015 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,030 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,040 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,339 - INFO - integration_test - Step 33: MPC solve successful
2025-12-01 10:36:21,347 - INFO - integration_test - Step 33: Computed 10 numeric contouring constraints for visualization (s=9.000)
2025-12-01 10:36:21,347 - DEBUG - integration_test - Step 33: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:21,347 - INFO - integration_test - === Applying control at step 33 ===
2025-12-01 10:36:21,347 - INFO - integration_test -   Control dict from planner: {'a': 7.4745220598606e-08, 'w': -0.08424248843709008}
2025-12-01 10:36:21,347 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:21,347 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:21,348 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:21,348 - INFO - integration_test - Step 33 completed in 0.612s
2025-12-01 10:36:21,371 - INFO - integration_test - Step 34 (contouring until path end)
2025-12-01 10:36:21,372 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[7.97295965 4.19569002 0.1721764  3.00000002 9.30000006]
2025-12-01 10:36:21,373 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.380m)
2025-12-01 10:36:21,373 - DEBUG - integration_test -   Set spline state to 9.3000
2025-12-01 10:36:21,373 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:21,387 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(7.973, 4.196), path_start=(0.000, 0.000), dist=9.010m
2025-12-01 10:36:21,387 - WARNING - integration_test - Could not update reference path at step 34: x and y must have the same length
2025-12-01 10:36:21,387 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2025-12-01 10:36:21,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:21,391 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:21,391 - INFO - integration_test - Warmstart k=0: x0=7.972959653722409 , y0=4.1956900222244204 , psi0=0.17217639652838046 , v0=3.0 , spline0=9.300000059373719 , a0=0.0 , w0=0.0
2025-12-01 10:36:21,391 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:21,392 - INFO - integration_test - Dyn residual k=0: pred=[8.268523921256428, 4.247088113211136, 0.17217639652838046, 3.0, 9.60000005937372], ws=[8.268523921256428, 4.247088113211136, 0.17217639652838024, 3.0, 11.821597905952656], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.221597846578936], res_norm=2.222e+00
2025-12-01 10:36:21,393 - INFO - integration_test - Dyn residual k=1: pred=[8.564088188790446, 4.298486204197852, 0.17217639652838024, 3.0, 12.121597905952656], ws=[8.564088188790446, 4.298486204197852, 0.17217639652838024, 3.0, 14.141967461923045], res=[0.0, 0.0, 0.0, 0.0, -2.0203695559703885], res_norm=2.020e+00
2025-12-01 10:36:21,393 - INFO - integration_test - Dyn residual k=2: pred=[8.859652456324465, 4.349884295184568, 0.17217639652838024, 3.0, 14.441967461923046], ws=[8.859652456324465, 4.349884295184568, 0.17217639652838024, 3.0, 16.392936734098516], res=[0.0, 0.0, 0.0, 0.0, -1.9509692721754703], res_norm=1.951e+00
2025-12-01 10:36:21,407 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,418 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,433 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,443 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,459 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,470 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,485 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,495 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,510 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,521 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,536 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,546 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,561 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,572 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,587 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,598 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,612 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,623 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,638 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,649 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,664 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:21,675 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:21,971 - INFO - integration_test - Step 34: MPC solve successful
2025-12-01 10:36:21,979 - INFO - integration_test - Step 34: Computed 10 numeric contouring constraints for visualization (s=9.300)
2025-12-01 10:36:21,979 - DEBUG - integration_test - Step 34: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:21,979 - INFO - integration_test - === Applying control at step 34 ===
2025-12-01 10:36:21,979 - INFO - integration_test -   Control dict from planner: {'a': -4.6825362920866705e-08, 'w': -0.2686477244986254}
2025-12-01 10:36:21,979 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:21,979 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:21,980 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:21,980 - INFO - integration_test - Step 34 completed in 0.609s
2025-12-01 10:36:22,000 - INFO - integration_test - Step 35 (contouring until path end)
2025-12-01 10:36:22,001 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.26917873 4.24311204 0.14531162 3.00000002 9.60000006]
2025-12-01 10:36:22,001 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.461m)
2025-12-01 10:36:22,001 - DEBUG - integration_test -   Set spline state to 9.6000
2025-12-01 10:36:22,002 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:22,015 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.269, 4.243), path_start=(0.000, 0.000), dist=9.294m
2025-12-01 10:36:22,016 - WARNING - integration_test - Could not update reference path at step 35: x and y must have the same length
2025-12-01 10:36:22,016 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2025-12-01 10:36:22,018 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:22,019 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:22,019 - INFO - integration_test - Warmstart k=0: x0=8.269178729595284 , y0=4.243112036628748 , psi0=0.14531162407851791 , v0=3.0 , spline0=9.600000060920307 , a0=0.0 , w0=0.0
2025-12-01 10:36:22,019 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:22,020 - INFO - integration_test - Dyn residual k=0: pred=[8.56601697874757, 4.286552269595501, 0.14531162407851791, 3.0, 9.900000060920307], ws=[8.56601697874757, 4.286552269595501, 0.14531162407851772, 3.0, 12.138260356464759], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, -2.2382602955444515], res_norm=2.238e+00
2025-12-01 10:36:22,021 - INFO - integration_test - Dyn residual k=1: pred=[8.862855227899855, 4.329992502562254, 0.14531162407851772, 3.0, 12.43826035646476], ws=[8.862855227899855, 4.329992502562254, 0.14531162407851772, 3.0, 14.53551505864179], res=[0.0, 0.0, 0.0, 0.0, -2.0972547021770307], res_norm=2.097e+00
2025-12-01 10:36:22,021 - INFO - integration_test - Dyn residual k=2: pred=[9.15969347705214, 4.373432735529007, 0.14531162407851772, 3.0, 14.835515058641791], ws=[9.15969347705214, 4.373432735529007, 0.14531162407851772, 3.0, 16.90037888984338], res=[0.0, 0.0, 0.0, 0.0, -2.06486383120159], res_norm=2.065e+00
2025-12-01 10:36:22,035 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,046 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,061 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,072 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,088 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,098 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,124 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,138 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,149 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,164 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,175 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,190 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,200 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,215 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,226 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,240 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,251 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,266 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,277 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,292 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,302 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,588 - INFO - integration_test - Step 35: MPC solve successful
2025-12-01 10:36:22,596 - INFO - integration_test - Step 35: Computed 10 numeric contouring constraints for visualization (s=9.600)
2025-12-01 10:36:22,596 - DEBUG - integration_test - Step 35: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:22,596 - INFO - integration_test - === Applying control at step 35 ===
2025-12-01 10:36:22,596 - INFO - integration_test -   Control dict from planner: {'a': -1.0838511363847517e-06, 'w': -0.2967384979376082}
2025-12-01 10:36:22,596 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:22,596 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:22,597 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:22,598 - INFO - integration_test - Step 35 completed in 0.597s
2025-12-01 10:36:22,618 - INFO - integration_test - Step 36 (contouring until path end)
2025-12-01 10:36:22,619 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.56661789 4.28214205 0.11563777 2.99999991 9.90000005]
2025-12-01 10:36:22,619 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.396m)
2025-12-01 10:36:22,619 - DEBUG - integration_test -   Set spline state to 9.9000
2025-12-01 10:36:22,620 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:22,633 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.567, 4.282), path_start=(0.000, 0.000), dist=9.577m
2025-12-01 10:36:22,634 - WARNING - integration_test - Could not update reference path at step 36: x and y must have the same length
2025-12-01 10:36:22,634 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2025-12-01 10:36:22,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:22,637 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:22,637 - INFO - integration_test - Warmstart k=0: x0=8.566617886222787 , y0=4.282142050635503 , psi0=0.11563777428475709 , v0=2.9999999070807633 , spline0=9.900000051628384 , a0=0.0 , w0=0.0
2025-12-01 10:36:22,638 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:22,638 - INFO - integration_test - Dyn residual k=0: pred=[8.86461429693214, 4.316756117561941, 0.11563777428475709, 2.9999999070807633, 10.20000004233646], ws=[8.86461429693214, 4.316756117561941, 0.11563777428475719, 2.9999999070807633, 12.528872792090578], res=[0.0, 0.0, -9.71445146547012e-17, 0.0, -2.328872749754117], res_norm=2.329e+00
2025-12-01 10:36:22,639 - INFO - integration_test - Dyn residual k=1: pred=[9.162610707641495, 4.351370184488379, 0.11563777428475719, 2.9999999070807633, 12.828872782798655], ws=[9.162610707641495, 4.351370184488379, 0.11563777428475719, 2.9999999070807633, 14.96226394497494], res=[0.0, 0.0, 0.0, 0.0, -2.1333911621762844], res_norm=2.133e+00
2025-12-01 10:36:22,640 - INFO - integration_test - Dyn residual k=2: pred=[9.460607118350849, 4.3859842514148175, 0.11563777428475719, 2.9999999070807633, 15.262263935683016], ws=[9.460607118350849, 4.3859842514148175, 0.11563777428475719, 2.9999999070807633, 17.38259921924931], res=[0.0, 0.0, 0.0, 0.0, -2.1203352835662947], res_norm=2.120e+00
2025-12-01 10:36:22,654 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,665 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,680 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,690 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,705 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,716 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,731 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,741 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,756 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,767 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,781 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,792 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,807 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,817 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,832 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,843 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,857 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,868 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,883 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,893 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:22,908 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:22,918 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,268 - INFO - integration_test - Step 36: MPC solve successful
2025-12-01 10:36:23,276 - INFO - integration_test - Step 36: Computed 10 numeric contouring constraints for visualization (s=9.900)
2025-12-01 10:36:23,276 - DEBUG - integration_test - Step 36: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:23,276 - INFO - integration_test - === Applying control at step 36 ===
2025-12-01 10:36:23,276 - INFO - integration_test -   Control dict from planner: {'a': 2.1366659652003897e-07, 'w': -0.2368746204793638}
2025-12-01 10:36:23,276 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:23,276 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:23,277 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:23,277 - INFO - integration_test - Step 36 completed in 0.659s
2025-12-01 10:36:23,298 - INFO - integration_test - Step 37 (contouring until path end)
2025-12-01 10:36:23,298 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 8.86499637  4.31322366  0.09195031  2.99999993 10.20000004]
2025-12-01 10:36:23,299 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.489m)
2025-12-01 10:36:23,299 - DEBUG - integration_test -   Set spline state to 10.2000
2025-12-01 10:36:23,299 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:23,313 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(8.865, 4.313), path_start=(0.000, 0.000), dist=9.859m
2025-12-01 10:36:23,313 - WARNING - integration_test - Could not update reference path at step 37: x and y must have the same length
2025-12-01 10:36:23,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2025-12-01 10:36:23,316 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:23,317 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:23,317 - INFO - integration_test - Warmstart k=0: x0=8.864996371914044 , y0=4.313223656483884 , psi0=0.09195031223682071 , v0=2.999999928447423 , spline0=10.200000044473127 , a0=0.0 , w0=0.0
2025-12-01 10:36:23,317 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:23,318 - INFO - integration_test - Dyn residual k=0: pred=[9.163729029107357, 4.340769894576732, 0.09195031223682071, 2.999999928447423, 10.50000003731787], ws=[9.163729029107357, 4.340769894576732, 0.0919503122368206, 2.999999928447423, 12.844604611882989], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.3446045745651194], res_norm=2.345e+00
2025-12-01 10:36:23,319 - INFO - integration_test - Dyn residual k=1: pred=[9.462461686300669, 4.368316132669579, 0.0919503122368206, 2.999999928447423, 13.144604604727732], ws=[9.462461686300669, 4.368316132669579, 0.0919503122368206, 2.999999928447423, 15.362791032734926], res=[0.0, 0.0, 0.0, 0.0, -2.2181864280071935], res_norm=2.218e+00
2025-12-01 10:36:23,320 - INFO - integration_test - Dyn residual k=2: pred=[9.761194343493981, 4.395862370762427, 0.0919503122368206, 2.999999928447423, 15.662791025579669], ws=[9.761194343493981, 4.395862370762427, 0.0919503122368206, 2.999999928447423, 17.818638157927804], res=[0.0, 0.0, 0.0, 0.0, -2.1558471323481356], res_norm=2.156e+00
2025-12-01 10:36:23,334 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,345 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,361 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,372 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,388 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,398 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,414 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,424 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,439 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,450 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,476 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,491 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,502 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,517 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,528 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,542 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,553 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,569 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,580 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,595 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:23,606 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:23,955 - INFO - integration_test - Step 37: MPC solve successful
2025-12-01 10:36:23,963 - INFO - integration_test - Step 37: Computed 10 numeric contouring constraints for visualization (s=10.200)
2025-12-01 10:36:23,963 - DEBUG - integration_test - Step 37: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:23,963 - INFO - integration_test - === Applying control at step 37 ===
2025-12-01 10:36:23,963 - INFO - integration_test -   Control dict from planner: {'a': 4.961037485709708e-07, 'w': -0.26065769938646516}
2025-12-01 10:36:23,963 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:23,963 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:23,964 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:23,965 - INFO - integration_test - Step 37 completed in 0.666s
2025-12-01 10:36:23,985 - INFO - integration_test - Step 38 (contouring until path end)
2025-12-01 10:36:23,986 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.16405419  4.33687365  0.06588454  2.99999998 10.50000004]
2025-12-01 10:36:23,986 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.410m)
2025-12-01 10:36:23,986 - DEBUG - integration_test -   Set spline state to 10.5000
2025-12-01 10:36:23,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:24,000 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.164, 4.337), path_start=(0.000, 0.000), dist=10.138m
2025-12-01 10:36:24,001 - WARNING - integration_test - Could not update reference path at step 38: x and y must have the same length
2025-12-01 10:36:24,001 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2025-12-01 10:36:24,003 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:24,004 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:24,004 - INFO - integration_test - Warmstart k=0: x0=9.164054191696849 , y0=4.33687364768062 , psi0=0.0658845422981742 , v0=2.9999999780577977 , spline0=10.500000042278906 , a0=0.0 , w0=0.0
2025-12-01 10:36:24,004 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:24,005 - INFO - integration_test - Dyn residual k=0: pred=[9.463403309065106, 4.356624713837001, 0.0658845422981742, 2.9999999780577977, 10.800000040084685], ws=[9.463403309065106, 4.356624713837001, 0.06588454229817398, 2.9999999780577977, 13.231543493491156], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.431543453406471], res_norm=2.432e+00
2025-12-01 10:36:24,006 - INFO - integration_test - Dyn residual k=1: pred=[9.762752426433362, 4.376375779993382, 0.06588454229817398, 2.9999999780577977, 13.531543491296935], ws=[9.762752426433362, 4.376375779993382, 0.06588454229817398, 2.9999999780577977, 15.78938089289778], res=[0.0, 0.0, 0.0, 0.0, -2.2578374016008453], res_norm=2.258e+00
2025-12-01 10:36:24,007 - INFO - integration_test - Dyn residual k=2: pred=[10.062101543801619, 4.396126846149763, 0.06588454229817398, 2.9999999780577977, 16.08938089070356], ws=[10.062101543801619, 4.396126846149763, 0.06588454229817398, 2.9999999780577977, 18.30577188527039], res=[0.0, 0.0, 0.0, 0.0, -2.2163909945668294], res_norm=2.216e+00
2025-12-01 10:36:24,021 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,031 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,047 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,057 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,073 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,084 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,099 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,110 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,124 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,135 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,150 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,161 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,177 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,187 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,213 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,228 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,238 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,254 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,265 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,280 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,291 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,656 - INFO - integration_test - Step 38: MPC solve successful
2025-12-01 10:36:24,667 - INFO - integration_test - Step 38: Computed 10 numeric contouring constraints for visualization (s=10.500)
2025-12-01 10:36:24,667 - DEBUG - integration_test - Step 38: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:24,667 - INFO - integration_test - === Applying control at step 38 ===
2025-12-01 10:36:24,667 - INFO - integration_test -   Control dict from planner: {'a': 2.8399130945892994e-07, 'w': -0.1438122895657015}
2025-12-01 10:36:24,667 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:24,667 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:24,669 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:24,669 - INFO - integration_test - Step 38 completed in 0.684s
2025-12-01 10:36:24,697 - INFO - integration_test - Step 39 (contouring until path end)
2025-12-01 10:36:24,699 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.46353501  4.35447157  0.05150331  3.00000001 10.80000004]
2025-12-01 10:36:24,699 - INFO - integration_test - Step 39: Re-initialized spline from 10.8000 to 10.9043 (vehicle at (9.46, 4.35), closest path point at (9.75, 4.78), distance=0.514m)
2025-12-01 10:36:24,699 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 10:36:24,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:24,716 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.464, 4.354), path_start=(0.000, 0.000), dist=10.417m
2025-12-01 10:36:24,717 - WARNING - integration_test - Could not update reference path at step 39: x and y must have the same length
2025-12-01 10:36:24,717 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2025-12-01 10:36:24,720 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:24,721 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:24,721 - INFO - integration_test - Warmstart k=0: x0=9.463535011897068 , y0=4.354471566106481 , psi0=0.051503313341604046 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 10:36:24,721 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:24,723 - INFO - integration_test - Dyn residual k=0: pred=[9.763137211149525, 4.369915730152873, 0.051503313341604046, 3.0, 11.204332608216188], ws=[9.763137211149525, 4.369915730152873, 0.05150331334160407, 3.0, 13.681034580246992], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, -2.4767019720308046], res_norm=2.477e+00
2025-12-01 10:36:24,724 - INFO - integration_test - Dyn residual k=1: pred=[10.062739410401981, 4.385359894199265, 0.05150331334160407, 3.0, 13.981034580246993], ws=[10.062739410401981, 4.385359894199265, 0.05150331334160407, 3.0, 16.299412855074685], res=[0.0, 0.0, 0.0, 0.0, -2.318378274827692], res_norm=2.318e+00
2025-12-01 10:36:24,725 - INFO - integration_test - Dyn residual k=2: pred=[10.362341609654438, 4.400804058245657, 0.05150331334160407, 3.0, 16.599412855074686], ws=[10.362341609654438, 4.400804058245657, 0.05150331334160407, 3.0, 18.909344173077375], res=[0.0, 0.0, 0.0, 0.0, -2.3099313180026897], res_norm=2.310e+00
2025-12-01 10:36:24,743 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,756 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,778 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,794 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,813 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,824 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,840 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,851 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,867 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,878 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,894 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,904 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,919 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,930 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,945 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,956 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,972 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:24,983 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:24,998 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,009 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,024 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,034 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,389 - INFO - integration_test - Step 39: MPC solve successful
2025-12-01 10:36:25,396 - INFO - integration_test - Step 39: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 10:36:25,397 - DEBUG - integration_test - Step 39: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:25,397 - INFO - integration_test - === Applying control at step 39 ===
2025-12-01 10:36:25,397 - INFO - integration_test -   Control dict from planner: {'a': -2.617586957546517e-07, 'w': -0.4636096430817698}
2025-12-01 10:36:25,397 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:25,397 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:25,398 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:25,399 - INFO - integration_test - Step 39 completed in 0.700s
2025-12-01 10:36:25,418 - INFO - integration_test - Step 40 (contouring until path end)
2025-12-01 10:36:25,419 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[9.76338784e+00 4.36296652e+00 5.14234903e-03 2.99999998e+00
 1.12043326e+01]
2025-12-01 10:36:25,420 - DEBUG - integration_test - Step 40: Using propagated spline 11.2043 (close to path, dist=0.419m)
2025-12-01 10:36:25,420 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 10:36:25,420 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:25,434 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.763, 4.363), path_start=(0.000, 0.000), dist=10.694m
2025-12-01 10:36:25,434 - WARNING - integration_test - Could not update reference path at step 40: x and y must have the same length
2025-12-01 10:36:25,435 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2025-12-01 10:36:25,437 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:25,438 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:25,438 - INFO - integration_test - Warmstart k=0: x0=9.76338783710272 , y0=4.362966518689001 , psi0=0.005142349033427064 , v0=2.9999999802810593 , spline0=11.204332606244293 , a0=0.0 , w0=0.0
2025-12-01 10:36:25,438 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:25,439 - INFO - integration_test - Dyn residual k=0: pred=[10.063383868576555, 4.364509216589748, 0.005142349033427064, 2.9999999802810593, 11.504332604272399], ws=[10.063383868576555, 4.364509216589748, 0.0051423490334272515, 2.9999999802810593, 14.067073889024114], res=[0.0, 0.0, -1.8735013540549517e-16, 0.0, -2.5627412847517146], res_norm=2.563e+00
2025-12-01 10:36:25,440 - INFO - integration_test - Dyn residual k=1: pred=[10.36337990005039, 4.366051914490495, 0.0051423490334272515, 2.9999999802810593, 14.36707388705222], ws=[10.36337990005039, 4.366051914490495, 0.0051423490334272515, 2.9999999802810593, 16.728826292115993], res=[0.0, 0.0, 0.0, 0.0, -2.3617524050637737], res_norm=2.362e+00
2025-12-01 10:36:25,441 - INFO - integration_test - Dyn residual k=2: pred=[10.663375931524225, 4.367594612391241, 0.0051423490334272515, 2.9999999802810593, 17.0288262901441], ws=[10.663375931524225, 4.367594612391241, 0.0051423490334272515, 2.9999999802810593, 19.513912805187143], res=[0.0, 0.0, 0.0, 0.0, -2.4850865150430437], res_norm=2.485e+00
2025-12-01 10:36:25,455 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,466 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,482 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,493 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,508 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,518 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,533 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,544 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,559 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,570 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,586 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,597 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,611 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,622 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,637 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,648 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,663 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,674 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,689 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,700 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:25,715 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:25,725 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,086 - INFO - integration_test - Step 40: MPC solve successful
2025-12-01 10:36:26,093 - INFO - integration_test - Step 40: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 10:36:26,094 - DEBUG - integration_test - Step 40: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:26,094 - INFO - integration_test - === Applying control at step 40 ===
2025-12-01 10:36:26,094 - INFO - integration_test -   Control dict from planner: {'a': 1.320900657555888e-07, 'w': -0.181274926961516}
2025-12-01 10:36:26,094 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:26,094 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:26,095 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:26,095 - INFO - integration_test - Step 40 completed in 0.676s
2025-12-01 10:36:26,115 - INFO - integration_test - Step 41 (contouring until path end)
2025-12-01 10:36:26,116 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.06338142  4.36179012 -0.01298514  2.99999999 11.50433261]
2025-12-01 10:36:26,116 - INFO - integration_test - Step 41: Re-initialized spline from 11.5043 to 10.9043 (vehicle at (10.06, 4.36), closest path point at (9.75, 4.78), distance=0.525m)
2025-12-01 10:36:26,116 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 10:36:26,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:26,130 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.063, 4.362), path_start=(0.000, 0.000), dist=10.968m
2025-12-01 10:36:26,130 - WARNING - integration_test - Could not update reference path at step 41: x and y must have the same length
2025-12-01 10:36:26,130 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2025-12-01 10:36:26,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:26,134 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:26,134 - INFO - integration_test - Warmstart k=0: x0=10.063381421675526 , y0=4.361790118620069 , psi0=-0.012985143662724536 , v0=2.999999993490066 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 10:36:26,134 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:26,135 - INFO - integration_test - Dyn residual k=0: pred=[10.363356129286577, 4.357894685002604, -0.012985143662724536, 2.999999993490066, 11.204332607565194], ws=[10.363356129286577, 4.357894685002604, -0.012985143662724408, 2.999999993490066, 13.681034579595998], res=[0.0, 0.0, -1.2836953722228372e-16, 0.0, -2.4767019720308046], res_norm=2.477e+00
2025-12-01 10:36:26,135 - INFO - integration_test - Dyn residual k=1: pred=[10.663330836897629, 4.353999251385138, -0.012985143662724408, 2.999999993490066, 13.981034578945005], ws=[10.663330836897629, 4.353999251385138, -0.012985143662724408, 2.999999993490066, 16.29887704552859], res=[0.0, 0.0, 0.0, 0.0, -2.3178424665835866], res_norm=2.318e+00
2025-12-01 10:36:26,136 - INFO - integration_test - Dyn residual k=2: pred=[10.96330554450868, 4.350103817767673, -0.012985143662724408, 2.999999993490066, 16.598877044877597], ws=[10.96330554450868, 4.350103817767673, -0.012985143662724408, 2.999999993490066, 18.90742385771302], res=[0.0, 0.0, 0.0, 0.0, -2.3085468128354236], res_norm=2.309e+00
2025-12-01 10:36:26,151 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,163 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,178 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,189 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,204 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,215 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,230 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,241 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,256 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,267 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,282 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,293 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,308 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,319 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,334 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,345 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,360 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,371 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,386 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,397 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,412 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,423 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,850 - INFO - integration_test - Step 41: MPC solve successful
2025-12-01 10:36:26,858 - INFO - integration_test - Step 41: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 10:36:26,858 - DEBUG - integration_test - Step 41: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:26,858 - INFO - integration_test - === Applying control at step 41 ===
2025-12-01 10:36:26,858 - INFO - integration_test -   Control dict from planner: {'a': 2.4336514545470005e-07, 'w': 0.800000007391176}
2025-12-01 10:36:26,858 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:26,858 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:26,859 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:26,860 - INFO - integration_test - Step 41 completed in 0.744s
2025-12-01 10:36:26,882 - INFO - integration_test - Step 42 (contouring until path end)
2025-12-01 10:36:26,883 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.363192    4.36989143  0.06701486  3.00000002 11.20433261]
2025-12-01 10:36:26,883 - DEBUG - integration_test - Step 42: Using propagated spline 11.2043 (close to path, dist=0.419m)
2025-12-01 10:36:26,883 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 10:36:26,884 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:26,898 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.363, 4.370), path_start=(0.000, 0.000), dist=11.247m
2025-12-01 10:36:26,898 - WARNING - integration_test - Could not update reference path at step 42: x and y must have the same length
2025-12-01 10:36:26,898 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2025-12-01 10:36:26,900 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:26,902 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:26,902 - INFO - integration_test - Warmstart k=0: x0=10.363191998376665 , y0=4.369891429286505 , psi0=0.06701485707639307 , v0=3.0 , spline0=11.204332609998845 , a0=0.0 , w0=0.0
2025-12-01 10:36:26,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:26,903 - INFO - integration_test - Dyn residual k=0: pred=[10.662518601791092, 4.389980841631887, 0.06701485707639307, 3.0, 11.504332609998846], ws=[10.662518601791092, 4.389980841631887, 0.06701485707639288, 3.0, 14.067073895830616], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, -2.5627412858317697], res_norm=2.563e+00
2025-12-01 10:36:26,903 - INFO - integration_test - Dyn residual k=1: pred=[10.961845205205519, 4.41007025397727, 0.06701485707639288, 3.0, 14.367073895830616], ws=[10.961845205205519, 4.41007025397727, 0.06701485707639288, 3.0, 16.729421163974568], res=[0.0, 0.0, 0.0, 0.0, -2.3623472681439512], res_norm=2.362e+00
2025-12-01 10:36:26,904 - INFO - integration_test - Dyn residual k=2: pred=[11.261171808619945, 4.430159666322652, 0.06701485707639288, 3.0, 17.02942116397457], ws=[11.261171808619945, 4.430159666322652, 0.06701485707639288, 3.0, 19.51576046876337], res=[0.0, 0.0, 0.0, 0.0, -2.486339304788803], res_norm=2.486e+00
2025-12-01 10:36:26,919 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,929 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,945 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,956 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,972 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:26,983 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:26,999 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,009 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,025 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,035 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,051 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,062 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,078 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,089 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,104 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,115 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,130 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,141 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,156 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,167 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,193 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,531 - INFO - integration_test - Step 42: MPC solve successful
2025-12-01 10:36:27,538 - INFO - integration_test - Step 42: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 10:36:27,539 - DEBUG - integration_test - Step 42: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:27,539 - INFO - integration_test - === Applying control at step 42 ===
2025-12-01 10:36:27,539 - INFO - integration_test -   Control dict from planner: {'a': -1.2841081698184032e-07, 'w': 0.19020240818799164}
2025-12-01 10:36:27,539 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:27,539 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:27,540 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:27,540 - INFO - integration_test - Step 42 completed in 0.658s
2025-12-01 10:36:27,563 - INFO - integration_test - Step 43 (contouring until path end)
2025-12-01 10:36:27,564 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.66230951  4.39282618  0.0860351   3.         11.50433261]
2025-12-01 10:36:27,564 - DEBUG - integration_test - Step 43: Using propagated spline 11.5043 (close to path, dist=0.474m)
2025-12-01 10:36:27,564 - DEBUG - integration_test -   Set spline state to 11.5043
2025-12-01 10:36:27,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:27,578 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.662, 4.393), path_start=(0.000, 0.000), dist=11.532m
2025-12-01 10:36:27,579 - WARNING - integration_test - Could not update reference path at step 43: x and y must have the same length
2025-12-01 10:36:27,579 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2025-12-01 10:36:27,581 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:27,582 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:27,582 - INFO - integration_test - Warmstart k=0: x0=10.66230950842223 , y0=4.39282617667287 , psi0=0.08603509789519223 , v0=3.0 , spline0=11.504332610497395 , a0=0.0 , w0=0.0
2025-12-01 10:36:27,582 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:27,583 - INFO - integration_test - Dyn residual k=0: pred=[10.961199887419887, 4.418604876070546, 0.08603509789519223, 3.0, 11.804332610497395], ws=[10.961199887419887, 4.418604876070546, 0.08603509789519226, 3.0, 14.382826978097729], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, -2.5784943676003333], res_norm=2.578e+00
2025-12-01 10:36:27,584 - INFO - integration_test - Dyn residual k=1: pred=[11.260090266417546, 4.444383575468223, 0.08603509789519226, 3.0, 14.68282697809773], ws=[11.260090266417546, 4.444383575468223, 0.08603509789519226, 3.0, 17.151565582486256], res=[0.0, 0.0, 0.0, 0.0, -2.468738604388527], res_norm=2.469e+00
2025-12-01 10:36:27,585 - INFO - integration_test - Dyn residual k=2: pred=[11.558980645415204, 4.470162274865899, 0.08603509789519226, 3.0, 17.451565582486257], ws=[11.558980645415204, 4.470162274865899, 0.08603509789519226, 3.0, 19.99379269878828], res=[0.0, 0.0, 0.0, 0.0, -2.5422271163020227], res_norm=2.542e+00
2025-12-01 10:36:27,599 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,610 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,625 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,636 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,651 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,662 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,677 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,688 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,704 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,714 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,730 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,741 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,756 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,768 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,783 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,794 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,810 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,820 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,836 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,847 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:27,862 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:27,874 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,272 - INFO - integration_test - Step 43: MPC solve successful
2025-12-01 10:36:28,280 - INFO - integration_test - Step 43: Computed 10 numeric contouring constraints for visualization (s=11.504)
2025-12-01 10:36:28,280 - DEBUG - integration_test - Step 43: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:28,280 - INFO - integration_test - === Applying control at step 43 ===
2025-12-01 10:36:28,280 - INFO - integration_test -   Control dict from planner: {'a': 1.633350053134666e-07, 'w': 0.7999996154158427}
2025-12-01 10:36:28,280 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:28,280 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:28,281 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:28,282 - INFO - integration_test - Step 43 completed in 0.718s
2025-12-01 10:36:28,302 - INFO - integration_test - Step 44 (contouring until path end)
2025-12-01 10:36:28,303 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[10.95985058  4.43052662  0.16603506  3.00000002 11.80433261]
2025-12-01 10:36:28,304 - DEBUG - integration_test - Step 44: Using propagated spline 11.8043 (close to path, dist=0.344m)
2025-12-01 10:36:28,304 - DEBUG - integration_test -   Set spline state to 11.8043
2025-12-01 10:36:28,304 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:28,318 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.960, 4.431), path_start=(0.000, 0.000), dist=11.822m
2025-12-01 10:36:28,318 - WARNING - integration_test - Could not update reference path at step 44: x and y must have the same length
2025-12-01 10:36:28,318 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2025-12-01 10:36:28,320 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:28,322 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:28,322 - INFO - integration_test - Warmstart k=0: x0=10.959850581210514 , y0=4.430526622781481 , psi0=0.1660350594367765 , v0=3.0 , spline0=11.804332612629295 , a0=0.0 , w0=0.0
2025-12-01 10:36:28,322 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:28,323 - INFO - integration_test - Dyn residual k=0: pred=[11.255724926026373, 4.480108596116416, 0.1660350594367765, 3.0, 12.104332612629296], ws=[11.255724926026373, 4.480108596116416, 0.16603505943677632, 3.0, 14.698265911358373], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -2.593933298729077], res_norm=2.594e+00
2025-12-01 10:36:28,323 - INFO - integration_test - Dyn residual k=1: pred=[11.551599270842232, 4.529690569451351, 0.16603505943677632, 3.0, 14.998265911358374], ws=[11.551599270842232, 4.529690569451351, 0.16603505943677632, 3.0, 17.49250934730734], res=[0.0, 0.0, 0.0, 0.0, -2.4942434359489667], res_norm=2.494e+00
2025-12-01 10:36:28,324 - INFO - integration_test - Dyn residual k=2: pred=[11.84747361565809, 4.579272542786287, 0.16603505943677632, 3.0, 17.79250934730734], ws=[11.84747361565809, 4.579272542786287, 0.16603505943677632, 3.0, 20.373834729612554], res=[0.0, 0.0, 0.0, 0.0, -2.581325382305213], res_norm=2.581e+00
2025-12-01 10:36:28,338 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,350 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,365 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,376 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,391 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,402 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,417 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,428 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,443 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,453 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,469 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,480 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,495 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,506 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,521 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,532 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,547 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,558 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,574 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,584 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,599 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:28,610 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:28,950 - INFO - integration_test - Step 44: MPC solve successful
2025-12-01 10:36:28,958 - INFO - integration_test - Step 44: Computed 10 numeric contouring constraints for visualization (s=11.804)
2025-12-01 10:36:28,959 - DEBUG - integration_test - Step 44: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:28,959 - INFO - integration_test - === Applying control at step 44 ===
2025-12-01 10:36:28,959 - INFO - integration_test -   Control dict from planner: {'a': 5.785818662937502e-08, 'w': -0.19492634661370653}
2025-12-01 10:36:28,959 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:28,959 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:28,960 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:28,960 - INFO - integration_test - Step 44 completed in 0.657s
2025-12-01 10:36:28,982 - INFO - integration_test - Step 45 (contouring until path end)
2025-12-01 10:36:28,983 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.25618942  4.47722186  0.14654242  3.00000003 12.10433262]
2025-12-01 10:36:28,984 - DEBUG - integration_test - Step 45: Using propagated spline 12.1043 (close to path, dist=0.353m)
2025-12-01 10:36:28,984 - DEBUG - integration_test -   Set spline state to 12.1043
2025-12-01 10:36:28,984 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:28,998 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.256, 4.477), path_start=(0.000, 0.000), dist=12.114m
2025-12-01 10:36:28,999 - WARNING - integration_test - Could not update reference path at step 45: x and y must have the same length
2025-12-01 10:36:28,999 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2025-12-01 10:36:29,001 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:29,002 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:29,002 - INFO - integration_test - Warmstart k=0: x0=11.256189418259641 , y0=4.477221862722076 , psi0=0.14654242477540583 , v0=3.0 , spline0=12.104332615339777 , a0=0.0 , w0=0.0
2025-12-01 10:36:29,002 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:29,003 - INFO - integration_test - Dyn residual k=0: pred=[11.552973976320713, 4.521027411417349, 0.14654242477540583, 3.0, 12.404332615339777], ws=[11.552973976320713, 4.521027411417349, 0.1465424247754057, 3.0, 15.08876446776257], res=[0.0, 0.0, 1.3877787807814457e-16, 0.0, -2.684431852422792], res_norm=2.684e+00
2025-12-01 10:36:29,004 - INFO - integration_test - Dyn residual k=1: pred=[11.849758534381785, 4.564832960112622, 0.1465424247754057, 3.0, 15.38876446776257], ws=[11.849758534381785, 4.564832960112622, 0.1465424247754057, 3.0, 18.029782756958017], res=[0.0, 0.0, 0.0, 0.0, -2.641018289195447], res_norm=2.641e+00
2025-12-01 10:36:29,004 - INFO - integration_test - Dyn residual k=2: pred=[12.146543092442856, 4.608638508807895, 0.1465424247754057, 3.0, 18.329782756958018], ws=[12.146543092442856, 4.608638508807895, 0.1465424247754057, 3.0, 21.01359126407861], res=[0.0, 0.0, 0.0, 0.0, -2.6838085071205917], res_norm=2.684e+00
2025-12-01 10:36:29,019 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,030 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,046 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,057 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,073 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,084 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,099 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,109 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,124 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,135 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,150 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,161 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,176 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,187 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,213 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,228 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,239 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,254 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,266 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,282 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,293 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,674 - INFO - integration_test - Step 45: MPC solve successful
2025-12-01 10:36:29,682 - INFO - integration_test - Step 45: Computed 10 numeric contouring constraints for visualization (s=12.104)
2025-12-01 10:36:29,682 - DEBUG - integration_test - Step 45: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:29,682 - INFO - integration_test - === Applying control at step 45 ===
2025-12-01 10:36:29,682 - INFO - integration_test -   Control dict from planner: {'a': -1.9346699310457954e-06, 'w': -0.4525701679604514}
2025-12-01 10:36:29,682 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:29,682 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:29,683 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:29,683 - INFO - integration_test - Step 45 completed in 0.700s
2025-12-01 10:36:29,704 - INFO - integration_test - Step 46 (contouring until path end)
2025-12-01 10:36:29,706 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.55386375  4.51429781  0.10128541  2.99999983 12.4043326 ]
2025-12-01 10:36:29,706 - DEBUG - integration_test - Step 46: Using propagated spline 12.4043 (close to path, dist=0.245m)
2025-12-01 10:36:29,706 - DEBUG - integration_test -   Set spline state to 12.4043
2025-12-01 10:36:29,707 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:29,720 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.554, 4.514), path_start=(0.000, 0.000), dist=12.404m
2025-12-01 10:36:29,721 - WARNING - integration_test - Could not update reference path at step 46: x and y must have the same length
2025-12-01 10:36:29,721 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2025-12-01 10:36:29,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:29,724 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:29,724 - INFO - integration_test - Warmstart k=0: x0=11.55386375302394 , y0=4.514297812807819 , psi0=0.1012854079793607 , v0=2.999999833637825 , spline0=12.40433259870356 , a0=0.0 , w0=0.0
2025-12-01 10:36:29,724 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:29,725 - INFO - integration_test - Dyn residual k=0: pred=[11.852326241463038, 4.544631507159328, 0.1012854079793607, 2.999999833637825, 12.704332582067343], ws=[11.852326241463038, 4.544631507159328, 0.10128540797936081, 2.999999833637825, 15.405148805699405], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.700816223632062], res_norm=2.701e+00
2025-12-01 10:36:29,726 - INFO - integration_test - Dyn residual k=1: pred=[12.150788729902136, 4.574965201510836, 0.10128540797936081, 2.999999833637825, 15.705148789063188], ws=[12.150788729902136, 4.574965201510836, 0.10128540797936081, 2.999999833637825, 18.37324277309155], res=[0.0, 0.0, 0.0, 0.0, -2.6680939840283635], res_norm=2.668e+00
2025-12-01 10:36:29,727 - INFO - integration_test - Dyn residual k=2: pred=[12.449251218341233, 4.605298895862345, 0.10128540797936081, 2.999999833637825, 18.673242756455334], ws=[12.449251218341233, 4.605298895862345, 0.10128540797936081, 2.999999833637825, 21.505487236036743], res=[0.0, 0.0, 0.0, 0.0, -2.8322444795814086], res_norm=2.832e+00
2025-12-01 10:36:29,741 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,752 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,769 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,780 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,795 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,806 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,822 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,833 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,848 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,859 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,875 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,886 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,901 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,917 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,932 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,942 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,957 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,968 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:29,984 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:29,995 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,010 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,020 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,426 - INFO - integration_test - Step 46: MPC solve successful
2025-12-01 10:36:30,434 - INFO - integration_test - Step 46: Computed 10 numeric contouring constraints for visualization (s=12.404)
2025-12-01 10:36:30,434 - DEBUG - integration_test - Step 46: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:30,434 - INFO - integration_test - === Applying control at step 46 ===
2025-12-01 10:36:30,434 - INFO - integration_test -   Control dict from planner: {'a': 1.1141900759200645e-06, 'w': -0.3252858453857109}
2025-12-01 10:36:30,434 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:30,434 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:30,435 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:30,435 - INFO - integration_test - Step 46 completed in 0.730s
2025-12-01 10:36:30,459 - INFO - integration_test - Step 47 (contouring until path end)
2025-12-01 10:36:30,460 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.85276693  4.53977231  0.06875682  2.99999995 12.70433259]
2025-12-01 10:36:30,461 - DEBUG - integration_test - Step 47: Using propagated spline 12.7043 (close to path, dist=0.235m)
2025-12-01 10:36:30,461 - DEBUG - integration_test -   Set spline state to 12.7043
2025-12-01 10:36:30,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:30,475 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.853, 4.540), path_start=(0.000, 0.000), dist=12.692m
2025-12-01 10:36:30,475 - WARNING - integration_test - Could not update reference path at step 47: x and y must have the same length
2025-12-01 10:36:30,475 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2025-12-01 10:36:30,477 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:30,478 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:30,479 - INFO - integration_test - Warmstart k=0: x0=11.852766928188815 , y0=4.539772305374968 , psi0=0.06875682344078961 , v0=2.9999999450568327 , spline0=12.704332593209243 , a0=0.0 , w0=0.0
2025-12-01 10:36:30,479 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:30,479 - INFO - integration_test - Dyn residual k=0: pred=[12.152058076913805, 4.560383103474172, 0.06875682344078961, 2.9999999450568327, 13.004332587714925], ws=[12.152058076913805, 4.560383103474172, 0.06875682344078982, 2.9999999450568327, 15.802543303615558], res=[0.0, 0.0, -2.0816681711721685e-16, 0.0, -2.798210715900632], res_norm=2.798e+00
2025-12-01 10:36:30,480 - INFO - integration_test - Dyn residual k=1: pred=[12.451349225638795, 4.580993901573376, 0.06875682344078982, 2.9999999450568327, 16.10254329812124], ws=[12.451349225638795, 4.580993901573376, 0.06875682344078982, 2.9999999450568327, 18.831828176319696], res=[0.0, 0.0, 0.0, 0.0, -2.729284878198456], res_norm=2.729e+00
2025-12-01 10:36:30,481 - INFO - integration_test - Dyn residual k=2: pred=[12.750640374363785, 4.60160469967258, 0.06875682344078982, 2.9999999450568327, 19.13182817082538], ws=[12.750640374363785, 4.60160469967258, 0.06875682344078982, 2.9999999450568327, 22.045543478036485], res=[0.0, 0.0, 0.0, 0.0, -2.913715307211106], res_norm=2.914e+00
2025-12-01 10:36:30,495 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,506 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,521 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,532 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,547 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,558 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,574 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,585 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,600 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,611 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,626 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,636 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,651 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,662 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,678 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,689 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,705 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,716 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,733 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,744 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:30,760 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:30,772 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,107 - INFO - integration_test - Step 47: MPC solve successful
2025-12-01 10:36:31,114 - INFO - integration_test - Step 47: Computed 10 numeric contouring constraints for visualization (s=12.704)
2025-12-01 10:36:31,115 - DEBUG - integration_test - Step 47: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:31,115 - INFO - integration_test - === Applying control at step 47 ===
2025-12-01 10:36:31,115 - INFO - integration_test -   Control dict from planner: {'a': 3.616352829704833e-07, 'w': -0.7999874638114547}
2025-12-01 10:36:31,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:31,115 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:31,116 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:31,116 - INFO - integration_test - Step 47 completed in 0.656s
2025-12-01 10:36:31,136 - INFO - integration_test - Step 48 (contouring until path end)
2025-12-01 10:36:31,136 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[ 1.21525629e+01  4.54839605e+00 -1.12419229e-02  2.99999998e+00
  1.30043326e+01]
2025-12-01 10:36:31,137 - DEBUG - integration_test - Step 48: Using propagated spline 13.0043 (close to path, dist=0.211m)
2025-12-01 10:36:31,137 - DEBUG - integration_test -   Set spline state to 13.0043
2025-12-01 10:36:31,138 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:31,151 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.153, 4.548), path_start=(0.000, 0.000), dist=12.976m
2025-12-01 10:36:31,152 - WARNING - integration_test - Could not update reference path at step 48: x and y must have the same length
2025-12-01 10:36:31,152 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2025-12-01 10:36:31,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:31,156 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:31,156 - INFO - integration_test - Warmstart k=0: x0=12.152562930657389 , y0=4.548396051361422 , psi0=-0.01124192294035585 , v0=2.999999981220361 , spline0=13.004332591331279 , a0=0.0 , w0=0.0
2025-12-01 10:36:31,156 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:31,157 - INFO - integration_test - Dyn residual k=0: pred=[12.452543971854485, 4.5450235455381565, -0.01124192294035585, 2.999999981220361, 13.304332589453315], ws=[12.452543971854485, 4.5450235455381565, -0.011241922940355753, 2.999999981220361, 16.120390734964786], res=[0.0, 0.0, -9.71445146547012e-17, 0.0, -2.8160581455114713], res_norm=2.816e+00
2025-12-01 10:36:31,158 - INFO - integration_test - Dyn residual k=1: pred=[12.752525013051581, 4.541651039714891, -0.011241922940355753, 2.999999981220361, 16.420390733086823], ws=[12.752525013051581, 4.541651039714891, -0.011241922940355753, 2.999999981220361, 19.28555795044779], res=[0.0, 0.0, 0.0, 0.0, -2.865167217360966], res_norm=2.865e+00
2025-12-01 10:36:31,158 - INFO - integration_test - Dyn residual k=2: pred=[13.052506054248678, 4.538278533891625, -0.011241922940355753, 2.999999981220361, 19.585557948569825], ws=[13.052506054248678, 4.538278533891625, -0.011241922940355753, 2.999999981220361, 22.56470507478919], res=[0.0, 0.0, 0.0, 0.0, -2.9791471262193667], res_norm=2.979e+00
2025-12-01 10:36:31,173 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,184 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,200 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,211 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,226 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,237 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,252 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,263 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,279 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,290 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,305 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,315 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,330 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,341 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,356 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,367 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,382 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,393 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,408 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,419 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,434 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,445 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,843 - INFO - integration_test - Step 48: MPC solve successful
2025-12-01 10:36:31,851 - INFO - integration_test - Step 48: Computed 10 numeric contouring constraints for visualization (s=13.004)
2025-12-01 10:36:31,851 - DEBUG - integration_test - Step 48: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:31,851 - INFO - integration_test - === Applying control at step 48 ===
2025-12-01 10:36:31,851 - INFO - integration_test -   Control dict from planner: {'a': 1.7901456227280516e-07, 'w': -0.799997119572717}
2025-12-01 10:36:31,851 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:31,851 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:31,852 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:31,852 - INFO - integration_test - Step 48 completed in 0.716s
2025-12-01 10:36:31,876 - INFO - integration_test - Step 49 (contouring until path end)
2025-12-01 10:36:31,877 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.45208927  4.53303434 -0.09124163  3.         13.30433259]
2025-12-01 10:36:31,878 - DEBUG - integration_test - Step 49: Using propagated spline 13.3043 (close to path, dist=0.160m)
2025-12-01 10:36:31,878 - DEBUG - integration_test -   Set spline state to 13.3043
2025-12-01 10:36:31,878 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:31,892 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.452, 4.533), path_start=(0.000, 0.000), dist=13.252m
2025-12-01 10:36:31,892 - WARNING - integration_test - Could not update reference path at step 49: x and y must have the same length
2025-12-01 10:36:31,892 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2025-12-01 10:36:31,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:31,896 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:31,896 - INFO - integration_test - Warmstart k=0: x0=12.452089274095032 , y0=4.5330343411417235 , psi0=-0.09124163489762756 , v0=2.999999999121817 , spline0=13.30433259124346 , a0=0.0 , w0=0.0
2025-12-01 10:36:31,896 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:31,897 - INFO - integration_test - Dyn residual k=0: pred=[12.75084138470418, 4.505699814369019, -0.09124163489762756, 2.999999999121817, 13.604332591155641], ws=[12.75084138470418, 4.505699814369019, -0.09124163489762749, 2.999999999121817, 16.52724780091643], res=[0.0, 0.0, -6.938893903907228e-17, 0.0, -2.92291520976079], res_norm=2.923e+00
2025-12-01 10:36:31,897 - INFO - integration_test - Dyn residual k=1: pred=[13.04959349531333, 4.478365287596315, -0.09124163489762749, 2.999999999121817, 16.827247800828612], ws=[13.04959349531333, 4.478365287596315, -0.09124163489762749, 2.999999999121817, 19.764064774668615], res=[0.0, 0.0, 0.0, 0.0, -2.9368169738400027], res_norm=2.937e+00
2025-12-01 10:36:31,898 - INFO - integration_test - Dyn residual k=2: pred=[13.348345605922479, 4.451030760823611, -0.09124163489762749, 2.999999999121817, 20.064064774580796], ws=[13.348345605922479, 4.451030760823611, -0.09124163489762749, 2.999999999121817, 23.127635419035563], res=[0.0, 0.0, 0.0, 0.0, -3.0635706444547672], res_norm=3.064e+00
2025-12-01 10:36:31,913 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,923 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,939 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,950 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,966 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:31,977 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:31,992 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,003 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,018 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,028 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,043 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,054 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,070 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,081 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,096 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,106 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,121 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,132 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,147 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,159 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,175 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,186 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,566 - INFO - integration_test - Step 49: MPC solve successful
2025-12-01 10:36:32,574 - INFO - integration_test - Step 49: Computed 10 numeric contouring constraints for visualization (s=13.304)
2025-12-01 10:36:32,574 - DEBUG - integration_test - Step 49: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:32,574 - INFO - integration_test - === Applying control at step 49 ===
2025-12-01 10:36:32,574 - INFO - integration_test -   Control dict from planner: {'a': 2.0461976179784518e-07, 'w': -0.7439200887313878}
2025-12-01 10:36:32,574 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:32,574 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:32,575 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:32,576 - INFO - integration_test - Step 49 completed in 0.699s
2025-12-01 10:36:32,596 - INFO - integration_test - Step 50 (contouring until path end)
2025-12-01 10:36:32,597 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.74954964  4.49461776 -0.16563364  3.00000002 13.60433259]
2025-12-01 10:36:32,598 - DEBUG - integration_test - Step 50: Using propagated spline 13.6043 (close to path, dist=0.242m)
2025-12-01 10:36:32,598 - DEBUG - integration_test -   Set spline state to 13.6043
2025-12-01 10:36:32,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:32,612 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.750, 4.495), path_start=(0.000, 0.000), dist=13.519m
2025-12-01 10:36:32,612 - WARNING - integration_test - Could not update reference path at step 50: x and y must have the same length
2025-12-01 10:36:32,612 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2025-12-01 10:36:32,615 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:32,616 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:32,616 - INFO - integration_test - Warmstart k=0: x0=12.749549641209503 , y0=4.494617758208294 , psi0=-0.16563364377076634 , v0=3.0 , spline0=13.604332593201839 , a0=0.0 , w0=0.0
2025-12-01 10:36:32,616 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:32,617 - INFO - integration_test - Dyn residual k=0: pred=[13.045443865167888, 4.445154557462033, -0.16563364377076634, 3.0, 13.90433259320184], ws=[13.045443865167888, 4.445154557462033, -0.16563364377076617, 3.0, 16.846968168103658], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.942635574901818], res_norm=2.943e+00
2025-12-01 10:36:32,617 - INFO - integration_test - Dyn residual k=1: pred=[13.341338089126273, 4.395691356715771, -0.16563364377076617, 3.0, 17.14696816810366], ws=[13.341338089126273, 4.395691356715771, -0.16563364377076617, 3.0, 20.117217216935625], res=[0.0, 0.0, 0.0, 0.0, -2.970249048831967], res_norm=2.970e+00
2025-12-01 10:36:32,618 - INFO - integration_test - Dyn residual k=2: pred=[13.637232313084658, 4.346228155969509, -0.16563364377076617, 3.0, 20.417217216935626], ws=[13.637232313084658, 4.346228155969509, -0.16563364377076617, 3.0, 23.519668515093397], res=[0.0, 0.0, 0.0, 0.0, -3.1024512981577708], res_norm=3.102e+00
2025-12-01 10:36:32,632 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,643 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,659 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,670 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,686 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,697 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,712 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,723 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,738 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,749 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,765 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,776 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,791 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,802 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,817 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,828 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,843 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,853 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,870 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,880 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:32,896 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:32,906 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,268 - INFO - integration_test - Step 50: MPC solve successful
2025-12-01 10:36:33,276 - INFO - integration_test - Step 50: Computed 10 numeric contouring constraints for visualization (s=13.604)
2025-12-01 10:36:33,277 - DEBUG - integration_test - Step 50: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:33,277 - INFO - integration_test - === Applying control at step 50 ===
2025-12-01 10:36:33,277 - INFO - integration_test -   Control dict from planner: {'a': 6.928407391006072e-08, 'w': -0.8000000056646462}
2025-12-01 10:36:33,277 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:33,277 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:33,278 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:33,278 - INFO - integration_test - Step 50 completed in 0.681s
2025-12-01 10:36:33,299 - INFO - integration_test - Step 51 (contouring until path end)
2025-12-01 10:36:33,300 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.04315088  4.43337784 -0.24563364  3.00000003 13.9043326 ]
2025-12-01 10:36:33,300 - DEBUG - integration_test - Step 51: Using propagated spline 13.9043 (close to path, dist=0.148m)
2025-12-01 10:36:33,300 - DEBUG - integration_test -   Set spline state to 13.9043
2025-12-01 10:36:33,301 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:33,314 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.043, 4.433), path_start=(0.000, 0.000), dist=13.776m
2025-12-01 10:36:33,314 - WARNING - integration_test - Could not update reference path at step 51: x and y must have the same length
2025-12-01 10:36:33,314 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2025-12-01 10:36:33,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:33,318 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:33,318 - INFO - integration_test - Warmstart k=0: x0=13.043150879018219 , y0=4.433377842004845 , psi0=-0.24563364433723095 , v0=3.0 , spline0=13.90433259585306 , a0=0.0 , w0=0.0
2025-12-01 10:36:33,318 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:33,319 - INFO - integration_test - Dyn residual k=0: pred=[13.33414590975333, 4.360426542582063, -0.24563364433723095, 3.0, 14.20433259585306], ws=[13.33414590975333, 4.360426542582063, -0.2456336443372309, 3.0, 17.265169499148406], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -3.060836903295346], res_norm=3.061e+00
2025-12-01 10:36:33,319 - INFO - integration_test - Dyn residual k=1: pred=[13.625140940488441, 4.287475243159282, -0.2456336443372309, 3.0, 17.565169499148407], ws=[13.625140940488441, 4.287475243159282, -0.2456336443372309, 3.0, 20.732886434085657], res=[0.0, 0.0, 0.0, 0.0, -3.16771693493725], res_norm=3.168e+00
2025-12-01 10:36:33,320 - INFO - integration_test - Dyn residual k=2: pred=[13.916135971223552, 4.2145239437365, -0.2456336443372309, 3.0, 21.032886434085658], ws=[13.916135971223552, 4.2145239437365, -0.2456336443372309, 3.0, 24.2462099494691], res=[0.0, 0.0, 0.0, 0.0, -3.2133235153834434], res_norm=3.213e+00
2025-12-01 10:36:33,335 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,345 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,361 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,372 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,388 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,398 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,413 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,424 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,439 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,450 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,477 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,492 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,503 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,518 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,529 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,544 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,554 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,571 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,582 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,597 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:33,607 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:33,976 - INFO - integration_test - Step 51: MPC solve successful
2025-12-01 10:36:33,983 - INFO - integration_test - Step 51: Computed 10 numeric contouring constraints for visualization (s=13.904)
2025-12-01 10:36:33,983 - DEBUG - integration_test - Step 51: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:33,983 - INFO - integration_test - === Applying control at step 51 ===
2025-12-01 10:36:33,983 - INFO - integration_test -   Control dict from planner: {'a': -2.120377875136099e-06, 'w': -0.799925944857134}
2025-12-01 10:36:33,983 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:33,984 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:33,984 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:33,985 - INFO - integration_test - Step 51 completed in 0.685s
2025-12-01 10:36:34,005 - INFO - integration_test - Step 52 (contouring until path end)
2025-12-01 10:36:34,006 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.33091944  4.3488718  -0.32562624  2.99999981 14.20433258]
2025-12-01 10:36:34,007 - DEBUG - integration_test - Step 52: Using propagated spline 14.2043 (close to path, dist=0.320m)
2025-12-01 10:36:34,007 - DEBUG - integration_test -   Set spline state to 14.2043
2025-12-01 10:36:34,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:34,020 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.331, 4.349), path_start=(0.000, 0.000), dist=14.022m
2025-12-01 10:36:34,021 - WARNING - integration_test - Could not update reference path at step 52: x and y must have the same length
2025-12-01 10:36:34,021 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2025-12-01 10:36:34,023 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:34,025 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:34,025 - INFO - integration_test - Warmstart k=0: x0=13.330919441971162 , y0=4.348871800282611 , psi0=-0.32562623882294434 , v0=2.999999814474413 , spline0=14.204332577300502 , a0=0.0 , w0=0.0
2025-12-01 10:36:34,025 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:34,026 - INFO - integration_test - Dyn residual k=0: pred=[13.615154597507686, 4.2529011525532505, -0.32562623882294434, 2.999999814474413, 14.504332558747944], ws=[13.615154597507686, 4.2529011525532505, -0.3256262388229443, 2.999999814474413, 17.587057777906693], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -3.0827252191587498], res_norm=3.083e+00
2025-12-01 10:36:34,026 - INFO - integration_test - Dyn residual k=1: pred=[13.899389753044211, 4.15693050482389, -0.3256262388229443, 2.999999814474413, 17.887057759354136], ws=[13.899389753044211, 4.15693050482389, -0.3256262388229443, 2.999999814474413, 21.09183639815251], res=[0.0, 0.0, 0.0, 0.0, -3.2047786387983734], res_norm=3.205e+00
2025-12-01 10:36:34,027 - INFO - integration_test - Dyn residual k=2: pred=[14.183624908580736, 4.06095985709453, -0.3256262388229443, 2.999999814474413, 21.39183637959995], ws=[14.183624908580736, 4.06095985709453, -0.3256262388229443, 2.999999814474413, 24.72438646243609], res=[0.0, 0.0, 0.0, 0.0, -3.332550082836139], res_norm=3.333e+00
2025-12-01 10:36:34,041 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,052 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,069 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,080 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,106 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,121 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,132 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,147 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,158 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,174 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,184 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,200 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,211 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,226 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,237 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,252 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,263 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,279 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,289 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,305 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,316 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,694 - INFO - integration_test - Step 52: MPC solve successful
2025-12-01 10:36:34,701 - INFO - integration_test - Step 52: Computed 10 numeric contouring constraints for visualization (s=14.204)
2025-12-01 10:36:34,701 - DEBUG - integration_test - Step 52: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:34,701 - INFO - integration_test - === Applying control at step 52 ===
2025-12-01 10:36:34,701 - INFO - integration_test -   Control dict from planner: {'a': 1.2693909817879264e-06, 'w': -0.7999855954920151}
2025-12-01 10:36:34,702 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:34,702 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:34,702 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:34,703 - INFO - integration_test - Step 52 completed in 0.697s
2025-12-01 10:36:34,722 - INFO - integration_test - Step 53 (contouring until path end)
2025-12-01 10:36:34,724 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.61101482  4.24164034 -0.4056248   2.99999994 14.50433257]
2025-12-01 10:36:34,725 - DEBUG - integration_test - Step 53: Using propagated spline 14.5043 (close to path, dist=0.243m)
2025-12-01 10:36:34,725 - DEBUG - integration_test -   Set spline state to 14.5043
2025-12-01 10:36:34,725 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:34,738 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.611, 4.242), path_start=(0.000, 0.000), dist=14.257m
2025-12-01 10:36:34,739 - WARNING - integration_test - Could not update reference path at step 53: x and y must have the same length
2025-12-01 10:36:34,739 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2025-12-01 10:36:34,741 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:34,742 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:34,742 - INFO - integration_test - Warmstart k=0: x0=13.611014821174406 , y0=4.241640341488612 , psi0=-0.4056247983721458 , v0=2.9999999414135115 , spline0=14.504332571441854 , a0=0.0 , w0=0.0
2025-12-01 10:36:34,743 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:34,743 - INFO - integration_test - Dyn residual k=0: pred=[13.886671626442753, 4.123262462668035, -0.4056247983721458, 2.9999999414135115, 14.804332565583206], ws=[13.886671626442753, 4.123262462668035, -0.4056247983721457, 2.9999999414135115, 18.01775327951518], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.213420713931974], res_norm=3.213e+00
2025-12-01 10:36:34,744 - INFO - integration_test - Dyn residual k=1: pred=[14.162328431711101, 4.004884583847458, -0.4056247983721457, 2.9999999414135115, 18.317753273656532], ws=[14.162328431711101, 4.004884583847458, -0.4056247983721457, 2.9999999414135115, 21.612490818364712], res=[0.0, 0.0, 0.0, 0.0, -3.2947375447081804], res_norm=3.295e+00
2025-12-01 10:36:34,745 - INFO - integration_test - Dyn residual k=2: pred=[14.437985236979449, 3.886506705026881, -0.4056247983721457, 2.9999999414135115, 21.912490812506064], ws=[14.437985236979449, 3.886506705026881, -0.4056247983721457, 2.9999999414135115, 25.320934744636453], res=[0.0, 0.0, 0.0, 0.0, -3.408443932130389], res_norm=3.408e+00
2025-12-01 10:36:34,760 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,771 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,787 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,798 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,813 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,824 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,839 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,850 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,865 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,876 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,892 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,902 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,922 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,932 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,947 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,958 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:34,973 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:34,984 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,000 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,011 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,026 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,037 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,461 - INFO - integration_test - Step 53: MPC solve successful
2025-12-01 10:36:35,468 - INFO - integration_test - Step 53: Computed 10 numeric contouring constraints for visualization (s=14.504)
2025-12-01 10:36:35,469 - DEBUG - integration_test - Step 53: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:35,469 - INFO - integration_test - === Applying control at step 53 ===
2025-12-01 10:36:35,469 - INFO - integration_test -   Control dict from planner: {'a': 5.665036550614815e-07, 'w': -0.004916202519458804}
2025-12-01 10:36:35,469 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:35,469 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:35,470 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:35,470 - INFO - integration_test - Step 53 completed in 0.746s
2025-12-01 10:36:35,490 - INFO - integration_test - Step 54 (contouring until path end)
2025-12-01 10:36:35,492 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.88664252  4.12319471 -0.40611642  3.         14.80433257]
2025-12-01 10:36:35,492 - DEBUG - integration_test - Step 54: Using propagated spline 14.8043 (close to path, dist=0.341m)
2025-12-01 10:36:35,492 - DEBUG - integration_test -   Set spline state to 14.8043
2025-12-01 10:36:35,492 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:35,506 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.887, 4.123), path_start=(0.000, 0.000), dist=14.486m
2025-12-01 10:36:35,506 - WARNING - integration_test - Could not update reference path at step 54: x and y must have the same length
2025-12-01 10:36:35,506 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2025-12-01 10:36:35,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:35,510 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:35,510 - INFO - integration_test - Warmstart k=0: x0=13.886642519460407 , y0=4.123194707085294 , psi0=-0.4061164186240917 , v0=2.9999999980638767 , spline0=14.804332571248242 , a0=0.0 , w0=0.0
2025-12-01 10:36:35,510 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:35,511 - INFO - integration_test - Dyn residual k=0: pred=[14.16224109966093, 4.00468132186958, -0.4061164186240917, 2.9999999980638767, 15.10433257105463], ws=[14.16224109966093, 4.00468132186958, -0.40611641862409176, 2.9999999980638767, 18.341982228775585], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -3.2376496577209544], res_norm=3.238e+00
2025-12-01 10:36:35,512 - INFO - integration_test - Dyn residual k=1: pred=[14.437839679861453, 3.886167936653865, -0.40611641862409176, 2.9999999980638767, 18.641982228581973], ws=[14.437839679861453, 3.886167936653865, -0.40611641862409176, 2.9999999980638767, 22.092058004162354], res=[0.0, 0.0, 0.0, 0.0, -3.4500757755803804], res_norm=3.450e+00
2025-12-01 10:36:35,512 - INFO - integration_test - Dyn residual k=2: pred=[14.713438260061976, 3.7676545514381505, -0.40611641862409176, 2.9999999980638767, 22.392058003968742], ws=[14.713438260061976, 3.7676545514381505, -0.40611641862409176, 2.9999999980638767, 25.84452576452567], res=[0.0, 0.0, 0.0, 0.0, -3.452467760556928], res_norm=3.452e+00
2025-12-01 10:36:35,527 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,538 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,554 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,566 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,583 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,595 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,612 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,623 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,639 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,651 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,666 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,677 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,692 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,703 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,718 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,729 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,744 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,755 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,771 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,782 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:35,798 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:35,809 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,261 - INFO - integration_test - Step 54: MPC solve successful
2025-12-01 10:36:36,269 - INFO - integration_test - Step 54: Computed 10 numeric contouring constraints for visualization (s=14.804)
2025-12-01 10:36:36,269 - DEBUG - integration_test - Step 54: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:36,269 - INFO - integration_test - === Applying control at step 54 ===
2025-12-01 10:36:36,269 - INFO - integration_test -   Control dict from planner: {'a': 1.6986244468896854e-07, 'w': 0.6215915150811231}
2025-12-01 10:36:36,269 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:36,269 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:36,271 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:36,271 - INFO - integration_test - Step 54 completed in 0.780s
2025-12-01 10:36:36,292 - INFO - integration_test - Step 55 (contouring until path end)
2025-12-01 10:36:36,293 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.16574582  4.01332035 -0.34395727  3.00000002 15.10433257]
2025-12-01 10:36:36,293 - DEBUG - integration_test - Step 55: Using propagated spline 15.1043 (close to path, dist=0.468m)
2025-12-01 10:36:36,293 - DEBUG - integration_test -   Set spline state to 15.1043
2025-12-01 10:36:36,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:36,307 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.166, 4.013), path_start=(0.000, 0.000), dist=14.723m
2025-12-01 10:36:36,308 - WARNING - integration_test - Could not update reference path at step 55: x and y must have the same length
2025-12-01 10:36:36,308 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2025-12-01 10:36:36,310 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:36,311 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:36,311 - INFO - integration_test - Warmstart k=0: x0=14.165745821639678 , y0=4.013320353527251 , psi0=-0.3439572671159794 , v0=3.0 , spline0=15.104332572753254 , a0=0.0 , w0=0.0
2025-12-01 10:36:36,311 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:36,312 - INFO - integration_test - Dyn residual k=0: pred=[14.448174098557912, 3.9121557925535693, -0.3439572671159794, 3.0, 15.404332572753255], ws=[14.448174098557912, 3.9121557925535693, -0.3439572671159796, 3.0, 18.785555399935735], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.38122282718248], res_norm=3.381e+00
2025-12-01 10:36:36,313 - INFO - integration_test - Dyn residual k=1: pred=[14.730602375476145, 3.8109912315798873, -0.3439572671159796, 3.0, 19.085555399935735], ws=[14.730602375476145, 3.8109912315798873, -0.3439572671159796, 3.0, 22.625619898670898], res=[0.0, 0.0, 0.0, 0.0, -3.5400644987351626], res_norm=3.540e+00
2025-12-01 10:36:36,314 - INFO - integration_test - Dyn residual k=2: pred=[15.013030652394379, 3.7098266706062053, -0.3439572671159796, 3.0, 22.9256198986709], ws=[15.013030652394379, 3.7098266706062053, -0.3439572671159796, 3.0, 26.436837407455243], res=[0.0, 0.0, 0.0, 0.0, -3.5112175087843447], res_norm=3.511e+00
2025-12-01 10:36:36,328 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,339 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,355 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,367 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,383 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,394 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,410 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,421 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,436 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,446 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,462 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,473 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,488 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,499 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,514 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,525 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,551 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,567 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,578 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,593 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:36,604 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:36,955 - INFO - integration_test - Step 55: MPC solve successful
2025-12-01 10:36:36,964 - INFO - integration_test - Step 55: Computed 10 numeric contouring constraints for visualization (s=15.104)
2025-12-01 10:36:36,964 - DEBUG - integration_test - Step 55: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:36,964 - INFO - integration_test - === Applying control at step 55 ===
2025-12-01 10:36:36,964 - INFO - integration_test -   Control dict from planner: {'a': 5.305816970952959e-08, 'w': 0.5654651819297422}
2025-12-01 10:36:36,964 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:36,964 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:36,966 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:36,966 - INFO - integration_test - Step 55 completed in 0.674s
2025-12-01 10:36:36,986 - INFO - integration_test - Step 56 (contouring until path end)
2025-12-01 10:36:36,987 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.4508831   3.92019274 -0.28741075  3.00000002 15.40433257]
2025-12-01 10:36:36,988 - DEBUG - integration_test - Step 56: Using propagated spline 15.4043 (close to path, dist=0.457m)
2025-12-01 10:36:36,988 - DEBUG - integration_test -   Set spline state to 15.4043
2025-12-01 10:36:36,988 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:37,002 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.451, 3.920), path_start=(0.000, 0.000), dist=14.973m
2025-12-01 10:36:37,002 - WARNING - integration_test - Could not update reference path at step 56: x and y must have the same length
2025-12-01 10:36:37,002 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2025-12-01 10:36:37,004 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:37,006 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:37,006 - INFO - integration_test - Warmstart k=0: x0=14.45088310395347 , y0=3.920192735840718 , psi0=-0.28741074892300517 , v0=3.0 , spline0=15.404332574788848 , a0=0.0 , w0=0.0
2025-12-01 10:36:37,006 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:37,007 - INFO - integration_test - Dyn residual k=0: pred=[14.738577423349847, 3.8351516952364544, -0.28741074892300517, 3.0, 15.704332574788848], ws=[14.738577423349847, 3.8351516952364544, -0.28741074892300533, 3.0, 19.112149069150476], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -3.4078164943616276], res_norm=3.408e+00
2025-12-01 10:36:37,007 - INFO - integration_test - Dyn residual k=1: pred=[15.026271742746223, 3.750110654632191, -0.28741074892300533, 3.0, 19.412149069150477], ws=[15.026271742746223, 3.750110654632191, -0.28741074892300533, 3.0, 22.987018139526672], res=[0.0, 0.0, 0.0, 0.0, -3.574869070376195], res_norm=3.575e+00
2025-12-01 10:36:37,008 - INFO - integration_test - Dyn residual k=2: pred=[15.3139660621426, 3.6650696140279275, -0.28741074892300533, 3.0, 23.287018139526673], ws=[15.3139660621426, 3.6650696140279275, -0.28741074892300533, 3.0, 26.8784928266467], res=[0.0, 0.0, 0.0, 0.0, -3.5914746871200265], res_norm=3.591e+00
2025-12-01 10:36:37,023 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,033 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,049 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,060 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,076 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,086 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,102 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,112 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,127 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,138 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,153 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,164 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,179 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,190 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,205 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,215 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,230 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,241 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,257 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,268 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,284 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,294 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,589 - INFO - integration_test - Step 56: MPC solve successful
2025-12-01 10:36:37,598 - INFO - integration_test - Step 56: Computed 10 numeric contouring constraints for visualization (s=15.404)
2025-12-01 10:36:37,598 - DEBUG - integration_test - Step 56: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:37,598 - INFO - integration_test - === Applying control at step 56 ===
2025-12-01 10:36:37,599 - INFO - integration_test -   Control dict from planner: {'a': -3.6179834876619044e-08, 'w': 0.5338410149196191}
2025-12-01 10:36:37,599 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:37,599 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:37,600 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:37,600 - INFO - integration_test - Step 56 completed in 0.613s
2025-12-01 10:36:37,622 - INFO - integration_test - Step 57 (contouring until path end)
2025-12-01 10:36:37,623 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.74071018  3.84286941 -0.23402665  3.00000002 15.70433258]
2025-12-01 10:36:37,624 - INFO - integration_test - Step 57: Re-initialized spline from 15.7043 to 16.3565 (vehicle at (14.74, 3.84), closest path point at (15.10, 4.31), distance=0.588m)
2025-12-01 10:36:37,624 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 10:36:37,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:37,640 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.741, 3.843), path_start=(0.000, 0.000), dist=15.233m
2025-12-01 10:36:37,640 - WARNING - integration_test - Could not update reference path at step 57: x and y must have the same length
2025-12-01 10:36:37,640 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2025-12-01 10:36:37,643 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:37,645 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:37,645 - INFO - integration_test - Warmstart k=0: x0=14.740710177972595 , y0=3.84286940916157 , psi0=-0.23402664743104326 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 10:36:37,645 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:37,646 - INFO - integration_test - Dyn residual k=0: pred=[15.032532333650863, 3.7733005263525943, -0.23402664743104326, 3.0, 16.65649891232428], ws=[15.032532333650863, 3.7733005263525943, -0.23402664743104307, 3.0, 20.306761713285432], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -3.6502628009611513], res_norm=3.650e+00
2025-12-01 10:36:37,646 - INFO - integration_test - Dyn residual k=1: pred=[15.324354489329131, 3.7037316435436187, -0.23402664743104307, 3.0, 20.606761713285433], ws=[15.324354489329131, 3.7037316435436187, -0.23402664743104307, 3.0, 24.472393857639464], res=[0.0, 0.0, 0.0, 0.0, -3.8656321443540307], res_norm=3.866e+00
2025-12-01 10:36:37,647 - INFO - integration_test - Dyn residual k=2: pred=[15.6161766450074, 3.634162760734643, -0.23402664743104307, 3.0, 24.772393857639464], ws=[15.6161766450074, 3.634162760734643, -0.23402664743104307, 3.0, 28.48857183009809], res=[0.0, 0.0, 0.0, 0.0, -3.716177972458624], res_norm=3.716e+00
2025-12-01 10:36:37,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,673 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,689 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,700 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,715 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,726 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,741 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,752 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,767 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,778 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,793 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,804 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,819 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,830 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,845 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,855 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,872 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,884 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,901 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,913 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:37,929 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:37,941 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,285 - INFO - integration_test - Step 57: MPC solve successful
2025-12-01 10:36:38,293 - INFO - integration_test - Step 57: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 10:36:38,293 - DEBUG - integration_test - Step 57: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:38,293 - INFO - integration_test - === Applying control at step 57 ===
2025-12-01 10:36:38,293 - INFO - integration_test -   Control dict from planner: {'a': -3.299217850605143e-07, 'w': 0.7999959110856948}
2025-12-01 10:36:38,294 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:38,294 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:38,294 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:38,295 - INFO - integration_test - Step 57 completed in 0.672s
2025-12-01 10:36:38,316 - INFO - integration_test - Step 58 (contouring until path end)
2025-12-01 10:36:38,317 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.03500242  3.78504131 -0.15402706  2.99999998 16.65649891]
2025-12-01 10:36:38,317 - INFO - integration_test - Step 58: Re-initialized spline from 16.6565 to 16.3565 (vehicle at (15.04, 3.79), closest path point at (15.10, 4.31), distance=0.525m)
2025-12-01 10:36:38,317 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 10:36:38,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:38,331 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.035, 3.785), path_start=(0.000, 0.000), dist=15.504m
2025-12-01 10:36:38,332 - WARNING - integration_test - Could not update reference path at step 58: x and y must have the same length
2025-12-01 10:36:38,332 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2025-12-01 10:36:38,334 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:38,335 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:38,335 - INFO - integration_test - Warmstart k=0: x0=15.035002420956324 , y0=3.785041310260873 , psi0=-0.1540270563224738 , v0=2.9999999837457763 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 10:36:38,335 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:38,336 - INFO - integration_test - Dyn residual k=0: pred=[15.331450799227149, 3.7390156864699367, -0.1540270563224738, 2.9999999837457763, 16.656498910698858], ws=[15.331450799227149, 3.7390156864699367, -0.15402705632247393, 2.9999999837457763, 20.30676171166001], res=[0.0, 0.0, 1.3877787807814457e-16, 0.0, -3.6502628009611513], res_norm=3.650e+00
2025-12-01 10:36:38,337 - INFO - integration_test - Dyn residual k=1: pred=[15.627899177497973, 3.692990062679, -0.15402705632247393, 2.9999999837457763, 20.606761710034586], ws=[15.627899177497973, 3.692990062679, -0.15402705632247393, 2.9999999837457763, 24.470521652143717], res=[0.0, 0.0, 0.0, 0.0, -3.86375994210913], res_norm=3.864e+00
2025-12-01 10:36:38,337 - INFO - integration_test - Dyn residual k=2: pred=[15.924347555768797, 3.6469644388880638, -0.15402705632247393, 2.9999999837457763, 24.770521650518294], ws=[15.924347555768797, 3.6469644388880638, -0.15402705632247393, 2.9999999837457763, 28.480777443298344], res=[0.0, 0.0, 0.0, 0.0, -3.7102557927800497], res_norm=3.710e+00
2025-12-01 10:36:38,352 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,363 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,379 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,389 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,405 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,416 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,431 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,441 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,456 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,467 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,483 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,494 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,509 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,519 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,534 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,545 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,560 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,571 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,587 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,598 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,613 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:38,623 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:38,927 - INFO - integration_test - Step 58: MPC solve successful
2025-12-01 10:36:38,935 - INFO - integration_test - Step 58: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 10:36:38,935 - DEBUG - integration_test - Step 58: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:38,935 - INFO - integration_test - === Applying control at step 58 ===
2025-12-01 10:36:38,935 - INFO - integration_test -   Control dict from planner: {'a': -1.9214092711628927e-06, 'w': 0.7999150843965273}
2025-12-01 10:36:38,935 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:38,935 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:38,936 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:38,936 - INFO - integration_test - Step 58 completed in 0.620s
2025-12-01 10:36:38,959 - INFO - integration_test - Step 59 (contouring until path end)
2025-12-01 10:36:38,959 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.3329746   3.75091511 -0.07403555  2.99999979 16.65649889]
2025-12-01 10:36:38,960 - INFO - integration_test - Step 59: Re-initialized spline from 16.6565 to 16.3565 (vehicle at (15.33, 3.75), closest path point at (15.10, 4.31), distance=0.600m)
2025-12-01 10:36:38,960 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 10:36:38,960 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:38,974 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.333, 3.751), path_start=(0.000, 0.000), dist=15.785m
2025-12-01 10:36:38,975 - WARNING - integration_test - Could not update reference path at step 59: x and y must have the same length
2025-12-01 10:36:38,975 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2025-12-01 10:36:38,977 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:38,978 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:38,978 - INFO - integration_test - Warmstart k=0: x0=15.332974598736797 , y0=3.7509151104325036 , psi0=-0.07403554788282107 , v0=2.999999791604849 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 10:36:38,978 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:38,979 - INFO - integration_test - Dyn residual k=0: pred=[15.632152764086175, 3.7287247324620445, -0.07403554788282107, 2.999999791604849, 16.656498891484766], ws=[15.632152764086175, 3.7287247324620445, -0.07403554788282118, 2.999999791604849, 20.306761692445914], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.6502628009611477], res_norm=3.650e+00
2025-12-01 10:36:38,980 - INFO - integration_test - Dyn residual k=1: pred=[15.931330929435553, 3.7065343544915854, -0.07403554788282118, 2.999999791604849, 20.6067616716064], ws=[15.931330929435553, 3.7065343544915854, -0.07403554788282118, 2.999999791604849, 24.469008624496595], res=[0.0, 0.0, 0.0, 0.0, -3.862246952890196], res_norm=3.862e+00
2025-12-01 10:36:38,980 - INFO - integration_test - Dyn residual k=2: pred=[16.23050909478493, 3.6843439765211263, -0.07403554788282118, 2.999999791604849, 24.76900860365708], ws=[16.23050909478493, 3.6843439765211263, -0.07403554788282118, 2.999999791604849, 28.47397346039498], res=[0.0, 0.0, 0.0, 0.0, -3.7049648567378988], res_norm=3.705e+00
2025-12-01 10:36:38,995 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,005 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,021 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,032 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,047 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,058 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,073 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,084 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,099 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,110 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,124 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,135 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,150 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,161 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,177 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,187 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,203 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,213 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,228 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,239 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,254 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,265 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,553 - INFO - integration_test - Step 59: MPC solve successful
2025-12-01 10:36:39,562 - INFO - integration_test - Step 59: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 10:36:39,562 - DEBUG - integration_test - Step 59: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:39,562 - INFO - integration_test - === Applying control at step 59 ===
2025-12-01 10:36:39,562 - INFO - integration_test -   Control dict from planner: {'a': 1.400600266290594e-06, 'w': -0.2605486618603878}
2025-12-01 10:36:39,562 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:39,562 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:39,563 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:39,564 - INFO - integration_test - Step 59 completed in 0.605s
2025-12-01 10:36:39,584 - INFO - integration_test - Step 60 (contouring until path end)
2025-12-01 10:36:39,585 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.63182986  3.72482994 -0.10009041  2.99999993 16.65649891]
2025-12-01 10:36:39,586 - INFO - integration_test - Step 60: Re-initialized spline from 16.6565 to 16.9623 (vehicle at (15.63, 3.72), closest path point at (15.75, 4.25), distance=0.538m)
2025-12-01 10:36:39,586 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 10:36:39,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:39,600 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.632, 3.725), path_start=(0.000, 0.000), dist=16.069m
2025-12-01 10:36:39,601 - WARNING - integration_test - Could not update reference path at step 60: x and y must have the same length
2025-12-01 10:36:39,601 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2025-12-01 10:36:39,603 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:39,604 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:39,605 - INFO - integration_test - Warmstart k=0: x0=15.631829855127705 , y0=3.7248299393633224 , psi0=-0.10009041406885985 , v0=2.9999999316648758 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 10:36:39,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:39,606 - INFO - integration_test - Dyn residual k=0: pred=[15.930328388788103, 3.69485292646202, -0.10009041406885985, 2.9999999316648758, 17.262295161502777], ws=[15.930328388788103, 3.69485292646202, -0.10009041406885988, 2.9999999316648758, 21.116561061144836], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, -3.8542658996420585], res_norm=3.854e+00
2025-12-01 10:36:39,606 - INFO - integration_test - Dyn residual k=1: pred=[16.2288269224485, 3.6648759135607176, -0.10009041406885988, 2.9999999316648758, 21.416561054311323], ws=[16.2288269224485, 3.6648759135607176, -0.10009041406885988, 2.9999999316648758, 25.469548756040457], res=[0.0, 0.0, 0.0, 0.0, -4.052987701729133], res_norm=4.053e+00
2025-12-01 10:36:39,607 - INFO - integration_test - Dyn residual k=2: pred=[16.527325456108898, 3.6348989006594152, -0.10009041406885988, 2.9999999316648758, 25.769548749206944], ws=[16.527325456108898, 3.6348989006594152, -0.10009041406885988, 2.9999999316648758, 29.61055861981054], res=[0.0, 0.0, 0.0, 0.0, -3.841009870603596], res_norm=3.841e+00
2025-12-01 10:36:39,621 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,632 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,648 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,658 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,674 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,685 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,700 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,711 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,726 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,737 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,752 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,763 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,778 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,789 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,804 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,815 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,830 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,840 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,867 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:39,882 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:39,893 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,209 - INFO - integration_test - Step 60: MPC solve successful
2025-12-01 10:36:40,218 - INFO - integration_test - Step 60: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 10:36:40,218 - DEBUG - integration_test - Step 60: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:40,218 - INFO - integration_test - === Applying control at step 60 ===
2025-12-01 10:36:40,218 - INFO - integration_test -   Control dict from planner: {'a': 3.030294686158975e-07, 'w': 0.7999922047243956}
2025-12-01 10:36:40,218 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:40,218 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:40,219 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:40,220 - INFO - integration_test - Step 60 completed in 0.635s
2025-12-01 10:36:40,243 - INFO - integration_test - Step 61 (contouring until path end)
2025-12-01 10:36:40,244 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.93120853  3.70681835 -0.02009119  2.99999996 17.26229516]
2025-12-01 10:36:40,244 - INFO - integration_test - Step 61: Re-initialized spline from 17.2623 to 16.9623 (vehicle at (15.93, 3.71), closest path point at (15.75, 4.25), distance=0.572m)
2025-12-01 10:36:40,244 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 10:36:40,245 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:40,261 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.931, 3.707), path_start=(0.000, 0.000), dist=16.357m
2025-12-01 10:36:40,261 - WARNING - integration_test - Could not update reference path at step 61: x and y must have the same length
2025-12-01 10:36:40,261 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2025-12-01 10:36:40,264 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:40,265 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:40,265 - INFO - integration_test - Warmstart k=0: x0=15.93120853367447 , y0=3.706818349340308 , psi0=-0.020091193596420295 , v0=2.9999999619678226 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 10:36:40,265 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:40,266 - INFO - integration_test - Dyn residual k=0: pred=[16.2311479834997, 3.7007913968262063, -0.020091193596420295, 2.9999999619678226, 17.26229516453307], ws=[16.2311479834997, 3.7007913968262063, -0.020091193596420087, 2.9999999619678226, 21.11656106417513], res=[0.0, 0.0, -2.0816681711721685e-16, 0.0, -3.8542658996420585], res_norm=3.854e+00
2025-12-01 10:36:40,267 - INFO - integration_test - Dyn residual k=1: pred=[16.53108743332493, 3.694764444312105, -0.020091193596420087, 2.9999999619678226, 21.41656106037191], ws=[16.53108743332493, 3.694764444312105, -0.020091193596420087, 2.9999999619678226, 25.467845256961155], res=[0.0, 0.0, 0.0, 0.0, -4.051284196589243], res_norm=4.051e+00
2025-12-01 10:36:40,267 - INFO - integration_test - Dyn residual k=2: pred=[16.831026883150162, 3.688737491798004, -0.020091193596420087, 2.9999999619678226, 25.767845253157937], ws=[16.831026883150162, 3.688737491798004, -0.020091193596420087, 2.9999999619678226, 29.603492152372606], res=[0.0, 0.0, 0.0, 0.0, -3.8356468992146695], res_norm=3.836e+00
2025-12-01 10:36:40,282 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,292 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,308 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,318 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,334 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,344 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,360 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,371 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,397 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,412 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,422 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,437 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,448 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,464 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,474 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,490 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,500 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,516 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,526 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,541 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,552 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,896 - INFO - integration_test - Step 61: MPC solve successful
2025-12-01 10:36:40,904 - INFO - integration_test - Step 61: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 10:36:40,905 - DEBUG - integration_test - Step 61: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:40,905 - INFO - integration_test - === Applying control at step 61 ===
2025-12-01 10:36:40,905 - INFO - integration_test -   Control dict from planner: {'a': 4.5353931008569073e-07, 'w': -0.010840644948790213}
2025-12-01 10:36:40,905 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:40,905 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:40,906 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:40,906 - INFO - integration_test - Step 61 completed in 0.663s
2025-12-01 10:36:40,929 - INFO - integration_test - Step 62 (contouring until path end)
2025-12-01 10:36:40,930 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.23114466  3.70062882 -0.02117526  3.00000001 17.26229517]
2025-12-01 10:36:40,931 - INFO - integration_test - Step 62: Re-initialized spline from 17.2623 to 17.5681 (vehicle at (16.23, 3.70), closest path point at (16.40, 4.22), distance=0.543m)
2025-12-01 10:36:40,931 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 10:36:40,931 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:40,945 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.231, 3.701), path_start=(0.000, 0.000), dist=16.648m
2025-12-01 10:36:40,945 - WARNING - integration_test - Could not update reference path at step 62: x and y must have the same length
2025-12-01 10:36:40,945 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2025-12-01 10:36:40,947 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:40,948 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:40,949 - INFO - integration_test - Warmstart k=0: x0=16.231144660216682 , y0=3.700628821121322 , psi0=-0.021175258091299318 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 10:36:40,949 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:40,949 - INFO - integration_test - Dyn residual k=0: pred=[16.531077403996548, 3.6942767184236343, -0.021175258091299318, 3.0, 17.8680914243483], ws=[16.531077403996548, 3.6942767184236343, -0.021175258091299387, 3.0, 21.934423884055498], res=[0.0, 0.0, 6.938893903907228e-17, 0.0, -4.066332459707198], res_norm=4.066e+00
2025-12-01 10:36:40,950 - INFO - integration_test - Dyn residual k=1: pred=[16.831010147776414, 3.6879246157259464, -0.021175258091299387, 3.0, 22.2344238840555], ws=[16.831010147776414, 3.6879246157259464, -0.021175258091299387, 3.0, 26.378067424406115], res=[0.0, 0.0, 0.0, 0.0, -4.143643540350617], res_norm=4.144e+00
2025-12-01 10:36:40,951 - INFO - integration_test - Dyn residual k=2: pred=[17.13094289155628, 3.6815725130282586, -0.021175258091299387, 3.0, 26.678067424406116], ws=[17.13094289155628, 3.6815725130282586, -0.021175258091299387, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.005949120182393], res_norm=3.006e+00
2025-12-01 10:36:40,966 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:40,977 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:40,993 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,004 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,019 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,030 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,045 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,056 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,071 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,082 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,097 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,108 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,123 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,134 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,149 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,160 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,175 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,186 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,201 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,212 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,227 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,237 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,522 - INFO - integration_test - Step 62: MPC solve successful
2025-12-01 10:36:41,530 - INFO - integration_test - Step 62: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 10:36:41,530 - DEBUG - integration_test - Step 62: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:41,530 - INFO - integration_test - === Applying control at step 62 ===
2025-12-01 10:36:41,530 - INFO - integration_test -   Control dict from planner: {'a': 1.477383046506437e-07, 'w': 0.7999999268718689}
2025-12-01 10:36:41,530 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:41,530 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:41,531 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:41,532 - INFO - integration_test - Step 62 completed in 0.602s
2025-12-01 10:36:41,552 - INFO - integration_test - Step 63 (contouring until path end)
2025-12-01 10:36:41,553 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.53101153  3.7062744   0.05882473  3.00000002 17.86809143]
2025-12-01 10:36:41,553 - INFO - integration_test - Step 63: Re-initialized spline from 17.8681 to 17.5681 (vehicle at (16.53, 3.71), closest path point at (16.40, 4.22), distance=0.527m)
2025-12-01 10:36:41,553 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 10:36:41,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:41,568 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.531, 3.706), path_start=(0.000, 0.000), dist=16.941m
2025-12-01 10:36:41,569 - WARNING - integration_test - Could not update reference path at step 63: x and y must have the same length
2025-12-01 10:36:41,569 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2025-12-01 10:36:41,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:41,572 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:41,572 - INFO - integration_test - Warmstart k=0: x0=16.531011532494123 , y0=3.706274403404529 , psi0=0.05882473459588758 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 10:36:41,572 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:41,573 - INFO - integration_test - Dyn residual k=0: pred=[16.830492629742043, 3.7239116478373173, 0.05882473459588758, 3.0, 17.8680914243483], ws=[16.830492629742043, 3.7239116478373173, 0.05882473459588766, 3.0, 21.9344238840555], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, -4.066332459707201], res_norm=4.066e+00
2025-12-01 10:36:41,574 - INFO - integration_test - Dyn residual k=1: pred=[17.129973726989963, 3.7415488922701057, 0.05882473459588766, 3.0, 22.234423884055502], ws=[17.129973726989963, 3.7415488922701057, 0.05882473459588766, 3.0, 26.376488171471347], res=[0.0, 0.0, 0.0, 0.0, -4.142064287415845], res_norm=4.142e+00
2025-12-01 10:36:41,575 - INFO - integration_test - Dyn residual k=2: pred=[17.429454824237883, 3.759186136702894, 0.05882473459588766, 3.0, 26.676488171471348], ws=[17.429454824237883, 3.759186136702894, 0.05882473459588766, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.007528373117161], res_norm=3.008e+00
2025-12-01 10:36:41,589 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,600 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,616 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,627 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,642 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,653 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,671 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,682 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,697 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,708 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,723 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,733 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,748 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,759 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,775 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,786 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,801 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,812 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,827 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,838 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:41,854 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:41,865 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,214 - INFO - integration_test - Step 63: MPC solve successful
2025-12-01 10:36:42,221 - INFO - integration_test - Step 63: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 10:36:42,222 - DEBUG - integration_test - Step 63: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:42,222 - INFO - integration_test - === Applying control at step 63 ===
2025-12-01 10:36:42,222 - INFO - integration_test -   Control dict from planner: {'a': 5.255549138971158e-08, 'w': 0.800000000265143}
2025-12-01 10:36:42,222 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:42,222 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:42,223 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:42,224 - INFO - integration_test - Step 63 completed in 0.671s
2025-12-01 10:36:42,244 - INFO - integration_test - Step 64 (contouring until path end)
2025-12-01 10:36:42,245 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.82946818  3.7358657   0.13882473  3.00000003 17.86809143]
2025-12-01 10:36:42,246 - INFO - integration_test - Step 64: Re-initialized spline from 17.8681 to 18.1739 (vehicle at (16.83, 3.74), closest path point at (17.05, 4.21), distance=0.525m)
2025-12-01 10:36:42,246 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 10:36:42,246 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:42,260 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.829, 3.736), path_start=(0.000, 0.000), dist=17.239m
2025-12-01 10:36:42,260 - WARNING - integration_test - Could not update reference path at step 64: x and y must have the same length
2025-12-01 10:36:42,260 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2025-12-01 10:36:42,263 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:42,264 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:42,264 - INFO - integration_test - Warmstart k=0: x0=16.82946817855361 , y0=3.735865697790746 , psi0=0.13882473462240186 , v0=3.0 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 10:36:42,264 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:42,265 - INFO - integration_test - Dyn residual k=0: pred=[17.126581972303313, 3.777379473379823, 0.13882473462240186, 3.0, 18.473887680360313], ws=[17.126581972303313, 3.777379473379823, 0.13882473462240164, 3.0, 22.754549500591665], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -4.2806618202313516], res_norm=4.281e+00
2025-12-01 10:36:42,266 - INFO - integration_test - Dyn residual k=1: pred=[17.423695766053015, 3.8188932489689003, 0.13882473462240164, 3.0, 23.054549500591666], ws=[17.423695766053015, 3.8188932489689003, 0.13882473462240164, 3.0, 27.334898405713112], res=[0.0, 0.0, 0.0, 0.0, -4.280348905121446], res_norm=4.280e+00
2025-12-01 10:36:42,266 - INFO - integration_test - Dyn residual k=2: pred=[17.720809559802717, 3.8604070245579774, 0.13882473462240164, 3.0, 27.634898405713113], ws=[17.720809559802717, 3.8604070245579774, 0.13882473462240164, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.0491181388753965], res_norm=2.049e+00
2025-12-01 10:36:42,281 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,292 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,307 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,318 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,333 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,344 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,359 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,370 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,396 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,412 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,422 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,437 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,448 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,463 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,474 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,500 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,526 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,541 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:42,552 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:42,940 - INFO - integration_test - Step 64: MPC solve successful
2025-12-01 10:36:42,948 - INFO - integration_test - Step 64: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 10:36:42,948 - DEBUG - integration_test - Step 64: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:42,948 - INFO - integration_test - === Applying control at step 64 ===
2025-12-01 10:36:42,948 - INFO - integration_test -   Control dict from planner: {'a': -1.140928232524046e-06, 'w': 0.7999498868174408}
2025-12-01 10:36:42,948 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:42,948 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:42,949 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:42,949 - INFO - integration_test - Step 64 completed in 0.704s
2025-12-01 10:36:42,973 - INFO - integration_test - Step 65 (contouring until path end)
2025-12-01 10:36:42,974 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.12460563  3.78921268  0.21881972  2.99999991 18.47388767]
2025-12-01 10:36:42,975 - DEBUG - integration_test - Step 65: Using propagated spline 18.4739 (close to path, dist=0.430m)
2025-12-01 10:36:42,975 - DEBUG - integration_test -   Set spline state to 18.4739
2025-12-01 10:36:42,975 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:42,989 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.125, 3.789), path_start=(0.000, 0.000), dist=17.539m
2025-12-01 10:36:42,989 - WARNING - integration_test - Could not update reference path at step 65: x and y must have the same length
2025-12-01 10:36:42,989 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2025-12-01 10:36:42,992 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:42,993 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:42,993 - INFO - integration_test - Warmstart k=0: x0=17.124605631558037 , y0=3.7892126832860287 , psi0=0.21881972330414595 , v0=2.99999991325831 , spline0=18.473887671686143 , a0=0.0 , w0=0.0
2025-12-01 10:36:42,993 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:42,994 - INFO - integration_test - Dyn residual k=0: pred=[17.417451925351973, 3.854335974101641, 0.21881972330414595, 2.99999991325831, 18.773887663011973], ws=[17.417451925351973, 3.854335974101641, 0.21881972330414579, 2.99999991325831, 23.085779234014808], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.311891571002835], res_norm=4.312e+00
2025-12-01 10:36:42,995 - INFO - integration_test - Dyn residual k=1: pred=[17.71029821914591, 3.9194592649172533, 0.21881972330414579, 2.99999991325831, 23.385779225340638], ws=[17.71029821914591, 3.9194592649172533, 0.21881972330414579, 2.99999991325831, 27.684785277387235], res=[0.0, 0.0, 0.0, 0.0, -4.299006052046597], res_norm=4.299e+00
2025-12-01 10:36:42,995 - INFO - integration_test - Dyn residual k=2: pred=[18.003144512939844, 3.9845825557328656, 0.21881972330414579, 2.99999991325831, 27.984785268713065], ws=[18.003144512939844, 3.9845825557328656, 0.21881972330414579, 2.99999991325831, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.6992312758754444], res_norm=1.699e+00
2025-12-01 10:36:43,010 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,020 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,036 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,047 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,075 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,091 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,102 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,117 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,127 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,142 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,153 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,169 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,180 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,195 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,206 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,221 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,231 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,246 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,257 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,273 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,283 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,542 - INFO - integration_test - Step 65: MPC solve successful
2025-12-01 10:36:43,551 - INFO - integration_test - Step 65: Computed 10 numeric contouring constraints for visualization (s=18.474)
2025-12-01 10:36:43,552 - DEBUG - integration_test - Step 65: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:43,552 - INFO - integration_test - === Applying control at step 65 ===
2025-12-01 10:36:43,552 - INFO - integration_test -   Control dict from planner: {'a': 7.651773556205488e-07, 'w': 0.7999983733045469}
2025-12-01 10:36:43,552 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:43,552 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:43,553 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:43,554 - INFO - integration_test - Step 65 completed in 0.579s
2025-12-01 10:36:43,579 - INFO - integration_test - Step 66 (contouring until path end)
2025-12-01 10:36:43,580 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.41453613  3.86597412  0.29881956  2.99999999 18.77388767]
2025-12-01 10:36:43,581 - DEBUG - integration_test - Step 66: Using propagated spline 18.7739 (close to path, dist=0.471m)
2025-12-01 10:36:43,581 - DEBUG - integration_test -   Set spline state to 18.7739
2025-12-01 10:36:43,582 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:43,597 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.415, 3.866), path_start=(0.000, 0.000), dist=17.838m
2025-12-01 10:36:43,597 - WARNING - integration_test - Could not update reference path at step 66: x and y must have the same length
2025-12-01 10:36:43,597 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2025-12-01 10:36:43,599 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:43,600 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:43,600 - INFO - integration_test - Warmstart k=0: x0=17.414536127649246 , y0=3.865974115802223 , psi0=0.29881956063460063 , v0=2.999999989776046 , spline0=18.773887670663747 , a0=0.0 , w0=0.0
2025-12-01 10:36:43,601 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:43,601 - INFO - integration_test - Dyn residual k=0: pred=[17.70124152681093, 3.954291800770204, 0.29881956063460063, 2.999999989776046, 19.07388766964135], ws=[17.70124152681093, 3.9542918007702044, 0.29881956063460047, 2.999999989776046, 23.56083616360261], res=[0.0, -4.440892098500626e-16, 1.6653345369377348e-16, 0.0, -4.486948493961258], res_norm=4.487e+00
2025-12-01 10:36:43,602 - INFO - integration_test - Dyn residual k=1: pred=[17.98794692597261, 4.042609485738185, 0.29881956063460047, 2.999999989776046, 23.860836162580213], ws=[17.98794692597261, 4.042609485738185, 0.29881956063460047, 2.999999989776046, 28.258237538969254], res=[0.0, 0.0, 0.0, 0.0, -4.397401376389041], res_norm=4.397e+00
2025-12-01 10:36:43,603 - INFO - integration_test - Dyn residual k=2: pred=[18.274652325134294, 4.130927170706166, 0.29881956063460047, 2.999999989776046, 28.55823753794686], ws=[18.274652325134294, 4.130927170706166, 0.29881956063460047, 2.999999989776046, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1257790066416504], res_norm=1.126e+00
2025-12-01 10:36:43,617 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,628 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,643 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,654 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,669 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,680 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,695 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,705 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,720 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,731 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,746 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,757 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,774 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,786 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,804 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,816 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,834 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,846 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,864 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,877 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:43,894 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:43,905 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,202 - INFO - integration_test - Step 66: MPC solve successful
2025-12-01 10:36:44,210 - INFO - integration_test - Step 66: Computed 10 numeric contouring constraints for visualization (s=18.774)
2025-12-01 10:36:44,210 - DEBUG - integration_test - Step 66: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:44,210 - INFO - integration_test - === Applying control at step 66 ===
2025-12-01 10:36:44,210 - INFO - integration_test -   Control dict from planner: {'a': 2.610483697091519e-07, 'w': 0.799998597386602}
2025-12-01 10:36:44,210 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:44,210 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:44,211 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:44,212 - INFO - integration_test - Step 66 completed in 0.632s
2025-12-01 10:36:44,232 - INFO - integration_test - Step 67 (contouring until path end)
2025-12-01 10:36:44,233 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.69740499  3.96565971  0.37881942  3.00000002 19.07388767]
2025-12-01 10:36:44,234 - DEBUG - integration_test - Step 67: Using propagated spline 19.0739 (close to path, dist=0.276m)
2025-12-01 10:36:44,234 - DEBUG - integration_test -   Set spline state to 19.0739
2025-12-01 10:36:44,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:44,248 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.697, 3.966), path_start=(0.000, 0.000), dist=18.136m
2025-12-01 10:36:44,248 - WARNING - integration_test - Could not update reference path at step 67: x and y must have the same length
2025-12-01 10:36:44,248 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2025-12-01 10:36:44,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:44,252 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:44,252 - INFO - integration_test - Warmstart k=0: x0=17.69740499437992 , y0=3.9656597083936194 , psi0=0.37881942037326083 , v0=3.0 , spline0=19.073887672251836 , a0=0.0 , w0=0.0
2025-12-01 10:36:44,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:44,253 - INFO - integration_test - Dyn residual k=0: pred=[17.976135561215685, 4.0766068629827, 0.37881942037326083, 3.0, 19.373887672251836], ws=[17.976135561215685, 4.0766068629827, 0.37881942037326066, 3.0, 23.890703399895937], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.516815727644101], res_norm=4.517e+00
2025-12-01 10:36:44,253 - INFO - integration_test - Dyn residual k=1: pred=[18.25486612805145, 4.187554017571781, 0.37881942037326066, 3.0, 24.190703399895938], ws=[18.25486612805145, 4.187554017571781, 0.37881942037326066, 3.0, 28.605133836996107], res=[0.0, 0.0, 0.0, 0.0, -4.414430437100169], res_norm=4.414e+00
2025-12-01 10:36:44,254 - INFO - integration_test - Dyn residual k=2: pred=[18.533596694887216, 4.2985011721608615, 0.37881942037326066, 3.0, 28.905133836996107], ws=[18.533596694887216, 4.2985011721608615, 0.37881942037326066, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7788827075924019], res_norm=7.789e-01
2025-12-01 10:36:44,269 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,280 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,295 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,306 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,321 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,332 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,347 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,358 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,373 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,384 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,399 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,410 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,425 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,435 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,450 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,461 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,477 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,487 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,503 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,513 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,528 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,539 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,814 - INFO - integration_test - Step 67: MPC solve successful
2025-12-01 10:36:44,822 - INFO - integration_test - Step 67: Computed 10 numeric contouring constraints for visualization (s=19.074)
2025-12-01 10:36:44,822 - DEBUG - integration_test - Step 67: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:44,822 - INFO - integration_test - === Applying control at step 67 ===
2025-12-01 10:36:44,822 - INFO - integration_test -   Control dict from planner: {'a': 9.26091666311404e-08, 'w': 0.7999966074563541}
2025-12-01 10:36:44,822 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:44,822 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:44,823 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:44,824 - INFO - integration_test - Step 67 completed in 0.591s
2025-12-01 10:36:44,846 - INFO - integration_test - Step 68 (contouring until path end)
2025-12-01 10:36:44,846 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.97140285  4.08763179  0.45881908  3.00000003 19.37388767]
2025-12-01 10:36:44,847 - DEBUG - integration_test - Step 68: Using propagated spline 19.3739 (close to path, dist=0.313m)
2025-12-01 10:36:44,847 - DEBUG - integration_test -   Set spline state to 19.3739
2025-12-01 10:36:44,847 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:44,861 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.971, 4.088), path_start=(0.000, 0.000), dist=18.430m
2025-12-01 10:36:44,862 - WARNING - integration_test - Could not update reference path at step 68: x and y must have the same length
2025-12-01 10:36:44,862 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2025-12-01 10:36:44,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:44,866 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:44,866 - INFO - integration_test - Warmstart k=0: x0=17.971402850998718 , y0=4.087631791278059 , psi0=0.45881908111889624 , v0=3.0 , spline0=19.373887674766017 , a0=0.0 , w0=0.0
2025-12-01 10:36:44,866 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:44,866 - INFO - integration_test - Dyn residual k=0: pred=[18.240375692789254, 4.2204986809802065, 0.45881908111889624, 3.0, 19.673887674766018], ws=[18.240375692789254, 4.2204986809802065, 0.45881908111889613, 3.0, 24.355780888545016], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.681893213778999], res_norm=4.682e+00
2025-12-01 10:36:44,867 - INFO - integration_test - Dyn residual k=1: pred=[18.50934853457979, 4.353365570682354, 0.45881908111889613, 3.0, 24.655780888545017], ws=[18.50934853457979, 4.353365570682354, 0.45881908111889613, 3.0, 29.115465816332083], res=[0.0, 0.0, 0.0, 0.0, -4.459684927787066], res_norm=4.460e+00
2025-12-01 10:36:44,868 - INFO - integration_test - Dyn residual k=2: pred=[18.778321376370325, 4.486232460384501, 0.45881908111889613, 3.0, 29.415465816332084], ws=[18.778321376370325, 4.486232460384501, 0.45881908111889613, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.26855072825642523], res_norm=2.686e-01
2025-12-01 10:36:44,882 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,893 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,909 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,921 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,937 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,949 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,966 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:44,977 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:44,993 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,004 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,019 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,030 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,045 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,056 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,071 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,082 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,097 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,108 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,123 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,133 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,148 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,159 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,414 - INFO - integration_test - Step 68: MPC solve successful
2025-12-01 10:36:45,422 - INFO - integration_test - Step 68: Computed 10 numeric contouring constraints for visualization (s=19.374)
2025-12-01 10:36:45,422 - DEBUG - integration_test - Step 68: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:45,422 - INFO - integration_test - === Applying control at step 68 ===
2025-12-01 10:36:45,422 - INFO - integration_test -   Control dict from planner: {'a': 3.137407792102119e-08, 'w': -0.7311949180350001}
2025-12-01 10:36:45,422 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:45,422 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:45,423 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:45,424 - INFO - integration_test - Step 68 completed in 0.577s
2025-12-01 10:36:45,445 - INFO - integration_test - Step 69 (contouring until path end)
2025-12-01 10:36:45,446 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[18.2449915   4.21055112  0.38569959  3.00000003 19.67388768]
2025-12-01 10:36:45,447 - DEBUG - integration_test - Step 69: Using propagated spline 19.6739 (close to path, dist=0.138m)
2025-12-01 10:36:45,447 - DEBUG - integration_test -   Set spline state to 19.6739
2025-12-01 10:36:45,447 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:45,461 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(18.245, 4.211), path_start=(0.000, 0.000), dist=18.725m
2025-12-01 10:36:45,462 - WARNING - integration_test - Could not update reference path at step 69: x and y must have the same length
2025-12-01 10:36:45,462 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2025-12-01 10:36:45,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:45,466 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:45,466 - INFO - integration_test - Warmstart k=0: x0=18.244991502451374 , y0=4.210551122056938 , psi0=0.3856995893153962 , v0=3.0 , spline0=19.67388767759394 , a0=0.0 , w0=0.0
2025-12-01 10:36:45,466 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:45,467 - INFO - integration_test - Dyn residual k=0: pred=[18.522952143072175, 4.323413348978414, 0.3856995893153962, 3.0, 19.97388767759394], ws=[18.522952143072175, 4.323413348978414, 0.3856995893153963, 3.0, 24.68329817716784], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -4.709410499573899], res_norm=4.709e+00
2025-12-01 10:36:45,467 - INFO - integration_test - Dyn residual k=1: pred=[18.800912783692976, 4.43627557589989, 0.3856995893153963, 3.0, 24.98329817716784], ws=[18.800912783692976, 4.43627557589989, 0.3856995893153963, 3.0, 29.508094287703198], res=[0.0, 0.0, 0.0, 0.0, -4.524796110535359], res_norm=4.525e+00
2025-12-01 10:36:45,468 - INFO - integration_test - Dyn residual k=2: pred=[19.078873424313777, 4.549137802821366, 0.3856995893153963, 3.0, 29.8080942877032], ws=[19.078873424313777, 4.549137802821366, 0.3856995893153963, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.12407774311468955], res_norm=1.241e-01
2025-12-01 10:36:45,483 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,494 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,509 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,520 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,535 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,546 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,561 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,572 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,598 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,613 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,624 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,638 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,649 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,664 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,675 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,690 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,701 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,716 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,726 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:45,742 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:45,753 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,026 - INFO - integration_test - Step 69: MPC solve successful
2025-12-01 10:36:46,033 - INFO - integration_test - Step 69: Computed 10 numeric contouring constraints for visualization (s=19.674)
2025-12-01 10:36:46,034 - DEBUG - integration_test - Step 69: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:46,034 - INFO - integration_test - === Applying control at step 69 ===
2025-12-01 10:36:46,034 - INFO - integration_test -   Control dict from planner: {'a': 1.1155159041163016e-08, 'w': -0.15485913113928446}
2025-12-01 10:36:46,034 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:46,034 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:46,035 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:46,035 - INFO - integration_test - Step 69 completed in 0.589s
2025-12-01 10:36:46,059 - INFO - integration_test - Step 70 (contouring until path end)
2025-12-01 10:36:46,062 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.52381491  4.32125664  0.37021368  3.00000003 19.97388768]
2025-12-01 10:36:46,063 - DEBUG - integration_test - Step 70: Using propagated spline 19.9739 (close to path, dist=0.181m)
2025-12-01 10:36:46,063 - DEBUG - integration_test -   Set spline state to 19.9739
2025-12-01 10:36:46,063 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:46,077 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.524, 4.321), path_start=(0.000, 0.000), dist=19.021m
2025-12-01 10:36:46,078 - WARNING - integration_test - Could not update reference path at step 70: x and y must have the same length
2025-12-01 10:36:46,078 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2025-12-01 10:36:46,080 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:46,081 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:46,081 - INFO - integration_test - Warmstart k=0: x0=18.523814905961185 , y0=4.321256644963759 , psi0=0.3702136762014678 , v0=3.0 , spline0=19.973887680533412 , a0=0.0 , w0=0.0
2025-12-01 10:36:46,081 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:46,082 - INFO - integration_test - Dyn residual k=0: pred=[18.80348992267444, 4.4298010369259435, 0.3702136762014678, 3.0, 20.273887680533413], ws=[18.80348992267444, 4.4298010369259435, 0.37021367620146783, 3.0, 25.1338910965379], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -4.8600034160044885], res_norm=4.860e+00
2025-12-01 10:36:46,083 - INFO - integration_test - Dyn residual k=1: pred=[19.083164939387697, 4.538345428888128, 0.37021367620146783, 3.0, 25.433891096537902], ws=[19.083164939387697, 4.538345428888128, 0.37021367620146783, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.250125448050607], res_norm=4.250e+00
2025-12-01 10:36:46,083 - INFO - integration_test - Dyn residual k=2: pred=[19.362839956100952, 4.646889820850313, 0.37021367620146783, 3.0, 29.98401654458851], ws=[19.362839956100952, 4.646889820850313, 0.37021367620146783, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:36:46,098 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,108 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,124 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,135 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,150 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,161 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,176 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,187 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,202 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,213 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,228 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,239 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,254 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,265 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,280 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,291 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,306 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,316 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,342 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,357 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,368 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,627 - INFO - integration_test - Step 70: MPC solve successful
2025-12-01 10:36:46,635 - INFO - integration_test - Step 70: Computed 10 numeric contouring constraints for visualization (s=19.974)
2025-12-01 10:36:46,635 - DEBUG - integration_test - Step 70: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:46,635 - INFO - integration_test - === Applying control at step 70 ===
2025-12-01 10:36:46,635 - INFO - integration_test -   Control dict from planner: {'a': 2.7738268261718125e-09, 'w': 0.012181717500228532}
2025-12-01 10:36:46,635 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:46,635 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:46,636 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:46,637 - INFO - integration_test - Step 70 completed in 0.575s
2025-12-01 10:36:46,660 - INFO - integration_test - Step 71 (contouring until path end)
2025-12-01 10:36:46,661 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.80342374  4.42997136  0.37143185  3.00000003 20.27388768]
2025-12-01 10:36:46,661 - DEBUG - integration_test - Step 71: Using propagated spline 20.2739 (close to path, dist=0.175m)
2025-12-01 10:36:46,661 - DEBUG - integration_test -   Set spline state to 20.2739
2025-12-01 10:36:46,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:46,676 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.803, 4.430), path_start=(0.000, 0.000), dist=19.318m
2025-12-01 10:36:46,677 - WARNING - integration_test - Could not update reference path at step 71: x and y must have the same length
2025-12-01 10:36:46,677 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2025-12-01 10:36:46,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:46,680 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:46,680 - INFO - integration_test - Warmstart k=0: x0=18.803423743408995 , y0=4.429971357231791 , psi0=0.37143184795149065 , v0=3.0 , spline0=20.27388768350062 , a0=0.0 , w0=0.0
2025-12-01 10:36:46,680 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:46,681 - INFO - integration_test - Dyn residual k=0: pred=[19.082966326932258, 4.538856360777458, 0.37143184795149065, 3.0, 20.573887683500622], ws=[19.082966326932258, 4.538856360777458, 0.37143184795149065, 3.0, 25.458450716331637], res=[0.0, 0.0, 0.0, 0.0, -4.884563032831014], res_norm=4.885e+00
2025-12-01 10:36:46,682 - INFO - integration_test - Dyn residual k=1: pred=[19.36250891045552, 4.6477413643231245, 0.37143184795149065, 3.0, 25.758450716331637], ws=[19.36250891045552, 4.6477413643231245, 0.37143184795149065, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.9255658282568717], res_norm=3.926e+00
2025-12-01 10:36:46,683 - INFO - integration_test - Dyn residual k=2: pred=[19.642051493978784, 4.756626367868791, 0.37143184795149065, 3.0, 29.98401654458851], ws=[19.642051493978784, 4.756626367868791, 0.37143184795149065, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:36:46,697 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,708 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,724 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,735 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,750 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,761 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,777 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,788 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,803 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,813 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,828 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,839 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,854 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,865 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,880 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,891 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,917 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,932 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,943 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:46,959 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:46,970 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,238 - INFO - integration_test - Step 71: MPC solve successful
2025-12-01 10:36:47,247 - INFO - integration_test - Step 71: Computed 10 numeric contouring constraints for visualization (s=20.274)
2025-12-01 10:36:47,248 - DEBUG - integration_test - Step 71: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:47,248 - INFO - integration_test - === Applying control at step 71 ===
2025-12-01 10:36:47,248 - INFO - integration_test -   Control dict from planner: {'a': 1.809548576532624e-09, 'w': 0.11301815324086455}
2025-12-01 10:36:47,248 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:47,248 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:47,249 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:47,250 - INFO - integration_test - Step 71 completed in 0.589s
2025-12-01 10:36:47,273 - INFO - integration_test - Step 72 (contouring until path end)
2025-12-01 10:36:47,275 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[19.08234509  4.5404337   0.38273366  3.00000003 20.57388769]
2025-12-01 10:36:47,276 - DEBUG - integration_test - Step 72: Using propagated spline 20.5739 (close to path, dist=0.165m)
2025-12-01 10:36:47,276 - DEBUG - integration_test -   Set spline state to 20.5739
2025-12-01 10:36:47,276 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:47,290 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(19.082, 4.540), path_start=(0.000, 0.000), dist=19.615m
2025-12-01 10:36:47,291 - WARNING - integration_test - Could not update reference path at step 72: x and y must have the same length
2025-12-01 10:36:47,291 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2025-12-01 10:36:47,293 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:47,294 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:47,294 - INFO - integration_test - Warmstart k=0: x0=19.08234508614386 , y0=4.540433696402621 , psi0=0.3827336632755771 , v0=3.0 , spline0=20.57388768648593 , a0=0.0 , w0=0.0
2025-12-01 10:36:47,294 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:47,295 - INFO - integration_test - Dyn residual k=0: pred=[19.36063924472194, 4.652471017422532, 0.3827336632755771, 3.0, 20.87388768648593], ws=[19.36063924472194, 4.652471017422532, 0.3827336632755771, 3.0, 25.892146776984173], res=[0.0, 0.0, 0.0, 0.0, -5.018259090498244], res_norm=5.018e+00
2025-12-01 10:36:47,296 - INFO - integration_test - Dyn residual k=1: pred=[19.638933403300022, 4.764508338442443, 0.3827336632755771, 3.0, 26.192146776984174], ws=[19.638933403300022, 4.764508338442443, 0.3827336632755771, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.491869767604335], res_norm=3.492e+00
2025-12-01 10:36:47,297 - INFO - integration_test - Dyn residual k=2: pred=[19.917227561878104, 4.876545659462354, 0.3827336632755771, 3.0, 29.98401654458851], ws=[19.917227561878104, 4.876545659462354, 0.3827336632755771, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:36:47,311 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,322 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,338 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,348 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,364 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,375 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,391 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,401 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,416 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,427 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,442 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,452 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,468 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,479 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,494 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,504 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,530 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,545 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,555 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,571 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,582 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,831 - INFO - integration_test - Step 72: MPC solve successful
2025-12-01 10:36:47,839 - INFO - integration_test - Step 72: Computed 10 numeric contouring constraints for visualization (s=20.574)
2025-12-01 10:36:47,839 - DEBUG - integration_test - Step 72: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:47,839 - INFO - integration_test - === Applying control at step 72 ===
2025-12-01 10:36:47,839 - INFO - integration_test -   Control dict from planner: {'a': -8.142668528074723e-07, 'w': 0.15985721660259522}
2025-12-01 10:36:47,839 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:47,839 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:47,840 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:47,841 - INFO - integration_test - Step 72 completed in 0.566s
2025-12-01 10:36:47,866 - INFO - integration_test - Step 73 (contouring until path end)
2025-12-01 10:36:47,867 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.35973191  4.65469056  0.39871938  2.99999995 20.87388768]
2025-12-01 10:36:47,868 - DEBUG - integration_test - Step 73: Using propagated spline 20.8739 (close to path, dist=0.258m)
2025-12-01 10:36:47,868 - DEBUG - integration_test -   Set spline state to 20.8739
2025-12-01 10:36:47,868 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:47,882 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.360, 4.655), path_start=(0.000, 0.000), dist=19.911m
2025-12-01 10:36:47,883 - WARNING - integration_test - Could not update reference path at step 73: x and y must have the same length
2025-12-01 10:36:47,883 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2025-12-01 10:36:47,885 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:47,886 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:47,886 - INFO - integration_test - Warmstart k=0: x0=19.359731911533537 , y0=4.654690564442635 , psi0=0.39871938493583664 , v0=2.999999948426375 , spline0=20.873887681328565 , a0=0.0 , w0=0.0
2025-12-01 10:36:47,886 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:47,887 - INFO - integration_test - Dyn residual k=0: pred=[19.63619958686181, 4.771162112059048, 0.39871938493583664, 2.999999948426375, 21.1738876761712], ws=[19.63619958686181, 4.771162112059048, 0.3987193849358368, 2.999999948426375, 26.213649564676945], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -5.039761888505744], res_norm=5.040e+00
2025-12-01 10:36:47,888 - INFO - integration_test - Dyn residual k=1: pred=[19.912667262190084, 4.88763365967546, 0.3987193849358368, 2.999999948426375, 26.513649559519582], ws=[19.912667262190084, 4.88763365967546, 0.3987193849358368, 2.999999948426375, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.1703669850689273], res_norm=3.170e+00
2025-12-01 10:36:47,889 - INFO - integration_test - Dyn residual k=2: pred=[20.189134937518357, 5.004105207291873, 0.3987193849358368, 2.999999948426375, 29.984016539431146], ws=[20.189134937518357, 5.004105207291873, 0.3987193849358368, 2.999999948426375, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999999948426364], res_norm=3.000e-01
2025-12-01 10:36:47,904 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,914 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,940 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,956 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,967 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:47,982 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:47,993 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,008 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,019 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,035 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,046 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,062 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,072 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,087 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,098 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,113 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,124 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,139 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,150 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,166 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,177 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,903 - INFO - integration_test - Step 73: MPC solve successful
2025-12-01 10:36:48,911 - INFO - integration_test - Step 73: Computed 10 numeric contouring constraints for visualization (s=20.874)
2025-12-01 10:36:48,911 - DEBUG - integration_test - Step 73: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:48,911 - INFO - integration_test - === Applying control at step 73 ===
2025-12-01 10:36:48,911 - INFO - integration_test -   Control dict from planner: {'a': -1.8032721313881925e-05, 'w': 0.26968258668331063}
2025-12-01 10:36:48,911 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:48,911 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:48,912 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:48,913 - INFO - integration_test - Step 73 completed in 1.046s
2025-12-01 10:36:48,934 - INFO - integration_test - Step 74 (contouring until path end)
2025-12-01 10:36:48,935 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.63459557  4.77487566  0.42568764  2.99999815 21.1738875 ]
2025-12-01 10:36:48,935 - DEBUG - integration_test - Step 74: Using propagated spline 21.1739 (close to path, dist=0.222m)
2025-12-01 10:36:48,936 - DEBUG - integration_test -   Set spline state to 21.1739
2025-12-01 10:36:48,936 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:48,950 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.635, 4.775), path_start=(0.000, 0.000), dist=20.207m
2025-12-01 10:36:48,950 - WARNING - integration_test - Could not update reference path at step 74: x and y must have the same length
2025-12-01 10:36:48,950 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2025-12-01 10:36:48,952 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:48,954 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:48,954 - INFO - integration_test - Warmstart k=0: x0=19.634595571564958 , y0=4.774875658019176 , psi0=0.4256876436041677 , v0=2.999998145154244 , spline0=21.17388749584399 , a0=0.0 , w0=0.0
2025-12-01 10:36:48,954 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:48,955 - INFO - integration_test - Dyn residual k=0: pred=[19.907821898984132, 4.898759727674312, 0.4256876436041677, 2.999998145154244, 21.473887310359412], ws=[19.907821898984132, 4.898759727674312, 0.42568764360416766, 2.999998145154244, 26.630461490894756], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -5.156574180535344], res_norm=5.157e+00
2025-12-01 10:36:48,955 - INFO - integration_test - Dyn residual k=1: pred=[20.181048226403306, 5.022643797329448, 0.42568764360416766, 2.999998145154244, 26.93046130541018], ws=[20.181048226403306, 5.022643797329448, 0.42568764360416766, 2.999998145154244, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.753555239178329], res_norm=2.754e+00
2025-12-01 10:36:48,957 - INFO - integration_test - Dyn residual k=2: pred=[20.45427455382248, 5.146527866984584, 0.42568764360416766, 2.999998145154244, 29.984016359103933], ws=[20.45427455382248, 5.146527866984584, 0.42568764360416766, 2.999998145154244, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999998145154237], res_norm=3.000e-01
2025-12-01 10:36:48,972 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:48,983 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:48,999 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,010 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,025 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,036 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,062 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,079 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,091 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,108 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,119 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,148 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,164 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,176 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,192 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,203 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,219 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,229 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:49,244 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:49,255 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,065 - WARNING - integration_test - Step 74: MPC solve failed
2025-12-01 10:36:59,065 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 10:36:59,070 - INFO - integration_test - Step 74: Computed 10 numeric contouring constraints for visualization (s=21.174)
2025-12-01 10:36:59,070 - DEBUG - integration_test - Step 74: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:59,070 - INFO - integration_test - === Applying control at step 74 ===
2025-12-01 10:36:59,071 - INFO - integration_test -   Control dict from planner: {'a': -1.8032721313881925e-05, 'w': 0.26968258668331063}
2025-12-01 10:36:59,071 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:59,071 - INFO - integration_test -   Planner output success: False
2025-12-01 10:36:59,072 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:59,072 - INFO - integration_test - Step 74 completed in 10.138s
2025-12-01 10:36:59,096 - INFO - integration_test - Step 75 (contouring until path end)
2025-12-01 10:36:59,097 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.90611833  4.90242867  0.4526559   2.99999634 21.47388713]
2025-12-01 10:36:59,098 - DEBUG - integration_test - Step 75: Using propagated spline 21.4739 (close to path, dist=0.339m)
2025-12-01 10:36:59,098 - DEBUG - integration_test -   Set spline state to 21.4739
2025-12-01 10:36:59,098 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:59,112 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.906, 4.902), path_start=(0.000, 0.000), dist=20.501m
2025-12-01 10:36:59,112 - WARNING - integration_test - Could not update reference path at step 75: x and y must have the same length
2025-12-01 10:36:59,112 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2025-12-01 10:36:59,115 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:59,116 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:59,116 - INFO - integration_test - Warmstart k=0: x0=19.906118332236495 , y0=4.9024286688478975 , psi0=0.4526559022724988 , v0=2.9999963418821127 , spline0=21.4738871300322 , a0=0.0 , w0=0.0
2025-12-01 10:36:59,116 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:59,117 - INFO - integration_test - Dyn residual k=0: pred=[20.17590461385639, 5.0336351578748175, 0.4526559022724988, 2.9999963418821127, 21.77388676422041], ws=[20.17590461385639, 5.0336351578748175, 0.45265590227249897, 2.9999963418821127, 26.94925155676025], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -5.175364792539838], res_norm=5.175e+00
2025-12-01 10:36:59,117 - INFO - integration_test - Dyn residual k=1: pred=[20.445690895476282, 5.1648416469017375, 0.45265590227249897, 2.9999963418821127, 27.24925119094846], ws=[20.445690895476282, 5.1648416469017375, 0.45265590227249897, 2.9999963418821127, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.4347653536400493], res_norm=2.435e+00
2025-12-01 10:36:59,118 - INFO - integration_test - Dyn residual k=2: pred=[20.715477177096176, 5.2960481359286575, 0.45265590227249897, 2.9999963418821127, 29.98401617877672], ws=[20.715477177096176, 5.2960481359286575, 0.45265590227249897, 2.9999963418821127, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999963418821096], res_norm=3.000e-01
2025-12-01 10:36:59,132 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,143 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,160 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,171 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,187 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,197 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,212 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,223 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,238 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,248 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,264 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,274 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,289 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,300 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,315 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,325 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,340 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,351 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,367 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,378 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,394 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,405 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,698 - INFO - integration_test - Step 75: MPC solve successful
2025-12-01 10:36:59,706 - INFO - integration_test - Step 75: Computed 10 numeric contouring constraints for visualization (s=21.474)
2025-12-01 10:36:59,706 - DEBUG - integration_test - Step 75: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:36:59,706 - INFO - integration_test - === Applying control at step 75 ===
2025-12-01 10:36:59,706 - INFO - integration_test -   Control dict from planner: {'a': 3.6880645654071744e-05, 'w': -0.26613567424874607}
2025-12-01 10:36:59,706 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:36:59,706 - INFO - integration_test -   Planner output success: True
2025-12-01 10:36:59,708 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:36:59,708 - INFO - integration_test - Step 75 completed in 0.611s
2025-12-01 10:36:59,731 - INFO - integration_test - Step 76 (contouring until path end)
2025-12-01 10:36:59,731 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[20.17761877  5.03002997  0.42604233  3.00000003 21.77388713]
2025-12-01 10:36:59,732 - DEBUG - integration_test - Step 76: Using propagated spline 21.7739 (close to path, dist=0.297m)
2025-12-01 10:36:59,732 - DEBUG - integration_test -   Set spline state to 21.7739
2025-12-01 10:36:59,732 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:59,747 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(20.178, 5.030), path_start=(0.000, 0.000), dist=20.795m
2025-12-01 10:36:59,747 - WARNING - integration_test - Could not update reference path at step 76: x and y must have the same length
2025-12-01 10:36:59,748 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2025-12-01 10:36:59,750 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:36:59,751 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:36:59,751 - INFO - integration_test - Warmstart k=0: x0=20.17761876812713 , y0=5.030029971797752 , psi0=0.4260423348476242 , v0=3.0 , spline0=21.773887133026868 , a0=0.0 , w0=0.0
2025-12-01 10:36:59,751 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:36:59,752 - INFO - integration_test - Dyn residual k=0: pred=[20.4508013066696, 5.154011021299243, 0.4260423348476242, 3.0, 22.07388713302687], ws=[20.4508013066696, 5.154011021299243, 0.4260423348476241, 3.0, 27.351218939239526], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.277331806212658], res_norm=5.277e+00
2025-12-01 10:36:59,753 - INFO - integration_test - Dyn residual k=1: pred=[20.72398384521207, 5.2779920708007335, 0.4260423348476241, 3.0, 27.651218939239527], ws=[20.72398384521207, 5.2779920708007335, 0.4260423348476241, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.032797605348982], res_norm=2.033e+00
2025-12-01 10:36:59,753 - INFO - integration_test - Dyn residual k=2: pred=[20.997166383754543, 5.401973120302224, 0.4260423348476241, 3.0, 29.98401654458851], ws=[20.997166383754543, 5.401973120302224, 0.4260423348476241, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:36:59,768 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,779 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,794 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,805 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,820 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,831 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,846 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,857 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,872 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,883 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,898 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,909 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,926 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,936 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,952 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,963 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:36:59,978 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:36:59,989 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:00,005 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:00,015 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:00,030 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:00,041 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,664 - WARNING - integration_test - Step 76: MPC solve failed
2025-12-01 10:37:12,664 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 10:37:12,669 - INFO - integration_test - Step 76: Computed 10 numeric contouring constraints for visualization (s=21.774)
2025-12-01 10:37:12,669 - DEBUG - integration_test - Step 76: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:12,669 - INFO - integration_test - === Applying control at step 76 ===
2025-12-01 10:37:12,669 - INFO - integration_test -   Control dict from planner: {'a': 3.6880645654071744e-05, 'w': -0.26613567424874607}
2025-12-01 10:37:12,669 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:12,669 - INFO - integration_test -   Planner output success: False
2025-12-01 10:37:12,670 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:12,670 - INFO - integration_test - Step 76 completed in 12.939s
2025-12-01 10:37:12,691 - INFO - integration_test - Step 77 (contouring until path end)
2025-12-01 10:37:12,692 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.45241892  5.15036149  0.39942877  3.00000372 22.0738875 ]
2025-12-01 10:37:12,692 - DEBUG - integration_test - Step 77: Using propagated spline 22.0739 (close to path, dist=0.389m)
2025-12-01 10:37:12,692 - DEBUG - integration_test -   Set spline state to 22.0739
2025-12-01 10:37:12,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:12,706 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.452, 5.150), path_start=(0.000, 0.000), dist=21.091m
2025-12-01 10:37:12,707 - WARNING - integration_test - Could not update reference path at step 77: x and y must have the same length
2025-12-01 10:37:12,707 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2025-12-01 10:37:12,709 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:12,710 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:12,710 - INFO - integration_test - Warmstart k=0: x0=20.452418923102364 , y0=5.150361494266748 , psi0=0.39942876742274963 , v0=3.0 , spline0=22.073887504827994 , a0=0.0 , w0=0.0
2025-12-01 10:37:12,710 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:12,711 - INFO - integration_test - Dyn residual k=0: pred=[20.728803910750344, 5.267029135893835, 0.39942876742274963, 3.0, 22.373887504827994], ws=[20.728803910750344, 5.267029135893835, 0.3994287674227497, 3.0, 27.66790664997317], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -5.294019145145175], res_norm=5.294e+00
2025-12-01 10:37:12,712 - INFO - integration_test - Dyn residual k=1: pred=[21.005188898398323, 5.383696777520922, 0.3994287674227497, 3.0, 27.96790664997317], ws=[21.005188898398323, 5.383696777520922, 0.3994287674227497, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.7161098946153395], res_norm=1.716e+00
2025-12-01 10:37:12,712 - INFO - integration_test - Dyn residual k=2: pred=[21.281573886046303, 5.500364419148009, 0.3994287674227497, 3.0, 29.98401654458851], ws=[21.281573886046303, 5.500364419148009, 0.3994287674227497, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:12,727 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,737 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,753 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,764 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,780 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,791 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,807 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,818 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,833 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,845 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,861 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,873 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,888 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,899 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,914 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,925 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,951 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,967 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:12,977 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:12,993 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,004 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,290 - INFO - integration_test - Step 77: MPC solve successful
2025-12-01 10:37:13,298 - INFO - integration_test - Step 77: Computed 10 numeric contouring constraints for visualization (s=22.074)
2025-12-01 10:37:13,298 - DEBUG - integration_test - Step 77: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:13,298 - INFO - integration_test - === Applying control at step 77 ===
2025-12-01 10:37:13,298 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999301874796, 'w': 0.7999951323743966}
2025-12-01 10:37:13,298 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:13,298 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:13,299 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:13,300 - INFO - integration_test - Step 77 completed in 0.608s
2025-12-01 10:37:13,320 - INFO - integration_test - Step 78 (contouring until path end)
2025-12-01 10:37:13,321 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[20.71485452  5.27358061  0.47942828  2.80000372 22.35388788]
2025-12-01 10:37:13,321 - DEBUG - integration_test - Step 78: Using propagated spline 22.3539 (close to path, dist=0.338m)
2025-12-01 10:37:13,322 - DEBUG - integration_test -   Set spline state to 22.3539
2025-12-01 10:37:13,322 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:13,336 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(20.715, 5.274), path_start=(0.000, 0.000), dist=21.376m
2025-12-01 10:37:13,336 - WARNING - integration_test - Could not update reference path at step 78: x and y must have the same length
2025-12-01 10:37:13,336 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2025-12-01 10:37:13,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:13,340 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:13,340 - INFO - integration_test - Warmstart k=0: x0=20.71485452081616 , y0=5.2735806069239 , psi0=0.4794282806601893 , v0=2.8000037249924956 , spline0=22.353887877327242 , a0=0.0 , w0=0.0
2025-12-01 10:37:13,340 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:13,341 - INFO - integration_test - Dyn residual k=0: pred=[20.963287311367857, 5.40273693537286, 0.4794282806601893, 2.8000037249924956, 22.63388824982649], ws=[20.963287311367857, 5.40273693537286, 0.4794282806601893, 2.8000037249924956, 28.012432258783438], res=[0.0, 0.0, 0.0, 0.0, -5.378544008956947], res_norm=5.379e+00
2025-12-01 10:37:13,342 - INFO - integration_test - Dyn residual k=1: pred=[21.211720101919553, 5.53189326382182, 0.4794282806601893, 2.8000037249924956, 28.292432631282686], ws=[21.211720101919553, 5.53189326382182, 0.4794282806601893, 2.8000037249924956, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.3915839133058228], res_norm=1.392e+00
2025-12-01 10:37:13,342 - INFO - integration_test - Dyn residual k=2: pred=[21.46015289247125, 5.661049592270779, 0.4794282806601893, 2.8000037249924956, 29.964016917087758], ws=[21.46015289247125, 5.661049592270779, 0.4794282806601893, 2.8000037249924956, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2800003724992486], res_norm=2.800e-01
2025-12-01 10:37:13,357 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,368 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,384 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,394 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,410 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,421 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,436 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,446 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,462 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,473 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,488 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,499 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,514 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,524 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,540 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,551 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,569 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,581 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,596 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,607 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,622 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:13,633 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:13,974 - INFO - integration_test - Step 78: MPC solve successful
2025-12-01 10:37:13,981 - INFO - integration_test - Step 78: Computed 10 numeric contouring constraints for visualization (s=22.354)
2025-12-01 10:37:13,982 - DEBUG - integration_test - Step 78: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:13,982 - INFO - integration_test - === Applying control at step 78 ===
2025-12-01 10:37:13,982 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000198162176, 'w': 0.3521696369355217}
2025-12-01 10:37:13,982 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:13,982 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:13,983 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:13,983 - INFO - integration_test - Step 78 completed in 0.663s
2025-12-01 10:37:14,003 - INFO - integration_test - Step 79 (contouring until path end)
2025-12-01 10:37:14,004 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[20.9522004   5.40226474  0.51464524  2.60000372 22.61388825]
2025-12-01 10:37:14,005 - DEBUG - integration_test - Step 79: Using propagated spline 22.6139 (close to path, dist=0.387m)
2025-12-01 10:37:14,005 - DEBUG - integration_test -   Set spline state to 22.6139
2025-12-01 10:37:14,006 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:14,019 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(20.952, 5.402), path_start=(0.000, 0.000), dist=21.637m
2025-12-01 10:37:14,020 - WARNING - integration_test - Could not update reference path at step 79: x and y must have the same length
2025-12-01 10:37:14,020 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2025-12-01 10:37:14,022 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:14,024 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:14,024 - INFO - integration_test - Warmstart k=0: x0=20.95220039657032 , y0=5.402264738607796 , psi0=0.5146452443537415 , v0=2.600003723010874 , spline0=22.613888249628328 , a0=0.0 , w0=0.0
2025-12-01 10:37:14,024 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:14,025 - INFO - integration_test - Dyn residual k=0: pred=[21.178522243879076, 5.5302437018301, 0.5146452443537415, 2.600003723010874, 22.873888621929414], ws=[21.178522243879076, 5.5302437018301, 0.5146452443537415, 2.600003723010874, 28.256517189462866], res=[0.0, 0.0, 0.0, 0.0, -5.382628567533452], res_norm=5.383e+00
2025-12-01 10:37:14,026 - INFO - integration_test - Dyn residual k=1: pred=[21.404844091187833, 5.658222665052405, 0.5146452443537415, 2.600003723010874, 28.51651756176395], ws=[21.404844091187833, 5.658222665052405, 0.5146452443537415, 2.600003723010874, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1674989828245579], res_norm=1.167e+00
2025-12-01 10:37:14,027 - INFO - integration_test - Dyn residual k=2: pred=[21.63116593849659, 5.786201628274709, 0.5146452443537415, 2.600003723010874, 29.944016916889595], ws=[21.63116593849659, 5.786201628274709, 0.5146452443537415, 2.600003723010874, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.26000037230108575], res_norm=2.600e-01
2025-12-01 10:37:14,041 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,052 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,068 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,079 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,105 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,120 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,131 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,146 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,157 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,173 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,184 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,199 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,210 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,225 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,235 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,250 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,262 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,278 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,289 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,303 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,314 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,597 - INFO - integration_test - Step 79: MPC solve successful
2025-12-01 10:37:14,605 - INFO - integration_test - Step 79: Computed 10 numeric contouring constraints for visualization (s=22.614)
2025-12-01 10:37:14,605 - DEBUG - integration_test - Step 79: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:14,605 - INFO - integration_test - === Applying control at step 79 ===
2025-12-01 10:37:14,605 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019988315, 'w': 0.031012669391485715}
2025-12-01 10:37:14,605 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:14,605 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:14,606 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:14,607 - INFO - integration_test - Step 79 completed in 0.602s
2025-12-01 10:37:14,627 - INFO - integration_test - Step 80 (contouring until path end)
2025-12-01 10:37:14,628 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[21.16962896  5.52565419  0.51774651  2.40000372 22.85388862]
2025-12-01 10:37:14,629 - DEBUG - integration_test - Step 80: Using propagated spline 22.8539 (close to path, dist=0.439m)
2025-12-01 10:37:14,629 - DEBUG - integration_test -   Set spline state to 22.8539
2025-12-01 10:37:14,629 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:14,643 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(21.170, 5.526), path_start=(0.000, 0.000), dist=21.879m
2025-12-01 10:37:14,643 - WARNING - integration_test - Could not update reference path at step 80: x and y must have the same length
2025-12-01 10:37:14,643 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2025-12-01 10:37:14,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:14,647 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:14,647 - INFO - integration_test - Warmstart k=0: x0=21.16962895647823 , y0=5.5256541926574325 , psi0=0.5177465112928901 , v0=2.4000037210120424 , spline0=22.85388862172953 , a0=0.0 , w0=0.0
2025-12-01 10:37:14,647 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:14,648 - INFO - integration_test - Dyn residual k=0: pred=[21.378174085176788, 5.644435958534265, 0.5177465112928901, 2.4000037210120424, 23.093888993830735], ws=[21.378174085176788, 5.644435958534265, 0.5177465112928901, 2.4000037210120424, 28.543337672466286], res=[0.0, 0.0, 0.0, 0.0, -5.449448678635552], res_norm=5.449e+00
2025-12-01 10:37:14,649 - INFO - integration_test - Dyn residual k=1: pred=[21.586719213875345, 5.763217724411097, 0.5177465112928901, 2.4000037210120424, 28.78333804456749], ws=[21.586719213875345, 5.763217724411097, 0.5177465112928901, 2.4000037210120424, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.9006785000210193], res_norm=9.007e-01
2025-12-01 10:37:14,650 - INFO - integration_test - Dyn residual k=2: pred=[21.7952643425739, 5.88199949028793, 0.5177465112928901, 2.4000037210120424, 29.924016916689713], ws=[21.7952643425739, 5.88199949028793, 0.5177465112928901, 2.4000037210120424, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2400003721012034], res_norm=2.400e-01
2025-12-01 10:37:14,665 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,676 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,692 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,702 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,718 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,729 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,744 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,755 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,771 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,782 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,798 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,808 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,824 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,834 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,849 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,860 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,876 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,887 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,902 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,913 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:14,929 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:14,939 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,259 - INFO - integration_test - Step 80: MPC solve successful
2025-12-01 10:37:15,267 - INFO - integration_test - Step 80: Computed 10 numeric contouring constraints for visualization (s=22.854)
2025-12-01 10:37:15,267 - DEBUG - integration_test - Step 80: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:15,267 - INFO - integration_test - === Applying control at step 80 ===
2025-12-01 10:37:15,267 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019993118, 'w': 0.12458619537872351}
2025-12-01 10:37:15,267 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:15,267 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:15,268 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:15,268 - INFO - integration_test - Step 80 completed in 0.640s
2025-12-01 10:37:15,288 - INFO - integration_test - Step 81 (contouring until path end)
2025-12-01 10:37:15,290 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[21.36878085  5.64071075  0.53020513  2.20000372 23.07388899]
2025-12-01 10:37:15,291 - DEBUG - integration_test - Step 81: Using propagated spline 23.0739 (close to path, dist=0.410m)
2025-12-01 10:37:15,291 - DEBUG - integration_test -   Set spline state to 23.0739
2025-12-01 10:37:15,291 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:15,305 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(21.369, 5.641), path_start=(0.000, 0.000), dist=22.101m
2025-12-01 10:37:15,305 - WARNING - integration_test - Could not update reference path at step 81: x and y must have the same length
2025-12-01 10:37:15,305 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2025-12-01 10:37:15,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:15,310 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:15,310 - INFO - integration_test - Warmstart k=0: x0=21.368780848022013 , y0=5.640710750051816 , psi0=0.5302051308307624 , v0=2.200003719012731 , spline0=23.073888993630803 , a0=0.0 , w0=0.0
2025-12-01 10:37:15,310 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:15,311 - INFO - integration_test - Dyn residual k=0: pred=[21.558575906277923, 5.751967208283838, 0.5302051308307624, 2.200003719012731, 23.293889365532074], ws=[21.558575906277923, 5.751967208283838, 0.5302051308307623, 2.200003719012731, 28.73753244242577], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.4436430768936965], res_norm=5.444e+00
2025-12-01 10:37:15,311 - INFO - integration_test - Dyn residual k=1: pred=[21.748370964533834, 5.86322366651586, 0.5302051308307623, 2.200003719012731, 28.957532814327045], ws=[21.748370964533834, 5.86322366651586, 0.5302051308307623, 2.200003719012731, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7264837302614637], res_norm=7.265e-01
2025-12-01 10:37:15,312 - INFO - integration_test - Dyn residual k=2: pred=[21.938166022789744, 5.974480124747882, 0.5302051308307623, 2.200003719012731, 29.90401691648978], ws=[21.938166022789744, 5.974480124747882, 0.5302051308307623, 2.200003719012731, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2200003719012713], res_norm=2.200e-01
2025-12-01 10:37:15,327 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,337 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,353 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,364 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,379 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,390 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,405 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,417 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,433 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,444 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,460 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,472 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,488 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,499 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,514 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,524 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,539 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,550 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,566 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,577 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,592 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:15,603 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:15,960 - INFO - integration_test - Step 81: MPC solve successful
2025-12-01 10:37:15,967 - INFO - integration_test - Step 81: Computed 10 numeric contouring constraints for visualization (s=23.074)
2025-12-01 10:37:15,968 - DEBUG - integration_test - Step 81: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:15,968 - INFO - integration_test - === Applying control at step 81 ===
2025-12-01 10:37:15,968 - INFO - integration_test -   Control dict from planner: {'a': -2.000000012797695, 'w': 0.08706019871621144}
2025-12-01 10:37:15,968 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:15,968 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:15,969 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:15,969 - INFO - integration_test - Step 81 completed in 0.679s
2025-12-01 10:37:15,990 - INFO - integration_test - Step 82 (contouring until path end)
2025-12-01 10:37:15,991 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[21.54949169  5.7476849   0.53891115  2.00000372 23.27388937]
2025-12-01 10:37:15,992 - DEBUG - integration_test - Step 82: Using propagated spline 23.2739 (close to path, dist=0.489m)
2025-12-01 10:37:15,992 - DEBUG - integration_test -   Set spline state to 23.2739
2025-12-01 10:37:15,992 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:16,005 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(21.549, 5.748), path_start=(0.000, 0.000), dist=22.303m
2025-12-01 10:37:16,006 - WARNING - integration_test - Could not update reference path at step 82: x and y must have the same length
2025-12-01 10:37:16,006 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2025-12-01 10:37:16,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:16,009 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:16,009 - INFO - integration_test - Warmstart k=0: x0=21.549491692457575 , y0=5.74768489898413 , psi0=0.5389111507023835 , v0=2.0000037177329615 , spline0=23.2738893654041 , a0=0.0 , w0=0.0
2025-12-01 10:37:16,009 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:16,010 - INFO - integration_test - Dyn residual k=0: pred=[21.721145609422702, 5.8503254440917365, 0.5389111507023835, 2.0000037177329615, 23.473889737177394], ws=[21.721145609422702, 5.8503254440917365, 0.5389111507023836, 2.0000037177329615, 28.97030248875975], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.496412751582355], res_norm=5.496e+00
2025-12-01 10:37:16,011 - INFO - integration_test - Dyn residual k=1: pred=[21.89279952638783, 5.952965989199343, 0.5389111507023836, 2.0000037177329615, 29.170302860533045], ws=[21.89279952638783, 5.952965989199343, 0.5389111507023836, 2.0000037177329615, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.5137136840554639], res_norm=5.137e-01
2025-12-01 10:37:16,012 - INFO - integration_test - Dyn residual k=2: pred=[22.064453443352956, 6.055606534306949, 0.5389111507023836, 2.0000037177329615, 29.884016916361805], ws=[22.064453443352956, 6.055606534306949, 0.5389111507023836, 2.0000037177329615, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.20000037177329588], res_norm=2.000e-01
2025-12-01 10:37:16,026 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,037 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,052 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,063 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,079 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,091 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,106 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,117 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,132 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,142 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,158 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,168 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,184 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,195 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,210 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,220 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,235 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,246 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,261 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,272 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,287 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,298 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,685 - INFO - integration_test - Step 82: MPC solve successful
2025-12-01 10:37:16,693 - INFO - integration_test - Step 82: Computed 10 numeric contouring constraints for visualization (s=23.274)
2025-12-01 10:37:16,694 - DEBUG - integration_test - Step 82: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:16,694 - INFO - integration_test - === Applying control at step 82 ===
2025-12-01 10:37:16,694 - INFO - integration_test -   Control dict from planner: {'a': 1.9999996262882522, 'w': 0.513156235774839}
2025-12-01 10:37:16,694 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:16,694 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:16,695 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:16,695 - INFO - integration_test - Step 82 completed in 0.705s
2025-12-01 10:37:16,716 - INFO - integration_test - Step 83 (contouring until path end)
2025-12-01 10:37:16,717 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.72683884  5.86010588  0.59022677  2.20000368 23.49388973]
2025-12-01 10:37:16,718 - DEBUG - integration_test - Step 83: Using propagated spline 23.4939 (close to path, dist=0.469m)
2025-12-01 10:37:16,718 - DEBUG - integration_test -   Set spline state to 23.4939
2025-12-01 10:37:16,718 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:16,732 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.727, 5.860), path_start=(0.000, 0.000), dist=22.503m
2025-12-01 10:37:16,732 - WARNING - integration_test - Could not update reference path at step 83: x and y must have the same length
2025-12-01 10:37:16,732 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2025-12-01 10:37:16,735 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:16,736 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:16,736 - INFO - integration_test - Warmstart k=0: x0=21.726838838734423 , y0=5.860105875922295 , psi0=0.5902267742798674 , v0=2.2000036803617866 , spline0=23.493889733440277 , a0=0.0 , w0=0.0
2025-12-01 10:37:16,736 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:16,737 - INFO - integration_test - Dyn residual k=0: pred=[21.90961833216445, 5.982546958560096, 0.5902267742798674, 2.2000036803617866, 23.713890101476455], ws=[21.90961833216445, 5.982546958560096, 0.5902267742798673, 2.2000036803617866, 29.26703349288553], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.553143391409076], res_norm=5.553e+00
2025-12-01 10:37:16,737 - INFO - integration_test - Dyn residual k=1: pred=[22.092397825594475, 6.104988041197898, 0.5902267742798673, 2.2000036803617866, 29.48703386092171], ws=[22.092397825594475, 6.104988041197898, 0.5902267742798673, 2.2000036803617866, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.19698268366679983], res_norm=1.970e-01
2025-12-01 10:37:16,738 - INFO - integration_test - Dyn residual k=2: pred=[22.2751773190245, 6.2274291238357, 0.5902267742798673, 2.2000036803617866, 29.904016912624687], ws=[22.2751773190245, 6.2274291238357, 0.5902267742798673, 2.2000036803617866, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.22000036803617817], res_norm=2.200e-01
2025-12-01 10:37:16,753 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,764 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,779 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,790 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,806 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,816 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,831 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,842 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,857 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,868 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,883 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,894 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,909 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,919 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,934 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,945 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,960 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,971 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:16,987 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:16,998 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:17,013 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:17,023 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:17,800 - INFO - integration_test - Step 83: MPC solve successful
2025-12-01 10:37:17,809 - INFO - integration_test - Step 83: Computed 10 numeric contouring constraints for visualization (s=23.494)
2025-12-01 10:37:17,809 - DEBUG - integration_test - Step 83: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:17,809 - INFO - integration_test - === Applying control at step 83 ===
2025-12-01 10:37:17,810 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019980615, 'w': -0.04630231013611725}
2025-12-01 10:37:17,810 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:17,810 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:17,811 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:17,811 - INFO - integration_test - Step 83 completed in 1.094s
2025-12-01 10:37:17,840 - INFO - integration_test - Step 84 (contouring until path end)
2025-12-01 10:37:17,842 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[21.91822642  5.98766319  0.58559654  2.40000368 23.7338901 ]
2025-12-01 10:37:17,843 - DEBUG - integration_test - Step 84: Using propagated spline 23.7339 (close to path, dist=0.482m)
2025-12-01 10:37:17,843 - DEBUG - integration_test -   Set spline state to 23.7339
2025-12-01 10:37:17,844 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:17,860 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(21.918, 5.988), path_start=(0.000, 0.000), dist=22.721m
2025-12-01 10:37:17,860 - WARNING - integration_test - Could not update reference path at step 84: x and y must have the same length
2025-12-01 10:37:17,860 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2025-12-01 10:37:17,863 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:17,865 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:17,865 - INFO - integration_test - Warmstart k=0: x0=21.918226423897217 , y0=5.98766318514913 , psi0=0.5855965432662557 , v0=2.400003682359848 , spline0=23.733890101676263 , a0=0.0 , w0=0.0
2025-12-01 10:37:17,865 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:17,866 - INFO - integration_test - Dyn residual k=0: pred=[22.118238537196113, 6.120310579722556, 0.5855965432662557, 2.400003682359848, 23.97389046991225], ws=[22.118238537196113, 6.120310579722556, 0.5855965432662558, 2.400003682359848, 29.527173055173385], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.553282585261137], res_norm=5.553e+00
2025-12-01 10:37:17,867 - INFO - integration_test - Dyn residual k=1: pred=[22.31825065049501, 6.252957974295982, 0.5855965432662558, 2.400003682359848, 29.76717342340937], ws=[22.31825065049501, 6.252957974295982, 0.5855965432662558, 2.400003682359848, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.08315687882086209], res_norm=8.316e-02
2025-12-01 10:37:17,868 - INFO - integration_test - Dyn residual k=2: pred=[22.518262763793906, 6.385605368869408, 0.5855965432662558, 2.400003682359848, 29.924016912824495], ws=[22.518262763793906, 6.385605368869408, 0.5855965432662558, 2.400003682359848, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.24000036823598592], res_norm=2.400e-01
2025-12-01 10:37:17,885 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:17,898 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:17,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:17,930 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:17,949 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:17,962 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:17,981 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:17,994 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,012 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,025 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,043 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,055 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,074 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,086 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,105 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,117 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,136 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,149 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,170 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,184 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,203 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,215 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,696 - INFO - integration_test - Step 84: MPC solve successful
2025-12-01 10:37:18,707 - INFO - integration_test - Step 84: Computed 10 numeric contouring constraints for visualization (s=23.734)
2025-12-01 10:37:18,708 - DEBUG - integration_test - Step 84: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:18,708 - INFO - integration_test - === Applying control at step 84 ===
2025-12-01 10:37:18,708 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019981309, 'w': 0.13871015264644657}
2025-12-01 10:37:18,708 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:18,708 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:18,709 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:18,710 - INFO - integration_test - Step 84 completed in 0.868s
2025-12-01 10:37:18,741 - INFO - integration_test - Step 85 (contouring until path end)
2025-12-01 10:37:18,743 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[22.12559448  6.12729725  0.59946756  2.60000368 23.99389047]
2025-12-01 10:37:18,744 - INFO - integration_test - Step 85: Re-initialized spline from 23.9939 to 23.6261 (vehicle at (22.13, 6.13), closest path point at (22.06, 5.53), distance=0.605m)
2025-12-01 10:37:18,744 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 10:37:18,745 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:18,762 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(22.126, 6.127), path_start=(0.000, 0.000), dist=22.958m
2025-12-01 10:37:18,762 - WARNING - integration_test - Could not update reference path at step 85: x and y must have the same length
2025-12-01 10:37:18,762 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2025-12-01 10:37:18,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:18,767 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:18,767 - INFO - integration_test - Warmstart k=0: x0=22.125594476858772 , y0=6.127297254089466 , psi0=0.5994675585309003 , v0=2.600003684357979 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 10:37:18,767 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:18,768 - INFO - integration_test - Dyn residual k=0: pred=[22.340260176666106, 6.273990229084788, 0.5994675585309003, 2.600003684357979, 23.886054352904203], ws=[22.340260176666106, 6.273990229084788, 0.5994675585309004, 2.600003684357979, 29.412266886091658], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.526212533187454], res_norm=5.526e+00
2025-12-01 10:37:18,769 - INFO - integration_test - Dyn residual k=1: pred=[22.55492587647344, 6.42068320408011, 0.5994675585309004, 2.600003684357979, 29.672267254527455], ws=[22.55492587647344, 6.42068320408011, 0.5994675585309004, 2.600003684357979, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.011749290061054296], res_norm=1.175e-02
2025-12-01 10:37:18,770 - INFO - integration_test - Dyn residual k=2: pred=[22.769591576280774, 6.567376179075431, 0.5994675585309004, 2.600003684357979, 29.944016913024306], ws=[22.769591576280774, 6.567376179075431, 0.5994675585309004, 2.600003684357979, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2600003684357972], res_norm=2.600e-01
2025-12-01 10:37:18,786 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,799 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,817 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,829 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,847 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,860 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,891 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,909 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,921 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,939 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,952 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:18,972 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:18,984 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,002 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,014 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,032 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,044 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,063 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,076 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,094 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,106 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,487 - INFO - integration_test - Step 85: MPC solve successful
2025-12-01 10:37:19,495 - INFO - integration_test - Step 85: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 10:37:19,496 - DEBUG - integration_test - Step 85: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:19,496 - INFO - integration_test - === Applying control at step 85 ===
2025-12-01 10:37:19,496 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000187412805, 'w': -0.47097745331295693}
2025-12-01 10:37:19,496 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:19,496 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:19,497 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:19,497 - INFO - integration_test - Step 85 completed in 0.754s
2025-12-01 10:37:19,526 - INFO - integration_test - Step 86 (contouring until path end)
2025-12-01 10:37:19,528 - DEBUG - integration_test - Syncing planner state at step 86: vehicle_state=[22.35206353  6.27426153  0.55236981  2.80000369 23.90605435]
2025-12-01 10:37:19,529 - INFO - integration_test - Step 86: Re-initialized spline from 23.9061 to 24.2319 (vehicle at (22.35, 6.27), closest path point at (22.90, 6.00), distance=0.610m)
2025-12-01 10:37:19,529 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 10:37:19,529 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:19,545 - DEBUG - integration_test - Step 86: Checking path alignment: vehicle=(22.352, 6.274), path_start=(0.000, 0.000), dist=23.216m
2025-12-01 10:37:19,545 - WARNING - integration_test - Could not update reference path at step 86: x and y must have the same length
2025-12-01 10:37:19,545 - INFO - integration_test - === Calling planner.solve_mpc() at step 86 ===
2025-12-01 10:37:19,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:19,549 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:19,550 - INFO - integration_test - Warmstart k=0: x0=22.352063533537354 , y0=6.274261525910254 , psi0=0.5523698131996045 , v0=2.800003686232107 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 10:37:19,550 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:19,551 - INFO - integration_test - Dyn residual k=0: pred=[22.59042321564475, 6.421179422624011, 0.5523698131996045, 2.800003686232107, 24.511850609103625], ws=[22.59042321564475, 6.421179422624011, 0.5523698131996047, 2.800003686232107, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.172165935484884], res_norm=5.172e+00
2025-12-01 10:37:19,552 - INFO - integration_test - Dyn residual k=1: pred=[22.82878289775215, 6.568097319337768, 0.5523698131996047, 2.800003686232107, 29.96401691321172], ws=[22.82878289775215, 6.568097319337768, 0.5523698131996047, 2.800003686232107, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000036862320954], res_norm=2.800e-01
2025-12-01 10:37:19,552 - INFO - integration_test - Dyn residual k=2: pred=[23.067142579859546, 6.715015216051524, 0.5523698131996047, 2.800003686232107, 29.96401691321172], ws=[23.067142579859546, 6.715015216051524, 0.5523698131996047, 2.800003686232107, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000036862320954], res_norm=2.800e-01
2025-12-01 10:37:19,569 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,581 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,596 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,607 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,623 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,633 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,648 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,660 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,675 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,686 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,701 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,712 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,737 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,753 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,764 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,779 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,790 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,806 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,817 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:19,833 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:19,844 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,525 - INFO - integration_test - Step 86: MPC solve successful
2025-12-01 10:37:20,532 - INFO - integration_test - Step 86: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 10:37:20,533 - DEBUG - integration_test - Step 86: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:20,533 - INFO - integration_test - === Applying control at step 86 ===
2025-12-01 10:37:20,533 - INFO - integration_test -   Control dict from planner: {'a': 1.9999501397015882, 'w': 0.7635318902708333}
2025-12-01 10:37:20,533 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:20,533 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:20,535 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:20,535 - INFO - integration_test - Step 86 completed in 1.008s
2025-12-01 10:37:20,556 - INFO - integration_test - Step 87 (contouring until path end)
2025-12-01 10:37:20,559 - DEBUG - integration_test - Syncing planner state at step 87: vehicle_state=[22.59281889  6.43580439  0.628723    2.9999987  24.53185011]
2025-12-01 10:37:20,560 - INFO - integration_test - Step 87: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (22.59, 6.44), closest path point at (22.90, 6.00), distance=0.531m)
2025-12-01 10:37:20,560 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 10:37:20,560 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:20,574 - DEBUG - integration_test - Step 87: Checking path alignment: vehicle=(22.593, 6.436), path_start=(0.000, 0.000), dist=23.492m
2025-12-01 10:37:20,574 - WARNING - integration_test - Could not update reference path at step 87: x and y must have the same length
2025-12-01 10:37:20,575 - INFO - integration_test - === Calling planner.solve_mpc() at step 87 ===
2025-12-01 10:37:20,577 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:20,578 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:20,578 - INFO - integration_test - Warmstart k=0: x0=22.592818889056694 , y0=6.435804389640174 , psi0=0.6287230022266879 , v0=2.9999987002022657 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 10:37:20,578 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:20,579 - INFO - integration_test - Dyn residual k=0: pred=[22.83545253967691, 6.612238041755807, 0.6287230022266879, 2.9999987002022657, 24.531850110500642], ws=[22.83545253967691, 6.612238041755807, 0.6287230022266881, 2.9999987002022657, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.152166434087867], res_norm=5.152e+00
2025-12-01 10:37:20,579 - INFO - integration_test - Dyn residual k=1: pred=[23.078086190297128, 6.78867169387144, 0.6287230022266881, 2.9999987002022657, 29.984016414608735], ws=[23.078086190297128, 6.78867169387144, 0.6287230022266881, 2.9999987002022657, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999998700202262], res_norm=3.000e-01
2025-12-01 10:37:20,580 - INFO - integration_test - Dyn residual k=2: pred=[23.320719840917345, 6.965105345987073, 0.6287230022266881, 2.9999987002022657, 29.984016414608735], ws=[23.320719840917345, 6.965105345987073, 0.6287230022266881, 2.9999987002022657, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999998700202262], res_norm=3.000e-01
2025-12-01 10:37:20,594 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,605 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,620 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,631 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,657 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,673 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,684 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,699 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,711 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,727 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,739 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,758 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,771 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,790 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,803 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,821 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,833 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,851 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,863 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:20,880 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:20,892 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,259 - INFO - integration_test - Step 87: MPC solve successful
2025-12-01 10:37:21,267 - INFO - integration_test - Step 87: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 10:37:21,268 - DEBUG - integration_test - Step 87: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:21,268 - INFO - integration_test - === Applying control at step 87 ===
2025-12-01 10:37:21,268 - INFO - integration_test -   Control dict from planner: {'a': 1.3297246634082125e-05, 'w': -0.2373464211655423}
2025-12-01 10:37:21,268 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:21,268 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:21,269 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:21,269 - INFO - integration_test - Step 87 completed in 0.710s
2025-12-01 10:37:21,290 - INFO - integration_test - Step 88 (contouring until path end)
2025-12-01 10:37:21,292 - DEBUG - integration_test - Syncing planner state at step 88: vehicle_state=[22.83752351  6.60934224  0.60498836  3.00000003 24.53185024]
2025-12-01 10:37:21,292 - INFO - integration_test - Step 88: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (22.84, 6.61), closest path point at (22.90, 6.00), distance=0.613m)
2025-12-01 10:37:21,292 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 10:37:21,293 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:21,306 - DEBUG - integration_test - Step 88: Checking path alignment: vehicle=(22.838, 6.609), path_start=(0.000, 0.000), dist=23.775m
2025-12-01 10:37:21,307 - WARNING - integration_test - Could not update reference path at step 88: x and y must have the same length
2025-12-01 10:37:21,307 - INFO - integration_test - === Calling planner.solve_mpc() at step 88 ===
2025-12-01 10:37:21,309 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:21,310 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:21,310 - INFO - integration_test - Warmstart k=0: x0=22.837523510634323 , y0=6.609342239068229 , psi0=0.6049883601101337 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 10:37:21,310 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:21,311 - INFO - integration_test - Dyn residual k=0: pred=[23.0842761260057, 6.779967989784191, 0.6049883601101337, 3.0, 24.531850240480416], ws=[23.0842761260057, 6.779967989784191, 0.6049883601101338, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 10:37:21,312 - INFO - integration_test - Dyn residual k=1: pred=[23.33102874137708, 6.950593740500152, 0.6049883601101338, 3.0, 29.98401654458851], ws=[23.33102874137708, 6.950593740500152, 0.6049883601101338, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:21,312 - INFO - integration_test - Dyn residual k=2: pred=[23.577781356748456, 7.121219491216114, 0.6049883601101338, 3.0, 29.98401654458851], ws=[23.577781356748456, 7.121219491216114, 0.6049883601101338, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:21,327 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,338 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,353 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,364 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,380 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,391 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,406 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,417 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,432 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,443 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,458 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,469 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,484 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,495 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,510 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,520 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,535 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,546 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,572 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:21,587 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:21,598 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,272 - INFO - integration_test - Step 88: MPC solve successful
2025-12-01 10:37:22,280 - INFO - integration_test - Step 88: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 10:37:22,280 - DEBUG - integration_test - Step 88: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:22,280 - INFO - integration_test - === Applying control at step 88 ===
2025-12-01 10:37:22,280 - INFO - integration_test -   Control dict from planner: {'a': -4.753259441916827e-07, 'w': -0.7418666805609213}
2025-12-01 10:37:22,280 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:22,280 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:22,281 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:22,282 - INFO - integration_test - Step 88 completed in 0.990s
2025-12-01 10:37:22,302 - INFO - integration_test - Step 89 (contouring until path end)
2025-12-01 10:37:22,303 - DEBUG - integration_test - Syncing planner state at step 89: vehicle_state=[23.09037603  6.77066284  0.53080169  2.99999998 24.53185024]
2025-12-01 10:37:22,304 - INFO - integration_test - Step 89: Re-initialized spline from 24.5319 to 24.8376 (vehicle at (23.09, 6.77), closest path point at (23.38, 6.30), distance=0.552m)
2025-12-01 10:37:22,304 - DEBUG - integration_test -   Set spline state to 24.8376
2025-12-01 10:37:22,305 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:22,318 - DEBUG - integration_test - Step 89: Checking path alignment: vehicle=(23.090, 6.771), path_start=(0.000, 0.000), dist=24.063m
2025-12-01 10:37:22,318 - WARNING - integration_test - Could not update reference path at step 89: x and y must have the same length
2025-12-01 10:37:22,318 - INFO - integration_test - === Calling planner.solve_mpc() at step 89 ===
2025-12-01 10:37:22,321 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:22,322 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:22,322 - INFO - integration_test - Warmstart k=0: x0=23.09037602669761 , y0=6.770662843739393 , psi0=0.5308016920540416 , v0=2.9999999823943346 , spline0=24.837646496492425 , a0=0.0 , w0=0.0
2025-12-01 10:37:22,322 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:22,323 - INFO - integration_test - Dyn residual k=0: pred=[23.34909647854771, 6.922530308122448, 0.5308016920540416, 2.9999999823943346, 25.137646494731857], ws=[23.34909647854771, 6.922530308122448, 0.5308016920540415, 2.9999999823943346, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.546370049856652], res_norm=4.546e+00
2025-12-01 10:37:22,324 - INFO - integration_test - Dyn residual k=1: pred=[23.607816930397814, 7.0743977725055025, 0.5308016920540415, 2.9999999823943346, 29.98401654282794], ws=[23.607816930397814, 7.0743977725055025, 0.5308016920540415, 2.9999999823943346, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999999823943213], res_norm=3.000e-01
2025-12-01 10:37:22,324 - INFO - integration_test - Dyn residual k=2: pred=[23.866537382247916, 7.226265236888557, 0.5308016920540415, 2.9999999823943346, 29.98401654282794], ws=[23.866537382247916, 7.226265236888557, 0.5308016920540415, 2.9999999823943346, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999999823943213], res_norm=3.000e-01
2025-12-01 10:37:22,339 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,350 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,365 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,376 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,391 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,402 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,417 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,428 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,442 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,453 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,470 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,482 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,498 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,510 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,527 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,539 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,557 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,568 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,584 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,595 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:22,610 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:22,621 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,047 - INFO - integration_test - Step 89: MPC solve successful
2025-12-01 10:37:23,055 - INFO - integration_test - Step 89: Computed 10 numeric contouring constraints for visualization (s=24.838)
2025-12-01 10:37:23,056 - DEBUG - integration_test - Step 89: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:23,056 - INFO - integration_test - === Applying control at step 89 ===
2025-12-01 10:37:23,056 - INFO - integration_test -   Control dict from planner: {'a': 4.6482223146029157e-07, 'w': 0.7999999373592985}
2025-12-01 10:37:23,056 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:23,056 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:23,057 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:23,058 - INFO - integration_test - Step 89 completed in 0.754s
2025-12-01 10:37:23,081 - INFO - integration_test - Step 90 (contouring until path end)
2025-12-01 10:37:23,082 - DEBUG - integration_test - Syncing planner state at step 90: vehicle_state=[23.34274914  6.93271167  0.61080169  3.00000003 25.1376465 ]
2025-12-01 10:37:23,083 - INFO - integration_test - Step 90: Re-initialized spline from 25.1376 to 25.4434 (vehicle at (23.34, 6.93), closest path point at (23.85, 6.62), distance=0.603m)
2025-12-01 10:37:23,083 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 10:37:23,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:23,099 - DEBUG - integration_test - Step 90: Checking path alignment: vehicle=(23.343, 6.933), path_start=(0.000, 0.000), dist=24.350m
2025-12-01 10:37:23,100 - WARNING - integration_test - Could not update reference path at step 90: x and y must have the same length
2025-12-01 10:37:23,100 - INFO - integration_test - === Calling planner.solve_mpc() at step 90 ===
2025-12-01 10:37:23,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:23,104 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:23,104 - INFO - integration_test - Warmstart k=0: x0=23.342749144981507 , y0=6.932711670674591 , psi0=0.6108016857899714 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 10:37:23,104 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:23,105 - INFO - integration_test - Dyn residual k=0: pred=[23.588505693421045, 7.104768983506931, 0.6108016857899714, 3.0, 25.743442752504436], ws=[23.588505693421045, 7.104768983506931, 0.6108016857899714, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 10:37:23,106 - INFO - integration_test - Dyn residual k=1: pred=[23.834262241860582, 7.276826296339271, 0.6108016857899714, 3.0, 29.98401654458851], ws=[23.834262241860582, 7.276826296339271, 0.6108016857899714, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:23,107 - INFO - integration_test - Dyn residual k=2: pred=[24.08001879030012, 7.448883609171611, 0.6108016857899714, 3.0, 29.98401654458851], ws=[24.08001879030012, 7.448883609171611, 0.6108016857899714, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:23,123 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,135 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,152 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,165 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,182 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,194 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,211 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,223 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,240 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,252 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,270 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,282 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,299 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,311 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,327 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,339 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,355 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,366 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,382 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,393 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:23,408 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:23,418 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,321 - INFO - integration_test - Step 90: MPC solve successful
2025-12-01 10:37:24,329 - INFO - integration_test - Step 90: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 10:37:24,329 - DEBUG - integration_test - Step 90: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:24,329 - INFO - integration_test - === Applying control at step 90 ===
2025-12-01 10:37:24,329 - INFO - integration_test -   Control dict from planner: {'a': 7.485993981226894e-09, 'w': 0.3048589507223296}
2025-12-01 10:37:24,329 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:24,329 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:24,330 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:24,331 - INFO - integration_test - Step 90 completed in 1.248s
2025-12-01 10:37:24,351 - INFO - integration_test - Step 91 (contouring until path end)
2025-12-01 10:37:24,352 - DEBUG - integration_test - Syncing planner state at step 91: vehicle_state=[23.58584517  7.1084881   0.64128758  3.00000003 25.74344276]
2025-12-01 10:37:24,353 - INFO - integration_test - Step 91: Re-initialized spline from 25.7434 to 25.4434 (vehicle at (23.59, 7.11), closest path point at (23.85, 6.62), distance=0.562m)
2025-12-01 10:37:24,353 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 10:37:24,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:24,367 - DEBUG - integration_test - Step 91: Checking path alignment: vehicle=(23.586, 7.108), path_start=(0.000, 0.000), dist=24.634m
2025-12-01 10:37:24,368 - WARNING - integration_test - Could not update reference path at step 91: x and y must have the same length
2025-12-01 10:37:24,368 - INFO - integration_test - === Calling planner.solve_mpc() at step 91 ===
2025-12-01 10:37:24,370 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:24,371 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:24,371 - INFO - integration_test - Warmstart k=0: x0=23.58584517288536 , y0=7.108488099181709 , psi0=0.6412875808622044 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 10:37:24,372 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:24,373 - INFO - integration_test - Dyn residual k=0: pred=[23.826243019623117, 7.287956411938724, 0.6412875808622044, 3.0, 25.743442752504436], ws=[23.826243019623117, 7.287956411938724, 0.6412875808622043, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 10:37:24,373 - INFO - integration_test - Dyn residual k=1: pred=[24.066640866360874, 7.467424724695739, 0.6412875808622043, 3.0, 29.98401654458851], ws=[24.066640866360874, 7.467424724695739, 0.6412875808622043, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:24,374 - INFO - integration_test - Dyn residual k=2: pred=[24.30703871309863, 7.646893037452754, 0.6412875808622043, 3.0, 29.98401654458851], ws=[24.30703871309863, 7.646893037452754, 0.6412875808622043, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:24,388 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,399 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,415 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,427 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,443 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,455 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,472 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,484 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,500 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,511 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,527 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,538 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,554 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,565 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,581 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,591 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,606 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,617 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,632 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,642 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:24,657 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:24,668 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,363 - INFO - integration_test - Step 91: MPC solve successful
2025-12-01 10:37:25,371 - INFO - integration_test - Step 91: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 10:37:25,371 - DEBUG - integration_test - Step 91: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:25,371 - INFO - integration_test - === Applying control at step 91 ===
2025-12-01 10:37:25,371 - INFO - integration_test -   Control dict from planner: {'a': -7.301468672866218e-08, 'w': -0.08474089749434809}
2025-12-01 10:37:25,371 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:25,371 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:25,373 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:25,373 - INFO - integration_test - Step 91 completed in 1.021s
2025-12-01 10:37:25,395 - INFO - integration_test - Step 92 (contouring until path end)
2025-12-01 10:37:25,396 - DEBUG - integration_test - Syncing planner state at step 92: vehicle_state=[23.82700056  7.2869357   0.63281349  3.00000002 25.74344275]
2025-12-01 10:37:25,396 - INFO - integration_test - Step 92: Re-initialized spline from 25.7434 to 26.0492 (vehicle at (23.83, 7.29), closest path point at (24.32, 6.94), distance=0.603m)
2025-12-01 10:37:25,396 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 10:37:25,397 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:25,410 - DEBUG - integration_test - Step 92: Checking path alignment: vehicle=(23.827, 7.287), path_start=(0.000, 0.000), dist=24.916m
2025-12-01 10:37:25,410 - WARNING - integration_test - Could not update reference path at step 92: x and y must have the same length
2025-12-01 10:37:25,410 - INFO - integration_test - === Calling planner.solve_mpc() at step 92 ===
2025-12-01 10:37:25,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:25,414 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:25,414 - INFO - integration_test - Warmstart k=0: x0=23.827000555296358 , y0=7.28693569518063 , psi0=0.6328134911127696 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 10:37:25,414 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:25,415 - INFO - integration_test - Dyn residual k=0: pred=[24.06891058296508, 7.46436043560123, 0.6328134911127696, 3.0, 26.349239008516445], ws=[24.06891058296508, 7.46436043560123, 0.6328134911127696, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 10:37:25,415 - INFO - integration_test - Dyn residual k=1: pred=[24.310820610633805, 7.64178517602183, 0.6328134911127696, 3.0, 29.98401654458851], ws=[24.310820610633805, 7.64178517602183, 0.6328134911127696, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:25,416 - INFO - integration_test - Dyn residual k=2: pred=[24.552730638302528, 7.819209916442429, 0.6328134911127696, 3.0, 29.98401654458851], ws=[24.552730638302528, 7.819209916442429, 0.6328134911127696, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:25,430 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,441 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,456 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,468 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,483 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,494 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,509 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,520 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,536 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,548 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,564 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,577 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,593 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,605 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,621 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,632 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,648 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,659 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,675 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,686 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:25,701 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:25,712 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,044 - INFO - integration_test - Step 92: MPC solve successful
2025-12-01 10:37:26,051 - INFO - integration_test - Step 92: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 10:37:26,052 - DEBUG - integration_test - Step 92: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:26,052 - INFO - integration_test - === Applying control at step 92 ===
2025-12-01 10:37:26,052 - INFO - integration_test -   Control dict from planner: {'a': 7.676153913185214e-08, 'w': 0.007663975799734761}
2025-12-01 10:37:26,052 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:26,052 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:26,053 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:26,053 - INFO - integration_test - Step 92 completed in 0.658s
2025-12-01 10:37:26,077 - INFO - integration_test - Step 93 (contouring until path end)
2025-12-01 10:37:26,078 - DEBUG - integration_test - Syncing planner state at step 93: vehicle_state=[24.06884257  7.46445312  0.63357989  3.00000003 26.34923901]
2025-12-01 10:37:26,079 - INFO - integration_test - Step 93: Re-initialized spline from 26.3492 to 26.0492 (vehicle at (24.07, 7.46), closest path point at (24.32, 6.94), distance=0.583m)
2025-12-01 10:37:26,079 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 10:37:26,079 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:26,093 - DEBUG - integration_test - Step 93: Checking path alignment: vehicle=(24.069, 7.464), path_start=(0.000, 0.000), dist=25.200m
2025-12-01 10:37:26,093 - WARNING - integration_test - Could not update reference path at step 93: x and y must have the same length
2025-12-01 10:37:26,093 - INFO - integration_test - === Calling planner.solve_mpc() at step 93 ===
2025-12-01 10:37:26,096 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:26,097 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:26,097 - INFO - integration_test - Warmstart k=0: x0=24.068842572449952 , y0=7.464453119405823 , psi0=0.6335798886927431 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 10:37:26,097 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:26,098 - INFO - integration_test - Dyn residual k=0: pred=[24.310616551195533, 7.642063206961488, 0.6335798886927431, 3.0, 26.349239008516445], ws=[24.310616551195533, 7.642063206961488, 0.6335798886927431, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 10:37:26,099 - INFO - integration_test - Dyn residual k=1: pred=[24.552390529941114, 7.819673294517154, 0.6335798886927431, 3.0, 29.98401654458851], ws=[24.552390529941114, 7.819673294517154, 0.6335798886927431, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:26,099 - INFO - integration_test - Dyn residual k=2: pred=[24.794164508686695, 7.997283382072819, 0.6335798886927431, 3.0, 29.98401654458851], ws=[24.794164508686695, 7.997283382072819, 0.6335798886927431, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:26,114 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,125 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,140 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,151 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,167 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,178 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,193 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,203 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,218 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,229 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,244 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,255 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,271 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,282 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,297 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,307 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,322 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,333 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,348 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,359 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,375 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,385 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,741 - INFO - integration_test - Step 93: MPC solve successful
2025-12-01 10:37:26,749 - INFO - integration_test - Step 93: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 10:37:26,749 - DEBUG - integration_test - Step 93: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:26,749 - INFO - integration_test - === Applying control at step 93 ===
2025-12-01 10:37:26,749 - INFO - integration_test -   Control dict from planner: {'a': -1.5082329980521842e-13, 'w': -0.0032853397323990546}
2025-12-01 10:37:26,749 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:26,749 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:26,750 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:26,751 - INFO - integration_test - Step 93 completed in 0.672s
2025-12-01 10:37:26,775 - INFO - integration_test - Step 94 (contouring until path end)
2025-12-01 10:37:26,776 - DEBUG - integration_test - Syncing planner state at step 94: vehicle_state=[24.31064572  7.64202349  0.63325135  3.00000003 26.34923901]
2025-12-01 10:37:26,776 - INFO - integration_test - Step 94: Re-initialized spline from 26.3492 to 26.6550 (vehicle at (24.31, 7.64), closest path point at (24.77, 7.27), distance=0.596m)
2025-12-01 10:37:26,777 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 10:37:26,777 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:26,790 - DEBUG - integration_test - Step 94: Checking path alignment: vehicle=(24.311, 7.642), path_start=(0.000, 0.000), dist=25.483m
2025-12-01 10:37:26,791 - WARNING - integration_test - Could not update reference path at step 94: x and y must have the same length
2025-12-01 10:37:26,791 - INFO - integration_test - === Calling planner.solve_mpc() at step 94 ===
2025-12-01 10:37:26,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:26,794 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:26,794 - INFO - integration_test - Warmstart k=0: x0=24.31064572473787 , y0=7.642023490059563 , psi0=0.6332513547195031 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 10:37:26,794 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:26,795 - INFO - integration_test - Dyn residual k=0: pred=[24.55247804138227, 7.819554137065659, 0.6332513547195031, 3.0, 26.95503526452846], ws=[24.55247804138227, 7.819554137065659, 0.6332513547195031, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 10:37:26,796 - INFO - integration_test - Dyn residual k=1: pred=[24.794310358026667, 7.997084784071756, 0.6332513547195031, 3.0, 29.98401654458851], ws=[24.794310358026667, 7.997084784071756, 0.6332513547195031, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:26,797 - INFO - integration_test - Dyn residual k=2: pred=[25.036142674671066, 8.174615431077854, 0.6332513547195031, 3.0, 29.98401654458851], ws=[25.036142674671066, 8.174615431077854, 0.6332513547195031, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:26,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,822 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,837 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,847 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,863 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,874 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,889 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,900 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,915 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,925 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,940 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,950 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,966 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:26,976 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:26,992 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,002 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,017 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,028 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,043 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,053 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,069 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,080 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,415 - INFO - integration_test - Step 94: MPC solve successful
2025-12-01 10:37:27,423 - INFO - integration_test - Step 94: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 10:37:27,423 - DEBUG - integration_test - Step 94: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:27,423 - INFO - integration_test - === Applying control at step 94 ===
2025-12-01 10:37:27,423 - INFO - integration_test -   Control dict from planner: {'a': -2.240040244718731e-13, 'w': -0.01582873186261842}
2025-12-01 10:37:27,423 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:27,423 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:27,424 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:27,425 - INFO - integration_test - Step 94 completed in 0.649s
2025-12-01 10:37:27,446 - INFO - integration_test - Step 95 (contouring until path end)
2025-12-01 10:37:27,448 - DEBUG - integration_test - Syncing planner state at step 95: vehicle_state=[24.55261845  7.81936267  0.63166848  3.00000003 26.95503527]
2025-12-01 10:37:27,448 - INFO - integration_test - Step 95: Re-initialized spline from 26.9550 to 26.6550 (vehicle at (24.55, 7.82), closest path point at (24.77, 7.27), distance=0.594m)
2025-12-01 10:37:27,448 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 10:37:27,449 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:27,462 - DEBUG - integration_test - Step 95: Checking path alignment: vehicle=(24.553, 7.819), path_start=(0.000, 0.000), dist=25.768m
2025-12-01 10:37:27,463 - WARNING - integration_test - Could not update reference path at step 95: x and y must have the same length
2025-12-01 10:37:27,463 - INFO - integration_test - === Calling planner.solve_mpc() at step 95 ===
2025-12-01 10:37:27,465 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:27,466 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:27,467 - INFO - integration_test - Warmstart k=0: x0=24.55261844703846 , y0=7.819362669800747 , psi0=0.6316684815332413 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 10:37:27,467 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:27,467 - INFO - integration_test - Dyn residual k=0: pred=[24.794731469112534, 7.996510304676738, 0.6316684815332413, 3.0, 26.95503526452846], ws=[24.794731469112534, 7.996510304676738, 0.6316684815332412, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 10:37:27,468 - INFO - integration_test - Dyn residual k=1: pred=[25.03684449118661, 8.17365793955273, 0.6316684815332412, 3.0, 29.98401654458851], ws=[25.03684449118661, 8.17365793955273, 0.6316684815332412, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:27,469 - INFO - integration_test - Dyn residual k=2: pred=[25.278957513260686, 8.35080557442872, 0.6316684815332412, 3.0, 29.98401654458851], ws=[25.278957513260686, 8.35080557442872, 0.6316684815332412, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:27,483 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,494 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,509 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,520 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,535 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,546 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,561 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,572 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,598 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,613 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,623 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,638 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,649 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,664 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,675 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,690 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,701 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,716 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,726 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:27,741 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:27,752 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,758 - INFO - integration_test - Step 95: MPC solve successful
2025-12-01 10:37:30,766 - INFO - integration_test - Step 95: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 10:37:30,766 - DEBUG - integration_test - Step 95: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:30,766 - INFO - integration_test - === Applying control at step 95 ===
2025-12-01 10:37:30,767 - INFO - integration_test -   Control dict from planner: {'a': -1.995200768918354e-06, 'w': 0.016163187566157006}
2025-12-01 10:37:30,767 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:30,767 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:30,767 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:30,768 - INFO - integration_test - Step 95 completed in 3.321s
2025-12-01 10:37:30,790 - INFO - integration_test - Step 96 (contouring until path end)
2025-12-01 10:37:30,791 - DEBUG - integration_test - Syncing planner state at step 96: vehicle_state=[24.79458819  7.99670589  0.6332848   2.99999983 26.95503525]
2025-12-01 10:37:30,792 - INFO - integration_test - Step 96: Re-initialized spline from 26.9550 to 27.2608 (vehicle at (24.79, 8.00), closest path point at (25.23, 7.61), distance=0.582m)
2025-12-01 10:37:30,792 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 10:37:30,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:30,805 - DEBUG - integration_test - Step 96: Checking path alignment: vehicle=(24.795, 7.997), path_start=(0.000, 0.000), dist=26.052m
2025-12-01 10:37:30,806 - WARNING - integration_test - Could not update reference path at step 96: x and y must have the same length
2025-12-01 10:37:30,806 - INFO - integration_test - === Calling planner.solve_mpc() at step 96 ===
2025-12-01 10:37:30,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:30,809 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:30,809 - INFO - integration_test - Warmstart k=0: x0=24.794588194576722 , y0=7.996705889284919 , psi0=0.633284800289857 , v0=2.999999830479728 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 10:37:30,809 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:30,810 - INFO - integration_test - Dyn residual k=0: pred=[25.036414559807294, 8.174244614379344, 0.633284800289857, 2.999999830479728, 27.56083150358844], ws=[25.036414559807294, 8.174244614379344, 0.6332848002898572, 2.999999830479728, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -2.1231850410000703], res_norm=2.123e+00
2025-12-01 10:37:30,811 - INFO - integration_test - Dyn residual k=1: pred=[25.278240925037867, 8.351783339473767, 0.6332848002898572, 2.999999830479728, 29.98401652763648], ws=[25.278240925037867, 8.351783339473767, 0.6332848002898572, 2.999999830479728, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999999830479716], res_norm=3.000e-01
2025-12-01 10:37:30,812 - INFO - integration_test - Dyn residual k=2: pred=[25.52006729026844, 8.529322064568191, 0.6332848002898572, 2.999999830479728, 29.98401652763648], ws=[25.52006729026844, 8.529322064568191, 0.6332848002898572, 2.999999830479728, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999999830479716], res_norm=3.000e-01
2025-12-01 10:37:30,826 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:30,837 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,853 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:30,865 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,881 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:30,893 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,909 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:30,921 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,937 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:30,948 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,965 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:30,976 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:30,992 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,002 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,017 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,028 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,054 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,069 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,080 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,095 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,106 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,662 - INFO - integration_test - Step 96: MPC solve successful
2025-12-01 10:37:31,670 - INFO - integration_test - Step 96: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 10:37:31,671 - DEBUG - integration_test - Step 96: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:31,671 - INFO - integration_test - === Applying control at step 96 ===
2025-12-01 10:37:31,671 - INFO - integration_test -   Control dict from planner: {'a': 1.995201173825987e-06, 'w': -0.017398887327355107}
2025-12-01 10:37:31,671 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:31,671 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:31,672 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:31,672 - INFO - integration_test - Step 96 completed in 0.881s
2025-12-01 10:37:31,694 - INFO - integration_test - Step 97 (contouring until path end)
2025-12-01 10:37:31,695 - DEBUG - integration_test - Syncing planner state at step 97: vehicle_state=[25.03656889  8.17403416  0.63154491  3.00000003 27.56083152]
2025-12-01 10:37:31,695 - INFO - integration_test - Step 97: Re-initialized spline from 27.5608 to 27.2608 (vehicle at (25.04, 8.17), closest path point at (25.23, 7.61), distance=0.599m)
2025-12-01 10:37:31,695 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 10:37:31,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:31,709 - DEBUG - integration_test - Step 97: Checking path alignment: vehicle=(25.037, 8.174), path_start=(0.000, 0.000), dist=26.337m
2025-12-01 10:37:31,709 - WARNING - integration_test - Could not update reference path at step 97: x and y must have the same length
2025-12-01 10:37:31,709 - INFO - integration_test - === Calling planner.solve_mpc() at step 97 ===
2025-12-01 10:37:31,711 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:31,713 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:31,713 - INFO - integration_test - Warmstart k=0: x0=25.036568894620462 , y0=8.174034155268199 , psi0=0.6315449115571214 , v0=3.0 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 10:37:31,713 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:31,713 - INFO - integration_test - Dyn residual k=0: pred=[25.278703804975017, 8.351151870891428, 0.6315449115571214, 3.0, 27.560831520540468], ws=[25.278703804975017, 8.351151870891428, 0.6315449115571212, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.123185024048041], res_norm=2.123e+00
2025-12-01 10:37:31,714 - INFO - integration_test - Dyn residual k=1: pred=[25.52083871532957, 8.528269586514657, 0.6315449115571212, 3.0, 29.98401654458851], ws=[25.52083871532957, 8.528269586514657, 0.6315449115571212, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:31,715 - INFO - integration_test - Dyn residual k=2: pred=[25.762973625684126, 8.705387302137886, 0.6315449115571212, 3.0, 29.98401654458851], ws=[25.762973625684126, 8.705387302137886, 0.6315449115571212, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:31,729 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,739 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,755 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,766 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,782 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,793 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,808 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,819 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,834 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,845 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,875 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,891 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,902 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,917 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,928 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,944 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,956 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:31,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:31,987 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,005 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,017 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,348 - INFO - integration_test - Step 97: MPC solve successful
2025-12-01 10:37:32,356 - INFO - integration_test - Step 97: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 10:37:32,356 - DEBUG - integration_test - Step 97: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:32,356 - INFO - integration_test - === Applying control at step 97 ===
2025-12-01 10:37:32,356 - INFO - integration_test -   Control dict from planner: {'a': -8.461726790876659e-11, 'w': 0.219917529254633}
2025-12-01 10:37:32,357 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:32,357 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:32,358 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:32,358 - INFO - integration_test - Step 97 completed in 0.664s
2025-12-01 10:37:32,381 - INFO - integration_test - Step 98 (contouring until path end)
2025-12-01 10:37:32,382 - DEBUG - integration_test - Syncing planner state at step 98: vehicle_state=[25.2767368   8.35379997  0.65353666  3.00000003 27.56083152]
2025-12-01 10:37:32,383 - INFO - integration_test - Step 98: Re-initialized spline from 27.5608 to 27.8666 (vehicle at (25.28, 8.35), closest path point at (25.67, 7.95), distance=0.566m)
2025-12-01 10:37:32,383 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 10:37:32,383 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:32,397 - DEBUG - integration_test - Step 98: Checking path alignment: vehicle=(25.277, 8.354), path_start=(0.000, 0.000), dist=26.621m
2025-12-01 10:37:32,398 - WARNING - integration_test - Could not update reference path at step 98: x and y must have the same length
2025-12-01 10:37:32,398 - INFO - integration_test - === Calling planner.solve_mpc() at step 98 ===
2025-12-01 10:37:32,400 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:32,401 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:32,401 - INFO - integration_test - Warmstart k=0: x0=25.276736804264207 , y0=8.353799974519628 , psi0=0.6535366644825847 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 10:37:32,401 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:32,402 - INFO - integration_test - Dyn residual k=0: pred=[25.51491834917719, 8.536199403419129, 0.6535366644825847, 3.0, 28.166627776552478], ws=[25.51491834917719, 8.536199403419129, 0.6535366644825849, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 10:37:32,403 - INFO - integration_test - Dyn residual k=1: pred=[25.753099894090173, 8.71859883231863, 0.6535366644825849, 3.0, 29.98401654458851], ws=[25.753099894090173, 8.71859883231863, 0.6535366644825849, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:32,404 - INFO - integration_test - Dyn residual k=2: pred=[25.991281439003156, 8.900998261218131, 0.6535366644825849, 3.0, 29.98401654458851], ws=[25.991281439003156, 8.900998261218131, 0.6535366644825849, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:32,418 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,429 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,444 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,455 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,471 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,482 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,498 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,508 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,523 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,534 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,549 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,560 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,576 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,587 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,602 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,613 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,628 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,639 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,654 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,666 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,681 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:32,692 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:32,985 - INFO - integration_test - Step 98: MPC solve successful
2025-12-01 10:37:32,993 - INFO - integration_test - Step 98: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 10:37:32,993 - DEBUG - integration_test - Step 98: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:32,993 - INFO - integration_test - === Applying control at step 98 ===
2025-12-01 10:37:32,993 - INFO - integration_test -   Control dict from planner: {'a': 4.933044917895398e-11, 'w': -0.2936461109043215}
2025-12-01 10:37:32,993 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:32,993 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:32,994 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:32,995 - INFO - integration_test - Step 98 completed in 0.613s
2025-12-01 10:37:33,015 - INFO - integration_test - Step 99 (contouring until path end)
2025-12-01 10:37:33,016 - DEBUG - integration_test - Syncing planner state at step 99: vehicle_state=[25.51756197  8.53267639  0.62417205  3.00000003 28.16662778]
2025-12-01 10:37:33,017 - INFO - integration_test - Step 99: Re-initialized spline from 28.1666 to 27.8666 (vehicle at (25.52, 8.53), closest path point at (25.67, 7.95), distance=0.603m)
2025-12-01 10:37:33,017 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 10:37:33,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:33,031 - DEBUG - integration_test - Step 99: Checking path alignment: vehicle=(25.518, 8.533), path_start=(0.000, 0.000), dist=26.906m
2025-12-01 10:37:33,031 - WARNING - integration_test - Could not update reference path at step 99: x and y must have the same length
2025-12-01 10:37:33,032 - INFO - integration_test - === Calling planner.solve_mpc() at step 99 ===
2025-12-01 10:37:33,034 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:33,035 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:33,035 - INFO - integration_test - Warmstart k=0: x0=25.517561974960355 , y0=8.532676390204132 , psi0=0.6241720533921525 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 10:37:33,035 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:33,036 - INFO - integration_test - Dyn residual k=0: pred=[25.760996156199294, 8.708004081697883, 0.6241720533921525, 3.0, 28.166627776552478], ws=[25.760996156199294, 8.708004081697883, 0.6241720533921526, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 10:37:33,036 - INFO - integration_test - Dyn residual k=1: pred=[26.004430337438233, 8.883331773191633, 0.6241720533921526, 3.0, 29.98401654458851], ws=[26.004430337438233, 8.883331773191633, 0.6241720533921526, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:33,037 - INFO - integration_test - Dyn residual k=2: pred=[26.247864518677172, 9.058659464685384, 0.6241720533921526, 3.0, 29.98401654458851], ws=[26.247864518677172, 9.058659464685384, 0.6241720533921526, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:33,051 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,062 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,078 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,089 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,104 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,115 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,130 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,140 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,156 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,167 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,182 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,192 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,207 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,218 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,233 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,243 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,258 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,269 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,285 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,295 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,310 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,320 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,634 - INFO - integration_test - Step 99: MPC solve successful
2025-12-01 10:37:33,642 - INFO - integration_test - Step 99: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 10:37:33,643 - DEBUG - integration_test - Step 99: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:33,643 - INFO - integration_test - === Applying control at step 99 ===
2025-12-01 10:37:33,643 - INFO - integration_test -   Control dict from planner: {'a': 1.933511717968555e-11, 'w': -0.800000009962135}
2025-12-01 10:37:33,643 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:33,643 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:33,644 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:33,644 - INFO - integration_test - Step 99 completed in 0.628s
2025-12-01 10:37:33,668 - INFO - integration_test - Step 100 (contouring until path end)
2025-12-01 10:37:33,669 - DEBUG - integration_test - Syncing planner state at step 100: vehicle_state=[25.76774595  8.69808495  0.54417205  3.00000003 28.16662778]
2025-12-01 10:37:33,670 - INFO - integration_test - Step 100: Re-initialized spline from 28.1666 to 28.4724 (vehicle at (25.77, 8.70), closest path point at (26.12, 8.30), distance=0.531m)
2025-12-01 10:37:33,670 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 10:37:33,670 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:33,684 - DEBUG - integration_test - Step 100: Checking path alignment: vehicle=(25.768, 8.698), path_start=(0.000, 0.000), dist=27.196m
2025-12-01 10:37:33,684 - WARNING - integration_test - Could not update reference path at step 100: x and y must have the same length
2025-12-01 10:37:33,684 - INFO - integration_test - === Calling planner.solve_mpc() at step 100 ===
2025-12-01 10:37:33,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 10:37:33,687 - INFO - integration_test - Solver solve: module_manager has 5 modules: ['contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 10:37:33,687 - INFO - integration_test - Warmstart k=0: x0=25.76774595042688 , y0=8.69808495411604 , psi0=0.544172052395939 , v0=3.0 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 10:37:33,688 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 10:37:33,688 - INFO - integration_test - Dyn residual k=0: pred=[26.024412816623006, 8.853397927808068, 0.544172052395939, 3.0, 28.772424032564487], ws=[26.024412816623006, 8.853397927808068, 0.5441720523959388, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.911592512024022], res_norm=9.116e-01
2025-12-01 10:37:33,689 - INFO - integration_test - Dyn residual k=1: pred=[26.28107968281913, 9.008710901500097, 0.5441720523959388, 3.0, 29.98401654458851], ws=[26.28107968281913, 9.008710901500097, 0.5441720523959388, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:33,690 - INFO - integration_test - Dyn residual k=2: pred=[26.537746549015253, 9.164023875192125, 0.5441720523959388, 3.0, 29.98401654458851], ws=[26.537746549015253, 9.164023875192125, 0.5441720523959388, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 10:37:33,704 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,715 - INFO - integration_test - Stage 0: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,730 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,741 - INFO - integration_test - Stage 1: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,756 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,767 - INFO - integration_test - Stage 2: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,783 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,794 - INFO - integration_test - Stage 3: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,809 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,819 - INFO - integration_test - Stage 4: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,845 - INFO - integration_test - Stage 5: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,860 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,871 - INFO - integration_test - Stage 6: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,886 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,897 - INFO - integration_test - Stage 7: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,912 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,922 - INFO - integration_test - Stage 8: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,938 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,948 - INFO - integration_test - Stage 9: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:33,964 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 10:37:33,975 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 10:37:34,249 - INFO - integration_test - Step 100: MPC solve successful
2025-12-01 10:37:34,257 - INFO - integration_test - Step 100: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 10:37:34,257 - DEBUG - integration_test - Step 100: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 10:37:34,258 - INFO - integration_test - === Applying control at step 100 ===
2025-12-01 10:37:34,258 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000152982507, 'w': -0.7999998592905451}
2025-12-01 10:37:34,258 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 10:37:34,258 - INFO - integration_test -   Planner output success: True
2025-12-01 10:37:34,259 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 10:37:34,259 - INFO - integration_test - Goal reached at step 100!
2025-12-01 10:37:34,259 - INFO - integration_test - Step 100 completed in 0.591s
2025-12-01 10:37:34,282 - INFO - integration_test - Goal reached at step 100, added 3 extra frames for visualization
2025-12-01 10:37:34,283 - INFO - integration_test - Saving test results...
2025-12-01 10:37:34,284 - INFO - integration_test - Saved 105 vehicle states to test_outputs/20251201_103559_contouring_contouring_contouring_unicycle/vehicle_states.csv
2025-12-01 10:37:34,284 - INFO - integration_test - Saved obstacle summary to test_outputs/20251201_103559_contouring_contouring_contouring_unicycle/obstacle_summary.csv
2025-12-01 10:37:34,284 - INFO - integration_test - Saved state history: 105 vehicle states, 0 obstacles
2025-12-01 10:37:34,284 - INFO - integration_test - Creating animation...
2025-12-01 10:37:34,298 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 10:37:34,306 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 10:37:34,378 - DEBUG - integration_test - Frame 1: Drawing 10 contouring constraint halfspaces
2025-12-01 10:37:34,432 - DEBUG - integration_test - Frame 2: Drawing 10 contouring constraint halfspaces
2025-12-01 10:37:47,059 - INFO - integration_test - Saved animation with 105 frames at 10.00 fps to test_outputs/20251201_103559_contouring_contouring_contouring_unicycle/animation.gif (duration: 10.50s, size: 792937 bytes)
2025-12-01 10:37:47,093 - INFO - integration_test - Animation created successfully
2025-12-01 10:37:47,093 - INFO - integration_test - Test completed successfully
