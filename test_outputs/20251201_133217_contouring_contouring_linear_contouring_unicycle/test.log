2025-12-01 13:32:17,073 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2025-12-01 13:32:17,073 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2025-12-01 13:32:17,073 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2025-12-01 13:32:17,073 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2025-12-01 13:32:17,073 - INFO - integration_test - Creating objective module: contouring
2025-12-01 13:32:17,078 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2025-12-01 13:32:17,078 - INFO - integration_test - Creating 2 constraint module(s): ['contouring', 'linear']
2025-12-01 13:32:17,078 - DEBUG - integration_test - Creating constraint module: contouring
2025-12-01 13:32:17,084 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2025-12-01 13:32:17,084 - DEBUG - integration_test - Creating constraint module: linear
2025-12-01 13:32:17,091 - INFO - integration_test - Constraint module 'linear' created: linearized_constraints
2025-12-01 13:32:17,091 - INFO - integration_test - Created 2 constraint module(s)
2025-12-01 13:32:17,106 - INFO - integration_test - Setting solver on all modules...
2025-12-01 13:32:17,106 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2025-12-01 13:32:17,106 - DEBUG - integration_test -   Set solver on module: linearized_constraints
2025-12-01 13:32:17,106 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2025-12-01 13:32:17,106 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2025-12-01 13:32:17,106 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2025-12-01 13:32:17,106 - DEBUG - integration_test -   Set solver on module: contouring_objective
2025-12-01 13:32:17,107 - WARNING - integration_test - Error shaping obstacles: 'max_obstacles'
2025-12-01 13:32:17,107 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2025-12-01 13:32:17,107 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2025-12-01 13:32:17,107 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2025-12-01 13:32:17,107 - INFO - integration_test - Reference path start: (0.00, 0.00)
2025-12-01 13:32:17,107 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2025-12-01 13:32:17,107 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2025-12-01 13:32:17,108 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2025-12-01 13:32:17,108 - INFO - integration_test - Added spline variable: 0.0000
2025-12-01 13:32:17,108 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2025-12-01 13:32:17,108 - INFO - integration_test - Step 0 (contouring until path end)
2025-12-01 13:32:17,108 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2025-12-01 13:32:17,108 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m)
2025-12-01 13:32:17,108 - DEBUG - integration_test -   Set spline state to 0.0000
2025-12-01 13:32:17,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:17,124 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2025-12-01 13:32:17,124 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2025-12-01 13:32:17,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:17,128 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:17,128 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2025-12-01 13:32:17,128 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:17,129 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.1], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2025-12-01 13:32:17,130 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.2], ws=[0.2, 0.0, 0.0, 1.0, 0.2127494608332952], res=[0.0, 0.0, 0.0, 0.0, -0.0127494608332952], res_norm=1.275e-02
2025-12-01 13:32:17,131 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.31274946083329525], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.3386985848683951], res=[0.0, 0.0, 0.0, 0.0, -0.025949124035099858], res_norm=2.595e-02
2025-12-01 13:32:17,146 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,160 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,190 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,210 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,223 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,242 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,255 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,272 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,285 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,304 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,316 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,332 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,345 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,360 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,372 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,388 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,401 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,418 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,431 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:17,447 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:17,458 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:18,168 - INFO - integration_test - Step 0: MPC solve successful
2025-12-01 13:32:18,198 - INFO - integration_test - Step 0: Computed 10 numeric contouring constraints for visualization (s=0.000)
2025-12-01 13:32:18,198 - DEBUG - integration_test - Step 0: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:18,198 - DEBUG - integration_test - Captured 1 linearized constraint halfspaces at step 0
2025-12-01 13:32:18,198 - INFO - integration_test - === Applying control at step 0 ===
2025-12-01 13:32:18,198 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019992975, 'w': 0.8000000098092016}
2025-12-01 13:32:18,198 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:18,198 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:18,200 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:18,201 - INFO - integration_test - Step 0 completed in 1.093s
2025-12-01 13:32:18,227 - INFO - integration_test - Step 1 (contouring until path end)
2025-12-01 13:32:18,228 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2025-12-01 13:32:18,228 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m)
2025-12-01 13:32:18,228 - DEBUG - integration_test -   Set spline state to 0.1200
2025-12-01 13:32:18,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:18,229 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:18,245 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2025-12-01 13:32:18,246 - WARNING - integration_test - Could not update reference path at step 1: x and y must have the same length
2025-12-01 13:32:18,246 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2025-12-01 13:32:18,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:18,252 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:18,252 - INFO - integration_test - Warmstart k=0: x0=0.10987737537798965 , y0=0.004530845113891825 , psi0=0.08000000098092015 , v0=1.2000000019992976 , spline0=0.12000000019992976 , a0=0.0 , w0=0.0
2025-12-01 13:32:18,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:18,253 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803241875, 0.014120608523503816, 0.08000000098092015, 1.2000000019992976, 0.24000000039985953], ws=[0.22949358032418754, 0.014120608523503818, 0.0800000009809203, 1.2000000019992976, 0.28256625370022814], res=[-2.7755575615628914e-17, -1.734723475976807e-18, -1.5265566588595902e-16, 0.0, -0.04256625330036862], res_norm=4.257e-02
2025-12-01 13:32:18,254 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097852703854, 0.02371037193311583, 0.0800000009809203, 1.2000000019992976, 0.4025662539001579], ws=[0.3491097852703854, 0.02371037193311583, 0.0800000009809203, 1.2000000019992976, 0.46285207129366773], res=[0.0, 0.0, 0.0, 0.0, -0.060285817393509855], res_norm=6.029e-02
2025-12-01 13:32:18,255 - INFO - integration_test - Dyn residual k=2: pred=[0.46872599021658323, 0.03330013534272784, 0.0800000009809203, 1.2000000019992976, 0.5828520714935975], ws=[0.46872599021658323, 0.03330013534272784, 0.0800000009809203, 1.2000000019992976, 0.661737007758873], res=[0.0, 0.0, 0.0, 0.0, -0.07888493626527548], res_norm=7.888e-02
2025-12-01 13:32:18,273 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,289 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,309 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,324 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,344 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,359 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,378 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,393 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,412 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,427 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,448 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,464 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,487 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,507 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,528 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,545 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,567 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,584 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,606 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,620 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,637 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,648 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:18,891 - INFO - integration_test - Step 1: MPC solve successful
2025-12-01 13:32:18,900 - INFO - integration_test - Step 1: Computed 10 numeric contouring constraints for visualization (s=0.120)
2025-12-01 13:32:18,900 - DEBUG - integration_test - Step 1: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:18,900 - INFO - integration_test - === Applying control at step 1 ===
2025-12-01 13:32:18,900 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019981749, 'w': 0.8000000096281901}
2025-12-01 13:32:18,900 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:18,900 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:18,902 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:18,902 - INFO - integration_test - Step 1 completed in 0.675s
2025-12-01 13:32:18,925 - INFO - integration_test - Step 2 (contouring until path end)
2025-12-01 13:32:18,926 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2025-12-01 13:32:18,926 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m)
2025-12-01 13:32:18,926 - DEBUG - integration_test -   Set spline state to 0.2600
2025-12-01 13:32:18,927 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:18,927 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:18,941 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2025-12-01 13:32:18,942 - WARNING - integration_test - Could not update reference path at step 2: x and y must have the same length
2025-12-01 13:32:18,942 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2025-12-01 13:32:18,944 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:18,946 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:18,946 - INFO - integration_test - Warmstart k=0: x0=0.23889212816361993 , y0=0.02022162200667509 , psi0=0.16000000194373917 , v0=1.4000000039974725 , spline0=0.260000000599677 , a0=0.0 , w0=0.0
2025-12-01 13:32:18,946 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:18,947 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039481874949, 0.04252617126500427, 0.16000000194373917, 1.4000000039974725, 0.40000000099942423], ws=[0.3771039481874949, 0.04252617126500427, 0.1600000019437391, 1.4000000039974725, 0.4922268652050952], res=[0.0, 0.0, 8.326672684688674e-17, 0.0, -0.09222686420567094], res_norm=9.223e-02
2025-12-01 13:32:18,947 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157682113698, 0.06483072052333344, 0.1600000019437391, 1.4000000039974725, 0.6322268656048424], ws=[0.5153157682113698, 0.06483072052333344, 0.1600000019437391, 1.4000000039974725, 0.7474945961780451], res=[0.0, 0.0, 0.0, 0.0, -0.11526773057320272], res_norm=1.153e-01
2025-12-01 13:32:18,948 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275882352448, 0.08713526978166261, 0.1600000019437391, 1.4000000039974725, 0.8874945965777924], ws=[0.6535275882352448, 0.08713526978166261, 0.1600000019437391, 1.4000000039974725, 0.9682208638895212], res=[0.0, 0.0, 0.0, 0.0, -0.08072626731172883], res_norm=8.073e-02
2025-12-01 13:32:18,963 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:18,976 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:18,993 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,006 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,023 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,036 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,052 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,065 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,081 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,094 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,110 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,122 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,138 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,150 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,166 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,178 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,195 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,207 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,224 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,236 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,252 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,263 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:19,509 - INFO - integration_test - Step 2: MPC solve successful
2025-12-01 13:32:19,517 - INFO - integration_test - Step 2: Computed 10 numeric contouring constraints for visualization (s=0.260)
2025-12-01 13:32:19,517 - DEBUG - integration_test - Step 2: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:19,517 - INFO - integration_test - === Applying control at step 2 ===
2025-12-01 13:32:19,517 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000179741866, 'w': 0.79999995372707}
2025-12-01 13:32:19,517 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:19,517 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:19,518 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:19,519 - INFO - integration_test - Step 2 completed in 0.593s
2025-12-01 13:32:19,540 - INFO - integration_test - Step 3 (contouring until path end)
2025-12-01 13:32:19,541 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2025-12-01 13:32:19,541 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m)
2025-12-01 13:32:19,541 - DEBUG - integration_test -   Set spline state to 0.4200
2025-12-01 13:32:19,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:19,542 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:19,556 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2025-12-01 13:32:19,557 - WARNING - integration_test - Could not update reference path at step 3: x and y must have the same length
2025-12-01 13:32:19,557 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2025-12-01 13:32:19,560 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:19,561 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:19,561 - INFO - integration_test - Warmstart k=0: x0=0.3858364357191889 , y0=0.05014471664933503 , psi0=0.23999999731644617 , v0=1.600000005794891 , spline0=0.42000000117916614 , a0=0.0 , w0=0.0
2025-12-01 13:32:19,561 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:19,562 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505123604555, 0.0881771365983606, 0.23999999731644617, 1.600000005794891, 0.5800000017586553], ws=[0.5412505123604555, 0.0881771365983606, 0.2399999973164464, 1.600000005794891, 0.7289817606480906], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.14898175888943532], res_norm=1.490e-01
2025-12-01 13:32:19,563 - INFO - integration_test - Dyn residual k=1: pred=[0.696664589001722, 0.12620955654738622, 0.2399999973164464, 1.600000005794891, 0.8889817612275798], ws=[0.696664589001722, 0.12620955654738622, 0.2399999973164464, 1.600000005794891, 1.0077625418055733], res=[0.0, 0.0, 0.0, 0.0, -0.11878078057799357], res_norm=1.188e-01
2025-12-01 13:32:19,564 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786656429886, 0.16424197649641184, 0.2399999973164464, 1.600000005794891, 1.1677625423850624], ws=[0.8520786656429886, 0.16424197649641184, 0.2399999973164464, 1.600000005794891, 1.3126338160192494], res=[0.0, 0.0, 0.0, 0.0, -0.14487127363418706], res_norm=1.449e-01
2025-12-01 13:32:19,580 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,594 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,611 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,624 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,640 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,653 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,669 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,681 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,698 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,710 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,727 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,739 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,755 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,768 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,784 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,797 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,813 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,826 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,842 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,855 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:19,870 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:19,882 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:20,109 - INFO - integration_test - Step 3: MPC solve successful
2025-12-01 13:32:20,117 - INFO - integration_test - Step 3: Computed 10 numeric contouring constraints for visualization (s=0.420)
2025-12-01 13:32:20,118 - DEBUG - integration_test - Step 3: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:20,118 - INFO - integration_test - === Applying control at step 3 ===
2025-12-01 13:32:20,118 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999984468415, 'w': 0.7999992638271416}
2025-12-01 13:32:20,118 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:20,118 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:20,119 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:20,119 - INFO - integration_test - Step 3 completed in 0.579s
2025-12-01 13:32:20,141 - INFO - integration_test - Step 4 (contouring until path end)
2025-12-01 13:32:20,142 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999992 1.80000001 0.6       ]
2025-12-01 13:32:20,142 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.455m)
2025-12-01 13:32:20,142 - DEBUG - integration_test -   Set spline state to 0.6000
2025-12-01 13:32:20,143 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:20,143 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:20,158 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2025-12-01 13:32:20,158 - WARNING - integration_test - Could not update reference path at step 4: x and y must have the same length
2025-12-01 13:32:20,158 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2025-12-01 13:32:20,161 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:20,163 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:20,163 - INFO - integration_test - Warmstart k=0: x0=0.5491354631229122 , y0=0.09724075062385662 , psi0=0.3199999236991603 , v0=1.8000000056395753 , spline0=0.6000000017431237 , a0=0.0 , w0=0.0
2025-12-01 13:32:20,163 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:20,164 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978432333842, 0.15386271867521709, 0.3199999236991603, 1.8000000056395753, 0.7800000023070812], ws=[0.7199978432333842, 0.15386271867521709, 0.3199999236991604, 1.8000000056395753, 0.9928306775386239], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.21283067523154264], res_norm=2.128e-01
2025-12-01 13:32:20,164 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602233438563, 0.21048468672657758, 0.3199999236991604, 1.8000000056395753, 1.1728306781025815], ws=[0.8908602233438563, 0.21048468672657758, 0.3199999236991604, 1.8000000056395753, 1.3619893517921184], res=[0.0, 0.0, 0.0, 0.0, -0.18915867368953698], res_norm=1.892e-01
2025-12-01 13:32:20,165 - INFO - integration_test - Dyn residual k=2: pred=[1.0617226034543283, 0.26710665477793805, 0.3199999236991604, 1.8000000056395753, 1.541989352356076], ws=[1.0617226034543283, 0.26710665477793805, 0.3199999236991604, 1.8000000056395753, 1.7641730752601406], res=[0.0, 0.0, 0.0, 0.0, -0.22218372290406463], res_norm=2.222e-01
2025-12-01 13:32:20,182 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,195 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,211 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,224 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,240 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,253 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,269 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,282 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,298 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,310 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,327 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,339 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,355 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,367 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,383 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,396 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,412 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,424 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,440 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,453 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,468 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,480 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:20,740 - INFO - integration_test - Step 4: MPC solve successful
2025-12-01 13:32:20,749 - INFO - integration_test - Step 4: Computed 10 numeric contouring constraints for visualization (s=0.600)
2025-12-01 13:32:20,749 - DEBUG - integration_test - Step 4: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:20,749 - INFO - integration_test - === Applying control at step 4 ===
2025-12-01 13:32:20,749 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000177678396, 'w': 0.7999999055664885}
2025-12-01 13:32:20,749 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:20,749 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:20,750 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:20,751 - INFO - integration_test - Step 4 completed in 0.609s
2025-12-01 13:32:20,771 - INFO - integration_test - Step 5 (contouring until path end)
2025-12-01 13:32:20,771 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.7268615  0.16427975 0.39999991 2.00000001 0.8       ]
2025-12-01 13:32:20,772 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.375m)
2025-12-01 13:32:20,772 - DEBUG - integration_test -   Set spline state to 0.8000
2025-12-01 13:32:20,773 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:20,773 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:20,788 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2025-12-01 13:32:20,788 - WARNING - integration_test - Could not update reference path at step 5: x and y must have the same length
2025-12-01 13:32:20,788 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2025-12-01 13:32:20,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:20,792 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:20,792 - INFO - integration_test - Warmstart k=0: x0=0.7268614958567908 , y0=0.16427974755483477 , psi0=0.39999991425580916 , v0=2.000000007416359 , spline0=0.8000000024847597 , a0=0.0 , w0=0.0
2025-12-01 13:32:20,793 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:20,794 - INFO - integration_test - Dyn residual k=0: pred=[0.9110737020185312, 0.2421634005102452, 0.39999991425580916, 2.000000007416359, 1.0000000032263956], ws=[0.9110737020185312, 0.2421634005102452, 0.39999991425580905, 2.000000007416359, 1.2100959703462424], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.2100959671198468], res_norm=2.101e-01
2025-12-01 13:32:20,795 - INFO - integration_test - Dyn residual k=1: pred=[1.0952859081802715, 0.32004705346565565, 0.39999991425580905, 2.000000007416359, 1.4100959710878782], ws=[1.0952859081802717, 0.32004705346565565, 0.39999991425580905, 2.000000007416359, 1.6563639895444169], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.24626801845653867], res_norm=2.463e-01
2025-12-01 13:32:20,796 - INFO - integration_test - Dyn residual k=2: pred=[1.279498114342012, 0.3979307064210661, 0.39999991425580905, 2.000000007416359, 1.8563639902860527], ws=[1.279498114342012, 0.3979307064210661, 0.39999991425580905, 2.000000007416359, 2.0825433315573854], res=[0.0, 0.0, 0.0, 0.0, -0.22617934127133266], res_norm=2.262e-01
2025-12-01 13:32:20,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,824 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,853 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,869 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,881 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,897 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,910 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,926 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,938 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,953 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,965 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:20,981 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:20,994 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,009 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,021 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,037 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,049 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,065 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,077 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,093 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,104 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:21,365 - INFO - integration_test - Step 5: MPC solve successful
2025-12-01 13:32:21,374 - INFO - integration_test - Step 5: Computed 10 numeric contouring constraints for visualization (s=0.800)
2025-12-01 13:32:21,374 - DEBUG - integration_test - Step 5: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:21,374 - INFO - integration_test - === Applying control at step 5 ===
2025-12-01 13:32:21,375 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000141303227, 'w': 0.7999995778698707}
2025-12-01 13:32:21,375 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:21,375 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:21,376 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:21,376 - INFO - integration_test - Step 5 completed in 0.605s
2025-12-01 13:32:21,403 - INFO - integration_test - Step 6 (contouring until path end)
2025-12-01 13:32:21,404 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675192 0.25382377 0.47999987 2.20000001 1.02      ]
2025-12-01 13:32:21,404 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.373m)
2025-12-01 13:32:21,404 - DEBUG - integration_test -   Set spline state to 1.0200
2025-12-01 13:32:21,405 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:21,405 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:21,419 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2025-12-01 13:32:21,419 - WARNING - integration_test - Could not update reference path at step 6: x and y must have the same length
2025-12-01 13:32:21,419 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2025-12-01 13:32:21,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:21,423 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:21,423 - INFO - integration_test - Warmstart k=0: x0=0.9167519193951503 , y0=0.2538237671959349 , psi0=0.47999987204279626 , v0=2.200000008829391 , spline0=1.0200000033676988 , a0=0.0 , w0=0.0
2025-12-01 13:32:21,423 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:21,424 - INFO - integration_test - Dyn residual k=0: pred=[1.1118908161891077, 0.3554151612533573, 0.47999987204279626, 2.200000008829391, 1.2400000042506378], ws=[1.1118908161891077, 0.3554151612533573, 0.4799998720427965, 2.200000008829391, 1.5284219580603253], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.2884219538096875], res_norm=2.884e-01
2025-12-01 13:32:21,425 - INFO - integration_test - Dyn residual k=1: pred=[1.307029712983065, 0.45700655531077977, 0.4799998720427965, 2.200000008829391, 1.7484219589432644], ws=[1.307029712983065, 0.45700655531077977, 0.4799998720427965, 2.200000008829391, 2.021381427575898], res=[0.0, 0.0, 0.0, 0.0, -0.27295946863263376], res_norm=2.730e-01
2025-12-01 13:32:21,425 - INFO - integration_test - Dyn residual k=2: pred=[1.5021686097770224, 0.5585979493682022, 0.4799998720427965, 2.200000008829391, 2.2413814284588374], ws=[1.5021686097770224, 0.5585979493682022, 0.4799998720427965, 2.200000008829391, 2.5576012419145484], res=[0.0, 0.0, 0.0, 0.0, -0.31621981345571104], res_norm=3.162e-01
2025-12-01 13:32:21,440 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,453 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,469 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,481 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,497 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,510 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,526 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,538 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,554 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,567 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,583 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,596 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,612 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,624 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,640 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,652 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,668 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,681 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,698 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,710 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:21,726 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:21,737 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:22,007 - INFO - integration_test - Step 6: MPC solve successful
2025-12-01 13:32:22,015 - INFO - integration_test - Step 6: Computed 10 numeric contouring constraints for visualization (s=1.020)
2025-12-01 13:32:22,015 - DEBUG - integration_test - Step 6: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:22,016 - INFO - integration_test - === Applying control at step 6 ===
2025-12-01 13:32:22,016 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000116106187, 'w': 0.7999993007939532}
2025-12-01 13:32:22,016 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:22,016 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:22,017 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:22,017 - INFO - integration_test - Step 6 completed in 0.614s
2025-12-01 13:32:22,039 - INFO - integration_test - Step 7 (contouring until path end)
2025-12-01 13:32:22,039 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.1162309  0.36819137 0.5599998  2.40000001 1.26      ]
2025-12-01 13:32:22,040 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.475m)
2025-12-01 13:32:22,040 - DEBUG - integration_test -   Set spline state to 1.2600
2025-12-01 13:32:22,040 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:22,041 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:22,055 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2025-12-01 13:32:22,055 - WARNING - integration_test - Could not update reference path at step 7: x and y must have the same length
2025-12-01 13:32:22,055 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2025-12-01 13:32:22,058 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:22,059 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:22,059 - INFO - integration_test - Warmstart k=0: x0=1.1162308981542033 , y0=0.3681913739403625 , psi0=0.5599998021221916 , v0=2.400000009990453 , spline0=1.260000004366744 , a0=0.0 , w0=0.0
2025-12-01 13:32:22,059 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:22,060 - INFO - integration_test - Dyn residual k=0: pred=[1.319572150870256, 0.49567602173533465, 0.5599998021221916, 2.400000009990453, 1.5000000053657894], ws=[1.319572150870256, 0.49567602173533465, 0.5599998021221917, 2.400000009990453, 1.873863081545491], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.3738630761797017], res_norm=3.739e-01
2025-12-01 13:32:22,060 - INFO - integration_test - Dyn residual k=1: pred=[1.5229134035863088, 0.6231606695303068, 0.5599998021221917, 2.400000009990453, 2.1138630825445364], ws=[1.5229134035863088, 0.6231606695303068, 0.5599998021221917, 2.400000009990453, 2.48138593526014], res=[0.0, 0.0, 0.0, 0.0, -0.3675228527156036], res_norm=3.675e-01
2025-12-01 13:32:22,061 - INFO - integration_test - Dyn residual k=2: pred=[1.7262546563023615, 0.750645317325279, 0.5599998021221917, 2.400000009990453, 2.7213859362591855], ws=[1.7262546563023615, 0.750645317325279, 0.5599998021221917, 2.400000009990453, 3.082301550032899], res=[0.0, 0.0, 0.0, 0.0, -0.3609156137737135], res_norm=3.609e-01
2025-12-01 13:32:22,076 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,089 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,106 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,118 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,134 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,146 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,162 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,174 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,190 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,203 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,220 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,232 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,247 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,260 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,288 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,303 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,315 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,344 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,361 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,372 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:22,658 - INFO - integration_test - Step 7: MPC solve successful
2025-12-01 13:32:22,666 - INFO - integration_test - Step 7: Computed 10 numeric contouring constraints for visualization (s=1.260)
2025-12-01 13:32:22,667 - DEBUG - integration_test - Step 7: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:22,667 - INFO - integration_test - === Applying control at step 7 ===
2025-12-01 13:32:22,667 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019291974, 'w': 0.7999999260504781}
2025-12-01 13:32:22,667 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:22,667 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:22,668 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:22,668 - INFO - integration_test - Step 7 completed in 0.629s
2025-12-01 13:32:22,692 - INFO - integration_test - Step 8 (contouring until path end)
2025-12-01 13:32:22,692 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243455 0.50942433 0.63999979 2.60000001 1.52000001]
2025-12-01 13:32:22,693 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.429m)
2025-12-01 13:32:22,693 - DEBUG - integration_test -   Set spline state to 1.5200
2025-12-01 13:32:22,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:22,693 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:22,749 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2025-12-01 13:32:22,749 - WARNING - integration_test - Could not update reference path at step 8: x and y must have the same length
2025-12-01 13:32:22,749 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2025-12-01 13:32:22,752 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:22,753 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:22,753 - INFO - integration_test - Warmstart k=0: x0=1.322434550644065 , y0=0.5094243289327752 , psi0=0.6399997947272393 , v0=2.6000000119196502 , spline0=1.520000005558709 , a0=0.0 , w0=0.0
2025-12-01 13:32:22,753 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:22,754 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794805229155, 0.664695101590243, 0.6399997947272393, 2.6000000119196502, 1.780000006750674], ws=[1.5309794805229155, 0.664695101590243, 0.6399997947272391, 2.6000000119196502, 2.1722695152474296], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.39226950849675557], res_norm=3.923e-01
2025-12-01 13:32:22,755 - INFO - integration_test - Dyn residual k=1: pred=[1.7395244104017664, 0.8199658742477107, 0.6399997947272391, 2.6000000119196502, 2.4322695164393946], ws=[1.7395244104017664, 0.8199658742477108, 0.6399997947272391, 2.6000000119196502, 2.8208115114155285], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.38854199497613395], res_norm=3.885e-01
2025-12-01 13:32:22,755 - INFO - integration_test - Dyn residual k=2: pred=[1.9480693402806173, 0.9752366469051785, 0.6399997947272391, 2.6000000119196502, 3.0808115126074935], ws=[1.9480693402806173, 0.9752366469051786, 0.6399997947272391, 2.6000000119196502, 3.465637727262588], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.3848262146550945], res_norm=3.848e-01
2025-12-01 13:32:22,770 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,782 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,798 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,811 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,827 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,839 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,854 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,866 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,882 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,894 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,922 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,938 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,950 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,965 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:22,977 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:22,993 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,006 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,022 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,034 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,049 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,060 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:23,363 - INFO - integration_test - Step 8: MPC solve successful
2025-12-01 13:32:23,371 - INFO - integration_test - Step 8: Computed 10 numeric contouring constraints for visualization (s=1.520)
2025-12-01 13:32:23,372 - DEBUG - integration_test - Step 8: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:23,372 - INFO - integration_test - === Applying control at step 8 ===
2025-12-01 13:32:23,372 - INFO - integration_test -   Control dict from planner: {'a': 1.999999749384077, 'w': 0.7999638312710906}
2025-12-01 13:32:23,372 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:23,372 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:23,373 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:23,373 - INFO - integration_test - Step 8 completed in 0.681s
2025-12-01 13:32:23,393 - INFO - integration_test - Step 9 (contouring until path end)
2025-12-01 13:32:23,394 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223974 0.6792564  0.71999618 2.79999999 1.8       ]
2025-12-01 13:32:23,394 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.464m)
2025-12-01 13:32:23,394 - DEBUG - integration_test -   Set spline state to 1.8000
2025-12-01 13:32:23,395 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:23,395 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:23,410 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2025-12-01 13:32:23,410 - WARNING - integration_test - Could not update reference path at step 9: x and y must have the same length
2025-12-01 13:32:23,410 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2025-12-01 13:32:23,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:23,414 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:23,415 - INFO - integration_test - Warmstart k=0: x0=1.5322397410248572 , y0=0.6792564039450391 , psi0=0.7199961778543484 , v0=2.799999986858058 , spline0=1.8000000042445148 , a0=0.0 , w0=0.0
2025-12-01 13:32:23,415 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:23,416 - INFO - integration_test - Dyn residual k=0: pred=[1.74274604986874, 0.8638833066460676, 0.7199961778543484, 2.799999986858058, 2.0800000029303205], ws=[1.74274604986874, 0.8638833066460676, 0.7199961778543482, 2.799999986858058, 2.5726637891440296], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.4926637862137091], res_norm=4.927e-01
2025-12-01 13:32:23,416 - INFO - integration_test - Dyn residual k=1: pred=[1.9532523587126227, 1.0485102093470962, 0.7199961778543482, 2.799999986858058, 2.8526637878298353], ws=[1.9532523587126227, 1.0485102093470962, 0.7199961778543482, 2.799999986858058, 3.3533832574964237], res=[0.0, 0.0, 0.0, 0.0, -0.5007194696665884], res_norm=5.007e-01
2025-12-01 13:32:23,417 - INFO - integration_test - Dyn residual k=2: pred=[2.1637586675565057, 1.2331371120481247, 0.7199961778543482, 2.799999986858058, 3.6333832561822295], ws=[2.1637586675565057, 1.2331371120481247, 0.7199961778543482, 2.799999986858058, 4.144520037086172], res=[0.0, 0.0, 0.0, 0.0, -0.5111367809039429], res_norm=5.111e-01
2025-12-01 13:32:23,432 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,445 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,461 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,473 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,491 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,503 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,519 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,531 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,547 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,559 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,589 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,605 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,617 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,634 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,646 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,669 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,680 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,698 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,710 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:23,726 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:23,737 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:24,093 - INFO - integration_test - Step 9: MPC solve successful
2025-12-01 13:32:24,103 - INFO - integration_test - Step 9: Computed 10 numeric contouring constraints for visualization (s=1.800)
2025-12-01 13:32:24,103 - DEBUG - integration_test - Step 9: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:24,103 - INFO - integration_test - === Applying control at step 9 ===
2025-12-01 13:32:24,103 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018120696, 'w': 0.7999996225438922}
2025-12-01 13:32:24,103 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:24,103 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:24,105 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:24,105 - INFO - integration_test - Step 9 completed in 0.712s
2025-12-01 13:32:24,131 - INFO - integration_test - Step 10 (contouring until path end)
2025-12-01 13:32:24,131 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229507 0.87908616 0.79999614 2.99999999 2.1       ]
2025-12-01 13:32:24,132 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.397m)
2025-12-01 13:32:24,132 - DEBUG - integration_test -   Set spline state to 2.1000
2025-12-01 13:32:24,132 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:24,132 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:24,147 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2025-12-01 13:32:24,148 - WARNING - integration_test - Could not update reference path at step 10: x and y must have the same length
2025-12-01 13:32:24,148 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2025-12-01 13:32:24,151 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:24,153 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:24,153 - INFO - integration_test - Warmstart k=0: x0=1.7422950726887358 , y0=0.8790861649079658 , psi0=0.7999961401087377 , v0=2.999999988670128 , spline0=2.1000000031115276 , a0=0.0 , w0=0.0
2025-12-01 13:32:24,153 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:24,155 - INFO - integration_test - Dyn residual k=0: pred=[1.9513079153769177, 1.0942921845998252, 0.7999961401087377, 2.999999988670128, 2.4000000019785404], ws=[1.9513079153769177, 1.0942921845998252, 0.7999961401087377, 2.999999988670128, 3.000185596680291], res=[0.0, 0.0, 0.0, 0.0, -0.6001855947017507], res_norm=6.002e-01
2025-12-01 13:32:24,156 - INFO - integration_test - Dyn residual k=1: pred=[2.1603207580650996, 1.3094982042916847, 0.7999961401087377, 2.999999988670128, 3.300185595547304], ws=[2.1603207580650996, 1.3094982042916847, 0.7999961401087377, 2.999999988670128, 3.8602040695638227], res=[0.0, 0.0, 0.0, 0.0, -0.5600184740165188], res_norm=5.600e-01
2025-12-01 13:32:24,156 - INFO - integration_test - Dyn residual k=2: pred=[2.3693336007532815, 1.5247042239835442, 0.7999961401087377, 2.999999988670128, 4.1602040684308355], ws=[2.3693336007532815, 1.5247042239835442, 0.7999961401087377, 2.999999988670128, 4.739620290195674], res=[0.0, 0.0, 0.0, 0.0, -0.5794162217648386], res_norm=5.794e-01
2025-12-01 13:32:24,174 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,189 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,208 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,222 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,241 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,255 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,274 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,289 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,310 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,325 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,343 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,357 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,394 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,417 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,442 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,476 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,503 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,534 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,557 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:24,590 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:24,611 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:25,075 - INFO - integration_test - Step 10: MPC solve successful
2025-12-01 13:32:25,085 - INFO - integration_test - Step 10: Computed 10 numeric contouring constraints for visualization (s=2.100)
2025-12-01 13:32:25,086 - DEBUG - integration_test - Step 10: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:25,086 - INFO - integration_test - === Applying control at step 10 ===
2025-12-01 13:32:25,086 - INFO - integration_test -   Control dict from planner: {'a': 4.127154208730202e-07, 'w': 0.7999991835810019}
2025-12-01 13:32:25,086 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:25,086 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:25,088 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:25,089 - INFO - integration_test - Step 10 completed in 0.958s
2025-12-01 13:32:25,116 - INFO - integration_test - Step 11 (contouring until path end)
2025-12-01 13:32:25,116 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.9424814  1.10241876 0.87999606 3.00000003 2.40000001]
2025-12-01 13:32:25,117 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.398m)
2025-12-01 13:32:25,117 - DEBUG - integration_test -   Set spline state to 2.4000
2025-12-01 13:32:25,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:25,118 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:25,134 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2025-12-01 13:32:25,135 - WARNING - integration_test - Could not update reference path at step 11: x and y must have the same length
2025-12-01 13:32:25,135 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2025-12-01 13:32:25,139 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:25,141 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:25,141 - INFO - integration_test - Warmstart k=0: x0=1.942481402401421 , y0=1.1024187573571884 , psi0=0.8799960584668378 , v0=3.0 , spline0=2.4000000061056945 , a0=0.0 , w0=0.0
2025-12-01 13:32:25,141 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:25,142 - INFO - integration_test - Dyn residual k=0: pred=[2.1336276570273656, 1.3336396676193738, 0.8799960584668378, 3.0, 2.700000006105695], ws=[2.1336276570273656, 1.3336396676193738, 0.8799960584668378, 3.0, 3.3331560210421167], res=[0.0, 0.0, 0.0, 0.0, -0.6331560149364219], res_norm=6.332e-01
2025-12-01 13:32:25,143 - INFO - integration_test - Dyn residual k=1: pred=[2.32477391165331, 1.5648605778815592, 0.8799960584668378, 3.0, 3.633156021042117], ws=[2.32477391165331, 1.5648605778815592, 0.8799960584668378, 3.0, 4.291968806801683], res=[0.0, 0.0, 0.0, 0.0, -0.658812785759566], res_norm=6.588e-01
2025-12-01 13:32:25,144 - INFO - integration_test - Dyn residual k=2: pred=[2.5159201662792547, 1.7960814881437446, 0.8799960584668378, 3.0, 4.591968806801683], ws=[2.5159201662792547, 1.7960814881437446, 0.8799960584668378, 3.0, 5.217337779533619], res=[0.0, 0.0, 0.0, 0.0, -0.6253689727319358], res_norm=6.254e-01
2025-12-01 13:32:25,161 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,177 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,196 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,210 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,231 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,247 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,266 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,282 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,304 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,319 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,341 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,355 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,390 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,407 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,421 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,441 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,455 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,490 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:25,509 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:25,522 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:25,867 - INFO - integration_test - Step 11: MPC solve successful
2025-12-01 13:32:25,882 - INFO - integration_test - Step 11: Computed 10 numeric contouring constraints for visualization (s=2.400)
2025-12-01 13:32:25,883 - DEBUG - integration_test - Step 11: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:25,883 - INFO - integration_test - === Applying control at step 11 ===
2025-12-01 13:32:25,883 - INFO - integration_test -   Control dict from planner: {'a': 3.859792802391754e-10, 'w': -0.4988855150357008}
2025-12-01 13:32:25,883 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:25,883 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:25,885 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:25,886 - INFO - integration_test - Step 11 completed in 0.770s
2025-12-01 13:32:25,933 - INFO - integration_test - Step 12 (contouring until path end)
2025-12-01 13:32:25,934 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13931482 1.32877675 0.83010751 3.00000003 2.70000001]
2025-12-01 13:32:25,935 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.278m)
2025-12-01 13:32:25,935 - DEBUG - integration_test -   Set spline state to 2.7000
2025-12-01 13:32:25,936 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:25,936 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:25,965 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.139, 1.329), path_start=(0.000, 0.000), dist=2.518m
2025-12-01 13:32:25,966 - WARNING - integration_test - Could not update reference path at step 12: x and y must have the same length
2025-12-01 13:32:25,966 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2025-12-01 13:32:25,973 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:25,975 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:25,975 - INFO - integration_test - Warmstart k=0: x0=2.139314821667714 , y0=1.328776753209092 , psi0=0.8301075069632677 , v0=3.0 , spline0=2.7000000091037215 , a0=0.0 , w0=0.0
2025-12-01 13:32:25,975 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:25,977 - INFO - integration_test - Dyn residual k=0: pred=[2.3417537486908913, 1.5501779294157796, 0.8301075069632677, 3.0, 3.0000000091037213], ws=[2.3417537486908913, 1.5501779294157796, 0.8301075069632677, 3.0, 3.74172121257724], res=[0.0, 0.0, 0.0, 0.0, -0.7417212034735186], res_norm=7.417e-01
2025-12-01 13:32:25,979 - INFO - integration_test - Dyn residual k=1: pred=[2.5441926757140685, 1.7715791056224672, 0.8301075069632677, 3.0, 4.04172121257724], ws=[2.5441926757140685, 1.7715791056224672, 0.8301075069632677, 3.0, 4.75708065114121], res=[0.0, 0.0, 0.0, 0.0, -0.7153594385639694], res_norm=7.154e-01
2025-12-01 13:32:25,980 - INFO - integration_test - Dyn residual k=2: pred=[2.7466316027372457, 1.9929802818291549, 0.8301075069632677, 3.0, 5.057080651141209], ws=[2.7466316027372457, 1.9929802818291549, 0.8301075069632677, 3.0, 5.8102675675908255], res=[0.0, 0.0, 0.0, 0.0, -0.7531869164496161], res_norm=7.532e-01
2025-12-01 13:32:26,008 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,028 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,053 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,081 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,110 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,130 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,152 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,168 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,201 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,231 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,257 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,274 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,294 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,309 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,327 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,339 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,357 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,370 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,388 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,400 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,417 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,428 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:26,708 - INFO - integration_test - Step 12: MPC solve successful
2025-12-01 13:32:26,716 - INFO - integration_test - Step 12: Computed 10 numeric contouring constraints for visualization (s=2.700)
2025-12-01 13:32:26,716 - DEBUG - integration_test - Step 12: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:26,716 - INFO - integration_test - === Applying control at step 12 ===
2025-12-01 13:32:26,716 - INFO - integration_test -   Control dict from planner: {'a': 1.3010299646443572e-10, 'w': -0.7149328914471736}
2025-12-01 13:32:26,716 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:26,716 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:26,717 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:26,718 - INFO - integration_test - Step 12 completed in 0.784s
2025-12-01 13:32:26,740 - INFO - integration_test - Step 13 (contouring until path end)
2025-12-01 13:32:26,740 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.34949232 1.54275594 0.75861422 3.00000003 3.00000001]
2025-12-01 13:32:26,741 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.330m)
2025-12-01 13:32:26,741 - DEBUG - integration_test -   Set spline state to 3.0000
2025-12-01 13:32:26,741 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:26,742 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:26,755 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.349, 1.543), path_start=(0.000, 0.000), dist=2.811m
2025-12-01 13:32:26,756 - WARNING - integration_test - Could not update reference path at step 13: x and y must have the same length
2025-12-01 13:32:26,756 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2025-12-01 13:32:26,759 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:26,760 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:26,760 - INFO - integration_test - Warmstart k=0: x0=2.349492321425903 , y0=1.5427559435033844 , psi0=0.7586142178185504 , v0=3.0 , spline0=3.0000000121030492 , a0=0.0 , w0=0.0
2025-12-01 13:32:26,761 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:26,761 - INFO - integration_test - Dyn residual k=0: pred=[2.567229324280035, 1.7491308392346716, 0.7586142178185504, 3.0, 3.300000012103049], ws=[2.567229324280035, 1.7491308392346716, 0.7586142178185504, 3.0, 4.073841086756103], res=[0.0, 0.0, 0.0, 0.0, -0.7738410746530535], res_norm=7.738e-01
2025-12-01 13:32:26,762 - INFO - integration_test - Dyn residual k=1: pred=[2.784966327134167, 1.9555057349659588, 0.7586142178185504, 3.0, 4.373841086756102], ws=[2.784966327134167, 1.9555057349659588, 0.7586142178185504, 3.0, 5.186917148185377], res=[0.0, 0.0, 0.0, 0.0, -0.8130760614292747], res_norm=8.131e-01
2025-12-01 13:32:26,763 - INFO - integration_test - Dyn residual k=2: pred=[3.0027033299882993, 2.161880630697246, 0.7586142178185504, 3.0, 5.486917148185377], ws=[3.0027033299882993, 2.161880630697246, 0.7586142178185504, 3.0, 6.28215725807242], res=[0.0, 0.0, 0.0, 0.0, -0.7952401098870432], res_norm=7.952e-01
2025-12-01 13:32:26,778 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,790 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,808 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,820 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,836 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,854 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,874 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,890 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,910 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,923 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,939 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,951 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,967 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:26,979 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:26,994 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,006 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,022 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,034 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,062 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,077 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,088 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:27,326 - INFO - integration_test - Step 13: MPC solve successful
2025-12-01 13:32:27,334 - INFO - integration_test - Step 13: Computed 10 numeric contouring constraints for visualization (s=3.000)
2025-12-01 13:32:27,334 - DEBUG - integration_test - Step 13: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:27,334 - INFO - integration_test - === Applying control at step 13 ===
2025-12-01 13:32:27,334 - INFO - integration_test -   Control dict from planner: {'a': 4.1953081698149086e-11, 'w': -0.4530062102834224}
2025-12-01 13:32:27,334 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:27,334 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:27,335 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:27,336 - INFO - integration_test - Step 13 completed in 0.596s
2025-12-01 13:32:27,358 - INFO - integration_test - Step 14 (contouring until path end)
2025-12-01 13:32:27,358 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.57182852 1.7441293  0.7133136  3.00000003 3.30000002]
2025-12-01 13:32:27,359 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.197m)
2025-12-01 13:32:27,359 - DEBUG - integration_test -   Set spline state to 3.3000
2025-12-01 13:32:27,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:27,359 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:27,374 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.572, 1.744), path_start=(0.000, 0.000), dist=3.107m
2025-12-01 13:32:27,374 - WARNING - integration_test - Could not update reference path at step 14: x and y must have the same length
2025-12-01 13:32:27,374 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2025-12-01 13:32:27,377 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:27,379 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:27,379 - INFO - integration_test - Warmstart k=0: x0=2.5718285192427035 , y0=1.744129296156502 , psi0=0.7133135967902082 , v0=3.0 , spline0=3.3000000151027966 , a0=0.0 , w0=0.0
2025-12-01 13:32:27,379 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:27,380 - INFO - integration_test - Dyn residual k=0: pred=[2.798687859926032, 1.9404322241650407, 0.7133135967902082, 3.0, 3.600000015102797], ws=[2.798687859926032, 1.9404322241650407, 0.7133135967902082, 3.0, 4.483692214334473], res=[0.0, 0.0, 0.0, 0.0, -0.8836921992316764], res_norm=8.837e-01
2025-12-01 13:32:27,381 - INFO - integration_test - Dyn residual k=1: pred=[3.02554720060936, 2.1367351521735793, 0.7133135967902082, 3.0, 4.783692214334473], ws=[3.02554720060936, 2.1367351521735793, 0.7133135967902082, 3.0, 5.653879106077541], res=[0.0, 0.0, 0.0, 0.0, -0.8701868917430682], res_norm=8.702e-01
2025-12-01 13:32:27,382 - INFO - integration_test - Dyn residual k=2: pred=[3.2524065412926886, 2.333038080182118, 0.7133135967902082, 3.0, 5.953879106077541], ws=[3.2524065412926886, 2.333038080182118, 0.7133135967902082, 3.0, 6.810014665177365], res=[0.0, 0.0, 0.0, 0.0, -0.8561355590998243], res_norm=8.561e-01
2025-12-01 13:32:27,397 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,410 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,426 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,438 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,454 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,466 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,482 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,496 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,513 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,526 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,542 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,555 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,570 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,582 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,598 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,610 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,626 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,638 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,653 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,665 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:27,681 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:27,691 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:27,955 - INFO - integration_test - Step 14: MPC solve successful
2025-12-01 13:32:27,964 - INFO - integration_test - Step 14: Computed 10 numeric contouring constraints for visualization (s=3.300)
2025-12-01 13:32:27,964 - DEBUG - integration_test - Step 14: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:27,964 - INFO - integration_test - === Applying control at step 14 ===
2025-12-01 13:32:27,964 - INFO - integration_test -   Control dict from planner: {'a': 9.016324904296484e-12, 'w': -0.4146684034370673}
2025-12-01 13:32:27,964 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:27,964 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:27,965 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:27,966 - INFO - integration_test - Step 14 completed in 0.608s
2025-12-01 13:32:27,988 - INFO - integration_test - Step 15 (contouring until path end)
2025-12-01 13:32:27,988 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.8026923  1.93567308 0.67184676 3.00000003 3.60000002]
2025-12-01 13:32:27,988 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.319m)
2025-12-01 13:32:27,988 - DEBUG - integration_test -   Set spline state to 3.6000
2025-12-01 13:32:27,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:27,989 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:28,004 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.803, 1.936), path_start=(0.000, 0.000), dist=3.406m
2025-12-01 13:32:28,004 - WARNING - integration_test - Could not update reference path at step 15: x and y must have the same length
2025-12-01 13:32:28,004 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2025-12-01 13:32:28,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:28,008 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:28,009 - INFO - integration_test - Warmstart k=0: x0=2.802692301918032 , y0=1.9356730779167495 , psi0=0.6718467564465015 , v0=3.0 , spline0=3.600000018102634 , a0=0.0 , w0=0.0
2025-12-01 13:32:28,009 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:28,010 - INFO - integration_test - Dyn residual k=0: pred=[3.037494357930866, 2.1224028144135, 0.6718467564465015, 3.0, 3.9000000181026344], ws=[3.037494357930866, 2.1224028144135, 0.6718467564465014, 3.0, 4.8145977142968555], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.914597696194221], res_norm=9.146e-01
2025-12-01 13:32:28,010 - INFO - integration_test - Dyn residual k=1: pred=[3.2722964139437, 2.3091325509102503, 0.6718467564465014, 3.0, 5.114597714296855], ws=[3.2722964139437, 2.3091325509102503, 0.6718467564465014, 3.0, 6.016116681808616], res=[0.0, 0.0, 0.0, 0.0, -0.9015189675117607], res_norm=9.015e-01
2025-12-01 13:32:28,011 - INFO - integration_test - Dyn residual k=2: pred=[3.507098469956534, 2.4958622874070007, 0.6718467564465014, 3.0, 6.316116681808616], ws=[3.507098469956534, 2.4958622874070007, 0.6718467564465014, 3.0, 7.275958715981413], res=[0.0, 0.0, 0.0, 0.0, -0.9598420341727971], res_norm=9.598e-01
2025-12-01 13:32:28,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,040 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,056 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,068 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,084 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,097 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,125 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,141 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,153 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,168 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,181 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,197 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,209 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,225 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,237 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,252 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,264 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,280 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,292 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,307 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,318 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:28,552 - INFO - integration_test - Step 15: MPC solve successful
2025-12-01 13:32:28,561 - INFO - integration_test - Step 15: Computed 10 numeric contouring constraints for visualization (s=3.600)
2025-12-01 13:32:28,561 - DEBUG - integration_test - Step 15: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:28,561 - INFO - integration_test - === Applying control at step 15 ===
2025-12-01 13:32:28,561 - INFO - integration_test -   Control dict from planner: {'a': -1.450594436094695e-11, 'w': -0.3439500267882761}
2025-12-01 13:32:28,561 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:28,561 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:28,562 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:28,563 - INFO - integration_test - Step 15 completed in 0.575s
2025-12-01 13:32:28,591 - INFO - integration_test - Step 16 (contouring until path end)
2025-12-01 13:32:28,591 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.04065904 2.11832839 0.63745175 3.00000003 3.90000002]
2025-12-01 13:32:28,592 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.161m)
2025-12-01 13:32:28,592 - DEBUG - integration_test -   Set spline state to 3.9000
2025-12-01 13:32:28,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:28,592 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:28,607 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.041, 2.118), path_start=(0.000, 0.000), dist=3.706m
2025-12-01 13:32:28,608 - WARNING - integration_test - Could not update reference path at step 16: x and y must have the same length
2025-12-01 13:32:28,608 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2025-12-01 13:32:28,611 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:28,612 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:28,612 - INFO - integration_test - Warmstart k=0: x0=3.0406590357137944 , y0=2.118328390519553 , psi0=0.6374517537676739 , v0=3.0 , spline0=3.9000000211023265 , a0=0.0 , w0=0.0
2025-12-01 13:32:28,612 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:28,613 - INFO - integration_test - Dyn residual k=0: pred=[3.281743521627032, 2.296873260655746, 0.6374517537676739, 3.0, 4.200000021102326], ws=[3.281743521627032, 2.2968732606557465, 0.637451753767674, 3.0, 5.2258757885140135], res=[0.0, -4.440892098500626e-16, -1.1102230246251565e-16, 0.0, -1.0258757674116872], res_norm=1.026e+00
2025-12-01 13:32:28,614 - INFO - integration_test - Dyn residual k=1: pred=[3.5228280075402694, 2.4754181307919394, 0.637451753767674, 3.0, 5.525875788514013], ws=[3.5228280075402694, 2.4754181307919394, 0.637451753767674, 3.0, 6.55203065504611], res=[0.0, 0.0, 0.0, 0.0, -1.0261548665320968], res_norm=1.026e+00
2025-12-01 13:32:28,615 - INFO - integration_test - Dyn residual k=2: pred=[3.763912493453507, 2.6539630009281323, 0.637451753767674, 3.0, 6.85203065504611], ws=[3.763912493453507, 2.6539630009281323, 0.637451753767674, 3.0, 7.879768481483017], res=[0.0, 0.0, 0.0, 0.0, -1.0277378264369075], res_norm=1.028e+00
2025-12-01 13:32:28,630 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,643 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,659 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,671 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,687 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,700 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,716 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,729 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,745 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,757 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,773 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,785 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,802 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,814 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,831 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,843 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,858 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,870 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,887 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,900 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:28,916 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:28,927 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:29,176 - INFO - integration_test - Step 16: MPC solve successful
2025-12-01 13:32:29,185 - INFO - integration_test - Step 16: Computed 10 numeric contouring constraints for visualization (s=3.900)
2025-12-01 13:32:29,185 - DEBUG - integration_test - Step 16: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:29,185 - INFO - integration_test - === Applying control at step 16 ===
2025-12-01 13:32:29,186 - INFO - integration_test -   Control dict from planner: {'a': 1.8480670194472313e-11, 'w': -0.36341776104182455}
2025-12-01 13:32:29,186 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:29,186 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:29,187 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:29,187 - INFO - integration_test - Step 16 completed in 0.596s
2025-12-01 13:32:29,209 - INFO - integration_test - Step 17 (contouring until path end)
2025-12-01 13:32:29,209 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.28493442 2.29245373 0.60110998 3.00000003 4.20000002]
2025-12-01 13:32:29,210 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.319m)
2025-12-01 13:32:29,210 - DEBUG - integration_test -   Set spline state to 4.2000
2025-12-01 13:32:29,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:29,211 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:29,225 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.285, 2.292), path_start=(0.000, 0.000), dist=4.006m
2025-12-01 13:32:29,226 - WARNING - integration_test - Could not update reference path at step 17: x and y must have the same length
2025-12-01 13:32:29,226 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2025-12-01 13:32:29,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:29,230 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:29,230 - INFO - integration_test - Warmstart k=0: x0=3.284934421808582 , y0=2.292453726579005 , psi0=0.6011099776634915 , v0=3.0 , spline0=4.200000024102204 , a0=0.0 , w0=0.0
2025-12-01 13:32:29,230 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:29,231 - INFO - integration_test - Dyn residual k=0: pred=[3.532346931631849, 2.4621211954201234, 0.6011099776634915, 3.0, 4.500000024102204], ws=[3.532346931631849, 2.4621211954201234, 0.6011099776634916, 3.0, 5.555309106562172], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.055309082459968], res_norm=1.055e+00
2025-12-01 13:32:29,232 - INFO - integration_test - Dyn residual k=1: pred=[3.779759441455116, 2.631788664261242, 0.6011099776634916, 3.0, 5.855309106562172], ws=[3.779759441455116, 2.631788664261242, 0.6011099776634916, 3.0, 6.9119683447733715], res=[0.0, 0.0, 0.0, 0.0, -1.0566592382112], res_norm=1.057e+00
2025-12-01 13:32:29,233 - INFO - integration_test - Dyn residual k=2: pred=[4.027171951278383, 2.80145613310236, 0.6011099776634916, 3.0, 7.211968344773371], ws=[4.027171951278383, 2.80145613310236, 0.6011099776634916, 3.0, 8.2713271347033], res=[0.0, 0.0, 0.0, 0.0, -1.059358789929929], res_norm=1.059e+00
2025-12-01 13:32:29,249 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,262 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,278 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,291 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,307 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,320 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,335 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,347 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,363 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,375 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,391 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,404 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,419 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,431 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,447 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,459 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,474 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,486 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,503 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,515 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,531 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,542 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:29,762 - INFO - integration_test - Step 17: MPC solve successful
2025-12-01 13:32:29,771 - INFO - integration_test - Step 17: Computed 10 numeric contouring constraints for visualization (s=4.200)
2025-12-01 13:32:29,771 - DEBUG - integration_test - Step 17: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:29,771 - INFO - integration_test - === Applying control at step 17 ===
2025-12-01 13:32:29,771 - INFO - integration_test -   Control dict from planner: {'a': -1.1077471400120509e-10, 'w': -0.25811668346765976}
2025-12-01 13:32:29,771 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:29,771 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:29,772 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:29,773 - INFO - integration_test - Step 17 completed in 0.563s
2025-12-01 13:32:29,796 - INFO - integration_test - Step 18 (contouring until path end)
2025-12-01 13:32:29,797 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.53450904 2.45890947 0.57529831 3.00000003 4.50000003]
2025-12-01 13:32:29,797 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.156m)
2025-12-01 13:32:29,797 - DEBUG - integration_test -   Set spline state to 4.5000
2025-12-01 13:32:29,798 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:29,798 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:29,813 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.535, 2.459), path_start=(0.000, 0.000), dist=4.306m
2025-12-01 13:32:29,814 - WARNING - integration_test - Could not update reference path at step 18: x and y must have the same length
2025-12-01 13:32:29,814 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2025-12-01 13:32:29,817 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:29,818 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:29,818 - INFO - integration_test - Warmstart k=0: x0=3.534509040951528 , y0=2.4589094702503673 , psi0=0.5752983093167255 , v0=3.0 , spline0=4.500000027100974 , a0=0.0 , w0=0.0
2025-12-01 13:32:29,818 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:29,819 - INFO - integration_test - Dyn residual k=0: pred=[3.786218051181237, 2.622135001859795, 0.5752983093167255, 3.0, 4.800000027100974], ws=[3.786218051181237, 2.622135001859795, 0.5752983093167257, 3.0, 5.96801066200064], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.168010634899666], res_norm=1.168e+00
2025-12-01 13:32:29,820 - INFO - integration_test - Dyn residual k=1: pred=[4.0379270614109455, 2.785360533469223, 0.5752983093167257, 3.0, 6.2680106620006395], ws=[4.0379270614109455, 2.785360533469223, 0.5752983093167257, 3.0, 7.4494807878093265], res=[0.0, 0.0, 0.0, 0.0, -1.181470125808687], res_norm=1.181e+00
2025-12-01 13:32:29,821 - INFO - integration_test - Dyn residual k=2: pred=[4.289636071640654, 2.9485860650786506, 0.5752983093167257, 3.0, 7.749480787809326], ws=[4.289636071640654, 2.9485860650786506, 0.5752983093167257, 3.0, 8.873396463010385], res=[0.0, 0.0, 0.0, 0.0, -1.1239156752010588], res_norm=1.124e+00
2025-12-01 13:32:29,836 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,848 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,864 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,876 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,892 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,905 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,921 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,932 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,948 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,960 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:29,976 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:29,988 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,004 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,016 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,032 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,044 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,059 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,071 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,087 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,099 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,116 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,127 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:30,411 - INFO - integration_test - Step 18: MPC solve successful
2025-12-01 13:32:30,419 - INFO - integration_test - Step 18: Computed 10 numeric contouring constraints for visualization (s=4.500)
2025-12-01 13:32:30,420 - DEBUG - integration_test - Step 18: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:30,420 - INFO - integration_test - === Applying control at step 18 ===
2025-12-01 13:32:30,420 - INFO - integration_test -   Control dict from planner: {'a': 7.980095072173027e-11, 'w': -0.2815884634210433}
2025-12-01 13:32:30,420 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:30,420 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:30,421 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:30,421 - INFO - integration_test - Step 18 completed in 0.625s
2025-12-01 13:32:30,445 - INFO - integration_test - Step 19 (contouring until path end)
2025-12-01 13:32:30,445 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.78848276 2.61856975 0.54713946 3.00000003 4.80000003]
2025-12-01 13:32:30,446 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.301m)
2025-12-01 13:32:30,446 - DEBUG - integration_test -   Set spline state to 4.8000
2025-12-01 13:32:30,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:30,446 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:30,460 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.788, 2.619), path_start=(0.000, 0.000), dist=4.605m
2025-12-01 13:32:30,461 - WARNING - integration_test - Could not update reference path at step 19: x and y must have the same length
2025-12-01 13:32:30,461 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2025-12-01 13:32:30,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:30,465 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:30,465 - INFO - integration_test - Warmstart k=0: x0=3.788482760366982 , y0=2.6185697500241094 , psi0=0.5471394629746212 , v0=3.0 , spline0=4.800000030100541 , a0=0.0 , w0=0.0
2025-12-01 13:32:30,465 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:30,466 - INFO - integration_test - Dyn residual k=0: pred=[4.04468761983585, 2.7746436747666423, 0.5471394629746212, 3.0, 5.100000030100541], ws=[4.04468761983585, 2.7746436747666423, 0.5471394629746213, 3.0, 6.295829160503624], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.1958291304030828], res_norm=1.196e+00
2025-12-01 13:32:30,467 - INFO - integration_test - Dyn residual k=1: pred=[4.300892479304718, 2.930717599509175, 0.5471394629746213, 3.0, 6.595829160503624], ws=[4.300892479304718, 2.930717599509175, 0.5471394629746213, 3.0, 7.806723362802448], res=[0.0, 0.0, 0.0, 0.0, -1.2108942022988245], res_norm=1.211e+00
2025-12-01 13:32:30,467 - INFO - integration_test - Dyn residual k=2: pred=[4.557097338773586, 3.086791524251708, 0.5471394629746213, 3.0, 8.106723362802448], ws=[4.557097338773586, 3.086791524251708, 0.5471394629746213, 3.0, 9.330239787846523], res=[0.0, 0.0, 0.0, 0.0, -1.2235164250440747], res_norm=1.224e+00
2025-12-01 13:32:30,482 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,495 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,512 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,524 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,539 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,552 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,567 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,579 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,595 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,608 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,623 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,635 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,651 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,663 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,678 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,691 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,707 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,719 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,736 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,748 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:30,763 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:30,774 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:31,053 - INFO - integration_test - Step 19: MPC solve successful
2025-12-01 13:32:31,061 - INFO - integration_test - Step 19: Computed 10 numeric contouring constraints for visualization (s=4.800)
2025-12-01 13:32:31,061 - DEBUG - integration_test - Step 19: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:31,061 - INFO - integration_test - === Applying control at step 19 ===
2025-12-01 13:32:31,061 - INFO - integration_test -   Control dict from planner: {'a': 2.6305915715742913e-11, 'w': -0.25401279229157386}
2025-12-01 13:32:31,061 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:31,061 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:31,062 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:31,063 - INFO - integration_test - Step 19 completed in 0.618s
2025-12-01 13:32:31,084 - INFO - integration_test - Step 20 (contouring until path end)
2025-12-01 13:32:31,084 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.0466422  2.7713731  0.52173818 3.00000003 5.10000003]
2025-12-01 13:32:31,085 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.172m)
2025-12-01 13:32:31,085 - DEBUG - integration_test -   Set spline state to 5.1000
2025-12-01 13:32:31,085 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:31,086 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:31,100 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.047, 2.771), path_start=(0.000, 0.000), dist=4.905m
2025-12-01 13:32:31,100 - WARNING - integration_test - Could not update reference path at step 20: x and y must have the same length
2025-12-01 13:32:31,100 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2025-12-01 13:32:31,103 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:31,104 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:31,104 - INFO - integration_test - Warmstart k=0: x0=4.046642203805029 , y0=2.771373102429016 , psi0=0.5217381837454639 , v0=3.0 , spline0=5.100000033100372 , a0=0.0 , w0=0.0
2025-12-01 13:32:31,104 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:31,105 - INFO - integration_test - Dyn residual k=0: pred=[4.306728463856114, 2.9208894471296523, 0.5217381837454639, 3.0, 5.400000033100372], ws=[4.306728463856114, 2.9208894471296523, 0.5217381837454638, 3.0, 6.70975298254285], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.309752949442478], res_norm=1.310e+00
2025-12-01 13:32:31,106 - INFO - integration_test - Dyn residual k=1: pred=[4.566814723907199, 3.0704057918302885, 0.5217381837454638, 3.0, 7.0097529825428495], ws=[4.566814723907199, 3.0704057918302885, 0.5217381837454638, 3.0, 8.273924645235072], res=[0.0, 0.0, 0.0, 0.0, -1.2641716626922221], res_norm=1.264e+00
2025-12-01 13:32:31,107 - INFO - integration_test - Dyn residual k=2: pred=[4.826900983958284, 3.2199221365309247, 0.5217381837454638, 3.0, 8.573924645235072], ws=[4.826900983958284, 3.2199221365309247, 0.5217381837454638, 3.0, 9.85223569643755], res=[0.0, 0.0, 0.0, 0.0, -1.2783110512024773], res_norm=1.278e+00
2025-12-01 13:32:31,121 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,133 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,149 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,161 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,176 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,189 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,205 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,217 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,233 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,245 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,260 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,272 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,288 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,300 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,315 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,327 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,343 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,355 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,370 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,383 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,406 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,417 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:31,689 - INFO - integration_test - Step 20: MPC solve successful
2025-12-01 13:32:31,697 - INFO - integration_test - Step 20: Computed 10 numeric contouring constraints for visualization (s=5.100)
2025-12-01 13:32:31,698 - DEBUG - integration_test - Step 20: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:31,698 - INFO - integration_test - === Applying control at step 20 ===
2025-12-01 13:32:31,698 - INFO - integration_test -   Control dict from planner: {'a': 3.9037899268097e-12, 'w': -0.25229302937235476}
2025-12-01 13:32:31,698 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:31,698 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:31,699 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:31,699 - INFO - integration_test - Step 20 completed in 0.615s
2025-12-01 13:32:31,719 - INFO - integration_test - Step 21 (contouring until path end)
2025-12-01 13:32:31,719 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.30858687 2.91759286 0.49650888 3.00000003 5.40000004]
2025-12-01 13:32:31,720 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.295m)
2025-12-01 13:32:31,720 - DEBUG - integration_test -   Set spline state to 5.4000
2025-12-01 13:32:31,721 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:31,721 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:31,735 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.309, 2.918), path_start=(0.000, 0.000), dist=5.203m
2025-12-01 13:32:31,735 - WARNING - integration_test - Could not update reference path at step 21: x and y must have the same length
2025-12-01 13:32:31,735 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2025-12-01 13:32:31,738 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:31,739 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:31,739 - INFO - integration_test - Warmstart k=0: x0=4.308586872339452 , y0=2.9175928639862843 , psi0=0.4965088808082284 , v0=3.0 , spline0=5.400000036100241 , a0=0.0 , w0=0.0
2025-12-01 13:32:31,739 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:31,740 - INFO - integration_test - Dyn residual k=0: pred=[4.572362155012868, 3.060500527358685, 0.4965088808082284, 3.0, 5.700000036100241], ws=[4.572362155012868, 3.060500527358685, 0.4965088808082285, 3.0, 7.1223387283414645], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.4223386922412233], res_norm=1.422e+00
2025-12-01 13:32:31,741 - INFO - integration_test - Dyn residual k=1: pred=[4.8361374376862845, 3.2034081907310856, 0.4965088808082285, 3.0, 7.422338728341464], ws=[4.8361374376862845, 3.2034081907310856, 0.4965088808082285, 3.0, 8.809364268399902], res=[0.0, 0.0, 0.0, 0.0, -1.3870255400584375], res_norm=1.387e+00
2025-12-01 13:32:31,741 - INFO - integration_test - Dyn residual k=2: pred=[5.099912720359701, 3.3463158541034863, 0.4965088808082285, 3.0, 9.109364268399903], ws=[5.099912720359701, 3.3463158541034863, 0.4965088808082285, 3.0, 10.443781995831394], res=[0.0, 0.0, 0.0, 0.0, -1.3344177274314912], res_norm=1.334e+00
2025-12-01 13:32:31,756 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,768 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,784 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,796 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,812 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,824 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,839 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,851 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,867 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,879 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,894 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,906 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,922 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,934 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,949 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,961 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:31,977 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:31,989 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,005 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,017 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,032 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,043 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:32,337 - INFO - integration_test - Step 21: MPC solve successful
2025-12-01 13:32:32,346 - INFO - integration_test - Step 21: Computed 10 numeric contouring constraints for visualization (s=5.400)
2025-12-01 13:32:32,346 - DEBUG - integration_test - Step 21: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:32,346 - INFO - integration_test - === Applying control at step 21 ===
2025-12-01 13:32:32,346 - INFO - integration_test -   Control dict from planner: {'a': -3.2026365415048317e-10, 'w': 0.1252096727615576}
2025-12-01 13:32:32,346 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:32,346 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:32,347 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:32,348 - INFO - integration_test - Step 21 completed in 0.628s
2025-12-01 13:32:32,368 - INFO - integration_test - Step 22 (contouring until path end)
2025-12-01 13:32:32,368 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.57146061 3.06214813 0.50902985 3.00000003 5.70000004]
2025-12-01 13:32:32,369 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.194m)
2025-12-01 13:32:32,369 - DEBUG - integration_test -   Set spline state to 5.7000
2025-12-01 13:32:32,369 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:32,369 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:32,384 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.571, 3.062), path_start=(0.000, 0.000), dist=5.502m
2025-12-01 13:32:32,385 - WARNING - integration_test - Could not update reference path at step 22: x and y must have the same length
2025-12-01 13:32:32,385 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2025-12-01 13:32:32,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:32,389 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:32,389 - INFO - integration_test - Warmstart k=0: x0=4.571460606084791 , y0=3.062148134051894 , psi0=0.5090298480843842 , v0=3.0 , spline0=5.700000039096908 , a0=0.0 , w0=0.0
2025-12-01 13:32:32,389 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:32,390 - INFO - integration_test - Dyn residual k=0: pred=[4.833425916970224, 3.2083472308093577, 0.5090298480843842, 3.0, 6.000000039096908], ws=[4.833425916970224, 3.2083472308093577, 0.509029848084384, 3.0, 7.450611671962845], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.4506116328659369], res_norm=1.451e+00
2025-12-01 13:32:32,391 - INFO - integration_test - Dyn residual k=1: pred=[5.095391227855657, 3.3545463275668213, 0.509029848084384, 3.0, 7.750611671962845], ws=[5.095391227855657, 3.3545463275668213, 0.509029848084384, 3.0, 9.16433887930543], res=[0.0, 0.0, 0.0, 0.0, -1.4137272073425846], res_norm=1.414e+00
2025-12-01 13:32:32,392 - INFO - integration_test - Dyn residual k=2: pred=[5.35735653874109, 3.500745424324285, 0.509029848084384, 3.0, 9.46433887930543], ws=[5.35735653874109, 3.500745424324285, 0.509029848084384, 3.0, 10.824206936660925], res=[0.0, 0.0, 0.0, 0.0, -1.359868057355495], res_norm=1.360e+00
2025-12-01 13:32:32,407 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,422 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,440 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,452 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,467 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,479 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,496 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,509 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,525 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,537 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,552 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,565 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,581 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,593 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,609 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,621 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,637 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,649 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,664 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,677 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:32,693 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:32,704 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:33,005 - INFO - integration_test - Step 22: MPC solve successful
2025-12-01 13:32:33,013 - INFO - integration_test - Step 22: Computed 10 numeric contouring constraints for visualization (s=5.700)
2025-12-01 13:32:33,013 - DEBUG - integration_test - Step 22: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:33,013 - INFO - integration_test - === Applying control at step 22 ===
2025-12-01 13:32:33,013 - INFO - integration_test -   Control dict from planner: {'a': 1.9063995917692262e-10, 'w': -0.7629725755935588}
2025-12-01 13:32:33,013 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:33,014 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:33,014 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:33,015 - INFO - integration_test - Step 22 completed in 0.647s
2025-12-01 13:32:33,035 - INFO - integration_test - Step 23 (contouring until path end)
2025-12-01 13:32:33,036 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.83874642 3.19821666 0.43273259 3.00000003 6.00000004]
2025-12-01 13:32:33,036 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.415m)
2025-12-01 13:32:33,036 - DEBUG - integration_test -   Set spline state to 6.0000
2025-12-01 13:32:33,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:33,037 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:33,050 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.839, 3.198), path_start=(0.000, 0.000), dist=5.800m
2025-12-01 13:32:33,051 - WARNING - integration_test - Could not update reference path at step 23: x and y must have the same length
2025-12-01 13:32:33,051 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2025-12-01 13:32:33,054 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:33,055 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:33,055 - INFO - integration_test - Warmstart k=0: x0=4.838746424902645 , y0=3.198216660568667 , psi0=0.4327325905250283 , v0=3.0 , spline0=6.000000042095482 , a0=0.0 , w0=0.0
2025-12-01 13:32:33,055 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:33,056 - INFO - integration_test - Dyn residual k=0: pred=[5.111093390975541, 3.3240225828095875, 0.4327325905250283, 3.0, 6.300000042095482], ws=[5.111093390975542, 3.3240225828095875, 0.43273259052502855, 3.0, 7.863293506780799], res=[-8.881784197001252e-16, 0.0, -2.220446049250313e-16, 0.0, -1.5632934646853176], res_norm=1.563e+00
2025-12-01 13:32:33,056 - INFO - integration_test - Dyn residual k=1: pred=[5.383440357048438, 3.449828505050508, 0.43273259052502855, 3.0, 8.1632935067808], ws=[5.383440357048438, 3.449828505050508, 0.43273259052502855, 3.0, 9.69349550895616], res=[0.0, 0.0, 0.0, 0.0, -1.5302020021753595], res_norm=1.530e+00
2025-12-01 13:32:33,057 - INFO - integration_test - Dyn residual k=2: pred=[5.655787323121334, 3.575634427291429, 0.43273259052502855, 3.0, 9.99349550895616], ws=[5.655787323121334, 3.575634427291429, 0.43273259052502855, 3.0, 11.401334219453684], res=[0.0, 0.0, 0.0, 0.0, -1.4078387104975238], res_norm=1.408e+00
2025-12-01 13:32:33,072 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,084 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,100 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,112 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,128 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,140 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,156 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,168 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,184 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,196 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,213 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,225 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,240 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,252 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,267 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,279 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,296 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,308 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,324 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,336 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,351 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,362 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:33,613 - INFO - integration_test - Step 23: MPC solve successful
2025-12-01 13:32:33,621 - INFO - integration_test - Step 23: Computed 10 numeric contouring constraints for visualization (s=6.000)
2025-12-01 13:32:33,622 - DEBUG - integration_test - Step 23: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:33,622 - INFO - integration_test - === Applying control at step 23 ===
2025-12-01 13:32:33,622 - INFO - integration_test -   Control dict from planner: {'a': -1.692284911399754e-08, 'w': -0.09142252919469562}
2025-12-01 13:32:33,622 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:33,622 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:33,623 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:33,623 - INFO - integration_test - Step 23 completed in 0.587s
2025-12-01 13:32:33,646 - INFO - integration_test - Step 24 (contouring until path end)
2025-12-01 13:32:33,647 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.11166467 3.32277591 0.42359034 3.00000003 6.30000004]
2025-12-01 13:32:33,647 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.358m)
2025-12-01 13:32:33,647 - DEBUG - integration_test -   Set spline state to 6.3000
2025-12-01 13:32:33,648 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:33,648 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:33,661 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.112, 3.323), path_start=(0.000, 0.000), dist=6.097m
2025-12-01 13:32:33,662 - WARNING - integration_test - Could not update reference path at step 24: x and y must have the same length
2025-12-01 13:32:33,662 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2025-12-01 13:32:33,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:33,666 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:33,666 - INFO - integration_test - Warmstart k=0: x0=5.111664670588412 , y0=3.3227759077823382 , psi0=0.42359033760555875 , v0=3.0 , spline0=6.300000044924826 , a0=0.0 , w0=0.0
2025-12-01 13:32:33,666 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:33,667 - INFO - integration_test - Dyn residual k=0: pred=[5.38515038879173, 3.4460867424191024, 0.42359033760555875, 3.0, 6.600000044924826], ws=[5.38515038879173, 3.4460867424191024, 0.42359033760555853, 3.0, 8.189872464082377], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.589872419157551], res_norm=1.590e+00
2025-12-01 13:32:33,667 - INFO - integration_test - Dyn residual k=1: pred=[5.658636106995048, 3.5693975770558666, 0.42359033760555853, 3.0, 8.489872464082378], ws=[5.658636106995048, 3.5693975770558666, 0.42359033760555853, 3.0, 10.044689937241658], res=[0.0, 0.0, 0.0, 0.0, -1.5548174731592805], res_norm=1.555e+00
2025-12-01 13:32:33,668 - INFO - integration_test - Dyn residual k=2: pred=[5.932121825198366, 3.6927084116926308, 0.42359033760555853, 3.0, 10.34468993724166], ws=[5.932121825198366, 3.6927084116926308, 0.42359033760555853, 3.0, 11.839622654850993], res=[0.0, 0.0, 0.0, 0.0, -1.494932717609334], res_norm=1.495e+00
2025-12-01 13:32:33,683 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,695 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,712 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,724 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,740 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,752 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,768 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,780 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,796 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,808 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,824 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,836 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,851 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,863 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,879 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,891 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,907 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,919 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,935 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,947 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:33,962 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:33,973 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:34,281 - INFO - integration_test - Step 24: MPC solve successful
2025-12-01 13:32:34,289 - INFO - integration_test - Step 24: Computed 10 numeric contouring constraints for visualization (s=6.300)
2025-12-01 13:32:34,289 - DEBUG - integration_test - Step 24: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:34,289 - INFO - integration_test - === Applying control at step 24 ===
2025-12-01 13:32:34,289 - INFO - integration_test -   Control dict from planner: {'a': 1.1373806605421892e-08, 'w': -0.2239118904263289}
2025-12-01 13:32:34,289 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:34,289 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:34,290 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:34,291 - INFO - integration_test - Step 24 completed in 0.644s
2025-12-01 13:32:34,314 - INFO - integration_test - Step 25 (contouring until path end)
2025-12-01 13:32:34,314 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.38650802 3.44301473 0.40119915 3.00000003 6.60000005]
2025-12-01 13:32:34,315 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.228m)
2025-12-01 13:32:34,315 - DEBUG - integration_test -   Set spline state to 6.6000
2025-12-01 13:32:34,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:34,315 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:34,329 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.387, 3.443), path_start=(0.000, 0.000), dist=6.393m
2025-12-01 13:32:34,329 - WARNING - integration_test - Could not update reference path at step 25: x and y must have the same length
2025-12-01 13:32:34,329 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2025-12-01 13:32:34,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:34,334 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:34,334 - INFO - integration_test - Warmstart k=0: x0=5.386508019748685 , y0=3.443014732595584 , psi0=0.4011991485629259 , v0=3.0 , spline0=6.600000047867909 , a0=0.0 , w0=0.0
2025-12-01 13:32:34,334 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:34,335 - INFO - integration_test - Dyn residual k=0: pred=[5.662686028182528, 3.560171497903936, 0.4011991485629259, 3.0, 6.900000047867909], ws=[5.662686028182528, 3.560171497903936, 0.40119914856292604, 3.0, 8.601681989566568], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -1.7016819416986593], res_norm=1.702e+00
2025-12-01 13:32:34,335 - INFO - integration_test - Dyn residual k=1: pred=[5.938864036616371, 3.6773282632122877, 0.40119914856292604, 3.0, 8.901681989566569], ws=[5.938864036616371, 3.6773282632122877, 0.40119914856292604, 3.0, 10.502360491621923], res=[0.0, 0.0, 0.0, 0.0, -1.600678502055354], res_norm=1.601e+00
2025-12-01 13:32:34,336 - INFO - integration_test - Dyn residual k=2: pred=[6.215042045050214, 3.7944850285206395, 0.40119914856292604, 3.0, 10.802360491621924], ws=[6.215042045050214, 3.7944850285206395, 0.40119914856292604, 3.0, 12.340607045252458], res=[0.0, 0.0, 0.0, 0.0, -1.5382465536305343], res_norm=1.538e+00
2025-12-01 13:32:34,351 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,364 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,380 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,392 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,410 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,423 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,440 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,453 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,470 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,484 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,502 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,515 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,532 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,545 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,562 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,575 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,592 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,605 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,622 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,635 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:34,652 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:34,664 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:34,928 - INFO - integration_test - Step 25: MPC solve successful
2025-12-01 13:32:34,937 - INFO - integration_test - Step 25: Computed 10 numeric contouring constraints for visualization (s=6.600)
2025-12-01 13:32:34,937 - DEBUG - integration_test - Step 25: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:34,937 - INFO - integration_test - === Applying control at step 25 ===
2025-12-01 13:32:34,937 - INFO - integration_test -   Control dict from planner: {'a': 3.790952178747708e-09, 'w': -0.1615868774911745}
2025-12-01 13:32:34,937 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:34,937 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:34,938 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:34,939 - INFO - integration_test - Step 25 completed in 0.624s
2025-12-01 13:32:34,961 - INFO - integration_test - Step 26 (contouring until path end)
2025-12-01 13:32:34,962 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.66362054 3.55793511 0.38504046 3.00000003 6.90000005]
2025-12-01 13:32:34,962 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.380m)
2025-12-01 13:32:34,962 - DEBUG - integration_test -   Set spline state to 6.9000
2025-12-01 13:32:34,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:34,963 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:34,977 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.664, 3.558), path_start=(0.000, 0.000), dist=6.688m
2025-12-01 13:32:34,977 - WARNING - integration_test - Could not update reference path at step 26: x and y must have the same length
2025-12-01 13:32:34,977 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2025-12-01 13:32:34,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:34,982 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:34,982 - INFO - integration_test - Warmstart k=0: x0=5.66362054178765 , y0=3.5579351122232614 , psi0=0.38504046081380844 , v0=3.0 , spline0=6.900000050848902 , a0=0.0 , w0=0.0
2025-12-01 13:32:34,982 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:34,983 - INFO - integration_test - Dyn residual k=0: pred=[5.941655512733529, 3.6706141028609327, 0.38504046081380844, 3.0, 7.200000050848902], ws=[5.941655512733529, 3.6706141028609327, 0.3850404608138085, 3.0, 8.926536841605527], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.726536790756625], res_norm=1.727e+00
2025-12-01 13:32:34,984 - INFO - integration_test - Dyn residual k=1: pred=[6.219690483679408, 3.783293093498604, 0.3850404608138085, 3.0, 9.226536841605528], ws=[6.219690483679408, 3.783293093498604, 0.3850404608138085, 3.0, 10.911991281043298], res=[0.0, 0.0, 0.0, 0.0, -1.6854544394377697], res_norm=1.685e+00
2025-12-01 13:32:34,984 - INFO - integration_test - Dyn residual k=2: pred=[6.497725454625286, 3.8959720841362753, 0.3850404608138085, 3.0, 11.211991281043298], ws=[6.497725454625286, 3.8959720841362753, 0.3850404608138085, 3.0, 12.769692162802611], res=[0.0, 0.0, 0.0, 0.0, -1.5577008817593132], res_norm=1.558e+00
2025-12-01 13:32:34,999 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,011 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,027 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,039 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,055 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,067 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,082 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,094 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,109 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,121 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,136 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,148 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,163 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,175 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,191 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,203 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,219 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,231 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,259 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,274 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,285 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:35,573 - INFO - integration_test - Step 26: MPC solve successful
2025-12-01 13:32:35,580 - INFO - integration_test - Step 26: Computed 10 numeric contouring constraints for visualization (s=6.900)
2025-12-01 13:32:35,581 - DEBUG - integration_test - Step 26: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:35,581 - INFO - integration_test - === Applying control at step 26 ===
2025-12-01 13:32:35,581 - INFO - integration_test -   Control dict from planner: {'a': 9.794188207792617e-10, 'w': -0.40911163071537493}
2025-12-01 13:32:35,581 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:35,581 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:35,582 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:35,583 - INFO - integration_test - Step 26 completed in 0.621s
2025-12-01 13:32:35,608 - INFO - integration_test - Step 27 (contouring until path end)
2025-12-01 13:32:35,608 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.94388256 3.6648961  0.3441293  3.00000003 7.20000005]
2025-12-01 13:32:35,609 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.259m)
2025-12-01 13:32:35,609 - DEBUG - integration_test -   Set spline state to 7.2000
2025-12-01 13:32:35,609 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:35,610 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:35,623 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.944, 3.665), path_start=(0.000, 0.000), dist=6.983m
2025-12-01 13:32:35,624 - WARNING - integration_test - Could not update reference path at step 27: x and y must have the same length
2025-12-01 13:32:35,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2025-12-01 13:32:35,627 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:35,628 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:35,628 - INFO - integration_test - Warmstart k=0: x0=5.943882556168683 , y0=3.6648961006128418 , psi0=0.34412929774227097 , v0=3.0 , spline0=7.200000053839689 , a0=0.0 , w0=0.0
2025-12-01 13:32:35,628 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:35,629 - INFO - integration_test - Dyn residual k=0: pred=[6.226293425505052, 3.766109246402686, 0.34412929774227097, 3.0, 7.500000053839689], ws=[6.226293425505052, 3.766109246402686, 0.34412929774227097, 3.0, 9.336205402657935], res=[0.0, 0.0, 0.0, 0.0, -1.836205348818246], res_norm=1.836e+00
2025-12-01 13:32:35,629 - INFO - integration_test - Dyn residual k=1: pred=[6.50870429484142, 3.86732239219253, 0.34412929774227097, 3.0, 9.636205402657936], ws=[6.50870429484142, 3.86732239219253, 0.34412929774227097, 3.0, 11.363331989492652], res=[0.0, 0.0, 0.0, 0.0, -1.727126586834716], res_norm=1.727e+00
2025-12-01 13:32:35,630 - INFO - integration_test - Dyn residual k=2: pred=[6.791115164177789, 3.9685355379823744, 0.34412929774227097, 3.0, 11.663331989492653], ws=[6.791115164177789, 3.9685355379823744, 0.34412929774227097, 3.0, 13.261306797070176], res=[0.0, 0.0, 0.0, 0.0, -1.5979748075775237], res_norm=1.598e+00
2025-12-01 13:32:35,645 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,657 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,673 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,685 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,701 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,713 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,729 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,741 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,756 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,768 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,783 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,796 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,812 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,824 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,839 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,851 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,867 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,879 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,896 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,908 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:35,924 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:35,935 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:36,168 - INFO - integration_test - Step 27: MPC solve successful
2025-12-01 13:32:36,176 - INFO - integration_test - Step 27: Computed 10 numeric contouring constraints for visualization (s=7.200)
2025-12-01 13:32:36,176 - DEBUG - integration_test - Step 27: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:36,176 - INFO - integration_test - === Applying control at step 27 ===
2025-12-01 13:32:36,176 - INFO - integration_test -   Control dict from planner: {'a': -1.889062154516187e-07, 'w': -0.17105776843693757}
2025-12-01 13:32:36,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:36,176 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:36,177 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:36,178 - INFO - integration_test - Step 27 completed in 0.569s
2025-12-01 13:32:36,203 - INFO - integration_test - Step 28 (contouring until path end)
2025-12-01 13:32:36,204 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.2271453  3.76368894 0.32702352 3.00000001 7.50000005]
2025-12-01 13:32:36,204 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.409m)
2025-12-01 13:32:36,204 - DEBUG - integration_test -   Set spline state to 7.5000
2025-12-01 13:32:36,205 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:36,205 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:36,219 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.227, 3.764), path_start=(0.000, 0.000), dist=7.276m
2025-12-01 13:32:36,219 - WARNING - integration_test - Could not update reference path at step 28: x and y must have the same length
2025-12-01 13:32:36,219 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2025-12-01 13:32:36,222 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:36,223 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:36,223 - INFO - integration_test - Warmstart k=0: x0=6.227145298686292 , y0=3.7636889414408676 , psi0=0.3270235208985772 , v0=3.0 , spline0=7.500000054941414 , a0=0.0 , w0=0.0
2025-12-01 13:32:36,223 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:36,224 - INFO - integration_test - Dyn residual k=0: pred=[6.511246096299999, 3.8600566580022515, 0.3270235208985772, 3.0, 7.800000054941414], ws=[6.511246096299999, 3.8600566580022515, 0.3270235208985772, 3.0, 9.659325825004682], res=[0.0, 0.0, 0.0, 0.0, -1.8593257700632684], res_norm=1.859e+00
2025-12-01 13:32:36,225 - INFO - integration_test - Dyn residual k=1: pred=[6.795346893913706, 3.9564243745636354, 0.3270235208985772, 3.0, 9.959325825004683], ws=[6.795346893913706, 3.9564243745636354, 0.3270235208985772, 3.0, 11.705423663954154], res=[0.0, 0.0, 0.0, 0.0, -1.7460978389494706], res_norm=1.746e+00
2025-12-01 13:32:36,226 - INFO - integration_test - Dyn residual k=2: pred=[7.079447691527413, 4.05279209112502, 0.3270235208985772, 3.0, 12.005423663954154], ws=[7.079447691527413, 4.05279209112502, 0.3270235208985772, 3.0, 13.687973552138969], res=[0.0, 0.0, 0.0, 0.0, -1.6825498881848144], res_norm=1.683e+00
2025-12-01 13:32:36,240 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,253 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,268 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,280 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,296 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,308 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,324 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,336 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,352 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,364 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,379 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,391 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,407 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,419 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,436 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,448 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,464 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,476 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,492 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,504 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:36,520 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:36,531 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:37,067 - INFO - integration_test - Step 28: MPC solve successful
2025-12-01 13:32:37,075 - INFO - integration_test - Step 28: Computed 10 numeric contouring constraints for visualization (s=7.500)
2025-12-01 13:32:37,076 - DEBUG - integration_test - Step 28: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:37,076 - INFO - integration_test - === Applying control at step 28 ===
2025-12-01 13:32:37,076 - INFO - integration_test -   Control dict from planner: {'a': 1.8042655530240892e-08, 'w': -0.3045244011522542}
2025-12-01 13:32:37,076 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:37,076 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:37,077 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:37,077 - INFO - integration_test - Step 28 completed in 0.874s
2025-12-01 13:32:37,098 - INFO - integration_test - Step 29 (contouring until path end)
2025-12-01 13:32:37,098 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.51266939 3.85571632 0.29657108 3.00000001 7.80000006]
2025-12-01 13:32:37,099 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.293m)
2025-12-01 13:32:37,099 - DEBUG - integration_test -   Set spline state to 7.8000
2025-12-01 13:32:37,099 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:37,099 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:37,113 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.513, 3.856), path_start=(0.000, 0.000), dist=7.568m
2025-12-01 13:32:37,114 - WARNING - integration_test - Could not update reference path at step 29: x and y must have the same length
2025-12-01 13:32:37,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2025-12-01 13:32:37,116 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:37,118 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:37,118 - INFO - integration_test - Warmstart k=0: x0=6.51266939202672 , y0=3.8557163176538944 , psi0=0.2965710807833518 , v0=3.0 , spline0=7.800000056223565 , a0=0.0 , w0=0.0
2025-12-01 13:32:37,118 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:37,119 - INFO - integration_test - Dyn residual k=0: pred=[6.799572647791559, 3.9433891288985214, 0.2965710807833518, 3.0, 8.100000056223566], ws=[6.799572647791559, 3.9433891288985214, 0.2965710807833517, 3.0, 10.065420218060183], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.965420161836617], res_norm=1.965e+00
2025-12-01 13:32:37,120 - INFO - integration_test - Dyn residual k=1: pred=[7.086475903556396, 4.0310619401431484, 0.2965710807833517, 3.0, 10.365420218060184], ws=[7.086475903556396, 4.0310619401431484, 0.2965710807833517, 3.0, 12.208214757652836], res=[0.0, 0.0, 0.0, 0.0, -1.8427945395926528], res_norm=1.843e+00
2025-12-01 13:32:37,120 - INFO - integration_test - Dyn residual k=2: pred=[7.3733791593212334, 4.118734751387776, 0.2965710807833517, 3.0, 12.508214757652837], ws=[7.3733791593212334, 4.118734751387776, 0.2965710807833517, 3.0, 14.231084685449934], res=[0.0, 0.0, 0.0, 0.0, -1.7228699277970971], res_norm=1.723e+00
2025-12-01 13:32:37,135 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,147 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,163 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,175 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,191 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,203 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,219 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,231 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,247 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,258 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,274 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,286 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,301 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,313 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,329 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,340 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,356 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,367 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,396 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,411 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,422 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:37,704 - INFO - integration_test - Step 29: MPC solve successful
2025-12-01 13:32:37,712 - INFO - integration_test - Step 29: Computed 10 numeric contouring constraints for visualization (s=7.800)
2025-12-01 13:32:37,712 - DEBUG - integration_test - Step 29: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:37,712 - INFO - integration_test - === Applying control at step 29 ===
2025-12-01 13:32:37,712 - INFO - integration_test -   Control dict from planner: {'a': 1.1403105659270955e-07, 'w': -0.25869981063344283}
2025-12-01 13:32:37,712 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:37,712 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:37,713 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:37,714 - INFO - integration_test - Step 29 completed in 0.616s
2025-12-01 13:32:37,735 - INFO - integration_test - Step 30 (contouring until path end)
2025-12-01 13:32:37,735 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[6.80067463 3.93966847 0.2707011  3.00000002 8.10000006]
2025-12-01 13:32:37,736 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.323m)
2025-12-01 13:32:37,736 - DEBUG - integration_test -   Set spline state to 8.1000
2025-12-01 13:32:37,736 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:37,736 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:37,751 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(6.801, 3.940), path_start=(0.000, 0.000), dist=7.859m
2025-12-01 13:32:37,751 - WARNING - integration_test - Could not update reference path at step 30: x and y must have the same length
2025-12-01 13:32:37,751 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2025-12-01 13:32:37,754 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:37,755 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:37,755 - INFO - integration_test - Warmstart k=0: x0=6.800674632473174 , y0=3.9396684665678317 , psi0=0.27070109972000755 , v0=3.0 , spline0=8.100000058646026 , a0=0.0 , w0=0.0
2025-12-01 13:32:37,755 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:37,756 - INFO - integration_test - Dyn residual k=0: pred=[7.089749728726956, 4.019890587743145, 0.27070109972000755, 3.0, 8.400000058646027], ws=[7.089749728726956, 4.019890587743145, 0.27070109972000767, 3.0, 10.386817004374278], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.9868169457282505], res_norm=1.987e+00
2025-12-01 13:32:37,757 - INFO - integration_test - Dyn residual k=1: pred=[7.378824824980739, 4.100112708918458, 0.27070109972000767, 3.0, 10.686817004374278], ws=[7.378824824980739, 4.100112708918458, 0.27070109972000767, 3.0, 12.547185813030085], res=[0.0, 0.0, 0.0, 0.0, -1.8603688086558066], res_norm=1.860e+00
2025-12-01 13:32:37,758 - INFO - integration_test - Dyn residual k=2: pred=[7.667899921234521, 4.180334830093772, 0.27070109972000767, 3.0, 12.847185813030086], ws=[7.667899921234521, 4.180334830093772, 0.27070109972000767, 3.0, 14.589399827475454], res=[0.0, 0.0, 0.0, 0.0, -1.7422140144453682], res_norm=1.742e+00
2025-12-01 13:32:37,772 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,784 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,801 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,813 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,829 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,841 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,856 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,868 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,884 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,896 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,912 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,924 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,951 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,967 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:37,979 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:37,994 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,006 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,022 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,034 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,050 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,060 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:38,316 - INFO - integration_test - Step 30: MPC solve successful
2025-12-01 13:32:38,324 - INFO - integration_test - Step 30: Computed 10 numeric contouring constraints for visualization (s=8.100)
2025-12-01 13:32:38,325 - DEBUG - integration_test - Step 30: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:38,325 - INFO - integration_test - === Applying control at step 30 ===
2025-12-01 13:32:38,325 - INFO - integration_test -   Control dict from planner: {'a': 1.9449448265356352e-08, 'w': -0.27945815691071896}
2025-12-01 13:32:38,325 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:38,325 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:38,326 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:38,326 - INFO - integration_test - Step 30 completed in 0.591s
2025-12-01 13:32:38,347 - INFO - integration_test - Step 31 (contouring until path end)
2025-12-01 13:32:38,347 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.09083297 4.01584119 0.24275528 3.00000003 8.40000006]
2025-12-01 13:32:38,348 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.396m)
2025-12-01 13:32:38,348 - DEBUG - integration_test -   Set spline state to 8.4000
2025-12-01 13:32:38,348 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:38,348 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:38,362 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.091, 4.016), path_start=(0.000, 0.000), dist=8.149m
2025-12-01 13:32:38,362 - WARNING - integration_test - Could not update reference path at step 31: x and y must have the same length
2025-12-01 13:32:38,362 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2025-12-01 13:32:38,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:38,366 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:38,366 - INFO - integration_test - Warmstart k=0: x0=7.090832969622136 , y0=4.015841190167952 , psi0=0.24275528402893565 , v0=3.0 , spline0=8.400000061262983 , a0=0.0 , w0=0.0
2025-12-01 13:32:38,366 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:38,367 - INFO - integration_test - Dyn residual k=0: pred=[7.382036774752017, 4.087954600001898, 0.24275528402893565, 3.0, 8.700000061262983], ws=[7.382036774752017, 4.087954600001898, 0.24275528402893576, 3.0, 10.788024727822522], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.088024666559539], res_norm=2.088e+00
2025-12-01 13:32:38,368 - INFO - integration_test - Dyn residual k=1: pred=[7.673240579881897, 4.160068009835844, 0.24275528402893576, 3.0, 11.088024727822523], ws=[7.673240579881897, 4.160068009835844, 0.24275528402893576, 3.0, 12.983796067237115], res=[0.0, 0.0, 0.0, 0.0, -1.8957713394145923], res_norm=1.896e+00
2025-12-01 13:32:38,368 - INFO - integration_test - Dyn residual k=2: pred=[7.964444385011777, 4.23218141966979, 0.24275528402893576, 3.0, 13.283796067237116], ws=[7.964444385011777, 4.23218141966979, 0.24275528402893576, 3.0, 15.068579066380806], res=[0.0, 0.0, 0.0, 0.0, -1.7847829991436903], res_norm=1.785e+00
2025-12-01 13:32:38,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,395 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,411 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,423 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,439 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,451 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,467 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,479 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,495 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,507 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,523 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,534 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,550 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,562 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,577 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,589 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,605 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,617 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,633 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,644 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:38,660 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:38,670 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:38,939 - INFO - integration_test - Step 31: MPC solve successful
2025-12-01 13:32:38,947 - INFO - integration_test - Step 31: Computed 10 numeric contouring constraints for visualization (s=8.400)
2025-12-01 13:32:38,948 - DEBUG - integration_test - Step 31: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:38,948 - INFO - integration_test - === Applying control at step 31 ===
2025-12-01 13:32:38,948 - INFO - integration_test -   Control dict from planner: {'a': -1.0212840138595252e-06, 'w': 0.025570499888399465}
2025-12-01 13:32:38,948 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:38,948 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:38,949 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:38,949 - INFO - integration_test - Step 31 completed in 0.602s
2025-12-01 13:32:38,970 - INFO - integration_test - Step 32 (contouring until path end)
2025-12-01 13:32:38,971 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.38194426 4.08832683 0.24531233 2.99999992 8.70000005]
2025-12-01 13:32:38,971 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.348m)
2025-12-01 13:32:38,971 - DEBUG - integration_test -   Set spline state to 8.7000
2025-12-01 13:32:38,972 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:38,972 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:38,986 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.382, 4.088), path_start=(0.000, 0.000), dist=8.438m
2025-12-01 13:32:38,986 - WARNING - integration_test - Could not update reference path at step 32: x and y must have the same length
2025-12-01 13:32:38,986 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2025-12-01 13:32:38,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:38,990 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:38,990 - INFO - integration_test - Warmstart k=0: x0=7.381944256250706 , y0=4.0883268319531325 , psi0=0.2453123340177756 , v0=2.999999924041161 , spline0=8.700000053667098 , a0=0.0 , w0=0.0
2025-12-01 13:32:38,990 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:38,992 - INFO - integration_test - Dyn residual k=0: pred=[7.6729627046010505, 4.161184626060748, 0.2453123340177756, 2.999999924041161, 9.000000046071214], ws=[7.6729627046010505, 4.161184626060748, 0.2453123340177754, 2.999999924041161, 11.107767775869402], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, -2.107767729798187], res_norm=2.108e+00
2025-12-01 13:32:38,993 - INFO - integration_test - Dyn residual k=1: pred=[7.963981152951395, 4.234042420168363, 0.2453123340177754, 2.999999924041161, 11.407767768273517], ws=[7.963981152951395, 4.234042420168363, 0.2453123340177754, 2.999999924041161, 13.377497010592165], res=[0.0, 0.0, 0.0, 0.0, -1.9697292423186479], res_norm=1.970e+00
2025-12-01 13:32:38,994 - INFO - integration_test - Dyn residual k=2: pred=[8.254999601301739, 4.306900214275978, 0.2453123340177754, 2.999999924041161, 13.677497002996281], ws=[8.254999601301739, 4.306900214275978, 0.2453123340177754, 2.999999924041161, 15.55918279288958], res=[0.0, 0.0, 0.0, 0.0, -1.8816857898932984], res_norm=1.882e+00
2025-12-01 13:32:39,009 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,021 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,037 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,049 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,064 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,076 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,092 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,104 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,119 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,131 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,146 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,158 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,174 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,186 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,201 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,213 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,229 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,241 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,257 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,268 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,284 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,295 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:39,596 - INFO - integration_test - Step 32: MPC solve successful
2025-12-01 13:32:39,604 - INFO - integration_test - Step 32: Computed 10 numeric contouring constraints for visualization (s=8.700)
2025-12-01 13:32:39,605 - DEBUG - integration_test - Step 32: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:39,605 - INFO - integration_test - === Applying control at step 32 ===
2025-12-01 13:32:39,605 - INFO - integration_test -   Control dict from planner: {'a': 6.365010547667357e-07, 'w': -0.4690314712157045}
2025-12-01 13:32:39,605 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:39,605 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:39,606 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:39,606 - INFO - integration_test - Step 32 completed in 0.636s
2025-12-01 13:32:39,628 - INFO - integration_test - Step 33 (contouring until path end)
2025-12-01 13:32:39,629 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.67456433 4.15433433 0.19840919 2.99999999 9.00000005]
2025-12-01 13:32:39,629 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.421m)
2025-12-01 13:32:39,629 - DEBUG - integration_test -   Set spline state to 9.0000
2025-12-01 13:32:39,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:39,630 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:39,643 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.675, 4.154), path_start=(0.000, 0.000), dist=8.727m
2025-12-01 13:32:39,644 - WARNING - integration_test - Could not update reference path at step 33: x and y must have the same length
2025-12-01 13:32:39,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2025-12-01 13:32:39,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:39,648 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:39,648 - INFO - integration_test - Warmstart k=0: x0=7.674564334477466 , y0=4.154334326938435 , psi0=0.19840918689620515 , v0=2.9999999876912664 , spline0=9.000000052436224 , a0=0.0 , w0=0.0
2025-12-01 13:32:39,648 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:39,649 - INFO - integration_test - Dyn residual k=0: pred=[7.968678748279463, 4.213467319889782, 0.19840918689620515, 2.9999999876912664, 9.300000051205352], ws=[7.968678748279463, 4.213467319889782, 0.19840918689620501, 2.9999999876912664, 11.503314918561449], res=[0.0, 0.0, 1.3877787807814457e-16, 0.0, -2.203314867356097], res_norm=2.203e+00
2025-12-01 13:32:39,649 - INFO - integration_test - Dyn residual k=1: pred=[8.26279316208146, 4.272600312841128, 0.19840918689620501, 2.9999999876912664, 11.803314917330574], ws=[8.26279316208146, 4.272600312841128, 0.19840918689620501, 2.9999999876912664, 13.80723546987106], res=[0.0, 0.0, 0.0, 0.0, -2.0039205525404853], res_norm=2.004e+00
2025-12-01 13:32:39,650 - INFO - integration_test - Dyn residual k=2: pred=[8.556907575883455, 4.331733305792474, 0.19840918689620501, 2.9999999876912664, 14.107235468640187], ws=[8.556907575883455, 4.331733305792474, 0.19840918689620501, 2.9999999876912664, 16.035197462935685], res=[0.0, 0.0, 0.0, 0.0, -1.9279619942954973], res_norm=1.928e+00
2025-12-01 13:32:39,664 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,677 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,693 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,705 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,721 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,733 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,748 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,760 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,775 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,788 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,804 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,816 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,833 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,845 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,861 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,874 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,890 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,902 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,918 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,930 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:39,945 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:39,956 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:40,280 - INFO - integration_test - Step 33: MPC solve successful
2025-12-01 13:32:40,288 - INFO - integration_test - Step 33: Computed 10 numeric contouring constraints for visualization (s=9.000)
2025-12-01 13:32:40,288 - DEBUG - integration_test - Step 33: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:40,288 - INFO - integration_test - === Applying control at step 33 ===
2025-12-01 13:32:40,288 - INFO - integration_test -   Control dict from planner: {'a': 5.178678639942159e-08, 'w': -0.40020394298262846}
2025-12-01 13:32:40,288 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:40,288 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:40,289 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:40,289 - INFO - integration_test - Step 33 completed in 0.661s
2025-12-01 13:32:40,319 - INFO - integration_test - Step 34 (contouring until path end)
2025-12-01 13:32:40,320 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[7.96978335 4.20756703 0.15838879 2.99999999 9.30000005]
2025-12-01 13:32:40,320 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.368m)
2025-12-01 13:32:40,320 - DEBUG - integration_test -   Set spline state to 9.3000
2025-12-01 13:32:40,321 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:40,321 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:40,335 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(7.970, 4.208), path_start=(0.000, 0.000), dist=9.012m
2025-12-01 13:32:40,335 - WARNING - integration_test - Could not update reference path at step 34: x and y must have the same length
2025-12-01 13:32:40,335 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2025-12-01 13:32:40,338 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:40,339 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:40,339 - INFO - integration_test - Warmstart k=0: x0=7.9697833495031585 , y0=4.207567034422429 , psi0=0.1583887925979423 , v0=2.9999999928699452 , spline0=9.300000051723218 , a0=0.0 , w0=0.0
2025-12-01 13:32:40,339 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:40,340 - INFO - integration_test - Dyn residual k=0: pred=[8.266028157755946, 4.254885246090518, 0.1583887925979423, 2.9999999928699452, 9.600000051010213], ws=[8.266028157755946, 4.254885246090518, 0.15838879259794236, 2.9999999928699452, 11.821597895215355], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.2215978442051423], res_norm=2.222e+00
2025-12-01 13:32:40,341 - INFO - integration_test - Dyn residual k=1: pred=[8.562272966008733, 4.3022034577586075, 0.15838879259794236, 2.9999999928699452, 12.121597894502349], ws=[8.562272966008733, 4.3022034577586075, 0.15838879259794236, 2.9999999928699452, 14.141811589537093], res=[0.0, 0.0, 0.0, 0.0, -2.0202136950347445], res_norm=2.020e+00
2025-12-01 13:32:40,341 - INFO - integration_test - Dyn residual k=2: pred=[8.85851777426152, 4.3495216694266965, 0.15838879259794236, 2.9999999928699452, 14.441811588824088], ws=[8.85851777426152, 4.3495216694266965, 0.15838879259794236, 2.9999999928699452, 16.392236959026008], res=[0.0, 0.0, 0.0, 0.0, -1.9504253702019199], res_norm=1.950e+00
2025-12-01 13:32:40,356 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,368 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,383 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,395 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,412 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,424 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,440 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,452 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,467 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,479 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,496 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,508 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,524 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,536 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,552 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,563 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,579 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,591 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,608 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,620 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:40,635 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:40,646 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:40,953 - INFO - integration_test - Step 34: MPC solve successful
2025-12-01 13:32:40,961 - INFO - integration_test - Step 34: Computed 10 numeric contouring constraints for visualization (s=9.300)
2025-12-01 13:32:40,961 - DEBUG - integration_test - Step 34: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:40,961 - INFO - integration_test - === Applying control at step 34 ===
2025-12-01 13:32:40,961 - INFO - integration_test -   Control dict from planner: {'a': 2.2515463205370038e-07, 'w': -0.23390747306210946}
2025-12-01 13:32:40,961 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:40,961 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:40,962 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:40,963 - INFO - integration_test - Step 34 completed in 0.643s
2025-12-01 13:32:40,985 - INFO - integration_test - Step 35 (contouring until path end)
2025-12-01 13:32:40,986 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.26655452 4.2514164  0.13499805 3.00000002 9.60000005]
2025-12-01 13:32:40,986 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.455m)
2025-12-01 13:32:40,986 - DEBUG - integration_test -   Set spline state to 9.6000
2025-12-01 13:32:40,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:40,987 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:41,001 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.267, 4.251), path_start=(0.000, 0.000), dist=9.296m
2025-12-01 13:32:41,001 - WARNING - integration_test - Could not update reference path at step 35: x and y must have the same length
2025-12-01 13:32:41,001 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2025-12-01 13:32:41,004 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:41,005 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:41,005 - INFO - integration_test - Warmstart k=0: x0=8.266554524649592 , y0=4.251416395768436 , psi0=0.13499804529173137 , v0=3.0 , spline0=9.600000053261759 , a0=0.0 , w0=0.0
2025-12-01 13:32:41,005 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:41,006 - INFO - integration_test - Dyn residual k=0: pred=[8.563825002935827, 4.291792907993655, 0.13499804529173137, 3.0, 9.90000005326176], ws=[8.563825002935827, 4.291792907993655, 0.1349980452917312, 3.0, 12.13826034643317], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -2.238260293171411], res_norm=2.238e+00
2025-12-01 13:32:41,007 - INFO - integration_test - Dyn residual k=1: pred=[8.861095481222062, 4.332169420218875, 0.1349980452917312, 3.0, 12.438260346433172], ws=[8.861095481222062, 4.332169420218875, 0.1349980452917312, 3.0, 14.535391611810994], res=[0.0, 0.0, 0.0, 0.0, -2.097131265377822], res_norm=2.097e+00
2025-12-01 13:32:41,008 - INFO - integration_test - Dyn residual k=2: pred=[9.158365959508297, 4.372545932444095, 0.1349980452917312, 3.0, 14.835391611810994], ws=[9.158365959508297, 4.372545932444095, 0.1349980452917312, 3.0, 16.89986476703035], res=[0.0, 0.0, 0.0, 0.0, -2.064473155219357], res_norm=2.064e+00
2025-12-01 13:32:41,023 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,035 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,052 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,064 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,080 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,092 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,108 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,120 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,135 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,147 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,163 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,175 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,190 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,203 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,219 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,231 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,247 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,258 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,274 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,286 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,302 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,313 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:41,627 - INFO - integration_test - Step 35: MPC solve successful
2025-12-01 13:32:41,635 - INFO - integration_test - Step 35: Computed 10 numeric contouring constraints for visualization (s=9.600)
2025-12-01 13:32:41,636 - DEBUG - integration_test - Step 35: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:41,636 - INFO - integration_test - === Applying control at step 35 ===
2025-12-01 13:32:41,636 - INFO - integration_test -   Control dict from planner: {'a': -4.57873815485016e-07, 'w': -0.03973754152048406}
2025-12-01 13:32:41,636 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:41,636 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:41,637 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:41,637 - INFO - integration_test - Step 35 completed in 0.652s
2025-12-01 13:32:41,658 - INFO - integration_test - Step 36 (contouring until path end)
2025-12-01 13:32:41,659 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.56390444 4.29120216 0.13102429 2.99999997 9.90000005]
2025-12-01 13:32:41,659 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.387m)
2025-12-01 13:32:41,659 - DEBUG - integration_test -   Set spline state to 9.9000
2025-12-01 13:32:41,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:41,660 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:41,673 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.564, 4.291), path_start=(0.000, 0.000), dist=9.579m
2025-12-01 13:32:41,674 - WARNING - integration_test - Could not update reference path at step 36: x and y must have the same length
2025-12-01 13:32:41,674 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2025-12-01 13:32:41,676 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:41,678 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:41,678 - INFO - integration_test - Warmstart k=0: x0=8.563904442900476 , y0=4.291202162511824 , psi0=0.13102429113968297 , v0=2.999999969598027 , spline0=9.900000050221562 , a0=0.0 , w0=0.0
2025-12-01 13:32:41,678 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:41,679 - INFO - integration_test - Dyn residual k=0: pred=[8.861333017028752, 4.330397078864624, 0.13102429113968297, 2.999999969598027, 10.200000047181366], ws=[8.861333017028752, 4.330397078864624, 0.13102429113968306, 2.999999969598027, 12.52887279652138], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, -2.3288727493400145], res_norm=2.329e+00
2025-12-01 13:32:41,679 - INFO - integration_test - Dyn residual k=1: pred=[9.158761591157027, 4.369591995217424, 0.13102429113968306, 2.999999969598027, 12.828872793481183], ws=[9.158761591157027, 4.369591995217424, 0.13102429113968306, 2.999999969598027, 14.962445645383413], res=[0.0, 0.0, 0.0, 0.0, -2.1335728519022297], res_norm=2.134e+00
2025-12-01 13:32:41,680 - INFO - integration_test - Dyn residual k=2: pred=[9.456190165285303, 4.408786911570224, 0.13102429113968306, 2.999999969598027, 15.262445642343216], ws=[9.456190165285303, 4.408786911570224, 0.13102429113968306, 2.999999969598027, 17.38333521552619], res=[0.0, 0.0, 0.0, 0.0, -2.120889573182975], res_norm=2.121e+00
2025-12-01 13:32:41,695 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,708 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,736 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,752 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,764 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,780 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,792 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,808 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,820 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,835 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,847 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,863 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,875 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,891 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,903 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,919 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,931 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,947 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,959 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:41,974 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:41,985 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:42,299 - INFO - integration_test - Step 36: MPC solve successful
2025-12-01 13:32:42,307 - INFO - integration_test - Step 36: Computed 10 numeric contouring constraints for visualization (s=9.900)
2025-12-01 13:32:42,307 - DEBUG - integration_test - Step 36: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:42,307 - INFO - integration_test - === Applying control at step 36 ===
2025-12-01 13:32:42,307 - INFO - integration_test -   Control dict from planner: {'a': 3.103331288426192e-07, 'w': -0.5401348858108608}
2025-12-01 13:32:42,307 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:42,307 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:42,308 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:42,308 - INFO - integration_test - Step 36 completed in 0.650s
2025-12-01 13:32:42,330 - INFO - integration_test - Step 37 (contouring until path end)
2025-12-01 13:32:42,331 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 8.86224669  4.3223474   0.0770108   3.         10.20000005]
2025-12-01 13:32:42,331 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.482m)
2025-12-01 13:32:42,331 - DEBUG - integration_test -   Set spline state to 10.2000
2025-12-01 13:32:42,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:42,332 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:42,346 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(8.862, 4.322), path_start=(0.000, 0.000), dist=9.860m
2025-12-01 13:32:42,346 - WARNING - integration_test - Could not update reference path at step 37: x and y must have the same length
2025-12-01 13:32:42,346 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2025-12-01 13:32:42,349 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:42,350 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:42,350 - INFO - integration_test - Warmstart k=0: x0=8.862246687797922 , y0=4.322347398892405 , psi0=0.07701080255859691 , v0=3.0 , spline0=10.200000050284697 , a0=0.0 , w0=0.0
2025-12-01 13:32:42,350 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:42,351 - INFO - integration_test - Dyn residual k=0: pred=[9.161357527814058, 4.345427810172133, 0.07701080255859691, 3.0, 10.500000050284697], ws=[9.161357527814058, 4.345427810172133, 0.07701080255859694, 3.0, 12.844604626560947], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, -2.34460457627625], res_norm=2.345e+00
2025-12-01 13:32:42,352 - INFO - integration_test - Dyn residual k=1: pred=[9.460468367830194, 4.368508221451861, 0.07701080255859694, 3.0, 13.144604626560948], ws=[9.460468367830194, 4.368508221451861, 0.07701080255859694, 3.0, 15.362626117726226], res=[0.0, 0.0, 0.0, 0.0, -2.2180214911652776], res_norm=2.218e+00
2025-12-01 13:32:42,353 - INFO - integration_test - Dyn residual k=2: pred=[9.759579207846329, 4.3915886327315885, 0.07701080255859694, 3.0, 15.662626117726226], ws=[9.759579207846329, 4.3915886327315885, 0.07701080255859694, 3.0, 17.818003775030306], res=[0.0, 0.0, 0.0, 0.0, -2.1553776573040793], res_norm=2.155e+00
2025-12-01 13:32:42,367 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,380 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,396 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,408 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,425 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,437 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,452 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,464 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,480 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,492 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,508 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,520 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,536 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,548 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,563 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,575 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,591 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,603 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,620 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,632 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:42,647 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:42,658 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:43,022 - INFO - integration_test - Step 37: MPC solve successful
2025-12-01 13:32:43,030 - INFO - integration_test - Step 37: Computed 10 numeric contouring constraints for visualization (s=10.200)
2025-12-01 13:32:43,030 - DEBUG - integration_test - Step 37: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:43,031 - INFO - integration_test - === Applying control at step 37 ===
2025-12-01 13:32:43,031 - INFO - integration_test -   Control dict from planner: {'a': 1.3448936510658852e-07, 'w': -0.15466247937481864}
2025-12-01 13:32:43,031 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:43,031 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:43,032 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:43,032 - INFO - integration_test - Step 37 completed in 0.701s
2025-12-01 13:32:43,055 - INFO - integration_test - Step 38 (contouring until path end)
2025-12-01 13:32:43,056 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.16152408  4.34311387  0.06154455  3.00000001 10.50000005]
2025-12-01 13:32:43,057 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.403m)
2025-12-01 13:32:43,057 - DEBUG - integration_test -   Set spline state to 10.5000
2025-12-01 13:32:43,057 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:43,057 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:43,071 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.162, 4.343), path_start=(0.000, 0.000), dist=10.139m
2025-12-01 13:32:43,072 - WARNING - integration_test - Could not update reference path at step 38: x and y must have the same length
2025-12-01 13:32:43,072 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2025-12-01 13:32:43,075 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:43,076 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:43,076 - INFO - integration_test - Warmstart k=0: x0=9.161524084027711 , y0=4.343113874976459 , psi0=0.06154455462111505 , v0=3.0 , spline0=10.500000051692725 , a0=0.0 , w0=0.0
2025-12-01 13:32:43,076 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:43,077 - INFO - integration_test - Dyn residual k=0: pred=[9.460956103510984, 4.3615655878554564, 0.06154455462111505, 3.0, 10.800000051692725], ws=[9.460956103510984, 4.3615655878554564, 0.061544554621114855, 3.0, 13.231543507787418], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, -2.4315434560946922], res_norm=2.432e+00
2025-12-01 13:32:43,078 - INFO - integration_test - Dyn residual k=1: pred=[9.760388122994257, 4.380017300734454, 0.061544554621114855, 3.0, 13.531543507787418], ws=[9.760388122994257, 4.380017300734454, 0.061544554621114855, 3.0, 15.78933604987064], res=[0.0, 0.0, 0.0, 0.0, -2.257792542083221], res_norm=2.258e+00
2025-12-01 13:32:43,079 - INFO - integration_test - Dyn residual k=2: pred=[10.05982014247753, 4.398469013613451, 0.061544554621114855, 3.0, 16.08933604987064], ws=[10.05982014247753, 4.398469013613451, 0.061544554621114855, 3.0, 18.305603835042987], res=[0.0, 0.0, 0.0, 0.0, -2.2162677851723487], res_norm=2.216e+00
2025-12-01 13:32:43,093 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,106 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,134 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,150 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,162 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,178 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,190 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,206 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,219 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,234 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,246 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,262 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,275 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,291 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,303 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,320 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,332 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,349 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,360 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,377 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,388 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:43,754 - INFO - integration_test - Step 38: MPC solve successful
2025-12-01 13:32:43,761 - INFO - integration_test - Step 38: Computed 10 numeric contouring constraints for visualization (s=10.500)
2025-12-01 13:32:43,762 - DEBUG - integration_test - Step 38: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:43,762 - INFO - integration_test - === Applying control at step 38 ===
2025-12-01 13:32:43,762 - INFO - integration_test -   Control dict from planner: {'a': -2.7925925876966436e-07, 'w': -0.16710869944011358}
2025-12-01 13:32:43,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:43,762 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:43,763 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:43,763 - INFO - integration_test - Step 38 completed in 0.707s
2025-12-01 13:32:43,786 - INFO - integration_test - Step 39 (contouring until path end)
2025-12-01 13:32:43,787 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.46109634  4.3590629   0.04483368  2.99999999 10.80000005]
2025-12-01 13:32:43,787 - INFO - integration_test - Step 39: Re-initialized spline from 10.8000 to 10.9043 (vehicle at (9.46, 4.36), closest path point at (9.75, 4.78), distance=0.511m)
2025-12-01 13:32:43,788 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 13:32:43,788 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:43,788 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:43,802 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.461, 4.359), path_start=(0.000, 0.000), dist=10.417m
2025-12-01 13:32:43,803 - WARNING - integration_test - Could not update reference path at step 39: x and y must have the same length
2025-12-01 13:32:43,803 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2025-12-01 13:32:43,806 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:43,807 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:43,807 - INFO - integration_test - Warmstart k=0: x0=9.461096336000898 , y0=4.359062902542888 , psi0=0.04483368467710369 , v0=2.9999999861543505 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 13:32:43,807 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:43,808 - INFO - integration_test - Dyn residual k=0: pred=[9.76079487622631, 4.372508502418601, 0.04483368467710369, 2.9999999861543505, 11.204332606831622], ws=[9.76079487622631, 4.372508502418601, 0.04483368467710358, 2.9999999861543505, 13.681034578862425], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.476701972030803], res_norm=2.477e+00
2025-12-01 13:32:43,809 - INFO - integration_test - Dyn residual k=1: pred=[10.060493416451722, 4.385954102294313, 0.04483368467710358, 2.9999999861543505, 13.98103457747786], ws=[10.060493416451722, 4.385954102294313, 0.04483368467710358, 2.9999999861543505, 16.2993459948074], res=[0.0, 0.0, 0.0, 0.0, -2.3183114173295394], res_norm=2.318e+00
2025-12-01 13:32:43,810 - INFO - integration_test - Dyn residual k=2: pred=[10.360191956677134, 4.399399702170026, 0.04483368467710358, 2.9999999861543505, 16.599345993422833], ws=[10.360191956677134, 4.399399702170026, 0.04483368467710358, 2.9999999861543505, 18.909108835896397], res=[0.0, 0.0, 0.0, 0.0, -2.309762842473564], res_norm=2.310e+00
2025-12-01 13:32:43,824 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,837 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,854 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,866 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,882 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,894 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,910 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,922 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,938 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,950 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,966 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:43,978 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:43,994 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,006 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,023 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,035 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,050 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,062 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,078 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,091 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,108 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,118 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:44,475 - INFO - integration_test - Step 39: MPC solve successful
2025-12-01 13:32:44,482 - INFO - integration_test - Step 39: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 13:32:44,483 - DEBUG - integration_test - Step 39: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:44,483 - INFO - integration_test - === Applying control at step 39 ===
2025-12-01 13:32:44,483 - INFO - integration_test -   Control dict from planner: {'a': 2.691773220318004e-07, 'w': -0.4297511300320288}
2025-12-01 13:32:44,483 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:44,483 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:44,484 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:44,484 - INFO - integration_test - Step 39 completed in 0.698s
2025-12-01 13:32:44,505 - INFO - integration_test - Step 40 (contouring until path end)
2025-12-01 13:32:44,506 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[9.76099150e+00 4.36606557e+00 1.85857167e-03 3.00000001e+00
 1.12043326e+01]
2025-12-01 13:32:44,507 - DEBUG - integration_test - Step 40: Using propagated spline 11.2043 (close to path, dist=0.416m)
2025-12-01 13:32:44,507 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 13:32:44,507 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:44,508 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:44,521 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.761, 4.366), path_start=(0.000, 0.000), dist=10.693m
2025-12-01 13:32:44,522 - WARNING - integration_test - Could not update reference path at step 40: x and y must have the same length
2025-12-01 13:32:44,522 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2025-12-01 13:32:44,525 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:44,526 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:44,526 - INFO - integration_test - Warmstart k=0: x0=9.760991504845494 , y0=4.366065565878384 , psi0=0.0018585716739008135 , v0=3.0 , spline0=11.204332609523394 , a0=0.0 , w0=0.0
2025-12-01 13:32:44,526 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:44,527 - INFO - integration_test - Dyn residual k=0: pred=[10.060990986702343, 4.366623137059552, 0.0018585716739008135, 3.0, 11.504332609523395], ws=[10.060990986702343, 4.366623137059552, 0.0018585716739010216, 3.0, 14.067073895218394], res=[0.0, 0.0, -2.0816681711721685e-16, 0.0, -2.562741285694999], res_norm=2.563e+00
2025-12-01 13:32:44,528 - INFO - integration_test - Dyn residual k=1: pred=[10.360990468559192, 4.36718070824072, 0.0018585716739010216, 3.0, 14.367073895218395], ws=[10.360990468559192, 4.36718070824072, 0.0018585716739010216, 3.0, 16.728801077040046], res=[0.0, 0.0, 0.0, 0.0, -2.361727181821651], res_norm=2.362e+00
2025-12-01 13:32:44,529 - INFO - integration_test - Dyn residual k=2: pred=[10.660989950416042, 4.3677382794218875, 0.0018585716739010216, 3.0, 17.028801077040047], ws=[10.660989950416042, 4.3677382794218875, 0.0018585716739010216, 3.0, 19.513835333424968], res=[0.0, 0.0, 0.0, 0.0, -2.485034256384921], res_norm=2.485e+00
2025-12-01 13:32:44,544 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,556 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,573 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,585 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,601 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,614 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,630 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,642 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,658 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,670 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,686 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,698 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,714 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,726 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,743 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,755 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,772 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,785 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,801 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,814 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:44,829 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:44,840 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:45,269 - INFO - integration_test - Step 40: MPC solve successful
2025-12-01 13:32:45,277 - INFO - integration_test - Step 40: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 13:32:45,278 - DEBUG - integration_test - Step 40: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:45,278 - INFO - integration_test - === Applying control at step 40 ===
2025-12-01 13:32:45,278 - INFO - integration_test -   Control dict from planner: {'a': -9.29319950469431e-07, 'w': -0.08472876088891376}
2025-12-01 13:32:45,278 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:45,278 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:45,279 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:45,280 - INFO - integration_test - Step 40 completed in 0.774s
2025-12-01 13:32:45,301 - INFO - integration_test - Step 41 (contouring until path end)
2025-12-01 13:32:45,302 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 1.00609898e+01  4.36535221e+00 -6.61430441e-03  2.99999992e+00
  1.15043326e+01]
2025-12-01 13:32:45,303 - INFO - integration_test - Step 41: Re-initialized spline from 11.5043 to 10.9043 (vehicle at (10.06, 4.37), closest path point at (9.75, 4.78), distance=0.521m)
2025-12-01 13:32:45,303 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 13:32:45,303 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:45,303 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:45,318 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.061, 4.365), path_start=(0.000, 0.000), dist=10.967m
2025-12-01 13:32:45,318 - WARNING - integration_test - Could not update reference path at step 41: x and y must have the same length
2025-12-01 13:32:45,318 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2025-12-01 13:32:45,321 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:45,322 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:45,322 - INFO - integration_test - Warmstart k=0: x0=10.06098975600278 , y0=4.3653522087877965 , psi0=-0.006614304414990562 , v0=2.9999999201400875 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 13:32:45,322 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:45,323 - INFO - integration_test - Dyn residual k=0: pred=[10.360983185687454, 4.363367931984556, -0.006614304414990562, 2.9999999201400875, 11.204332600230195], ws=[10.360983185687454, 4.363367931984556, -0.006614304414990446, 2.9999999201400875, 13.681034572261002], res=[0.0, 0.0, -1.1622647289044608e-16, 0.0, -2.4767019720308063], res_norm=2.477e+00
2025-12-01 13:32:45,324 - INFO - integration_test - Dyn residual k=1: pred=[10.660976615372128, 4.361383655181317, -0.006614304414990446, 2.9999999201400875, 13.98103456427501], ws=[10.660976615372128, 4.361383655181317, -0.006614304414990446, 2.9999999201400875, 16.298918950357354], res=[0.0, 0.0, 0.0, 0.0, -2.317884386082344], res_norm=2.318e+00
2025-12-01 13:32:45,324 - INFO - integration_test - Dyn residual k=2: pred=[10.960970045056802, 4.359399378378078, -0.006614304414990446, 2.9999999201400875, 16.598918942371363], ws=[10.960970045056802, 4.359399378378078, -0.006614304414990446, 2.9999999201400875, 18.907578179344096], res=[0.0, 0.0, 0.0, 0.0, -2.3086592369727335], res_norm=2.309e+00
2025-12-01 13:32:45,339 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,352 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,368 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,380 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,396 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,408 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,423 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,435 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,451 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,463 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,478 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,490 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,506 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,518 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,534 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,546 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,562 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,574 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,590 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,604 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:45,622 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:45,634 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:46,063 - INFO - integration_test - Step 41: MPC solve successful
2025-12-01 13:32:46,071 - INFO - integration_test - Step 41: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 13:32:46,071 - DEBUG - integration_test - Step 41: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:46,071 - INFO - integration_test - === Applying control at step 41 ===
2025-12-01 13:32:46,071 - INFO - integration_test -   Control dict from planner: {'a': 7.320433545528497e-07, 'w': -0.8000000046971234}
2025-12-01 13:32:46,071 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:46,071 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:46,072 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:46,072 - INFO - integration_test - Step 41 completed in 0.770s
2025-12-01 13:32:46,100 - INFO - integration_test - Step 42 (contouring until path end)
2025-12-01 13:32:46,101 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.36058397  4.35137671 -0.0866143   2.99999999 11.20433261]
2025-12-01 13:32:46,101 - DEBUG - integration_test - Step 42: Using propagated spline 11.2043 (close to path, dist=0.438m)
2025-12-01 13:32:46,101 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 13:32:46,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:46,102 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:46,116 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.361, 4.351), path_start=(0.000, 0.000), dist=11.237m
2025-12-01 13:32:46,117 - WARNING - integration_test - Could not update reference path at step 42: x and y must have the same length
2025-12-01 13:32:46,117 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2025-12-01 13:32:46,120 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:46,121 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:46,121 - INFO - integration_test - Warmstart k=0: x0=10.360583974238503 , y0=4.351376708688216 , psi0=-0.0866143048847029 , v0=2.999999993344423 , spline0=11.20433260755063 , a0=0.0 , w0=0.0
2025-12-01 13:32:46,121 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:46,122 - INFO - integration_test - Dyn residual k=0: pred=[10.659459371235082, 4.32542489428531, -0.0866143048847029, 2.999999993344423, 11.504332606885072], ws=[10.659459371235082, 4.32542489428531, -0.08661430488470279, 2.999999993344423, 14.067073892012573], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.562741285127501], res_norm=2.563e+00
2025-12-01 13:32:46,123 - INFO - integration_test - Dyn residual k=1: pred=[10.95833476823166, 4.299473079882404, -0.08661430488470279, 2.999999993344423, 14.367073891347015], ws=[10.95833476823166, 4.299473079882404, -0.08661430488470279, 2.999999993344423, 16.72836376210143], res=[0.0, 0.0, 0.0, 0.0, -2.3612898707544154], res_norm=2.361e+00
2025-12-01 13:32:46,124 - INFO - integration_test - Dyn residual k=2: pred=[11.257210165228239, 4.273521265479498, -0.08661430488470279, 2.999999993344423, 17.028363761435873], ws=[11.257210165228239, 4.273521265479498, -0.08661430488470279, 2.999999993344423, 19.51253327814004], res=[0.0, 0.0, 0.0, 0.0, -2.484169516704167], res_norm=2.484e+00
2025-12-01 13:32:46,139 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,152 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,169 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,181 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,198 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,210 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,227 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,239 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,255 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,268 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,283 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,295 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,312 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,324 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,341 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,353 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,369 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,381 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,397 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,410 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:46,426 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:46,438 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:46,960 - INFO - integration_test - Step 42: MPC solve successful
2025-12-01 13:32:46,968 - INFO - integration_test - Step 42: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 13:32:46,969 - DEBUG - integration_test - Step 42: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:46,969 - INFO - integration_test - === Applying control at step 42 ===
2025-12-01 13:32:46,969 - INFO - integration_test -   Control dict from planner: {'a': 2.443593957420508e-07, 'w': 0.8000000094042559}
2025-12-01 13:32:46,969 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:46,969 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:46,970 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:46,970 - INFO - integration_test - Step 42 completed in 0.870s
2025-12-01 13:32:46,994 - INFO - integration_test - Step 43 (contouring until path end)
2025-12-01 13:32:46,994 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 1.06601782e+01  4.33740121e+00 -6.61430394e-03  3.00000002e+00
  1.15043326e+01]
2025-12-01 13:32:46,995 - INFO - integration_test - Step 43: Re-initialized spline from 11.5043 to 11.5101 (vehicle at (10.66, 4.34), closest path point at (10.40, 4.79), distance=0.520m)
2025-12-01 13:32:46,995 - DEBUG - integration_test -   Set spline state to 11.5101
2025-12-01 13:32:46,995 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:46,995 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:47,009 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.660, 4.337), path_start=(0.000, 0.000), dist=11.509m
2025-12-01 13:32:47,009 - WARNING - integration_test - Could not update reference path at step 43: x and y must have the same length
2025-12-01 13:32:47,009 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2025-12-01 13:32:47,012 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:47,013 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:47,013 - INFO - integration_test - Warmstart k=0: x0=10.66017819735502 , y0=4.337401208496767 , psi0=-0.006614303944277311 , v0=3.0 , spline0=11.510128864228196 , a0=0.0 , w0=0.0
2025-12-01 13:32:47,013 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:47,014 - INFO - integration_test - Dyn residual k=0: pred=[10.960171635026445, 4.335416931781917, -0.006614303944277311, 3.0, 11.810128864228197], ws=[10.960171635026445, 4.335416931781917, -0.0066143039442772, 3.0, 14.390320401389912], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.5801915371617152], res_norm=2.580e+00
2025-12-01 13:32:47,015 - INFO - integration_test - Dyn residual k=1: pred=[11.26016507269787, 4.3334326550670665, -0.0066143039442772, 3.0, 14.690320401389913], ws=[11.26016507269787, 4.3334326550670665, -0.0066143039442772, 3.0, 17.160750334041133], res=[0.0, 0.0, 0.0, 0.0, -2.4704299326512196], res_norm=2.470e+00
2025-12-01 13:32:47,016 - INFO - integration_test - Dyn residual k=2: pred=[11.560158510369295, 4.331448378352216, -0.0066143039442772, 3.0, 17.460750334041133], ws=[11.560158510369295, 4.331448378352216, -0.0066143039442772, 3.0, 20.005236066113763], res=[0.0, 0.0, 0.0, 0.0, -2.54448573207263], res_norm=2.544e+00
2025-12-01 13:32:47,030 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,043 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,059 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,071 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,087 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,099 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,115 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,127 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,143 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,156 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,172 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,184 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,200 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,213 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,229 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,241 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,258 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,271 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,288 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,302 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,320 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,333 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:47,666 - INFO - integration_test - Step 43: MPC solve successful
2025-12-01 13:32:47,674 - INFO - integration_test - Step 43: Computed 10 numeric contouring constraints for visualization (s=11.510)
2025-12-01 13:32:47,674 - DEBUG - integration_test - Step 43: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:47,674 - INFO - integration_test - === Applying control at step 43 ===
2025-12-01 13:32:47,674 - INFO - integration_test -   Control dict from planner: {'a': 6.524928090499762e-08, 'w': 0.14673316396910693}
2025-12-01 13:32:47,674 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:47,674 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:47,675 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:47,675 - INFO - integration_test - Step 43 completed in 0.682s
2025-12-01 13:32:47,696 - INFO - integration_test - Step 44 (contouring until path end)
2025-12-01 13:32:47,697 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[1.09601754e+01 4.33761791e+00 8.05901245e-03 3.00000002e+00
 1.18101289e+01]
2025-12-01 13:32:47,697 - DEBUG - integration_test - Step 44: Using propagated spline 11.8101 (close to path, dist=0.434m)
2025-12-01 13:32:47,697 - DEBUG - integration_test -   Set spline state to 11.8101
2025-12-01 13:32:47,698 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:47,698 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:47,712 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.960, 4.338), path_start=(0.000, 0.000), dist=11.787m
2025-12-01 13:32:47,713 - WARNING - integration_test - Could not update reference path at step 44: x and y must have the same length
2025-12-01 13:32:47,713 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2025-12-01 13:32:47,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:47,717 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:47,717 - INFO - integration_test - Warmstart k=0: x0=10.960175429875033 , y0=4.3376179128124095 , psi0=0.008059012452633381 , v0=3.0 , spline0=11.810128866658726 , a0=0.0 , w0=0.0
2025-12-01 13:32:47,717 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:47,718 - INFO - integration_test - Dyn residual k=0: pred=[11.260165687775503, 4.340035590377576, 0.008059012452633381, 3.0, 12.110128866658727], ws=[11.260165687775503, 4.340035590377576, 0.008059012452633407, 3.0, 14.705768267602025], res=[0.0, 0.0, -2.6020852139652106e-17, 0.0, -2.5956394009432984], res_norm=2.596e+00
2025-12-01 13:32:47,719 - INFO - integration_test - Dyn residual k=1: pred=[11.560155945675973, 4.342453267942742, 0.008059012452633407, 3.0, 15.005768267602026], ws=[11.560155945675973, 4.342453267942742, 0.008059012452633407, 3.0, 17.500648149267725], res=[0.0, 0.0, 0.0, 0.0, -2.4948798816656996], res_norm=2.495e+00
2025-12-01 13:32:47,719 - INFO - integration_test - Dyn residual k=2: pred=[11.860146203576443, 4.344870945507908, 0.008059012452633407, 3.0, 17.800648149267726], ws=[11.860146203576443, 4.344870945507908, 0.008059012452633407, 3.0, 20.38222247085521], res=[0.0, 0.0, 0.0, 0.0, -2.5815743215874853], res_norm=2.582e+00
2025-12-01 13:32:47,734 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,746 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,763 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,775 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,791 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,803 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,819 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,831 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,847 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,858 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,874 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,886 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,902 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,914 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,930 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,942 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,958 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,970 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:47,985 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:47,997 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,014 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,025 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:48,400 - INFO - integration_test - Step 44: MPC solve successful
2025-12-01 13:32:48,408 - INFO - integration_test - Step 44: Computed 10 numeric contouring constraints for visualization (s=11.810)
2025-12-01 13:32:48,409 - DEBUG - integration_test - Step 44: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:48,409 - INFO - integration_test - === Applying control at step 44 ===
2025-12-01 13:32:48,409 - INFO - integration_test -   Control dict from planner: {'a': 3.7953948865738975e-08, 'w': -0.8000000099848168}
2025-12-01 13:32:48,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:48,409 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:48,410 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:48,410 - INFO - integration_test - Step 44 completed in 0.713s
2025-12-01 13:32:48,434 - INFO - integration_test - Step 45 (contouring until path end)
2025-12-01 13:32:48,437 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.25994246  4.3280398  -0.07194099  3.00000003 12.11012887]
2025-12-01 13:32:48,437 - DEBUG - integration_test - Step 45: Using propagated spline 12.1101 (close to path, dist=0.484m)
2025-12-01 13:32:48,437 - DEBUG - integration_test -   Set spline state to 12.1101
2025-12-01 13:32:48,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:48,438 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:48,452 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.260, 4.328), path_start=(0.000, 0.000), dist=12.063m
2025-12-01 13:32:48,452 - WARNING - integration_test - Could not update reference path at step 45: x and y must have the same length
2025-12-01 13:32:48,452 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2025-12-01 13:32:48,455 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:48,456 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:48,456 - INFO - integration_test - Warmstart k=0: x0=11.259942462960208 , y0=4.328039800085604 , psi0=-0.07194098854584831 , v0=3.0 , spline0=12.110128869468795 , a0=0.0 , w0=0.0
2025-12-01 13:32:48,456 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:48,457 - INFO - integration_test - Dyn residual k=0: pred=[11.559166471850766, 4.306476115255233, -0.07194098854584831, 3.0, 12.410128869468796], ws=[11.559166471850766, 4.306476115255233, -0.0719409885458484, 3.0, 15.096358307601228], res=[0.0, 0.0, 9.71445146547012e-17, 0.0, -2.6862294381324325], res_norm=2.686e+00
2025-12-01 13:32:48,458 - INFO - integration_test - Dyn residual k=1: pred=[11.858390480741324, 4.284912430424861, -0.0719409885458484, 3.0, 15.39635830760123], ws=[11.858390480741324, 4.284912430424861, -0.0719409885458484, 3.0, 18.038258266192276], res=[0.0, 0.0, 0.0, 0.0, -2.641899958591047], res_norm=2.642e+00
2025-12-01 13:32:48,459 - INFO - integration_test - Dyn residual k=2: pred=[12.157614489631882, 4.26334874559449, -0.0719409885458484, 3.0, 18.338258266192277], ws=[12.157614489631882, 4.26334874559449, -0.0719409885458484, 3.0, 21.023402621261752], res=[0.0, 0.0, 0.0, 0.0, -2.6851443550694754], res_norm=2.685e+00
2025-12-01 13:32:48,473 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,486 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,503 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,515 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,532 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,544 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,560 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,572 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,588 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,601 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,617 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,629 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,645 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,657 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,672 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,684 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,700 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,713 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,729 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,741 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:48,756 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:48,767 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:49,110 - INFO - integration_test - Step 45: MPC solve successful
2025-12-01 13:32:49,117 - INFO - integration_test - Step 45: Computed 10 numeric contouring constraints for visualization (s=12.110)
2025-12-01 13:32:49,118 - DEBUG - integration_test - Step 45: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:49,118 - INFO - integration_test - === Applying control at step 45 ===
2025-12-01 13:32:49,118 - INFO - integration_test -   Control dict from planner: {'a': -1.0384177707746906e-06, 'w': -0.7999998142838652}
2025-12-01 13:32:49,118 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:49,118 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:49,119 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:49,119 - INFO - integration_test - Step 45 completed in 0.683s
2025-12-01 13:32:49,140 - INFO - integration_test - Step 46 (contouring until path end)
2025-12-01 13:32:49,141 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.55798532  4.29453653 -0.15194097  2.99999992 12.41012886]
2025-12-01 13:32:49,142 - DEBUG - integration_test - Step 46: Using propagated spline 12.4101 (close to path, dist=0.441m)
2025-12-01 13:32:49,142 - DEBUG - integration_test -   Set spline state to 12.4101
2025-12-01 13:32:49,142 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:49,143 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:49,156 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.558, 4.295), path_start=(0.000, 0.000), dist=12.330m
2025-12-01 13:32:49,156 - WARNING - integration_test - Could not update reference path at step 46: x and y must have the same length
2025-12-01 13:32:49,156 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2025-12-01 13:32:49,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:49,160 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:49,160 - INFO - integration_test - Warmstart k=0: x0=11.55798531645701 , y0=4.294536533509657 , psi0=-0.15194096997423484 , v0=2.9999999242589084 , spline0=12.410128861894686 , a0=0.0 , w0=0.0
2025-12-01 13:32:49,160 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:49,161 - INFO - integration_test - Dyn residual k=0: pred=[11.854529057168195, 4.2491294272315425, -0.15194096997423484, 2.9999999242589084, 12.710128854320576], ws=[11.854529057168195, 4.2491294272315425, -0.1519409699742349, 2.9999999242589084, 15.412761138105322], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -2.7026322837847463], res_norm=2.703e+00
2025-12-01 13:32:49,162 - INFO - integration_test - Dyn residual k=1: pred=[12.15107279787938, 4.203722320953428, -0.1519409699742349, 2.9999999242589084, 15.712761130531213], ws=[12.15107279787938, 4.203722320953428, -0.1519409699742349, 2.9999999242589084, 18.38243347985558], res=[0.0, 0.0, 0.0, 0.0, -2.669672349324369], res_norm=2.670e+00
2025-12-01 13:32:49,163 - INFO - integration_test - Dyn residual k=2: pred=[12.447616538590564, 4.158315214675314, -0.1519409699742349, 2.9999999242589084, 18.682433472281474], ws=[12.447616538590564, 4.158315214675314, -0.1519409699742349, 2.9999999242589084, 21.519043875008748], res=[0.0, 0.0, 0.0, 0.0, -2.836610402727274], res_norm=2.837e+00
2025-12-01 13:32:49,177 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,190 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,206 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,218 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,235 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,247 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,263 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,275 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,291 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,303 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,319 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,332 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,347 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,359 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,376 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,388 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,404 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,416 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,432 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,444 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:49,460 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:49,472 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:49,923 - INFO - integration_test - Step 46: MPC solve successful
2025-12-01 13:32:49,930 - INFO - integration_test - Step 46: Computed 10 numeric contouring constraints for visualization (s=12.410)
2025-12-01 13:32:49,931 - DEBUG - integration_test - Step 46: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:49,931 - INFO - integration_test - === Applying control at step 46 ===
2025-12-01 13:32:49,931 - INFO - integration_test -   Control dict from planner: {'a': -2.3046689754730225e-06, 'w': -0.799999772169259}
2025-12-01 13:32:49,931 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:49,931 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:49,932 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:49,932 - INFO - integration_test - Step 46 completed in 0.791s
2025-12-01 13:32:49,952 - INFO - integration_test - Step 47 (contouring until path end)
2025-12-01 13:32:49,953 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.85239752  4.23732243 -0.23194095  2.99999969 12.71012883]
2025-12-01 13:32:49,954 - INFO - integration_test - Step 47: Re-initialized spline from 12.7101 to 12.7217 (vehicle at (11.85, 4.24), closest path point at (11.70, 4.71), distance=0.502m)
2025-12-01 13:32:49,954 - DEBUG - integration_test -   Set spline state to 12.7217
2025-12-01 13:32:49,954 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:49,955 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:49,968 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.852, 4.237), path_start=(0.000, 0.000), dist=12.587m
2025-12-01 13:32:49,969 - WARNING - integration_test - Could not update reference path at step 47: x and y must have the same length
2025-12-01 13:32:49,969 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2025-12-01 13:32:49,972 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:49,973 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:49,973 - INFO - integration_test - Warmstart k=0: x0=11.85239752288185 , y0=4.237322426149907 , psi0=-0.23194094719116076 , v0=2.999999693792011 , spline0=12.721721376252217 , a0=0.0 , w0=0.0
2025-12-01 13:32:49,973 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:49,974 - INFO - integration_test - Dyn residual k=0: pred=[12.144364113755454, 4.1683623547957795, -0.23194094719116076, 2.999999693792011, 13.021721345631418], ws=[12.144364113755454, 4.1683623547957795, -0.23194094719116087, 2.999999693792011, 15.825804317075319], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.8040829714439006], res_norm=2.804e+00
2025-12-01 13:32:49,975 - INFO - integration_test - Dyn residual k=1: pred=[12.436330704629059, 4.099402283441652, -0.23194094719116087, 2.999999693792011, 16.12580428645452], ws=[12.436330704629059, 4.099402283441652, -0.23194094719116087, 2.999999693792011, 18.864164510815524], res=[0.0, 0.0, 0.0, 0.0, -2.738360224361003], res_norm=2.738e+00
2025-12-01 13:32:49,976 - INFO - integration_test - Dyn residual k=2: pred=[12.728297295502664, 4.030442212087524, -0.23194094719116087, 2.999999693792011, 19.164164480194724], ws=[12.728297295502664, 4.030442212087524, -0.23194094719116087, 2.999999693792011, 22.09420696637303], res=[0.0, 0.0, 0.0, 0.0, -2.930042486178305], res_norm=2.930e+00
2025-12-01 13:32:49,990 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,003 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,020 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,032 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,048 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,060 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,088 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,104 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,117 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,133 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,145 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,161 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,173 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,190 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,202 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,218 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,230 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,246 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,258 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,274 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,285 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:50,710 - INFO - integration_test - Step 47: MPC solve successful
2025-12-01 13:32:50,718 - INFO - integration_test - Step 47: Computed 10 numeric contouring constraints for visualization (s=12.722)
2025-12-01 13:32:50,718 - DEBUG - integration_test - Step 47: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:50,718 - INFO - integration_test - === Applying control at step 47 ===
2025-12-01 13:32:50,718 - INFO - integration_test -   Control dict from planner: {'a': -7.810266420089371e-07, 'w': -0.7999995714434001}
2025-12-01 13:32:50,718 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:50,718 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:50,719 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:50,720 - INFO - integration_test - Step 47 completed in 0.767s
2025-12-01 13:32:50,742 - INFO - integration_test - Step 48 (contouring until path end)
2025-12-01 13:32:50,743 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.14129585  4.15676346 -0.3119409   2.99999962 13.02172134]
2025-12-01 13:32:50,744 - INFO - integration_test - Step 48: Re-initialized spline from 13.0217 to 13.3275 (vehicle at (12.14, 4.16), closest path point at (12.34, 4.65), distance=0.528m)
2025-12-01 13:32:50,744 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 13:32:50,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:50,744 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:50,757 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.141, 4.157), path_start=(0.000, 0.000), dist=12.833m
2025-12-01 13:32:50,758 - WARNING - integration_test - Could not update reference path at step 48: x and y must have the same length
2025-12-01 13:32:50,758 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2025-12-01 13:32:50,761 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:50,762 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:50,762 - INFO - integration_test - Warmstart k=0: x0=12.141295852519812 , y0=4.156763458447769 , psi0=-0.31194090433550076 , v0=2.9999996156893465 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 13:32:50,762 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:50,763 - INFO - integration_test - Dyn residual k=0: pred=[12.426817722000086, 4.064691535529588, -0.31194090433550076, 2.9999996156893465, 13.627517593833163], ws=[12.426817722000086, 4.064691535529588, -0.3119409043355006, 2.9999996156893465, 16.559076653627134], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.9315590597939707], res_norm=2.932e+00
2025-12-01 13:32:50,763 - INFO - integration_test - Dyn residual k=1: pred=[12.71233959148036, 3.9726196126114055, -0.3119409043355006, 2.9999996156893465, 16.85907661519607], ws=[12.71233959148036, 3.9726196126114055, -0.3119409043355006, 2.9999996156893465, 19.811943627525295], res=[0.0, 0.0, 0.0, 0.0, -2.952867012329225], res_norm=2.953e+00
2025-12-01 13:32:50,764 - INFO - integration_test - Dyn residual k=2: pred=[12.997861460960634, 3.8805476896932234, -0.3119409043355006, 2.9999996156893465, 20.11194358909423], ws=[12.997861460960634, 3.8805476896932234, -0.3119409043355006, 2.9999996156893465, 23.19979911248688], res=[0.0, 0.0, 0.0, 0.0, -3.0878555233926477], res_norm=3.088e+00
2025-12-01 13:32:50,779 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,792 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,808 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,820 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,836 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,848 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,863 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,875 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,891 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,903 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,918 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,930 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,946 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,958 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:50,974 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:50,986 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,002 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,014 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,030 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,042 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,057 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,068 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:51,527 - INFO - integration_test - Step 48: MPC solve successful
2025-12-01 13:32:51,535 - INFO - integration_test - Step 48: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 13:32:51,535 - DEBUG - integration_test - Step 48: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:51,535 - INFO - integration_test - === Applying control at step 48 ===
2025-12-01 13:32:51,535 - INFO - integration_test -   Control dict from planner: {'a': 2.753225480169362e-06, 'w': -0.8000000081768277}
2025-12-01 13:32:51,535 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:51,535 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:51,536 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:51,537 - INFO - integration_test - Step 48 completed in 0.794s
2025-12-01 13:32:51,557 - INFO - integration_test - Step 49 (contouring until path end)
2025-12-01 13:32:51,558 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.42283237  4.05337492 -0.39194091  2.99999989 13.62751762]
2025-12-01 13:32:51,559 - INFO - integration_test - Step 49: Re-initialized spline from 13.6275 to 13.3275 (vehicle at (12.42, 4.05), closest path point at (12.34, 4.65), distance=0.599m)
2025-12-01 13:32:51,559 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 13:32:51,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:51,560 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:51,573 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.423, 4.053), path_start=(0.000, 0.000), dist=13.067m
2025-12-01 13:32:51,574 - WARNING - integration_test - Could not update reference path at step 49: x and y must have the same length
2025-12-01 13:32:51,574 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2025-12-01 13:32:51,577 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:51,578 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:51,578 - INFO - integration_test - Warmstart k=0: x0=12.422832366464572 , y0=4.053374922711297 , psi0=-0.3919409051531835 , v0=2.9999998910118943 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 13:32:51,578 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:51,579 - INFO - integration_test - Dyn residual k=0: pred=[12.70008317895683, 3.9387800692793156, -0.3919409051531835, 2.9999998910118943, 13.627517621365419], ws=[12.70008317895683, 3.9387800692793156, -0.39194090515318347, 2.9999998910118943, 16.55907668115939], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.9315590597939707], res_norm=2.932e+00
2025-12-01 13:32:51,580 - INFO - integration_test - Dyn residual k=1: pred=[12.977333991449086, 3.8241852158473337, -0.39194090515318347, 2.9999998910118943, 16.859076670260578], ws=[12.977333991449086, 3.8241852158473337, -0.39194090515318347, 2.9999998910118943, 19.81321467067248], res=[0.0, 0.0, 0.0, 0.0, -2.954138000411902], res_norm=2.954e+00
2025-12-01 13:32:51,581 - INFO - integration_test - Dyn residual k=2: pred=[13.254584803941343, 3.709590362415352, -0.39194090515318347, 2.9999998910118943, 20.113214659773668], ws=[13.254584803941343, 3.709590362415352, -0.39194090515318347, 2.9999998910118943, 23.205496534074715], res=[0.0, 0.0, 0.0, 0.0, -3.0922818743010474], res_norm=3.092e+00
2025-12-01 13:32:51,596 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,608 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,625 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,637 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,652 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,664 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,680 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,692 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,708 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,720 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,736 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,748 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,763 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,775 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,792 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,804 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,832 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,847 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,859 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:51,875 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:51,886 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:52,364 - INFO - integration_test - Step 49: MPC solve successful
2025-12-01 13:32:52,372 - INFO - integration_test - Step 49: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 13:32:52,372 - DEBUG - integration_test - Step 49: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:52,372 - INFO - integration_test - === Applying control at step 49 ===
2025-12-01 13:32:52,372 - INFO - integration_test -   Control dict from planner: {'a': 9.319499860276177e-07, 'w': -0.7999999685750754}
2025-12-01 13:32:52,372 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:52,372 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:52,373 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:52,373 - INFO - integration_test - Step 49 completed in 0.815s
2025-12-01 13:32:52,396 - INFO - integration_test - Step 50 (contouring until path end)
2025-12-01 13:32:52,397 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.6952062   3.92781814 -0.4719409   2.99999998 13.62751763]
2025-12-01 13:32:52,398 - INFO - integration_test - Step 50: Re-initialized spline from 13.6275 to 13.9333 (vehicle at (12.70, 3.93), closest path point at (12.98, 4.57), distance=0.701m)
2025-12-01 13:32:52,398 - DEBUG - integration_test -   Set spline state to 13.9333
2025-12-01 13:32:52,398 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:52,399 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:52,412 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.695, 3.928), path_start=(0.000, 0.000), dist=13.289m
2025-12-01 13:32:52,413 - WARNING - integration_test - Could not update reference path at step 50: x and y must have the same length
2025-12-01 13:32:52,413 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2025-12-01 13:32:52,416 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:52,417 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:52,417 - INFO - integration_test - Warmstart k=0: x0=12.695206197690943 , y0=3.927818142235894 , psi0=-0.47194090201069105 , v0=2.9999999842068927 , spline0=13.933313888276238 , a0=0.0 , w0=0.0
2025-12-01 13:32:52,417 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:52,418 - INFO - integration_test - Dyn residual k=0: pred=[12.962412476743904, 3.7914333795712736, -0.47194090201069105, 2.9999999842068927, 14.233313886696928], ws=[12.962412476743904, 3.7914333795712736, -0.47194090201069105, 2.9999999842068927, 17.306124357445285], res=[0.0, 0.0, 0.0, 0.0, -3.0728104707483563], res_norm=3.073e+00
2025-12-01 13:32:52,418 - INFO - integration_test - Dyn residual k=1: pred=[13.229618755796864, 3.6550486169066536, -0.47194090201069105, 2.9999999842068927, 17.606124355865973], ws=[13.229618755796864, 3.6550486169066536, -0.47194090201069105, 2.9999999842068927, 20.797819971044433], res=[0.0, 0.0, 0.0, 0.0, -3.1916956151784603], res_norm=3.192e+00
2025-12-01 13:32:52,419 - INFO - integration_test - Dyn residual k=2: pred=[13.496825034849824, 3.5186638542420337, -0.47194090201069105, 2.9999999842068927, 21.09781996946512], ws=[13.496825034849824, 3.5186638542420337, -0.47194090201069105, 2.9999999842068927, 24.343893311441594], res=[0.0, 0.0, 0.0, 0.0, -3.246073341976473], res_norm=3.246e+00
2025-12-01 13:32:52,434 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,446 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,462 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,474 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,490 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,503 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,519 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,531 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,547 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,559 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,587 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,603 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,615 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,631 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,643 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,658 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,670 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,686 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,699 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:52,714 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:52,725 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:53,026 - INFO - integration_test - Step 50: MPC solve successful
2025-12-01 13:32:53,034 - INFO - integration_test - Step 50: Computed 10 numeric contouring constraints for visualization (s=13.933)
2025-12-01 13:32:53,034 - DEBUG - integration_test - Step 50: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:53,034 - INFO - integration_test - === Applying control at step 50 ===
2025-12-01 13:32:53,034 - INFO - integration_test -   Control dict from planner: {'a': -1.9999997776577576, 'w': -0.800000319937789}
2025-12-01 13:32:53,034 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:53,034 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:53,035 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:53,036 - INFO - integration_test - Step 50 completed in 0.638s
2025-12-01 13:32:53,057 - INFO - integration_test - Step 51 (contouring until path end)
2025-12-01 13:32:53,058 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[12.94802474  3.78590986 -0.55194093  2.80000001 14.21331389]
2025-12-01 13:32:53,058 - INFO - integration_test - Step 51: Re-initialized spline from 14.2133 to 13.9333 (vehicle at (12.95, 3.79), closest path point at (12.98, 4.57), distance=0.783m)
2025-12-01 13:32:53,059 - DEBUG - integration_test -   Set spline state to 13.9333
2025-12-01 13:32:53,059 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:53,059 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:53,073 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(12.948, 3.786), path_start=(0.000, 0.000), dist=13.490m
2025-12-01 13:32:53,073 - WARNING - integration_test - Could not update reference path at step 51: x and y must have the same length
2025-12-01 13:32:53,073 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2025-12-01 13:32:53,076 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:53,077 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:53,077 - INFO - integration_test - Warmstart k=0: x0=12.948024738194302 , y0=3.785909856132573 , psi0=-0.55194093400447 , v0=2.800000006441117 , spline0=13.933313888276238 , a0=0.0 , w0=0.0
2025-12-01 13:32:53,077 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:53,078 - INFO - integration_test - Dyn residual k=0: pred=[13.186447095070138, 3.639094393382648, -0.55194093400447, 2.800000006441117, 14.21331388892035], ws=[13.186447095070138, 3.639094393382648, -0.5519409340044699, 2.800000006441117, 17.286124359668705], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.0728104707483546], res_norm=3.073e+00
2025-12-01 13:32:53,079 - INFO - integration_test - Dyn residual k=1: pred=[13.424869451945973, 3.4922789306327227, -0.5519409340044699, 2.800000006441117, 17.566124360312816], ws=[13.424869451945973, 3.4922789306327227, -0.5519409340044699, 2.800000006441117, 20.753880990025877], res=[0.0, 0.0, 0.0, 0.0, -3.1877566297130606], res_norm=3.188e+00
2025-12-01 13:32:53,079 - INFO - integration_test - Dyn residual k=2: pred=[13.663291808821809, 3.345463467882798, -0.5519409340044699, 2.800000006441117, 21.03388099066999], ws=[13.663291808821809, 3.3454634678827975, -0.5519409340044699, 2.800000006441117, 24.276837742795422], res=[0.0, 4.440892098500626e-16, 0.0, 0.0, -3.2429567521254334], res_norm=3.243e+00
2025-12-01 13:32:53,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,107 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,124 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,136 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,164 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,179 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,192 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,208 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,220 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,236 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,248 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,264 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,276 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,292 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,304 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,320 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,332 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,348 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,360 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,375 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,387 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:53,727 - INFO - integration_test - Step 51: MPC solve successful
2025-12-01 13:32:53,735 - INFO - integration_test - Step 51: Computed 10 numeric contouring constraints for visualization (s=13.933)
2025-12-01 13:32:53,735 - DEBUG - integration_test - Step 51: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:53,736 - INFO - integration_test - === Applying control at step 51 ===
2025-12-01 13:32:53,736 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000225119106, 'w': -0.8000001647643427}
2025-12-01 13:32:53,736 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:53,736 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:53,737 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:53,737 - INFO - integration_test - Step 51 completed in 0.679s
2025-12-01 13:32:53,758 - INFO - integration_test - Step 52 (contouring until path end)
2025-12-01 13:32:53,759 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.18854538  3.62403027 -0.63194095  3.00000001 14.23331389]
2025-12-01 13:32:53,760 - INFO - integration_test - Step 52: Re-initialized spline from 14.2333 to 14.5391 (vehicle at (13.19, 3.62), closest path point at (13.62, 4.48), distance=0.962m)
2025-12-01 13:32:53,760 - DEBUG - integration_test -   Set spline state to 14.5391
2025-12-01 13:32:53,760 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:53,760 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:53,774 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.189, 3.624), path_start=(0.000, 0.000), dist=13.677m
2025-12-01 13:32:53,774 - WARNING - integration_test - Could not update reference path at step 52: x and y must have the same length
2025-12-01 13:32:53,774 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2025-12-01 13:32:53,777 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:53,778 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:53,778 - INFO - integration_test - Warmstart k=0: x0=13.18854537751561 , y0=3.6240302747314965 , psi0=-0.6319409504809043 , v0=3.0 , spline0=14.539110144288248 , a0=0.0 , w0=0.0
2025-12-01 13:32:53,778 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:53,779 - INFO - integration_test - Dyn residual k=0: pred=[13.430610123373475, 3.4468166781516425, -0.6319409504809043, 3.0, 14.839110144288249], ws=[13.430610123373475, 3.4468166781516425, -0.6319409504809044, 3.0, 18.06839309474524], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.229282950456991], res_norm=3.229e+00
2025-12-01 13:32:53,780 - INFO - integration_test - Dyn residual k=1: pred=[13.67267486923134, 3.2696030815717885, -0.6319409504809044, 3.0, 18.36839309474524], ws=[13.67267486923134, 3.2696030815717885, -0.6319409504809044, 3.0, 21.694276367282647], res=[0.0, 0.0, 0.0, 0.0, -3.325883272537407], res_norm=3.326e+00
2025-12-01 13:32:53,780 - INFO - integration_test - Dyn residual k=2: pred=[13.914739615089205, 3.0923894849919344, -0.6319409504809044, 3.0, 21.994276367282648], ws=[13.914739615089205, 3.0923894849919344, -0.6319409504809044, 3.0, 25.44106029234915], res=[0.0, 0.0, 0.0, 0.0, -3.4467839250665016], res_norm=3.447e+00
2025-12-01 13:32:53,795 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,808 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,824 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,837 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,853 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,864 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,880 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,892 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,908 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,920 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,936 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,948 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,963 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:53,975 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:53,991 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,003 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,019 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,031 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,046 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,058 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,074 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,085 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:54,435 - INFO - integration_test - Step 52: MPC solve successful
2025-12-01 13:32:54,442 - INFO - integration_test - Step 52: Computed 10 numeric contouring constraints for visualization (s=14.539)
2025-12-01 13:32:54,443 - DEBUG - integration_test - Step 52: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:54,443 - INFO - integration_test - === Applying control at step 52 ===
2025-12-01 13:32:54,443 - INFO - integration_test -   Control dict from planner: {'a': 1.3906440596400928e-07, 'w': 0.8000000081153161}
2025-12-01 13:32:54,443 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:54,443 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:54,444 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:54,444 - INFO - integration_test - Step 52 completed in 0.685s
2025-12-01 13:32:54,465 - INFO - integration_test - Step 53 (contouring until path end)
2025-12-01 13:32:54,467 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.43743677  3.45668307 -0.55194095  3.00000002 14.83911015]
2025-12-01 13:32:54,468 - INFO - integration_test - Step 53: Re-initialized spline from 14.8391 to 14.5391 (vehicle at (13.44, 3.46), closest path point at (13.62, 4.48), distance=1.044m)
2025-12-01 13:32:54,468 - DEBUG - integration_test -   Set spline state to 14.5391
2025-12-01 13:32:54,468 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:54,469 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:54,482 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.437, 3.457), path_start=(0.000, 0.000), dist=13.875m
2025-12-01 13:32:54,482 - WARNING - integration_test - Could not update reference path at step 53: x and y must have the same length
2025-12-01 13:32:54,482 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2025-12-01 13:32:54,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:54,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:54,486 - INFO - integration_test - Warmstart k=0: x0=13.437436772613168 , y0=3.456683069252585 , psi0=-0.5519409496693727 , v0=3.0 , spline0=14.539110144288248 , a0=0.0 , w0=0.0
2025-12-01 13:32:54,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:54,487 - INFO - integration_test - Dyn residual k=0: pred=[13.692889294785509, 3.2993807840950273, -0.5519409496693727, 3.0, 14.839110144288249], ws=[13.692889294785509, 3.2993807840950273, -0.5519409496693726, 3.0, 18.06839309474522], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.2292829504569696], res_norm=3.229e+00
2025-12-01 13:32:54,488 - INFO - integration_test - Dyn residual k=1: pred=[13.94834181695785, 3.1420784989374697, -0.5519409496693726, 3.0, 18.36839309474522], ws=[13.94834181695785, 3.1420784989374697, -0.5519409496693726, 3.0, 21.6915870057193], res=[0.0, 0.0, 0.0, 0.0, -3.32319391097408], res_norm=3.323e+00
2025-12-01 13:32:54,489 - INFO - integration_test - Dyn residual k=2: pred=[14.20379433913019, 2.984776213779912, -0.5519409496693726, 3.0, 21.9915870057193], ws=[14.20379433913019, 2.984776213779912, -0.5519409496693726, 3.0, 25.43081569086041], res=[0.0, 0.0, 0.0, 0.0, -3.43922868514111], res_norm=3.439e+00
2025-12-01 13:32:54,504 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,516 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,533 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,545 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,561 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,574 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,589 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,601 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,618 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,630 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,646 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,658 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,674 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,686 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,702 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,715 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,731 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,743 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,759 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,775 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:54,791 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:54,802 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:55,100 - INFO - integration_test - Step 53: MPC solve successful
2025-12-01 13:32:55,108 - INFO - integration_test - Step 53: Computed 10 numeric contouring constraints for visualization (s=14.539)
2025-12-01 13:32:55,108 - DEBUG - integration_test - Step 53: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:55,108 - INFO - integration_test - === Applying control at step 53 ===
2025-12-01 13:32:55,108 - INFO - integration_test -   Control dict from planner: {'a': 4.3206422806337744e-08, 'w': 0.8000000062879835}
2025-12-01 13:32:55,108 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:55,108 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:55,109 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:55,110 - INFO - integration_test - Step 53 completed in 0.643s
2025-12-01 13:32:55,130 - INFO - integration_test - Step 54 (contouring until path end)
2025-12-01 13:32:55,132 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.69890564  3.30976117 -0.47194095  3.00000003 14.83911015]
2025-12-01 13:32:55,132 - INFO - integration_test - Step 54: Re-initialized spline from 14.8391 to 15.1449 (vehicle at (13.70, 3.31), closest path point at (13.82, 4.46), distance=1.154m)
2025-12-01 13:32:55,132 - DEBUG - integration_test -   Set spline state to 15.1449
2025-12-01 13:32:55,132 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:55,133 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:55,147 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.699, 3.310), path_start=(0.000, 0.000), dist=14.093m
2025-12-01 13:32:55,147 - WARNING - integration_test - Could not update reference path at step 54: x and y must have the same length
2025-12-01 13:32:55,147 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2025-12-01 13:32:55,150 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:55,151 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:55,151 - INFO - integration_test - Warmstart k=0: x0=13.698905641540197 , y0=3.3097611686932384 , psi0=-0.4719409490405743 , v0=3.0 , spline0=15.14490640030026 , a0=0.0 , w0=0.0
2025-12-01 13:32:55,151 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:55,152 - INFO - integration_test - Dyn residual k=0: pred=[13.966111915585671, 3.1733763927439584, -0.4719409490405743, 3.0, 15.44490640030026], ws=[13.966111915585671, 3.1733763927439584, -0.47194094904057415, 3.0, 18.72622586090489], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -3.28131946060463], res_norm=3.281e+00
2025-12-01 13:32:55,153 - INFO - integration_test - Dyn residual k=1: pred=[14.233318189631145, 3.0369916167946784, -0.47194094904057415, 3.0, 19.02622586090489], ws=[14.233318189631145, 3.0369916167946784, -0.47194094904057415, 3.0, 22.54228321229889], res=[0.0, 0.0, 0.0, 0.0, -3.516057351394], res_norm=3.516e+00
2025-12-01 13:32:55,154 - INFO - integration_test - Dyn residual k=2: pred=[14.50052446367662, 2.9006068408453984, -0.47194094904057415, 3.0, 22.84228321229889], ws=[14.50052446367662, 2.9006068408453984, -0.47194094904057415, 3.0, 26.345789087403944], res=[0.0, 0.0, 0.0, 0.0, -3.503505875105052], res_norm=3.504e+00
2025-12-01 13:32:55,168 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,181 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,197 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,209 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,225 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,237 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,253 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,265 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,280 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,293 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,309 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,321 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,337 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,348 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,364 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,376 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,392 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,404 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,420 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,432 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,447 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,458 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:55,788 - INFO - integration_test - Step 54: MPC solve successful
2025-12-01 13:32:55,796 - INFO - integration_test - Step 54: Computed 10 numeric contouring constraints for visualization (s=15.145)
2025-12-01 13:32:55,796 - DEBUG - integration_test - Step 54: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:55,796 - INFO - integration_test - === Applying control at step 54 ===
2025-12-01 13:32:55,796 - INFO - integration_test -   Control dict from planner: {'a': 1.96913617278066e-08, 'w': 0.8000000078098463}
2025-12-01 13:32:55,797 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:55,797 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:55,797 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:55,798 - INFO - integration_test - Step 54 completed in 0.666s
2025-12-01 13:32:55,818 - INFO - integration_test - Step 55 (contouring until path end)
2025-12-01 13:32:55,820 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[13.97127948  3.18420437 -0.39194095  3.00000003 15.4449064 ]
2025-12-01 13:32:55,820 - INFO - integration_test - Step 55: Re-initialized spline from 15.4449 to 15.1449 (vehicle at (13.97, 3.18), closest path point at (13.82, 4.46), distance=1.283m)
2025-12-01 13:32:55,820 - DEBUG - integration_test -   Set spline state to 15.1449
2025-12-01 13:32:55,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:55,821 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:55,835 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(13.971, 3.184), path_start=(0.000, 0.000), dist=14.330m
2025-12-01 13:32:55,836 - WARNING - integration_test - Could not update reference path at step 55: x and y must have the same length
2025-12-01 13:32:55,836 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2025-12-01 13:32:55,839 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:55,840 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:55,840 - INFO - integration_test - Warmstart k=0: x0=13.971279475325344 , y0=3.1842043722243045 , psi0=-0.3919409482595897 , v0=3.0 , spline0=15.14490640030026 , a0=0.0 , w0=0.0
2025-12-01 13:32:55,840 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:55,841 - INFO - integration_test - Dyn residual k=0: pred=[14.248530292950175, 3.0696095026778774, -0.3919409482595897, 3.0, 15.44490640030026], ws=[14.248530292950175, 3.0696095026778774, -0.3919409482595899, 3.0, 18.726225860904886], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.2813194606046263], res_norm=3.281e+00
2025-12-01 13:32:55,842 - INFO - integration_test - Dyn residual k=1: pred=[14.525781110575005, 2.95501463313145, -0.3919409482595899, 3.0, 19.026225860904887], ws=[14.525781110575005, 2.95501463313145, -0.3919409482595899, 3.0, 22.539998475072945], res=[0.0, 0.0, 0.0, 0.0, -3.513772614168058], res_norm=3.514e+00
2025-12-01 13:32:55,843 - INFO - integration_test - Dyn residual k=2: pred=[14.803031928199836, 2.840419763585023, -0.3919409482595899, 3.0, 22.839998475072946], ws=[14.803031928199836, 2.840419763585023, -0.3919409482595899, 3.0, 26.336755088986482], res=[0.0, 0.0, 0.0, 0.0, -3.4967566139135364], res_norm=3.497e+00
2025-12-01 13:32:55,857 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,870 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,887 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,899 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,915 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,927 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,942 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,954 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,970 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:55,982 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:55,997 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,009 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,024 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,036 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,052 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,064 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,079 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,091 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,107 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,119 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,134 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,145 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:56,452 - INFO - integration_test - Step 55: MPC solve successful
2025-12-01 13:32:56,460 - INFO - integration_test - Step 55: Computed 10 numeric contouring constraints for visualization (s=15.145)
2025-12-01 13:32:56,461 - DEBUG - integration_test - Step 55: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:56,461 - INFO - integration_test - === Applying control at step 55 ===
2025-12-01 13:32:56,461 - INFO - integration_test -   Control dict from planner: {'a': 6.586489294195802e-09, 'w': 0.8000000094148931}
2025-12-01 13:32:56,461 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:56,461 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:56,462 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:56,462 - INFO - integration_test - Step 55 completed in 0.642s
2025-12-01 13:32:56,483 - INFO - integration_test - Step 56 (contouring until path end)
2025-12-01 13:32:56,484 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.25281601  3.08081582 -0.31194095  3.00000003 15.4449064 ]
2025-12-01 13:32:56,484 - INFO - integration_test - Step 56: Re-initialized spline from 15.4449 to 15.7507 (vehicle at (14.25, 3.08), closest path point at (14.46, 4.38), distance=1.313m)
2025-12-01 13:32:56,485 - DEBUG - integration_test -   Set spline state to 15.7507
2025-12-01 13:32:56,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:56,485 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:56,499 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.253, 3.081), path_start=(0.000, 0.000), dist=14.582m
2025-12-01 13:32:56,500 - WARNING - integration_test - Could not update reference path at step 56: x and y must have the same length
2025-12-01 13:32:56,500 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2025-12-01 13:32:56,503 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:56,504 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:56,504 - INFO - integration_test - Warmstart k=0: x0=14.252816010771873 , y0=3.0808158150348106 , psi0=-0.3119409473181004 , v0=3.0 , spline0=15.750702656312269 , a0=0.0 , w0=0.0
2025-12-01 13:32:56,504 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:56,505 - INFO - integration_test - Dyn residual k=0: pred=[14.538337912871025, 2.988743868049413, -0.3119409473181004, 3.0, 16.050702656312268], ws=[14.538337912871025, 2.988743868049413, -0.3119409473181003, 3.0, 19.509161161280097], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.4584585049678296], res_norm=3.458e+00
2025-12-01 13:32:56,505 - INFO - integration_test - Dyn residual k=1: pred=[14.823859814970177, 2.8966719210640157, -0.3119409473181003, 3.0, 19.809161161280098], ws=[14.823859814970177, 2.8966719210640157, -0.3119409473181003, 3.0, 23.557848369822164], res=[0.0, 0.0, 0.0, 0.0, -3.7486872085420657], res_norm=3.749e+00
2025-12-01 13:32:56,506 - INFO - integration_test - Dyn residual k=2: pred=[15.10938171706933, 2.8045999740786183, -0.3119409473181003, 3.0, 23.857848369822165], ws=[15.10938171706933, 2.8045999740786183, -0.3119409473181003, 3.0, 27.500993463782045], res=[0.0, 0.0, 0.0, 0.0, -3.6431450939598804], res_norm=3.643e+00
2025-12-01 13:32:56,521 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,534 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,549 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,562 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,578 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,590 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,607 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,619 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,634 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,646 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,662 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,674 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,690 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,703 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,718 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,730 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,746 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,758 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,774 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,786 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:56,802 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:56,812 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:57,084 - INFO - integration_test - Step 56: MPC solve successful
2025-12-01 13:32:57,092 - INFO - integration_test - Step 56: Computed 10 numeric contouring constraints for visualization (s=15.751)
2025-12-01 13:32:57,092 - DEBUG - integration_test - Step 56: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:57,092 - INFO - integration_test - === Applying control at step 56 ===
2025-12-01 13:32:57,092 - INFO - integration_test -   Control dict from planner: {'a': 1.348917829420364e-09, 'w': 0.8000000082274019}
2025-12-01 13:32:57,092 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:57,092 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:57,094 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:57,094 - INFO - integration_test - Step 56 completed in 0.610s
2025-12-01 13:32:57,117 - INFO - integration_test - Step 57 (contouring until path end)
2025-12-01 13:32:57,118 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.54171437  3.00025683 -0.23194095  3.00000003 16.05070266]
2025-12-01 13:32:57,119 - INFO - integration_test - Step 57: Re-initialized spline from 16.0507 to 15.7507 (vehicle at (14.54, 3.00), closest path point at (14.46, 4.38), distance=1.379m)
2025-12-01 13:32:57,119 - DEBUG - integration_test -   Set spline state to 15.7507
2025-12-01 13:32:57,119 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:57,119 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:57,133 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.542, 3.000), path_start=(0.000, 0.000), dist=14.848m
2025-12-01 13:32:57,134 - WARNING - integration_test - Could not update reference path at step 57: x and y must have the same length
2025-12-01 13:32:57,134 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2025-12-01 13:32:57,136 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:57,137 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:57,137 - INFO - integration_test - Warmstart k=0: x0=14.541714374708619 , y0=3.0002568311312947 , psi0=-0.2319409464953602 , v0=3.0 , spline0=15.750702656312269 , a0=0.0 , w0=0.0
2025-12-01 13:32:57,137 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:57,138 - INFO - integration_test - Dyn residual k=0: pred=[14.833680995431044, 2.9312967529416087, -0.2319409464953602, 3.0, 16.050702656312268], ws=[14.833680995431044, 2.9312967529416087, -0.23194094649536012, 3.0, 19.509161161280097], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, -3.4584585049678296], res_norm=3.458e+00
2025-12-01 13:32:57,139 - INFO - integration_test - Dyn residual k=1: pred=[15.125647616153469, 2.8623366747519228, -0.23194094649536012, 3.0, 19.809161161280098], ws=[15.125647616153469, 2.8623366747519228, -0.23194094649536012, 3.0, 23.555863175955317], res=[0.0, 0.0, 0.0, 0.0, -3.7467020146752184], res_norm=3.747e+00
2025-12-01 13:32:57,140 - INFO - integration_test - Dyn residual k=2: pred=[15.417614236875893, 2.793376596562237, -0.23194094649536012, 3.0, 23.855863175955317], ws=[15.417614236875893, 2.793376596562237, -0.23194094649536012, 3.0, 27.492803521046405], res=[0.0, 0.0, 0.0, 0.0, -3.6369403450910873], res_norm=3.637e+00
2025-12-01 13:32:57,154 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,167 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,182 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,195 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,211 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,223 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,239 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,251 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,267 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,279 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,295 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,307 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,323 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,335 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,350 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,362 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,378 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,390 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,406 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,418 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,433 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,444 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:57,719 - INFO - integration_test - Step 57: MPC solve successful
2025-12-01 13:32:57,728 - INFO - integration_test - Step 57: Computed 10 numeric contouring constraints for visualization (s=15.751)
2025-12-01 13:32:57,728 - DEBUG - integration_test - Step 57: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:57,728 - INFO - integration_test - === Applying control at step 57 ===
2025-12-01 13:32:57,728 - INFO - integration_test -   Control dict from planner: {'a': -1.5955424612816918e-09, 'w': 0.8000000055229588}
2025-12-01 13:32:57,728 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:57,728 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:57,729 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:57,730 - INFO - integration_test - Step 57 completed in 0.611s
2025-12-01 13:32:57,752 - INFO - integration_test - Step 58 (contouring until path end)
2025-12-01 13:32:57,753 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[14.8361266   2.94304272 -0.15194095  3.00000003 16.05070266]
2025-12-01 13:32:57,754 - INFO - integration_test - Step 58: Re-initialized spline from 16.0507 to 16.3565 (vehicle at (14.84, 2.94), closest path point at (15.10, 4.31), distance=1.388m)
2025-12-01 13:32:57,754 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 13:32:57,754 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:57,755 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:57,769 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(14.836, 2.943), path_start=(0.000, 0.000), dist=15.125m
2025-12-01 13:32:57,770 - WARNING - integration_test - Could not update reference path at step 58: x and y must have the same length
2025-12-01 13:32:57,770 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2025-12-01 13:32:57,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:57,773 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:57,774 - INFO - integration_test - Warmstart k=0: x0=14.836126603412538 , y0=2.943042723062818 , psi0=-0.15194094594306434 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 13:32:57,774 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:57,774 - INFO - integration_test - Dyn residual k=0: pred=[15.132670352701759, 2.8976356227646027, -0.15194094594306434, 3.0, 16.65649891232428], ws=[15.132670352701759, 2.8976356227646027, -0.1519409459430645, 3.0, 20.30676171328543], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -3.6502628009611477], res_norm=3.650e+00
2025-12-01 13:32:57,775 - INFO - integration_test - Dyn residual k=1: pred=[15.42921410199098, 2.8522285224663877, -0.1519409459430645, 3.0, 20.60676171328543], ws=[15.42921410199098, 2.8522285224663877, -0.1519409459430645, 3.0, 24.47047759206732], res=[0.0, 0.0, 0.0, 0.0, -3.863715878781889], res_norm=3.864e+00
2025-12-01 13:32:57,776 - INFO - integration_test - Dyn residual k=2: pred=[15.7257578512802, 2.8068214221681727, -0.1519409459430645, 3.0, 24.77047759206732], ws=[15.7257578512802, 2.8068214221681727, -0.1519409459430645, 3.0, 28.480587239695502], res=[0.0, 0.0, 0.0, 0.0, -3.710109647628183], res_norm=3.710e+00
2025-12-01 13:32:57,791 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,804 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,820 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,832 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,860 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,876 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,888 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,904 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,916 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,932 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,944 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,959 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,971 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:57,987 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:57,999 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,014 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,026 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,042 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,054 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,070 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,081 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:58,353 - INFO - integration_test - Step 58: MPC solve successful
2025-12-01 13:32:58,361 - INFO - integration_test - Step 58: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 13:32:58,361 - DEBUG - integration_test - Step 58: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:58,361 - INFO - integration_test - === Applying control at step 58 ===
2025-12-01 13:32:58,361 - INFO - integration_test -   Control dict from planner: {'a': -1.915540195625493e-06, 'w': 0.7999983548386913}
2025-12-01 13:32:58,361 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:58,361 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:58,362 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:58,363 - INFO - integration_test - Step 58 completed in 0.610s
2025-12-01 13:32:58,386 - INFO - integration_test - Step 59 (contouring until path end)
2025-12-01 13:32:58,388 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.13416945  2.90953944 -0.07194111  2.99999984 16.6564989 ]
2025-12-01 13:32:58,388 - INFO - integration_test - Step 59: Re-initialized spline from 16.6565 to 16.3565 (vehicle at (15.13, 2.91), closest path point at (15.10, 4.31), distance=1.396m)
2025-12-01 13:32:58,388 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 13:32:58,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:58,389 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:58,402 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.134, 2.910), path_start=(0.000, 0.000), dist=15.411m
2025-12-01 13:32:58,403 - WARNING - integration_test - Could not update reference path at step 59: x and y must have the same length
2025-12-01 13:32:58,403 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2025-12-01 13:32:58,405 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:58,407 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:58,407 - INFO - integration_test - Warmstart k=0: x0=15.1341694513219 , y0=2.9095394421459813 , psi0=-0.07194111045919521 , v0=2.999999837968493 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 13:32:58,407 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:58,407 - INFO - integration_test - Dyn residual k=0: pred=[15.433393441422316, 2.887975722000877, -0.07194111045919521, 2.999999837968493, 16.65649889612113], ws=[15.433393441422316, 2.887975722000877, -0.07194111045919538, 2.999999837968493, 20.30676169708228], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -3.6502628009611513], res_norm=3.650e+00
2025-12-01 13:32:58,408 - INFO - integration_test - Dyn residual k=1: pred=[15.732617431522732, 2.8664120018557724, -0.07194111045919538, 2.999999837968493, 20.606761680879128], ws=[15.732617431522732, 2.8664120018557724, -0.07194111045919538, 2.999999837968493, 24.468973935764193], res=[0.0, 0.0, 0.0, 0.0, -3.8622122548850655], res_norm=3.862e+00
2025-12-01 13:32:58,409 - INFO - integration_test - Dyn residual k=2: pred=[16.031841421623145, 2.844848281710668, -0.07194111045919538, 2.999999837968493, 24.76897391956104], ws=[16.031841421623145, 2.844848281710668, -0.07194111045919538, 2.999999837968493, 28.473809026721185], res=[0.0, 0.0, 0.0, 0.0, -3.704835107160143], res_norm=3.705e+00
2025-12-01 13:32:58,423 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,436 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,452 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,464 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,480 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,492 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,508 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,520 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,536 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,548 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,564 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,576 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,593 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,605 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,622 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,634 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,650 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,662 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,677 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,690 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:58,706 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:58,717 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:58,996 - INFO - integration_test - Step 59: MPC solve successful
2025-12-01 13:32:59,004 - INFO - integration_test - Step 59: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 13:32:59,004 - DEBUG - integration_test - Step 59: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:59,005 - INFO - integration_test - === Applying control at step 59 ===
2025-12-01 13:32:59,005 - INFO - integration_test -   Control dict from planner: {'a': 1.2801768437682115e-06, 'w': 0.8000000099610423}
2025-12-01 13:32:59,005 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:59,005 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:59,006 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:59,006 - INFO - integration_test - Step 59 completed in 0.619s
2025-12-01 13:32:59,028 - INFO - integration_test - Step 60 (contouring until path end)
2025-12-01 13:32:59,030 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[1.54339365e+01 2.89996129e+00 8.05889054e-03 2.99999997e+00
 1.66564989e+01]
2025-12-01 13:32:59,031 - INFO - integration_test - Step 60: Re-initialized spline from 16.6565 to 16.9623 (vehicle at (15.43, 2.90), closest path point at (15.75, 4.25), distance=1.387m)
2025-12-01 13:32:59,031 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 13:32:59,031 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:59,031 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:59,045 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.434, 2.900), path_start=(0.000, 0.000), dist=15.704m
2025-12-01 13:32:59,045 - WARNING - integration_test - Could not update reference path at step 60: x and y must have the same length
2025-12-01 13:32:59,045 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2025-12-01 13:32:59,048 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:59,049 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:59,049 - INFO - integration_test - Warmstart k=0: x0=15.433936470829254 , y0=2.899961293357642 , psi0=0.008058890536909002 , v0=2.9999999659861776 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 13:32:59,049 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:59,050 - INFO - integration_test - Dyn residual k=0: pred=[15.733926725623203, 2.9023789343218676, 0.008058890536909002, 2.9999999659861776, 17.26229516493491], ws=[15.733926725623203, 2.9023789343218676, 0.008058890536909225, 2.9999999659861776, 21.116561064576963], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -3.854265899642055], res_norm=3.854e+00
2025-12-01 13:32:59,051 - INFO - integration_test - Dyn residual k=1: pred=[16.033916980417153, 2.904796575286093, 0.008058890536909225, 2.9999999659861776, 21.41656106117558], ws=[16.033916980417153, 2.904796575286093, 0.008058890536909225, 2.9999999659861776, 25.4673319047684], res=[0.0, 0.0, 0.0, 0.0, -4.050770843592819], res_norm=4.051e+00
2025-12-01 13:32:59,052 - INFO - integration_test - Dyn residual k=2: pred=[16.333907235211104, 2.9072142162503187, 0.008058890536909225, 2.9999999659861776, 25.76733190136702], ws=[16.333907235211104, 2.9072142162503187, 0.008058890536909225, 2.9999999659861776, 29.60124806273851], res=[0.0, 0.0, 0.0, 0.0, -3.8339161613714907], res_norm=3.834e+00
2025-12-01 13:32:59,066 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,079 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,095 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,108 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,124 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,136 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,152 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,164 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,180 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,192 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,208 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,220 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,236 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,248 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,264 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,276 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,292 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,304 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,319 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,332 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,347 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,358 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:32:59,644 - INFO - integration_test - Step 60: MPC solve successful
2025-12-01 13:32:59,652 - INFO - integration_test - Step 60: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 13:32:59,653 - DEBUG - integration_test - Step 60: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:32:59,653 - INFO - integration_test - === Applying control at step 60 ===
2025-12-01 13:32:59,653 - INFO - integration_test -   Control dict from planner: {'a': 4.1605671249763336e-07, 'w': 0.7999999924322643}
2025-12-01 13:32:59,653 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:32:59,653 - INFO - integration_test -   Planner output success: True
2025-12-01 13:32:59,654 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:32:59,654 - INFO - integration_test - Step 60 completed in 0.625s
2025-12-01 13:32:59,679 - INFO - integration_test - Step 61 (contouring until path end)
2025-12-01 13:32:59,682 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.73351019  2.91436957  0.08805889  3.00000001 17.26229517]
2025-12-01 13:32:59,682 - INFO - integration_test - Step 61: Re-initialized spline from 17.2623 to 16.9623 (vehicle at (15.73, 2.91), closest path point at (15.75, 4.25), distance=1.336m)
2025-12-01 13:32:59,682 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 13:32:59,683 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:59,683 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:32:59,697 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.734, 2.914), path_start=(0.000, 0.000), dist=16.001m
2025-12-01 13:32:59,697 - WARNING - integration_test - Could not update reference path at step 61: x and y must have the same length
2025-12-01 13:32:59,698 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2025-12-01 13:32:59,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:32:59,702 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:32:59,702 - INFO - integration_test - Warmstart k=0: x0=15.733510190670305 , y0=2.9143695683140067 , psi0=0.08805888978013543 , v0=3.0 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 13:32:59,702 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:32:59,703 - INFO - integration_test - Dyn residual k=0: pred=[16.032347786893457, 2.940753106430949, 0.08805888978013543, 3.0, 17.26229516833629], ws=[16.032347786893457, 2.940753106430949, 0.08805888978013554, 3.0, 21.116561067978346], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.854265899642055], res_norm=3.854e+00
2025-12-01 13:32:59,703 - INFO - integration_test - Dyn residual k=1: pred=[16.33118538311661, 2.967136644547891, 0.08805888978013554, 3.0, 21.416561067978346], ws=[16.33118538311661, 2.967136644547891, 0.08805888978013554, 3.0, 25.466122575370726], res=[0.0, 0.0, 0.0, 0.0, -4.049561507392379], res_norm=4.050e+00
2025-12-01 13:32:59,704 - INFO - integration_test - Dyn residual k=2: pred=[16.63002297933976, 2.993520182664833, 0.08805888978013554, 3.0, 25.766122575370726], ws=[16.63002297933976, 2.993520182664833, 0.08805888978013554, 3.0, 29.595581009493387], res=[0.0, 0.0, 0.0, 0.0, -3.8294584341226603], res_norm=3.829e+00
2025-12-01 13:32:59,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,731 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,748 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,765 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,781 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,793 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,809 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,821 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,837 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,849 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,865 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,877 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,893 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,905 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,921 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,933 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,949 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,960 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:32:59,976 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:32:59,989 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,004 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,016 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:00,285 - INFO - integration_test - Step 61: MPC solve successful
2025-12-01 13:33:00,293 - INFO - integration_test - Step 61: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 13:33:00,293 - DEBUG - integration_test - Step 61: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:00,293 - INFO - integration_test - === Applying control at step 61 ===
2025-12-01 13:33:00,293 - INFO - integration_test -   Control dict from planner: {'a': 5.146521603829721e-08, 'w': 0.7999997695372377}
2025-12-01 13:33:00,293 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:00,293 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:00,294 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:00,295 - INFO - integration_test - Step 61 completed in 0.613s
2025-12-01 13:33:00,318 - INFO - integration_test - Step 62 (contouring until path end)
2025-12-01 13:33:00,319 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.03097436  2.9526721   0.16805887  3.00000001 17.26229517]
2025-12-01 13:33:00,320 - INFO - integration_test - Step 62: Re-initialized spline from 17.2623 to 17.5681 (vehicle at (16.03, 2.95), closest path point at (16.40, 4.22), distance=1.317m)
2025-12-01 13:33:00,320 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 13:33:00,320 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:00,320 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:00,334 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.031, 2.953), path_start=(0.000, 0.000), dist=16.301m
2025-12-01 13:33:00,335 - WARNING - integration_test - Could not update reference path at step 62: x and y must have the same length
2025-12-01 13:33:00,335 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2025-12-01 13:33:00,337 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:00,339 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:00,339 - INFO - integration_test - Warmstart k=0: x0=16.03097435570854 , y0=2.952672100257461 , psi0=0.16805886673385922 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 13:33:00,339 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:00,340 - INFO - integration_test - Dyn residual k=0: pred=[16.32674775031319, 3.0028527643029106, 0.16805886673385922, 3.0, 17.8680914243483], ws=[16.32674775031319, 3.0028527643029106, 0.16805886673385917, 3.0, 21.9344238840555], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -4.066332459707201], res_norm=4.066e+00
2025-12-01 13:33:00,340 - INFO - integration_test - Dyn residual k=1: pred=[16.622521144917837, 3.05303342834836, 0.16805886673385917, 3.0, 22.234423884055502], ws=[16.622521144917837, 3.05303342834836, 0.16805886673385917, 3.0, 26.37492637415875], res=[0.0, 0.0, 0.0, 0.0, -4.140502490103248], res_norm=4.141e+00
2025-12-01 13:33:00,341 - INFO - integration_test - Dyn residual k=2: pred=[16.918294539522485, 3.1032140923938094, 0.16805886673385917, 3.0, 26.67492637415875], ws=[16.918294539522485, 3.1032140923938094, 0.16805886673385917, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.009090170429758], res_norm=3.009e+00
2025-12-01 13:33:00,356 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,368 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,384 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,396 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,413 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,426 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,442 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,454 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,469 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,481 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,498 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,511 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,526 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,539 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,554 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,566 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,582 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,595 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,612 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,624 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:00,640 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:00,651 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:00,951 - INFO - integration_test - Step 62: MPC solve successful
2025-12-01 13:33:00,958 - INFO - integration_test - Step 62: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 13:33:00,959 - DEBUG - integration_test - Step 62: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:00,959 - INFO - integration_test - === Applying control at step 62 ===
2025-12-01 13:33:00,959 - INFO - integration_test -   Control dict from planner: {'a': 1.1450765023239902e-07, 'w': 0.8000000076353165}
2025-12-01 13:33:00,959 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:00,959 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:00,960 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:00,960 - INFO - integration_test - Step 62 completed in 0.641s
2025-12-01 13:33:00,982 - INFO - integration_test - Step 63 (contouring until path end)
2025-12-01 13:33:00,983 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.32442621  3.01462388  0.24805887  3.00000002 17.86809143]
2025-12-01 13:33:00,983 - INFO - integration_test - Step 63: Re-initialized spline from 17.8681 to 17.5681 (vehicle at (16.32, 3.01), closest path point at (16.40, 4.22), distance=1.205m)
2025-12-01 13:33:00,983 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 13:33:00,984 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:00,984 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:00,998 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.324, 3.015), path_start=(0.000, 0.000), dist=16.600m
2025-12-01 13:33:00,998 - WARNING - integration_test - Could not update reference path at step 63: x and y must have the same length
2025-12-01 13:33:00,998 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2025-12-01 13:33:01,001 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:01,002 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:01,002 - INFO - integration_test - Warmstart k=0: x0=16.324426209318563 , y0=3.014623884066426 , psi0=0.24805886749739087 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 13:33:01,002 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:01,004 - INFO - integration_test - Dyn residual k=0: pred=[16.615243461272794, 3.088280696146431, 0.24805886749739087, 3.0, 17.8680914243483], ws=[16.615243461272794, 3.088280696146431, 0.2480588674973907, 3.0, 21.9344238840555], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.066332459707201], res_norm=4.066e+00
2025-12-01 13:33:01,005 - INFO - integration_test - Dyn residual k=1: pred=[16.906060713227024, 3.161937508226435, 0.2480588674973907, 3.0, 22.234423884055502], ws=[16.906060713227024, 3.161937508226435, 0.2480588674973907, 3.0, 26.374227701734902], res=[0.0, 0.0, 0.0, 0.0, -4.1398038176794], res_norm=4.140e+00
2025-12-01 13:33:01,006 - INFO - integration_test - Dyn residual k=2: pred=[17.196877965181255, 3.23559432030644, 0.2480588674973907, 3.0, 26.674227701734903], ws=[17.196877965181255, 3.23559432030644, 0.2480588674973907, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.009788842853606], res_norm=3.010e+00
2025-12-01 13:33:01,020 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,033 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,049 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,061 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,077 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,089 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,105 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,118 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,134 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,146 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,162 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,174 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,190 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,202 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,219 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,231 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,246 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,258 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,274 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,287 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,304 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,314 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:01,595 - INFO - integration_test - Step 63: MPC solve successful
2025-12-01 13:33:01,603 - INFO - integration_test - Step 63: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 13:33:01,604 - DEBUG - integration_test - Step 63: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:01,604 - INFO - integration_test - === Applying control at step 63 ===
2025-12-01 13:33:01,604 - INFO - integration_test -   Control dict from planner: {'a': 2.8592927700080457e-08, 'w': 0.7999999162616263}
2025-12-01 13:33:01,604 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:01,604 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:01,605 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:01,605 - INFO - integration_test - Step 63 completed in 0.623s
2025-12-01 13:33:01,627 - INFO - integration_test - Step 64 (contouring until path end)
2025-12-01 13:33:01,628 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.61198866  3.09982864  0.32805886  3.00000003 17.86809143]
2025-12-01 13:33:01,629 - INFO - integration_test - Step 64: Re-initialized spline from 17.8681 to 17.5681 (vehicle at (16.61, 3.10), closest path point at (16.40, 4.22), distance=1.137m)
2025-12-01 13:33:01,629 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 13:33:01,629 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:01,629 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:01,643 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.612, 3.100), path_start=(0.000, 0.000), dist=16.899m
2025-12-01 13:33:01,644 - WARNING - integration_test - Could not update reference path at step 64: x and y must have the same length
2025-12-01 13:33:01,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2025-12-01 13:33:01,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:01,647 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:01,647 - INFO - integration_test - Warmstart k=0: x0=16.611988660899964 , y0=3.09982864206032 , psi0=0.3280588591235535 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 13:33:01,648 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:01,648 - INFO - integration_test - Dyn residual k=0: pred=[16.895989533083494, 3.196490447335181, 0.3280588591235535, 3.0, 17.8680914243483], ws=[16.895989533083494, 3.196490447335181, 0.3280588591235536, 3.0, 21.934423884055498], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.066332459707198], res_norm=4.066e+00
2025-12-01 13:33:01,649 - INFO - integration_test - Dyn residual k=1: pred=[17.179990405267024, 3.2931522526100423, 0.3280588591235536, 3.0, 22.2344238840555], ws=[17.179990405267024, 3.2931522526100423, 0.3280588591235536, 3.0, 26.373910665763155], res=[0.0, 0.0, 0.0, 0.0, -4.139486781707657], res_norm=4.139e+00
2025-12-01 13:33:01,650 - INFO - integration_test - Dyn residual k=2: pred=[17.463991277450553, 3.3898140578849034, 0.3280588591235536, 3.0, 26.673910665763156], ws=[17.463991277450553, 3.3898140578849034, 0.3280588591235536, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.010105878825353], res_norm=3.010e+00
2025-12-01 13:33:01,664 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,677 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,706 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,722 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,734 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,750 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,762 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,778 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,790 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,806 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,818 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,833 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,846 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,861 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,874 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,890 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,903 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,919 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,931 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:01,946 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:01,957 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:02,219 - INFO - integration_test - Step 64: MPC solve successful
2025-12-01 13:33:02,228 - INFO - integration_test - Step 64: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 13:33:02,228 - DEBUG - integration_test - Step 64: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:02,228 - INFO - integration_test - === Applying control at step 64 ===
2025-12-01 13:33:02,228 - INFO - integration_test -   Control dict from planner: {'a': -1.7599631777301331e-06, 'w': 0.7999833161626242}
2025-12-01 13:33:02,228 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:02,228 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:02,229 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:02,229 - INFO - integration_test - Step 64 completed in 0.601s
2025-12-01 13:33:02,251 - INFO - integration_test - Step 65 (contouring until path end)
2025-12-01 13:33:02,253 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[16.89182238  3.20774112  0.40805719  2.99999985 17.86809141]
2025-12-01 13:33:02,253 - INFO - integration_test - Step 65: Re-initialized spline from 17.8681 to 18.1739 (vehicle at (16.89, 3.21), closest path point at (17.05, 4.21), distance=1.017m)
2025-12-01 13:33:02,253 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 13:33:02,254 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:02,254 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:02,268 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(16.892, 3.208), path_start=(0.000, 0.000), dist=17.194m
2025-12-01 13:33:02,268 - WARNING - integration_test - Could not update reference path at step 65: x and y must have the same length
2025-12-01 13:33:02,269 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2025-12-01 13:33:02,272 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:02,273 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:02,273 - INFO - integration_test - Warmstart k=0: x0=16.89182237668147 , y0=3.207741118891336 , psi0=0.4080571907398159 , v0=2.9999998510521104 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 13:33:02,273 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:02,275 - INFO - integration_test - Dyn residual k=0: pred=[17.167190417024756, 3.326789148781065, 0.4080571907398159, 2.9999998510521104, 18.473887665465522], ws=[17.167190417024756, 3.326789148781065, 0.40805719073981583, 2.9999998510521104, 22.754549485696874], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -4.2806618202313516], res_norm=4.281e+00
2025-12-01 13:33:02,276 - INFO - integration_test - Dyn residual k=1: pred=[17.44255845736804, 3.445837178670794, 0.40805719073981583, 2.9999998510521104, 23.054549470802083], ws=[17.44255845736804, 3.445837178670794, 0.40805719073981583, 2.9999998510521104, 27.332306115957714], res=[0.0, 0.0, 0.0, 0.0, -4.27775664515563], res_norm=4.278e+00
2025-12-01 13:33:02,276 - INFO - integration_test - Dyn residual k=2: pred=[17.717926497711325, 3.5648852085605234, 0.40805719073981583, 2.9999998510521104, 27.632306101062923], ws=[17.717926497711325, 3.5648852085605234, 0.40805719073981583, 2.9999998510521104, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.051710443525586], res_norm=2.052e+00
2025-12-01 13:33:02,291 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,304 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,320 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,332 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,348 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,360 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,376 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,388 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,405 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,417 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,433 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,445 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,461 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,473 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,489 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,502 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,517 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,529 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,545 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,557 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,573 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,584 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:02,893 - INFO - integration_test - Step 65: MPC solve successful
2025-12-01 13:33:02,901 - INFO - integration_test - Step 65: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 13:33:02,901 - DEBUG - integration_test - Step 65: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:02,901 - INFO - integration_test - === Applying control at step 65 ===
2025-12-01 13:33:02,901 - INFO - integration_test -   Control dict from planner: {'a': 1.185140428054111e-06, 'w': 0.7999998435621438}
2025-12-01 13:33:02,901 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:02,901 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:02,902 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:02,903 - INFO - integration_test - Step 65 completed in 0.650s
2025-12-01 13:33:02,926 - INFO - integration_test - Step 66 (contouring until path end)
2025-12-01 13:33:02,927 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.16213741  3.33767106  0.48805718  2.99999997 18.47388768]
2025-12-01 13:33:02,927 - INFO - integration_test - Step 66: Re-initialized spline from 18.4739 to 18.1739 (vehicle at (17.16, 3.34), closest path point at (17.05, 4.21), distance=0.882m)
2025-12-01 13:33:02,928 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 13:33:02,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:02,928 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:02,942 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.162, 3.338), path_start=(0.000, 0.000), dist=17.484m
2025-12-01 13:33:02,942 - WARNING - integration_test - Could not update reference path at step 66: x and y must have the same length
2025-12-01 13:33:02,942 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2025-12-01 13:33:02,945 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:02,946 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:02,946 - INFO - integration_test - Warmstart k=0: x0=17.16213741324184 , y0=3.337671055578375 , psi0=0.4880571750960303 , v0=2.9999999695661534 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 13:33:02,946 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:02,947 - INFO - integration_test - Dyn residual k=0: pred=[17.427111071509326, 3.478344288989407, 0.4880571750960303, 2.9999999695661534, 18.473887677316927], ws=[17.427111071509326, 3.478344288989407, 0.4880571750960305, 2.9999999695661534, 22.754549497548275], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.280661820231348], res_norm=4.281e+00
2025-12-01 13:33:02,948 - INFO - integration_test - Dyn residual k=1: pred=[17.692084729776813, 3.619017522400439, 0.4880571750960305, 2.9999999695661534, 23.05454949450489], ws=[17.692084729776813, 3.619017522400439, 0.4880571750960305, 2.9999999695661534, 27.33236830599943], res=[0.0, 0.0, 0.0, 0.0, -4.277818811494541], res_norm=4.278e+00
2025-12-01 13:33:02,949 - INFO - integration_test - Dyn residual k=2: pred=[17.9570583880443, 3.7596907558114707, 0.4880571750960305, 2.9999999695661534, 27.632368302956046], ws=[17.9570583880443, 3.7596907558114707, 0.4880571750960305, 2.9999999695661534, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.0516482416324635], res_norm=2.052e+00
2025-12-01 13:33:02,963 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:02,975 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:02,991 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,003 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,019 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,032 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,047 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,059 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,074 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,086 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,103 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,115 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,130 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,142 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,158 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,170 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,187 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,199 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,215 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,227 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,243 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,254 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:03,514 - INFO - integration_test - Step 66: MPC solve successful
2025-12-01 13:33:03,522 - INFO - integration_test - Step 66: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 13:33:03,523 - DEBUG - integration_test - Step 66: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:03,523 - INFO - integration_test - === Applying control at step 66 ===
2025-12-01 13:33:03,523 - INFO - integration_test -   Control dict from planner: {'a': -7.319386080711441e-08, 'w': 0.7999897974037182}
2025-12-01 13:33:03,523 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:03,523 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:03,524 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:03,524 - INFO - integration_test - Step 66 completed in 0.598s
2025-12-01 13:33:03,549 - INFO - integration_test - Step 67 (contouring until path end)
2025-12-01 13:33:03,550 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.42120468  3.48878745  0.56805615  2.99999996 18.47388768]
2025-12-01 13:33:03,550 - INFO - integration_test - Step 67: Re-initialized spline from 18.4739 to 18.7797 (vehicle at (17.42, 3.49), closest path point at (17.70, 4.24), distance=0.803m)
2025-12-01 13:33:03,550 - DEBUG - integration_test -   Set spline state to 18.7797
2025-12-01 13:33:03,551 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:03,551 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:03,565 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.421, 3.489), path_start=(0.000, 0.000), dist=17.767m
2025-12-01 13:33:03,566 - WARNING - integration_test - Could not update reference path at step 67: x and y must have the same length
2025-12-01 13:33:03,566 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2025-12-01 13:33:03,569 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:03,570 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:03,570 - INFO - integration_test - Warmstart k=0: x0=17.4212046766462 , y0=3.4887874511456864 , psi0=0.5680561548364021 , v0=2.9999999622467675 , spline0=18.779683936372322 , a0=0.0 , w0=0.0
2025-12-01 13:33:03,570 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:03,571 - INFO - integration_test - Dyn residual k=0: pred=[17.674089176986147, 3.650185800649706, 0.5680561548364021, 2.9999999622467675, 19.079683932597], ws=[17.674089176986147, 3.650185800649706, 0.5680561548364023, 2.9999999622467675, 23.569952751102747], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.490268818505747], res_norm=4.490e+00
2025-12-01 13:33:03,571 - INFO - integration_test - Dyn residual k=1: pred=[17.926973677326092, 3.8115841501537258, 0.5680561548364023, 2.9999999622467675, 23.869952747327424], ws=[17.926973677326092, 3.8115841501537258, 0.5680561548364018, 2.9999999622467675, 28.268123309860876], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -4.398170562533451], res_norm=4.398e+00
2025-12-01 13:33:03,572 - INFO - integration_test - Dyn residual k=2: pred=[18.179858177666038, 3.9729824996577454, 0.5680561548364018, 2.9999999622467675, 28.568123306085553], ws=[18.179858177666038, 3.9729824996577454, 0.5680561548364018, 2.9999999622467675, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1158932385029559], res_norm=1.116e+00
2025-12-01 13:33:03,588 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,601 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,618 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,630 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,658 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,675 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,687 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,703 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,715 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,731 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,744 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,760 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,772 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,789 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,801 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,817 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,829 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,845 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,857 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:03,873 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:03,885 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:04,142 - INFO - integration_test - Step 67: MPC solve successful
2025-12-01 13:33:04,151 - INFO - integration_test - Step 67: Computed 10 numeric contouring constraints for visualization (s=18.780)
2025-12-01 13:33:04,151 - DEBUG - integration_test - Step 67: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:04,151 - INFO - integration_test - === Applying control at step 67 ===
2025-12-01 13:33:04,151 - INFO - integration_test -   Control dict from planner: {'a': -5.7208406464926494e-08, 'w': 0.7998759165343837}
2025-12-01 13:33:04,151 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:04,151 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:04,152 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:04,152 - INFO - integration_test - Step 67 completed in 0.603s
2025-12-01 13:33:04,176 - INFO - integration_test - Step 68 (contouring until path end)
2025-12-01 13:33:04,179 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.66736811  3.66012217  0.64804375  2.99999996 19.07968393]
2025-12-01 13:33:04,180 - INFO - integration_test - Step 68: Re-initialized spline from 19.0797 to 18.7797 (vehicle at (17.67, 3.66), closest path point at (17.70, 4.24), distance=0.583m)
2025-12-01 13:33:04,180 - DEBUG - integration_test -   Set spline state to 18.7797
2025-12-01 13:33:04,180 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:04,180 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:04,195 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.667, 3.660), path_start=(0.000, 0.000), dist=18.043m
2025-12-01 13:33:04,195 - WARNING - integration_test - Could not update reference path at step 68: x and y must have the same length
2025-12-01 13:33:04,195 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2025-12-01 13:33:04,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:04,199 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:04,199 - INFO - integration_test - Warmstart k=0: x0=17.667368114899737 , y0=3.6601221729931632 , psi0=0.6480437464898405 , v0=2.9999999565259268 , spline0=18.779683936372322 , a0=0.0 , w0=0.0
2025-12-01 13:33:04,199 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:04,200 - INFO - integration_test - Dyn residual k=0: pred=[17.906547963197898, 3.8412105424695717, 0.6480437464898405, 2.9999999565259268, 19.079683932024913], ws=[17.906547963197898, 3.8412105424695717, 0.6480437464898405, 2.9999999565259268, 23.569952750530664], res=[0.0, 0.0, 0.0, 0.0, -4.490268818505751], res_norm=4.490e+00
2025-12-01 13:33:04,201 - INFO - integration_test - Dyn residual k=1: pred=[18.14572781149606, 4.02229891194598, 0.6480437464898405, 2.9999999565259268, 23.869952746183255], ws=[18.14572781149606, 4.02229891194598, 0.6480437464898405, 2.9999999565259268, 28.268632211072262], res=[0.0, 0.0, 0.0, 0.0, -4.398679464889007], res_norm=4.399e+00
2025-12-01 13:33:04,201 - INFO - integration_test - Dyn residual k=2: pred=[18.38490765979422, 4.203387281422389, 0.6480437464898405, 2.9999999565259268, 28.568632206724853], ws=[18.38490765979422, 4.203387281422389, 0.6480437464898405, 2.9999999565259268, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1153843378636559], res_norm=1.115e+00
2025-12-01 13:33:04,216 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,229 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,244 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,256 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,272 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,284 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,300 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,312 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,328 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,339 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,355 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,366 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,382 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,394 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,411 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,423 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,438 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,450 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,465 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,477 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,494 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,505 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:04,773 - INFO - integration_test - Step 68: MPC solve successful
2025-12-01 13:33:04,782 - INFO - integration_test - Step 68: Computed 10 numeric contouring constraints for visualization (s=18.780)
2025-12-01 13:33:04,783 - DEBUG - integration_test - Step 68: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:04,783 - INFO - integration_test - === Applying control at step 68 ===
2025-12-01 13:33:04,783 - INFO - integration_test -   Control dict from planner: {'a': 4.871013048231459e-07, 'w': 0.7999997402599863}
2025-12-01 13:33:04,783 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:04,783 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:04,784 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:04,784 - INFO - integration_test - Step 68 completed in 0.605s
2025-12-01 13:33:04,805 - INFO - integration_test - Step 69 (contouring until path end)
2025-12-01 13:33:04,807 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[17.89905325  3.85057954  0.72804372  3.00000001 19.07968394]
2025-12-01 13:33:04,807 - DEBUG - integration_test - Step 69: Using propagated spline 19.0797 (close to path, dist=0.439m)
2025-12-01 13:33:04,807 - DEBUG - integration_test -   Set spline state to 19.0797
2025-12-01 13:33:04,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:04,808 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:04,822 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(17.899, 3.851), path_start=(0.000, 0.000), dist=18.309m
2025-12-01 13:33:04,822 - WARNING - integration_test - Could not update reference path at step 69: x and y must have the same length
2025-12-01 13:33:04,822 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2025-12-01 13:33:04,825 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:04,826 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:04,826 - INFO - integration_test - Warmstart k=0: x0=17.89905325493901 , y0=3.8505795371657214 , psi0=0.7280437205158392 , v0=3.0 , spline0=19.07968393689593 , a0=0.0 , w0=0.0
2025-12-01 13:33:04,826 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:04,827 - INFO - integration_test - Dyn residual k=0: pred=[18.12299652263799, 4.050202714307813, 0.7280437205158392, 3.0, 19.37968393689593], ws=[18.12299652263799, 4.050202714307813, 0.7280437205158394, 3.0, 23.899778438607598], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.520094501711668], res_norm=4.520e+00
2025-12-01 13:33:04,828 - INFO - integration_test - Dyn residual k=1: pred=[18.34693979033697, 4.249825891449905, 0.7280437205158394, 3.0, 24.1997784386076], ws=[18.34693979033697, 4.249825891449905, 0.7280437205158394, 3.0, 28.616912099961677], res=[0.0, 0.0, 0.0, 0.0, -4.417133661354079], res_norm=4.417e+00
2025-12-01 13:33:04,828 - INFO - integration_test - Dyn residual k=2: pred=[18.570883058035953, 4.449449068591997, 0.7280437205158394, 3.0, 28.916912099961678], ws=[18.570883058035953, 4.449449068591997, 0.7280437205158394, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7671044446268311], res_norm=7.671e-01
2025-12-01 13:33:04,843 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,856 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,871 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,883 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,899 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,912 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,928 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,940 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,955 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,967 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:04,983 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:04,995 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,023 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,038 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,050 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,066 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,078 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,095 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,107 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,123 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,134 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:05,429 - INFO - integration_test - Step 69: MPC solve successful
2025-12-01 13:33:05,437 - INFO - integration_test - Step 69: Computed 10 numeric contouring constraints for visualization (s=19.080)
2025-12-01 13:33:05,438 - DEBUG - integration_test - Step 69: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:05,438 - INFO - integration_test - === Applying control at step 69 ===
2025-12-01 13:33:05,438 - INFO - integration_test -   Control dict from planner: {'a': -2.2111160725747044e-08, 'w': -0.625045513736188}
2025-12-01 13:33:05,438 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:05,438 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:05,439 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:05,439 - INFO - integration_test - Step 69 completed in 0.633s
2025-12-01 13:33:05,461 - INFO - integration_test - Step 70 (contouring until path end)
2025-12-01 13:33:05,463 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.12908738  4.0430763   0.66553917  3.         19.37968394]
2025-12-01 13:33:05,463 - DEBUG - integration_test - Step 70: Using propagated spline 19.3797 (close to path, dist=0.341m)
2025-12-01 13:33:05,463 - DEBUG - integration_test -   Set spline state to 19.3797
2025-12-01 13:33:05,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:05,464 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:05,478 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.129, 4.043), path_start=(0.000, 0.000), dist=18.574m
2025-12-01 13:33:05,479 - WARNING - integration_test - Could not update reference path at step 70: x and y must have the same length
2025-12-01 13:33:05,479 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2025-12-01 13:33:05,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:05,484 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:05,484 - INFO - integration_test - Warmstart k=0: x0=18.129087382735733 , y0=4.043076300576893 , psi0=0.6655391691422204 , v0=3.0 , spline0=19.379683937198422 , a0=0.0 , w0=0.0
2025-12-01 13:33:05,484 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:05,485 - INFO - integration_test - Dyn residual k=0: pred=[18.36506257419221, 4.228321297856389, 0.6655391691422204, 3.0, 19.679683937198423], ws=[18.36506257419221, 4.228321297856389, 0.6655391691422206, 3.0, 24.364665454098095], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.684981516899672], res_norm=4.685e+00
2025-12-01 13:33:05,486 - INFO - integration_test - Dyn residual k=1: pred=[18.601037765648684, 4.413566295135884, 0.6655391691422206, 3.0, 24.664665454098095], ws=[18.601037765648684, 4.413566295135884, 0.6655391691422206, 3.0, 29.12645164982387], res=[0.0, 0.0, 0.0, 0.0, -4.461786195725775], res_norm=4.462e+00
2025-12-01 13:33:05,487 - INFO - integration_test - Dyn residual k=2: pred=[18.83701295710516, 4.5988112924153794, 0.6655391691422206, 3.0, 29.42645164982387], ws=[18.83701295710516, 4.5988112924153794, 0.6655391691422206, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.25756489476463784], res_norm=2.576e-01
2025-12-01 13:33:05,502 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,514 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,531 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,543 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,559 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,571 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,589 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,604 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,620 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,632 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,648 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,660 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,676 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,688 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,705 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,717 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,732 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,744 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,760 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,772 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:05,788 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:05,799 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:06,083 - INFO - integration_test - Step 70: MPC solve successful
2025-12-01 13:33:06,091 - INFO - integration_test - Step 70: Computed 10 numeric contouring constraints for visualization (s=19.380)
2025-12-01 13:33:06,091 - DEBUG - integration_test - Step 70: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:06,091 - INFO - integration_test - === Applying control at step 70 ===
2025-12-01 13:33:06,091 - INFO - integration_test -   Control dict from planner: {'a': 1.7843588738172343e-07, 'w': -0.7999997345669908}
2025-12-01 13:33:06,091 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:06,091 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:06,092 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:06,093 - INFO - integration_test - Step 70 completed in 0.630s
2025-12-01 13:33:06,114 - INFO - integration_test - Step 71 (contouring until path end)
2025-12-01 13:33:06,116 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.3722168   4.2186898   0.5855392   3.00000002 19.67968394]
2025-12-01 13:33:06,117 - DEBUG - integration_test - Step 71: Using propagated spline 19.6797 (close to path, dist=0.094m)
2025-12-01 13:33:06,117 - DEBUG - integration_test -   Set spline state to 19.6797
2025-12-01 13:33:06,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:06,117 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:06,131 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.372, 4.219), path_start=(0.000, 0.000), dist=18.850m
2025-12-01 13:33:06,131 - WARNING - integration_test - Could not update reference path at step 71: x and y must have the same length
2025-12-01 13:33:06,131 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2025-12-01 13:33:06,134 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:06,135 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:06,135 - INFO - integration_test - Warmstart k=0: x0=18.372216798842132 , y0=4.218689798264204 , psi0=0.5855391956855214 , v0=3.0 , spline0=19.679683939285276 , a0=0.0 , w0=0.0
2025-12-01 13:33:06,135 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:06,136 - INFO - integration_test - Dyn residual k=0: pred=[18.622241065197205, 4.384484449063338, 0.5855391956855214, 3.0, 19.979683939285277], ws=[18.622241065197205, 4.384484449063338, 0.5855391956855214, 3.0, 24.692120927027016], res=[0.0, 0.0, 0.0, 0.0, -4.712436987741739], res_norm=4.712e+00
2025-12-01 13:33:06,137 - INFO - integration_test - Dyn residual k=1: pred=[18.872265331552278, 4.550279099862472, 0.5855391956855214, 3.0, 24.992120927027017], ws=[18.872265331552278, 4.550279099862472, 0.5855391956855214, 3.0, 29.517783375649305], res=[0.0, 0.0, 0.0, 0.0, -4.525662448622288], res_norm=4.526e+00
2025-12-01 13:33:06,138 - INFO - integration_test - Dyn residual k=2: pred=[19.12228959790735, 4.7160737506616055, 0.5855391956855214, 3.0, 29.817783375649306], ws=[19.12228959790735, 4.7160737506616055, 0.5855391956855214, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.13376683106079668], res_norm=1.338e-01
2025-12-01 13:33:06,152 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,164 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,181 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,193 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,209 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,221 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,237 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,249 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,265 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,277 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,293 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,305 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,320 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,332 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,348 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,360 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,375 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,386 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,402 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,414 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,429 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,440 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:06,715 - INFO - integration_test - Step 71: MPC solve successful
2025-12-01 13:33:06,723 - INFO - integration_test - Step 71: Computed 10 numeric contouring constraints for visualization (s=19.680)
2025-12-01 13:33:06,724 - DEBUG - integration_test - Step 71: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:06,724 - INFO - integration_test - === Applying control at step 71 ===
2025-12-01 13:33:06,724 - INFO - integration_test -   Control dict from planner: {'a': 5.030791630730672e-08, 'w': -0.7999982633642163}
2025-12-01 13:33:06,724 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:06,724 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:06,725 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:06,725 - INFO - integration_test - Step 71 completed in 0.609s
2025-12-01 13:33:06,746 - INFO - integration_test - Step 72 (contouring until path end)
2025-12-01 13:33:06,748 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[18.6286027   4.37431205  0.50553937  3.00000003 19.97968394]
2025-12-01 13:33:06,748 - DEBUG - integration_test - Step 72: Using propagated spline 19.9797 (close to path, dist=0.293m)
2025-12-01 13:33:06,748 - DEBUG - integration_test -   Set spline state to 19.9797
2025-12-01 13:33:06,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:06,749 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:06,763 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(18.629, 4.374), path_start=(0.000, 0.000), dist=19.135m
2025-12-01 13:33:06,763 - WARNING - integration_test - Could not update reference path at step 72: x and y must have the same length
2025-12-01 13:33:06,763 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2025-12-01 13:33:06,766 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:06,767 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:06,767 - INFO - integration_test - Warmstart k=0: x0=18.62860270024004 , y0=4.37431204594398 , psi0=0.5055393693490997 , v0=3.0 , spline0=19.97968394187521 , a0=0.0 , w0=0.0
2025-12-01 13:33:06,767 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:06,768 - INFO - integration_test - Dyn residual k=0: pred=[18.891076719109673, 4.51959586960795, 0.5055393693490997, 3.0, 20.27968394187521], ws=[18.891076719109673, 4.51959586960795, 0.5055393693490995, 3.0, 25.142469948270623], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -4.862786006395414], res_norm=4.863e+00
2025-12-01 13:33:06,769 - INFO - integration_test - Dyn residual k=1: pred=[19.153550737979305, 4.66487969327192, 0.5055393693490995, 3.0, 25.442469948270624], ws=[19.153550737979305, 4.66487969327192, 0.5055393693490995, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.241546596317885], res_norm=4.242e+00
2025-12-01 13:33:06,770 - INFO - integration_test - Dyn residual k=2: pred=[19.416024756848937, 4.81016351693589, 0.5055393693490995, 3.0, 29.98401654458851], ws=[19.416024756848937, 4.81016351693589, 0.5055393693490995, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:06,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,797 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,814 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,828 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,847 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,861 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,877 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,891 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,908 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,921 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,937 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,950 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,966 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:06,978 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:06,994 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,006 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,022 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,034 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,062 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,077 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,089 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:07,362 - INFO - integration_test - Step 72: MPC solve successful
2025-12-01 13:33:07,370 - INFO - integration_test - Step 72: Computed 10 numeric contouring constraints for visualization (s=19.980)
2025-12-01 13:33:07,371 - DEBUG - integration_test - Step 72: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:07,371 - INFO - integration_test - === Applying control at step 72 ===
2025-12-01 13:33:07,371 - INFO - integration_test -   Control dict from planner: {'a': -6.126629473586969e-07, 'w': -0.7998721264510216}
2025-12-01 13:33:07,371 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:07,371 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:07,372 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:07,372 - INFO - integration_test - Step 72 completed in 0.625s
2025-12-01 13:33:07,396 - INFO - integration_test - Step 73 (contouring until path end)
2025-12-01 13:33:07,398 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[18.89660426  4.50894931  0.42555216  2.99999996 20.27968394]
2025-12-01 13:33:07,398 - DEBUG - integration_test - Step 73: Using propagated spline 20.2797 (close to path, dist=0.126m)
2025-12-01 13:33:07,398 - DEBUG - integration_test -   Set spline state to 20.2797
2025-12-01 13:33:07,398 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:07,399 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:07,412 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(18.897, 4.509), path_start=(0.000, 0.000), dist=19.427m
2025-12-01 13:33:07,413 - WARNING - integration_test - Could not update reference path at step 73: x and y must have the same length
2025-12-01 13:33:07,413 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2025-12-01 13:33:07,415 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:07,417 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:07,417 - INFO - integration_test - Warmstart k=0: x0=18.896604256014236 , y0=4.508949314009341 , psi0=0.42555215670399754 , v0=2.999999964633027 , spline0=20.27968393833851 , a0=0.0 , w0=0.0
2025-12-01 13:33:07,417 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:07,418 - INFO - integration_test - Dyn residual k=0: pred=[19.169847531314286, 4.632796439051798, 0.42555215670399754, 2.999999964633027, 20.579683934801814], ws=[19.169847531314286, 4.632796439051798, 0.4255521567039975, 2.999999964633027, 25.46695765252936], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -4.887273717727545], res_norm=4.887e+00
2025-12-01 13:33:07,418 - INFO - integration_test - Dyn residual k=1: pred=[19.443090806614336, 4.756643564094256, 0.4255521567039975, 2.999999964633027, 25.766957648992662], ws=[19.443090806614336, 4.756643564094256, 0.4255521567039975, 2.999999964633027, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.917058895595847], res_norm=3.917e+00
2025-12-01 13:33:07,419 - INFO - integration_test - Dyn residual k=2: pred=[19.716334081914386, 4.880490689136714, 0.4255521567039975, 2.999999964633027, 29.984016541051812], ws=[19.716334081914386, 4.880490689136714, 0.4255521567039975, 2.999999964633027, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999999646330267], res_norm=3.000e-01
2025-12-01 13:33:07,434 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,446 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,462 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,473 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,490 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,502 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,518 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,530 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,545 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,557 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,573 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,585 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,601 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,613 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,628 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,640 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,656 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,668 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,685 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,697 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:07,712 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:07,723 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:08,065 - INFO - integration_test - Step 73: MPC solve successful
2025-12-01 13:33:08,073 - INFO - integration_test - Step 73: Computed 10 numeric contouring constraints for visualization (s=20.280)
2025-12-01 13:33:08,074 - DEBUG - integration_test - Step 73: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:08,074 - INFO - integration_test - === Applying control at step 73 ===
2025-12-01 13:33:08,074 - INFO - integration_test -   Control dict from planner: {'a': 4.1698988229178975e-07, 'w': -0.7999899057207601}
2025-12-01 13:33:08,074 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:08,074 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:08,075 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:08,075 - INFO - integration_test - Step 73 completed in 0.678s
2025-12-01 13:33:08,098 - INFO - integration_test - Step 74 (contouring until path end)
2025-12-01 13:33:08,099 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.17450736  4.62174062  0.34555317  3.00000001 20.57968394]
2025-12-01 13:33:08,099 - DEBUG - integration_test - Step 74: Using propagated spline 20.5797 (close to path, dist=0.287m)
2025-12-01 13:33:08,099 - DEBUG - integration_test -   Set spline state to 20.5797
2025-12-01 13:33:08,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:08,100 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:08,114 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.175, 4.622), path_start=(0.000, 0.000), dist=19.724m
2025-12-01 13:33:08,114 - WARNING - integration_test - Could not update reference path at step 74: x and y must have the same length
2025-12-01 13:33:08,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2025-12-01 13:33:08,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:08,118 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:08,118 - INFO - integration_test - Warmstart k=0: x0=19.174507359404554 , y0=4.621740618036108 , psi0=0.34555316613192155 , v0=3.0 , spline0=20.579683938971712 , a0=0.0 , w0=0.0
2025-12-01 13:33:08,118 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:08,119 - INFO - integration_test - Dyn residual k=0: pred=[19.456773828310695, 4.72335577700001, 0.34555316613192155, 3.0, 20.879683938971713], ws=[19.456773828310695, 4.72335577700001, 0.34555316613192133, 3.0, 25.90039153765678], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.0207075986850676], res_norm=5.021e+00
2025-12-01 13:33:08,120 - INFO - integration_test - Dyn residual k=1: pred=[19.739040297216835, 4.824970935963912, 0.34555316613192133, 3.0, 26.20039153765678], ws=[19.739040297216835, 4.824970935963912, 0.34555316613192133, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.483625006931728], res_norm=3.484e+00
2025-12-01 13:33:08,121 - INFO - integration_test - Dyn residual k=2: pred=[20.021306766122976, 4.926586094927814, 0.34555316613192133, 3.0, 29.98401654458851], ws=[20.021306766122976, 4.926586094927814, 0.34555316613192133, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:08,135 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,148 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,164 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,176 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,192 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,204 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,220 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,232 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,247 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,259 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,275 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,287 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,303 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,315 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,330 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,342 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,357 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,369 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,397 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,412 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,423 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:08,738 - INFO - integration_test - Step 74: MPC solve successful
2025-12-01 13:33:08,745 - INFO - integration_test - Step 74: Computed 10 numeric contouring constraints for visualization (s=20.580)
2025-12-01 13:33:08,746 - DEBUG - integration_test - Step 74: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:08,746 - INFO - integration_test - === Applying control at step 74 ===
2025-12-01 13:33:08,746 - INFO - integration_test -   Control dict from planner: {'a': -1.3240329785721337e-07, 'w': -0.7093298944737083}
2025-12-01 13:33:08,746 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:08,746 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:08,747 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:08,747 - INFO - integration_test - Step 74 completed in 0.649s
2025-12-01 13:33:08,768 - INFO - integration_test - Step 75 (contouring until path end)
2025-12-01 13:33:08,769 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.46013961  4.71326378  0.27462018  2.99999999 20.87968394]
2025-12-01 13:33:08,770 - DEBUG - integration_test - Step 75: Using propagated spline 20.8797 (close to path, dist=0.209m)
2025-12-01 13:33:08,770 - DEBUG - integration_test -   Set spline state to 20.8797
2025-12-01 13:33:08,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:08,771 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:08,784 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.460, 4.713), path_start=(0.000, 0.000), dist=20.023m
2025-12-01 13:33:08,785 - WARNING - integration_test - Could not update reference path at step 75: x and y must have the same length
2025-12-01 13:33:08,785 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2025-12-01 13:33:08,787 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:08,789 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:08,789 - INFO - integration_test - Warmstart k=0: x0=19.460139609551586 , y0=4.713263781232318 , psi0=0.27462017668455074 , v0=2.9999999930916856 , spline0=20.87968393828088 , a0=0.0 , w0=0.0
2025-12-01 13:33:08,789 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:08,790 - INFO - integration_test - Dyn residual k=0: pred=[19.748898089304987, 4.79461819079938, 0.27462017668455074, 2.9999999930916856, 21.17968393759005], ws=[19.748898089304987, 4.79461819079938, 0.27462017668455063, 2.9999999930916856, 26.221823386425598], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.042139448835549], res_norm=5.042e+00
2025-12-01 13:33:08,791 - INFO - integration_test - Dyn residual k=1: pred=[20.037656569058388, 4.875972600366441, 0.27462017668455063, 2.9999999930916856, 26.521823385734766], ws=[20.037656569058388, 4.875972600366441, 0.27462017668455063, 2.9999999930916856, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.162193158853743], res_norm=3.162e+00
2025-12-01 13:33:08,792 - INFO - integration_test - Dyn residual k=2: pred=[20.32641504881179, 4.957327009933502, 0.27462017668455063, 2.9999999930916856, 29.984016543897678], ws=[20.32641504881179, 4.957327009933502, 0.27462017668455063, 2.9999999930916856, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999999930916843], res_norm=3.000e-01
2025-12-01 13:33:08,807 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,819 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,835 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,847 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,863 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,875 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,890 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,902 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,918 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,930 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,945 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,957 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:08,972 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:08,984 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,000 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,011 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,027 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,038 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,054 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,066 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,081 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,092 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:09,432 - INFO - integration_test - Step 75: MPC solve successful
2025-12-01 13:33:09,439 - INFO - integration_test - Step 75: Computed 10 numeric contouring constraints for visualization (s=20.880)
2025-12-01 13:33:09,440 - DEBUG - integration_test - Step 75: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:09,440 - INFO - integration_test - === Applying control at step 75 ===
2025-12-01 13:33:09,440 - INFO - integration_test -   Control dict from planner: {'a': 2.3061625251452918e-07, 'w': 0.7997846911522576}
2025-12-01 13:33:09,440 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:09,440 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:09,441 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:09,441 - INFO - integration_test - Step 75 completed in 0.672s
2025-12-01 13:33:09,465 - INFO - integration_test - Step 76 (contouring until path end)
2025-12-01 13:33:09,466 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.74533878  4.80607257  0.35459865  3.00000002 21.17968394]
2025-12-01 13:33:09,466 - DEBUG - integration_test - Step 76: Using propagated spline 21.1797 (close to path, dist=0.291m)
2025-12-01 13:33:09,467 - DEBUG - integration_test -   Set spline state to 21.1797
2025-12-01 13:33:09,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:09,467 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:09,481 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.745, 4.806), path_start=(0.000, 0.000), dist=20.322m
2025-12-01 13:33:09,482 - WARNING - integration_test - Could not update reference path at step 76: x and y must have the same length
2025-12-01 13:33:09,482 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2025-12-01 13:33:09,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:09,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:09,486 - INFO - integration_test - Warmstart k=0: x0=19.74533878283976 , y0=4.806072565572549 , psi0=0.3545986457997765 , v0=3.0 , spline0=21.17968393989621 , a0=0.0 , w0=0.0
2025-12-01 13:33:09,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:09,487 - INFO - integration_test - Dyn residual k=0: pred=[20.02667455888421, 4.9102367682405825, 0.3545986457997765, 3.0, 21.479683939896212], ws=[20.02667455888421, 4.9102367682405825, 0.3545986457997765, 3.0, 26.638390970745974], res=[0.0, 0.0, 0.0, 0.0, -5.158707030849762], res_norm=5.159e+00
2025-12-01 13:33:09,487 - INFO - integration_test - Dyn residual k=1: pred=[20.30801033492866, 5.014400970908616, 0.3545986457997765, 3.0, 26.938390970745974], ws=[20.30801033492866, 5.014400970908616, 0.3545986457997765, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.745625573842535], res_norm=2.746e+00
2025-12-01 13:33:09,488 - INFO - integration_test - Dyn residual k=2: pred=[20.58934611097311, 5.118565173576649, 0.3545986457997765, 3.0, 29.98401654458851], ws=[20.58934611097311, 5.118565173576649, 0.3545986457997765, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:09,503 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,515 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,531 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,543 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,558 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,570 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,586 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,599 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,614 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,626 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,642 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,654 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,669 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,681 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,697 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,709 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,725 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,737 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,752 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,767 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:09,782 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:09,792 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:23,130 - WARNING - integration_test - Step 76: MPC solve failed
2025-12-01 13:33:23,130 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 13:33:23,134 - INFO - integration_test - Step 76: Computed 10 numeric contouring constraints for visualization (s=21.180)
2025-12-01 13:33:23,135 - DEBUG - integration_test - Step 76: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:23,135 - INFO - integration_test - === Applying control at step 76 ===
2025-12-01 13:33:23,135 - INFO - integration_test -   Control dict from planner: {'a': 2.3061625251452918e-07, 'w': 0.7997846911522576}
2025-12-01 13:33:23,135 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:23,135 - INFO - integration_test -   Planner output success: False
2025-12-01 13:33:23,136 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:23,136 - INFO - integration_test - Step 76 completed in 13.670s
2025-12-01 13:33:23,157 - INFO - integration_test - Step 77 (contouring until path end)
2025-12-01 13:33:23,158 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.0222115   4.92137016  0.43457711  3.00000004 21.47968394]
2025-12-01 13:33:23,159 - DEBUG - integration_test - Step 77: Using propagated spline 21.4797 (close to path, dist=0.259m)
2025-12-01 13:33:23,159 - DEBUG - integration_test -   Set spline state to 21.4797
2025-12-01 13:33:23,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:23,159 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:23,173 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.022, 4.921), path_start=(0.000, 0.000), dist=20.618m
2025-12-01 13:33:23,174 - WARNING - integration_test - Could not update reference path at step 77: x and y must have the same length
2025-12-01 13:33:23,174 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2025-12-01 13:33:23,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:23,177 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:23,177 - INFO - integration_test - Warmstart k=0: x0=20.022211504463158 , y0=4.921370164414769 , psi0=0.4345771149150023 , v0=3.0 , spline0=21.479683943817705 , a0=0.0 , w0=0.0
2025-12-01 13:33:23,178 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:23,179 - INFO - integration_test - Dyn residual k=0: pred=[20.294325955276808, 5.0476782229794805, 0.4345771149150023, 3.0, 21.779683943817705], ws=[20.294325955276808, 5.0476782229794805, 0.4345771149150024, 3.0, 26.957119166490802], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.177435222673097], res_norm=5.177e+00
2025-12-01 13:33:23,179 - INFO - integration_test - Dyn residual k=1: pred=[20.566440406090457, 5.173986281544192, 0.4345771149150024, 3.0, 27.257119166490803], ws=[20.566440406090457, 5.173986281544192, 0.4345771149150024, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.4268973780977063], res_norm=2.427e+00
2025-12-01 13:33:23,180 - INFO - integration_test - Dyn residual k=2: pred=[20.838554856904107, 5.300294340108903, 0.4345771149150024, 3.0, 29.98401654458851], ws=[20.838554856904107, 5.300294340108903, 0.4345771149150024, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:23,196 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,208 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,224 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,237 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,265 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,281 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,294 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,311 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,323 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,339 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,351 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,379 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,395 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,407 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,423 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,436 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,454 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,467 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,485 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,497 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:23,855 - INFO - integration_test - Step 77: MPC solve successful
2025-12-01 13:33:23,863 - INFO - integration_test - Step 77: Computed 10 numeric contouring constraints for visualization (s=21.480)
2025-12-01 13:33:23,864 - DEBUG - integration_test - Step 77: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:23,864 - INFO - integration_test - === Applying control at step 77 ===
2025-12-01 13:33:23,864 - INFO - integration_test -   Control dict from planner: {'a': -3.1814869621246255e-06, 'w': 0.06238520882288231}
2025-12-01 13:33:23,864 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:23,864 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:23,865 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:23,865 - INFO - integration_test - Step 77 completed in 0.707s
2025-12-01 13:33:23,886 - INFO - integration_test - Step 78 (contouring until path end)
2025-12-01 13:33:23,888 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[20.29393019  5.04852619  0.44081564  2.99999972 21.77968392]
2025-12-01 13:33:23,888 - DEBUG - integration_test - Step 78: Using propagated spline 21.7797 (close to path, dist=0.329m)
2025-12-01 13:33:23,888 - DEBUG - integration_test -   Set spline state to 21.7797
2025-12-01 13:33:23,889 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:23,889 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:23,903 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(20.294, 5.049), path_start=(0.000, 0.000), dist=20.912m
2025-12-01 13:33:23,904 - WARNING - integration_test - Could not update reference path at step 78: x and y must have the same length
2025-12-01 13:33:23,904 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2025-12-01 13:33:23,907 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:23,909 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:23,909 - INFO - integration_test - Warmstart k=0: x0=20.293930192901843 , y0=5.048526191674673 , psi0=0.4408156357972905 , v0=2.9999997210662395 , spline0=21.779683915924327 , a0=0.0 , w0=0.0
2025-12-01 13:33:23,909 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:23,910 - INFO - integration_test - Dyn residual k=0: pred=[20.565251352925458, 5.176529361117528, 0.4408156357972905, 2.9999997210662395, 22.07968388803095], ws=[20.565251352925458, 5.176529361117528, 0.44081563579729055, 2.9999997210662395, 27.358885579759935], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -5.279201691728986], res_norm=5.279e+00
2025-12-01 13:33:23,911 - INFO - integration_test - Dyn residual k=1: pred=[20.836572512949072, 5.304532530560383, 0.44081563579729055, 2.9999997210662395, 27.658885551866558], ws=[20.836572512949072, 5.304532530560383, 0.44081563579729055, 2.9999997210662395, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.0251309927219516], res_norm=2.025e+00
2025-12-01 13:33:23,911 - INFO - integration_test - Dyn residual k=2: pred=[21.107893672972686, 5.432535700003238, 0.44081563579729055, 2.9999997210662395, 29.98401651669513], ws=[21.107893672972686, 5.432535700003238, 0.44081563579729055, 2.9999997210662395, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999997210662244], res_norm=3.000e-01
2025-12-01 13:33:23,926 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,940 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,956 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:23,969 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:23,987 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,000 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,018 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,032 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,050 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,064 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,083 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,097 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,116 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,130 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,148 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,162 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,181 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,194 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,213 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,227 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:24,246 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:24,259 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:39,125 - WARNING - integration_test - Step 78: MPC solve failed
2025-12-01 13:33:39,125 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 13:33:39,129 - INFO - integration_test - Step 78: Computed 10 numeric contouring constraints for visualization (s=21.780)
2025-12-01 13:33:39,130 - DEBUG - integration_test - Step 78: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:39,130 - INFO - integration_test - === Applying control at step 78 ===
2025-12-01 13:33:39,130 - INFO - integration_test -   Control dict from planner: {'a': -3.1814869621246255e-06, 'w': 0.06238520882288231}
2025-12-01 13:33:39,130 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:39,130 - INFO - integration_test -   Planner output success: False
2025-12-01 13:33:39,131 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:39,131 - INFO - integration_test - Step 78 completed in 15.244s
2025-12-01 13:33:39,152 - INFO - integration_test - Step 79 (contouring until path end)
2025-12-01 13:33:39,153 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[20.5648503   5.17737484  0.44705416  2.9999994  22.07968386]
2025-12-01 13:33:39,153 - DEBUG - integration_test - Step 79: Using propagated spline 22.0797 (close to path, dist=0.319m)
2025-12-01 13:33:39,153 - DEBUG - integration_test -   Set spline state to 22.0797
2025-12-01 13:33:39,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:39,154 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:39,168 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(20.565, 5.177), path_start=(0.000, 0.000), dist=21.207m
2025-12-01 13:33:39,168 - WARNING - integration_test - Could not update reference path at step 79: x and y must have the same length
2025-12-01 13:33:39,168 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2025-12-01 13:33:39,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:39,173 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:39,173 - INFO - integration_test - Warmstart k=0: x0=20.56485030471165 , y0=5.177374842592966 , psi0=0.4470541566795787 , v0=2.999999402917543 , spline0=22.079683856216082 , a0=0.0 , w0=0.0
2025-12-01 13:33:39,173 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:39,174 - INFO - integration_test - Dyn residual k=0: pred=[20.83536761100489, 5.307068139146432, 0.4470541566795787, 2.999999402917543, 22.379683796507837], ws=[20.83536761100489, 5.307068139146432, 0.4470541566795787, 2.999999402917543, 27.675520643294423], res=[0.0, 0.0, 0.0, 0.0, -5.295836846786585], res_norm=5.296e+00
2025-12-01 13:33:39,174 - INFO - integration_test - Dyn residual k=1: pred=[21.10588491729813, 5.436761435699898, 0.4470541566795787, 2.999999402917543, 27.975520583586178], ws=[21.10588491729813, 5.436761435699898, 0.4470541566795787, 2.999999402917543, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.7084959610023311], res_norm=1.708e+00
2025-12-01 13:33:39,175 - INFO - integration_test - Dyn residual k=2: pred=[21.37640222359137, 5.566454732253364, 0.4470541566795787, 2.999999402917543, 29.984016484880264], ws=[21.37640222359137, 5.566454732253364, 0.4470541566795787, 2.999999402917543, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999994029175525], res_norm=3.000e-01
2025-12-01 13:33:39,195 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,209 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,225 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,239 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,255 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,267 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,296 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,313 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,325 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,341 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,353 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,369 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,381 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,397 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,410 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,427 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,440 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,458 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,473 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,491 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,503 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:39,874 - INFO - integration_test - Step 79: MPC solve successful
2025-12-01 13:33:39,882 - INFO - integration_test - Step 79: Computed 10 numeric contouring constraints for visualization (s=22.080)
2025-12-01 13:33:39,883 - DEBUG - integration_test - Step 79: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:39,883 - INFO - integration_test - === Applying control at step 79 ===
2025-12-01 13:33:39,883 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019326096, 'w': -0.1063752243426503}
2025-12-01 13:33:39,883 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:39,883 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:39,884 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:39,884 - INFO - integration_test - Step 79 completed in 0.732s
2025-12-01 13:33:39,909 - INFO - integration_test - Step 80 (contouring until path end)
2025-12-01 13:33:39,910 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[20.82700466  5.30136785  0.43641663  2.7999994  22.3596838 ]
2025-12-01 13:33:39,911 - DEBUG - integration_test - Step 80: Using propagated spline 22.3597 (close to path, dist=0.317m)
2025-12-01 13:33:39,911 - DEBUG - integration_test -   Set spline state to 22.3597
2025-12-01 13:33:39,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:39,911 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:39,925 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(20.827, 5.301), path_start=(0.000, 0.000), dist=21.491m
2025-12-01 13:33:39,926 - WARNING - integration_test - Could not update reference path at step 80: x and y must have the same length
2025-12-01 13:33:39,926 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2025-12-01 13:33:39,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:39,930 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:39,930 - INFO - integration_test - Warmstart k=0: x0=20.827004662290392 , y0=5.301367848012152 , psi0=0.4364166342453137 , v0=2.799999400984934 , spline0=22.359683796314577 , a0=0.0 , w0=0.0
2025-12-01 13:33:39,930 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:39,931 - INFO - integration_test - Dyn residual k=0: pred=[21.08076080947581, 5.419722333439503, 0.4364166342453137, 2.799999400984934, 22.63968373641307], ws=[21.08076080947581, 5.419722333439503, 0.4364166342453135, 2.799999400984934, 28.019911022645562], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -5.380227286232493], res_norm=5.380e+00
2025-12-01 13:33:39,931 - INFO - integration_test - Dyn residual k=1: pred=[21.334516956661226, 5.538076818866854, 0.4364166342453135, 2.799999400984934, 28.299910962744057], ws=[21.334516956661226, 5.538076818866854, 0.4364166342453135, 2.799999400984934, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.3841055818444516], res_norm=1.384e+00
2025-12-01 13:33:39,932 - INFO - integration_test - Dyn residual k=2: pred=[21.588273103846642, 5.6564313042942045, 0.4364166342453135, 2.799999400984934, 29.964016484687], ws=[21.588273103846642, 5.6564313042942045, 0.4364166342453135, 2.799999400984934, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2799999400984916], res_norm=2.800e-01
2025-12-01 13:33:39,947 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,960 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:39,976 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:39,988 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,005 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,017 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,033 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,045 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,060 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,072 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,088 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,100 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,116 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,128 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,144 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,156 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,172 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,184 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,201 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,213 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,229 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,240 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:40,520 - INFO - integration_test - Step 80: MPC solve successful
2025-12-01 13:33:40,529 - INFO - integration_test - Step 80: Computed 10 numeric contouring constraints for visualization (s=22.360)
2025-12-01 13:33:40,529 - DEBUG - integration_test - Step 80: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:40,529 - INFO - integration_test - === Applying control at step 80 ===
2025-12-01 13:33:40,529 - INFO - integration_test -   Control dict from planner: {'a': -1.9999997180390823, 'w': 0.7774212500267946}
2025-12-01 13:33:40,529 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:40,529 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:40,530 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:40,531 - INFO - integration_test - Step 80 completed in 0.621s
2025-12-01 13:33:40,553 - INFO - integration_test - Step 81 (contouring until path end)
2025-12-01 13:33:40,553 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[21.06707694  5.42477199  0.51415876  2.59999943 22.61968374]
2025-12-01 13:33:40,554 - DEBUG - integration_test - Step 81: Using propagated spline 22.6197 (close to path, dist=0.423m)
2025-12-01 13:33:40,554 - DEBUG - integration_test -   Set spline state to 22.6197
2025-12-01 13:33:40,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:40,554 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:40,568 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(21.067, 5.425), path_start=(0.000, 0.000), dist=21.754m
2025-12-01 13:33:40,568 - WARNING - integration_test - Could not update reference path at step 81: x and y must have the same length
2025-12-01 13:33:40,568 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2025-12-01 13:33:40,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:40,572 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:40,572 - INFO - integration_test - Warmstart k=0: x0=21.06707693637545 , y0=5.424771986333747 , psi0=0.5141587592479931 , v0=2.599999429181026 , spline0=22.61968373923268 , a0=0.0 , w0=0.0
2025-12-01 13:33:40,572 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:40,573 - INFO - integration_test - Dyn residual k=0: pred=[21.293460642893002, 5.55264062103668, 0.5141587592479931, 2.599999429181026, 22.879683682150784], ws=[21.293460642893002, 5.55264062103668, 0.514158759247993, 2.599999429181026, 28.26396444533281], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.384280763182026], res_norm=5.384e+00
2025-12-01 13:33:40,574 - INFO - integration_test - Dyn residual k=1: pred=[21.519844349410555, 5.680509255739612, 0.514158759247993, 2.599999429181026, 28.523964388250914], ws=[21.519844349410555, 5.680509255739612, 0.514158759247993, 2.599999429181026, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1600521563375956], res_norm=1.160e+00
2025-12-01 13:33:40,575 - INFO - integration_test - Dyn residual k=2: pred=[21.746228055928107, 5.808377890442545, 0.514158759247993, 2.599999429181026, 29.944016487506612], ws=[21.746228055928107, 5.808377890442545, 0.514158759247993, 2.599999429181026, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.25999994291810324], res_norm=2.600e-01
2025-12-01 13:33:40,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,603 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,619 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,631 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,647 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,659 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,675 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,688 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,704 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,716 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,731 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,743 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,771 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,787 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,799 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,815 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,827 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,843 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,855 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:40,871 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:40,883 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:41,178 - INFO - integration_test - Step 81: MPC solve successful
2025-12-01 13:33:41,186 - INFO - integration_test - Step 81: Computed 10 numeric contouring constraints for visualization (s=22.620)
2025-12-01 13:33:41,186 - DEBUG - integration_test - Step 81: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:41,186 - INFO - integration_test - === Applying control at step 81 ===
2025-12-01 13:33:41,186 - INFO - integration_test -   Control dict from planner: {'a': -1.9999994021161047, 'w': 0.7076915998085629}
2025-12-01 13:33:41,186 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:41,186 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:41,187 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:41,188 - INFO - integration_test - Step 81 completed in 0.635s
2025-12-01 13:33:41,211 - INFO - integration_test - Step 82 (contouring until path end)
2025-12-01 13:33:41,212 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[21.28028478  5.55521862  0.58492792  2.39999949 22.85968369]
2025-12-01 13:33:41,213 - DEBUG - integration_test - Step 82: Using propagated spline 22.8597 (close to path, dist=0.380m)
2025-12-01 13:33:41,213 - DEBUG - integration_test -   Set spline state to 22.8597
2025-12-01 13:33:41,213 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:41,213 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:41,227 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(21.280, 5.555), path_start=(0.000, 0.000), dist=21.993m
2025-12-01 13:33:41,227 - WARNING - integration_test - Could not update reference path at step 82: x and y must have the same length
2025-12-01 13:33:41,227 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2025-12-01 13:33:41,230 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:41,231 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:41,232 - INFO - integration_test - Warmstart k=0: x0=21.280284779060075 , y0=5.555218616689128 , psi0=0.5849279192288495 , v0=2.3999994889694154 , spline0=22.85968368812962 , a0=0.0 , w0=0.0
2025-12-01 13:33:41,232 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:41,232 - INFO - integration_test - Dyn residual k=0: pred=[21.48038518925564, 5.687732017181689, 0.5849279192288495, 2.3999994889694154, 23.099683637026562], ws=[21.48038518925564, 5.687732017181689, 0.5849279192288495, 2.3999994889694154, 28.550708863508778], res=[0.0, 0.0, 0.0, 0.0, -5.451025226482216], res_norm=5.451e+00
2025-12-01 13:33:41,233 - INFO - integration_test - Dyn residual k=1: pred=[21.680485599451202, 5.820245417674251, 0.5849279192288495, 2.3999994889694154, 28.790708812405718], ws=[21.680485599451202, 5.820245417674251, 0.5849279192288495, 2.3999994889694154, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.8933077321827909], res_norm=8.933e-01
2025-12-01 13:33:41,234 - INFO - integration_test - Dyn residual k=2: pred=[21.880586009646766, 5.952758818166812, 0.5849279192288495, 2.3999994889694154, 29.92401649348545], ws=[21.880586009646766, 5.952758818166812, 0.5849279192288495, 2.3999994889694154, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.23999994889694065], res_norm=2.400e-01
2025-12-01 13:33:41,248 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,261 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,277 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,289 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,305 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,318 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,334 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,346 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,362 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,374 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,390 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,402 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,418 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,430 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,446 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,458 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,473 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,485 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,502 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,514 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,540 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:41,860 - INFO - integration_test - Step 82: MPC solve successful
2025-12-01 13:33:41,868 - INFO - integration_test - Step 82: Computed 10 numeric contouring constraints for visualization (s=22.860)
2025-12-01 13:33:41,868 - DEBUG - integration_test - Step 82: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:41,868 - INFO - integration_test - === Applying control at step 82 ===
2025-12-01 13:33:41,868 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999505437864, 'w': 0.6691472078581587}
2025-12-01 13:33:41,868 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:41,868 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:41,869 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:41,869 - INFO - integration_test - Step 82 completed in 0.657s
2025-12-01 13:33:41,892 - INFO - integration_test - Step 83 (contouring until path end)
2025-12-01 13:33:41,893 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.46772201  5.68843851  0.65184264  2.19999949 23.07968364]
2025-12-01 13:33:41,894 - DEBUG - integration_test - Step 83: Using propagated spline 23.0797 (close to path, dist=0.432m)
2025-12-01 13:33:41,894 - DEBUG - integration_test -   Set spline state to 23.0797
2025-12-01 13:33:41,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:41,894 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:41,908 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.468, 5.688), path_start=(0.000, 0.000), dist=22.209m
2025-12-01 13:33:41,908 - WARNING - integration_test - Could not update reference path at step 83: x and y must have the same length
2025-12-01 13:33:41,908 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2025-12-01 13:33:41,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:41,912 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:41,912 - INFO - integration_test - Warmstart k=0: x0=21.4677220070497 , y0=5.688438508707274 , psi0=0.6518426400146653 , v0=2.199999493915037 , spline0=23.079683637521125 , a0=0.0 , w0=0.0
2025-12-01 13:33:41,913 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:41,913 - INFO - integration_test - Dyn residual k=0: pred=[21.642614774360336, 5.821901978146264, 0.6518426400146653, 2.199999493915037, 23.29968358691263], ws=[21.642614774360336, 5.821901978146264, 0.6518426400146655, 2.199999493915037, 28.744876536381035], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.445192949468407], res_norm=5.445e+00
2025-12-01 13:33:41,914 - INFO - integration_test - Dyn residual k=1: pred=[21.81750754167097, 5.955365447585254, 0.6518426400146655, 2.199999493915037, 28.96487648577254], ws=[21.81750754167097, 5.955365447585254, 0.6518426400146655, 2.199999493915037, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7191400588159702], res_norm=7.191e-01
2025-12-01 13:33:41,915 - INFO - integration_test - Dyn residual k=2: pred=[21.992400308981605, 6.088828917024244, 0.6518426400146655, 2.199999493915037, 29.904016493980013], ws=[21.992400308981605, 6.088828917024244, 0.6518426400146655, 2.199999493915037, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2199999493915037], res_norm=2.200e-01
2025-12-01 13:33:41,930 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,942 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,958 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,970 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:41,986 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:41,998 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,014 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,026 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,042 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,054 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,082 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,098 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,110 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,126 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,138 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,154 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,166 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,182 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,194 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,210 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,221 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:42,585 - INFO - integration_test - Step 83: MPC solve successful
2025-12-01 13:33:42,592 - INFO - integration_test - Step 83: Computed 10 numeric contouring constraints for visualization (s=23.080)
2025-12-01 13:33:42,593 - DEBUG - integration_test - Step 83: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:42,593 - INFO - integration_test - === Applying control at step 83 ===
2025-12-01 13:33:42,593 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999299938787, 'w': -0.7786154205886009}
2025-12-01 13:33:42,593 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:42,593 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:42,594 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:42,594 - INFO - integration_test - Step 83 completed in 0.701s
2025-12-01 13:33:42,620 - INFO - integration_test - Step 84 (contouring until path end)
2025-12-01 13:33:42,621 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[21.639379    5.80931695  0.5739811   1.9999995  23.27968359]
2025-12-01 13:33:42,622 - INFO - integration_test - Step 84: Re-initialized spline from 23.2797 to 23.6261 (vehicle at (21.64, 5.81), closest path point at (22.06, 5.53), distance=0.504m)
2025-12-01 13:33:42,622 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 13:33:42,622 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:42,622 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:42,636 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(21.639, 5.809), path_start=(0.000, 0.000), dist=22.406m
2025-12-01 13:33:42,637 - WARNING - integration_test - Could not update reference path at step 84: x and y must have the same length
2025-12-01 13:33:42,637 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2025-12-01 13:33:42,640 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:42,641 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:42,642 - INFO - integration_test - Warmstart k=0: x0=21.639379000158364 , y0=5.809316954614616 , psi0=0.5739810979558052 , v0=1.999999500915649 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 13:33:42,642 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:42,642 - INFO - integration_test - Dyn residual k=0: pred=[21.807328154467204, 5.917912818272375, 0.5739810979558052, 1.999999500915649, 23.826053934559972], ws=[21.807328154467204, 5.917912818272375, 0.5739810979558051, 1.999999500915649, 29.352266467747423], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.526212533187451], res_norm=5.526e+00
2025-12-01 13:33:42,643 - INFO - integration_test - Dyn residual k=1: pred=[21.975277308776043, 6.0265086819301334, 0.5739810979558051, 1.999999500915649, 29.55226641783899], ws=[21.975277308776043, 6.0265086819301334, 0.5739810979558051, 1.999999500915649, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.13175012674951958], res_norm=1.318e-01
2025-12-01 13:33:42,644 - INFO - integration_test - Dyn residual k=2: pred=[22.143226463084883, 6.135104545587892, 0.5739810979558051, 1.999999500915649, 29.884016494680075], ws=[22.143226463084883, 6.135104545587892, 0.5739810979558051, 1.999999500915649, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.19999995009156635], res_norm=2.000e-01
2025-12-01 13:33:42,659 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,672 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,688 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,701 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,718 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,730 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,747 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,759 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,775 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,787 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,803 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,815 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,831 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,843 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,859 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,872 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,888 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,900 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,916 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,928 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:42,944 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:42,955 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:43,385 - INFO - integration_test - Step 84: MPC solve successful
2025-12-01 13:33:43,393 - INFO - integration_test - Step 84: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 13:33:43,393 - DEBUG - integration_test - Step 84: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:43,393 - INFO - integration_test - === Applying control at step 84 ===
2025-12-01 13:33:43,393 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001999111, 'w': 0.20053447346542666}
2025-12-01 13:33:43,393 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:43,393 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:43,394 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:43,395 - INFO - integration_test - Step 84 completed in 0.774s
2025-12-01 13:33:43,420 - INFO - integration_test - Step 85 (contouring until path end)
2025-12-01 13:33:43,421 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[21.8145521   5.92513097  0.59403455  2.1999995  23.84605393]
2025-12-01 13:33:43,422 - DEBUG - integration_test - Step 85: Using propagated spline 23.8461 (close to path, dist=0.466m)
2025-12-01 13:33:43,422 - DEBUG - integration_test -   Set spline state to 23.8461
2025-12-01 13:33:43,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:43,422 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:43,435 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(21.815, 5.925), path_start=(0.000, 0.000), dist=22.605m
2025-12-01 13:33:43,436 - WARNING - integration_test - Could not update reference path at step 85: x and y must have the same length
2025-12-01 13:33:43,436 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2025-12-01 13:33:43,439 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:43,440 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:43,440 - INFO - integration_test - Warmstart k=0: x0=21.814552101925262 , y0=5.925130972647973 , psi0=0.5940345453023479 , v0=2.19999950291476 , spline0=23.846053934759883 , a0=0.0 , w0=0.0
2025-12-01 13:33:43,440 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:43,441 - INFO - integration_test - Dyn residual k=0: pred=[21.996863697625642, 6.048266914604144, 0.5940345453023479, 2.19999950291476, 24.06605388505136], ws=[21.996863697625642, 6.048266914604144, 0.5940345453023479, 2.19999950291476, 29.6473325049665], res=[0.0, 0.0, 0.0, 0.0, -5.581278619915139], res_norm=5.581e+00
2025-12-01 13:33:43,441 - INFO - integration_test - Dyn residual k=1: pred=[22.179175293326022, 6.171402856560316, 0.5940345453023479, 2.19999950291476, 29.867332455257976], ws=[22.179175293326022, 6.171402856560316, 0.5940345453023479, 2.19999950291476, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.18331591066946729], res_norm=1.833e-01
2025-12-01 13:33:43,442 - INFO - integration_test - Dyn residual k=2: pred=[22.361486889026402, 6.294538798516487, 0.5940345453023479, 2.19999950291476, 29.904016494879986], ws=[22.361486889026402, 6.294538798516487, 0.5940345453023479, 2.19999950291476, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.21999995029147712], res_norm=2.200e-01
2025-12-01 13:33:43,457 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,469 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,485 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,497 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,515 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,527 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,543 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,555 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,583 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,599 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,612 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,628 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,640 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,655 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,667 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,685 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,697 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,713 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,725 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:43,741 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:43,752 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:44,202 - INFO - integration_test - Step 85: MPC solve successful
2025-12-01 13:33:44,210 - INFO - integration_test - Step 85: Computed 10 numeric contouring constraints for visualization (s=23.846)
2025-12-01 13:33:44,210 - DEBUG - integration_test - Step 85: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:44,210 - INFO - integration_test - === Applying control at step 85 ===
2025-12-01 13:33:44,210 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199953374, 'w': 0.02637426394681615}
2025-12-01 13:33:44,210 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:44,210 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:44,211 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:44,211 - INFO - integration_test - Step 85 completed in 0.790s
2025-12-01 13:33:44,237 - INFO - integration_test - Step 86 (contouring until path end)
2025-12-01 13:33:44,238 - DEBUG - integration_test - Syncing planner state at step 86: vehicle_state=[22.00497814  6.05411884  0.59667197  2.3999995  24.08605389]
2025-12-01 13:33:44,239 - INFO - integration_test - Step 86: Re-initialized spline from 24.0861 to 23.6261 (vehicle at (22.00, 6.05), closest path point at (22.06, 5.53), distance=0.530m)
2025-12-01 13:33:44,239 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 13:33:44,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:44,239 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:44,254 - DEBUG - integration_test - Step 86: Checking path alignment: vehicle=(22.005, 6.054), path_start=(0.000, 0.000), dist=22.823m
2025-12-01 13:33:44,254 - WARNING - integration_test - Could not update reference path at step 86: x and y must have the same length
2025-12-01 13:33:44,254 - INFO - integration_test - === Calling planner.solve_mpc() at step 86 ===
2025-12-01 13:33:44,257 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:44,258 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:44,258 - INFO - integration_test - Warmstart k=0: x0=22.00497814235822 , y0=6.054118838976537 , psi0=0.5966719716970295 , v0=2.3999995049142937 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 13:33:44,258 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:44,259 - INFO - integration_test - Dyn residual k=0: pred=[22.203508546275316, 6.188973037859638, 0.5966719716970295, 2.3999995049142937, 23.866053934959837], ws=[22.203508546275316, 6.188973037859638, 0.5966719716970292, 2.3999995049142937, 29.392266468147284], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.526212533187447], res_norm=5.526e+00
2025-12-01 13:33:44,260 - INFO - integration_test - Dyn residual k=1: pred=[22.402038950192413, 6.323827236742739, 0.5966719716970292, 2.3999995049142937, 29.632266418638714], ws=[22.402038950192413, 6.323827236742739, 0.5966719716970292, 2.3999995049142937, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.05175012594979478], res_norm=5.175e-02
2025-12-01 13:33:44,261 - INFO - integration_test - Dyn residual k=2: pred=[22.60056935410951, 6.45868143562584, 0.5966719716970292, 2.3999995049142937, 29.92401649507994], ws=[22.60056935410951, 6.45868143562584, 0.5966719716970292, 2.3999995049142937, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.23999995049143052], res_norm=2.400e-01
2025-12-01 13:33:44,276 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,288 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,305 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,317 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,334 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,346 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,362 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,374 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,391 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,403 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,419 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,431 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,447 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,459 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,487 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,516 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,532 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,544 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,560 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,570 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:44,879 - INFO - integration_test - Step 86: MPC solve successful
2025-12-01 13:33:44,887 - INFO - integration_test - Step 86: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 13:33:44,887 - DEBUG - integration_test - Step 86: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:44,887 - INFO - integration_test - === Applying control at step 86 ===
2025-12-01 13:33:44,887 - INFO - integration_test -   Control dict from planner: {'a': 2.000000010678961, 'w': -0.22029707033687077}
2025-12-01 13:33:44,887 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:44,887 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:44,888 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:44,889 - INFO - integration_test - Step 86 completed in 0.651s
2025-12-01 13:33:44,911 - INFO - integration_test - Step 87 (contouring until path end)
2025-12-01 13:33:44,912 - DEBUG - integration_test - Syncing planner state at step 87: vehicle_state=[22.21333144  6.1922722   0.57464226  2.59999951 23.88605394]
2025-12-01 13:33:44,912 - INFO - integration_test - Step 87: Re-initialized spline from 23.8861 to 23.6261 (vehicle at (22.21, 6.19), closest path point at (22.06, 5.53), distance=0.684m)
2025-12-01 13:33:44,912 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 13:33:44,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:44,913 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:44,927 - DEBUG - integration_test - Step 87: Checking path alignment: vehicle=(22.213, 6.192), path_start=(0.000, 0.000), dist=23.060m
2025-12-01 13:33:44,928 - WARNING - integration_test - Could not update reference path at step 87: x and y must have the same length
2025-12-01 13:33:44,928 - INFO - integration_test - === Calling planner.solve_mpc() at step 87 ===
2025-12-01 13:33:44,931 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:44,932 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:44,932 - INFO - integration_test - Warmstart k=0: x0=22.21333144413197 , y0=6.1922721982072595 , psi0=0.5746422646633423 , v0=2.59999950598219 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 13:33:44,932 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:44,933 - INFO - integration_test - Dyn residual k=0: pred=[22.431571970051376, 6.333591153614869, 0.5746422646633423, 2.59999950598219, 23.886053935066624], ws=[22.431571970051376, 6.333591153614869, 0.5746422646633422, 2.59999950598219, 29.41226646825407], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.526212533187447], res_norm=5.526e+00
2025-12-01 13:33:44,934 - INFO - integration_test - Dyn residual k=1: pred=[22.64981249597078, 6.474910109022478, 0.5746422646633422, 2.59999950598219, 29.67226641885229], ws=[22.64981249597078, 6.474910109022478, 0.5746422646633422, 2.59999950598219, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.011750125736220696], res_norm=1.175e-02
2025-12-01 13:33:44,935 - INFO - integration_test - Dyn residual k=2: pred=[22.868053021890187, 6.616229064430087, 0.5746422646633422, 2.59999950598219, 29.944016495186727], ws=[22.868053021890187, 6.616229064430087, 0.5746422646633422, 2.59999950598219, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.25999995059821757], res_norm=2.600e-01
2025-12-01 13:33:44,950 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,963 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:44,979 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:44,991 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,008 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,020 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,036 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,048 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,064 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,076 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,092 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,105 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,121 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,133 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,149 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,161 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,177 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,190 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,206 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,218 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,233 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,244 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:45,569 - INFO - integration_test - Step 87: MPC solve successful
2025-12-01 13:33:45,577 - INFO - integration_test - Step 87: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 13:33:45,578 - DEBUG - integration_test - Step 87: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:45,578 - INFO - integration_test - === Applying control at step 87 ===
2025-12-01 13:33:45,578 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000183338065, 'w': -0.7999997130476467}
2025-12-01 13:33:45,578 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:45,578 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:45,579 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:45,579 - INFO - integration_test - Step 87 completed in 0.668s
2025-12-01 13:33:45,603 - INFO - integration_test - Step 88 (contouring until path end)
2025-12-01 13:33:45,605 - DEBUG - integration_test - Syncing planner state at step 88: vehicle_state=[22.44565914  6.32969478  0.49464229  2.79999951 23.90605394]
2025-12-01 13:33:45,605 - INFO - integration_test - Step 88: Re-initialized spline from 23.9061 to 24.2319 (vehicle at (22.45, 6.33), closest path point at (22.90, 6.00), distance=0.559m)
2025-12-01 13:33:45,605 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 13:33:45,606 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:45,606 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:45,620 - DEBUG - integration_test - Step 88: Checking path alignment: vehicle=(22.446, 6.330), path_start=(0.000, 0.000), dist=23.321m
2025-12-01 13:33:45,620 - WARNING - integration_test - Could not update reference path at step 88: x and y must have the same length
2025-12-01 13:33:45,620 - INFO - integration_test - === Calling planner.solve_mpc() at step 88 ===
2025-12-01 13:33:45,623 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:45,625 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:45,625 - INFO - integration_test - Warmstart k=0: x0=22.445659135049187 , y0=6.329694778529119 , psi0=0.4946422933585777 , v0=2.7999995078155706 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 13:33:45,625 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:45,626 - INFO - integration_test - Dyn residual k=0: pred=[22.692097892873313, 6.46261547323004, 0.4946422933585777, 2.7999995078155706, 24.511850191261974], ws=[22.692097892873313, 6.46261547323004, 0.4946422933585777, 2.7999995078155706, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -5.172166353326535], res_norm=5.172e+00
2025-12-01 13:33:45,626 - INFO - integration_test - Dyn residual k=1: pred=[22.93853665069744, 6.59553616793096, 0.4946422933585777, 2.7999995078155706, 29.964016495370068], ws=[22.93853665069744, 6.59553616793096, 0.4946422933585777, 2.7999995078155706, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2799999507815585], res_norm=2.800e-01
2025-12-01 13:33:45,627 - INFO - integration_test - Dyn residual k=2: pred=[23.184975408521566, 6.72845686263188, 0.4946422933585777, 2.7999995078155706, 29.964016495370068], ws=[23.184975408521566, 6.72845686263188, 0.4946422933585777, 2.7999995078155706, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2799999507815585], res_norm=2.800e-01
2025-12-01 13:33:45,642 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,654 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,671 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,684 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,700 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,712 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,728 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,740 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,756 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,768 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,784 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,796 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,812 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,824 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,840 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,852 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,867 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,880 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,896 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,908 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:45,924 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:45,935 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:46,751 - INFO - integration_test - Step 88: MPC solve successful
2025-12-01 13:33:46,759 - INFO - integration_test - Step 88: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 13:33:46,760 - DEBUG - integration_test - Step 88: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:46,760 - INFO - integration_test - === Applying control at step 88 ===
2025-12-01 13:33:46,760 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199056203, 'w': 0.8000000075531314}
2025-12-01 13:33:46,760 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:46,760 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:46,761 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:46,761 - INFO - integration_test - Step 88 completed in 1.157s
2025-12-01 13:33:46,785 - INFO - integration_test - Step 89 (contouring until path end)
2025-12-01 13:33:46,786 - DEBUG - integration_test - Syncing planner state at step 89: vehicle_state=[22.69505542  6.4775347   0.57464229  2.99999951 24.53185019]
2025-12-01 13:33:46,787 - INFO - integration_test - Step 89: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (22.70, 6.48), closest path point at (22.90, 6.00), distance=0.519m)
2025-12-01 13:33:46,787 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 13:33:46,787 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:46,787 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:46,801 - DEBUG - integration_test - Step 89: Checking path alignment: vehicle=(22.695, 6.478), path_start=(0.000, 0.000), dist=23.601m
2025-12-01 13:33:46,801 - WARNING - integration_test - Could not update reference path at step 89: x and y must have the same length
2025-12-01 13:33:46,802 - INFO - integration_test - === Calling planner.solve_mpc() at step 89 ===
2025-12-01 13:33:46,804 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:46,805 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:46,805 - INFO - integration_test - Warmstart k=0: x0=22.695055415263827 , y0=6.477534703226126 , psi0=0.5746422941138908 , v0=2.9999995098061327 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 13:33:46,805 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:46,806 - INFO - integration_test - Dyn residual k=0: pred=[22.946871408607624, 6.640595048143727, 0.5746422941138908, 2.9999995098061327, 24.53185019146103], ws=[22.946871408607624, 6.640595048143727, 0.5746422941138909, 2.9999995098061327, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.15216635312748], res_norm=5.152e+00
2025-12-01 13:33:46,807 - INFO - integration_test - Dyn residual k=1: pred=[23.19868740195142, 6.8036553930613275, 0.5746422941138909, 2.9999995098061327, 29.984016495569122], ws=[23.19868740195142, 6.8036553930613275, 0.5746422941138909, 2.9999995098061327, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999995098061305], res_norm=3.000e-01
2025-12-01 13:33:46,808 - INFO - integration_test - Dyn residual k=2: pred=[23.450503395295218, 6.966715737978928, 0.5746422941138909, 2.9999995098061327, 29.984016495569122], ws=[23.450503395295218, 6.966715737978928, 0.5746422941138909, 2.9999995098061327, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999995098061305], res_norm=3.000e-01
2025-12-01 13:33:46,823 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:46,838 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:46,857 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:46,870 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:46,889 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:46,903 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:46,921 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:46,935 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:46,952 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:46,966 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:46,982 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:46,995 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,012 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,025 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,041 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,053 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,069 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,082 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,098 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,110 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,127 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,138 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:47,497 - INFO - integration_test - Step 89: MPC solve successful
2025-12-01 13:33:47,505 - INFO - integration_test - Step 89: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 13:33:47,505 - DEBUG - integration_test - Step 89: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:47,505 - INFO - integration_test - === Applying control at step 89 ===
2025-12-01 13:33:47,505 - INFO - integration_test -   Control dict from planner: {'a': 5.1985902105490065e-06, 'w': 0.7171845712829635}
2025-12-01 13:33:47,505 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:47,505 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:47,506 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:47,506 - INFO - integration_test - Step 89 completed in 0.721s
2025-12-01 13:33:47,529 - INFO - integration_test - Step 90 (contouring until path end)
2025-12-01 13:33:47,531 - DEBUG - integration_test - Syncing planner state at step 90: vehicle_state=[22.9408109   6.64948137  0.64636075  3.00000003 24.53185024]
2025-12-01 13:33:47,531 - INFO - integration_test - Step 90: Re-initialized spline from 24.5319 to 24.8376 (vehicle at (22.94, 6.65), closest path point at (23.38, 6.30), distance=0.561m)
2025-12-01 13:33:47,531 - DEBUG - integration_test -   Set spline state to 24.8376
2025-12-01 13:33:47,532 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:47,532 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:47,545 - DEBUG - integration_test - Step 90: Checking path alignment: vehicle=(22.941, 6.649), path_start=(0.000, 0.000), dist=23.885m
2025-12-01 13:33:47,546 - WARNING - integration_test - Could not update reference path at step 90: x and y must have the same length
2025-12-01 13:33:47,546 - INFO - integration_test - === Calling planner.solve_mpc() at step 90 ===
2025-12-01 13:33:47,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:47,549 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:47,550 - INFO - integration_test - Warmstart k=0: x0=22.94081090434774 , y0=6.649481373776677 , psi0=0.6463607512421872 , v0=3.0 , spline0=24.837646496492425 , a0=0.0 , w0=0.0
2025-12-01 13:33:47,550 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:47,550 - INFO - integration_test - Dyn residual k=0: pred=[23.18029518810256, 6.830166951049576, 0.6463607512421872, 3.0, 25.137646496492426], ws=[23.18029518810256, 6.830166951049576, 0.6463607512421872, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.546370048096083], res_norm=4.546e+00
2025-12-01 13:33:47,551 - INFO - integration_test - Dyn residual k=1: pred=[23.419779471857378, 7.010852528322475, 0.6463607512421872, 3.0, 29.98401654458851], ws=[23.419779471857378, 7.010852528322475, 0.6463607512421872, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:47,552 - INFO - integration_test - Dyn residual k=2: pred=[23.659263755612198, 7.191538105595375, 0.6463607512421872, 3.0, 29.98401654458851], ws=[23.659263755612198, 7.191538105595375, 0.6463607512421872, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:47,567 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,579 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,595 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,608 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,625 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,637 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,652 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,664 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,680 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,692 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,709 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,721 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,737 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,749 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,765 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,777 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,793 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,805 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,821 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,833 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:47,849 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:47,859 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:48,241 - INFO - integration_test - Step 90: MPC solve successful
2025-12-01 13:33:48,250 - INFO - integration_test - Step 90: Computed 10 numeric contouring constraints for visualization (s=24.838)
2025-12-01 13:33:48,250 - DEBUG - integration_test - Step 90: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:48,250 - INFO - integration_test - === Applying control at step 90 ===
2025-12-01 13:33:48,250 - INFO - integration_test -   Control dict from planner: {'a': 2.228449724941071e-09, 'w': -0.2014624656237147}
2025-12-01 13:33:48,250 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:48,250 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:48,251 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:48,252 - INFO - integration_test - Step 90 completed in 0.721s
2025-12-01 13:33:48,275 - INFO - integration_test - Step 91 (contouring until path end)
2025-12-01 13:33:48,276 - DEBUG - integration_test - Syncing planner state at step 91: vehicle_state=[23.182099    6.82774246  0.6262145   3.00000003 25.1376465 ]
2025-12-01 13:33:48,276 - INFO - integration_test - Step 91: Re-initialized spline from 25.1376 to 24.8376 (vehicle at (23.18, 6.83), closest path point at (23.38, 6.30), distance=0.562m)
2025-12-01 13:33:48,276 - DEBUG - integration_test -   Set spline state to 24.8376
2025-12-01 13:33:48,277 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:48,277 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:48,292 - DEBUG - integration_test - Step 91: Checking path alignment: vehicle=(23.182, 6.828), path_start=(0.000, 0.000), dist=24.167m
2025-12-01 13:33:48,292 - WARNING - integration_test - Could not update reference path at step 91: x and y must have the same length
2025-12-01 13:33:48,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 91 ===
2025-12-01 13:33:48,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:48,297 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:48,297 - INFO - integration_test - Warmstart k=0: x0=23.182098997412147 , y0=6.827742457440425 , psi0=0.6262145046798157 , v0=3.0 , spline0=24.837646496492425 , a0=0.0 , w0=0.0
2025-12-01 13:33:48,297 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:48,298 - INFO - integration_test - Dyn residual k=0: pred=[23.425174572875083, 7.003566985346411, 0.6262145046798157, 3.0, 25.137646496492426], ws=[23.425174572875083, 7.003566985346411, 0.6262145046798158, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.546370048096083], res_norm=4.546e+00
2025-12-01 13:33:48,299 - INFO - integration_test - Dyn residual k=1: pred=[23.668250148338018, 7.179391513252397, 0.6262145046798158, 3.0, 29.98401654458851], ws=[23.668250148338018, 7.179391513252397, 0.6262145046798158, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:48,300 - INFO - integration_test - Dyn residual k=2: pred=[23.911325723800953, 7.355216041158383, 0.6262145046798158, 3.0, 29.98401654458851], ws=[23.911325723800953, 7.355216041158383, 0.6262145046798158, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:48,316 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,329 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,346 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,358 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,374 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,387 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,404 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,417 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,434 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,447 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,463 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,475 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,491 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,503 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,519 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,531 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,547 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,559 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,574 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,586 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:48,602 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:48,613 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:48,999 - INFO - integration_test - Step 91: MPC solve successful
2025-12-01 13:33:49,007 - INFO - integration_test - Step 91: Computed 10 numeric contouring constraints for visualization (s=24.838)
2025-12-01 13:33:49,007 - DEBUG - integration_test - Step 91: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:49,007 - INFO - integration_test - === Applying control at step 91 ===
2025-12-01 13:33:49,007 - INFO - integration_test -   Control dict from planner: {'a': 1.1174034766691313e-09, 'w': 0.0466749081393263}
2025-12-01 13:33:49,007 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:49,007 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:49,008 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:49,009 - INFO - integration_test - Step 91 completed in 0.733s
2025-12-01 13:33:49,030 - INFO - integration_test - Step 92 (contouring until path end)
2025-12-01 13:33:49,033 - DEBUG - integration_test - Syncing planner state at step 92: vehicle_state=[23.42476336  7.00413362  0.630882    3.00000003 25.1376465 ]
2025-12-01 13:33:49,033 - INFO - integration_test - Step 92: Re-initialized spline from 25.1376 to 25.4434 (vehicle at (23.42, 7.00), closest path point at (23.85, 6.62), distance=0.580m)
2025-12-01 13:33:49,033 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 13:33:49,034 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:49,034 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:49,047 - DEBUG - integration_test - Step 92: Checking path alignment: vehicle=(23.425, 7.004), path_start=(0.000, 0.000), dist=24.449m
2025-12-01 13:33:49,047 - WARNING - integration_test - Could not update reference path at step 92: x and y must have the same length
2025-12-01 13:33:49,047 - INFO - integration_test - === Calling planner.solve_mpc() at step 92 ===
2025-12-01 13:33:49,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:49,051 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:49,051 - INFO - integration_test - Warmstart k=0: x0=23.424763363772723 , y0=7.004133624182323 , psi0=0.6308819954937482 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 13:33:49,052 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:49,052 - INFO - integration_test - Dyn residual k=0: pred=[23.66701563509345, 7.181090785777861, 0.6308819954937482, 3.0, 25.743442752504436], ws=[23.66701563509345, 7.181090785777861, 0.6308819954937483, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 13:33:49,053 - INFO - integration_test - Dyn residual k=1: pred=[23.909267906414176, 7.358047947373398, 0.6308819954937483, 3.0, 29.98401654458851], ws=[23.909267906414176, 7.358047947373398, 0.6308819954937483, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:49,054 - INFO - integration_test - Dyn residual k=2: pred=[24.151520177734902, 7.535005108968936, 0.6308819954937483, 3.0, 29.98401654458851], ws=[24.151520177734902, 7.535005108968936, 0.6308819954937483, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:49,068 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,081 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,097 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,110 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,139 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,154 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,167 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,183 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,199 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,215 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,227 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,242 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,255 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,270 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,283 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,299 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,312 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,328 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,340 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,356 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,367 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:49,721 - INFO - integration_test - Step 92: MPC solve successful
2025-12-01 13:33:49,728 - INFO - integration_test - Step 92: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 13:33:49,729 - DEBUG - integration_test - Step 92: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:49,729 - INFO - integration_test - === Applying control at step 92 ===
2025-12-01 13:33:49,729 - INFO - integration_test -   Control dict from planner: {'a': 6.835870827570979e-13, 'w': -0.007143253407366052}
2025-12-01 13:33:49,729 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:49,729 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:49,730 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:49,730 - INFO - integration_test - Step 92 completed in 0.698s
2025-12-01 13:33:49,753 - INFO - integration_test - Step 93 (contouring until path end)
2025-12-01 13:33:49,754 - DEBUG - integration_test - Syncing planner state at step 93: vehicle_state=[23.66707882  7.18100425  0.63016767  3.00000003 25.74344276]
2025-12-01 13:33:49,754 - INFO - integration_test - Step 93: Re-initialized spline from 25.7434 to 25.4434 (vehicle at (23.67, 7.18), closest path point at (23.85, 6.62), distance=0.596m)
2025-12-01 13:33:49,754 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 13:33:49,755 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:49,755 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:49,769 - DEBUG - integration_test - Step 93: Checking path alignment: vehicle=(23.667, 7.181), path_start=(0.000, 0.000), dist=24.733m
2025-12-01 13:33:49,769 - WARNING - integration_test - Could not update reference path at step 93: x and y must have the same length
2025-12-01 13:33:49,769 - INFO - integration_test - === Calling planner.solve_mpc() at step 93 ===
2025-12-01 13:33:49,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:49,773 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:49,773 - INFO - integration_test - Warmstart k=0: x0=23.667078819404306 , y0=7.181004249033058 , psi0=0.6301676701530117 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 13:33:49,774 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:49,774 - INFO - integration_test - Dyn residual k=0: pred=[23.90945743389313, 7.357788318559916, 0.6301676701530117, 3.0, 25.743442752504436], ws=[23.90945743389313, 7.357788318559916, 0.6301676701530114, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 13:33:49,775 - INFO - integration_test - Dyn residual k=1: pred=[24.151836048381956, 7.534572388086775, 0.6301676701530114, 3.0, 29.98401654458851], ws=[24.151836048381956, 7.534572388086775, 0.6301676701530114, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:49,776 - INFO - integration_test - Dyn residual k=2: pred=[24.39421466287078, 7.7113564576136335, 0.6301676701530114, 3.0, 29.98401654458851], ws=[24.39421466287078, 7.7113564576136335, 0.6301676701530114, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:49,791 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,804 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,820 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,832 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,861 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,877 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,889 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,905 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,918 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,934 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,946 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,962 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:49,974 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:49,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,003 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,020 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,032 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,048 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,060 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,076 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,087 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:50,537 - INFO - integration_test - Step 93: MPC solve successful
2025-12-01 13:33:50,544 - INFO - integration_test - Step 93: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 13:33:50,544 - DEBUG - integration_test - Step 93: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:50,544 - INFO - integration_test - === Applying control at step 93 ===
2025-12-01 13:33:50,545 - INFO - integration_test -   Control dict from planner: {'a': -3.0003122075294084e-13, 'w': 0.00012317025101981965}
2025-12-01 13:33:50,545 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:50,545 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:50,545 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:50,546 - INFO - integration_test - Step 93 completed in 0.792s
2025-12-01 13:33:50,567 - INFO - integration_test - Step 94 (contouring until path end)
2025-12-01 13:33:50,570 - DEBUG - integration_test - Syncing planner state at step 94: vehicle_state=[23.90945635  7.35778981  0.63017999  3.00000003 25.74344276]
2025-12-01 13:33:50,570 - INFO - integration_test - Step 94: Re-initialized spline from 25.7434 to 26.0492 (vehicle at (23.91, 7.36), closest path point at (24.32, 6.94), distance=0.586m)
2025-12-01 13:33:50,570 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 13:33:50,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:50,571 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:50,585 - DEBUG - integration_test - Step 94: Checking path alignment: vehicle=(23.909, 7.358), path_start=(0.000, 0.000), dist=25.016m
2025-12-01 13:33:50,585 - WARNING - integration_test - Could not update reference path at step 94: x and y must have the same length
2025-12-01 13:33:50,585 - INFO - integration_test - === Calling planner.solve_mpc() at step 94 ===
2025-12-01 13:33:50,589 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:50,590 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:50,590 - INFO - integration_test - Warmstart k=0: x0=23.909456347583852 , y0=7.357789813015029 , psi0=0.6301799871781136 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 13:33:50,590 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:50,591 - INFO - integration_test - Dyn residual k=0: pred=[24.15183278460047, 7.534576867911956, 0.6301799871781136, 3.0, 26.349239008516445], ws=[24.15183278460047, 7.534576867911957, 0.6301799871781135, 3.0, 29.68401654458851], res=[0.0, -8.881784197001252e-16, 1.1102230246251565e-16, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 13:33:50,592 - INFO - integration_test - Dyn residual k=1: pred=[24.394209221617086, 7.711363922808884, 0.6301799871781135, 3.0, 29.98401654458851], ws=[24.394209221617086, 7.711363922808884, 0.6301799871781135, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:50,593 - INFO - integration_test - Dyn residual k=2: pred=[24.636585658633702, 7.888150977705811, 0.6301799871781135, 3.0, 29.98401654458851], ws=[24.636585658633702, 7.888150977705811, 0.6301799871781135, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:50,608 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,620 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,636 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,648 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,664 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,677 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,693 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,706 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,722 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,734 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,749 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,762 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,778 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,790 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,806 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,818 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,834 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,846 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,862 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,875 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:50,891 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:50,902 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:51,314 - INFO - integration_test - Step 94: MPC solve successful
2025-12-01 13:33:51,321 - INFO - integration_test - Step 94: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 13:33:51,322 - DEBUG - integration_test - Step 94: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:51,322 - INFO - integration_test - === Applying control at step 94 ===
2025-12-01 13:33:51,322 - INFO - integration_test -   Control dict from planner: {'a': -7.770127482027939e-13, 'w': -0.0007318776678330871}
2025-12-01 13:33:51,322 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:51,322 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:51,323 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:51,323 - INFO - integration_test - Step 94 completed in 0.754s
2025-12-01 13:33:51,347 - INFO - integration_test - Step 95 (contouring until path end)
2025-12-01 13:33:51,348 - DEBUG - integration_test - Syncing planner state at step 95: vehicle_state=[24.15183926  7.534568    0.6301068   3.00000003 26.34923901]
2025-12-01 13:33:51,348 - INFO - integration_test - Step 95: Re-initialized spline from 26.3492 to 26.0492 (vehicle at (24.15, 7.53), closest path point at (24.32, 6.94), distance=0.620m)
2025-12-01 13:33:51,348 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 13:33:51,349 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:51,349 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:51,363 - DEBUG - integration_test - Step 95: Checking path alignment: vehicle=(24.152, 7.535), path_start=(0.000, 0.000), dist=25.300m
2025-12-01 13:33:51,364 - WARNING - integration_test - Could not update reference path at step 95: x and y must have the same length
2025-12-01 13:33:51,364 - INFO - integration_test - === Calling planner.solve_mpc() at step 95 ===
2025-12-01 13:33:51,366 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:51,368 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:51,368 - INFO - integration_test - Warmstart k=0: x0=24.151839256132767 , y0=7.5345680000268285 , psi0=0.6301067994113303 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 13:33:51,368 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:51,369 - INFO - integration_test - Dyn residual k=0: pred=[24.39422863114998, 7.71133731546015, 0.6301067994113303, 3.0, 26.349239008516445], ws=[24.39422863114998, 7.71133731546015, 0.6301067994113305, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 13:33:51,369 - INFO - integration_test - Dyn residual k=1: pred=[24.63661800616719, 7.888106630893471, 0.6301067994113305, 3.0, 29.98401654458851], ws=[24.63661800616719, 7.888106630893471, 0.6301067994113305, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:51,370 - INFO - integration_test - Dyn residual k=2: pred=[24.8790073811844, 8.064875946326794, 0.6301067994113305, 3.0, 29.98401654458851], ws=[24.8790073811844, 8.064875946326794, 0.6301067994113305, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:51,385 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,398 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,414 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,426 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,442 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,454 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,470 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,483 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,499 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,511 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,527 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,539 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,555 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,567 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,583 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,595 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,611 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,623 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,639 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,651 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:51,666 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:51,678 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:52,912 - INFO - integration_test - Step 95: MPC solve successful
2025-12-01 13:33:52,920 - INFO - integration_test - Step 95: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 13:33:52,920 - DEBUG - integration_test - Step 95: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:52,920 - INFO - integration_test - === Applying control at step 95 ===
2025-12-01 13:33:52,920 - INFO - integration_test -   Control dict from planner: {'a': -9.717904410031334e-13, 'w': -0.0018114420406462838}
2025-12-01 13:33:52,920 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:52,920 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:52,921 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:52,921 - INFO - integration_test - Step 95 completed in 1.574s
2025-12-01 13:33:52,946 - INFO - integration_test - Step 96 (contouring until path end)
2025-12-01 13:33:52,947 - DEBUG - integration_test - Syncing planner state at step 96: vehicle_state=[24.39424464  7.71131536  0.62992566  3.00000003 26.34923901]
2025-12-01 13:33:52,948 - INFO - integration_test - Step 96: Re-initialized spline from 26.3492 to 26.6550 (vehicle at (24.39, 7.71), closest path point at (24.77, 7.27), distance=0.584m)
2025-12-01 13:33:52,948 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 13:33:52,948 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:52,948 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:52,962 - DEBUG - integration_test - Step 96: Checking path alignment: vehicle=(24.394, 7.711), path_start=(0.000, 0.000), dist=25.584m
2025-12-01 13:33:52,962 - WARNING - integration_test - Could not update reference path at step 96: x and y must have the same length
2025-12-01 13:33:52,962 - INFO - integration_test - === Calling planner.solve_mpc() at step 96 ===
2025-12-01 13:33:52,965 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:52,966 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:52,966 - INFO - integration_test - Warmstart k=0: x0=24.39424464261684 , y0=7.711315362545729 , psi0=0.6299256552072656 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 13:33:52,966 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:52,967 - INFO - integration_test - Dyn residual k=0: pred=[24.636666034394036, 7.888040767648694, 0.6299256552072656, 3.0, 26.95503526452846], ws=[24.636666034394036, 7.888040767648694, 0.6299256552072654, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 13:33:52,968 - INFO - integration_test - Dyn residual k=1: pred=[24.879087426171232, 8.064766172751659, 0.6299256552072654, 3.0, 29.98401654458851], ws=[24.879087426171232, 8.064766172751659, 0.6299256552072654, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:52,968 - INFO - integration_test - Dyn residual k=2: pred=[25.121508817948428, 8.241491577854624, 0.6299256552072654, 3.0, 29.98401654458851], ws=[25.121508817948428, 8.241491577854624, 0.6299256552072654, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:52,983 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:52,997 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,014 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,027 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,045 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,058 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,076 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,089 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,106 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,119 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,135 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,147 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,163 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,175 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,191 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,203 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,219 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,231 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,259 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,275 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,286 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:53,882 - INFO - integration_test - Step 96: MPC solve successful
2025-12-01 13:33:53,890 - INFO - integration_test - Step 96: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 13:33:53,890 - DEBUG - integration_test - Step 96: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:53,890 - INFO - integration_test - === Applying control at step 96 ===
2025-12-01 13:33:53,890 - INFO - integration_test -   Control dict from planner: {'a': -6.262699507432398e-06, 'w': -0.00404588084315318}
2025-12-01 13:33:53,891 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:53,891 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:53,892 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:53,892 - INFO - integration_test - Step 96 completed in 0.945s
2025-12-01 13:33:53,918 - INFO - integration_test - Step 97 (contouring until path end)
2025-12-01 13:33:53,919 - DEBUG - integration_test - Syncing planner state at step 97: vehicle_state=[24.63670176  7.88799171  0.62952107  2.9999994  26.9550352 ]
2025-12-01 13:33:53,920 - INFO - integration_test - Step 97: Re-initialized spline from 26.9550 to 26.6550 (vehicle at (24.64, 7.89), closest path point at (24.77, 7.27), distance=0.635m)
2025-12-01 13:33:53,920 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 13:33:53,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:53,920 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:53,934 - DEBUG - integration_test - Step 97: Checking path alignment: vehicle=(24.637, 7.888), path_start=(0.000, 0.000), dist=25.869m
2025-12-01 13:33:53,935 - WARNING - integration_test - Could not update reference path at step 97: x and y must have the same length
2025-12-01 13:33:53,935 - INFO - integration_test - === Calling planner.solve_mpc() at step 97 ===
2025-12-01 13:33:53,937 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:53,939 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:53,939 - INFO - integration_test - Warmstart k=0: x0=24.636701755392405 , y0=7.887991705751971 , psi0=0.6295210671229503 , v0=2.999999403729652 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 13:33:53,939 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:53,940 - INFO - integration_test - Dyn residual k=0: pred=[24.879194580122487, 8.064618980481015, 0.6295210671229503, 2.999999403729652, 26.955035204901424], ws=[24.879194580122487, 8.064618980481015, 0.6295210671229503, 2.999999403729652, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.728981339687085], res_norm=2.729e+00
2025-12-01 13:33:53,940 - INFO - integration_test - Dyn residual k=1: pred=[25.12168740485257, 8.24124625521006, 0.6295210671229503, 2.999999403729652, 29.984016484961476], ws=[25.12168740485257, 8.24124625521006, 0.6295210671229503, 2.999999403729652, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999994037296673], res_norm=3.000e-01
2025-12-01 13:33:53,941 - INFO - integration_test - Dyn residual k=2: pred=[25.36418022958265, 8.417873529939104, 0.6295210671229503, 2.999999403729652, 29.984016484961476], ws=[25.36418022958265, 8.417873529939104, 0.6295210671229503, 2.999999403729652, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.29999994037296673], res_norm=3.000e-01
2025-12-01 13:33:53,956 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,969 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:53,985 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:53,998 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,014 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,027 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,043 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,055 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,070 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,082 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,098 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,110 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,126 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,139 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,156 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,169 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,187 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,202 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,220 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,233 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,250 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,262 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:54,688 - INFO - integration_test - Step 97: MPC solve successful
2025-12-01 13:33:54,696 - INFO - integration_test - Step 97: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 13:33:54,696 - DEBUG - integration_test - Step 97: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:54,696 - INFO - integration_test - === Applying control at step 97 ===
2025-12-01 13:33:54,696 - INFO - integration_test -   Control dict from planner: {'a': 6.262702237397742e-06, 'w': 0.014829129380711566}
2025-12-01 13:33:54,696 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:54,696 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:54,698 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:54,698 - INFO - integration_test - Step 97 completed in 0.779s
2025-12-01 13:33:54,724 - INFO - integration_test - Step 98 (contouring until path end)
2025-12-01 13:33:54,725 - DEBUG - integration_test - Syncing planner state at step 98: vehicle_state=[24.87906356  8.06479873  0.63100398  3.00000003 26.95503527]
2025-12-01 13:33:54,725 - INFO - integration_test - Step 98: Re-initialized spline from 26.9550 to 27.2608 (vehicle at (24.88, 8.06), closest path point at (25.23, 7.61), distance=0.575m)
2025-12-01 13:33:54,725 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 13:33:54,726 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:54,726 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:54,740 - DEBUG - integration_test - Step 98: Checking path alignment: vehicle=(24.879, 8.065), path_start=(0.000, 0.000), dist=26.154m
2025-12-01 13:33:54,741 - WARNING - integration_test - Could not update reference path at step 98: x and y must have the same length
2025-12-01 13:33:54,741 - INFO - integration_test - === Calling planner.solve_mpc() at step 98 ===
2025-12-01 13:33:54,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:54,745 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:54,745 - INFO - integration_test - Warmstart k=0: x0=24.879063555128944 , y0=8.064798732047946 , psi0=0.6310039800610214 , v0=3.0 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 13:33:54,745 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:54,747 - INFO - integration_test - Dyn residual k=0: pred=[25.121294238604555, 8.241785443365316, 0.6310039800610214, 3.0, 27.560831520540468], ws=[25.121294238604555, 8.241785443365316, 0.6310039800610214, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.123185024048041], res_norm=2.123e+00
2025-12-01 13:33:54,747 - INFO - integration_test - Dyn residual k=1: pred=[25.363524922080167, 8.418772154682687, 0.6310039800610214, 3.0, 29.98401654458851], ws=[25.363524922080167, 8.418772154682687, 0.6310039800610214, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:54,748 - INFO - integration_test - Dyn residual k=2: pred=[25.60575560555578, 8.595758866000057, 0.6310039800610214, 3.0, 29.98401654458851], ws=[25.60575560555578, 8.595758866000057, 0.6310039800610214, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:54,763 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,776 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,792 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,805 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,821 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,834 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,850 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,862 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,878 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,890 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,906 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,919 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,934 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,947 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,963 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:54,976 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:54,992 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,004 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,020 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,033 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,048 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,059 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:55,661 - INFO - integration_test - Step 98: MPC solve successful
2025-12-01 13:33:55,669 - INFO - integration_test - Step 98: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 13:33:55,670 - DEBUG - integration_test - Step 98: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:55,670 - INFO - integration_test - === Applying control at step 98 ===
2025-12-01 13:33:55,670 - INFO - integration_test -   Control dict from planner: {'a': -8.25356116344979e-13, 'w': -0.008942668414441256}
2025-12-01 13:33:55,670 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:55,670 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:55,671 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:55,671 - INFO - integration_test - Step 98 completed in 0.947s
2025-12-01 13:33:55,695 - INFO - integration_test - Step 99 (contouring until path end)
2025-12-01 13:33:55,696 - DEBUG - integration_test - Syncing planner state at step 99: vehicle_state=[25.12137335  8.24167711  0.63010971  3.00000003 27.56083152]
2025-12-01 13:33:55,697 - INFO - integration_test - Step 99: Re-initialized spline from 27.5608 to 27.8666 (vehicle at (25.12, 8.24), closest path point at (25.67, 7.95), distance=0.624m)
2025-12-01 13:33:55,697 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 13:33:55,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:55,697 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:55,712 - DEBUG - integration_test - Step 99: Checking path alignment: vehicle=(25.121, 8.242), path_start=(0.000, 0.000), dist=26.439m
2025-12-01 13:33:55,712 - WARNING - integration_test - Could not update reference path at step 99: x and y must have the same length
2025-12-01 13:33:55,712 - INFO - integration_test - === Calling planner.solve_mpc() at step 99 ===
2025-12-01 13:33:55,715 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:55,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:55,716 - INFO - integration_test - Warmstart k=0: x0=25.121373345410177 , y0=8.241677112117435 , psi0=0.6301097132195773 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 13:33:55,717 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:55,717 - INFO - integration_test - Dyn residual k=0: pred=[25.363762205354472, 8.418447133826167, 0.6301097132195773, 3.0, 28.166627776552478], ws=[25.363762205354472, 8.418447133826167, 0.6301097132195772, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 13:33:55,718 - INFO - integration_test - Dyn residual k=1: pred=[25.606151065298768, 8.595217155534899, 0.6301097132195772, 3.0, 29.98401654458851], ws=[25.606151065298768, 8.595217155534899, 0.6301097132195772, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:55,719 - INFO - integration_test - Dyn residual k=2: pred=[25.848539925243063, 8.77198717724363, 0.6301097132195772, 3.0, 29.98401654458851], ws=[25.848539925243063, 8.77198717724363, 0.6301097132195772, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:55,734 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,746 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,762 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,775 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,791 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,803 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,820 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,832 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,848 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,861 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,876 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,889 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,905 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,918 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,933 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,946 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,962 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:55,974 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:55,992 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,005 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,035 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:56,398 - INFO - integration_test - Step 99: MPC solve successful
2025-12-01 13:33:56,406 - INFO - integration_test - Step 99: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 13:33:56,407 - DEBUG - integration_test - Step 99: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:56,407 - INFO - integration_test - === Applying control at step 99 ===
2025-12-01 13:33:56,407 - INFO - integration_test -   Control dict from planner: {'a': -6.176438843129615e-13, 'w': -0.0035084486292129777}
2025-12-01 13:33:56,407 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:56,407 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:56,408 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:56,408 - INFO - integration_test - Step 99 completed in 0.712s
2025-12-01 13:33:56,430 - INFO - integration_test - Step 100 (contouring until path end)
2025-12-01 13:33:56,432 - DEBUG - integration_test - Syncing planner state at step 100: vehicle_state=[25.36379321  8.41840461  0.62975887  3.00000003 28.16662778]
2025-12-01 13:33:56,432 - INFO - integration_test - Step 100: Re-initialized spline from 28.1666 to 27.8666 (vehicle at (25.36, 8.42), closest path point at (25.67, 7.95), distance=0.561m)
2025-12-01 13:33:56,432 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 13:33:56,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:56,433 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:56,447 - DEBUG - integration_test - Step 100: Checking path alignment: vehicle=(25.364, 8.418), path_start=(0.000, 0.000), dist=26.724m
2025-12-01 13:33:56,447 - WARNING - integration_test - Could not update reference path at step 100: x and y must have the same length
2025-12-01 13:33:56,447 - INFO - integration_test - === Calling planner.solve_mpc() at step 100 ===
2025-12-01 13:33:56,450 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:56,451 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:56,451 - INFO - integration_test - Warmstart k=0: x0=25.363793212232657 , y0=8.418404611524194 , psi0=0.6297588683566561 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 13:33:56,451 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:56,452 - INFO - integration_test - Dyn residual k=0: pred=[25.606244076111636, 8.59508958146883, 0.6297588683566561, 3.0, 28.166627776552478], ws=[25.606244076111636, 8.59508958146883, 0.6297588683566562, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 13:33:56,453 - INFO - integration_test - Dyn residual k=1: pred=[25.848694939990615, 8.771774551413467, 0.6297588683566562, 3.0, 29.98401654458851], ws=[25.848694939990615, 8.771774551413467, 0.6297588683566562, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:56,454 - INFO - integration_test - Dyn residual k=2: pred=[26.091145803869594, 8.948459521358103, 0.6297588683566562, 3.0, 29.98401654458851], ws=[26.091145803869594, 8.948459521358103, 0.6297588683566562, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:56,469 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,481 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,497 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,510 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,538 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,554 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,566 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,582 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,595 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,622 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,638 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,650 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,666 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,677 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,694 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,706 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,722 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,734 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:56,750 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:56,761 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:57,120 - INFO - integration_test - Step 100: MPC solve successful
2025-12-01 13:33:57,127 - INFO - integration_test - Step 100: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 13:33:57,128 - DEBUG - integration_test - Step 100: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:57,128 - INFO - integration_test - === Applying control at step 100 ===
2025-12-01 13:33:57,128 - INFO - integration_test -   Control dict from planner: {'a': 2.847874955013191e-13, 'w': 0.049618459669897835}
2025-12-01 13:33:57,128 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:57,128 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:57,129 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:57,129 - INFO - integration_test - Step 100 completed in 0.698s
2025-12-01 13:33:57,153 - INFO - integration_test - Step 101 (contouring until path end)
2025-12-01 13:33:57,155 - DEBUG - integration_test - Syncing planner state at step 101: vehicle_state=[25.60580474  8.59569036  0.63472071  3.00000003 28.16662778]
2025-12-01 13:33:57,155 - INFO - integration_test - Step 101: Re-initialized spline from 28.1666 to 28.4724 (vehicle at (25.61, 8.60), closest path point at (26.12, 8.30), distance=0.592m)
2025-12-01 13:33:57,155 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 13:33:57,156 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:57,156 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:57,169 - DEBUG - integration_test - Step 101: Checking path alignment: vehicle=(25.606, 8.596), path_start=(0.000, 0.000), dist=27.010m
2025-12-01 13:33:57,170 - WARNING - integration_test - Could not update reference path at step 101: x and y must have the same length
2025-12-01 13:33:57,170 - INFO - integration_test - === Calling planner.solve_mpc() at step 101 ===
2025-12-01 13:33:57,173 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:57,174 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:57,174 - INFO - integration_test - Warmstart k=0: x0=25.605804742776268 , y0=8.595690358934258 , psi0=0.6347207143236459 , v0=3.0 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 13:33:57,174 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:57,175 - INFO - integration_test - Dyn residual k=0: pred=[25.84737594209325, 8.77357615280368, 0.6347207143236459, 3.0, 28.772424032564487], ws=[25.84737594209325, 8.77357615280368, 0.6347207143236457, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.911592512024022], res_norm=9.116e-01
2025-12-01 13:33:57,176 - INFO - integration_test - Dyn residual k=1: pred=[26.088947141410234, 8.951461946673101, 0.6347207143236457, 3.0, 29.98401654458851], ws=[26.088947141410234, 8.951461946673101, 0.6347207143236457, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:57,176 - INFO - integration_test - Dyn residual k=2: pred=[26.330518340727217, 9.129347740542523, 0.6347207143236457, 3.0, 29.98401654458851], ws=[26.330518340727217, 9.129347740542523, 0.6347207143236457, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:33:57,192 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,205 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,221 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,233 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,249 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,262 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,277 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,290 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,306 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,319 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,335 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,347 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,363 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,375 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,392 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,405 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,421 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,433 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,449 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,461 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:57,477 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:57,489 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:57,925 - INFO - integration_test - Step 101: MPC solve successful
2025-12-01 13:33:57,933 - INFO - integration_test - Step 101: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 13:33:57,933 - DEBUG - integration_test - Step 101: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:57,933 - INFO - integration_test - === Applying control at step 101 ===
2025-12-01 13:33:57,933 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199932493, 'w': -0.8000000083766358}
2025-12-01 13:33:57,933 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:57,933 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:57,934 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:57,935 - INFO - integration_test - Step 101 completed in 0.780s
2025-12-01 13:33:57,957 - INFO - integration_test - Step 102 (contouring until path end)
2025-12-01 13:33:57,959 - DEBUG - integration_test - Syncing planner state at step 102: vehicle_state=[25.84587447  8.75823791  0.55472071  2.80000003 28.75242404]
2025-12-01 13:33:57,959 - INFO - integration_test - Step 102: Re-initialized spline from 28.7524 to 28.4724 (vehicle at (25.85, 8.76), closest path point at (26.12, 8.30), distance=0.535m)
2025-12-01 13:33:57,959 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 13:33:57,960 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:57,960 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 13:33:57,974 - DEBUG - integration_test - Step 102: Checking path alignment: vehicle=(25.846, 8.758), path_start=(0.000, 0.000), dist=27.289m
2025-12-01 13:33:57,974 - WARNING - integration_test - Could not update reference path at step 102: x and y must have the same length
2025-12-01 13:33:57,974 - INFO - integration_test - === Calling planner.solve_mpc() at step 102 ===
2025-12-01 13:33:57,977 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:33:57,979 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:33:57,979 - INFO - integration_test - Warmstart k=0: x0=25.84587446695204 , y0=8.758237907695472 , psi0=0.5547207134859823 , v0=2.8000000280004347 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 13:33:57,979 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:33:57,980 - INFO - integration_test - Dyn residual k=0: pred=[26.083887790410273, 8.905715565069025, 0.5547207134859823, 2.8000000280004347, 28.75242403536453], ws=[26.083887790410273, 8.905715565069025, 0.5547207134859824, 2.8000000280004347, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.9315925092239787], res_norm=9.316e-01
2025-12-01 13:33:57,980 - INFO - integration_test - Dyn residual k=1: pred=[26.321901113868506, 9.053193222442578, 0.5547207134859824, 2.8000000280004347, 29.964016547388553], ws=[26.321901113868506, 9.053193222442578, 0.5547207134859824, 2.8000000280004347, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.280000002800044], res_norm=2.800e-01
2025-12-01 13:33:57,981 - INFO - integration_test - Dyn residual k=2: pred=[26.55991443732674, 9.200670879816132, 0.5547207134859824, 2.8000000280004347, 29.964016547388553], ws=[26.55991443732674, 9.200670879816132, 0.5547207134859824, 2.8000000280004347, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.280000002800044], res_norm=2.800e-01
2025-12-01 13:33:57,996 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,009 - INFO - integration_test - Stage 0: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,025 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,037 - INFO - integration_test - Stage 1: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,053 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,065 - INFO - integration_test - Stage 2: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,080 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,093 - INFO - integration_test - Stage 3: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,110 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,123 - INFO - integration_test - Stage 4: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,140 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,152 - INFO - integration_test - Stage 5: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,167 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,180 - INFO - integration_test - Stage 6: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,197 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,209 - INFO - integration_test - Stage 7: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,225 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,237 - INFO - integration_test - Stage 8: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,253 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,265 - INFO - integration_test - Stage 9: constraints count=3 (linearized=1, contouring=2, other=0)
2025-12-01 13:33:58,281 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:33:58,292 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 13:33:58,633 - INFO - integration_test - Step 102: MPC solve successful
2025-12-01 13:33:58,641 - INFO - integration_test - Step 102: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 13:33:58,641 - DEBUG - integration_test - Step 102: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:33:58,641 - INFO - integration_test - === Applying control at step 102 ===
2025-12-01 13:33:58,641 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000076459625, 'w': -0.7999999507292387}
2025-12-01 13:33:58,641 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:33:58,641 - INFO - integration_test -   Planner output success: True
2025-12-01 13:33:58,642 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:33:58,643 - INFO - integration_test - Goal reached at step 102!
2025-12-01 13:33:58,643 - INFO - integration_test - Step 102 completed in 0.684s
2025-12-01 13:33:58,665 - INFO - integration_test - Goal reached at step 102, added 3 extra frames for visualization
2025-12-01 13:33:58,666 - INFO - integration_test - Saving test results...
2025-12-01 13:33:58,666 - INFO - integration_test - Saved 107 vehicle states to test_outputs/20251201_133217_contouring_contouring_linear_contouring_unicycle/vehicle_states.csv
2025-12-01 13:33:58,666 - INFO - integration_test - Saved obstacle summary to test_outputs/20251201_133217_contouring_contouring_linear_contouring_unicycle/obstacle_summary.csv
2025-12-01 13:33:58,667 - INFO - integration_test - Saved 114 states for obstacle 0 to test_outputs/20251201_133217_contouring_contouring_linear_contouring_unicycle/obstacle_0_detailed_states.csv
2025-12-01 13:33:58,667 - INFO - integration_test - Saved state history: 107 vehicle states, 1 obstacles
2025-12-01 13:33:58,667 - INFO - integration_test - Creating animation...
2025-12-01 13:33:58,683 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 13:33:58,691 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 13:33:58,770 - DEBUG - integration_test - Frame 1: Drawing 10 contouring constraint halfspaces
2025-12-01 13:33:58,835 - DEBUG - integration_test - Frame 2: Drawing 10 contouring constraint halfspaces
2025-12-01 13:34:12,018 - INFO - integration_test - Saved animation with 107 frames at 10.00 fps to test_outputs/20251201_133217_contouring_contouring_linear_contouring_unicycle/animation.gif (duration: 10.70s, size: 963351 bytes)
2025-12-01 13:34:12,054 - INFO - integration_test - Animation created successfully
2025-12-01 13:34:12,055 - INFO - integration_test - Test completed successfully
