2025-12-01 13:43:58,970 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2025-12-01 13:43:58,970 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2025-12-01 13:43:58,970 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2025-12-01 13:43:58,970 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2025-12-01 13:43:58,970 - INFO - integration_test - Creating objective module: contouring
2025-12-01 13:43:58,976 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2025-12-01 13:43:58,976 - INFO - integration_test - Creating 2 constraint module(s): ['contouring', 'ellipsoid']
2025-12-01 13:43:58,976 - DEBUG - integration_test - Creating constraint module: contouring
2025-12-01 13:43:58,982 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2025-12-01 13:43:58,982 - DEBUG - integration_test - Creating constraint module: ellipsoid
2025-12-01 13:43:58,989 - INFO - integration_test - Constraint module 'ellipsoid' created: ellipsoid_constraints
2025-12-01 13:43:58,989 - INFO - integration_test - Created 2 constraint module(s)
2025-12-01 13:43:59,005 - INFO - integration_test - Setting solver on all modules...
2025-12-01 13:43:59,005 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2025-12-01 13:43:59,005 - WARNING - integration_test -   Module ellipsoid_constraints has no solver attribute
2025-12-01 13:43:59,005 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2025-12-01 13:43:59,005 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2025-12-01 13:43:59,005 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2025-12-01 13:43:59,005 - DEBUG - integration_test -   Set solver on module: contouring_objective
2025-12-01 13:43:59,006 - WARNING - integration_test - Error shaping obstacles: 'max_obstacles'
2025-12-01 13:43:59,006 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2025-12-01 13:43:59,006 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2025-12-01 13:43:59,006 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2025-12-01 13:43:59,006 - INFO - integration_test - Reference path start: (0.00, 0.00)
2025-12-01 13:43:59,006 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2025-12-01 13:43:59,006 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2025-12-01 13:43:59,007 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2025-12-01 13:43:59,007 - INFO - integration_test - Added spline variable: 0.0000
2025-12-01 13:43:59,007 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2025-12-01 13:43:59,007 - INFO - integration_test - Step 0 (contouring until path end)
2025-12-01 13:43:59,007 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2025-12-01 13:43:59,008 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m)
2025-12-01 13:43:59,008 - DEBUG - integration_test -   Set spline state to 0.0000
2025-12-01 13:43:59,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:43:59,023 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2025-12-01 13:43:59,024 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2025-12-01 13:43:59,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:43:59,028 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:43:59,028 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2025-12-01 13:43:59,028 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:43:59,029 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.1], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2025-12-01 13:43:59,030 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.2], ws=[0.2, 0.0, 0.0, 1.0, 0.2127494608332952], res=[0.0, 0.0, 0.0, 0.0, -0.0127494608332952], res_norm=1.275e-02
2025-12-01 13:43:59,031 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.31274946083329525], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.3386985848683951], res=[0.0, 0.0, 0.0, 0.0, -0.025949124035099858], res_norm=2.595e-02
2025-12-01 13:43:59,047 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,060 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,080 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,094 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,114 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,127 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,147 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,160 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,180 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,194 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,212 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,225 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,242 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,254 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,271 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,283 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,300 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,311 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,328 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,341 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:43:59,357 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:43:59,369 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,342 - INFO - integration_test - Step 0: MPC solve successful
2025-12-01 13:44:00,378 - INFO - integration_test - Step 0: Computed 10 numeric contouring constraints for visualization (s=0.000)
2025-12-01 13:44:00,379 - DEBUG - integration_test - Step 0: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:00,379 - DEBUG - integration_test - Linearized constraints module not found at step 0
2025-12-01 13:44:00,379 - INFO - integration_test - === Applying control at step 0 ===
2025-12-01 13:44:00,379 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999904957495, 'w': 0.7999992141250771}
2025-12-01 13:44:00,379 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:00,379 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:00,380 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:00,381 - INFO - integration_test - Step 0 completed in 1.374s
2025-12-01 13:44:00,412 - INFO - integration_test - Step 1 (contouring until path end)
2025-12-01 13:44:00,413 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.07999992 1.2        0.12      ]
2025-12-01 13:44:00,414 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m)
2025-12-01 13:44:00,414 - DEBUG - integration_test -   Set spline state to 0.1200
2025-12-01 13:44:00,415 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:00,436 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2025-12-01 13:44:00,436 - WARNING - integration_test - Could not update reference path at step 1: x and y must have the same length
2025-12-01 13:44:00,436 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2025-12-01 13:44:00,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:00,442 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:00,442 - INFO - integration_test - Warmstart k=0: x0=0.10987737547458222 , y0=0.00453084060457779 , psi0=0.07999992141250771 , v0=1.1999999990495749 , spline0=0.1199999999049575 , a0=0.0 , w0=0.0
2025-12-01 13:44:00,442 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:00,443 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935808897931, 0.014120594472945627, 0.07999992141250771, 1.1999999990495749, 0.239999999809915], ws=[0.2294935808897931, 0.014120594472945629, 0.07999992141250756, 1.1999999990495749, 0.2825662530056514], res=[0.0, -1.734723475976807e-18, 1.5265566588595902e-16, 0.0, -0.042566253195736425], res_norm=4.257e-02
2025-12-01 13:44:00,445 - INFO - integration_test - Dyn residual k=1: pred=[0.349109786305004, 0.02371034834131345, 0.07999992141250756, 1.1999999990495749, 0.4025662529106089], ws=[0.349109786305004, 0.02371034834131345, 0.07999992141250756, 1.1999999990495749, 0.4628520712235427], res=[0.0, 0.0, 0.0, 0.0, -0.060285818312933837], res_norm=6.029e-02
2025-12-01 13:44:00,446 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259917202149, 0.03330010220968127, 0.07999992141250756, 1.1999999990495749, 0.5828520711285002], ws=[0.4687259917202149, 0.03330010220968127, 0.07999992141250756, 1.1999999990495749, 0.6617370092749448], res=[0.0, 0.0, 0.0, 0.0, -0.0788849381464446], res_norm=7.888e-02
2025-12-01 13:44:00,468 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,486 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,511 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,529 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,555 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,575 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,600 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,619 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,645 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,662 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,686 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,700 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,718 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,729 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,746 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,758 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,775 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,788 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,805 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,817 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:00,834 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:00,846 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,096 - INFO - integration_test - Step 1: MPC solve successful
2025-12-01 13:44:01,108 - INFO - integration_test - Step 1: Computed 10 numeric contouring constraints for visualization (s=0.120)
2025-12-01 13:44:01,109 - DEBUG - integration_test - Step 1: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:01,109 - INFO - integration_test - === Applying control at step 1 ===
2025-12-01 13:44:01,109 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000093953605, 'w': 0.7999997408114778}
2025-12-01 13:44:01,109 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:01,109 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:01,110 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:01,110 - INFO - integration_test - Step 1 completed in 0.697s
2025-12-01 13:44:01,133 - INFO - integration_test - Step 2 (contouring until path end)
2025-12-01 13:44:01,134 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022161 0.1599999  1.4        0.26      ]
2025-12-01 13:44:01,134 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m)
2025-12-01 13:44:01,134 - DEBUG - integration_test -   Set spline state to 0.2600
2025-12-01 13:44:01,135 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:01,150 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2025-12-01 13:44:01,150 - WARNING - integration_test - Could not update reference path at step 2: x and y must have the same length
2025-12-01 13:44:01,150 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2025-12-01 13:44:01,153 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:01,155 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:01,155 - INFO - integration_test - Warmstart k=0: x0=0.23889212940285642 , y0=0.02022160541380133 , psi0=0.1599998954936555 , v0=1.3999999999891108 , spline0=0.2599999999038686 , a0=0.0 , w0=0.0
2025-12-01 13:44:01,155 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:01,156 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039514053353, 0.04252613989561012, 0.1599998954936555, 1.3999999999891108, 0.3999999999027797], ws=[0.3771039514053353, 0.04252613989561012, 0.15999989549365567, 1.3999999999891108, 0.49222686386163444], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -0.09222686395885477], res_norm=9.223e-02
2025-12-01 13:44:01,156 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157734078142, 0.06483067437741893, 0.15999989549365567, 1.3999999999891108, 0.6322268638605455], ws=[0.5153157734078142, 0.06483067437741893, 0.15999989549365567, 1.3999999999891108, 0.7474945955820286], res=[0.0, 0.0, 0.0, 0.0, -0.11526773172148308], res_norm=1.153e-01
2025-12-01 13:44:01,157 - INFO - integration_test - Dyn residual k=2: pred=[0.653527595410293, 0.08713520885922775, 0.15999989549365567, 1.3999999999891108, 0.8874945955809397], ws=[0.653527595410293, 0.08713520885922775, 0.15999989549365567, 1.3999999999891108, 0.9682208653496462], res=[0.0, 0.0, 0.0, 0.0, -0.08072626976870656], res_norm=8.073e-02
2025-12-01 13:44:01,174 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,187 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,204 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,216 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,233 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,245 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,261 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,273 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,290 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,303 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,320 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,332 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,348 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,360 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,378 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,390 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,407 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,420 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,437 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,449 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,466 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,479 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,726 - INFO - integration_test - Step 2: MPC solve successful
2025-12-01 13:44:01,738 - INFO - integration_test - Step 2: Computed 10 numeric contouring constraints for visualization (s=0.260)
2025-12-01 13:44:01,738 - DEBUG - integration_test - Step 2: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:01,738 - INFO - integration_test - === Applying control at step 2 ===
2025-12-01 13:44:01,739 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016748816, 'w': 0.7999999190128634}
2025-12-01 13:44:01,739 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:01,739 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:01,740 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:01,740 - INFO - integration_test - Step 2 completed in 0.607s
2025-12-01 13:44:01,765 - INFO - integration_test - Step 3 (contouring until path end)
2025-12-01 13:44:01,765 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014468 0.23999989 1.6        0.42      ]
2025-12-01 13:44:01,766 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m)
2025-12-01 13:44:01,766 - DEBUG - integration_test -   Set spline state to 0.4200
2025-12-01 13:44:01,766 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:01,782 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2025-12-01 13:44:01,783 - WARNING - integration_test - Could not update reference path at step 3: x and y must have the same length
2025-12-01 13:44:01,783 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2025-12-01 13:44:01,785 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:01,787 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:01,787 - INFO - integration_test - Warmstart k=0: x0=0.38583643980149984 , y0=0.05014468407328865 , psi0=0.23999988739494185 , v0=1.6000000016639924 , spline0=0.42000000007026783 , a0=0.0 , w0=0.0
2025-12-01 13:44:01,787 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:01,788 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505202220964, 0.0881770868407724, 0.23999988739494185, 1.6000000016639924, 0.5800000002366671], ws=[0.5412505202220964, 0.0881770868407724, 0.23999988739494205, 1.6000000016639924, 0.7289817587327568], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -0.14898175849608974], res_norm=1.490e-01
2025-12-01 13:44:01,789 - INFO - integration_test - Dyn residual k=1: pred=[0.6966646006426929, 0.12620948960825618, 0.23999988739494205, 1.6000000016639924, 0.8889817588991561], ws=[0.696664600642693, 0.12620948960825618, 0.23999988739494205, 1.6000000016639924, 1.0077625404777573], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, -0.11878078157860117], res_norm=1.188e-01
2025-12-01 13:44:01,790 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786810632894, 0.16424189237573994, 0.23999988739494205, 1.6000000016639924, 1.1677625406441565], ws=[0.8520786810632895, 0.16424189237573997, 0.23999988739494205, 1.6000000016639924, 1.3126338165697293], res=[-1.1102230246251565e-16, -2.7755575615628914e-17, 0.0, 0.0, -0.1448712759255728], res_norm=1.449e-01
2025-12-01 13:44:01,806 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,818 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,836 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,848 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,866 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,878 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,895 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,907 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,923 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,935 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,952 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,964 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:01,981 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:01,994 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,010 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,023 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,039 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,051 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,068 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,081 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,097 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,109 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,373 - INFO - integration_test - Step 3: MPC solve successful
2025-12-01 13:44:02,385 - INFO - integration_test - Step 3: Computed 10 numeric contouring constraints for visualization (s=0.420)
2025-12-01 13:44:02,385 - DEBUG - integration_test - Step 3: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:02,385 - INFO - integration_test - === Applying control at step 3 ===
2025-12-01 13:44:02,385 - INFO - integration_test -   Control dict from planner: {'a': 1.999999953798577, 'w': 0.7999978786985291}
2025-12-01 13:44:02,385 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:02,385 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:02,386 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:02,387 - INFO - integration_test - Step 3 completed in 0.622s
2025-12-01 13:44:02,410 - INFO - integration_test - Step 4 (contouring until path end)
2025-12-01 13:44:02,411 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913548 0.09724069 0.31999968 1.8        0.6       ]
2025-12-01 13:44:02,411 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.455m)
2025-12-01 13:44:02,411 - DEBUG - integration_test -   Set spline state to 0.6000
2025-12-01 13:44:02,412 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:02,427 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2025-12-01 13:44:02,428 - WARNING - integration_test - Could not update reference path at step 4: x and y must have the same length
2025-12-01 13:44:02,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2025-12-01 13:44:02,431 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:02,432 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:02,432 - INFO - integration_test - Warmstart k=0: x0=0.5491354752478006 , y0=0.09724068843124462 , psi0=0.3199996752647948 , v0=1.79999999704385 , spline0=0.5999999997746528 , a0=0.0 , w0=0.0
2025-12-01 13:44:02,432 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:02,433 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978686091733, 0.15386261376412383, 0.3199996752647948, 1.79999999704385, 0.7799999994790379], ws=[0.7199978686091733, 0.15386261376412383, 0.3199996752647949, 1.79999999704385, 0.9928306740123354], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.21283067453329751], res_norm=2.128e-01
2025-12-01 13:44:02,434 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602619705459, 0.21048453909700307, 0.3199996752647949, 1.79999999704385, 1.1728306737167205], ws=[0.8908602619705459, 0.21048453909700307, 0.3199996752647949, 1.79999999704385, 1.3619893496150812], res=[0.0, 0.0, 0.0, 0.0, -0.18915867589836077], res_norm=1.892e-01
2025-12-01 13:44:02,434 - INFO - integration_test - Dyn residual k=2: pred=[1.0617226553319186, 0.2671064644298823, 0.3199996752647949, 1.79999999704385, 1.5419893493194663], ws=[1.0617226553319186, 0.2671064644298823, 0.3199996752647949, 1.79999999704385, 1.7641730770658752], res=[0.0, 0.0, 0.0, 0.0, -0.22218372774640893], res_norm=2.222e-01
2025-12-01 13:44:02,451 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,463 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,480 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,493 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,510 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,522 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,539 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,551 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,568 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,580 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,597 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,608 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,625 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,637 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,653 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,666 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,682 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,694 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,712 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,725 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:02,743 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:02,755 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,034 - INFO - integration_test - Step 4: MPC solve successful
2025-12-01 13:44:03,045 - INFO - integration_test - Step 4: Computed 10 numeric contouring constraints for visualization (s=0.600)
2025-12-01 13:44:03,046 - DEBUG - integration_test - Step 4: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:03,046 - INFO - integration_test - === Applying control at step 4 ===
2025-12-01 13:44:03,046 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000180872775, 'w': 0.7999999179723569}
2025-12-01 13:44:03,046 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:03,046 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:03,047 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:03,047 - INFO - integration_test - Step 4 completed in 0.637s
2025-12-01 13:44:03,070 - INFO - integration_test - Step 5 (contouring until path end)
2025-12-01 13:44:03,070 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686152 0.16427964 0.39999967 2.         0.8       ]
2025-12-01 13:44:03,071 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.375m)
2025-12-01 13:44:03,071 - DEBUG - integration_test -   Set spline state to 0.8000
2025-12-01 13:44:03,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:03,087 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2025-12-01 13:44:03,087 - WARNING - integration_test - Could not update reference path at step 5: x and y must have the same length
2025-12-01 13:44:03,087 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2025-12-01 13:44:03,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:03,091 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:03,091 - INFO - integration_test - Warmstart k=0: x0=0.7268615237899126 , y0=0.16427964101844714 , psi0=0.3999996670620305 , v0=1.9999999988525778 , spline0=0.7999999996599105 , a0=0.0 , w0=0.0
2025-12-01 13:44:03,091 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:03,092 - INFO - integration_test - Dyn residual k=0: pred=[0.9110737484152253, 0.24216324810425477, 0.3999996670620305, 1.9999999988525778, 0.9999999995451683], ws=[0.9110737484152253, 0.2421632481042548, 0.3999996670620307, 1.9999999988525778, 1.2100959656592758], res=[0.0, -2.7755575615628914e-17, -2.220446049250313e-16, 0.0, -0.21009596611410752], res_norm=2.101e-01
2025-12-01 13:44:03,093 - INFO - integration_test - Dyn residual k=1: pred=[1.095285973040538, 0.3200468551900625, 0.3999996670620307, 1.9999999988525778, 1.4100959655445335], ws=[1.095285973040538, 0.3200468551900625, 0.3999996670620307, 1.9999999988525778, 1.6563639854163323], res=[0.0, 0.0, 0.0, 0.0, -0.2462680198717988], res_norm=2.463e-01
2025-12-01 13:44:03,094 - INFO - integration_test - Dyn residual k=2: pred=[1.2794981976658506, 0.3979304622758702, 0.3999996670620307, 1.9999999988525778, 1.85636398530159], ws=[1.2794981976658506, 0.3979304622758702, 0.3999996670620307, 1.9999999988525778, 2.082543330161157], res=[0.0, 0.0, 0.0, 0.0, -0.2261793448595668], res_norm=2.262e-01
2025-12-01 13:44:03,111 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,123 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,140 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,152 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,169 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,181 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,199 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,211 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,227 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,239 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,256 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,268 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,297 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,314 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,326 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,342 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,354 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,372 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,384 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,400 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,412 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,716 - INFO - integration_test - Step 5: MPC solve successful
2025-12-01 13:44:03,728 - INFO - integration_test - Step 5: Computed 10 numeric contouring constraints for visualization (s=0.800)
2025-12-01 13:44:03,728 - DEBUG - integration_test - Step 5: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:03,728 - INFO - integration_test - === Applying control at step 5 ===
2025-12-01 13:44:03,729 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199551304, 'w': 0.8000000072105589}
2025-12-01 13:44:03,729 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:03,729 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:03,730 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:03,730 - INFO - integration_test - Step 5 completed in 0.660s
2025-12-01 13:44:03,754 - INFO - integration_test - Step 6 (contouring until path end)
2025-12-01 13:44:03,754 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675197 0.25382362 0.47999967 2.2        1.02      ]
2025-12-01 13:44:03,755 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.373m)
2025-12-01 13:44:03,755 - DEBUG - integration_test -   Set spline state to 1.0200
2025-12-01 13:44:03,755 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:03,771 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2025-12-01 13:44:03,771 - WARNING - integration_test - Could not update reference path at step 6: x and y must have the same length
2025-12-01 13:44:03,771 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2025-12-01 13:44:03,774 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:03,775 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:03,775 - INFO - integration_test - Warmstart k=0: x0=0.9167519667074995 , y0=0.2538236174833771 , psi0=0.4799996677830864 , v0=2.2000000008480907 , spline0=1.0199999997447196 , a0=0.0 , w0=0.0
2025-12-01 13:44:03,775 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:03,777 - INFO - integration_test - Dyn residual k=0: pred=[1.111890883544544, 0.35541497131322336, 0.4799996677830864, 2.2000000008480907, 1.2399999998295286], ws=[1.111890883544544, 0.35541497131322336, 0.47999966778308645, 2.2000000008480907, 1.5284219523493654], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -0.2884219525198368], res_norm=2.884e-01
2025-12-01 13:44:03,777 - INFO - integration_test - Dyn residual k=1: pred=[1.3070298003815886, 0.4570063251430696, 0.47999966778308645, 2.2000000008480907, 1.7484219524341744], ws=[1.3070298003815886, 0.4570063251430696, 0.47999966778308645, 2.2000000008480907, 2.0213814212143584], res=[0.0, 0.0, 0.0, 0.0, -0.27295946878018396], res_norm=2.730e-01
2025-12-01 13:44:03,778 - INFO - integration_test - Dyn residual k=2: pred=[1.502168717218633, 0.5585976789729158, 0.47999966778308645, 2.2000000008480907, 2.2413814212991676], ws=[1.502168717218633, 0.5585976789729159, 0.47999966778308645, 2.2000000008480907, 2.557601236053805], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.31621981475463734], res_norm=3.162e-01
2025-12-01 13:44:03,841 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,854 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,873 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,885 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,902 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,914 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,933 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,947 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:03,966 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:03,981 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,000 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,014 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,032 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,045 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,063 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,077 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,096 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,108 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,125 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,137 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,153 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,166 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,464 - INFO - integration_test - Step 6: MPC solve successful
2025-12-01 13:44:04,476 - INFO - integration_test - Step 6: Computed 10 numeric contouring constraints for visualization (s=1.020)
2025-12-01 13:44:04,476 - DEBUG - integration_test - Step 6: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:04,476 - INFO - integration_test - === Applying control at step 6 ===
2025-12-01 13:44:04,476 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001220133, 'w': 0.7999993370674716}
2025-12-01 13:44:04,476 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:04,476 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:04,477 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:04,478 - INFO - integration_test - Step 6 completed in 0.724s
2025-12-01 13:44:04,500 - INFO - integration_test - Step 7 (contouring until path end)
2025-12-01 13:44:04,500 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623097 0.36819118 0.5599996  2.4        1.26      ]
2025-12-01 13:44:04,501 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.475m)
2025-12-01 13:44:04,501 - DEBUG - integration_test -   Set spline state to 1.2600
2025-12-01 13:44:04,501 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:04,517 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2025-12-01 13:44:04,517 - WARNING - integration_test - Could not update reference path at step 7: x and y must have the same length
2025-12-01 13:44:04,517 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2025-12-01 13:44:04,520 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:04,521 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:04,521 - INFO - integration_test - Warmstart k=0: x0=1.1162309679220845 , y0=0.36819118345158597 , psi0=0.5599996014898335 , v0=2.4000000020682237 , spline0=1.2599999999515419 , a0=0.0 , w0=0.0
2025-12-01 13:44:04,521 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:04,522 - INFO - integration_test - Dyn residual k=0: pred=[1.3195722455444636, 0.4956757900289029, 0.5599996014898335, 2.4000000020682237, 1.5000000001583642], ws=[1.3195722455444636, 0.49567579002890294, 0.5599996014898334, 2.4000000020682237, 1.8738630747663145], res=[0.0, -5.551115123125783e-17, 1.1102230246251565e-16, 0.0, -0.3738630746079503], res_norm=3.739e-01
2025-12-01 13:44:04,523 - INFO - integration_test - Dyn residual k=1: pred=[1.5229135231668427, 0.6231603966062198, 0.5599996014898334, 2.4000000020682237, 2.113863074973137], ws=[1.5229135231668427, 0.6231603966062198, 0.5599996014898334, 2.4000000020682237, 2.4813859268016807], res=[0.0, 0.0, 0.0, 0.0, -0.36752285182854383], res_norm=3.675e-01
2025-12-01 13:44:04,524 - INFO - integration_test - Dyn residual k=2: pred=[1.7262548007892218, 0.7506450031835368, 0.5599996014898334, 2.4000000020682237, 2.721385927008503], ws=[1.7262548007892218, 0.7506450031835368, 0.5599996014898334, 2.4000000020682237, 3.082301540294834], res=[0.0, 0.0, 0.0, 0.0, -0.3609156132863309], res_norm=3.609e-01
2025-12-01 13:44:04,541 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,553 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,570 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,582 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,600 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,612 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,629 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,640 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,657 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,669 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,686 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,698 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,715 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,727 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,743 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,755 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,773 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,785 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,802 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,814 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:04,830 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:04,842 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,147 - INFO - integration_test - Step 7: MPC solve successful
2025-12-01 13:44:05,158 - INFO - integration_test - Step 7: Computed 10 numeric contouring constraints for visualization (s=1.260)
2025-12-01 13:44:05,159 - DEBUG - integration_test - Step 7: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:05,159 - INFO - integration_test - === Applying control at step 7 ===
2025-12-01 13:44:05,159 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199264583, 'w': 0.7999999983939925}
2025-12-01 13:44:05,159 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:05,159 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:05,160 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:05,160 - INFO - integration_test - Step 7 completed in 0.660s
2025-12-01 13:44:05,185 - INFO - integration_test - Step 8 (contouring until path end)
2025-12-01 13:44:05,185 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243465 0.5094241  0.6399996  2.6        1.52      ]
2025-12-01 13:44:05,186 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.429m)
2025-12-01 13:44:05,186 - DEBUG - integration_test -   Set spline state to 1.5200
2025-12-01 13:44:05,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:05,201 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2025-12-01 13:44:05,202 - WARNING - integration_test - Could not update reference path at step 8: x and y must have the same length
2025-12-01 13:44:05,202 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2025-12-01 13:44:05,204 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:05,206 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:05,206 - INFO - integration_test - Warmstart k=0: x0=1.3224346475691455 , y0=0.5094240973765054 , psi0=0.6399996013292327 , v0=2.6000000040608695 , spline0=1.5200000003576288 , a0=0.0 , w0=0.0
2025-12-01 13:44:05,206 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:05,206 - INFO - integration_test - Dyn residual k=0: pred=[1.5309796068467005, 0.664694829232474, 0.6399996013292327, 2.6000000040608695, 1.7800000007637158], ws=[1.5309796068467008, 0.664694829232474, 0.6399996013292326, 2.6000000040608695, 2.172269507395387], res=[-2.220446049250313e-16, 0.0, 1.1102230246251565e-16, 0.0, -0.39226950663167126], res_norm=3.923e-01
2025-12-01 13:44:05,207 - INFO - integration_test - Dyn residual k=1: pred=[1.7395245661242558, 0.8199655610884427, 0.6399996013292326, 2.6000000040608695, 2.432269507801474], ws=[1.7395245661242558, 0.8199655610884427, 0.6399996013292326, 2.6000000040608695, 2.8208115007677925], res=[0.0, 0.0, 0.0, 0.0, -0.38854199296631853], res_norm=3.885e-01
2025-12-01 13:44:05,208 - INFO - integration_test - Dyn residual k=2: pred=[1.9480695254018108, 0.9752362929444113, 0.6399996013292326, 2.6000000040608695, 3.0808115011738795], ws=[1.9480695254018108, 0.9752362929444113, 0.6399996013292326, 2.6000000040608695, 3.465637713373337], res=[0.0, 0.0, 0.0, 0.0, -0.38482621219945745], res_norm=3.848e-01
2025-12-01 13:44:05,224 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,236 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,252 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,264 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,282 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,295 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,313 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,325 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,342 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,355 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,372 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,385 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,402 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,414 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,431 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,443 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,460 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,472 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,490 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,502 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,520 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,532 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,843 - INFO - integration_test - Step 8: MPC solve successful
2025-12-01 13:44:05,855 - INFO - integration_test - Step 8: Computed 10 numeric contouring constraints for visualization (s=1.520)
2025-12-01 13:44:05,855 - DEBUG - integration_test - Step 8: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:05,855 - INFO - integration_test - === Applying control at step 8 ===
2025-12-01 13:44:05,855 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000131540387, 'w': 0.79999880847937}
2025-12-01 13:44:05,855 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:05,855 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:05,856 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:05,857 - INFO - integration_test - Step 8 completed in 0.671s
2025-12-01 13:44:05,879 - INFO - integration_test - Step 9 (contouring until path end)
2025-12-01 13:44:05,879 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223957 0.6792565  0.71999948 2.80000001 1.8       ]
2025-12-01 13:44:05,880 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.464m)
2025-12-01 13:44:05,880 - DEBUG - integration_test -   Set spline state to 1.8000
2025-12-01 13:44:05,880 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:05,895 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2025-12-01 13:44:05,896 - WARNING - integration_test - Could not update reference path at step 9: x and y must have the same length
2025-12-01 13:44:05,896 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2025-12-01 13:44:05,899 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:05,900 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:05,901 - INFO - integration_test - Warmstart k=0: x0=1.532239565628799 , y0=0.6792564996529558 , psi0=0.7199994821771697 , v0=2.8000000053762735 , spline0=1.8000000008952561 , a0=0.0 , w0=0.0
2025-12-01 13:44:05,901 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:05,902 - INFO - integration_test - Dyn residual k=0: pred=[1.7427452657968554, 0.8638840991548388, 0.7199994821771697, 2.8000000053762735, 2.0800000014328837], ws=[1.7427452657968554, 0.8638840991548388, 0.7199994821771698, 2.8000000053762735, 2.5726637864459], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.4926637850130162], res_norm=4.927e-01
2025-12-01 13:44:05,902 - INFO - integration_test - Dyn residual k=1: pred=[1.9532509659649115, 1.0485116986567218, 0.7199994821771698, 2.8000000053762735, 2.8526637869835274], ws=[1.9532509659649118, 1.0485116986567218, 0.7199994821771698, 2.8000000053762735, 3.3533832709120768], res=[-2.220446049250313e-16, 0.0, 0.0, 0.0, -0.5007194839285494], res_norm=5.007e-01
2025-12-01 13:44:05,903 - INFO - integration_test - Dyn residual k=2: pred=[2.163756666132968, 1.233139298158605, 0.7199994821771698, 2.8000000053762735, 3.6333832714497043], ws=[2.163756666132968, 1.233139298158605, 0.7199994821771698, 2.8000000053762735, 4.144520089345247], res=[0.0, 0.0, 0.0, 0.0, -0.5111368178955424], res_norm=5.111e-01
2025-12-01 13:44:05,919 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,931 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,949 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,961 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:05,978 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:05,990 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,007 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,019 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,036 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,048 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,065 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,077 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,093 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,105 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,122 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,134 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,150 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,162 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,179 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,191 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,208 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,220 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,537 - INFO - integration_test - Step 9: MPC solve successful
2025-12-01 13:44:06,548 - INFO - integration_test - Step 9: Computed 10 numeric contouring constraints for visualization (s=1.800)
2025-12-01 13:44:06,548 - DEBUG - integration_test - Step 9: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:06,548 - INFO - integration_test - === Applying control at step 9 ===
2025-12-01 13:44:06,548 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998941, 'w': 0.8000000097809237}
2025-12-01 13:44:06,548 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:06,548 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:06,549 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:06,550 - INFO - integration_test - Step 9 completed in 0.671s
2025-12-01 13:44:06,574 - INFO - integration_test - Step 10 (contouring until path end)
2025-12-01 13:44:06,574 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229423 0.87908696 0.79999948 3.00000001 2.1       ]
2025-12-01 13:44:06,575 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.397m)
2025-12-01 13:44:06,575 - DEBUG - integration_test -   Set spline state to 2.1000
2025-12-01 13:44:06,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:06,590 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2025-12-01 13:44:06,591 - WARNING - integration_test - Could not update reference path at step 10: x and y must have the same length
2025-12-01 13:44:06,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2025-12-01 13:44:06,593 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:06,594 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:06,595 - INFO - integration_test - Warmstart k=0: x0=1.7422942343703547 , y0=0.8790869600496227 , psi0=0.799999483155262 , v0=3.0 , spline0=2.100000001632873 , a0=0.0 , w0=0.0
2025-12-01 13:44:06,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:06,595 - INFO - integration_test - Dyn residual k=0: pred=[1.9513063584029926, 1.0942936792926918, 0.799999483155262, 3.0, 2.400000001632873], ws=[1.9513063584029926, 1.0942936792926918, 0.7999994831552621, 3.0, 3.0001855958048225], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.6001855941719496], res_norm=6.002e-01
2025-12-01 13:44:06,596 - INFO - integration_test - Dyn residual k=1: pred=[2.1603184824356303, 1.309500398535761, 0.7999994831552621, 3.0, 3.3001855958048223], ws=[2.1603184824356303, 1.309500398535761, 0.7999994831552621, 3.0, 3.8602041037842403], res=[0.0, 0.0, 0.0, 0.0, -0.560018507979418], res_norm=5.600e-01
2025-12-01 13:44:06,597 - INFO - integration_test - Dyn residual k=2: pred=[2.369330606468268, 1.52470711777883, 0.7999994831552621, 3.0, 4.16020410378424], ws=[2.369330606468268, 1.52470711777883, 0.7999994831552621, 3.0, 4.739620403659531], res=[0.0, 0.0, 0.0, 0.0, -0.579416299875291], res_norm=5.794e-01
2025-12-01 13:44:06,613 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,625 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,643 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,655 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,672 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,685 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,702 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,714 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,731 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,743 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,760 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,772 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,789 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,801 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,818 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,830 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,846 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,858 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,876 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,887 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:06,904 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:06,916 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,561 - INFO - integration_test - Step 10: MPC solve successful
2025-12-01 13:44:07,572 - INFO - integration_test - Step 10: Computed 10 numeric contouring constraints for visualization (s=2.100)
2025-12-01 13:44:07,573 - DEBUG - integration_test - Step 10: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:07,573 - INFO - integration_test - === Applying control at step 10 ===
2025-12-01 13:44:07,573 - INFO - integration_test -   Control dict from planner: {'a': 2.262371154915092e-07, 'w': 0.8000000086079229}
2025-12-01 13:44:07,573 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:07,573 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:07,574 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:07,574 - INFO - integration_test - Step 10 completed in 1.000s
2025-12-01 13:44:07,597 - INFO - integration_test - Step 11 (contouring until path end)
2025-12-01 13:44:07,597 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247981 1.10242023 0.87999948 3.00000003 2.4       ]
2025-12-01 13:44:07,598 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.398m)
2025-12-01 13:44:07,598 - DEBUG - integration_test -   Set spline state to 2.4000
2025-12-01 13:44:07,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:07,613 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2025-12-01 13:44:07,613 - WARNING - integration_test - Could not update reference path at step 11: x and y must have the same length
2025-12-01 13:44:07,614 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2025-12-01 13:44:07,616 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:07,617 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:07,617 - INFO - integration_test - Warmstart k=0: x0=1.9424798087830808 , y0=1.1024202305550497 , psi0=0.8799994840160543 , v0=3.0 , spline0=2.400000004632861 , a0=0.0 , w0=0.0
2025-12-01 13:44:07,618 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:07,618 - INFO - integration_test - Dyn residual k=0: pred=[2.133625271349296, 1.3336417955967812, 0.8799994840160543, 3.0, 2.7000000046328614], ws=[2.133625271349296, 1.3336417955967812, 0.8799994840160545, 3.0, 3.333156019035997], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.6331560144031356], res_norm=6.332e-01
2025-12-01 13:44:07,619 - INFO - integration_test - Dyn residual k=1: pred=[2.3247707339155106, 1.5648633606385127, 0.8799994840160545, 3.0, 3.6331560190359973], ws=[2.3247707339155106, 1.5648633606385127, 0.8799994840160545, 3.0, 4.291968858853431], res=[0.0, 0.0, 0.0, 0.0, -0.6588128398174335], res_norm=6.588e-01
2025-12-01 13:44:07,620 - INFO - integration_test - Dyn residual k=2: pred=[2.5159161964817254, 1.7960849256802445, 0.8799994840160545, 3.0, 4.591968858853431], ws=[2.5159161964817254, 1.7960849256802445, 0.8799994840160545, 3.0, 5.21733794864268], res=[0.0, 0.0, 0.0, 0.0, -0.625369089789249], res_norm=6.254e-01
2025-12-01 13:44:07,636 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,648 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,665 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,678 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,695 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,707 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,724 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,736 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,754 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,766 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,784 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,797 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,815 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,828 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,847 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,862 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,880 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,894 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,912 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,925 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:07,942 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:07,954 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,235 - INFO - integration_test - Step 11: MPC solve successful
2025-12-01 13:44:08,247 - INFO - integration_test - Step 11: Computed 10 numeric contouring constraints for visualization (s=2.400)
2025-12-01 13:44:08,248 - DEBUG - integration_test - Step 11: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:08,248 - INFO - integration_test - === Applying control at step 11 ===
2025-12-01 13:44:08,248 - INFO - integration_test -   Control dict from planner: {'a': -6.386605294030355e-13, 'w': -0.532946551369377}
2025-12-01 13:44:08,248 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:08,248 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:08,249 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:08,249 - INFO - integration_test - Step 11 completed in 0.652s
2025-12-01 13:44:08,274 - INFO - integration_test - Step 12 (contouring until path end)
2025-12-01 13:44:08,274 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13969478 1.32844005 0.82670483 3.00000003 2.70000001]
2025-12-01 13:44:08,275 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.278m)
2025-12-01 13:44:08,275 - DEBUG - integration_test -   Set spline state to 2.7000
2025-12-01 13:44:08,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:08,290 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.140, 1.328), path_start=(0.000, 0.000), dist=2.519m
2025-12-01 13:44:08,291 - WARNING - integration_test - Could not update reference path at step 12: x and y must have the same length
2025-12-01 13:44:08,291 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2025-12-01 13:44:08,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:08,295 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:08,295 - INFO - integration_test - Warmstart k=0: x0=2.1396947795531 , y0=1.3284400465505473 , psi0=0.8267048288791167 , v0=3.0 , spline0=2.7000000076328425 , a0=0.0 , w0=0.0
2025-12-01 13:44:08,295 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:08,296 - INFO - integration_test - Dyn residual k=0: pred=[2.3428858901127083, 1.5491511078717983, 0.8267048288791167, 3.0, 3.000000007632843], ws=[2.3428858901127083, 1.5491511078717983, 0.8267048288791168, 3.0, 3.741721210574412], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.7417212029415694], res_norm=7.417e-01
2025-12-01 13:44:08,297 - INFO - integration_test - Dyn residual k=1: pred=[2.5460770006723163, 1.7698621691930494, 0.8267048288791168, 3.0, 4.041721210574412], ws=[2.546077000672317, 1.7698621691930494, 0.8267048288791168, 3.0, 4.757034392295118], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.7153131817207061], res_norm=7.153e-01
2025-12-01 13:44:08,297 - INFO - integration_test - Dyn residual k=2: pred=[2.749268111231925, 1.9905732305143005, 0.8267048288791168, 3.0, 5.057034392295118], ws=[2.749268111231925, 1.9905732305143005, 0.8267048288791168, 3.0, 5.810111644724164], res=[0.0, 0.0, 0.0, 0.0, -0.7530772524290459], res_norm=7.531e-01
2025-12-01 13:44:08,314 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,326 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,343 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,355 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,372 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,385 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,402 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,414 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,430 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,442 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,459 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,471 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,488 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,500 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,518 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,531 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,548 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,561 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,578 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,590 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,608 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,621 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,893 - INFO - integration_test - Step 12: MPC solve successful
2025-12-01 13:44:08,905 - INFO - integration_test - Step 12: Computed 10 numeric contouring constraints for visualization (s=2.700)
2025-12-01 13:44:08,906 - DEBUG - integration_test - Step 12: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:08,906 - INFO - integration_test - === Applying control at step 12 ===
2025-12-01 13:44:08,906 - INFO - integration_test -   Control dict from planner: {'a': -4.657557940527473e-10, 'w': -0.5857100455853996}
2025-12-01 13:44:08,906 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:08,906 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:08,907 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:08,908 - INFO - integration_test - Step 12 completed in 0.634s
2025-12-01 13:44:08,931 - INFO - integration_test - Step 13 (contouring until path end)
2025-12-01 13:44:08,932 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.34923152 1.54307609 0.76813382 3.00000003 3.00000001]
2025-12-01 13:44:08,932 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.329m)
2025-12-01 13:44:08,932 - DEBUG - integration_test -   Set spline state to 3.0000
2025-12-01 13:44:08,933 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:08,947 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.349, 1.543), path_start=(0.000, 0.000), dist=2.811m
2025-12-01 13:44:08,948 - WARNING - integration_test - Could not update reference path at step 13: x and y must have the same length
2025-12-01 13:44:08,948 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2025-12-01 13:44:08,950 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:08,952 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:08,952 - INFO - integration_test - Warmstart k=0: x0=2.3492315230276257 , y0=1.5430760859061918 , psi0=0.7681338243205768 , v0=3.0 , spline0=3.0000000106281663 , a0=0.0 , w0=0.0
2025-12-01 13:44:08,952 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:08,953 - INFO - integration_test - Dyn residual k=0: pred=[2.5649940818497665, 1.7515143698430018, 0.7681338243205768, 3.0, 3.3000000106281666], ws=[2.5649940818497665, 1.751514369843002, 0.7681338243205769, 3.0, 4.073841084740596], res=[0.0, -2.220446049250313e-16, -1.1102230246251565e-16, 0.0, -0.7738410741124291], res_norm=7.738e-01
2025-12-01 13:44:08,953 - INFO - integration_test - Dyn residual k=1: pred=[2.7807566406719073, 1.959952653779812, 0.7681338243205769, 3.0, 4.3738410847405955], ws=[2.7807566406719073, 1.9599526537798122, 0.7681338243205769, 3.0, 5.187022162454754], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, -0.8131810777141588], res_norm=8.132e-01
2025-12-01 13:44:08,954 - INFO - integration_test - Dyn residual k=2: pred=[2.996519199494048, 2.168390937716622, 0.7681338243205769, 3.0, 5.487022162454754], ws=[2.996519199494048, 2.168390937716622, 0.7681338243205769, 3.0, 6.282520362853557], res=[0.0, 0.0, 0.0, 0.0, -0.7954982003988027], res_norm=7.955e-01
2025-12-01 13:44:08,971 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:08,983 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:08,999 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,011 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,028 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,040 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,056 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,068 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,085 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,098 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,114 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,126 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,143 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,154 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,171 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,184 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,200 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,212 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,229 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,241 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,259 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,272 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,546 - INFO - integration_test - Step 13: MPC solve successful
2025-12-01 13:44:09,560 - INFO - integration_test - Step 13: Computed 10 numeric contouring constraints for visualization (s=3.000)
2025-12-01 13:44:09,561 - DEBUG - integration_test - Step 13: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:09,561 - INFO - integration_test - === Applying control at step 13 ===
2025-12-01 13:44:09,561 - INFO - integration_test -   Control dict from planner: {'a': -3.764226010540801e-09, 'w': -0.44785737348628146}
2025-12-01 13:44:09,561 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:09,561 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:09,562 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:09,563 - INFO - integration_test - Step 13 completed in 0.632s
2025-12-01 13:44:09,587 - INFO - integration_test - Step 14 (contouring until path end)
2025-12-01 13:44:09,587 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.56958871 1.74661396 0.72334809 3.00000003 3.30000001]
2025-12-01 13:44:09,588 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.194m)
2025-12-01 13:44:09,588 - DEBUG - integration_test -   Set spline state to 3.3000
2025-12-01 13:44:09,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:09,604 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.570, 1.747), path_start=(0.000, 0.000), dist=3.107m
2025-12-01 13:44:09,605 - WARNING - integration_test - Could not update reference path at step 14: x and y must have the same length
2025-12-01 13:44:09,605 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2025-12-01 13:44:09,608 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:09,609 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:09,609 - INFO - integration_test - Warmstart k=0: x0=2.569588714518344 , y0=1.7466139644056307 , psi0=0.7233480869719486 , v0=3.0 , spline0=3.300000013585848 , a0=0.0 , w0=0.0
2025-12-01 13:44:09,609 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:09,611 - INFO - integration_test - Dyn residual k=0: pred=[2.7944668672042767, 1.945183389153154, 0.7233480869719486, 3.0, 3.6000000135858476], ws=[2.7944668672042767, 1.945183389153154, 0.7233480869719484, 3.0, 4.483692212262728], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.8836921986768802], res_norm=8.837e-01
2025-12-01 13:44:09,611 - INFO - integration_test - Dyn residual k=1: pred=[3.0193450198902094, 2.1437528139006776, 0.7233480869719484, 3.0, 4.783692212262728], ws=[3.0193450198902094, 2.1437528139006776, 0.7233480869719484, 3.0, 5.6539714021290415], res=[0.0, 0.0, 0.0, 0.0, -0.8702791898663138], res_norm=8.703e-01
2025-12-01 13:44:09,612 - INFO - integration_test - Dyn residual k=2: pred=[3.244223172576142, 2.342322238648201, 0.7233480869719484, 3.0, 5.953971402129041], ws=[3.244223172576142, 2.342322238648201, 0.7233480869719484, 3.0, 6.810353569215164], res=[0.0, 0.0, 0.0, 0.0, -0.8563821670861227], res_norm=8.564e-01
2025-12-01 13:44:09,629 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,642 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,660 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,671 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,689 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,701 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,718 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,730 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,746 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,758 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,777 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,791 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,808 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,820 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,836 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,848 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,866 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,878 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,895 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,907 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:09,924 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:09,935 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,178 - INFO - integration_test - Step 14: MPC solve successful
2025-12-01 13:44:10,190 - INFO - integration_test - Step 14: Computed 10 numeric contouring constraints for visualization (s=3.300)
2025-12-01 13:44:10,190 - DEBUG - integration_test - Step 14: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:10,190 - INFO - integration_test - === Applying control at step 14 ===
2025-12-01 13:44:10,190 - INFO - integration_test -   Control dict from planner: {'a': -1.155133347394255e-06, 'w': -0.4191432450435372}
2025-12-01 13:44:10,190 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:10,190 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:10,191 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:10,192 - INFO - integration_test - Step 14 completed in 0.605s
2025-12-01 13:44:10,216 - INFO - integration_test - Step 15 (contouring until path end)
2025-12-01 13:44:10,216 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.79856187 1.94041313 0.68143376 2.99999991 3.6       ]
2025-12-01 13:44:10,217 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.316m)
2025-12-01 13:44:10,217 - DEBUG - integration_test -   Set spline state to 3.6000
2025-12-01 13:44:10,217 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:10,233 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.799, 1.940), path_start=(0.000, 0.000), dist=3.405m
2025-12-01 13:44:10,233 - WARNING - integration_test - Could not update reference path at step 15: x and y must have the same length
2025-12-01 13:44:10,233 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2025-12-01 13:44:10,236 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:10,237 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:10,237 - INFO - integration_test - Warmstart k=0: x0=2.7985618687842835 , y0=1.9404131331859051 , psi0=0.6814337624675949 , v0=2.999999914063482 , spline0=3.600000004992196 , a0=0.0 , w0=0.0
2025-12-01 13:44:10,237 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:10,238 - INFO - integration_test - Dyn residual k=0: pred=[3.031562976111017, 2.1293852973485805, 0.6814337624675949, 2.999999914063482, 3.8999999963985443], ws=[3.031562976111017, 2.1293852973485805, 0.681433762467595, 2.999999914063482, 4.814597687720819], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.9145976913222746], res_norm=9.146e-01
2025-12-01 13:44:10,239 - INFO - integration_test - Dyn residual k=1: pred=[3.26456408343775, 2.3183574615112557, 0.681433762467595, 2.999999914063482, 5.114597679127167], ws=[3.26456408343775, 2.3183574615112557, 0.681433762467595, 2.999999914063482, 6.016185746018571], res=[0.0, 0.0, 0.0, 0.0, -0.9015880668914038], res_norm=9.016e-01
2025-12-01 13:44:10,240 - INFO - integration_test - Dyn residual k=2: pred=[3.497565190764483, 2.507329625673931, 0.681433762467595, 2.999999914063482, 6.316185737424918], ws=[3.497565190764483, 2.507329625673931, 0.681433762467595, 2.999999914063482, 7.276256830705266], res=[0.0, 0.0, 0.0, 0.0, -0.960071093280348], res_norm=9.601e-01
2025-12-01 13:44:10,255 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,268 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,286 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,298 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,316 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,328 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,346 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,358 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,376 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,388 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,406 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,418 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,434 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,446 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,462 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,475 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,491 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,504 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,520 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,532 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,549 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,561 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,844 - INFO - integration_test - Step 15: MPC solve successful
2025-12-01 13:44:10,855 - INFO - integration_test - Step 15: Computed 10 numeric contouring constraints for visualization (s=3.600)
2025-12-01 13:44:10,856 - DEBUG - integration_test - Step 15: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:10,856 - INFO - integration_test - === Applying control at step 15 ===
2025-12-01 13:44:10,856 - INFO - integration_test -   Control dict from planner: {'a': 7.723005122541822e-07, 'w': -0.4627863969026253}
2025-12-01 13:44:10,856 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:10,856 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:10,857 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:10,857 - INFO - integration_test - Step 15 completed in 0.642s
2025-12-01 13:44:10,883 - INFO - integration_test - Step 16 (contouring until path end)
2025-12-01 13:44:10,884 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.03585173 2.12392733 0.63515512 2.99999999 3.9       ]
2025-12-01 13:44:10,884 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.153m)
2025-12-01 13:44:10,884 - DEBUG - integration_test -   Set spline state to 3.9000
2025-12-01 13:44:10,885 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:10,900 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.036, 2.124), path_start=(0.000, 0.000), dist=3.705m
2025-12-01 13:44:10,901 - WARNING - integration_test - Could not update reference path at step 16: x and y must have the same length
2025-12-01 13:44:10,901 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2025-12-01 13:44:10,903 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:10,905 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:10,905 - INFO - integration_test - Warmstart k=0: x0=3.0358517252212085 , y0=2.1239273282309026 , psi0=0.6351551227773324 , v0=2.9999999912935333 , spline0=3.9000000041215492 , a0=0.0 , w0=0.0
2025-12-01 13:44:10,905 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:10,906 - INFO - integration_test - Dyn residual k=0: pred=[3.2773456259535867, 2.301918045367141, 0.6351551227773324, 2.9999999912935333, 4.200000003250903], ws=[3.2773456259535867, 2.301918045367141, 0.6351551227773324, 2.9999999912935333, 5.22587576437705], res=[0.0, 0.0, 0.0, 0.0, -1.025875761126147], res_norm=1.026e+00
2025-12-01 13:44:10,906 - INFO - integration_test - Dyn residual k=1: pred=[3.518839526685965, 2.479908762503379, 0.6351551227773324, 2.9999999912935333, 5.525875763506403], ws=[3.518839526685965, 2.479908762503379, 0.6351551227773324, 2.9999999912935333, 6.5520146504108805], res=[0.0, 0.0, 0.0, 0.0, -1.0261388869044774], res_norm=1.026e+00
2025-12-01 13:44:10,907 - INFO - integration_test - Dyn residual k=2: pred=[3.760333427418343, 2.6578994796396174, 0.6351551227773324, 2.9999999912935333, 6.852014649540234], ws=[3.760333427418343, 2.6578994796396174, 0.6351551227773324, 2.9999999912935333, 7.879697897831882], res=[0.0, 0.0, 0.0, 0.0, -1.0276832482916483], res_norm=1.028e+00
2025-12-01 13:44:10,923 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,935 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,952 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,964 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:10,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:10,993 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,010 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,022 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,038 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,050 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,066 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,078 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,096 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,109 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,125 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,138 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,155 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,168 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,185 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,198 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:11,215 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:11,227 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,214 - INFO - integration_test - Step 16: MPC solve successful
2025-12-01 13:44:12,225 - INFO - integration_test - Step 16: Computed 10 numeric contouring constraints for visualization (s=3.900)
2025-12-01 13:44:12,226 - DEBUG - integration_test - Step 16: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:12,226 - INFO - integration_test - === Applying control at step 16 ===
2025-12-01 13:44:12,226 - INFO - integration_test -   Control dict from planner: {'a': 3.8698307565907774e-07, 'w': -0.3975194810066401}
2025-12-01 13:44:12,226 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:12,226 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:12,227 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:12,227 - INFO - integration_test - Step 16 completed in 1.344s
2025-12-01 13:44:12,248 - INFO - integration_test - Step 17 (contouring until path end)
2025-12-01 13:44:12,249 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.2808193  2.29707188 0.59540317 3.00000003 4.20000001]
2025-12-01 13:44:12,249 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.317m)
2025-12-01 13:44:12,249 - DEBUG - integration_test -   Set spline state to 4.2000
2025-12-01 13:44:12,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:12,265 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.281, 2.297), path_start=(0.000, 0.000), dist=4.005m
2025-12-01 13:44:12,265 - WARNING - integration_test - Could not update reference path at step 17: x and y must have the same length
2025-12-01 13:44:12,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2025-12-01 13:44:12,269 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:12,270 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:12,270 - INFO - integration_test - Warmstart k=0: x0=3.2808193036685087 , y0=2.2970718785295428 , psi0=0.5954031746766685 , v0=3.0 , spline0=4.2000000071207335 , a0=0.0 , w0=0.0
2025-12-01 13:44:12,270 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:12,272 - INFO - integration_test - Dyn residual k=0: pred=[3.5291960382491547, 2.465324657760839, 0.5954031746766685, 3.0, 4.500000007120733], ws=[3.5291960382491547, 2.465324657760839, 0.5954031746766684, 3.0, 5.555309083181905], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.0553090760611719], res_norm=1.055e+00
2025-12-01 13:44:12,272 - INFO - integration_test - Dyn residual k=1: pred=[3.7775727728298008, 2.633577436992135, 0.5954031746766684, 3.0, 5.855309083181905], ws=[3.7775727728298008, 2.633577436992135, 0.5954031746766684, 3.0, 6.911938234312466], res=[0.0, 0.0, 0.0, 0.0, -1.0566291511305606], res_norm=1.057e+00
2025-12-01 13:44:12,273 - INFO - integration_test - Dyn residual k=2: pred=[4.025949507410447, 2.8018302162234314, 0.5954031746766684, 3.0, 7.211938234312465], ws=[4.025949507410447, 2.8018302162234314, 0.5954031746766684, 3.0, 8.271175587120261], res=[0.0, 0.0, 0.0, 0.0, -1.0592373528077959], res_norm=1.059e+00
2025-12-01 13:44:12,290 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,303 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,322 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,335 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,355 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,368 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,387 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,400 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,419 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,432 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,450 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,462 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,479 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,492 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,508 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,520 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,537 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,548 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,565 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,577 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,594 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,606 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,858 - INFO - integration_test - Step 17: MPC solve successful
2025-12-01 13:44:12,871 - INFO - integration_test - Step 17: Computed 10 numeric contouring constraints for visualization (s=4.200)
2025-12-01 13:44:12,872 - DEBUG - integration_test - Step 17: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:12,872 - INFO - integration_test - === Applying control at step 17 ===
2025-12-01 13:44:12,872 - INFO - integration_test -   Control dict from planner: {'a': -5.5701196506963195e-11, 'w': -0.25087216626576253}
2025-12-01 13:44:12,872 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:12,872 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:12,873 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:12,873 - INFO - integration_test - Step 17 completed in 0.625s
2025-12-01 13:44:12,898 - INFO - integration_test - Step 18 (contouring until path end)
2025-12-01 13:44:12,899 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.53128037 2.46219163 0.57031596 3.00000003 4.50000001]
2025-12-01 13:44:12,899 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.152m)
2025-12-01 13:44:12,899 - DEBUG - integration_test -   Set spline state to 4.5000
2025-12-01 13:44:12,900 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:12,915 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.531, 2.462), path_start=(0.000, 0.000), dist=4.305m
2025-12-01 13:44:12,916 - WARNING - integration_test - Could not update reference path at step 18: x and y must have the same length
2025-12-01 13:44:12,916 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2025-12-01 13:44:12,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:12,920 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:12,920 - INFO - integration_test - Warmstart k=0: x0=3.5312803744668377 , y0=2.4621916340838026 , psi0=0.5703159580500923 , v0=3.0 , spline0=4.5000000101193605 , a0=0.0 , w0=0.0
2025-12-01 13:44:12,920 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:12,921 - INFO - integration_test - Dyn residual k=0: pred=[3.783799504082422, 2.6241610422391317, 0.5703159580500923, 3.0, 4.80000001011936], ws=[3.783799504082422, 2.6241610422391317, 0.5703159580500925, 3.0, 5.968010638661183], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.1680106285418228], res_norm=1.168e+00
2025-12-01 13:44:12,922 - INFO - integration_test - Dyn residual k=1: pred=[4.036318633698007, 2.786130450394461, 0.5703159580500925, 3.0, 6.268010638661183], ws=[4.036318633698007, 2.786130450394461, 0.5703159580500925, 3.0, 7.449448896208816], res=[0.0, 0.0, 0.0, 0.0, -1.181438257547633], res_norm=1.181e+00
2025-12-01 13:44:12,923 - INFO - integration_test - Dyn residual k=2: pred=[4.288837763313591, 2.94809985854979, 0.5703159580500925, 3.0, 7.749448896208816], ws=[4.288837763313591, 2.94809985854979, 0.5703159580500925, 3.0, 8.873247419065287], res=[0.0, 0.0, 0.0, 0.0, -1.1237985228564709], res_norm=1.124e+00
2025-12-01 13:44:12,939 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,951 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,968 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:12,980 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:12,997 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,009 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,026 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,037 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,054 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,065 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,094 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,111 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,123 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,140 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,151 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,169 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,181 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,198 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,210 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,227 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,239 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,527 - INFO - integration_test - Step 18: MPC solve successful
2025-12-01 13:44:13,539 - INFO - integration_test - Step 18: Computed 10 numeric contouring constraints for visualization (s=4.500)
2025-12-01 13:44:13,539 - DEBUG - integration_test - Step 18: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:13,539 - INFO - integration_test - === Applying control at step 18 ===
2025-12-01 13:44:13,539 - INFO - integration_test -   Control dict from planner: {'a': 7.646421311263438e-11, 'w': -0.2700206682182803}
2025-12-01 13:44:13,539 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:13,539 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:13,540 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:13,541 - INFO - integration_test - Step 18 completed in 0.642s
2025-12-01 13:44:13,565 - INFO - integration_test - Step 19 (contouring until path end)
2025-12-01 13:44:13,566 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.78595544 2.6207323  0.54331389 3.00000003 4.80000001]
2025-12-01 13:44:13,566 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.300m)
2025-12-01 13:44:13,566 - DEBUG - integration_test -   Set spline state to 4.8000
2025-12-01 13:44:13,567 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:13,582 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.786, 2.621), path_start=(0.000, 0.000), dist=4.605m
2025-12-01 13:44:13,582 - WARNING - integration_test - Could not update reference path at step 19: x and y must have the same length
2025-12-01 13:44:13,582 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2025-12-01 13:44:13,585 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:13,586 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:13,587 - INFO - integration_test - Warmstart k=0: x0=3.7859554435509666 , y0=2.620732300208677 , psi0=0.5433138912282642 , v0=3.0 , spline0=4.800000013118752 , a0=0.0 , w0=0.0
2025-12-01 13:44:13,587 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:13,588 - INFO - integration_test - Dyn residual k=0: pred=[4.042755498783647, 2.775824955200757, 0.5433138912282642, 3.0, 5.100000013118752], ws=[4.042755498783647, 2.775824955200757, 0.543313891228264, 3.0, 6.295829137042306], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.195829123923554], res_norm=1.196e+00
2025-12-01 13:44:13,588 - INFO - integration_test - Dyn residual k=1: pred=[4.299555554016327, 2.9309176101928367, 0.543313891228264, 3.0, 6.595829137042306], ws=[4.299555554016327, 2.9309176101928367, 0.543313891228264, 3.0, 7.806702532647987], res=[0.0, 0.0, 0.0, 0.0, -1.210873395605681], res_norm=1.211e+00
2025-12-01 13:44:13,589 - INFO - integration_test - Dyn residual k=2: pred=[4.556355609249007, 3.0860102651849166, 0.543313891228264, 3.0, 8.106702532647986], ws=[4.556355609249007, 3.0860102651849166, 0.543313891228264, 3.0, 9.330119171736426], res=[0.0, 0.0, 0.0, 0.0, -1.2234166390884393], res_norm=1.223e+00
2025-12-01 13:44:13,605 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,617 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,633 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,645 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,662 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,674 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,692 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,704 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,721 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,733 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,750 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,762 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,779 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,791 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,808 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,820 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,836 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,848 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,866 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,878 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:13,894 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:13,906 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,215 - INFO - integration_test - Step 19: MPC solve successful
2025-12-01 13:44:14,226 - INFO - integration_test - Step 19: Computed 10 numeric contouring constraints for visualization (s=4.800)
2025-12-01 13:44:14,227 - DEBUG - integration_test - Step 19: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:14,227 - INFO - integration_test - === Applying control at step 19 ===
2025-12-01 13:44:14,227 - INFO - integration_test -   Control dict from planner: {'a': 7.428637601183032e-12, 'w': -0.34873917764399065}
2025-12-01 13:44:14,227 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:14,227 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:14,228 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:14,228 - INFO - integration_test - Step 19 completed in 0.663s
2025-12-01 13:44:14,250 - INFO - integration_test - Step 20 (contouring until path end)
2025-12-01 13:44:14,250 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.04540752 2.77131616 0.50843997 3.00000003 5.10000002]
2025-12-01 13:44:14,251 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.171m)
2025-12-01 13:44:14,251 - DEBUG - integration_test -   Set spline state to 5.1000
2025-12-01 13:44:14,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:14,267 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.045, 2.771), path_start=(0.000, 0.000), dist=4.904m
2025-12-01 13:44:14,267 - WARNING - integration_test - Could not update reference path at step 20: x and y must have the same length
2025-12-01 13:44:14,267 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2025-12-01 13:44:14,270 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:14,272 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:14,272 - INFO - integration_test - Warmstart k=0: x0=4.045407521903025 , y0=2.7713161634690904 , psi0=0.5084399734638652 , v0=3.0 , spline0=5.100000016118218 , a0=0.0 , w0=0.0
2025-12-01 13:44:14,272 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:14,273 - INFO - integration_test - Dyn residual k=0: pred=[4.3074590263444925, 2.9173607081120294, 0.5084399734638652, 3.0, 5.400000016118218], ws=[4.3074590263444925, 2.9173607081120294, 0.5084399734638652, 3.0, 6.709752959145989], res=[0.0, 0.0, 0.0, 0.0, -1.309752943027771], res_norm=1.310e+00
2025-12-01 13:44:14,274 - INFO - integration_test - Dyn residual k=1: pred=[4.56951053078596, 3.0634052527549684, 0.5084399734638652, 3.0, 7.009752959145989], ws=[4.56951053078596, 3.0634052527549684, 0.5084399734638652, 3.0, 8.273858803159289], res=[0.0, 0.0, 0.0, 0.0, -1.2641058440133], res_norm=1.264e+00
2025-12-01 13:44:14,275 - INFO - integration_test - Dyn residual k=2: pred=[4.831562035227428, 3.2094497973979075, 0.5084399734638652, 3.0, 8.57385880315929], ws=[4.831562035227428, 3.2094497973979075, 0.5084399734638652, 3.0, 9.851812370428236], res=[0.0, 0.0, 0.0, 0.0, -1.2779535672689466], res_norm=1.278e+00
2025-12-01 13:44:14,291 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,304 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,323 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,335 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,352 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,364 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,381 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,393 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,410 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,422 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,438 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,450 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,467 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,480 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,496 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,508 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,525 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,536 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,553 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,565 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,582 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,594 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,876 - INFO - integration_test - Step 20: MPC solve successful
2025-12-01 13:44:14,888 - INFO - integration_test - Step 20: Computed 10 numeric contouring constraints for visualization (s=5.100)
2025-12-01 13:44:14,888 - DEBUG - integration_test - Step 20: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:14,888 - INFO - integration_test - === Applying control at step 20 ===
2025-12-01 13:44:14,889 - INFO - integration_test -   Control dict from planner: {'a': -9.88734652277246e-08, 'w': -0.09914175057449638}
2025-12-01 13:44:14,889 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:14,889 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:14,890 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:14,890 - INFO - integration_test - Step 20 completed in 0.641s
2025-12-01 13:44:14,913 - INFO - integration_test - Step 21 (contouring until path end)
2025-12-01 13:44:14,913 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.30817869 2.91605932 0.4985258  3.00000002 5.40000002]
2025-12-01 13:44:14,914 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.296m)
2025-12-01 13:44:14,914 - DEBUG - integration_test -   Set spline state to 5.4000
2025-12-01 13:44:14,914 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:14,929 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.308, 2.916), path_start=(0.000, 0.000), dist=5.202m
2025-12-01 13:44:14,930 - WARNING - integration_test - Could not update reference path at step 21: x and y must have the same length
2025-12-01 13:44:14,930 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2025-12-01 13:44:14,932 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:14,934 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:14,934 - INFO - integration_test - Warmstart k=0: x0=4.308178685343093 , y0=2.9160593152549885 , psi0=0.49852579840641553 , v0=3.0 , spline0=5.400000018128949 , a0=0.0 , w0=0.0
2025-12-01 13:44:14,934 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:14,934 - INFO - integration_test - Dyn residual k=0: pred=[4.571665198717739, 3.0594987006052916, 0.49852579840641553, 3.0, 5.700000018128949], ws=[4.571665198717739, 3.0594987006052916, 0.49852579840641553, 3.0, 7.122338703673908], res=[0.0, 0.0, 0.0, 0.0, -1.4223386855449585], res_norm=1.422e+00
2025-12-01 13:44:14,935 - INFO - integration_test - Dyn residual k=1: pred=[4.835151712092384, 3.2029380859555947, 0.49852579840641553, 3.0, 7.4223387036739075], ws=[4.835151712092384, 3.2029380859555947, 0.49852579840641553, 3.0, 8.809378900253245], res=[0.0, 0.0, 0.0, 0.0, -1.3870401965793375], res_norm=1.387e+00
2025-12-01 13:44:14,936 - INFO - integration_test - Dyn residual k=2: pred=[5.098638225467029, 3.346377471305898, 0.49852579840641553, 3.0, 9.109378900253246], ws=[5.098638225467029, 3.346377471305898, 0.49852579840641553, 3.0, 10.443859067821561], res=[0.0, 0.0, 0.0, 0.0, -1.3344801675683158], res_norm=1.334e+00
2025-12-01 13:44:14,952 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,964 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:14,982 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:14,994 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,010 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,022 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,039 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,050 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,067 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,079 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,096 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,108 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,124 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,136 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,152 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,164 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,181 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,193 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,221 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,238 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,252 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,539 - INFO - integration_test - Step 21: MPC solve successful
2025-12-01 13:44:15,551 - INFO - integration_test - Step 21: Computed 10 numeric contouring constraints for visualization (s=5.400)
2025-12-01 13:44:15,551 - DEBUG - integration_test - Step 21: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:15,551 - INFO - integration_test - === Applying control at step 21 ===
2025-12-01 13:44:15,551 - INFO - integration_test -   Control dict from planner: {'a': 6.588157489444035e-08, 'w': -0.21848411832527556}
2025-12-01 13:44:15,551 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:15,551 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:15,552 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:15,553 - INFO - integration_test - Step 21 completed in 0.639s
2025-12-01 13:44:15,574 - INFO - integration_test - Step 22 (contouring until path end)
2025-12-01 13:44:15,575 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.57321114 3.05660902 0.47667739 3.00000003 5.70000002]
2025-12-01 13:44:15,575 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.199m)
2025-12-01 13:44:15,575 - DEBUG - integration_test -   Set spline state to 5.7000
2025-12-01 13:44:15,576 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:15,591 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.573, 3.057), path_start=(0.000, 0.000), dist=5.501m
2025-12-01 13:44:15,592 - WARNING - integration_test - Could not update reference path at step 22: x and y must have the same length
2025-12-01 13:44:15,592 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2025-12-01 13:44:15,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:15,596 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:15,596 - INFO - integration_test - Warmstart k=0: x0=4.573211137673232 , y0=3.0566090236817964 , psi0=0.476677386573888 , v0=3.0 , spline0=5.700000020798496 , a0=0.0 , w0=0.0
2025-12-01 13:44:15,596 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:15,597 - INFO - integration_test - Dyn residual k=0: pred=[4.839768438936354, 3.1942578709102456, 0.476677386573888, 3.0, 6.000000020798496], ws=[4.839768438936354, 3.1942578709102456, 0.47667738657388803, 3.0, 7.450611646724761], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.450611625926265], res_norm=1.451e+00
2025-12-01 13:44:15,598 - INFO - integration_test - Dyn residual k=1: pred=[5.106325740199477, 3.3319067181386943, 0.47667738657388803, 3.0, 7.750611646724761], ws=[5.106325740199477, 3.3319067181386948, 0.47667738657388803, 3.0, 9.164086976411134], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -1.4134753296863733], res_norm=1.413e+00
2025-12-01 13:44:15,598 - INFO - integration_test - Dyn residual k=2: pred=[5.372883041462599, 3.469555565367144, 0.47667738657388803, 3.0, 9.464086976411135], ws=[5.372883041462599, 3.469555565367144, 0.47667738657388803, 3.0, 10.822900193197333], res=[0.0, 0.0, 0.0, 0.0, -1.3588132167861975], res_norm=1.359e+00
2025-12-01 13:44:15,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,626 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,644 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,656 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,673 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,685 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,702 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,713 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,730 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,742 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,770 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,787 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,799 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,816 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,827 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,844 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,855 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,872 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,884 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:15,901 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:15,913 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,190 - INFO - integration_test - Step 22: MPC solve successful
2025-12-01 13:44:16,202 - INFO - integration_test - Step 22: Computed 10 numeric contouring constraints for visualization (s=5.700)
2025-12-01 13:44:16,203 - DEBUG - integration_test - Step 22: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:16,203 - INFO - integration_test - === Applying control at step 22 ===
2025-12-01 13:44:16,203 - INFO - integration_test -   Control dict from planner: {'a': -1.8836133395566216e-08, 'w': -0.2391755437399914}
2025-12-01 13:44:16,203 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:16,203 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:16,204 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:16,204 - INFO - integration_test - Step 22 completed in 0.630s
2025-12-01 13:44:16,226 - INFO - integration_test - Step 23 (contouring until path end)
2025-12-01 13:44:16,227 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.84138906 3.1910572  0.45275983 3.00000002 6.00000002]
2025-12-01 13:44:16,228 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.417m)
2025-12-01 13:44:16,228 - DEBUG - integration_test -   Set spline state to 6.0000
2025-12-01 13:44:16,228 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:16,243 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.841, 3.191), path_start=(0.000, 0.000), dist=5.798m
2025-12-01 13:44:16,243 - WARNING - integration_test - Could not update reference path at step 23: x and y must have the same length
2025-12-01 13:44:16,243 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2025-12-01 13:44:16,246 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:16,248 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:16,248 - INFO - integration_test - Warmstart k=0: x0=4.8413890614288135 , y0=3.1910572013823457 , psi0=0.45275983219988886 , v0=3.0 , spline0=6.000000023279682 , a0=0.0 , w0=0.0
2025-12-01 13:44:16,248 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:16,249 - INFO - integration_test - Dyn residual k=0: pred=[5.111162034264596, 3.3222918885932518, 0.45275983219988886, 3.0, 6.300000023279682], ws=[5.111162034264596, 3.3222918885932518, 0.4527598321998889, 3.0, 7.863293480972236], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.563293457692554], res_norm=1.563e+00
2025-12-01 13:44:16,249 - INFO - integration_test - Dyn residual k=1: pred=[5.380935007100378, 3.453526575804158, 0.4527598321998889, 3.0, 8.163293480972236], ws=[5.380935007100378, 3.453526575804158, 0.4527598321998889, 3.0, 9.693668324097253], res=[0.0, 0.0, 0.0, 0.0, -1.530374843125017], res_norm=1.530e+00
2025-12-01 13:44:16,250 - INFO - integration_test - Dyn residual k=2: pred=[5.65070797993616, 3.584761263015064, 0.4527598321998889, 3.0, 9.993668324097253], ws=[5.65070797993616, 3.584761263015064, 0.4527598321998889, 3.0, 11.402170411191758], res=[0.0, 0.0, 0.0, 0.0, -1.4085020870945044], res_norm=1.409e+00
2025-12-01 13:44:16,267 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,279 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,297 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,308 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,326 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,338 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,354 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,366 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,383 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,395 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,412 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,423 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,440 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,452 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,468 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,480 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,498 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,509 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,526 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,538 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,555 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:16,568 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:16,902 - INFO - integration_test - Step 23: MPC solve successful
2025-12-01 13:44:16,918 - INFO - integration_test - Step 23: Computed 10 numeric contouring constraints for visualization (s=6.000)
2025-12-01 13:44:16,918 - DEBUG - integration_test - Step 23: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:16,919 - INFO - integration_test - === Applying control at step 23 ===
2025-12-01 13:44:16,919 - INFO - integration_test -   Control dict from planner: {'a': 3.458076786338489e-08, 'w': -0.25357868215928575}
2025-12-01 13:44:16,919 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:16,919 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:16,920 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:16,920 - INFO - integration_test - Step 23 completed in 0.694s
2025-12-01 13:44:16,945 - INFO - integration_test - Step 24 (contouring until path end)
2025-12-01 13:44:16,946 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.11279695 3.31885758 0.42740196 3.00000003 6.30000003]
2025-12-01 13:44:16,947 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.361m)
2025-12-01 13:44:16,947 - DEBUG - integration_test -   Set spline state to 6.3000
2025-12-01 13:44:16,947 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:16,963 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.113, 3.319), path_start=(0.000, 0.000), dist=6.096m
2025-12-01 13:44:16,964 - WARNING - integration_test - Could not update reference path at step 24: x and y must have the same length
2025-12-01 13:44:16,964 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2025-12-01 13:44:16,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:16,968 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:16,968 - INFO - integration_test - Warmstart k=0: x0=5.112796952791068 , y0=3.3188575752736966 , psi0=0.4274019639839603 , v0=3.0 , spline0=6.300000026106676 , a0=0.0 , w0=0.0
2025-12-01 13:44:16,968 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:16,969 - INFO - integration_test - Dyn residual k=0: pred=[5.385810670636814, 3.4432099370045592, 0.4274019639839603, 3.0, 6.600000026106676], ws=[5.385810670636814, 3.4432099370045592, 0.42740196398396035, 3.0, 8.189872438153257], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.5898724120465815], res_norm=1.590e+00
2025-12-01 13:44:16,970 - INFO - integration_test - Dyn residual k=1: pred=[5.65882438848256, 3.567562298735422, 0.42740196398396035, 3.0, 8.489872438153258], ws=[5.65882438848256, 3.567562298735422, 0.42740196398396035, 3.0, 10.044722137481955], res=[0.0, 0.0, 0.0, 0.0, -1.554849699328697], res_norm=1.555e+00
2025-12-01 13:44:16,971 - INFO - integration_test - Dyn residual k=2: pred=[5.931838106328306, 3.6919146604662845, 0.42740196398396035, 3.0, 10.344722137481956], ws=[5.931838106328306, 3.6919146604662845, 0.42740196398396035, 3.0, 11.839796929402002], res=[0.0, 0.0, 0.0, 0.0, -1.4950747919200467], res_norm=1.495e+00
2025-12-01 13:44:16,987 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,000 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,017 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,030 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,047 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,059 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,076 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,088 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,106 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,118 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,135 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,147 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,164 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,176 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,194 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,207 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,224 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,236 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,253 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,266 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,283 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,296 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,592 - INFO - integration_test - Step 24: MPC solve successful
2025-12-01 13:44:17,605 - INFO - integration_test - Step 24: Computed 10 numeric contouring constraints for visualization (s=6.300)
2025-12-01 13:44:17,605 - DEBUG - integration_test - Step 24: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:17,606 - INFO - integration_test - === Applying control at step 24 ===
2025-12-01 13:44:17,606 - INFO - integration_test -   Control dict from planner: {'a': 1.1306625710374434e-08, 'w': -0.2331267329879707}
2025-12-01 13:44:17,606 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:17,606 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:17,607 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:17,607 - INFO - integration_test - Step 24 completed in 0.661s
2025-12-01 13:44:17,629 - INFO - integration_test - Step 25 (contouring until path end)
2025-12-01 13:44:17,630 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.38723537 3.44001648 0.40408929 3.00000003 6.60000003]
2025-12-01 13:44:17,630 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.231m)
2025-12-01 13:44:17,630 - DEBUG - integration_test -   Set spline state to 6.6000
2025-12-01 13:44:17,631 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:17,646 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.387, 3.440), path_start=(0.000, 0.000), dist=6.392m
2025-12-01 13:44:17,647 - WARNING - integration_test - Could not update reference path at step 25: x and y must have the same length
2025-12-01 13:44:17,647 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2025-12-01 13:44:17,650 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:17,651 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:17,651 - INFO - integration_test - Warmstart k=0: x0=5.387235371703857 , y0=3.4400164789558683 , psi0=0.40408929068516325 , v0=3.0 , spline0=6.600000029046735 , a0=0.0 , w0=0.0
2025-12-01 13:44:17,651 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:17,652 - INFO - integration_test - Dyn residual k=0: pred=[5.663073627460951, 3.557970947548132, 0.40408929068516325, 3.0, 6.900000029046735], ws=[5.663073627460951, 3.557970947548132, 0.4040892906851634, 3.0, 8.601681963836107], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -1.701681934789372], res_norm=1.702e+00
2025-12-01 13:44:17,653 - INFO - integration_test - Dyn residual k=1: pred=[5.938911883218046, 3.675925416140396, 0.4040892906851634, 3.0, 8.901681963836108], ws=[5.938911883218046, 3.675925416140396, 0.4040892906851634, 3.0, 10.502385842671499], res=[0.0, 0.0, 0.0, 0.0, -1.6007038788353913], res_norm=1.601e+00
2025-12-01 13:44:17,654 - INFO - integration_test - Dyn residual k=2: pred=[6.214750138975141, 3.7938798847326596, 0.4040892906851634, 3.0, 10.8023858426715], ws=[6.214750138975141, 3.7938798847326596, 0.4040892906851634, 3.0, 12.340744697385679], res=[0.0, 0.0, 0.0, 0.0, -1.538358854714179], res_norm=1.538e+00
2025-12-01 13:44:17,670 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,682 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,700 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,713 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,734 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,749 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,770 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,784 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,803 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,816 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,847 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,868 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,883 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,903 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,918 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,938 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,953 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:17,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:17,989 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,009 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,024 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,635 - INFO - integration_test - Step 25: MPC solve successful
2025-12-01 13:44:18,646 - INFO - integration_test - Step 25: Computed 10 numeric contouring constraints for visualization (s=6.600)
2025-12-01 13:44:18,646 - DEBUG - integration_test - Step 25: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:18,646 - INFO - integration_test - === Applying control at step 25 ===
2025-12-01 13:44:18,646 - INFO - integration_test -   Control dict from planner: {'a': 2.42817188233446e-09, 'w': -0.2692258105883523}
2025-12-01 13:44:18,646 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:18,646 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:18,647 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:18,647 - INFO - integration_test - Step 25 completed in 1.018s
2025-12-01 13:44:18,670 - INFO - integration_test - Step 26 (contouring until path end)
2025-12-01 13:44:18,671 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.66462803 3.55424379 0.37716671 3.00000003 6.90000003]
2025-12-01 13:44:18,672 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.383m)
2025-12-01 13:44:18,672 - DEBUG - integration_test -   Set spline state to 6.9000
2025-12-01 13:44:18,672 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:18,688 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.665, 3.554), path_start=(0.000, 0.000), dist=6.687m
2025-12-01 13:44:18,688 - WARNING - integration_test - Could not update reference path at step 26: x and y must have the same length
2025-12-01 13:44:18,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2025-12-01 13:44:18,691 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:18,692 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:18,692 - INFO - integration_test - Warmstart k=0: x0=5.664628032486894 , y0=3.5542437851869733 , psi0=0.37716670962632803 , v0=3.0 , spline0=6.900000032011077 , a0=0.0 , w0=0.0
2025-12-01 13:44:18,692 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:18,693 - INFO - integration_test - Dyn residual k=0: pred=[5.943541582124306, 3.664730127459034, 0.37716670962632803, 3.0, 7.200000032011077], ws=[5.943541582124306, 3.664730127459034, 0.37716670962632826, 3.0, 8.926536815749847], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.7265367837387702], res_norm=1.727e+00
2025-12-01 13:44:18,694 - INFO - integration_test - Dyn residual k=1: pred=[6.222455131761718, 3.775216469731095, 0.37716670962632826, 3.0, 9.226536815749848], ws=[6.222455131761718, 3.775216469731095, 0.37716670962632826, 3.0, 10.911906085567479], res=[0.0, 0.0, 0.0, 0.0, -1.685369269817631], res_norm=1.685e+00
2025-12-01 13:44:18,694 - INFO - integration_test - Dyn residual k=2: pred=[6.50136868139913, 3.8857028120031556, 0.37716670962632826, 3.0, 11.21190608556748], ws=[6.50136868139913, 3.8857028120031556, 0.37716670962632826, 3.0, 12.76929277084236], res=[0.0, 0.0, 0.0, 0.0, -1.5573866852748814], res_norm=1.557e+00
2025-12-01 13:44:18,711 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,724 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,741 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,753 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,771 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,783 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,803 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,816 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,835 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,848 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,866 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,880 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,898 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,911 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,930 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,944 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,963 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:18,977 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:18,996 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,010 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,029 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,042 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,329 - INFO - integration_test - Step 26: MPC solve successful
2025-12-01 13:44:19,342 - INFO - integration_test - Step 26: Computed 10 numeric contouring constraints for visualization (s=6.900)
2025-12-01 13:44:19,342 - DEBUG - integration_test - Step 26: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:19,342 - INFO - integration_test - === Applying control at step 26 ===
2025-12-01 13:44:19,342 - INFO - integration_test -   Control dict from planner: {'a': 2.365677086536999e-09, 'w': -0.23315718662736473}
2025-12-01 13:44:19,342 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:19,342 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:19,343 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:19,344 - INFO - integration_test - Step 26 completed in 0.673s
2025-12-01 13:44:19,367 - INFO - integration_test - Step 27 (contouring until path end)
2025-12-01 13:44:19,368 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.94480429 3.66146873 0.35385099 3.00000003 7.20000003]
2025-12-01 13:44:19,368 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.263m)
2025-12-01 13:44:19,368 - DEBUG - integration_test -   Set spline state to 7.2000
2025-12-01 13:44:19,369 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:19,384 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.945, 3.661), path_start=(0.000, 0.000), dist=6.982m
2025-12-01 13:44:19,385 - WARNING - integration_test - Could not update reference path at step 27: x and y must have the same length
2025-12-01 13:44:19,385 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2025-12-01 13:44:19,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:19,390 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:19,390 - INFO - integration_test - Warmstart k=0: x0=5.944804290881837 , y0=3.6614687306952636 , psi0=0.35385099096359157 , v0=3.0 , spline0=7.200000034999075 , a0=0.0 , w0=0.0
2025-12-01 13:44:19,390 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:19,391 - INFO - integration_test - Dyn residual k=0: pred=[6.22621786715729, 3.7654225622160866, 0.35385099096359157, 3.0, 7.500000034999075], ws=[6.22621786715729, 3.7654225622160866, 0.3538509909635916, 3.0, 9.336205377070897], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -1.836205342071822], res_norm=1.836e+00
2025-12-01 13:44:19,392 - INFO - integration_test - Dyn residual k=1: pred=[6.507631443432743, 3.8693763937369097, 0.3538509909635916, 3.0, 9.636205377070898], ws=[6.507631443432743, 3.8693763937369097, 0.3538509909635916, 3.0, 11.363435159025315], res=[0.0, 0.0, 0.0, 0.0, -1.7272297819544171], res_norm=1.727e+00
2025-12-01 13:44:19,393 - INFO - integration_test - Dyn residual k=2: pred=[6.789045019708196, 3.9733302252577327, 0.3538509909635916, 3.0, 11.663435159025315], ws=[6.789045019708196, 3.9733302252577327, 0.3538509909635916, 3.0, 13.261800521984231], res=[0.0, 0.0, 0.0, 0.0, -1.5983653629589156], res_norm=1.598e+00
2025-12-01 13:44:19,409 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,421 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,439 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,451 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,469 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,482 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,499 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,511 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,528 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,540 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,556 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,569 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,587 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,599 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,616 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,628 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,644 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,657 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,674 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,687 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:19,703 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:19,715 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,017 - INFO - integration_test - Step 27: MPC solve successful
2025-12-01 13:44:20,028 - INFO - integration_test - Step 27: Computed 10 numeric contouring constraints for visualization (s=7.200)
2025-12-01 13:44:20,029 - DEBUG - integration_test - Step 27: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:20,029 - INFO - integration_test - === Applying control at step 27 ===
2025-12-01 13:44:20,029 - INFO - integration_test -   Control dict from planner: {'a': -2.537496813086213e-09, 'w': -0.2782200033576688}
2025-12-01 13:44:20,029 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:20,029 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:20,030 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:20,030 - INFO - integration_test - Step 27 completed in 0.663s
2025-12-01 13:44:20,052 - INFO - integration_test - Step 28 (contouring until path end)
2025-12-01 13:44:20,052 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.22762757 3.76149466 0.32602899 3.00000003 7.50000004]
2025-12-01 13:44:20,053 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.411m)
2025-12-01 13:44:20,053 - DEBUG - integration_test -   Set spline state to 7.5000
2025-12-01 13:44:20,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:20,069 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.228, 3.761), path_start=(0.000, 0.000), dist=7.275m
2025-12-01 13:44:20,069 - WARNING - integration_test - Could not update reference path at step 28: x and y must have the same length
2025-12-01 13:44:20,070 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2025-12-01 13:44:20,072 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:20,074 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:20,074 - INFO - integration_test - Warmstart k=0: x0=6.2276275745759415 , y0=3.76149466080853 , psi0=0.3260289906278247 , v0=3.0 , spline0=7.500000037961698 , a0=0.0 , w0=0.0
2025-12-01 13:44:20,074 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:20,075 - INFO - integration_test - Dyn residual k=0: pred=[6.51182407228441, 3.857579782915129, 0.3260289906278247, 3.0, 7.800000037961698], ws=[6.511824072284411, 3.857579782915129, 0.32602899062782464, 3.0, 9.659325801870452], res=[-8.881784197001252e-16, 0.0, 5.551115123125783e-17, 0.0, -1.8593257639087541], res_norm=1.859e+00
2025-12-01 13:44:20,076 - INFO - integration_test - Dyn residual k=1: pred=[6.79602056999288, 3.953664905021728, 0.32602899062782464, 3.0, 9.959325801870452], ws=[6.796020569992881, 3.953664905021728, 0.32602899062782464, 3.0, 11.705413608802374], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, -1.7460878069319214], res_norm=1.746e+00
2025-12-01 13:44:20,076 - INFO - integration_test - Dyn residual k=2: pred=[7.08021706770135, 4.049750027128327, 0.32602899062782464, 3.0, 12.005413608802375], ws=[7.0802170677013505, 4.049750027128327, 0.32602899062782464, 3.0, 13.687921364021724], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, -1.6825077552193495], res_norm=1.683e+00
2025-12-01 13:44:20,093 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,105 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,134 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,164 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,181 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,194 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,211 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,224 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,241 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,253 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,270 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,282 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,300 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,312 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,329 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,342 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,360 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,373 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,390 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,402 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,662 - INFO - integration_test - Step 28: MPC solve successful
2025-12-01 13:44:20,674 - INFO - integration_test - Step 28: Computed 10 numeric contouring constraints for visualization (s=7.500)
2025-12-01 13:44:20,675 - DEBUG - integration_test - Step 28: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:20,675 - INFO - integration_test - === Applying control at step 28 ===
2025-12-01 13:44:20,675 - INFO - integration_test -   Control dict from planner: {'a': -8.11451648628571e-08, 'w': -0.19486312220198282}
2025-12-01 13:44:20,675 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:20,675 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:20,676 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:20,677 - INFO - integration_test - Step 28 completed in 0.625s
2025-12-01 13:44:20,700 - INFO - integration_test - Step 29 (contouring until path end)
2025-12-01 13:44:20,701 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.51274223 3.85480482 0.30654268 3.00000002 7.80000004]
2025-12-01 13:44:20,701 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.294m)
2025-12-01 13:44:20,701 - DEBUG - integration_test -   Set spline state to 7.8000
2025-12-01 13:44:20,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:20,717 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.513, 3.855), path_start=(0.000, 0.000), dist=7.568m
2025-12-01 13:44:20,718 - WARNING - integration_test - Could not update reference path at step 29: x and y must have the same length
2025-12-01 13:44:20,718 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2025-12-01 13:44:20,720 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:20,722 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:20,722 - INFO - integration_test - Warmstart k=0: x0=6.51274223211457 , y0=3.85480481975732 , psi0=0.3065426784076264 , v0=3.0 , spline0=7.800000040112869 , a0=0.0 , w0=0.0
2025-12-01 13:44:20,722 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:20,723 - INFO - integration_test - Dyn residual k=0: pred=[6.798757000698019, 3.945334108676189, 0.3065426784076264, 3.0, 8.10000004011287], ws=[6.798757000698019, 3.945334108676189, 0.3065426784076264, 3.0, 10.065420196402865], res=[0.0, 0.0, 0.0, 0.0, -1.965420156289996], res_norm=1.965e+00
2025-12-01 13:44:20,724 - INFO - integration_test - Dyn residual k=1: pred=[7.084771769281468, 4.035863397595057, 0.3065426784076264, 3.0, 10.365420196402866], ws=[7.084771769281468, 4.035863397595057, 0.3065426784076264, 3.0, 12.208341136935395], res=[0.0, 0.0, 0.0, 0.0, -1.8429209405325295], res_norm=1.843e+00
2025-12-01 13:44:20,725 - INFO - integration_test - Dyn residual k=2: pred=[7.370786537864917, 4.126392686513926, 0.3065426784076264, 3.0, 12.508341136935396], ws=[7.370786537864917, 4.126392686513926, 0.3065426784076264, 3.0, 14.231650560362535], res=[0.0, 0.0, 0.0, 0.0, -1.723309423427139], res_norm=1.723e+00
2025-12-01 13:44:20,741 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,753 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,770 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,783 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,800 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,812 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,829 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,841 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,857 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,870 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,888 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,901 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,918 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,930 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,946 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,959 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:20,976 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:20,988 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,006 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,018 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,035 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,048 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,381 - INFO - integration_test - Step 29: MPC solve successful
2025-12-01 13:44:21,392 - INFO - integration_test - Step 29: Computed 10 numeric contouring constraints for visualization (s=7.800)
2025-12-01 13:44:21,393 - DEBUG - integration_test - Step 29: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:21,393 - INFO - integration_test - === Applying control at step 29 ===
2025-12-01 13:44:21,393 - INFO - integration_test -   Control dict from planner: {'a': 5.4658350642319395e-08, 'w': -0.37592965453759164}
2025-12-01 13:44:21,393 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:21,393 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:21,394 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:21,394 - INFO - integration_test - Step 29 completed in 0.694s
2025-12-01 13:44:21,417 - INFO - integration_test - Step 30 (contouring until path end)
2025-12-01 13:44:21,417 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[6.80039107 3.93993735 0.26894971 3.00000003 8.10000004]
2025-12-01 13:44:21,418 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.323m)
2025-12-01 13:44:21,418 - DEBUG - integration_test -   Set spline state to 8.1000
2025-12-01 13:44:21,418 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:21,433 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(6.800, 3.940), path_start=(0.000, 0.000), dist=7.859m
2025-12-01 13:44:21,434 - WARNING - integration_test - Could not update reference path at step 30: x and y must have the same length
2025-12-01 13:44:21,434 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2025-12-01 13:44:21,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:21,438 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:21,438 - INFO - integration_test - Warmstart k=0: x0=6.800391072315663 , y0=3.939937349243382 , psi0=0.2689497129538672 , v0=3.0 , spline0=8.100000042810624 , a0=0.0 , w0=0.0
2025-12-01 13:44:21,438 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:21,439 - INFO - integration_test - Dyn residual k=0: pred=[7.089606225111051, 4.019653065344665, 0.2689497129538672, 3.0, 8.400000042810625], ws=[7.089606225111051, 4.019653065344665, 0.26894971295386716, 3.0, 10.386816983033855], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -1.98681694022323], res_norm=1.987e+00
2025-12-01 13:44:21,440 - INFO - integration_test - Dyn residual k=1: pred=[7.37882137790644, 4.099368781445948, 0.26894971295386716, 3.0, 10.686816983033856], ws=[7.37882137790644, 4.099368781445948, 0.26894971295386716, 3.0, 12.54716560571469], res=[0.0, 0.0, 0.0, 0.0, -1.860348622680835], res_norm=1.860e+00
2025-12-01 13:44:21,440 - INFO - integration_test - Dyn residual k=2: pred=[7.668036530701828, 4.179084497547231, 0.26894971295386716, 3.0, 12.847165605714691], ws=[7.668036530701828, 4.179084497547231, 0.26894971295386716, 3.0, 14.589306302828103], res=[0.0, 0.0, 0.0, 0.0, -1.7421406971134115], res_norm=1.742e+00
2025-12-01 13:44:21,456 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,469 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,488 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,500 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,517 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,529 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,545 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,557 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,574 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,587 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,604 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,615 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,632 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,644 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,661 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,673 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,690 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,702 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,719 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,731 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:21,747 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:21,759 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,073 - INFO - integration_test - Step 30: MPC solve successful
2025-12-01 13:44:22,084 - INFO - integration_test - Step 30: Computed 10 numeric contouring constraints for visualization (s=8.100)
2025-12-01 13:44:22,084 - DEBUG - integration_test - Step 30: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:22,084 - INFO - integration_test - === Applying control at step 30 ===
2025-12-01 13:44:22,084 - INFO - integration_test -   Control dict from planner: {'a': 1.71382772413194e-08, 'w': -0.2326852076700872}
2025-12-01 13:44:22,084 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:22,084 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:22,085 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:22,086 - INFO - integration_test - Step 30 completed in 0.669s
2025-12-01 13:44:22,106 - INFO - integration_test - Step 31 (contouring until path end)
2025-12-01 13:44:22,108 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.09050752 4.01628122 0.24568119 3.00000003 8.40000005]
2025-12-01 13:44:22,108 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.395m)
2025-12-01 13:44:22,108 - DEBUG - integration_test -   Set spline state to 8.4000
2025-12-01 13:44:22,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:22,124 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.091, 4.016), path_start=(0.000, 0.000), dist=8.149m
2025-12-01 13:44:22,124 - WARNING - integration_test - Could not update reference path at step 31: x and y must have the same length
2025-12-01 13:44:22,124 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2025-12-01 13:44:22,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:22,129 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:22,129 - INFO - integration_test - Warmstart k=0: x0=7.090507522085902 , y0=4.016281220339037 , psi0=0.2456811921868585 , v0=3.0 , spline0=8.400000045679763 , a0=0.0 , w0=0.0
2025-12-01 13:44:22,129 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:22,130 - INFO - integration_test - Dyn residual k=0: pred=[7.381499083814658, 4.089246355867313, 0.2456811921868585, 3.0, 8.700000045679763], ws=[7.381499083814658, 4.089246355867313, 0.2456811921868587, 3.0, 10.788024707150527], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -2.0880246614707634], res_norm=2.088e+00
2025-12-01 13:44:22,130 - INFO - integration_test - Dyn residual k=1: pred=[7.672490645543414, 4.162211491395588, 0.2456811921868587, 3.0, 11.088024707150527], ws=[7.672490645543414, 4.162211491395588, 0.2456811921868587, 3.0, 12.98382956910056], res=[0.0, 0.0, 0.0, 0.0, -1.8958048619500332], res_norm=1.896e+00
2025-12-01 13:44:22,131 - INFO - integration_test - Dyn residual k=2: pred=[7.96348220727217, 4.235176626923864, 0.2456811921868587, 3.0, 13.283829569100561], ws=[7.96348220727217, 4.235176626923864, 0.2456811921868587, 3.0, 15.068739830351383], res=[0.0, 0.0, 0.0, 0.0, -1.7849102612508219], res_norm=1.785e+00
2025-12-01 13:44:22,147 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,159 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,189 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,207 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,219 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,235 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,247 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,263 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,275 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,293 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,306 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,322 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,334 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,351 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,363 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,380 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,392 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,409 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,421 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,438 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,450 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,849 - INFO - integration_test - Step 31: MPC solve successful
2025-12-01 13:44:22,860 - INFO - integration_test - Step 31: Computed 10 numeric contouring constraints for visualization (s=8.400)
2025-12-01 13:44:22,860 - DEBUG - integration_test - Step 31: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:22,860 - INFO - integration_test - === Applying control at step 31 ===
2025-12-01 13:44:22,860 - INFO - integration_test -   Control dict from planner: {'a': -5.0858875835863774e-08, 'w': -0.28064833308248105}
2025-12-01 13:44:22,860 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:22,860 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:22,861 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:22,862 - INFO - integration_test - Step 31 completed in 0.754s
2025-12-01 13:44:22,886 - INFO - integration_test - Step 32 (contouring until path end)
2025-12-01 13:44:22,887 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.3824847  4.08515373 0.21761636 3.00000002 8.70000005]
2025-12-01 13:44:22,888 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.351m)
2025-12-01 13:44:22,888 - DEBUG - integration_test -   Set spline state to 8.7000
2025-12-01 13:44:22,888 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:22,903 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.382, 4.085), path_start=(0.000, 0.000), dist=8.437m
2025-12-01 13:44:22,903 - WARNING - integration_test - Could not update reference path at step 32: x and y must have the same length
2025-12-01 13:44:22,903 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2025-12-01 13:44:22,906 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:22,907 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:22,907 - INFO - integration_test - Warmstart k=0: x0=7.382484698724377 , y0=4.085153731716037 , psi0=0.2176163588786104 , v0=3.0 , spline0=8.700000048040312 , a0=0.0 , w0=0.0
2025-12-01 13:44:22,907 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:22,908 - INFO - integration_test - Dyn residual k=0: pred=[7.675409155987152, 4.149924576525321, 0.2176163588786104, 3.0, 9.000000048040313], ws=[7.675409155987152, 4.149924576525321, 0.21761635887861042, 3.0, 11.107767775985424], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, -2.1077677279451112], res_norm=2.108e+00
2025-12-01 13:44:22,909 - INFO - integration_test - Dyn residual k=1: pred=[7.968333613249928, 4.214695421334605, 0.21761635887861042, 3.0, 11.407767775985425], ws=[7.968333613249928, 4.214695421334605, 0.21761635887861042, 3.0, 13.37712346796028], res=[0.0, 0.0, 0.0, 0.0, -1.9693556919748545], res_norm=1.969e+00
2025-12-01 13:44:22,910 - INFO - integration_test - Dyn residual k=2: pred=[8.261258070512703, 4.279466266143889, 0.21761635887861042, 3.0, 13.67712346796028], ws=[8.261258070512703, 4.279466266143889, 0.21761635887861042, 3.0, 15.557546082714806], res=[0.0, 0.0, 0.0, 0.0, -1.8804226147545258], res_norm=1.880e+00
2025-12-01 13:44:22,926 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,938 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,955 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,967 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:22,984 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:22,996 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,013 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,025 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,042 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,054 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,082 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,099 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,111 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,128 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,140 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,156 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,168 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,186 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,198 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,214 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,226 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,628 - INFO - integration_test - Step 32: MPC solve successful
2025-12-01 13:44:23,639 - INFO - integration_test - Step 32: Computed 10 numeric contouring constraints for visualization (s=8.700)
2025-12-01 13:44:23,639 - DEBUG - integration_test - Step 32: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:23,640 - INFO - integration_test - === Applying control at step 32 ===
2025-12-01 13:44:23,640 - INFO - integration_test -   Control dict from planner: {'a': 7.527669214924476e-09, 'w': -0.06165677129271574}
2025-12-01 13:44:23,640 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:23,640 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:23,641 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:23,641 - INFO - integration_test - Step 32 completed in 0.754s
2025-12-01 13:44:23,662 - INFO - integration_test - Step 33 (contouring until path end)
2025-12-01 13:44:23,664 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.67560698 4.14902113 0.21145068 3.00000002 9.00000005]
2025-12-01 13:44:23,665 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.426m)
2025-12-01 13:44:23,665 - DEBUG - integration_test -   Set spline state to 9.0000
2025-12-01 13:44:23,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:23,680 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.676, 4.149), path_start=(0.000, 0.000), dist=8.725m
2025-12-01 13:44:23,680 - WARNING - integration_test - Could not update reference path at step 33: x and y must have the same length
2025-12-01 13:44:23,680 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2025-12-01 13:44:23,684 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:23,685 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:23,685 - INFO - integration_test - Warmstart k=0: x0=7.675606979811127 , y0=4.149021130700587 , psi0=0.21145068174933881 , v0=3.0 , spline0=9.000000050476139 , a0=0.0 , w0=0.0
2025-12-01 13:44:23,685 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:23,686 - INFO - integration_test - Dyn residual k=0: pred=[7.968925222831979, 4.211984678179743, 0.21145068174933881, 3.0, 9.30000005047614], ws=[7.968925222831979, 4.211984678179743, 0.2114506817493389, 3.0, 11.503314917229993], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, -2.2033148667538534], res_norm=2.203e+00
2025-12-01 13:44:23,687 - INFO - integration_test - Dyn residual k=1: pred=[8.262243465852832, 4.274948225658899, 0.2114506817493389, 3.0, 11.803314917229994], ws=[8.262243465852832, 4.274948225658899, 0.2114506817493389, 3.0, 13.80740631125479], res=[0.0, 0.0, 0.0, 0.0, -2.0040913940247957], res_norm=2.004e+00
2025-12-01 13:44:23,688 - INFO - integration_test - Dyn residual k=2: pred=[8.555561708873684, 4.337911773138055, 0.2114506817493389, 3.0, 14.10740631125479], ws=[8.555561708873684, 4.337911773138055, 0.2114506817493389, 3.0, 16.03593852866415], res=[0.0, 0.0, 0.0, 0.0, -1.9285322174093604], res_norm=1.929e+00
2025-12-01 13:44:23,704 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,716 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,733 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,745 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,763 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,775 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,792 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,804 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,821 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,833 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,849 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,861 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,878 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,891 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,907 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,919 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,936 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,947 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,965 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:23,977 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:23,994 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,006 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,385 - INFO - integration_test - Step 33: MPC solve successful
2025-12-01 13:44:24,395 - INFO - integration_test - Step 33: Computed 10 numeric contouring constraints for visualization (s=9.000)
2025-12-01 13:44:24,396 - DEBUG - integration_test - Step 33: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:24,396 - INFO - integration_test - === Applying control at step 33 ===
2025-12-01 13:44:24,396 - INFO - integration_test -   Control dict from planner: {'a': -1.011958787134665e-07, 'w': -0.5006512908893781}
2025-12-01 13:44:24,396 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:24,396 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:24,397 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:24,397 - INFO - integration_test - Step 33 completed in 0.734s
2025-12-01 13:44:24,420 - INFO - integration_test - Step 34 (contouring until path end)
2025-12-01 13:44:24,421 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[7.97037852 4.2046174  0.16138555 3.00000001 9.30000005]
2025-12-01 13:44:24,421 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.371m)
2025-12-01 13:44:24,421 - DEBUG - integration_test -   Set spline state to 9.3000
2025-12-01 13:44:24,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:24,437 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(7.970, 4.205), path_start=(0.000, 0.000), dist=9.011m
2025-12-01 13:44:24,437 - WARNING - integration_test - Could not update reference path at step 34: x and y must have the same length
2025-12-01 13:44:24,437 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2025-12-01 13:44:24,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:24,442 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:24,442 - INFO - integration_test - Warmstart k=0: x0=7.97037851606729 , y0=4.204617404455357 , psi0=0.161385552660401 , v0=3.0 , spline0=9.300000051900007 , a0=0.0 , w0=0.0
2025-12-01 13:44:24,442 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:24,443 - INFO - integration_test - Dyn residual k=0: pred=[8.266480193686354, 4.252823177047195, 0.161385552660401, 3.0, 9.600000051900007], ws=[8.266480193686354, 4.252823177047195, 0.1613855526604011, 3.0, 11.821597896160004], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.221597844259996], res_norm=2.222e+00
2025-12-01 13:44:24,443 - INFO - integration_test - Dyn residual k=1: pred=[8.562581871305417, 4.301028949639033, 0.1613855526604011, 3.0, 12.121597896160004], ws=[8.562581871305417, 4.301028949639033, 0.1613855526604011, 3.0, 14.141844514418842], res=[0.0, 0.0, 0.0, 0.0, -2.020246618258838], res_norm=2.020e+00
2025-12-01 13:44:24,444 - INFO - integration_test - Dyn residual k=2: pred=[8.85868354892448, 4.349234722230871, 0.1613855526604011, 3.0, 14.441844514418843], ws=[8.85868354892448, 4.349234722230871, 0.1613855526604011, 3.0, 16.392386134046674], res=[0.0, 0.0, 0.0, 0.0, -1.9505416196278311], res_norm=1.951e+00
2025-12-01 13:44:24,460 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,472 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,490 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,502 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,519 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,531 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,549 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,561 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,590 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,607 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,619 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,635 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,647 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,664 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,676 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,693 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,706 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,723 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,735 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:24,752 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:24,764 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,167 - INFO - integration_test - Step 34: MPC solve successful
2025-12-01 13:44:25,179 - INFO - integration_test - Step 34: Computed 10 numeric contouring constraints for visualization (s=9.300)
2025-12-01 13:44:25,179 - DEBUG - integration_test - Step 34: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:25,179 - INFO - integration_test - === Applying control at step 34 ===
2025-12-01 13:44:25,179 - INFO - integration_test -   Control dict from planner: {'a': 3.897320629494891e-08, 'w': -0.21827308705745108}
2025-12-01 13:44:25,179 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:25,179 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:25,180 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:25,181 - INFO - integration_test - Step 34 completed in 0.760s
2025-12-01 13:44:25,205 - INFO - integration_test - Step 35 (contouring until path end)
2025-12-01 13:44:25,206 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.26698276 4.24958793 0.13955824 3.00000002 9.60000005]
2025-12-01 13:44:25,206 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.456m)
2025-12-01 13:44:25,206 - DEBUG - integration_test -   Set spline state to 9.6000
2025-12-01 13:44:25,207 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:25,222 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.267, 4.250), path_start=(0.000, 0.000), dist=9.295m
2025-12-01 13:44:25,222 - WARNING - integration_test - Could not update reference path at step 35: x and y must have the same length
2025-12-01 13:44:25,223 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2025-12-01 13:44:25,225 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:25,227 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:25,227 - INFO - integration_test - Warmstart k=0: x0=8.26698276409989 , y0=4.249587926529377 , psi0=0.13955824395465588 , v0=3.0 , spline0=9.600000053713606 , a0=0.0 , w0=0.0
2025-12-01 13:44:25,227 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:25,228 - INFO - integration_test - Dyn residual k=0: pred=[8.564066027181564, 4.291319626671417, 0.13955824395465588, 3.0, 9.900000053713606], ws=[8.564066027181564, 4.291319626671417, 0.13955824395465566, 3.0, 12.138260347025025], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.238260293311418], res_norm=2.238e+00
2025-12-01 13:44:25,229 - INFO - integration_test - Dyn residual k=1: pred=[8.861149290263238, 4.3330513268134565, 0.13955824395465566, 3.0, 12.438260347025025], ws=[8.861149290263238, 4.3330513268134565, 0.13955824395465566, 3.0, 14.535445418306569], res=[0.0, 0.0, 0.0, 0.0, -2.097185071281544], res_norm=2.097e+00
2025-12-01 13:44:25,229 - INFO - integration_test - Dyn residual k=2: pred=[9.158232553344913, 4.374783026955496, 0.13955824395465566, 3.0, 14.83544541830657], ws=[9.158232553344913, 4.374783026955496, 0.13955824395465566, 3.0, 16.900089684199312], res=[0.0, 0.0, 0.0, 0.0, -2.064644265892742], res_norm=2.065e+00
2025-12-01 13:44:25,254 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,265 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,282 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,295 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,312 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,324 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,341 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,353 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,370 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,382 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,399 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,412 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,428 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,440 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,457 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,469 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,486 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,498 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,527 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,543 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:25,555 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:25,934 - INFO - integration_test - Step 35: MPC solve successful
2025-12-01 13:44:25,945 - INFO - integration_test - Step 35: Computed 10 numeric contouring constraints for visualization (s=9.600)
2025-12-01 13:44:25,946 - DEBUG - integration_test - Step 35: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:25,946 - INFO - integration_test - === Applying control at step 35 ===
2025-12-01 13:44:25,946 - INFO - integration_test -   Control dict from planner: {'a': -8.85738374520979e-07, 'w': -0.3863421601892677}
2025-12-01 13:44:25,946 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:25,946 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:25,947 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:25,947 - INFO - integration_test - Step 35 completed in 0.741s
2025-12-01 13:44:25,970 - INFO - integration_test - Step 36 (contouring until path end)
2025-12-01 13:44:25,972 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.56479816 4.28557117 0.10092403 2.99999993 9.90000005]
2025-12-01 13:44:25,973 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.393m)
2025-12-01 13:44:25,973 - DEBUG - integration_test -   Set spline state to 9.9000
2025-12-01 13:44:25,973 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:25,988 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.565, 4.286), path_start=(0.000, 0.000), dist=9.577m
2025-12-01 13:44:25,989 - WARNING - integration_test - Could not update reference path at step 36: x and y must have the same length
2025-12-01 13:44:25,989 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2025-12-01 13:44:25,991 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:25,993 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:25,993 - INFO - integration_test - Warmstart k=0: x0=8.56479816127765 , y0=4.285571170009053 , psi0=0.1009240279357291 , v0=2.9999999295621533 , spline0=9.90000004666982 , a0=0.0 , w0=0.0
2025-12-01 13:44:25,993 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:25,994 - INFO - integration_test - Dyn residual k=0: pred=[8.863271601762987, 4.315797004961556, 0.1009240279357291, 2.9999999295621533, 10.200000039626035], ws=[8.863271601762987, 4.315797004961556, 0.1009240279357293, 2.9999999295621533, 12.528872787920585], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -2.3288727482945504], res_norm=2.329e+00
2025-12-01 13:44:25,994 - INFO - integration_test - Dyn residual k=1: pred=[9.161745042248324, 4.34602283991406, 0.1009240279357293, 2.9999999295621533, 12.8288727808768], ws=[9.161745042248324, 4.34602283991406, 0.1009240279357293, 2.9999999295621533, 14.962103241746798], res=[0.0, 0.0, 0.0, 0.0, -2.1332304608699975], res_norm=2.133e+00
2025-12-01 13:44:25,995 - INFO - integration_test - Dyn residual k=2: pred=[9.46021848273366, 4.376248674866563, 0.1009240279357293, 2.9999999295621533, 15.262103234703012], ws=[9.46021848273366, 4.376248674866563, 0.1009240279357293, 2.9999999295621533, 17.3819362959794], res=[0.0, 0.0, 0.0, 0.0, -2.1198330612763883], res_norm=2.120e+00
2025-12-01 13:44:26,011 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,024 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,042 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,056 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,077 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,091 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,109 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,123 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,143 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,158 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,179 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,194 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,214 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,229 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,249 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,262 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,297 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,317 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,331 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,350 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:26,366 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:26,987 - INFO - integration_test - Step 36: MPC solve successful
2025-12-01 13:44:27,002 - INFO - integration_test - Step 36: Computed 10 numeric contouring constraints for visualization (s=9.900)
2025-12-01 13:44:27,003 - DEBUG - integration_test - Step 36: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:27,003 - INFO - integration_test - === Applying control at step 36 ===
2025-12-01 13:44:27,003 - INFO - integration_test -   Control dict from planner: {'a': 1.2311062806239896e-07, 'w': -0.12815159001928053}
2025-12-01 13:44:27,003 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:27,003 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:27,004 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:27,005 - INFO - integration_test - Step 36 completed in 1.033s
2025-12-01 13:44:27,035 - INFO - integration_test - Step 37 (contouring until path end)
2025-12-01 13:44:27,037 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 8.8634571   4.31388371  0.08810887  2.99999994 10.20000004]
2025-12-01 13:44:27,037 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.489m)
2025-12-01 13:44:27,038 - DEBUG - integration_test -   Set spline state to 10.2000
2025-12-01 13:44:27,038 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:27,057 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(8.863, 4.314), path_start=(0.000, 0.000), dist=9.858m
2025-12-01 13:44:27,058 - WARNING - integration_test - Could not update reference path at step 37: x and y must have the same length
2025-12-01 13:44:27,058 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2025-12-01 13:44:27,061 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:27,063 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:27,063 - INFO - integration_test - Warmstart k=0: x0=8.863457104604713 , y0=4.313883711577283 , psi0=0.08810886893380104 , v0=2.999999941873216 , spline0=10.200000040857143 , a0=0.0 , w0=0.0
2025-12-01 13:44:27,063 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:27,064 - INFO - integration_test - Dyn residual k=0: pred=[9.162293376037594, 4.340282184799924, 0.08810886893380104, 2.999999941873216, 10.500000035044465], ws=[9.162293376037594, 4.340282184799924, 0.08810886893380099, 2.999999941873216, 12.844604608544914], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -2.3446045735004493], res_norm=2.345e+00
2025-12-01 13:44:27,065 - INFO - integration_test - Dyn residual k=1: pred=[9.461129647470475, 4.366680658022565, 0.08810886893380099, 2.999999941873216, 13.144604602732237], ws=[9.461129647470475, 4.366680658022565, 0.08810886893380099, 2.999999941873216, 15.362747361266148], res=[0.0, 0.0, 0.0, 0.0, -2.2181427585339115], res_norm=2.218e+00
2025-12-01 13:44:27,066 - INFO - integration_test - Dyn residual k=2: pred=[9.759965918903356, 4.393079131245206, 0.08810886893380099, 2.999999941873216, 15.66274735545347], ws=[9.759965918903356, 4.393079131245206, 0.08810886893380099, 2.999999941873216, 17.81847105263567], res=[0.0, 0.0, 0.0, 0.0, -2.1557236971821983], res_norm=2.156e+00
2025-12-01 13:44:27,087 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,102 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,125 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,141 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,164 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,180 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,201 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,216 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,239 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,260 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,285 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,300 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,328 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,343 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,366 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,382 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,407 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,422 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,444 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,459 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,481 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:27,495 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:27,928 - INFO - integration_test - Step 37: MPC solve successful
2025-12-01 13:44:27,943 - INFO - integration_test - Step 37: Computed 10 numeric contouring constraints for visualization (s=10.200)
2025-12-01 13:44:27,943 - DEBUG - integration_test - Step 37: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:27,944 - INFO - integration_test - === Applying control at step 37 ===
2025-12-01 13:44:27,944 - INFO - integration_test -   Control dict from planner: {'a': 4.478354704962405e-07, 'w': -0.23811867011327809}
2025-12-01 13:44:27,944 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:27,944 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:27,945 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:27,946 - INFO - integration_test - Step 37 completed in 0.909s
2025-12-01 13:44:27,978 - INFO - integration_test - Step 38 (contouring until path end)
2025-12-01 13:44:27,979 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.16257942  4.33672193  0.064297    2.99999999 10.50000004]
2025-12-01 13:44:27,979 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.410m)
2025-12-01 13:44:27,979 - DEBUG - integration_test -   Set spline state to 10.5000
2025-12-01 13:44:27,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:27,998 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.163, 4.337), path_start=(0.000, 0.000), dist=10.137m
2025-12-01 13:44:27,999 - WARNING - integration_test - Could not update reference path at step 38: x and y must have the same length
2025-12-01 13:44:27,999 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2025-12-01 13:44:28,002 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:28,004 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:28,004 - INFO - integration_test - Warmstart k=0: x0=9.162579422444077 , y0=4.336721933690528 , psi0=0.06429700192247323 , v0=2.9999999866567633 , spline0=10.500000039522819 , a0=0.0 , w0=0.0
2025-12-01 13:44:28,004 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:28,005 - INFO - integration_test - Dyn residual k=0: pred=[9.461959519049886, 4.3559977464023785, 0.06429700192247323, 2.9999999866567633, 10.800000038188495], ws=[9.461959519049886, 4.3559977464023785, 0.06429700192247312, 2.9999999866567633, 13.231543490807935], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.43154345261944], res_norm=2.432e+00
2025-12-01 13:44:28,007 - INFO - integration_test - Dyn residual k=1: pred=[9.761339615655695, 4.375273559114229, 0.06429700192247312, 2.9999999866567633, 13.531543489473611], ws=[9.761339615655695, 4.375273559114229, 0.06429700192247312, 2.9999999866567633, 15.78936435029939], res=[0.0, 0.0, 0.0, 0.0, -2.2578208608257793], res_norm=2.258e+00
2025-12-01 13:44:28,008 - INFO - integration_test - Dyn residual k=2: pred=[10.060719712261504, 4.394549371826079, 0.06429700192247312, 2.9999999866567633, 16.089364348965066], ws=[10.060719712261504, 4.394549371826079, 0.06429700192247312, 2.9999999866567633, 18.30570998912371], res=[0.0, 0.0, 0.0, 0.0, -2.216345640158643], res_norm=2.216e+00
2025-12-01 13:44:28,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,041 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,063 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,077 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,098 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,113 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,132 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,146 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,167 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,181 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,201 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,216 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,235 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,250 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,271 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,287 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,307 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,322 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,355 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,375 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,389 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,806 - INFO - integration_test - Step 38: MPC solve successful
2025-12-01 13:44:28,818 - INFO - integration_test - Step 38: Computed 10 numeric contouring constraints for visualization (s=10.500)
2025-12-01 13:44:28,818 - DEBUG - integration_test - Step 38: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:28,818 - INFO - integration_test - === Applying control at step 38 ===
2025-12-01 13:44:28,818 - INFO - integration_test -   Control dict from planner: {'a': 2.829057432270624e-07, 'w': -0.28358760356688933}
2025-12-01 13:44:28,818 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:28,818 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:28,819 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:28,820 - INFO - integration_test - Step 38 completed in 0.841s
2025-12-01 13:44:28,842 - INFO - integration_test - Step 39 (contouring until path end)
2025-12-01 13:44:28,842 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.4621927   4.35175042  0.03593824  3.00000001 10.80000004]
2025-12-01 13:44:28,843 - INFO - integration_test - Step 39: Re-initialized spline from 10.8000 to 10.9043 (vehicle at (9.46, 4.35), closest path point at (9.75, 4.78), distance=0.517m)
2025-12-01 13:44:28,843 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 13:44:28,844 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:28,859 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.462, 4.352), path_start=(0.000, 0.000), dist=10.415m
2025-12-01 13:44:28,859 - WARNING - integration_test - Could not update reference path at step 39: x and y must have the same length
2025-12-01 13:44:28,859 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2025-12-01 13:44:28,862 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:28,864 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:28,864 - INFO - integration_test - Warmstart k=0: x0=9.46219269502883 , y0=4.351750423189395 , psi0=0.03593824156578429 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 13:44:28,864 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:28,865 - INFO - integration_test - Dyn residual k=0: pred=[9.761998982298408, 4.362529574994253, 0.03593824156578429, 3.0, 11.204332608216188], ws=[9.761998982298408, 4.362529574994253, 0.03593824156578407, 3.0, 13.68103458024699], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.476701972030803], res_norm=2.477e+00
2025-12-01 13:44:28,866 - INFO - integration_test - Dyn residual k=1: pred=[10.061805269567985, 4.373308726799112, 0.03593824156578407, 3.0, 13.981034580246991], ws=[10.061805269567985, 4.373308726799112, 0.03593824156578407, 3.0, 16.29926092663444], res=[0.0, 0.0, 0.0, 0.0, -2.3182263463874477], res_norm=2.318e+00
2025-12-01 13:44:28,867 - INFO - integration_test - Dyn residual k=2: pred=[10.361611556837563, 4.384087878603971, 0.03593824156578407, 3.0, 16.59926092663444], ws=[10.361611556837563, 4.384087878603971, 0.03593824156578407, 3.0, 18.90880812191697], res=[0.0, 0.0, 0.0, 0.0, -2.30954719528253], res_norm=2.310e+00
2025-12-01 13:44:28,883 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,895 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,913 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,925 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,942 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,954 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:28,974 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:28,987 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,003 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,015 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,032 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,044 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,061 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,074 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,094 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,106 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,122 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,135 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,152 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,164 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,194 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,608 - INFO - integration_test - Step 39: MPC solve successful
2025-12-01 13:44:29,619 - INFO - integration_test - Step 39: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 13:44:29,619 - DEBUG - integration_test - Step 39: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:29,619 - INFO - integration_test - === Applying control at step 39 ===
2025-12-01 13:44:29,619 - INFO - integration_test -   Control dict from planner: {'a': 1.0030677353774377e-07, 'w': 0.8000000038538804}
2025-12-01 13:44:29,619 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:29,619 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:29,620 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:29,621 - INFO - integration_test - Step 39 completed in 0.778s
2025-12-01 13:44:29,642 - INFO - integration_test - Step 40 (contouring until path end)
2025-12-01 13:44:29,643 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.76124836  4.37450394  0.11593824  3.00000002 11.20433261]
2025-12-01 13:44:29,644 - DEBUG - integration_test - Step 40: Using propagated spline 11.2043 (close to path, dist=0.408m)
2025-12-01 13:44:29,644 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 13:44:29,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:29,659 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.761, 4.375), path_start=(0.000, 0.000), dist=10.697m
2025-12-01 13:44:29,660 - WARNING - integration_test - Could not update reference path at step 40: x and y must have the same length
2025-12-01 13:44:29,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2025-12-01 13:44:29,664 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:29,665 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:29,665 - INFO - integration_test - Warmstart k=0: x0=9.76124836131597 , y0=4.374503938437977 , psi0=0.11593824195117233 , v0=3.0 , spline0=11.204332610713989 , a0=0.0 , w0=0.0
2025-12-01 13:44:29,665 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:29,667 - INFO - integration_test - Dyn residual k=0: pred=[10.05923436739543, 4.409207543161577, 0.11593824195117233, 3.0, 11.50433261071399], ws=[10.05923436739543, 4.409207543161577, 0.1159382419511723, 3.0, 14.067073896751479], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, -2.5627412860374896], res_norm=2.563e+00
2025-12-01 13:44:29,668 - INFO - integration_test - Dyn residual k=1: pred=[10.35722037347489, 4.443911147885178, 0.1159382419511723, 3.0, 14.36707389675148], ws=[10.35722037347489, 4.443911147885178, 0.1159382419511723, 3.0, 16.730051251416], res=[0.0, 0.0, 0.0, 0.0, -2.3629773546645207], res_norm=2.363e+00
2025-12-01 13:44:29,669 - INFO - integration_test - Dyn residual k=2: pred=[10.65520637955435, 4.478614752608778, 0.1159382419511723, 3.0, 17.030051251416], ws=[10.65520637955435, 4.478614752608778, 0.1159382419511723, 3.0, 19.51773917713407], res=[0.0, 0.0, 0.0, 0.0, -2.4876879257180704], res_norm=2.488e+00
2025-12-01 13:44:29,685 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,697 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,727 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,745 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,757 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,773 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,786 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,803 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,815 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,832 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,844 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,860 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,873 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,890 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,902 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,919 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,931 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,948 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,960 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:29,977 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:29,989 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,709 - INFO - integration_test - Step 40: MPC solve successful
2025-12-01 13:44:30,721 - INFO - integration_test - Step 40: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 13:44:30,721 - DEBUG - integration_test - Step 40: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:30,721 - INFO - integration_test - === Applying control at step 40 ===
2025-12-01 13:44:30,721 - INFO - integration_test -   Control dict from planner: {'a': 3.345466432994527e-08, 'w': -0.8000000099991461}
2025-12-01 13:44:30,721 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:30,721 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:30,722 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:30,723 - INFO - integration_test - Step 40 completed in 1.080s
2025-12-01 13:44:30,747 - INFO - integration_test - Step 41 (contouring until path end)
2025-12-01 13:44:30,748 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.06030403  4.39725745  0.03593824  3.00000003 11.50433261]
2025-12-01 13:44:30,749 - DEBUG - integration_test - Step 41: Using propagated spline 11.5043 (close to path, dist=0.495m)
2025-12-01 13:44:30,749 - DEBUG - integration_test -   Set spline state to 11.5043
2025-12-01 13:44:30,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:30,764 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.060, 4.397), path_start=(0.000, 0.000), dist=10.979m
2025-12-01 13:44:30,765 - WARNING - integration_test - Could not update reference path at step 41: x and y must have the same length
2025-12-01 13:44:30,765 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2025-12-01 13:44:30,768 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:30,769 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:30,769 - INFO - integration_test - Warmstart k=0: x0=10.060304028276253 , y0=4.3972574536364135 , psi0=0.03593824095125772 , v0=3.0 , spline0=11.504332613546337 , a0=0.0 , w0=0.0
2025-12-01 13:44:30,769 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:30,770 - INFO - integration_test - Dyn residual k=0: pred=[10.360110315552454, 4.408036605257034, 0.03593824095125772, 3.0, 11.804332613546338], ws=[10.360110315552454, 4.408036605257034, 0.03593824095125786, 3.0, 14.38282698203915], res=[0.0, 0.0, -1.3877787807814457e-16, 0.0, -2.5784943684928123], res_norm=2.578e+00
2025-12-01 13:44:30,771 - INFO - integration_test - Dyn residual k=1: pred=[10.659916602828655, 4.418815756877654, 0.03593824095125786, 3.0, 14.68282698203915], ws=[10.659916602828655, 4.418815756877654, 0.03593824095125786, 3.0, 17.150992059064038], res=[0.0, 0.0, 0.0, 0.0, -2.468165077024887], res_norm=2.468e+00
2025-12-01 13:44:30,772 - INFO - integration_test - Dyn residual k=2: pred=[10.959722890104857, 4.429594908498275, 0.03593824095125786, 3.0, 17.45099205906404], ws=[10.959722890104857, 4.429594908498275, 0.03593824095125786, 3.0, 19.992125472585194], res=[0.0, 0.0, 0.0, 0.0, -2.5411334135211554], res_norm=2.541e+00
2025-12-01 13:44:30,788 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,800 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,818 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,830 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,862 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,881 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,894 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,914 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,928 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,946 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,960 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:30,979 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:30,993 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,011 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,023 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,040 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,051 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,069 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,081 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,099 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,111 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,618 - INFO - integration_test - Step 41: MPC solve successful
2025-12-01 13:44:31,629 - INFO - integration_test - Step 41: Computed 10 numeric contouring constraints for visualization (s=11.504)
2025-12-01 13:44:31,630 - DEBUG - integration_test - Step 41: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:31,630 - INFO - integration_test - === Applying control at step 41 ===
2025-12-01 13:44:31,630 - INFO - integration_test -   Control dict from planner: {'a': -0.6784481533863782, 'w': -0.8000000099995916}
2025-12-01 13:44:31,630 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:31,630 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:31,631 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:31,631 - INFO - integration_test - Step 41 completed in 0.883s
2025-12-01 13:44:31,653 - INFO - integration_test - Step 42 (contouring until path end)
2025-12-01 13:44:31,654 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.35683044  4.39609825 -0.04406176  2.93215521 11.79754813]
2025-12-01 13:44:31,655 - DEBUG - integration_test - Step 42: Using propagated spline 11.7975 (close to path, dist=0.394m)
2025-12-01 13:44:31,655 - DEBUG - integration_test -   Set spline state to 11.7975
2025-12-01 13:44:31,655 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:31,670 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.357, 4.396), path_start=(0.000, 0.000), dist=11.251m
2025-12-01 13:44:31,671 - WARNING - integration_test - Could not update reference path at step 42: x and y must have the same length
2025-12-01 13:44:31,671 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2025-12-01 13:44:31,674 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:31,675 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:31,675 - INFO - integration_test - Warmstart k=0: x0=10.35683044309988 , y0=4.3960982462061775 , psi0=-0.04406176004870142 , v0=2.9321552129848434 , spline0=11.79754813484482 , a0=0.0 , w0=0.0
2025-12-01 13:44:31,675 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:31,676 - INFO - integration_test - Dyn residual k=0: pred=[10.649761380464652, 4.383182834291013, -0.04406176004870142, 2.9321552129848434, 12.090763656143304], ws=[10.649761380464652, 4.383182834291013, -0.04406176004870144, 2.9321552129848434, 14.682701834071011], res=[0.0, 0.0, 1.3877787807814457e-17, 0.0, -2.591938177927707], res_norm=2.592e+00
2025-12-01 13:44:31,677 - INFO - integration_test - Dyn residual k=1: pred=[10.942692317829422, 4.370267422375848, -0.04406176004870144, 2.9321552129848434, 14.975917355369495], ws=[10.942692317829422, 4.370267422375848, -0.04406176004870144, 2.9321552129848434, 17.463549775550113], res=[0.0, 0.0, 0.0, 0.0, -2.487632420180619], res_norm=2.488e+00
2025-12-01 13:44:31,678 - INFO - integration_test - Dyn residual k=2: pred=[11.235623255194193, 4.3573520104606835, -0.04406176004870144, 2.9321552129848434, 17.7567652968486], ws=[11.235623255194193, 4.3573520104606835, -0.04406176004870144, 2.9321552129848434, 20.325284533803625], res=[0.0, 0.0, 0.0, 0.0, -2.5685192369550265], res_norm=2.569e+00
2025-12-01 13:44:31,694 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,706 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,724 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,736 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,753 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,765 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,782 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,795 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,812 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,824 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,840 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,852 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,869 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,882 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,899 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,911 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,928 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,939 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,957 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:31,969 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:31,988 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,001 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,408 - INFO - integration_test - Step 42: MPC solve successful
2025-12-01 13:44:32,419 - INFO - integration_test - Step 42: Computed 10 numeric contouring constraints for visualization (s=11.798)
2025-12-01 13:44:32,419 - DEBUG - integration_test - Step 42: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:32,419 - INFO - integration_test - === Applying control at step 42 ===
2025-12-01 13:44:32,419 - INFO - integration_test -   Control dict from planner: {'a': -1.652731616080138, 'w': -0.8000000100004776}
2025-12-01 13:44:32,420 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:32,420 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:32,421 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:32,421 - INFO - integration_test - Step 42 completed in 0.767s
2025-12-01 13:44:32,443 - INFO - integration_test - Step 43 (contouring until path end)
2025-12-01 13:44:32,445 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.64070965  4.37228903 -0.12406176  2.76688205 12.07423634]
2025-12-01 13:44:32,445 - DEBUG - integration_test - Step 43: Using propagated spline 12.0742 (close to path, dist=0.480m)
2025-12-01 13:44:32,445 - DEBUG - integration_test -   Set spline state to 12.0742
2025-12-01 13:44:32,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:32,461 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.641, 4.372), path_start=(0.000, 0.000), dist=11.504m
2025-12-01 13:44:32,462 - WARNING - integration_test - Could not update reference path at step 43: x and y must have the same length
2025-12-01 13:44:32,462 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2025-12-01 13:44:32,465 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:32,466 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:32,466 - INFO - integration_test - Warmstart k=0: x0=10.640709650006201 , y0=4.372289034777951 , psi0=-0.12406176104874918 , v0=2.7668820513768297 , spline0=12.074236339982503 , a0=0.0 , w0=0.0
2025-12-01 13:44:32,466 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:32,467 - INFO - integration_test - Dyn residual k=0: pred=[10.915271286373208, 4.338050595885621, -0.12406176104874918, 2.7668820513768297, 12.350924545120186], ws=[10.915271286373208, 4.338050595885621, -0.12406176104874911, 2.7668820513768297, 15.026055180869896], res=[0.0, 0.0, -6.938893903907228e-17, 0.0, -2.67513063574971], res_norm=2.675e+00
2025-12-01 13:44:32,468 - INFO - integration_test - Dyn residual k=1: pred=[11.189832922740216, 4.303812156993291, -0.12406176104874911, 2.7668820513768297, 15.30274338600758], ws=[11.189832922740216, 4.303812156993291, -0.12406176104874911, 2.7668820513768297, 17.921577667992977], res=[0.0, 0.0, 0.0, 0.0, -2.6188342819853982], res_norm=2.619e+00
2025-12-01 13:44:32,469 - INFO - integration_test - Dyn residual k=2: pred=[11.464394559107223, 4.269573718100961, -0.12406176104874911, 2.7668820513768297, 18.198265873130662], ws=[11.464394559107223, 4.269573718100961, -0.12406176104874911, 2.7668820513768297, 20.84391109911132], res=[0.0, 0.0, 0.0, 0.0, -2.645645225980658], res_norm=2.646e+00
2025-12-01 13:44:32,486 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,498 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,516 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,528 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,545 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,557 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,575 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,587 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,605 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,617 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,634 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,646 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,663 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,675 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,692 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,704 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,722 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,734 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,751 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,763 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:32,780 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:32,792 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,494 - INFO - integration_test - Step 43: MPC solve successful
2025-12-01 13:44:33,505 - INFO - integration_test - Step 43: Computed 10 numeric contouring constraints for visualization (s=12.074)
2025-12-01 13:44:33,506 - DEBUG - integration_test - Step 43: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:33,506 - INFO - integration_test - === Applying control at step 43 ===
2025-12-01 13:44:33,506 - INFO - integration_test -   Control dict from planner: {'a': -1.8893718249551643, 'w': -0.8000000099991901}
2025-12-01 13:44:33,506 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:33,506 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:33,507 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:33,508 - INFO - integration_test - Step 43 completed in 1.063s
2025-12-01 13:44:33,532 - INFO - integration_test - Step 44 (contouring until path end)
2025-12-01 13:44:33,533 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[10.90431276  4.32877724 -0.20406176  2.57794487 12.33203083]
2025-12-01 13:44:33,533 - DEBUG - integration_test - Step 44: Using propagated spline 12.3320 (close to path, dist=0.457m)
2025-12-01 13:44:33,534 - DEBUG - integration_test -   Set spline state to 12.3320
2025-12-01 13:44:33,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:33,549 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.904, 4.329), path_start=(0.000, 0.000), dist=11.732m
2025-12-01 13:44:33,549 - WARNING - integration_test - Could not update reference path at step 44: x and y must have the same length
2025-12-01 13:44:33,549 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2025-12-01 13:44:33,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:33,553 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:33,553 - INFO - integration_test - Warmstart k=0: x0=10.904312755773075 , y0=4.3287772421917055 , psi0=-0.20406176204866816 , v0=2.577944868881313 , spline0=12.332030826870636 , a0=0.0 , w0=0.0
2025-12-01 13:44:33,553 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:33,554 - INFO - integration_test - Dyn residual k=0: pred=[11.156758406123515, 4.276535581717921, -0.20406176204866816, 2.577944868881313, 12.589825313758768], ws=[11.156758406123515, 4.276535581717921, -0.204061762048668, 2.577944868881313, 15.346497030737257], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.75667171697849], res_norm=2.757e+00
2025-12-01 13:44:33,555 - INFO - integration_test - Dyn residual k=1: pred=[11.409204056473955, 4.224293921244136, -0.204061762048668, 2.577944868881313, 15.60429151762539], ws=[11.409204056473955, 4.224293921244136, -0.204061762048668, 2.577944868881313, 18.25602903979444], res=[0.0, 0.0, 0.0, 0.0, -2.651737522169052], res_norm=2.652e+00
2025-12-01 13:44:33,556 - INFO - integration_test - Dyn residual k=2: pred=[11.661649706824395, 4.172052260770352, -0.204061762048668, 2.577944868881313, 18.51382352668257], ws=[11.661649706824395, 4.172052260770352, -0.204061762048668, 2.577944868881313, 21.314055237702064], res=[0.0, 0.0, 0.0, 0.0, -2.8002317110194923], res_norm=2.800e+00
2025-12-01 13:44:33,573 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,585 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,604 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,618 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,636 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,650 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,670 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,683 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,702 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,716 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,734 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,747 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,765 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,778 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,795 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,807 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,824 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,836 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,853 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,865 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:33,883 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:33,895 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,294 - INFO - integration_test - Step 44: MPC solve successful
2025-12-01 13:44:34,305 - INFO - integration_test - Step 44: Computed 10 numeric contouring constraints for visualization (s=12.332)
2025-12-01 13:44:34,306 - DEBUG - integration_test - Step 44: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:34,306 - INFO - integration_test - === Applying control at step 44 ===
2025-12-01 13:44:34,306 - INFO - integration_test -   Control dict from planner: {'a': 1.999999979883683, 'w': -0.8000000087392964}
2025-12-01 13:44:34,306 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:34,306 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:34,307 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:34,307 - INFO - integration_test - Step 44 completed in 0.774s
2025-12-01 13:44:34,331 - INFO - integration_test - Step 45 (contouring until path end)
2025-12-01 13:44:34,332 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.16406951  4.26395368 -0.28406176  2.77794487 12.60982531]
2025-12-01 13:44:34,333 - INFO - integration_test - Step 45: Re-initialized spline from 12.6098 to 12.1159 (vehicle at (11.16, 4.26), closest path point at (11.05, 4.76), distance=0.512m)
2025-12-01 13:44:34,333 - DEBUG - integration_test -   Set spline state to 12.1159
2025-12-01 13:44:34,333 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:34,348 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.164, 4.264), path_start=(0.000, 0.000), dist=11.951m
2025-12-01 13:44:34,348 - WARNING - integration_test - Could not update reference path at step 45: x and y must have the same length
2025-12-01 13:44:34,348 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2025-12-01 13:44:34,351 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:34,352 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:34,352 - INFO - integration_test - Warmstart k=0: x0=11.164069514746224 , y0=4.263953682583869 , psi0=-0.2840617629225978 , v0=2.7779448668696816 , spline0=12.115925120240208 , a0=0.0 , w0=0.0
2025-12-01 13:44:34,352 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:34,353 - INFO - integration_test - Dyn residual k=0: pred=[11.430731393650259, 4.186099850481361, -0.2840617629225978, 2.7779448668696816, 12.393719606927176], ws=[11.430731393650259, 4.186099850481361, -0.2840617629225979, 2.7779448668696816, 15.081748675093316], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -2.6880290681661396], res_norm=2.688e+00
2025-12-01 13:44:34,354 - INFO - integration_test - Dyn residual k=1: pred=[11.697393272554294, 4.108246018378853, -0.2840617629225979, 2.7779448668696816, 15.359543161780284], ws=[11.697393272554294, 4.108246018378853, -0.2840617629225979, 2.7779448668696816, 18.000706069905494], res=[0.0, 0.0, 0.0, 0.0, -2.64116290812521], res_norm=2.641e+00
2025-12-01 13:44:34,355 - INFO - integration_test - Dyn residual k=2: pred=[11.964055151458329, 4.030392186276345, -0.2840617629225979, 2.7779448668696816, 18.278500556592462], ws=[11.964055151458329, 4.030392186276345, -0.2840617629225979, 2.7779448668696816, 20.958278777730463], res=[0.0, 0.0, 0.0, 0.0, -2.679778221138001], res_norm=2.680e+00
2025-12-01 13:44:34,371 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,384 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,401 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,413 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,431 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,443 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,460 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,472 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,489 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,501 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,518 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,530 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,547 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,559 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,576 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,589 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,605 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,617 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,634 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,646 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:34,663 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:34,675 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,114 - INFO - integration_test - Step 45: MPC solve successful
2025-12-01 13:44:35,125 - INFO - integration_test - Step 45: Computed 10 numeric contouring constraints for visualization (s=12.116)
2025-12-01 13:44:35,126 - DEBUG - integration_test - Step 45: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:35,126 - INFO - integration_test - === Applying control at step 45 ===
2025-12-01 13:44:35,126 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199213326, 'w': -0.8000000099985238}
2025-12-01 13:44:35,126 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:35,126 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:35,127 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:35,127 - INFO - integration_test - Step 45 completed in 0.795s
2025-12-01 13:44:35,150 - INFO - integration_test - Step 46 (contouring until path end)
2025-12-01 13:44:35,151 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.43676908  4.17221237 -0.36406176  2.97794487 12.41371961]
2025-12-01 13:44:35,152 - INFO - integration_test - Step 46: Re-initialized spline from 12.4137 to 12.7217 (vehicle at (11.44, 4.17), closest path point at (11.70, 4.71), distance=0.600m)
2025-12-01 13:44:35,152 - DEBUG - integration_test -   Set spline state to 12.7217
2025-12-01 13:44:35,152 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:35,168 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.437, 4.172), path_start=(0.000, 0.000), dist=12.174m
2025-12-01 13:44:35,168 - WARNING - integration_test - Could not update reference path at step 46: x and y must have the same length
2025-12-01 13:44:35,168 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2025-12-01 13:44:35,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:35,172 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:35,172 - INFO - integration_test - Warmstart k=0: x0=11.436769083174369 , y0=4.172212373131988 , psi0=-0.3640617639224502 , v0=2.977944868861815 , spline0=12.721721376252217 , a0=0.0 , w0=0.0
2025-12-01 13:44:35,172 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:35,173 - INFO - integration_test - Dyn residual k=0: pred=[11.715045599045691, 4.0661758834960064, -0.3640617639224502, 2.977944868861815, 13.019515863138398], ws=[11.715045599045691, 4.0661758834960064, -0.36406176392245015, 2.977944868861815, 15.823598834582299], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.8040829714439006], res_norm=2.804e+00
2025-12-01 13:44:35,174 - INFO - integration_test - Dyn residual k=1: pred=[11.993322114917014, 3.960139393860025, -0.36406176392245015, 2.977944868861815, 16.12139332146848], ws=[11.993322114917014, 3.960139393860025, -0.36406176392245015, 2.977944868861815, 18.86068628007075], res=[0.0, 0.0, 0.0, 0.0, -2.7392929586022703], res_norm=2.739e+00
2025-12-01 13:44:35,175 - INFO - integration_test - Dyn residual k=2: pred=[12.271598630788336, 3.8541029042240433, -0.36406176392245015, 2.977944868861815, 19.158480766956934], ws=[12.271598630788336, 3.8541029042240433, -0.36406176392245015, 2.977944868861815, 22.09263692742942], res=[0.0, 0.0, 0.0, 0.0, -2.9341561604724866], res_norm=2.934e+00
2025-12-01 13:44:35,191 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,203 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,222 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,234 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,251 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,263 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,281 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,293 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,310 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,322 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,339 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,351 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,369 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,381 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,399 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,411 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,428 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,440 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,457 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,469 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,501 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:35,899 - INFO - integration_test - Step 46: MPC solve successful
2025-12-01 13:44:35,910 - INFO - integration_test - Step 46: Computed 10 numeric contouring constraints for visualization (s=12.722)
2025-12-01 13:44:35,910 - DEBUG - integration_test - Step 46: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:35,910 - INFO - integration_test - === Applying control at step 46 ===
2025-12-01 13:44:35,910 - INFO - integration_test -   Control dict from planner: {'a': 0.2205514471833395, 'w': -0.8000000088090461}
2025-12-01 13:44:35,910 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:35,910 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:35,911 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:35,912 - INFO - integration_test - Step 46 completed in 0.761s
2025-12-01 13:44:35,934 - INFO - integration_test - Step 47 (contouring until path end)
2025-12-01 13:44:35,936 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.71151758  4.05471687 -0.44406176  3.00000001 13.02172138]
2025-12-01 13:44:35,936 - INFO - integration_test - Step 47: Re-initialized spline from 13.0217 to 12.7217 (vehicle at (11.71, 4.05), closest path point at (11.70, 4.71), distance=0.659m)
2025-12-01 13:44:35,936 - DEBUG - integration_test -   Set spline state to 12.7217
2025-12-01 13:44:35,937 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:35,951 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.712, 4.055), path_start=(0.000, 0.000), dist=12.394m
2025-12-01 13:44:35,952 - WARNING - integration_test - Could not update reference path at step 47: x and y must have the same length
2025-12-01 13:44:35,952 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2025-12-01 13:44:35,954 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:35,956 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:35,956 - INFO - integration_test - Warmstart k=0: x0=11.711517576104391 , y0=4.054716869691039 , psi0=-0.4440617648033548 , v0=3.0 , spline0=12.721721376252217 , a0=0.0 , w0=0.0
2025-12-01 13:44:35,956 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:35,957 - INFO - integration_test - Dyn residual k=0: pred=[11.982421817742422, 3.9258336207308915, -0.4440617648033548, 3.0, 13.021721376252218], ws=[11.982421817742422, 3.9258336207308915, -0.4440617648033549, 3.0, 15.825804347696119], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.8040829714439006], res_norm=2.804e+00
2025-12-01 13:44:35,957 - INFO - integration_test - Dyn residual k=1: pred=[12.253326059380452, 3.796950371770744, -0.4440617648033549, 3.0, 16.125804347696118], ws=[12.253326059380452, 3.796950371770744, -0.4440617648033549, 3.0, 18.866955318563353], res=[0.0, 0.0, 0.0, 0.0, -2.741150970867235], res_norm=2.741e+00
2025-12-01 13:44:35,958 - INFO - integration_test - Dyn residual k=2: pred=[12.524230301018482, 3.668067122810596, -0.4440617648033549, 3.0, 19.166955318563353], ws=[12.524230301018482, 3.668067122810596, -0.4440617648033549, 3.0, 22.106707454949213], res=[0.0, 0.0, 0.0, 0.0, -2.9397521363858594], res_norm=2.940e+00
2025-12-01 13:44:35,975 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:35,988 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,005 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,018 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,035 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,047 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,065 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,077 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,094 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,107 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,124 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,136 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,153 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,165 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,183 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,195 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,212 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,224 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,241 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,253 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,270 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,283 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,768 - INFO - integration_test - Step 47: MPC solve successful
2025-12-01 13:44:36,779 - INFO - integration_test - Step 47: Computed 10 numeric contouring constraints for visualization (s=12.722)
2025-12-01 13:44:36,780 - DEBUG - integration_test - Step 47: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:36,780 - INFO - integration_test - === Applying control at step 47 ===
2025-12-01 13:44:36,780 - INFO - integration_test -   Control dict from planner: {'a': 1.0612749142923116e-07, 'w': -0.800000009992761}
2025-12-01 13:44:36,780 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:36,780 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:36,781 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:36,781 - INFO - integration_test - Step 47 completed in 0.846s
2025-12-01 13:44:36,810 - INFO - integration_test - Step 48 (contouring until path end)
2025-12-01 13:44:36,811 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[11.97698037  3.91514066 -0.52406177  3.00000002 13.02172138]
2025-12-01 13:44:36,811 - INFO - integration_test - Step 48: Re-initialized spline from 13.0217 to 13.3275 (vehicle at (11.98, 3.92), closest path point at (12.34, 4.65), distance=0.816m)
2025-12-01 13:44:36,811 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 13:44:36,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:36,828 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(11.977, 3.915), path_start=(0.000, 0.000), dist=12.601m
2025-12-01 13:44:36,829 - WARNING - integration_test - Could not update reference path at step 48: x and y must have the same length
2025-12-01 13:44:36,829 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2025-12-01 13:44:36,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:36,835 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:36,835 - INFO - integration_test - Warmstart k=0: x0=11.976980370009592 , y0=3.9151406576010643 , psi0=-0.5240617658026309 , v0=3.0 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 13:44:36,835 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:36,836 - INFO - integration_test - Dyn residual k=0: pred=[12.236718514770583, 3.76502038529876, -0.5240617658026309, 3.0, 13.62751763226423], ws=[12.236718514770583, 3.76502038529876, -0.5240617658026308, 3.0, 16.5590766920582], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.931559059793969], res_norm=2.932e+00
2025-12-01 13:44:36,837 - INFO - integration_test - Dyn residual k=1: pred=[12.496456659531574, 3.6149001129964553, -0.5240617658026308, 3.0, 16.8590766920582], ws=[12.496456659531574, 3.6149001129964553, -0.5240617658026308, 3.0, 19.81610961181964], res=[0.0, 0.0, 0.0, 0.0, -2.957032919761442], res_norm=2.957e+00
2025-12-01 13:44:36,838 - INFO - integration_test - Dyn residual k=2: pred=[12.756194804292566, 3.464779840694151, -0.5240617658026308, 3.0, 20.116109611819642], ws=[12.756194804292566, 3.464779840694151, -0.5240617658026308, 3.0, 23.217333090533053], res=[0.0, 0.0, 0.0, 0.0, -3.101223478713411], res_norm=3.101e+00
2025-12-01 13:44:36,856 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,870 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,907 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,929 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,944 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:36,965 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:36,980 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,002 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,016 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,034 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,046 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,077 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,094 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,108 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,126 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,139 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,160 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,175 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,196 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,210 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,594 - INFO - integration_test - Step 48: MPC solve successful
2025-12-01 13:44:37,605 - INFO - integration_test - Step 48: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 13:44:37,606 - DEBUG - integration_test - Step 48: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:37,606 - INFO - integration_test - === Applying control at step 48 ===
2025-12-01 13:44:37,606 - INFO - integration_test -   Control dict from planner: {'a': 3.785183012661942e-08, 'w': -0.800000009989236}
2025-12-01 13:44:37,606 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:37,606 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:37,607 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:37,607 - INFO - integration_test - Step 48 completed in 0.797s
2025-12-01 13:44:37,628 - INFO - integration_test - Step 49 (contouring until path end)
2025-12-01 13:44:37,630 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.23043995  3.75479647 -0.60406177  3.00000003 13.62751764]
2025-12-01 13:44:37,630 - INFO - integration_test - Step 49: Re-initialized spline from 13.6275 to 13.3275 (vehicle at (12.23, 3.75), closest path point at (12.34, 4.65), distance=0.899m)
2025-12-01 13:44:37,630 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 13:44:37,631 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:37,646 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.230, 3.755), path_start=(0.000, 0.000), dist=12.794m
2025-12-01 13:44:37,646 - WARNING - integration_test - Could not update reference path at step 49: x and y must have the same length
2025-12-01 13:44:37,646 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2025-12-01 13:44:37,649 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:37,650 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:37,650 - INFO - integration_test - Warmstart k=0: x0=12.23043994611006 , y0=3.7547964726612286 , psi0=-0.6040617668015544 , v0=3.0 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 13:44:37,650 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:37,651 - INFO - integration_test - Dyn residual k=0: pred=[12.477350556209872, 3.5843994344823376, -0.6040617668015544, 3.0, 13.62751763226423], ws=[12.477350556209872, 3.5843994344823376, -0.6040617668015544, 3.0, 16.5590766920582], res=[0.0, 0.0, 0.0, 0.0, -2.931559059793969], res_norm=2.932e+00
2025-12-01 13:44:37,652 - INFO - integration_test - Dyn residual k=1: pred=[12.724261166309685, 3.4140023963034465, -0.6040617668015544, 3.0, 16.8590766920582], ws=[12.724261166309685, 3.4140023963034465, -0.6040617668015544, 3.0, 19.818326317793133], res=[0.0, 0.0, 0.0, 0.0, -2.959249625734934], res_norm=2.959e+00
2025-12-01 13:44:37,653 - INFO - integration_test - Dyn residual k=2: pred=[12.971171776409497, 3.2436053581245554, -0.6040617668015544, 3.0, 20.118326317793134], ws=[12.971171776409497, 3.2436053581245554, -0.6040617668015544, 3.0, 23.225897306622887], res=[0.0, 0.0, 0.0, 0.0, -3.107570988829753], res_norm=3.108e+00
2025-12-01 13:44:37,669 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,681 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,699 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,711 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,728 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,740 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,757 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,769 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,786 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,798 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,815 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,827 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,844 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,856 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,873 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,885 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,902 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,914 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,931 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,943 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:37,959 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:37,972 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,349 - INFO - integration_test - Step 49: MPC solve successful
2025-12-01 13:44:38,360 - INFO - integration_test - Step 49: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 13:44:38,361 - DEBUG - integration_test - Step 49: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:38,361 - INFO - integration_test - === Applying control at step 49 ===
2025-12-01 13:44:38,361 - INFO - integration_test -   Control dict from planner: {'a': 1.3470522374298097e-08, 'w': -0.8000000099916833}
2025-12-01 13:44:38,361 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:38,361 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:38,362 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:38,362 - INFO - integration_test - Step 49 completed in 0.733s
2025-12-01 13:44:38,387 - INFO - integration_test - Step 50 (contouring until path end)
2025-12-01 13:44:38,389 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.47027503  3.57470997 -0.68406177  3.00000003 13.62751764]
2025-12-01 13:44:38,390 - INFO - integration_test - Step 50: Re-initialized spline from 13.6275 to 13.3275 (vehicle at (12.47, 3.57), closest path point at (12.34, 4.65), distance=1.080m)
2025-12-01 13:44:38,390 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 13:44:38,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:38,405 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.470, 3.575), path_start=(0.000, 0.000), dist=12.973m
2025-12-01 13:44:38,405 - WARNING - integration_test - Could not update reference path at step 50: x and y must have the same length
2025-12-01 13:44:38,405 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2025-12-01 13:44:38,408 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:38,409 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:38,409 - INFO - integration_test - Warmstart k=0: x0=12.470275027602751 , y0=3.574709970667525 , psi0=-0.6840617678007228 , v0=3.0 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 13:44:38,409 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:38,410 - INFO - integration_test - Dyn residual k=0: pred=[12.70277871770572, 3.3851261261857153, -0.6840617678007228, 3.0, 13.62751763226423], ws=[12.70277871770572, 3.385126126185715, -0.6840617678007228, 3.0, 16.5590766920582], res=[0.0, 4.440892098500626e-16, 0.0, 0.0, -2.931559059793969], res_norm=2.932e+00
2025-12-01 13:44:38,411 - INFO - integration_test - Dyn residual k=1: pred=[12.935282407808687, 3.195542281703905, -0.6840617678007228, 3.0, 16.8590766920582], ws=[12.935282407808687, 3.195542281703905, -0.6840617678007228, 3.0, 19.82087605472886], res=[0.0, 0.0, 0.0, 0.0, -2.9617993626706607], res_norm=2.962e+00
2025-12-01 13:44:38,412 - INFO - integration_test - Dyn residual k=2: pred=[13.167786097911655, 3.0059584372220955, -0.6840617678007228, 3.0, 20.12087605472886], ws=[13.167786097911655, 3.0059584372220955, -0.6840617678007228, 3.0, 23.23545063994052], res=[0.0, 0.0, 0.0, 0.0, -3.1145745852116598], res_norm=3.115e+00
2025-12-01 13:44:38,427 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,439 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,457 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,469 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,487 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,500 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,517 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,530 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,547 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,559 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,576 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,588 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,605 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,617 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,634 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,646 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,663 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,675 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,693 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,705 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:38,722 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:38,734 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,104 - INFO - integration_test - Step 50: MPC solve successful
2025-12-01 13:44:39,115 - INFO - integration_test - Step 50: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 13:44:39,115 - DEBUG - integration_test - Step 50: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:39,115 - INFO - integration_test - === Applying control at step 50 ===
2025-12-01 13:44:39,115 - INFO - integration_test -   Control dict from planner: {'a': -6.503853875820804e-09, 'w': -0.8000000025135664}
2025-12-01 13:44:39,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:39,115 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:39,116 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:39,117 - INFO - integration_test - Step 50 completed in 0.728s
2025-12-01 13:44:39,138 - INFO - integration_test - Step 51 (contouring until path end)
2025-12-01 13:44:39,140 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[12.69495149  3.37603309 -0.76406177  3.00000003 13.62751764]
2025-12-01 13:44:39,141 - INFO - integration_test - Step 51: Re-initialized spline from 13.6275 to 13.9333 (vehicle at (12.69, 3.38), closest path point at (12.98, 4.57), distance=1.226m)
2025-12-01 13:44:39,141 - DEBUG - integration_test -   Set spline state to 13.9333
2025-12-01 13:44:39,141 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:39,156 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(12.695, 3.376), path_start=(0.000, 0.000), dist=13.136m
2025-12-01 13:44:39,157 - WARNING - integration_test - Could not update reference path at step 51: x and y must have the same length
2025-12-01 13:44:39,157 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2025-12-01 13:44:39,160 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:39,161 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:39,161 - INFO - integration_test - Warmstart k=0: x0=12.69495148827495 , y0=3.3760330908940275 , psi0=-0.7640617680520795 , v0=3.0 , spline0=13.933313888276238 , a0=0.0 , w0=0.0
2025-12-01 13:44:39,161 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:39,162 - INFO - integration_test - Dyn residual k=0: pred=[12.91156102832581, 3.1684751299314207, -0.7640617680520795, 3.0, 14.23331388827624], ws=[12.91156102832581, 3.1684751299314207, -0.7640617680520796, 3.0, 17.306124359024597], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.072810470748358], res_norm=3.073e+00
2025-12-01 13:44:39,163 - INFO - integration_test - Dyn residual k=1: pred=[13.12817056837667, 2.960917168968814, -0.7640617680520796, 3.0, 17.606124359024598], ws=[13.12817056837667, 2.960917168968814, -0.7640617680520796, 3.0, 20.807481687315168], res=[0.0, 0.0, 0.0, 0.0, -3.2013573282905696], res_norm=3.201e+00
2025-12-01 13:44:39,164 - INFO - integration_test - Dyn residual k=2: pred=[13.344780108427528, 2.753359208006207, -0.7640617680520796, 3.0, 21.10748168731517], ws=[13.344780108427528, 2.753359208006207, -0.7640617680520796, 3.0, 24.379974300736876], res=[0.0, 0.0, 0.0, 0.0, -3.272492613421708], res_norm=3.272e+00
2025-12-01 13:44:39,180 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,192 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,210 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,222 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,240 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,252 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,268 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,281 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,298 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,310 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,327 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,339 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,357 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,369 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,387 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,399 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,415 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,427 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,444 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,456 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,474 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,486 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,814 - INFO - integration_test - Step 51: MPC solve successful
2025-12-01 13:44:39,825 - INFO - integration_test - Step 51: Computed 10 numeric contouring constraints for visualization (s=13.933)
2025-12-01 13:44:39,826 - DEBUG - integration_test - Step 51: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:39,826 - INFO - integration_test - === Applying control at step 51 ===
2025-12-01 13:44:39,826 - INFO - integration_test -   Control dict from planner: {'a': 8.821112890142642e-09, 'w': 0.8000000099940917}
2025-12-01 13:44:39,826 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:39,826 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:39,827 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:39,827 - INFO - integration_test - Step 51 completed in 0.687s
2025-12-01 13:44:39,850 - INFO - integration_test - Step 52 (contouring until path end)
2025-12-01 13:44:39,851 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[12.91962795  3.17735621 -0.68406177  3.00000003 14.23331389]
2025-12-01 13:44:39,852 - INFO - integration_test - Step 52: Re-initialized spline from 14.2333 to 13.9333 (vehicle at (12.92, 3.18), closest path point at (12.98, 4.57), distance=1.392m)
2025-12-01 13:44:39,852 - DEBUG - integration_test -   Set spline state to 13.9333
2025-12-01 13:44:39,852 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:39,868 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(12.920, 3.177), path_start=(0.000, 0.000), dist=13.305m
2025-12-01 13:44:39,869 - WARNING - integration_test - Could not update reference path at step 52: x and y must have the same length
2025-12-01 13:44:39,869 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2025-12-01 13:44:39,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:39,873 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:39,873 - INFO - integration_test - Warmstart k=0: x0=12.91962794902912 , y0=3.1773562111979983 , psi0=-0.6840617670526703 , v0=3.0 , spline0=13.933313888276238 , a0=0.0 , w0=0.0
2025-12-01 13:44:39,873 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:39,874 - INFO - integration_test - Dyn residual k=0: pred=[13.152131639273907, 2.9877723668901135, -0.6840617670526703, 3.0, 14.23331388827624], ws=[13.152131639273907, 2.9877723668901135, -0.6840617670526701, 3.0, 17.306124359024594], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -3.0728104707483546], res_norm=3.073e+00
2025-12-01 13:44:39,875 - INFO - integration_test - Dyn residual k=1: pred=[13.384635329518694, 2.7981885225822287, -0.6840617670526701, 3.0, 17.606124359024594], ws=[13.384635329518694, 2.7981885225822287, -0.6840617670526701, 3.0, 20.80441874380029], res=[0.0, 0.0, 0.0, 0.0, -3.1982943847756964], res_norm=3.198e+00
2025-12-01 13:44:39,875 - INFO - integration_test - Dyn residual k=2: pred=[13.617139019763481, 2.608604678274344, -0.6840617670526701, 3.0, 21.10441874380029], ws=[13.617139019763481, 2.608604678274344, -0.6840617670526701, 3.0, 24.368917903408324], res=[0.0, 0.0, 0.0, 0.0, -3.2644991596080324], res_norm=3.264e+00
2025-12-01 13:44:39,891 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,903 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,920 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,933 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,949 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,961 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:39,978 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:39,991 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,008 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,020 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,036 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,048 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,065 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,077 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,094 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,106 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,122 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,134 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,151 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,164 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,181 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,193 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,537 - INFO - integration_test - Step 52: MPC solve successful
2025-12-01 13:44:40,548 - INFO - integration_test - Step 52: Computed 10 numeric contouring constraints for visualization (s=13.933)
2025-12-01 13:44:40,549 - DEBUG - integration_test - Step 52: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:40,549 - INFO - integration_test - === Applying control at step 52 ===
2025-12-01 13:44:40,549 - INFO - integration_test -   Control dict from planner: {'a': -7.37342992211703e-08, 'w': 0.7999999767731354}
2025-12-01 13:44:40,549 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:40,549 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:40,550 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:40,550 - INFO - integration_test - Step 52 completed in 0.699s
2025-12-01 13:44:40,572 - INFO - integration_test - Step 53 (contouring until path end)
2025-12-01 13:44:40,573 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.15946303  2.99726971 -0.60406177  3.00000002 14.23331389]
2025-12-01 13:44:40,574 - INFO - integration_test - Step 53: Re-initialized spline from 14.2333 to 14.5391 (vehicle at (13.16, 3.00), closest path point at (13.62, 4.48), distance=1.557m)
2025-12-01 13:44:40,574 - DEBUG - integration_test -   Set spline state to 14.5391
2025-12-01 13:44:40,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:40,590 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.159, 2.997), path_start=(0.000, 0.000), dist=13.496m
2025-12-01 13:44:40,591 - WARNING - integration_test - Could not update reference path at step 53: x and y must have the same length
2025-12-01 13:44:40,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2025-12-01 13:44:40,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:40,595 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:40,595 - INFO - integration_test - Warmstart k=0: x0=13.15946303013795 , y0=2.9972697091451233 , psi0=-0.6040617693753567 , v0=3.0 , spline0=14.539110144288248 , a0=0.0 , w0=0.0
2025-12-01 13:44:40,595 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:40,596 - INFO - integration_test - Dyn residual k=0: pred=[13.406373639799193, 2.826872670330733, -0.6040617693753567, 3.0, 14.839110144288249], ws=[13.406373639799193, 2.826872670330733, -0.6040617693753569, 3.0, 18.068393094745225], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.2292829504569767], res_norm=3.229e+00
2025-12-01 13:44:40,597 - INFO - integration_test - Dyn residual k=1: pred=[13.653284249460437, 2.6564756315163427, -0.6040617693753569, 3.0, 18.368393094745226], ws=[13.653284249460437, 2.6564756315163427, -0.6040617693753569, 3.0, 21.693303152913547], res=[0.0, 0.0, 0.0, 0.0, -3.324910058168321], res_norm=3.325e+00
2025-12-01 13:44:40,598 - INFO - integration_test - Dyn residual k=2: pred=[13.900194859121681, 2.4860785927019524, -0.6040617693753569, 3.0, 21.993303152913548], ws=[13.900194859121681, 2.4860785927019524, -0.6040617693753569, 3.0, 25.43739492238752], res=[0.0, 0.0, 0.0, 0.0, -3.444091769473971], res_norm=3.444e+00
2025-12-01 13:44:40,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,626 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,644 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,656 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,674 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,687 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,704 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,716 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,733 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,745 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,762 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,774 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,792 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,804 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,821 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,833 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,849 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,861 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,878 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,890 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:40,906 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:40,918 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,278 - INFO - integration_test - Step 53: MPC solve successful
2025-12-01 13:44:41,289 - INFO - integration_test - Step 53: Computed 10 numeric contouring constraints for visualization (s=14.539)
2025-12-01 13:44:41,289 - DEBUG - integration_test - Step 53: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:41,289 - INFO - integration_test - === Applying control at step 53 ===
2025-12-01 13:44:41,289 - INFO - integration_test -   Control dict from planner: {'a': 5.203950945549668e-08, 'w': 0.8000000099712249}
2025-12-01 13:44:41,289 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:41,289 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:41,290 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:41,291 - INFO - integration_test - Step 53 completed in 0.717s
2025-12-01 13:44:41,313 - INFO - integration_test - Step 54 (contouring until path end)
2025-12-01 13:44:41,314 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.41292261  2.83692552 -0.52406177  3.00000003 14.83911015]
2025-12-01 13:44:41,315 - INFO - integration_test - Step 54: Re-initialized spline from 14.8391 to 14.5391 (vehicle at (13.41, 2.84), closest path point at (13.62, 4.48), distance=1.660m)
2025-12-01 13:44:41,315 - DEBUG - integration_test -   Set spline state to 14.5391
2025-12-01 13:44:41,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:41,330 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.413, 2.837), path_start=(0.000, 0.000), dist=13.710m
2025-12-01 13:44:41,330 - WARNING - integration_test - Could not update reference path at step 54: x and y must have the same length
2025-12-01 13:44:41,330 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2025-12-01 13:44:41,333 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:41,334 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:41,334 - INFO - integration_test - Warmstart k=0: x0=13.412922605718945 , y0=2.8369255236272526 , psi0=-0.5240617683782343 , v0=3.0 , spline0=14.539110144288248 , a0=0.0 , w0=0.0
2025-12-01 13:44:41,334 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:41,335 - INFO - integration_test - Dyn residual k=0: pred=[13.672660750093288, 2.6868052506559654, -0.5240617683782343, 3.0, 14.839110144288249], ws=[13.672660750093288, 2.6868052506559654, -0.5240617683782345, 3.0, 18.06839309474522], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.2292829504569696], res_norm=3.229e+00
2025-12-01 13:44:41,336 - INFO - integration_test - Dyn residual k=1: pred=[13.93239889446763, 2.5366849776846783, -0.5240617683782345, 3.0, 18.36839309474522], ws=[13.93239889446763, 2.5366849776846783, -0.5240617683782345, 3.0, 21.69072562226652], res=[0.0, 0.0, 0.0, 0.0, -3.3223325275213007], res_norm=3.322e+00
2025-12-01 13:44:41,337 - INFO - integration_test - Dyn residual k=2: pred=[14.192137038841972, 2.386564704713391, -0.5240617683782345, 3.0, 21.99072562226652], ws=[14.192137038841972, 2.386564704713391, -0.5240617683782345, 3.0, 25.42744772563494], res=[0.0, 0.0, 0.0, 0.0, -3.436722103368421], res_norm=3.437e+00
2025-12-01 13:44:41,353 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,365 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,383 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,396 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,413 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,425 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,442 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,454 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,471 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,484 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,501 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,513 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,530 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,542 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,560 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,575 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,594 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,607 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,626 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,640 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:41,659 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:41,672 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,016 - INFO - integration_test - Step 54: MPC solve successful
2025-12-01 13:44:42,026 - INFO - integration_test - Step 54: Computed 10 numeric contouring constraints for visualization (s=14.539)
2025-12-01 13:44:42,027 - DEBUG - integration_test - Step 54: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:42,027 - INFO - integration_test - === Applying control at step 54 ===
2025-12-01 13:44:42,027 - INFO - integration_test -   Control dict from planner: {'a': -1.6091307982328312e-09, 'w': 0.8000000071462097}
2025-12-01 13:44:42,027 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:42,027 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:42,028 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:42,029 - INFO - integration_test - Step 54 completed in 0.715s
2025-12-01 13:44:42,052 - INFO - integration_test - Step 55 (contouring until path end)
2025-12-01 13:44:42,053 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[13.6783854   2.69734931 -0.44406177  3.00000003 14.83911015]
2025-12-01 13:44:42,053 - INFO - integration_test - Step 55: Re-initialized spline from 14.8391 to 15.1449 (vehicle at (13.68, 2.70), closest path point at (13.82, 4.46), distance=1.766m)
2025-12-01 13:44:42,054 - DEBUG - integration_test -   Set spline state to 15.1449
2025-12-01 13:44:42,054 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:42,069 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(13.678, 2.697), path_start=(0.000, 0.000), dist=13.942m
2025-12-01 13:44:42,070 - WARNING - integration_test - Could not update reference path at step 55: x and y must have the same length
2025-12-01 13:44:42,070 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2025-12-01 13:44:42,073 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:42,074 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:42,074 - INFO - integration_test - Warmstart k=0: x0=13.678385399993635 , y0=2.6973493104299067 , psi0=-0.44406176766361327 , v0=3.0 , spline0=15.14490640030026 , a0=0.0 , w0=0.0
2025-12-01 13:44:42,074 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:42,075 - INFO - integration_test - Dyn residual k=0: pred=[13.949289641263027, 2.568466060694903, -0.44406176766361327, 3.0, 15.44490640030026], ws=[13.949289641263027, 2.568466060694903, -0.44406176766361316, 3.0, 18.726225860904886], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.2813194606046263], res_norm=3.281e+00
2025-12-01 13:44:42,076 - INFO - integration_test - Dyn residual k=1: pred=[14.220193882532419, 2.439582810959899, -0.44406176766361316, 3.0, 19.026225860904887], ws=[14.220193882532419, 2.439582810959899, -0.44406176766361316, 3.0, 22.54144875959591], res=[0.0, 0.0, 0.0, 0.0, -3.5152228986910217], res_norm=3.515e+00
2025-12-01 13:44:42,076 - INFO - integration_test - Dyn residual k=2: pred=[14.49109812380181, 2.310699561224895, -0.44406176766361316, 3.0, 22.84144875959591], ws=[14.49109812380181, 2.310699561224895, -0.44406176766361316, 3.0, 26.342537557206885], res=[0.0, 0.0, 0.0, 0.0, -3.5010887976109757], res_norm=3.501e+00
2025-12-01 13:44:42,092 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,105 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,134 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,151 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,163 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,180 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,193 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,210 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,222 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,238 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,250 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,267 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,278 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,296 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,308 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,325 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,337 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,354 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,366 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,383 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,396 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,713 - INFO - integration_test - Step 55: MPC solve successful
2025-12-01 13:44:42,724 - INFO - integration_test - Step 55: Computed 10 numeric contouring constraints for visualization (s=15.145)
2025-12-01 13:44:42,724 - DEBUG - integration_test - Step 55: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:42,724 - INFO - integration_test - === Applying control at step 55 ===
2025-12-01 13:44:42,724 - INFO - integration_test -   Control dict from planner: {'a': 1.8478032641607495e-08, 'w': 0.8000000099948934}
2025-12-01 13:44:42,724 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:42,724 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:42,725 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:42,726 - INFO - integration_test - Step 55 completed in 0.673s
2025-12-01 13:44:42,748 - INFO - integration_test - Step 56 (contouring until path end)
2025-12-01 13:44:42,750 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[13.95415336  2.57943388 -0.36406177  3.00000003 15.4449064 ]
2025-12-01 13:44:42,751 - INFO - integration_test - Step 56: Re-initialized spline from 15.4449 to 15.7507 (vehicle at (13.95, 2.58), closest path point at (14.46, 4.38), distance=1.867m)
2025-12-01 13:44:42,751 - DEBUG - integration_test -   Set spline state to 15.7507
2025-12-01 13:44:42,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:42,766 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(13.954, 2.579), path_start=(0.000, 0.000), dist=14.191m
2025-12-01 13:44:42,766 - WARNING - integration_test - Could not update reference path at step 56: x and y must have the same length
2025-12-01 13:44:42,766 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2025-12-01 13:44:42,769 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:42,770 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:42,771 - INFO - integration_test - Warmstart k=0: x0=13.954153356828144 , y0=2.579433881124849 , psi0=-0.36406176666412393 , v0=3.0 , spline0=15.750702656312269 , a0=0.0 , w0=0.0
2025-12-01 13:44:42,771 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:42,772 - INFO - integration_test - Dyn residual k=0: pred=[14.234490832337181, 2.4726120676913594, -0.36406176666412393, 3.0, 16.050702656312268], ws=[14.234490832337181, 2.4726120676913594, -0.3640617666641237, 3.0, 19.5091611612801], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -3.458458504967833], res_norm=3.458e+00
2025-12-01 13:44:42,772 - INFO - integration_test - Dyn residual k=1: pred=[14.51482830784622, 2.36579025425787, -0.3640617666641237, 3.0, 19.8091611612801], ws=[14.51482830784622, 2.36579025425787, -0.3640617666641237, 3.0, 23.559327043494307], res=[0.0, 0.0, 0.0, 0.0, -3.7501658822142048], res_norm=3.750e+00
2025-12-01 13:44:42,773 - INFO - integration_test - Dyn residual k=2: pred=[14.795165783355257, 2.2589684408243804, -0.3640617666641237, 3.0, 23.859327043494307], ws=[14.795165783355257, 2.2589684408243804, -0.3640617666641237, 3.0, 27.50682886994849], res=[0.0, 0.0, 0.0, 0.0, -3.6475018264541816], res_norm=3.648e+00
2025-12-01 13:44:42,789 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,801 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,819 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,831 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,861 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,890 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,907 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,919 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,935 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,947 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,964 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:42,975 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:42,993 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,005 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,021 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,033 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,062 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,079 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,091 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,377 - INFO - integration_test - Step 56: MPC solve successful
2025-12-01 13:44:43,390 - INFO - integration_test - Step 56: Computed 10 numeric contouring constraints for visualization (s=15.751)
2025-12-01 13:44:43,390 - DEBUG - integration_test - Step 56: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:43,390 - INFO - integration_test - === Applying control at step 56 ===
2025-12-01 13:44:43,390 - INFO - integration_test -   Control dict from planner: {'a': 9.707033364688007e-10, 'w': 0.8000000079251751}
2025-12-01 13:44:43,390 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:43,390 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:43,391 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:43,392 - INFO - integration_test - Step 56 completed in 0.642s
2025-12-01 13:44:43,413 - INFO - integration_test - Step 57 (contouring until path end)
2025-12-01 13:44:43,415 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.2384625   2.48393349 -0.28406177  3.00000003 16.05070266]
2025-12-01 13:44:43,415 - INFO - integration_test - Step 57: Re-initialized spline from 16.0507 to 15.7507 (vehicle at (14.24, 2.48), closest path point at (14.46, 4.38), distance=1.906m)
2025-12-01 13:44:43,416 - DEBUG - integration_test -   Set spline state to 15.7507
2025-12-01 13:44:43,416 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:43,431 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.238, 2.484), path_start=(0.000, 0.000), dist=14.454m
2025-12-01 13:44:43,432 - WARNING - integration_test - Could not update reference path at step 57: x and y must have the same length
2025-12-01 13:44:43,432 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2025-12-01 13:44:43,435 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:43,436 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:43,436 - INFO - integration_test - Warmstart k=0: x0=14.238462502369272 , y0=2.483933492093643 , psi0=-0.2840617658716064 , v0=3.0 , spline0=15.750702656312269 , a0=0.0 , w0=0.0
2025-12-01 13:44:43,436 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:43,437 - INFO - integration_test - Dyn residual k=0: pred=[14.526440008893651, 2.399856409984423, -0.2840617658716064, 3.0, 16.050702656312268], ws=[14.526440008893651, 2.399856409984423, -0.2840617658716065, 3.0, 19.5091611612801], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -3.458458504967833], res_norm=3.458e+00
2025-12-01 13:44:43,438 - INFO - integration_test - Dyn residual k=1: pred=[14.81441751541803, 2.315779327875203, -0.2840617658716065, 3.0, 19.8091611612801], ws=[14.81441751541803, 2.315779327875203, -0.2840617658716065, 3.0, 23.557116941303484], res=[0.0, 0.0, 0.0, 0.0, -3.747955780023382], res_norm=3.748e+00
2025-12-01 13:44:43,439 - INFO - integration_test - Dyn residual k=2: pred=[15.10239502194241, 2.231702245765983, -0.2840617658716065, 3.0, 23.857116941303484], ws=[15.10239502194241, 2.231702245765983, -0.2840617658716065, 3.0, 27.498031891403393], res=[0.0, 0.0, 0.0, 0.0, -3.6409149500999085], res_norm=3.641e+00
2025-12-01 13:44:43,455 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,467 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,485 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,497 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,514 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,526 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,543 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,554 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,583 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,601 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,613 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,629 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,641 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,658 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,670 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,693 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,705 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,721 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,733 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:43,751 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:43,763 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,040 - INFO - integration_test - Step 57: MPC solve successful
2025-12-01 13:44:44,051 - INFO - integration_test - Step 57: Computed 10 numeric contouring constraints for visualization (s=15.751)
2025-12-01 13:44:44,052 - DEBUG - integration_test - Step 57: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:44,052 - INFO - integration_test - === Applying control at step 57 ===
2025-12-01 13:44:44,052 - INFO - integration_test -   Control dict from planner: {'a': -1.587447060707908e-07, 'w': 0.7999999377315679}
2025-12-01 13:44:44,052 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:44,052 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:44,053 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:44,054 - INFO - integration_test - Step 57 completed in 0.639s
2025-12-01 13:44:44,079 - INFO - integration_test - Step 58 (contouring until path end)
2025-12-01 13:44:44,080 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[14.52949423  2.41145902 -0.20406177  3.00000001 16.05070266]
2025-12-01 13:44:44,080 - INFO - integration_test - Step 58: Re-initialized spline from 16.0507 to 15.7507 (vehicle at (14.53, 2.41), closest path point at (14.46, 4.38), distance=1.966m)
2025-12-01 13:44:44,080 - DEBUG - integration_test -   Set spline state to 15.7507
2025-12-01 13:44:44,081 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:44,096 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(14.529, 2.411), path_start=(0.000, 0.000), dist=14.728m
2025-12-01 13:44:44,096 - WARNING - integration_test - Could not update reference path at step 58: x and y must have the same length
2025-12-01 13:44:44,096 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2025-12-01 13:44:44,099 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:44,100 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:44,100 - INFO - integration_test - Warmstart k=0: x0=14.52949422717431 , y0=2.4114590190994045 , psi0=-0.2040617720984496 , v0=3.0 , spline0=15.750702656312269 , a0=0.0 , w0=0.0
2025-12-01 13:44:44,100 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:44,101 - INFO - integration_test - Dyn residual k=0: pred=[14.823269690962606, 2.350664472666596, -0.2040617720984496, 3.0, 16.050702656312268], ws=[14.823269690962606, 2.350664472666596, -0.20406177209844945, 3.0, 19.5091611612801], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -3.458458504967833], res_norm=3.458e+00
2025-12-01 13:44:44,102 - INFO - integration_test - Dyn residual k=1: pred=[15.117045154750903, 2.289869926233788, -0.20406177209844945, 3.0, 19.8091611612801], ws=[15.117045154750903, 2.289869926233788, -0.20406177209844945, 3.0, 23.555254302799717], res=[0.0, 0.0, 0.0, 0.0, -3.7460931415196157], res_norm=3.746e+00
2025-12-01 13:44:44,103 - INFO - integration_test - Dyn residual k=2: pred=[15.4108206185392, 2.2290753798009795, -0.20406177209844945, 3.0, 23.855254302799718], ws=[15.4108206185392, 2.2290753798009795, -0.20406177209844945, 3.0, 27.490175821382433], res=[0.0, 0.0, 0.0, 0.0, -3.634921518582715], res_norm=3.635e+00
2025-12-01 13:44:44,119 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,131 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,148 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,160 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,178 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,190 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,207 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,219 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,248 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,266 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,278 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,295 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,307 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,324 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,337 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,356 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,370 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,388 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,400 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,418 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,431 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,729 - INFO - integration_test - Step 58: MPC solve successful
2025-12-01 13:44:44,741 - INFO - integration_test - Step 58: Computed 10 numeric contouring constraints for visualization (s=15.751)
2025-12-01 13:44:44,741 - DEBUG - integration_test - Step 58: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:44,741 - INFO - integration_test - === Applying control at step 58 ===
2025-12-01 13:44:44,741 - INFO - integration_test -   Control dict from planner: {'a': 1.1118965844724779e-07, 'w': 0.8000000099208562}
2025-12-01 13:44:44,741 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:44,742 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:44,742 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:44,743 - INFO - integration_test - Step 58 completed in 0.664s
2025-12-01 13:44:44,764 - INFO - integration_test - Step 59 (contouring until path end)
2025-12-01 13:44:44,766 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[14.82538692  2.36247405 -0.12406177  3.00000002 16.05070266]
2025-12-01 13:44:44,766 - INFO - integration_test - Step 59: Re-initialized spline from 16.0507 to 16.3565 (vehicle at (14.83, 2.36), closest path point at (15.10, 4.31), distance=1.963m)
2025-12-01 13:44:44,766 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 13:44:44,767 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:44,782 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(14.825, 2.362), path_start=(0.000, 0.000), dist=15.012m
2025-12-01 13:44:44,783 - WARNING - integration_test - Could not update reference path at step 59: x and y must have the same length
2025-12-01 13:44:44,783 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2025-12-01 13:44:44,785 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:44,787 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:44,787 - INFO - integration_test - Warmstart k=0: x0=14.825386922004043 , y0=2.3624740512629474 , psi0=-0.12406177110636399 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 13:44:44,787 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:44,788 - INFO - integration_test - Dyn residual k=0: pred=[15.123081183188063, 2.3253509202244618, -0.12406177110636399, 3.0, 16.65649891232428], ws=[15.123081183188063, 2.3253509202244618, -0.12406177110636385, 3.0, 20.30676171328543], res=[0.0, 0.0, -1.3877787807814457e-16, 0.0, -3.6502628009611477], res_norm=3.650e+00
2025-12-01 13:44:44,789 - INFO - integration_test - Dyn residual k=1: pred=[15.420775444372083, 2.288227789185976, -0.12406177110636385, 3.0, 20.60676171328543], ws=[15.420775444372083, 2.288227789185976, -0.12406177110636385, 3.0, 24.46991225862152], res=[0.0, 0.0, 0.0, 0.0, -3.86315054533609], res_norm=3.863e+00
2025-12-01 13:44:44,790 - INFO - integration_test - Dyn residual k=2: pred=[15.718469705556103, 2.2511046581474905, -0.12406177110636385, 3.0, 24.76991225862152], ws=[15.718469705556103, 2.2511046581474905, -0.12406177110636385, 3.0, 28.47811028673316], res=[0.0, 0.0, 0.0, 0.0, -3.7081980281116387], res_norm=3.708e+00
2025-12-01 13:44:44,805 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,817 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,835 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,847 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,864 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,876 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,893 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,905 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,922 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,934 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,951 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,963 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:44,980 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:44,991 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,008 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,020 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,037 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,048 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,066 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,078 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,095 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,107 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,386 - INFO - integration_test - Step 59: MPC solve successful
2025-12-01 13:44:45,398 - INFO - integration_test - Step 59: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 13:44:45,398 - DEBUG - integration_test - Step 59: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:45,398 - INFO - integration_test - === Applying control at step 59 ===
2025-12-01 13:44:45,398 - INFO - integration_test -   Control dict from planner: {'a': 3.721669400413418e-08, 'w': 0.8000000099942566}
2025-12-01 13:44:45,398 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:45,398 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:45,399 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:45,400 - INFO - integration_test - Step 59 completed in 0.634s
2025-12-01 13:44:45,423 - INFO - integration_test - Step 60 (contouring until path end)
2025-12-01 13:44:45,425 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.12424788  2.33729193 -0.04406177  3.00000003 16.65649892]
2025-12-01 13:44:45,425 - INFO - integration_test - Step 60: Re-initialized spline from 16.6565 to 16.3565 (vehicle at (15.12, 2.34), closest path point at (15.10, 4.31), distance=1.968m)
2025-12-01 13:44:45,425 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 13:44:45,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:45,440 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.124, 2.337), path_start=(0.000, 0.000), dist=15.304m
2025-12-01 13:44:45,441 - WARNING - integration_test - Could not update reference path at step 60: x and y must have the same length
2025-12-01 13:44:45,441 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2025-12-01 13:44:45,443 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:45,445 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:45,445 - INFO - integration_test - Warmstart k=0: x0=15.124247884570403 , y0=2.3372919261258147 , psi0=-0.04406177010693833 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 13:44:45,445 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:45,446 - INFO - integration_test - Dyn residual k=0: pred=[15.423956715744456, 2.3240776718417933, -0.04406177010693833, 3.0, 16.65649891232428], ws=[15.423956715744456, 2.3240776718417933, -0.04406177010693835, 3.0, 20.30676171328543], res=[0.0, 0.0, 1.3877787807814457e-17, 0.0, -3.6502628009611477], res_norm=3.650e+00
2025-12-01 13:44:45,446 - INFO - integration_test - Dyn residual k=1: pred=[15.72366554691851, 2.310863417557772, -0.04406177010693835, 3.0, 20.60676171328543], ws=[15.72366554691851, 2.310863417557772, -0.04406177010693835, 3.0, 24.468536249957637], res=[0.0, 0.0, 0.0, 0.0, -3.8617745366722076], res_norm=3.862e+00
2025-12-01 13:44:45,447 - INFO - integration_test - Dyn residual k=2: pred=[16.023374378092562, 2.2976491632737504, -0.04406177010693835, 3.0, 24.768536249957638], ws=[16.023374378092562, 2.2976491632737504, -0.04406177010693835, 3.0, 28.47168788408988], res=[0.0, 0.0, 0.0, 0.0, -3.7031516341322437], res_norm=3.703e+00
2025-12-01 13:44:45,463 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,475 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,494 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,506 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,523 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,535 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,552 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,564 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,581 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,593 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,622 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,639 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,651 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,668 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,680 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,697 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,709 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,726 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,738 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:45,756 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:45,768 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,062 - INFO - integration_test - Step 60: MPC solve successful
2025-12-01 13:44:46,074 - INFO - integration_test - Step 60: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 13:44:46,074 - DEBUG - integration_test - Step 60: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:46,074 - INFO - integration_test - === Applying control at step 60 ===
2025-12-01 13:44:46,074 - INFO - integration_test -   Control dict from planner: {'a': 1.2406480721847928e-08, 'w': 0.8000000099938741}
2025-12-01 13:44:46,074 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:46,074 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:46,075 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:46,076 - INFO - integration_test - Step 60 completed in 0.652s
2025-12-01 13:44:46,102 - INFO - integration_test - Step 61 (contouring until path end)
2025-12-01 13:44:46,104 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.42416542  2.33607372  0.03593823  3.00000003 16.65649892]
2025-12-01 13:44:46,105 - INFO - integration_test - Step 61: Re-initialized spline from 16.6565 to 16.9623 (vehicle at (15.42, 2.34), closest path point at (15.75, 4.25), distance=1.942m)
2025-12-01 13:44:46,105 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 13:44:46,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:46,122 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.424, 2.336), path_start=(0.000, 0.000), dist=15.600m
2025-12-01 13:44:46,123 - WARNING - integration_test - Could not update reference path at step 61: x and y must have the same length
2025-12-01 13:44:46,123 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2025-12-01 13:44:46,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:46,127 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:46,127 - INFO - integration_test - Warmstart k=0: x0=15.424165424076879 , y0=2.336073723480696 , psi0=0.035938230892449075 , v0=3.0 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 13:44:46,127 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:46,128 - INFO - integration_test - Dyn residual k=0: pred=[15.723971711461505, 2.346852872085622, 0.035938230892449075, 3.0, 17.26229516833629], ws=[15.723971711461505, 2.346852872085622, 0.035938230892448964, 3.0, 21.116561067978346], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.854265899642055], res_norm=3.854e+00
2025-12-01 13:44:46,129 - INFO - integration_test - Dyn residual k=1: pred=[16.023777998846132, 2.357632020690548, 0.035938230892448964, 3.0, 21.416561067978346], ws=[16.023777998846132, 2.357632020690548, 0.035938230892448964, 3.0, 25.46686833295376], res=[0.0, 0.0, 0.0, 0.0, -4.050307264975412], res_norm=4.050e+00
2025-12-01 13:44:46,130 - INFO - integration_test - Dyn residual k=2: pred=[16.32358428623076, 2.368411169295474, 0.035938230892448964, 3.0, 25.76686833295376], ws=[16.32358428623076, 2.368411169295474, 0.035938230892448964, 3.0, 29.59915283718415], res=[0.0, 0.0, 0.0, 0.0, -3.8322845042303904], res_norm=3.832e+00
2025-12-01 13:44:46,146 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,159 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,189 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,207 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,220 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,236 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,248 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,265 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,277 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,295 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,307 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,324 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,335 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,352 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,364 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,381 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,393 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,411 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,423 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,439 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,451 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,731 - INFO - integration_test - Step 61: MPC solve successful
2025-12-01 13:44:46,743 - INFO - integration_test - Step 61: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 13:44:46,743 - DEBUG - integration_test - Step 61: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:46,743 - INFO - integration_test - === Applying control at step 61 ===
2025-12-01 13:44:46,743 - INFO - integration_test -   Control dict from planner: {'a': 3.723548726830438e-09, 'w': 0.8000000096377347}
2025-12-01 13:44:46,743 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:46,743 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:46,745 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:46,745 - INFO - integration_test - Step 61 completed in 0.641s
2025-12-01 13:44:46,770 - INFO - integration_test - Step 62 (contouring until path end)
2025-12-01 13:44:46,771 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[15.72322109  2.35882724  0.11593823  3.00000003 17.26229517]
2025-12-01 13:44:46,772 - INFO - integration_test - Step 62: Re-initialized spline from 17.2623 to 16.9623 (vehicle at (15.72, 2.36), closest path point at (15.75, 4.25), distance=1.891m)
2025-12-01 13:44:46,772 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 13:44:46,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:46,788 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(15.723, 2.359), path_start=(0.000, 0.000), dist=15.899m
2025-12-01 13:44:46,788 - WARNING - integration_test - Could not update reference path at step 62: x and y must have the same length
2025-12-01 13:44:46,788 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2025-12-01 13:44:46,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:46,793 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:46,793 - INFO - integration_test - Warmstart k=0: x0=15.723221091556772 , y0=2.358827235690159 , psi0=0.11593823185622253 , v0=3.0 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 13:44:46,793 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:46,794 - INFO - integration_test - Dyn residual k=0: pred=[16.02120709798656, 2.3935308374056063, 0.11593823185622253, 3.0, 17.26229516833629], ws=[16.02120709798656, 2.3935308374056063, 0.11593823185622254, 3.0, 21.116561067978346], res=[0.0, 0.0, -1.3877787807814457e-17, 0.0, -3.854265899642055], res_norm=3.854e+00
2025-12-01 13:44:46,795 - INFO - integration_test - Dyn residual k=1: pred=[16.319193104416353, 2.4282344391210535, 0.11593823185622254, 3.0, 21.416561067978346], ws=[16.319193104416353, 2.4282344391210535, 0.11593823185622254, 3.0, 25.465788916636495], res=[0.0, 0.0, 0.0, 0.0, -4.049227848658148], res_norm=4.049e+00
2025-12-01 13:44:46,795 - INFO - integration_test - Dyn residual k=2: pred=[16.617179110846145, 2.4629380408365007, 0.11593823185622254, 3.0, 25.765788916636495], ws=[16.617179110846145, 2.4629380408365007, 0.11593823185622254, 3.0, 29.59385781483893], res=[0.0, 0.0, 0.0, 0.0, -3.828068898202435], res_norm=3.828e+00
2025-12-01 13:44:46,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,823 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,853 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,871 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,884 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,901 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,913 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,930 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,941 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,958 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:46,971 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:46,988 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,001 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,017 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,029 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,046 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,058 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,075 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,087 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,105 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,117 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,426 - INFO - integration_test - Step 62: MPC solve successful
2025-12-01 13:44:47,437 - INFO - integration_test - Step 62: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 13:44:47,437 - DEBUG - integration_test - Step 62: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:47,437 - INFO - integration_test - === Applying control at step 62 ===
2025-12-01 13:44:47,437 - INFO - integration_test -   Control dict from planner: {'a': -3.704419818862349e-08, 'w': 0.7999999752694248}
2025-12-01 13:44:47,437 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:47,437 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:47,438 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:47,438 - INFO - integration_test - Step 62 completed in 0.667s
2025-12-01 13:44:47,460 - INFO - integration_test - Step 63 (contouring until path end)
2025-12-01 13:44:47,463 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.01950195  2.40540692  0.19593823  3.00000003 17.26229517]
2025-12-01 13:44:47,463 - INFO - integration_test - Step 63: Re-initialized spline from 17.2623 to 17.5681 (vehicle at (16.02, 2.41), closest path point at (16.40, 4.22), distance=1.851m)
2025-12-01 13:44:47,463 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 13:44:47,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:47,479 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.020, 2.405), path_start=(0.000, 0.000), dist=16.199m
2025-12-01 13:44:47,479 - WARNING - integration_test - Could not update reference path at step 63: x and y must have the same length
2025-12-01 13:44:47,479 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2025-12-01 13:44:47,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:47,484 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:47,484 - INFO - integration_test - Warmstart k=0: x0=16.019501951093076 , y0=2.4054069173802612 , psi0=0.19593822938316502 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 13:44:47,484 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:47,485 - INFO - integration_test - Dyn residual k=0: pred=[16.31376158319032, 2.463812986568277, 0.19593822938316502, 3.0, 17.8680914243483], ws=[16.31376158319032, 2.463812986568277, 0.19593822938316485, 3.0, 21.934423884055498], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.066332459707198], res_norm=4.066e+00
2025-12-01 13:44:47,486 - INFO - integration_test - Dyn residual k=1: pred=[16.608021215287565, 2.522219055756293, 0.19593822938316485, 3.0, 22.2344238840555], ws=[16.608021215287565, 2.522219055756293, 0.19593822938316485, 3.0, 26.37463979611669], res=[0.0, 0.0, 0.0, 0.0, -4.1402159120611906], res_norm=4.140e+00
2025-12-01 13:44:47,487 - INFO - integration_test - Dyn residual k=2: pred=[16.90228084738481, 2.580625124944309, 0.19593822938316485, 3.0, 26.67463979611669], ws=[16.90228084738481, 2.580625124944309, 0.19593822938316485, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.0093767484718192], res_norm=3.009e+00
2025-12-01 13:44:47,503 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,515 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,532 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,544 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,561 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,573 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,590 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,602 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,619 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,631 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,647 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,658 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,676 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,688 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,706 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,719 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,737 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,750 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,769 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,781 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:47,798 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:47,809 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,101 - INFO - integration_test - Step 63: MPC solve successful
2025-12-01 13:44:48,113 - INFO - integration_test - Step 63: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 13:44:48,113 - DEBUG - integration_test - Step 63: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:48,113 - INFO - integration_test - === Applying control at step 63 ===
2025-12-01 13:44:48,113 - INFO - integration_test -   Control dict from planner: {'a': -5.148446707807244e-09, 'w': 0.7999999566271033}
2025-12-01 13:44:48,113 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:48,113 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:48,115 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:48,115 - INFO - integration_test - Step 63 completed in 0.653s
2025-12-01 13:44:48,138 - INFO - integration_test - Step 64 (contouring until path end)
2025-12-01 13:44:48,139 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.31111282  2.47551482  0.27593823  3.00000003 17.86809143]
2025-12-01 13:44:48,139 - INFO - integration_test - Step 64: Re-initialized spline from 17.8681 to 17.5681 (vehicle at (16.31, 2.48), closest path point at (16.40, 4.22), distance=1.744m)
2025-12-01 13:44:48,139 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 13:44:48,140 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:48,155 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.311, 2.476), path_start=(0.000, 0.000), dist=16.498m
2025-12-01 13:44:48,155 - WARNING - integration_test - Could not update reference path at step 64: x and y must have the same length
2025-12-01 13:44:48,155 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2025-12-01 13:44:48,158 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:48,159 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:48,159 - INFO - integration_test - Warmstart k=0: x0=16.31111281645302 , y0=2.475514816747407 , psi0=0.27593822504587534 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 13:44:48,159 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:48,160 - INFO - integration_test - Dyn residual k=0: pred=[16.599763817032937, 2.5572497533670195, 0.27593822504587534, 3.0, 17.8680914243483], ws=[16.599763817032937, 2.5572497533670195, 0.2759382250458753, 3.0, 21.934423884055498], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -4.066332459707198], res_norm=4.066e+00
2025-12-01 13:44:48,161 - INFO - integration_test - Dyn residual k=1: pred=[16.888414817612855, 2.638984689986632, 0.2759382250458753, 3.0, 22.2344238840555], ws=[16.888414817612855, 2.638984689986632, 0.2759382250458753, 3.0, 26.374073737747313], res=[0.0, 0.0, 0.0, 0.0, -4.1396498536918145], res_norm=4.140e+00
2025-12-01 13:44:48,162 - INFO - integration_test - Dyn residual k=2: pred=[17.177065818192773, 2.7207196266062446, 0.2759382250458753, 3.0, 26.674073737747314], ws=[17.177065818192773, 2.7207196266062446, 0.2759382250458753, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.0099428068411953], res_norm=3.010e+00
2025-12-01 13:44:48,179 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,191 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,208 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,220 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,237 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,249 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,266 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,278 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,295 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,307 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,324 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,335 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,352 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,364 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,381 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,394 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,413 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,426 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,446 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,459 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,477 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,490 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,807 - INFO - integration_test - Step 64: MPC solve successful
2025-12-01 13:44:48,818 - INFO - integration_test - Step 64: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 13:44:48,819 - DEBUG - integration_test - Step 64: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:48,819 - INFO - integration_test - === Applying control at step 64 ===
2025-12-01 13:44:48,819 - INFO - integration_test -   Control dict from planner: {'a': -6.819535974950277e-08, 'w': 0.799999803808195}
2025-12-01 13:44:48,819 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:48,819 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:48,820 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:48,820 - INFO - integration_test - Step 64 completed in 0.682s
2025-12-01 13:44:48,843 - INFO - integration_test - Step 65 (contouring until path end)
2025-12-01 13:44:48,844 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[16.59618837  2.56870248  0.35593821  3.00000002 17.86809143]
2025-12-01 13:44:48,844 - INFO - integration_test - Step 65: Re-initialized spline from 17.8681 to 17.5681 (vehicle at (16.60, 2.57), closest path point at (16.40, 4.22), distance=1.660m)
2025-12-01 13:44:48,844 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 13:44:48,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:48,860 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(16.596, 2.569), path_start=(0.000, 0.000), dist=16.794m
2025-12-01 13:44:48,860 - WARNING - integration_test - Could not update reference path at step 65: x and y must have the same length
2025-12-01 13:44:48,860 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2025-12-01 13:44:48,863 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:48,864 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:48,864 - INFO - integration_test - Warmstart k=0: x0=16.596188374095544 , y0=2.5687024800020812 , psi0=0.35593820542669485 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 13:44:48,864 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:48,865 - INFO - integration_test - Dyn residual k=0: pred=[16.877384363604026, 2.6732434551474524, 0.35593820542669485, 3.0, 17.8680914243483], ws=[16.877384363604026, 2.6732434551474524, 0.35593820542669485, 3.0, 21.934423884055498], res=[0.0, 0.0, 0.0, 0.0, -4.066332459707198], res_norm=4.066e+00
2025-12-01 13:44:48,866 - INFO - integration_test - Dyn residual k=1: pred=[17.15858035311251, 2.7777844302928236, 0.35593820542669485, 3.0, 22.2344238840555], ws=[17.15858035311251, 2.7777844302928236, 0.35593820542669485, 3.0, 26.37389030060946], res=[0.0, 0.0, 0.0, 0.0, -4.139466416553962], res_norm=4.139e+00
2025-12-01 13:44:48,867 - INFO - integration_test - Dyn residual k=2: pred=[17.43977634262099, 2.882325405438195, 0.35593820542669485, 3.0, 26.67389030060946], ws=[17.43977634262099, 2.882325405438195, 0.35593820542669485, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.010126243979048], res_norm=3.010e+00
2025-12-01 13:44:48,883 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,895 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,912 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,924 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,941 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,953 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:48,970 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:48,982 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,000 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,011 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,028 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,040 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,056 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,069 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,098 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,115 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,127 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,143 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,155 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,172 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,184 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,511 - INFO - integration_test - Step 65: MPC solve successful
2025-12-01 13:44:49,522 - INFO - integration_test - Step 65: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 13:44:49,522 - DEBUG - integration_test - Step 65: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:49,522 - INFO - integration_test - === Applying control at step 65 ===
2025-12-01 13:44:49,522 - INFO - integration_test -   Control dict from planner: {'a': 7.387217009233707e-08, 'w': 0.8000000055711549}
2025-12-01 13:44:49,522 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:49,522 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:49,523 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:49,524 - INFO - integration_test - Step 65 completed in 0.680s
2025-12-01 13:44:49,546 - INFO - integration_test - Step 66 (contouring until path end)
2025-12-01 13:44:49,547 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[16.87290511  2.68437383  0.43593821  3.00000003 17.86809143]
2025-12-01 13:44:49,548 - INFO - integration_test - Step 66: Re-initialized spline from 17.8681 to 18.1739 (vehicle at (16.87, 2.68), closest path point at (17.05, 4.21), distance=1.539m)
2025-12-01 13:44:49,548 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 13:44:49,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:49,563 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(16.873, 2.684), path_start=(0.000, 0.000), dist=17.085m
2025-12-01 13:44:49,564 - WARNING - integration_test - Could not update reference path at step 66: x and y must have the same length
2025-12-01 13:44:49,564 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2025-12-01 13:44:49,567 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:49,568 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:49,568 - INFO - integration_test - Warmstart k=0: x0=16.87290511387586 , y0=2.6843738250545135 , psi0=0.43593820598381033 , v0=3.0 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 13:44:49,568 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:49,569 - INFO - integration_test - Dyn residual k=0: pred=[17.144847395916813, 2.8110521390563914, 0.43593820598381033, 3.0, 18.473887680360313], ws=[17.144847395916813, 2.8110521390563914, 0.43593820598381017, 3.0, 22.75454950059166], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.280661820231348], res_norm=4.281e+00
2025-12-01 13:44:49,570 - INFO - integration_test - Dyn residual k=1: pred=[17.416789677957766, 2.9377304530582693, 0.43593820598381017, 3.0, 23.054549500591662], ws=[17.416789677957766, 2.9377304530582693, 0.43593820598381017, 3.0, 27.33228422557505], res=[0.0, 0.0, 0.0, 0.0, -4.2777347249833895], res_norm=4.278e+00
2025-12-01 13:44:49,571 - INFO - integration_test - Dyn residual k=2: pred=[17.68873195999872, 3.064408767060147, 0.43593820598381017, 3.0, 27.632284225575052], ws=[17.68873195999872, 3.064408767060147, 0.43593820598381017, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.051732319013457], res_norm=2.052e+00
2025-12-01 13:44:49,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,599 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,618 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,630 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,647 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,659 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,675 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,688 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,717 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,735 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,747 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,763 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,776 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,793 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,805 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,821 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,834 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,851 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,863 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:49,880 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:49,893 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,182 - INFO - integration_test - Step 66: MPC solve successful
2025-12-01 13:44:50,195 - INFO - integration_test - Step 66: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 13:44:50,196 - DEBUG - integration_test - Step 66: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:50,196 - INFO - integration_test - === Applying control at step 66 ===
2025-12-01 13:44:50,196 - INFO - integration_test -   Control dict from planner: {'a': -1.1542303914124764e-06, 'w': 0.7999930696918368}
2025-12-01 13:44:50,196 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:50,196 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:50,197 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:50,197 - INFO - integration_test - Step 66 completed in 0.650s
2025-12-01 13:44:50,221 - INFO - integration_test - Step 67 (contouring until path end)
2025-12-01 13:44:50,222 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.13949304  2.82178886  0.51593751  2.99999991 18.47388767]
2025-12-01 13:44:50,223 - INFO - integration_test - Step 67: Re-initialized spline from 18.4739 to 18.1739 (vehicle at (17.14, 2.82), closest path point at (17.05, 4.21), distance=1.394m)
2025-12-01 13:44:50,223 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 13:44:50,223 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:50,238 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.139, 2.822), path_start=(0.000, 0.000), dist=17.370m
2025-12-01 13:44:50,238 - WARNING - integration_test - Could not update reference path at step 67: x and y must have the same length
2025-12-01 13:44:50,238 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2025-12-01 13:44:50,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:50,242 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:50,242 - INFO - integration_test - Warmstart k=0: x0=17.139493036158676 , y0=2.8217888585345805 , psi0=0.515937512952994 , v0=2.9999999106758857 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 13:44:50,242 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:50,243 - INFO - integration_test - Dyn residual k=0: pred=[17.400442203019452, 2.9697940170771786, 0.515937512952994, 2.9999999106758857, 18.473887671427903], ws=[17.400442203019452, 2.9697940170771786, 0.515937512952994, 2.9999999106758857, 22.75454949165925], res=[0.0, 0.0, 0.0, 0.0, -4.280661820231348], res_norm=4.281e+00
2025-12-01 13:44:50,244 - INFO - integration_test - Dyn residual k=1: pred=[17.661391369880228, 3.1177991756197767, 0.515937512952994, 2.9999999106758857, 23.05454948272684], ws=[17.661391369880228, 3.1177991756197767, 0.515937512952994, 2.9999999106758857, 27.33248011075299], res=[0.0, 0.0, 0.0, 0.0, -4.277930628026148], res_norm=4.278e+00
2025-12-01 13:44:50,245 - INFO - integration_test - Dyn residual k=2: pred=[17.922340536741004, 3.265804334162375, 0.515937512952994, 2.9999999106758857, 27.632480101820576], ws=[17.922340536741004, 3.265804334162375, 0.515937512952994, 2.9999999106758857, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.051536442767933], res_norm=2.052e+00
2025-12-01 13:44:50,261 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,274 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,291 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,303 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,320 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,332 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,349 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,361 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,378 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,390 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,407 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,420 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,437 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,449 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,467 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,479 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,496 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,509 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,526 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,538 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,555 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,567 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,857 - INFO - integration_test - Step 67: MPC solve successful
2025-12-01 13:44:50,869 - INFO - integration_test - Step 67: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 13:44:50,869 - DEBUG - integration_test - Step 67: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:50,869 - INFO - integration_test - === Applying control at step 67 ===
2025-12-01 13:44:50,869 - INFO - integration_test -   Control dict from planner: {'a': 7.925851027181866e-07, 'w': 0.7999999857352172}
2025-12-01 13:44:50,869 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:50,869 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:50,870 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:50,871 - INFO - integration_test - Step 67 completed in 0.649s
2025-12-01 13:44:50,894 - INFO - integration_test - Step 68 (contouring until path end)
2025-12-01 13:44:50,895 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.3942469   2.9800686   0.59593751  2.99999999 18.47388768]
2025-12-01 13:44:50,896 - INFO - integration_test - Step 68: Re-initialized spline from 18.4739 to 18.1739 (vehicle at (17.39, 2.98), closest path point at (17.05, 4.21), distance=1.280m)
2025-12-01 13:44:50,896 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 13:44:50,896 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:50,911 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.394, 2.980), path_start=(0.000, 0.000), dist=17.648m
2025-12-01 13:44:50,912 - WARNING - integration_test - Could not update reference path at step 68: x and y must have the same length
2025-12-01 13:44:50,912 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2025-12-01 13:44:50,914 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:50,916 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:50,916 - INFO - integration_test - Warmstart k=0: x0=17.39424690380324 , y0=2.980068600572837 , psi0=0.5959375115265156 , v0=2.999999989934396 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 13:44:50,916 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:50,917 - INFO - integration_test - Dyn residual k=0: pred=[17.64253369843733, 3.148454072055363, 0.5959375115265156, 2.999999989934396, 18.47388767935375], ws=[17.64253369843733, 3.148454072055363, 0.5959375115265155, 2.999999989934396, 22.754549499585103], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.2806618202313516], res_norm=4.281e+00
2025-12-01 13:44:50,917 - INFO - integration_test - Dyn residual k=1: pred=[17.89082049307142, 3.3168395435378892, 0.5959375115265155, 2.999999989934396, 23.05454949857854], ws=[17.89082049307142, 3.3168395435378892, 0.5959375115265155, 2.999999989934396, 27.33305857203121], res=[0.0, 0.0, 0.0, 0.0, -4.278509073452668], res_norm=4.279e+00
2025-12-01 13:44:50,918 - INFO - integration_test - Dyn residual k=2: pred=[18.13910728770551, 3.4852250150204154, 0.5959375115265155, 2.999999989934396, 27.633058571024648], ws=[18.13910728770551, 3.4852250150204154, 0.5959375115265155, 2.999999989934396, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.050957973563861], res_norm=2.051e+00
2025-12-01 13:44:50,934 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,946 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,963 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:50,975 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:50,993 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,005 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,022 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,034 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,051 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,063 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,080 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,092 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,109 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,121 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,138 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,150 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,167 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,179 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,197 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,209 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,226 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,238 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,519 - INFO - integration_test - Step 68: MPC solve successful
2025-12-01 13:44:51,532 - INFO - integration_test - Step 68: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 13:44:51,532 - DEBUG - integration_test - Step 68: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:51,532 - INFO - integration_test - === Applying control at step 68 ===
2025-12-01 13:44:51,532 - INFO - integration_test -   Control dict from planner: {'a': 2.4687228113429935e-07, 'w': 0.7999997851457818}
2025-12-01 13:44:51,532 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:51,532 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:51,533 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:51,534 - INFO - integration_test - Step 68 completed in 0.639s
2025-12-01 13:44:51,559 - INFO - integration_test - Step 69 (contouring until path end)
2025-12-01 13:44:51,559 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[17.63553712  3.1582007   0.67593749  3.00000001 18.47388768]
2025-12-01 13:44:51,560 - INFO - integration_test - Step 69: Re-initialized spline from 18.4739 to 18.7797 (vehicle at (17.64, 3.16), closest path point at (17.70, 4.24), distance=1.086m)
2025-12-01 13:44:51,560 - DEBUG - integration_test -   Set spline state to 18.7797
2025-12-01 13:44:51,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:51,576 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(17.636, 3.158), path_start=(0.000, 0.000), dist=17.916m
2025-12-01 13:44:51,576 - WARNING - integration_test - Could not update reference path at step 69: x and y must have the same length
2025-12-01 13:44:51,577 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2025-12-01 13:44:51,579 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:51,581 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:51,581 - INFO - integration_test - Warmstart k=0: x0=17.63553712288675 , y0=3.158200695196351 , psi0=0.6759374900410938 , v0=3.0 , spline0=18.779683936372322 , a0=0.0 , w0=0.0
2025-12-01 13:44:51,581 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:51,582 - INFO - integration_test - Dyn residual k=0: pred=[17.869573354825846, 3.3458893792978404, 0.6759374900410938, 3.0, 19.079683936372323], ws=[17.869573354825846, 3.3458893792978404, 0.6759374900410937, 3.0, 23.569952754878067], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.4902688185057436], res_norm=4.490e+00
2025-12-01 13:44:51,583 - INFO - integration_test - Dyn residual k=1: pred=[18.103609586764943, 3.5335780633993297, 0.6759374900410937, 3.0, 23.869952754878067], ws=[18.103609586764943, 3.5335780633993297, 0.6759374900410937, 3.0, 28.268899191355313], res=[0.0, 0.0, 0.0, 0.0, -4.398946436477246], res_norm=4.399e+00
2025-12-01 13:44:51,584 - INFO - integration_test - Dyn residual k=2: pred=[18.33764581870404, 3.721266747500819, 0.6759374900410937, 3.0, 28.568899191355314], ws=[18.33764581870404, 3.721266747500819, 0.6759374900410937, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1151173532331953], res_norm=1.115e+00
2025-12-01 13:44:51,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,613 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,631 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,643 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,660 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,672 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,690 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,702 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,719 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,731 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,747 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,760 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,777 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,789 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,806 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,818 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,834 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,846 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,864 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,876 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:51,894 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:51,907 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,238 - INFO - integration_test - Step 69: MPC solve successful
2025-12-01 13:44:52,250 - INFO - integration_test - Step 69: Computed 10 numeric contouring constraints for visualization (s=18.780)
2025-12-01 13:44:52,250 - DEBUG - integration_test - Step 69: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:52,250 - INFO - integration_test - === Applying control at step 69 ===
2025-12-01 13:44:52,251 - INFO - integration_test -   Control dict from planner: {'a': 8.82200180976112e-08, 'w': 0.7999991806070141}
2025-12-01 13:44:52,251 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:52,251 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:52,252 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:52,252 - INFO - integration_test - Step 69 completed in 0.693s
2025-12-01 13:44:52,279 - INFO - integration_test - Step 70 (contouring until path end)
2025-12-01 13:44:52,280 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[17.86182026  3.35504569  0.75593741  3.00000002 19.07968394]
2025-12-01 13:44:52,281 - INFO - integration_test - Step 70: Re-initialized spline from 19.0797 to 18.7797 (vehicle at (17.86, 3.36), closest path point at (17.70, 4.24), distance=0.902m)
2025-12-01 13:44:52,281 - DEBUG - integration_test -   Set spline state to 18.7797
2025-12-01 13:44:52,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:52,296 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(17.862, 3.355), path_start=(0.000, 0.000), dist=18.174m
2025-12-01 13:44:52,297 - WARNING - integration_test - Could not update reference path at step 70: x and y must have the same length
2025-12-01 13:44:52,297 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2025-12-01 13:44:52,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:52,301 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:52,301 - INFO - integration_test - Warmstart k=0: x0=17.861820264696618 , y0=3.3550456945492173 , psi0=0.7559374081017952 , v0=3.0 , spline0=18.779683936372322 , a0=0.0 , w0=0.0
2025-12-01 13:44:52,301 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:52,302 - INFO - integration_test - Dyn residual k=0: pred=[18.080108913141096, 3.5608370110819685, 0.7559374081017952, 3.0, 19.079683936372323], ws=[18.080108913141096, 3.5608370110819685, 0.7559374081017953, 3.0, 23.56995275487807], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.490268818505747], res_norm=4.490e+00
2025-12-01 13:44:52,303 - INFO - integration_test - Dyn residual k=1: pred=[18.298397561585574, 3.7666283276147197, 0.7559374081017953, 3.0, 23.86995275487807], ws=[18.298397561585574, 3.7666283276147197, 0.7559374081017953, 3.0, 28.269919015625746], res=[0.0, 0.0, 0.0, 0.0, -4.399966260747675], res_norm=4.400e+00
2025-12-01 13:44:52,304 - INFO - integration_test - Dyn residual k=2: pred=[18.516686210030052, 3.972419644147471, 0.7559374081017953, 3.0, 28.569919015625747], ws=[18.516686210030052, 3.972419644147471, 0.7559374081017953, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1140975289627626], res_norm=1.114e+00
2025-12-01 13:44:52,319 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,332 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,350 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,362 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,379 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,392 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,409 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,421 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,438 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,450 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,479 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,495 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,507 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,523 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,535 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,552 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,564 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,580 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,592 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,609 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:52,621 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:52,929 - INFO - integration_test - Step 70: MPC solve successful
2025-12-01 13:44:52,940 - INFO - integration_test - Step 70: Computed 10 numeric contouring constraints for visualization (s=18.780)
2025-12-01 13:44:52,941 - DEBUG - integration_test - Step 70: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:52,941 - INFO - integration_test - === Applying control at step 70 ===
2025-12-01 13:44:52,941 - INFO - integration_test -   Control dict from planner: {'a': 4.1599179740287124e-08, 'w': 0.7999999148116168}
2025-12-01 13:44:52,941 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:52,941 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:52,942 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:52,942 - INFO - integration_test - Step 70 completed in 0.662s
2025-12-01 13:44:52,969 - INFO - integration_test - Step 71 (contouring until path end)
2025-12-01 13:44:52,970 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.07164889  3.56934446  0.8359374   3.00000003 19.07968394]
2025-12-01 13:44:52,971 - INFO - integration_test - Step 71: Re-initialized spline from 19.0797 to 18.7797 (vehicle at (18.07, 3.57), closest path point at (17.70, 4.24), distance=0.769m)
2025-12-01 13:44:52,971 - DEBUG - integration_test -   Set spline state to 18.7797
2025-12-01 13:44:52,971 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:52,986 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.072, 3.569), path_start=(0.000, 0.000), dist=18.421m
2025-12-01 13:44:52,987 - WARNING - integration_test - Could not update reference path at step 71: x and y must have the same length
2025-12-01 13:44:52,987 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2025-12-01 13:44:52,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:52,991 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:52,991 - INFO - integration_test - Warmstart k=0: x0=18.07164888872361 , y0=3.56934446467566 , psi0=0.8359373995829569 , v0=3.0 , spline0=18.779683936372322 , a0=0.0 , w0=0.0
2025-12-01 13:44:52,991 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:52,992 - INFO - integration_test - Dyn residual k=0: pred=[18.272793637773436, 3.7919220689616338, 0.8359373995829569, 3.0, 19.079683936372323], ws=[18.272793637773436, 3.7919220689616338, 0.8359373995829569, 3.0, 23.569952754878074], res=[0.0, 0.0, 0.0, 0.0, -4.490268818505751], res_norm=4.490e+00
2025-12-01 13:44:52,993 - INFO - integration_test - Dyn residual k=1: pred=[18.47393838682326, 4.014499673247608, 0.8359373995829569, 3.0, 23.869952754878074], ws=[18.47393838682326, 4.014499673247608, 0.8359373995829564, 3.0, 28.27131030697843], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -4.401357552100357], res_norm=4.401e+00
2025-12-01 13:44:52,994 - INFO - integration_test - Dyn residual k=2: pred=[18.675083135873084, 4.237077277533581, 0.8359373995829564, 3.0, 28.571310306978432], ws=[18.675083135873084, 4.237077277533581, 0.8359373995829564, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1127062376100767], res_norm=1.113e+00
2025-12-01 13:44:53,009 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,021 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,038 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,050 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,068 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,080 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,096 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,108 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,124 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,136 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,153 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,165 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,182 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,195 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,211 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,223 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,240 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,252 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,268 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,281 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,297 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,309 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,648 - INFO - integration_test - Step 71: MPC solve successful
2025-12-01 13:44:53,658 - INFO - integration_test - Step 71: Computed 10 numeric contouring constraints for visualization (s=18.780)
2025-12-01 13:44:53,659 - DEBUG - integration_test - Step 71: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:53,659 - INFO - integration_test - === Applying control at step 71 ===
2025-12-01 13:44:53,659 - INFO - integration_test -   Control dict from planner: {'a': 1.2850910864809762e-08, 'w': 0.6733223566865547}
2025-12-01 13:44:53,659 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:53,659 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:53,660 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:53,660 - INFO - integration_test - Step 71 completed in 0.690s
2025-12-01 13:44:53,686 - INFO - integration_test - Step 72 (contouring until path end)
2025-12-01 13:44:53,687 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[18.2651512   3.79852313  0.90326964  3.00000003 19.07968394]
2025-12-01 13:44:53,688 - INFO - integration_test - Step 72: Re-initialized spline from 19.0797 to 19.3855 (vehicle at (18.27, 3.80), closest path point at (18.34, 4.31), distance=0.516m)
2025-12-01 13:44:53,688 - DEBUG - integration_test -   Set spline state to 19.3855
2025-12-01 13:44:53,688 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:53,703 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(18.265, 3.799), path_start=(0.000, 0.000), dist=18.656m
2025-12-01 13:44:53,703 - WARNING - integration_test - Could not update reference path at step 72: x and y must have the same length
2025-12-01 13:44:53,703 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2025-12-01 13:44:53,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:53,707 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:53,707 - INFO - integration_test - Warmstart k=0: x0=18.26515119616336 , y0=3.7985231349468105 , psi0=0.9032696352516123 , v0=3.0 , spline0=19.385480192384332 , a0=0.0 , w0=0.0
2025-12-01 13:44:53,707 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:53,708 - INFO - integration_test - Dyn residual k=0: pred=[18.45086483323172, 4.034129681984115, 0.9032696352516123, 3.0, 19.685480192384333], ws=[18.45086483323172, 4.034129681984115, 0.9032696352516121, 3.0, 24.373545838119234], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -4.688065645734902], res_norm=4.688e+00
2025-12-01 13:44:53,709 - INFO - integration_test - Dyn residual k=1: pred=[18.63657847030008, 4.269736229021419, 0.9032696352516121, 3.0, 24.673545838119235], ws=[18.63657847030008, 4.269736229021419, 0.9032696352516121, 3.0, 29.14059127859334], res=[0.0, 0.0, 0.0, 0.0, -4.467045440474106], res_norm=4.467e+00
2025-12-01 13:44:53,710 - INFO - integration_test - Dyn residual k=2: pred=[18.82229210736844, 4.505342776058723, 0.9032696352516121, 3.0, 29.44059127859334], ws=[18.82229210736844, 4.505342776058723, 0.9032696352516121, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.24342526599516745], res_norm=2.434e-01
2025-12-01 13:44:53,726 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,738 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,755 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,767 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,785 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,797 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,814 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,825 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,842 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,854 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,871 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,883 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,912 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,929 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,941 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,957 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,970 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:53,987 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:53,999 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,015 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,027 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,350 - INFO - integration_test - Step 72: MPC solve successful
2025-12-01 13:44:54,361 - INFO - integration_test - Step 72: Computed 10 numeric contouring constraints for visualization (s=19.385)
2025-12-01 13:44:54,361 - DEBUG - integration_test - Step 72: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:54,361 - INFO - integration_test - === Applying control at step 72 ===
2025-12-01 13:44:54,361 - INFO - integration_test -   Control dict from planner: {'a': 6.966346865996806e-09, 'w': -0.8000000036020453}
2025-12-01 13:44:54,361 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:54,361 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:54,362 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:54,363 - INFO - integration_test - Step 72 completed in 0.676s
2025-12-01 13:44:54,388 - INFO - integration_test - Step 73 (contouring until path end)
2025-12-01 13:44:54,389 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[18.46008604  4.02645387  0.82326963  3.00000003 19.6854802 ]
2025-12-01 13:44:54,390 - DEBUG - integration_test - Step 73: Using propagated spline 19.6855 (close to path, dist=0.305m)
2025-12-01 13:44:54,390 - DEBUG - integration_test -   Set spline state to 19.6855
2025-12-01 13:44:54,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:54,405 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(18.460, 4.026), path_start=(0.000, 0.000), dist=18.894m
2025-12-01 13:44:54,406 - WARNING - integration_test - Could not update reference path at step 73: x and y must have the same length
2025-12-01 13:44:54,406 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2025-12-01 13:44:54,408 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:54,409 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:54,409 - INFO - integration_test - Warmstart k=0: x0=18.460086043460386 , y0=4.026453869732814 , psi0=0.8232696348914078 , v0=3.0 , spline0=19.68548019534286 , a0=0.0 , w0=0.0
2025-12-01 13:44:54,410 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:54,410 - INFO - integration_test - Dyn residual k=0: pred=[18.664034138956662, 4.246465629289983, 0.8232696348914078, 3.0, 19.98548019534286], ws=[18.664034138956662, 4.246465629289983, 0.8232696348914077, 3.0, 24.700939256702192], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.715459061359333], res_norm=4.715e+00
2025-12-01 13:44:54,411 - INFO - integration_test - Dyn residual k=1: pred=[18.86798223445294, 4.466477388847153, 0.8232696348914077, 3.0, 25.000939256702193], ws=[18.86798223445294, 4.466477388847153, 0.8232696348914077, 3.0, 29.530386765118383], res=[0.0, 0.0, 0.0, 0.0, -4.52944750841619], res_norm=4.529e+00
2025-12-01 13:44:54,412 - INFO - integration_test - Dyn residual k=2: pred=[19.071930329949215, 4.6864891484043225, 0.8232696348914077, 3.0, 29.830386765118384], ws=[19.071930329949215, 4.6864891484043225, 0.8232696348914077, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.14637022052987447], res_norm=1.464e-01
2025-12-01 13:44:54,429 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,441 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,458 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,471 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,501 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,518 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,530 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,547 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,559 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,576 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,589 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,606 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,618 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,635 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,647 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,664 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,676 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,694 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,707 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:54,723 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:54,735 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,062 - INFO - integration_test - Step 73: MPC solve successful
2025-12-01 13:44:55,074 - INFO - integration_test - Step 73: Computed 10 numeric contouring constraints for visualization (s=19.685)
2025-12-01 13:44:55,074 - DEBUG - integration_test - Step 73: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:55,074 - INFO - integration_test - === Applying control at step 73 ===
2025-12-01 13:44:55,074 - INFO - integration_test -   Control dict from planner: {'a': -1.1439579299468326e-07, 'w': -0.7999976171870913}
2025-12-01 13:44:55,074 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:55,074 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:55,075 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:55,076 - INFO - integration_test - Step 73 completed in 0.687s
2025-12-01 13:44:55,102 - INFO - integration_test - Step 74 (contouring until path end)
2025-12-01 13:44:55,103 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[18.67261242  4.23807748  0.74326987  3.00000002 19.9854802 ]
2025-12-01 13:44:55,103 - DEBUG - integration_test - Step 74: Using propagated spline 19.9855 (close to path, dist=0.337m)
2025-12-01 13:44:55,103 - DEBUG - integration_test -   Set spline state to 19.9855
2025-12-01 13:44:55,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:55,120 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(18.673, 4.238), path_start=(0.000, 0.000), dist=19.148m
2025-12-01 13:44:55,120 - WARNING - integration_test - Could not update reference path at step 74: x and y must have the same length
2025-12-01 13:44:55,120 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2025-12-01 13:44:55,123 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:55,124 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:55,124 - INFO - integration_test - Warmstart k=0: x0=18.672612421557517 , y0=4.2380774816664 , psi0=0.7432698731726987 , v0=3.0 , spline0=19.98548019715743 , a0=0.0 , w0=0.0
2025-12-01 13:44:55,124 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:55,125 - INFO - integration_test - Dyn residual k=0: pred=[18.8934903552066, 4.441087181993533, 0.7432698731726987, 3.0, 20.28548019715743], ws=[18.8934903552066, 4.441087181993533, 0.7432698731726988, 3.0, 25.151043754825572], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.865563557668143], res_norm=4.866e+00
2025-12-01 13:44:55,126 - INFO - integration_test - Dyn residual k=1: pred=[19.11436828885568, 4.644096882320666, 0.7432698731726988, 3.0, 25.451043754825573], ws=[19.11436828885568, 4.644096882320666, 0.7432698731726988, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.232972789762936], res_norm=4.233e+00
2025-12-01 13:44:55,127 - INFO - integration_test - Dyn residual k=2: pred=[19.33524622250476, 4.847106582647799, 0.7432698731726988, 3.0, 29.98401654458851], ws=[19.33524622250476, 4.847106582647799, 0.7432698731726988, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:44:55,142 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,155 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,172 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,184 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,202 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,214 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,232 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,244 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,261 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,273 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,290 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,302 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,319 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,330 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,347 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,359 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,376 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,388 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,405 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,421 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,438 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,449 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,756 - INFO - integration_test - Step 74: MPC solve successful
2025-12-01 13:44:55,767 - INFO - integration_test - Step 74: Computed 10 numeric contouring constraints for visualization (s=19.985)
2025-12-01 13:44:55,767 - DEBUG - integration_test - Step 74: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:55,767 - INFO - integration_test - === Applying control at step 74 ===
2025-12-01 13:44:55,767 - INFO - integration_test -   Control dict from planner: {'a': 2.4051384998289525e-08, 'w': -0.7999986963378694}
2025-12-01 13:44:55,767 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:55,767 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:55,768 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:55,769 - INFO - integration_test - Step 74 completed in 0.666s
2025-12-01 13:44:55,794 - INFO - integration_test - Step 75 (contouring until path end)
2025-12-01 13:44:55,795 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[18.90137088  4.43204032  0.66327     3.00000002 20.2854802 ]
2025-12-01 13:44:55,796 - DEBUG - integration_test - Step 75: Using propagated spline 20.2855 (close to path, dist=0.079m)
2025-12-01 13:44:55,796 - DEBUG - integration_test -   Set spline state to 20.2855
2025-12-01 13:44:55,796 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:55,811 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(18.901, 4.432), path_start=(0.000, 0.000), dist=19.414m
2025-12-01 13:44:55,811 - WARNING - integration_test - Could not update reference path at step 75: x and y must have the same length
2025-12-01 13:44:55,812 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2025-12-01 13:44:55,814 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:55,815 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:55,815 - INFO - integration_test - Warmstart k=0: x0=18.901370877808365 , y0=4.432040320396694 , psi0=0.6632700035389117 , v0=3.0 , spline0=20.28548019921251 , a0=0.0 , w0=0.0
2025-12-01 13:44:55,816 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:55,817 - INFO - integration_test - Dyn residual k=0: pred=[19.137765812948963, 4.616749374424568, 0.6632700035389117, 3.0, 20.585480199212512], ws=[19.137765812948963, 4.616749374424568, 0.6632700035389116, 3.0, 25.47545964851679], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.889979449304278], res_norm=4.890e+00
2025-12-01 13:44:55,817 - INFO - integration_test - Dyn residual k=1: pred=[19.37416074808956, 4.801458428452443, 0.6632700035389116, 3.0, 25.77545964851679], ws=[19.37416074808956, 4.801458428452443, 0.6632700035389116, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.908556896071719], res_norm=3.909e+00
2025-12-01 13:44:55,818 - INFO - integration_test - Dyn residual k=2: pred=[19.61055568323016, 4.986167482480317, 0.6632700035389116, 3.0, 29.98401654458851], ws=[19.61055568323016, 4.986167482480317, 0.6632700035389116, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:44:55,834 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,846 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,863 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,875 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,893 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,905 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,922 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,934 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,951 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,963 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:55,979 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:55,992 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,008 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,020 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,037 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,048 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,065 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,077 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,095 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,107 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,123 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,135 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,455 - INFO - integration_test - Step 75: MPC solve successful
2025-12-01 13:44:56,466 - INFO - integration_test - Step 75: Computed 10 numeric contouring constraints for visualization (s=20.285)
2025-12-01 13:44:56,467 - DEBUG - integration_test - Step 75: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:56,467 - INFO - integration_test - === Applying control at step 75 ===
2025-12-01 13:44:56,467 - INFO - integration_test -   Control dict from planner: {'a': 6.229848527161986e-08, 'w': -0.7999999879668501}
2025-12-01 13:44:56,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:56,467 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:56,468 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:56,469 - INFO - integration_test - Step 75 completed in 0.674s
2025-12-01 13:44:56,496 - INFO - integration_test - Step 76 (contouring until path end)
2025-12-01 13:44:56,497 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.14489817  4.60710166  0.58327     3.00000003 20.5854802 ]
2025-12-01 13:44:56,498 - DEBUG - integration_test - Step 76: Using propagated spline 20.5855 (close to path, dist=0.256m)
2025-12-01 13:44:56,498 - DEBUG - integration_test -   Set spline state to 20.5855
2025-12-01 13:44:56,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:56,514 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.145, 4.607), path_start=(0.000, 0.000), dist=19.691m
2025-12-01 13:44:56,514 - WARNING - integration_test - Could not update reference path at step 76: x and y must have the same length
2025-12-01 13:44:56,514 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2025-12-01 13:44:56,517 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:56,518 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:56,518 - INFO - integration_test - Warmstart k=0: x0=19.144898166854784 , y0=4.607101663097719 , psi0=0.5832700047422268 , v0=3.0 , spline0=20.58548020189058 , a0=0.0 , w0=0.0
2025-12-01 13:44:56,518 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:56,520 - INFO - integration_test - Dyn residual k=0: pred=[19.395298008891384, 4.772328534725933, 0.5832700047422268, 3.0, 20.88548020189058], ws=[19.395298008891384, 4.772328534725933, 0.5832700047422268, 3.0, 25.90863112662157], res=[0.0, 0.0, 0.0, 0.0, -5.023150924730992], res_norm=5.023e+00
2025-12-01 13:44:56,520 - INFO - integration_test - Dyn residual k=1: pred=[19.645697850927984, 4.9375554063541465, 0.5832700047422268, 3.0, 26.208631126621572], ws=[19.645697850927984, 4.9375554063541465, 0.5832700047422268, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.475385417966937], res_norm=3.475e+00
2025-12-01 13:44:56,521 - INFO - integration_test - Dyn residual k=2: pred=[19.896097692964585, 5.10278227798236, 0.5832700047422268, 3.0, 29.98401654458851], ws=[19.896097692964585, 5.10278227798236, 0.5832700047422268, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:44:56,537 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,549 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,567 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,579 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,596 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,608 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,624 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,636 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,653 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,664 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,681 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,693 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,710 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,722 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,739 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,750 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,768 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,780 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,797 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,809 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:56,825 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:56,837 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,162 - INFO - integration_test - Step 76: MPC solve successful
2025-12-01 13:44:57,174 - INFO - integration_test - Step 76: Computed 10 numeric contouring constraints for visualization (s=20.585)
2025-12-01 13:44:57,174 - DEBUG - integration_test - Step 76: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:57,174 - INFO - integration_test - === Applying control at step 76 ===
2025-12-01 13:44:57,174 - INFO - integration_test -   Control dict from planner: {'a': -2.957686713829603e-09, 'w': -0.7999987961798783}
2025-12-01 13:44:57,174 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:57,174 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:57,175 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:57,176 - INFO - integration_test - Step 76 completed in 0.679s
2025-12-01 13:44:57,201 - INFO - integration_test - Step 77 (contouring until path end)
2025-12-01 13:44:57,202 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[19.40163655  4.76214172  0.50327013  3.00000003 20.8854802 ]
2025-12-01 13:44:57,203 - DEBUG - integration_test - Step 77: Using propagated spline 20.8855 (close to path, dist=0.285m)
2025-12-01 13:44:57,203 - DEBUG - integration_test -   Set spline state to 20.8855
2025-12-01 13:44:57,204 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:57,220 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(19.402, 4.762), path_start=(0.000, 0.000), dist=19.978m
2025-12-01 13:44:57,221 - WARNING - integration_test - Could not update reference path at step 77: x and y must have the same length
2025-12-01 13:44:57,221 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2025-12-01 13:44:57,224 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:57,225 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:57,225 - INFO - integration_test - Warmstart k=0: x0=19.401636548765648 , y0=4.762141715320495 , psi0=0.503270125124239 , v0=3.0 , spline0=20.88548020453907 , a0=0.0 , w0=0.0
2025-12-01 13:44:57,225 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:57,226 - INFO - integration_test - Dyn residual k=0: pred=[19.664439576029476, 4.906829547777017, 0.503270125124239, 3.0, 21.185480204539072], ws=[19.664439576029476, 4.906829547777017, 0.5032701251242391, 3.0, 26.22999241388362], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.044512209344546], res_norm=5.045e+00
2025-12-01 13:44:57,227 - INFO - integration_test - Dyn residual k=1: pred=[19.927242603293305, 5.0515173802335385, 0.5032701251242391, 3.0, 26.52999241388362], ws=[19.927242603293305, 5.0515173802335385, 0.5032701251242391, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.15402413070489], res_norm=3.154e+00
2025-12-01 13:44:57,228 - INFO - integration_test - Dyn residual k=2: pred=[20.190045630557133, 5.19620521269006, 0.5032701251242391, 3.0, 29.98401654458851], ws=[20.190045630557133, 5.19620521269006, 0.5032701251242391, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:44:57,245 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,257 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,276 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,288 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,307 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,319 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,336 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,354 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,381 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,402 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,431 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,451 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,484 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,508 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,535 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,555 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,582 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,604 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,631 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,647 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:57,671 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:57,693 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,055 - INFO - integration_test - Step 77: MPC solve successful
2025-12-01 13:44:58,068 - INFO - integration_test - Step 77: Computed 10 numeric contouring constraints for visualization (s=20.885)
2025-12-01 13:44:58,068 - DEBUG - integration_test - Step 77: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:44:58,068 - INFO - integration_test - === Applying control at step 77 ===
2025-12-01 13:44:58,068 - INFO - integration_test -   Control dict from planner: {'a': -8.701582559181453e-09, 'w': -0.7999973243642319}
2025-12-01 13:44:58,069 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:44:58,069 - INFO - integration_test -   Planner output success: True
2025-12-01 13:44:58,070 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:44:58,070 - INFO - integration_test - Step 77 completed in 0.868s
2025-12-01 13:44:58,094 - INFO - integration_test - Step 78 (contouring until path end)
2025-12-01 13:44:58,095 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[19.66994376  4.89616879  0.42327039  3.00000003 21.18548021]
2025-12-01 13:44:58,096 - DEBUG - integration_test - Step 78: Using propagated spline 21.1855 (close to path, dist=0.348m)
2025-12-01 13:44:58,096 - DEBUG - integration_test -   Set spline state to 21.1855
2025-12-01 13:44:58,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:58,111 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(19.670, 4.896), path_start=(0.000, 0.000), dist=20.270m
2025-12-01 13:44:58,112 - WARNING - integration_test - Could not update reference path at step 78: x and y must have the same length
2025-12-01 13:44:58,112 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2025-12-01 13:44:58,115 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:44:58,116 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:44:58,116 - INFO - integration_test - Warmstart k=0: x0=19.669943758467472 , y0=4.896168786850967 , psi0=0.42327039268781574 , v0=3.0 , spline0=21.185480207100547 , a0=0.0 , w0=0.0
2025-12-01 13:44:58,116 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:44:58,117 - INFO - integration_test - Dyn residual k=0: pred=[19.943468915347314, 5.019392114812268, 0.42327039268781574, 3.0, 21.485480207100547], ws=[19.943468915347314, 5.019392114812268, 0.42327039268781563, 3.0, 26.646315362846494], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.160835155745946], res_norm=5.161e+00
2025-12-01 13:44:58,118 - INFO - integration_test - Dyn residual k=1: pred=[20.216994072227155, 5.142615442773569, 0.42327039268781563, 3.0, 26.946315362846494], ws=[20.216994072227155, 5.142615442773569, 0.42327039268781563, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.7377011817420147], res_norm=2.738e+00
2025-12-01 13:44:58,118 - INFO - integration_test - Dyn residual k=2: pred=[20.490519229106997, 5.26583877073487, 0.42327039268781563, 3.0, 29.98401654458851], ws=[20.490519229106997, 5.26583877073487, 0.42327039268781563, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:44:58,134 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,146 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,164 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,176 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,194 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,206 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,223 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,235 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,251 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,264 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,280 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,292 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,309 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,321 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,337 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,349 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,366 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,378 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,395 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,407 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:44:58,424 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:44:58,436 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,358 - WARNING - integration_test - Step 78: MPC solve failed
2025-12-01 13:45:15,358 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 13:45:15,366 - INFO - integration_test - Step 78: Computed 10 numeric contouring constraints for visualization (s=21.185)
2025-12-01 13:45:15,366 - DEBUG - integration_test - Step 78: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:15,366 - INFO - integration_test - === Applying control at step 78 ===
2025-12-01 13:45:15,366 - INFO - integration_test -   Control dict from planner: {'a': -8.701582559181453e-09, 'w': -0.7999973243642319}
2025-12-01 13:45:15,366 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:15,366 - INFO - integration_test -   Planner output success: False
2025-12-01 13:45:15,368 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:15,368 - INFO - integration_test - Step 78 completed in 17.273s
2025-12-01 13:45:15,394 - INFO - integration_test - Step 79 (contouring until path end)
2025-12-01 13:45:15,396 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[19.94810355  5.00832559  0.34327066  3.00000002 21.48548021]
2025-12-01 13:45:15,396 - DEBUG - integration_test - Step 79: Using propagated spline 21.4855 (close to path, dist=0.373m)
2025-12-01 13:45:15,396 - DEBUG - integration_test -   Set spline state to 21.4855
2025-12-01 13:45:15,397 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:15,413 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(19.948, 5.008), path_start=(0.000, 0.000), dist=20.567m
2025-12-01 13:45:15,413 - WARNING - integration_test - Could not update reference path at step 79: x and y must have the same length
2025-12-01 13:45:15,413 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2025-12-01 13:45:15,416 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:15,417 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:15,417 - INFO - integration_test - Warmstart k=0: x0=19.948103545226743 , y0=5.00832558628314 , psi0=0.3432706602513925 , v0=3.0 , spline0=21.485480209575005 , a0=0.0 , w0=0.0
2025-12-01 13:45:15,417 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:15,418 - INFO - integration_test - Dyn residual k=0: pred=[20.230601215849102, 5.109296206232421, 0.3432706602513925, 3.0, 21.785480209575006], ws=[20.230601215849102, 5.109296206232421, 0.34327066025139263, 3.0, 26.964981580124533], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.179501370549527], res_norm=5.180e+00
2025-12-01 13:45:15,419 - INFO - integration_test - Dyn residual k=1: pred=[20.51309888647146, 5.210266826181702, 0.34327066025139263, 3.0, 27.264981580124534], ws=[20.51309888647146, 5.210266826181702, 0.34327066025139263, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.4190349644639753], res_norm=2.419e+00
2025-12-01 13:45:15,420 - INFO - integration_test - Dyn residual k=2: pred=[20.79559655709382, 5.311237446130982, 0.34327066025139263, 3.0, 29.98401654458851], ws=[20.79559655709382, 5.311237446130982, 0.34327066025139263, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:15,436 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,448 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,466 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,479 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,496 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,508 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,525 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,537 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,553 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,565 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,583 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,595 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,612 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,624 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,642 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,654 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,673 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,686 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,706 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,719 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:15,738 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:15,750 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,119 - INFO - integration_test - Step 79: MPC solve successful
2025-12-01 13:45:16,130 - INFO - integration_test - Step 79: Computed 10 numeric contouring constraints for visualization (s=21.485)
2025-12-01 13:45:16,131 - DEBUG - integration_test - Step 79: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:16,131 - INFO - integration_test - === Applying control at step 79 ===
2025-12-01 13:45:16,131 - INFO - integration_test -   Control dict from planner: {'a': 2.955093446800139e-08, 'w': -0.4129809881319374}
2025-12-01 13:45:16,131 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:16,131 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:16,132 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:16,132 - INFO - integration_test - Step 79 completed in 0.737s
2025-12-01 13:45:16,154 - INFO - integration_test - Step 80 (contouring until path end)
2025-12-01 13:45:16,157 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[20.23260557  5.10343503  0.30197256  3.00000003 21.78548021]
2025-12-01 13:45:16,157 - DEBUG - integration_test - Step 80: Using propagated spline 21.7855 (close to path, dist=0.371m)
2025-12-01 13:45:16,158 - DEBUG - integration_test -   Set spline state to 21.7855
2025-12-01 13:45:16,158 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:16,173 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(20.233, 5.103), path_start=(0.000, 0.000), dist=20.866m
2025-12-01 13:45:16,173 - WARNING - integration_test - Could not update reference path at step 80: x and y must have the same length
2025-12-01 13:45:16,173 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2025-12-01 13:45:16,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:16,178 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:16,178 - INFO - integration_test - Warmstart k=0: x0=20.232605574964044 , y0=5.103435028822745 , psi0=0.3019725614381988 , v0=3.0 , spline0=21.785480212344975 , a0=0.0 , w0=0.0
2025-12-01 13:45:16,178 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:16,179 - INFO - integration_test - Dyn residual k=0: pred=[20.51903108470421, 5.192656255949959, 0.3019725614381988, 3.0, 22.085480212344976], ws=[20.51903108470421, 5.192656255949959, 0.30197256143819873, 3.0, 27.366547967660576], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -5.2810677553156005], res_norm=5.281e+00
2025-12-01 13:45:16,180 - INFO - integration_test - Dyn residual k=1: pred=[20.805456594444376, 5.2818774830771735, 0.30197256143819873, 3.0, 27.666547967660577], ws=[20.805456594444376, 5.2818774830771735, 0.30197256143819873, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.017468576927932], res_norm=2.017e+00
2025-12-01 13:45:16,181 - INFO - integration_test - Dyn residual k=2: pred=[21.091882104184542, 5.371098710204388, 0.30197256143819873, 3.0, 29.98401654458851], ws=[21.091882104184542, 5.371098710204388, 0.30197256143819873, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:16,197 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,209 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,227 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,239 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,256 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,268 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,285 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,298 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,315 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,326 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,343 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,355 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,372 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,384 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,401 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,413 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,429 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,441 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,459 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,471 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:16,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:16,500 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,705 - WARNING - integration_test - Step 80: MPC solve failed
2025-12-01 13:45:32,705 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 13:45:32,713 - INFO - integration_test - Step 80: Computed 10 numeric contouring constraints for visualization (s=21.785)
2025-12-01 13:45:32,713 - DEBUG - integration_test - Step 80: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:32,713 - INFO - integration_test - === Applying control at step 80 ===
2025-12-01 13:45:32,713 - INFO - integration_test -   Control dict from planner: {'a': 2.955093446800139e-08, 'w': -0.4129809881319374}
2025-12-01 13:45:32,713 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:32,713 - INFO - integration_test -   Planner output success: False
2025-12-01 13:45:32,714 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:32,714 - INFO - integration_test - Step 80 completed in 16.558s
2025-12-01 13:45:32,740 - INFO - integration_test - Step 81 (contouring until path end)
2025-12-01 13:45:32,741 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[20.52079175  5.18671732  0.26067446  3.00000003 22.08548022]
2025-12-01 13:45:32,741 - DEBUG - integration_test - Step 81: Using propagated spline 22.0855 (close to path, dist=0.357m)
2025-12-01 13:45:32,741 - DEBUG - integration_test -   Set spline state to 22.0855
2025-12-01 13:45:32,742 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:32,757 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(20.521, 5.187), path_start=(0.000, 0.000), dist=21.166m
2025-12-01 13:45:32,757 - WARNING - integration_test - Could not update reference path at step 81: x and y must have the same length
2025-12-01 13:45:32,757 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2025-12-01 13:45:32,760 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:32,761 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:32,761 - INFO - integration_test - Warmstart k=0: x0=20.520791748411575 , y0=5.186717323434423 , psi0=0.26067446262500504 , v0=3.0 , spline0=22.085480215410453 , a0=0.0 , w0=0.0
2025-12-01 13:45:32,761 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:32,762 - INFO - integration_test - Dyn residual k=0: pred=[20.81065665854712, 5.26403700962179, 0.26067446262500504, 3.0, 22.385480215410453], ws=[20.81065665854712, 5.26403700962179, 0.2606744626250048, 3.0, 27.683131715996605], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.297651500586152], res_norm=5.298e+00
2025-12-01 13:45:32,763 - INFO - integration_test - Dyn residual k=1: pred=[21.100521568682666, 5.341356695809156, 0.2606744626250048, 3.0, 27.983131715996606], ws=[21.100521568682666, 5.341356695809156, 0.2606744626250048, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.700884828591903], res_norm=1.701e+00
2025-12-01 13:45:32,763 - INFO - integration_test - Dyn residual k=2: pred=[21.39038647881821, 5.418676381996523, 0.2606744626250048, 3.0, 29.98401654458851], ws=[21.39038647881821, 5.418676381996523, 0.2606744626250048, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:32,780 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,792 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,809 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,821 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,837 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,849 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,866 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,878 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,895 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,907 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,924 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,935 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,952 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,963 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:32,979 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:32,992 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,009 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,022 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,040 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,053 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,072 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,086 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,481 - INFO - integration_test - Step 81: MPC solve successful
2025-12-01 13:45:33,492 - INFO - integration_test - Step 81: Computed 10 numeric contouring constraints for visualization (s=22.085)
2025-12-01 13:45:33,492 - DEBUG - integration_test - Step 81: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:33,492 - INFO - integration_test - === Applying control at step 81 ===
2025-12-01 13:45:33,492 - INFO - integration_test -   Control dict from planner: {'a': -2.000000008828701, 'w': 0.7999998329932341}
2025-12-01 13:45:33,493 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:33,493 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:33,494 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:33,494 - INFO - integration_test - Step 81 completed in 0.753s
2025-12-01 13:45:33,517 - INFO - integration_test - Step 82 (contouring until path end)
2025-12-01 13:45:33,519 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[20.79774709  5.2724548   0.34067445  2.80000003 22.36548022]
2025-12-01 13:45:33,520 - DEBUG - integration_test - Step 82: Using propagated spline 22.3655 (close to path, dist=0.306m)
2025-12-01 13:45:33,520 - DEBUG - integration_test -   Set spline state to 22.3655
2025-12-01 13:45:33,521 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:33,535 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(20.798, 5.272), path_start=(0.000, 0.000), dist=21.456m
2025-12-01 13:45:33,535 - WARNING - integration_test - Could not update reference path at step 82: x and y must have the same length
2025-12-01 13:45:33,536 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2025-12-01 13:45:33,538 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:33,540 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:33,540 - INFO - integration_test - Warmstart k=0: x0=20.79774709283586 , y0=5.272454802747244 , psi0=0.34067444592432844 , v0=2.8000000297719096 , spline0=22.365480218387642 , a0=0.0 , w0=0.0
2025-12-01 13:45:33,540 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:33,541 - INFO - integration_test - Dyn residual k=0: pred=[21.061655364634554, 5.36600920266223, 0.34067444592432844, 2.8000000297719096, 22.64548022136483], ws=[21.061655364634554, 5.36600920266223, 0.3406744459243285, 2.8000000297719096, 28.02738842016108], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -5.38190819879625], res_norm=5.382e+00
2025-12-01 13:45:33,541 - INFO - integration_test - Dyn residual k=1: pred=[21.325563636433248, 5.459563602577216, 0.3406744459243285, 2.8000000297719096, 28.30738842313827], ws=[21.325563636433248, 5.459563602577216, 0.3406744459243285, 2.8000000297719096, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.3766281214502385], res_norm=1.377e+00
2025-12-01 13:45:33,542 - INFO - integration_test - Dyn residual k=2: pred=[21.589471908231943, 5.5531180024922016, 0.3406744459243285, 2.8000000297719096, 29.9640165475657], ws=[21.589471908231943, 5.5531180024922016, 0.3406744459243285, 2.8000000297719096, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2800000029771894], res_norm=2.800e-01
2025-12-01 13:45:33,558 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,571 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,588 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,600 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,617 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,629 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,645 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,657 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,674 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,686 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,703 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,715 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,732 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,743 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,760 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,772 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,790 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,802 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,819 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,830 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:33,847 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:33,859 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,199 - INFO - integration_test - Step 82: MPC solve successful
2025-12-01 13:45:34,211 - INFO - integration_test - Step 82: Computed 10 numeric contouring constraints for visualization (s=22.365)
2025-12-01 13:45:34,211 - DEBUG - integration_test - Step 82: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:34,211 - INFO - integration_test - === Applying control at step 82 ===
2025-12-01 13:45:34,211 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000191569773, 'w': 0.7999999202549583}
2025-12-01 13:45:34,211 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:34,211 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:34,212 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:34,213 - INFO - integration_test - Step 82 completed in 0.693s
2025-12-01 13:45:34,236 - INFO - integration_test - Step 83 (contouring until path end)
2025-12-01 13:45:34,237 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.04840164  5.37262191  0.42067444  2.60000003 22.62548022]
2025-12-01 13:45:34,238 - DEBUG - integration_test - Step 83: Using propagated spline 22.6255 (close to path, dist=0.368m)
2025-12-01 13:45:34,238 - DEBUG - integration_test -   Set spline state to 22.6255
2025-12-01 13:45:34,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:34,253 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.048, 5.373), path_start=(0.000, 0.000), dist=21.723m
2025-12-01 13:45:34,254 - WARNING - integration_test - Could not update reference path at step 83: x and y must have the same length
2025-12-01 13:45:34,254 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2025-12-01 13:45:34,257 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:34,258 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:34,259 - INFO - integration_test - Warmstart k=0: x0=21.048401635174525 , y0=5.372621913629549 , psi0=0.4206744379498243 , v0=2.600000027856212 , spline0=22.625480221173262 , a0=0.0 , w0=0.0
2025-12-01 13:45:34,259 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:34,260 - INFO - integration_test - Dyn residual k=0: pred=[21.285733205838294, 5.478799722115082, 0.4206744379498243, 2.600000027856212, 22.885480223958883], ws=[21.285733205838294, 5.478799722115082, 0.4206744379498244, 2.600000027856212, 28.271411384943328], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.385931160984445], res_norm=5.386e+00
2025-12-01 13:45:34,261 - INFO - integration_test - Dyn residual k=1: pred=[21.523064776502064, 5.584977530600614, 0.4206744379498244, 2.600000027856212, 28.531411387728948], ws=[21.523064776502064, 5.584977530600614, 0.4206744379498244, 2.600000027856212, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1526051568595612], res_norm=1.153e+00
2025-12-01 13:45:34,261 - INFO - integration_test - Dyn residual k=2: pred=[21.760396347165834, 5.691155339086147, 0.4206744379498244, 2.600000027856212, 29.94401654737413], ws=[21.760396347165834, 5.691155339086147, 0.4206744379498244, 2.600000027856212, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2600000027856204], res_norm=2.600e-01
2025-12-01 13:45:34,278 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,290 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,307 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,319 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,336 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,349 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,366 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,378 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,395 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,407 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,424 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,436 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,453 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,465 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,494 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,511 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,523 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,540 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,551 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,569 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:34,581 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:34,951 - INFO - integration_test - Step 83: MPC solve successful
2025-12-01 13:45:34,964 - INFO - integration_test - Step 83: Computed 10 numeric contouring constraints for visualization (s=22.625)
2025-12-01 13:45:34,964 - DEBUG - integration_test - Step 83: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:34,964 - INFO - integration_test - === Applying control at step 83 ===
2025-12-01 13:45:34,964 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000195185916, 'w': 0.7999998381880955}
2025-12-01 13:45:34,964 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:34,964 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:34,965 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:34,966 - INFO - integration_test - Step 83 completed in 0.729s
2025-12-01 13:45:34,993 - INFO - integration_test - Step 84 (contouring until path end)
2025-12-01 13:45:34,994 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[21.27233941  5.48361096  0.50067442  2.40000003 22.86548022]
2025-12-01 13:45:34,994 - DEBUG - integration_test - Step 84: Using propagated spline 22.8655 (close to path, dist=0.333m)
2025-12-01 13:45:34,995 - DEBUG - integration_test -   Set spline state to 22.8655
2025-12-01 13:45:34,995 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:35,009 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(21.272, 5.484), path_start=(0.000, 0.000), dist=21.968m
2025-12-01 13:45:35,010 - WARNING - integration_test - Could not update reference path at step 84: x and y must have the same length
2025-12-01 13:45:35,010 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2025-12-01 13:45:35,013 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:35,014 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:35,014 - INFO - integration_test - Warmstart k=0: x0=21.27233940701192 , y0=5.483610962745678 , psi0=0.5006744217686339 , v0=2.400000025904353 , spline0=22.865480223763697 , a0=0.0 , w0=0.0
2025-12-01 13:45:35,014 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:35,015 - INFO - integration_test - Dyn residual k=0: pred=[21.4828815758396, 5.598815113663716, 0.5006744217686339, 2.400000025904353, 23.105480226354132], ws=[21.4828815758396, 5.598815113663716, 0.5006744217686339, 2.400000025904353, 28.558080835238837], res=[0.0, 0.0, 0.0, 0.0, -5.452600608884705], res_norm=5.453e+00
2025-12-01 13:45:35,016 - INFO - integration_test - Dyn residual k=1: pred=[21.693423744667278, 5.714019264581753, 0.5006744217686339, 2.400000025904353, 28.79808083782927], ws=[21.693423744667278, 5.714019264581753, 0.5006744217686339, 2.400000025904353, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.8859357067592377], res_norm=8.859e-01
2025-12-01 13:45:35,016 - INFO - integration_test - Dyn residual k=2: pred=[21.903965913494957, 5.829223415499791, 0.5006744217686339, 2.400000025904353, 29.924016547178944], ws=[21.903965913494957, 5.829223415499791, 0.5006744217686339, 2.400000025904353, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.24000000259043475], res_norm=2.400e-01
2025-12-01 13:45:35,032 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,045 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,062 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,074 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,092 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,104 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,121 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,133 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,150 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,163 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,179 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,191 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,208 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,220 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,237 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,249 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,266 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,279 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,296 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,308 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,324 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,336 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,768 - INFO - integration_test - Step 84: MPC solve successful
2025-12-01 13:45:35,780 - INFO - integration_test - Step 84: Computed 10 numeric contouring constraints for visualization (s=22.865)
2025-12-01 13:45:35,781 - DEBUG - integration_test - Step 84: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:35,781 - INFO - integration_test - === Applying control at step 84 ===
2025-12-01 13:45:35,781 - INFO - integration_test -   Control dict from planner: {'a': -1.9999992672167084, 'w': 0.7991912448316597}
2025-12-01 13:45:35,781 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:35,781 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:35,782 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:35,782 - INFO - integration_test - Step 84 completed in 0.788s
2025-12-01 13:45:35,806 - INFO - integration_test - Step 85 (contouring until path end)
2025-12-01 13:45:35,808 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[21.46955346  5.60184162  0.58059355  2.2000001  23.08548023]
2025-12-01 13:45:35,808 - DEBUG - integration_test - Step 85: Using propagated spline 23.0855 (close to path, dist=0.346m)
2025-12-01 13:45:35,808 - DEBUG - integration_test -   Set spline state to 23.0855
2025-12-01 13:45:35,809 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:35,824 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(21.470, 5.602), path_start=(0.000, 0.000), dist=22.188m
2025-12-01 13:45:35,824 - WARNING - integration_test - Could not update reference path at step 85: x and y must have the same length
2025-12-01 13:45:35,824 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2025-12-01 13:45:35,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:35,828 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:35,828 - INFO - integration_test - Warmstart k=0: x0=21.469553463460837 , y0=5.6018416174881915 , psi0=0.5805935462517998 , v0=2.200000099182682 , spline0=23.085480233681967 , a0=0.0 , w0=0.0
2025-12-01 13:45:35,828 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:35,829 - INFO - integration_test - Dyn residual k=0: pred=[21.65350366126245, 5.722516093218501, 0.5805935462517998, 2.200000099182682, 23.305480243600236], ws=[21.65350366126245, 5.722516093218501, 0.5805935462517997, 2.200000099182682, 28.75222219556929], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.446741951969052], res_norm=5.447e+00
2025-12-01 13:45:35,830 - INFO - integration_test - Dyn residual k=1: pred=[21.837453859064066, 5.843190568948811, 0.5805935462517997, 2.200000099182682, 28.972222205487558], ws=[21.837453859064066, 5.843190568948811, 0.5805935462517997, 2.200000099182682, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7117943391009511], res_norm=7.118e-01
2025-12-01 13:45:35,831 - INFO - integration_test - Dyn residual k=2: pred=[22.02140405686568, 5.96386504467912, 0.5805935462517997, 2.200000099182682, 29.90401655450678], ws=[22.02140405686568, 5.96386504467912, 0.5805935462517997, 2.200000099182682, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2200000099182695], res_norm=2.200e-01
2025-12-01 13:45:35,847 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,859 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,876 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,888 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,906 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,918 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,934 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,946 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,963 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:35,975 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:35,992 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,004 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,021 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,033 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,049 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,062 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,079 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,091 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,108 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,120 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,136 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,148 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,616 - INFO - integration_test - Step 85: MPC solve successful
2025-12-01 13:45:36,627 - INFO - integration_test - Step 85: Computed 10 numeric contouring constraints for visualization (s=23.085)
2025-12-01 13:45:36,627 - DEBUG - integration_test - Step 85: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:36,627 - INFO - integration_test - === Applying control at step 85 ===
2025-12-01 13:45:36,628 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019222991, 'w': 0.7999965758135829}
2025-12-01 13:45:36,628 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:36,628 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:36,629 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:36,629 - INFO - integration_test - Step 85 completed in 0.822s
2025-12-01 13:45:36,653 - INFO - integration_test - Step 86 (contouring until path end)
2025-12-01 13:45:36,654 - DEBUG - integration_test - Syncing planner state at step 86: vehicle_state=[21.64042748  5.7238194   0.6605932   2.0000001  23.28548024]
2025-12-01 13:45:36,655 - DEBUG - integration_test - Step 86: Using propagated spline 23.2855 (close to path, dist=0.461m)
2025-12-01 13:45:36,655 - DEBUG - integration_test -   Set spline state to 23.2855
2025-12-01 13:45:36,655 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:36,670 - DEBUG - integration_test - Step 86: Checking path alignment: vehicle=(21.640, 5.724), path_start=(0.000, 0.000), dist=22.385m
2025-12-01 13:45:36,670 - WARNING - integration_test - Could not update reference path at step 86: x and y must have the same length
2025-12-01 13:45:36,670 - INFO - integration_test - === Calling planner.solve_mpc() at step 86 ===
2025-12-01 13:45:36,673 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:36,674 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:36,674 - INFO - integration_test - Warmstart k=0: x0=21.64042747850619 , y0=5.723819399669059 , psi0=0.6605932038331581 , v0=2.000000097260383 , spline0=23.285480243408006 , a0=0.0 , w0=0.0
2025-12-01 13:45:36,674 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:36,675 - INFO - integration_test - Dyn residual k=0: pred=[21.798353164037433, 5.846536479734965, 0.6605932038331581, 2.000000097260383, 23.485480253134046], ws=[21.798353164037433, 5.846536479734965, 0.6605932038331579, 2.000000097260383, 28.984911012251636], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.49943075911759], res_norm=5.499e+00
2025-12-01 13:45:36,676 - INFO - integration_test - Dyn residual k=1: pred=[21.956278849568676, 5.969253559800871, 0.6605932038331579, 2.000000097260383, 29.184911021977676], ws=[21.956278849568676, 5.969253559800871, 0.6605932038331579, 2.000000097260383, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.49910552261083296], res_norm=4.991e-01
2025-12-01 13:45:36,677 - INFO - integration_test - Dyn residual k=2: pred=[22.11420453509992, 6.091970639866776, 0.6605932038331579, 2.000000097260383, 29.88401655431455], ws=[22.11420453509992, 6.091970639866776, 0.6605932038331579, 2.000000097260383, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2000000097260397], res_norm=2.000e-01
2025-12-01 13:45:36,694 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,706 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,735 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,752 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,764 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,781 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,793 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,810 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,822 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,839 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,851 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,867 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,879 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,908 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,924 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,936 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,953 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,967 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:36,985 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:36,998 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,337 - INFO - integration_test - Step 86: MPC solve successful
2025-12-01 13:45:37,348 - INFO - integration_test - Step 86: Computed 10 numeric contouring constraints for visualization (s=23.285)
2025-12-01 13:45:37,349 - DEBUG - integration_test - Step 86: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:37,349 - INFO - integration_test - === Applying control at step 86 ===
2025-12-01 13:45:37,349 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001759782, 'w': -0.2379535526184715}
2025-12-01 13:45:37,349 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:37,349 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:37,350 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:37,350 - INFO - integration_test - Step 86 completed in 0.697s
2025-12-01 13:45:37,374 - INFO - integration_test - Step 87 (contouring until path end)
2025-12-01 13:45:37,375 - DEBUG - integration_test - Syncing planner state at step 87: vehicle_state=[21.80779074  5.85065577  0.63679785  2.2000001  23.50548025]
2025-12-01 13:45:37,376 - DEBUG - integration_test - Step 87: Using propagated spline 23.5055 (close to path, dist=0.409m)
2025-12-01 13:45:37,376 - DEBUG - integration_test -   Set spline state to 23.5055
2025-12-01 13:45:37,376 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:37,391 - DEBUG - integration_test - Step 87: Checking path alignment: vehicle=(21.808, 5.851), path_start=(0.000, 0.000), dist=22.579m
2025-12-01 13:45:37,392 - WARNING - integration_test - Could not update reference path at step 87: x and y must have the same length
2025-12-01 13:45:37,392 - INFO - integration_test - === Calling planner.solve_mpc() at step 87 ===
2025-12-01 13:45:37,394 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:37,396 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:37,396 - INFO - integration_test - Warmstart k=0: x0=21.807790737476786 , y0=5.850655768411276 , psi0=0.6367978485713109 , v0=2.2000000990201647 , spline0=23.505480253310022 , a0=0.0 , w0=0.0
2025-12-01 13:45:37,396 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:37,397 - INFO - integration_test - Dyn residual k=0: pred=[21.984671615010328, 5.981473043722494, 0.6367978485713109, 2.2000000990201647, 23.725480263212038], ws=[21.984671615010328, 5.981473043722494, 0.636797848571311, 2.2000000990201647, 29.281585913671034], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.556105650458996], res_norm=5.556e+00
2025-12-01 13:45:37,398 - INFO - integration_test - Dyn residual k=1: pred=[22.16155249254387, 6.112290319033713, 0.636797848571311, 2.2000000990201647, 29.50158592357305], ws=[22.16155249254387, 6.112290319033713, 0.636797848571311, 2.2000000990201647, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.1824306210154596], res_norm=1.824e-01
2025-12-01 13:45:37,399 - INFO - integration_test - Dyn residual k=2: pred=[22.33843337007741, 6.243107594344932, 0.636797848571311, 2.2000000990201647, 29.904016554490525], ws=[22.33843337007741, 6.243107594344932, 0.636797848571311, 2.2000000990201647, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.22000000990201585], res_norm=2.200e-01
2025-12-01 13:45:37,415 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,427 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,444 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,456 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,473 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,486 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,503 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,515 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,532 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,544 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,560 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,573 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,590 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,602 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,618 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,630 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,647 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,659 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,675 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,687 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:37,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:37,716 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,085 - INFO - integration_test - Step 87: MPC solve successful
2025-12-01 13:45:38,096 - INFO - integration_test - Step 87: Computed 10 numeric contouring constraints for visualization (s=23.505)
2025-12-01 13:45:38,097 - DEBUG - integration_test - Step 87: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:38,097 - INFO - integration_test - === Applying control at step 87 ===
2025-12-01 13:45:38,097 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199835823, 'w': -0.1760993980834806}
2025-12-01 13:45:38,097 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:38,097 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:38,098 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:38,098 - INFO - integration_test - Step 87 completed in 0.724s
2025-12-01 13:45:38,123 - INFO - integration_test - Step 88 (contouring until path end)
2025-12-01 13:45:38,124 - DEBUG - integration_test - Syncing planner state at step 88: vehicle_state=[21.99392351  5.98576028  0.61918791  2.4000001  23.74548026]
2025-12-01 13:45:38,125 - DEBUG - integration_test - Step 88: Using propagated spline 23.7455 (close to path, dist=0.464m)
2025-12-01 13:45:38,125 - DEBUG - integration_test -   Set spline state to 23.7455
2025-12-01 13:45:38,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:38,140 - DEBUG - integration_test - Step 88: Checking path alignment: vehicle=(21.994, 5.986), path_start=(0.000, 0.000), dist=22.794m
2025-12-01 13:45:38,141 - WARNING - integration_test - Could not update reference path at step 88: x and y must have the same length
2025-12-01 13:45:38,141 - INFO - integration_test - === Calling planner.solve_mpc() at step 88 ===
2025-12-01 13:45:38,143 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:38,144 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:38,145 - INFO - integration_test - Warmstart k=0: x0=21.993923508129683 , y0=5.985760283882608 , psi0=0.6191879087629629 , v0=2.400000101018523 , spline0=23.745480263411874 , a0=0.0 , w0=0.0
2025-12-01 13:45:38,145 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:38,146 - INFO - integration_test - Dyn residual k=0: pred=[22.18936752638806, 6.125050055854234, 0.6191879087629629, 2.400000101018523, 23.985480273513726], ws=[22.18936752638806, 6.125050055854234, 0.6191879087629628, 2.400000101018523, 29.541661990444787], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.556181716931061], res_norm=5.556e+00
2025-12-01 13:45:38,146 - INFO - integration_test - Dyn residual k=1: pred=[22.38481154464644, 6.26433982782586, 0.6191879087629628, 2.400000101018523, 29.78166200054664], ws=[22.38481154464644, 6.26433982782586, 0.6191879087629628, 2.400000101018523, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.0976454559581299], res_norm=9.765e-02
2025-12-01 13:45:38,147 - INFO - integration_test - Dyn residual k=2: pred=[22.580255562904817, 6.403629599797486, 0.6191879087629628, 2.400000101018523, 29.92401655469036], ws=[22.580255562904817, 6.403629599797486, 0.6191879087629628, 2.400000101018523, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.240000010101852], res_norm=2.400e-01
2025-12-01 13:45:38,163 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,176 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,193 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,206 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,223 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,235 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,251 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,263 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,280 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,292 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,309 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,320 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,337 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,348 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,364 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,376 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,393 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,405 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,422 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,434 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,451 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,463 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:38,894 - INFO - integration_test - Step 88: MPC solve successful
2025-12-01 13:45:38,905 - INFO - integration_test - Step 88: Computed 10 numeric contouring constraints for visualization (s=23.745)
2025-12-01 13:45:38,906 - DEBUG - integration_test - Step 88: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:38,906 - INFO - integration_test - === Applying control at step 88 ===
2025-12-01 13:45:38,906 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019987662, 'w': 0.027457027448589286}
2025-12-01 13:45:38,906 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:38,906 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:38,907 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:38,907 - INFO - integration_test - Step 88 completed in 0.783s
2025-12-01 13:45:38,932 - INFO - integration_test - Step 89 (contouring until path end)
2025-12-01 13:45:38,933 - DEBUG - integration_test - Syncing planner state at step 89: vehicle_state=[22.19730892  6.13113683  0.62193361  2.6000001  24.00548027]
2025-12-01 13:45:38,934 - INFO - integration_test - Step 89: Re-initialized spline from 24.0055 to 23.6261 (vehicle at (22.20, 6.13), closest path point at (22.06, 5.53), distance=0.621m)
2025-12-01 13:45:38,934 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 13:45:38,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:38,949 - DEBUG - integration_test - Step 89: Checking path alignment: vehicle=(22.197, 6.131), path_start=(0.000, 0.000), dist=23.028m
2025-12-01 13:45:38,949 - WARNING - integration_test - Could not update reference path at step 89: x and y must have the same length
2025-12-01 13:45:38,949 - INFO - integration_test - === Calling planner.solve_mpc() at step 89 ===
2025-12-01 13:45:38,952 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:38,953 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:38,953 - INFO - integration_test - Warmstart k=0: x0=22.19730891837776 , y0=6.131136832043058 , psi0=0.6219336115078219 , v0=2.600000103017289 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 13:45:38,953 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:38,954 - INFO - integration_test - Dyn residual k=0: pred=[22.408624821047592, 6.282614865551992, 0.6219336115078219, 2.600000103017289, 23.886053994770133], ws=[22.408624821047592, 6.282614865551992, 0.621933611507822, 2.600000103017289, 29.41226652795758], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.526212533187447], res_norm=5.526e+00
2025-12-01 13:45:38,955 - INFO - integration_test - Dyn residual k=1: pred=[22.619940723717423, 6.434092899060925, 0.621933611507822, 2.600000103017289, 29.672266538259308], ws=[22.619940723717423, 6.434092899060925, 0.621933611507822, 2.600000103017289, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.011750006329201312], res_norm=1.175e-02
2025-12-01 13:45:38,956 - INFO - integration_test - Dyn residual k=2: pred=[22.831256626387255, 6.585570932569858, 0.621933611507822, 2.600000103017289, 29.944016554890236], ws=[22.831256626387255, 6.585570932569858, 0.621933611507822, 2.600000103017289, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.26000001030172726], res_norm=2.600e-01
2025-12-01 13:45:38,972 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:38,984 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,003 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,016 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,035 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,048 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,066 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,078 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,096 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,108 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,125 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,137 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,153 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,165 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,181 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,194 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,211 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,223 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,239 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,251 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,268 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,280 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,747 - INFO - integration_test - Step 89: MPC solve successful
2025-12-01 13:45:39,759 - INFO - integration_test - Step 89: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 13:45:39,759 - DEBUG - integration_test - Step 89: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:39,759 - INFO - integration_test - === Applying control at step 89 ===
2025-12-01 13:45:39,759 - INFO - integration_test -   Control dict from planner: {'a': 1.9999993225605763, 'w': 0.5665116936107364}
2025-12-01 13:45:39,759 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:39,759 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:39,760 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:39,761 - INFO - integration_test - Step 89 completed in 0.828s
2025-12-01 13:45:39,790 - INFO - integration_test - Step 90 (contouring until path end)
2025-12-01 13:45:39,792 - DEBUG - integration_test - Syncing planner state at step 90: vehicle_state=[22.4121233   6.29464616  0.67858478  2.80000004 23.90605399]
2025-12-01 13:45:39,792 - INFO - integration_test - Step 90: Re-initialized spline from 23.9061 to 24.2319 (vehicle at (22.41, 6.29), closest path point at (22.90, 6.00), distance=0.567m)
2025-12-01 13:45:39,792 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 13:45:39,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:39,807 - DEBUG - integration_test - Step 90: Checking path alignment: vehicle=(22.412, 6.295), path_start=(0.000, 0.000), dist=23.279m
2025-12-01 13:45:39,808 - WARNING - integration_test - Could not update reference path at step 90: x and y must have the same length
2025-12-01 13:45:39,808 - INFO - integration_test - === Calling planner.solve_mpc() at step 90 ===
2025-12-01 13:45:39,810 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:39,811 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:39,812 - INFO - integration_test - Warmstart k=0: x0=22.41212330163227 , y0=6.294646156449107 , psi0=0.6785847808688955 , v0=2.8000000352733467 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 13:45:39,812 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:39,812 - INFO - integration_test - Dyn residual k=0: pred=[22.630092613891986, 6.4703999071582565, 0.6785847808688955, 2.8000000352733467, 24.51185024400775], ws=[22.630092613891986, 6.4703999071582565, 0.6785847808688956, 2.8000000352733467, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.172166300580759], res_norm=5.172e+00
2025-12-01 13:45:39,813 - INFO - integration_test - Dyn residual k=1: pred=[22.8480619261517, 6.646153657867406, 0.6785847808688956, 2.8000000352733467, 29.964016548115843], ws=[22.8480619261517, 6.646153657867406, 0.6785847808688956, 2.8000000352733467, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000352733423], res_norm=2.800e-01
2025-12-01 13:45:39,814 - INFO - integration_test - Dyn residual k=2: pred=[23.066031238411416, 6.821907408576555, 0.6785847808688956, 2.8000000352733467, 29.964016548115843], ws=[23.066031238411416, 6.821907408576555, 0.6785847808688956, 2.8000000352733467, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000352733423], res_norm=2.800e-01
2025-12-01 13:45:39,831 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,843 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,872 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,890 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,902 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,919 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,931 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,948 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,960 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:39,977 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:39,989 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,005 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,017 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,034 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,046 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,063 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,075 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,092 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,104 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,121 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,133 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,584 - INFO - integration_test - Step 90: MPC solve successful
2025-12-01 13:45:40,595 - INFO - integration_test - Step 90: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 13:45:40,596 - DEBUG - integration_test - Step 90: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:40,596 - INFO - integration_test - === Applying control at step 90 ===
2025-12-01 13:45:40,596 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999472595464, 'w': -0.7863274010514648}
2025-12-01 13:45:40,596 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:40,596 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:40,597 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:40,597 - INFO - integration_test - Step 90 completed in 0.806s
2025-12-01 13:45:40,621 - INFO - integration_test - Step 91 (contouring until path end)
2025-12-01 13:45:40,623 - DEBUG - integration_test - Syncing planner state at step 91: vehicle_state=[22.64487593  6.4675129   0.59995204  3.00000003 24.53185024]
2025-12-01 13:45:40,624 - INFO - integration_test - Step 91: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (22.64, 6.47), closest path point at (22.90, 6.00), distance=0.531m)
2025-12-01 13:45:40,624 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 13:45:40,624 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:40,639 - DEBUG - integration_test - Step 91: Checking path alignment: vehicle=(22.645, 6.468), path_start=(0.000, 0.000), dist=23.550m
2025-12-01 13:45:40,639 - WARNING - integration_test - Could not update reference path at step 91: x and y must have the same length
2025-12-01 13:45:40,639 - INFO - integration_test - === Calling planner.solve_mpc() at step 91 ===
2025-12-01 13:45:40,642 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:40,643 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:40,643 - INFO - integration_test - Warmstart k=0: x0=22.644875929874818 , y0=6.467512899885089 , psi0=0.5999520407637491 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 13:45:40,643 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:40,644 - INFO - integration_test - Dyn residual k=0: pred=[22.8924847380095, 6.636893766969073, 0.5999520407637491, 3.0, 24.531850240480416], ws=[22.8924847380095, 6.636893766969073, 0.5999520407637489, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 13:45:40,645 - INFO - integration_test - Dyn residual k=1: pred=[23.140093546144183, 6.806274634053056, 0.5999520407637489, 3.0, 29.98401654458851], ws=[23.140093546144183, 6.806274634053056, 0.5999520407637489, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:40,646 - INFO - integration_test - Dyn residual k=2: pred=[23.387702354278865, 6.97565550113704, 0.5999520407637489, 3.0, 29.98401654458851], ws=[23.387702354278865, 6.97565550113704, 0.5999520407637489, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:40,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,674 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,691 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,703 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,720 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,732 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,748 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,760 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,777 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,789 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,806 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,818 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,835 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,847 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,864 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,876 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,893 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,905 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,922 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,934 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:40,950 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:40,963 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,320 - INFO - integration_test - Step 91: MPC solve successful
2025-12-01 13:45:41,331 - INFO - integration_test - Step 91: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 13:45:41,331 - DEBUG - integration_test - Step 91: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:41,332 - INFO - integration_test - === Applying control at step 91 ===
2025-12-01 13:45:41,332 - INFO - integration_test -   Control dict from planner: {'a': -7.857122002987773e-13, 'w': 0.163766476323617}
2025-12-01 13:45:41,332 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:41,332 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:41,333 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:41,333 - INFO - integration_test - Step 91 completed in 0.710s
2025-12-01 13:45:41,357 - INFO - integration_test - Step 92 (contouring until path end)
2025-12-01 13:45:41,361 - DEBUG - integration_test - Syncing planner state at step 92: vehicle_state=[22.89108676  6.63891365  0.61632869  3.00000003 24.53185024]
2025-12-01 13:45:41,362 - INFO - integration_test - Step 92: Re-initialized spline from 24.5319 to 24.8376 (vehicle at (22.89, 6.64), closest path point at (23.38, 6.30), distance=0.595m)
2025-12-01 13:45:41,362 - DEBUG - integration_test -   Set spline state to 24.8376
2025-12-01 13:45:41,362 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:41,377 - DEBUG - integration_test - Step 92: Checking path alignment: vehicle=(22.891, 6.639), path_start=(0.000, 0.000), dist=23.834m
2025-12-01 13:45:41,377 - WARNING - integration_test - Could not update reference path at step 92: x and y must have the same length
2025-12-01 13:45:41,377 - INFO - integration_test - === Calling planner.solve_mpc() at step 92 ===
2025-12-01 13:45:41,380 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:41,381 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:41,381 - INFO - integration_test - Warmstart k=0: x0=22.891086758345125 , y0=6.638913653404293 , psi0=0.6163286883961108 , v0=3.0 , spline0=24.837646496492425 , a0=0.0 , w0=0.0
2025-12-01 13:45:41,381 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:41,382 - INFO - integration_test - Dyn residual k=0: pred=[23.135888596763643, 6.812326628428986, 0.6163286883961108, 3.0, 25.137646496492426], ws=[23.135888596763643, 6.812326628428986, 0.616328688396111, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.546370048096083], res_norm=4.546e+00
2025-12-01 13:45:41,383 - INFO - integration_test - Dyn residual k=1: pred=[23.38069043518216, 6.985739603453679, 0.616328688396111, 3.0, 29.98401654458851], ws=[23.38069043518216, 6.985739603453679, 0.616328688396111, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:41,384 - INFO - integration_test - Dyn residual k=2: pred=[23.625492273600678, 7.159152578478372, 0.616328688396111, 3.0, 29.98401654458851], ws=[23.625492273600678, 7.159152578478372, 0.616328688396111, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:41,400 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,412 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,429 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,442 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,459 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,471 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,488 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,500 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,517 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,528 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,545 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,557 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,574 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,586 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,603 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,615 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,631 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,643 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,660 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,672 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:41,689 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:41,701 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,030 - INFO - integration_test - Step 92: MPC solve successful
2025-12-01 13:45:42,041 - INFO - integration_test - Step 92: Computed 10 numeric contouring constraints for visualization (s=24.838)
2025-12-01 13:45:42,042 - DEBUG - integration_test - Step 92: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:42,042 - INFO - integration_test - === Applying control at step 92 ===
2025-12-01 13:45:42,042 - INFO - integration_test -   Control dict from planner: {'a': 3.1705805484169354e-12, 'w': 0.08420396123618751}
2025-12-01 13:45:42,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:42,042 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:42,043 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:42,044 - INFO - integration_test - Step 92 completed in 0.683s
2025-12-01 13:45:42,066 - INFO - integration_test - Step 93 (contouring until path end)
2025-12-01 13:45:42,068 - DEBUG - integration_test - Syncing planner state at step 93: vehicle_state=[23.13515561  6.81335524  0.62474908  3.00000003 25.1376465 ]
2025-12-01 13:45:42,068 - INFO - integration_test - Step 93: Re-initialized spline from 25.1376 to 24.8376 (vehicle at (23.14, 6.81), closest path point at (23.38, 6.30), distance=0.568m)
2025-12-01 13:45:42,068 - DEBUG - integration_test -   Set spline state to 24.8376
2025-12-01 13:45:42,069 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:42,084 - DEBUG - integration_test - Step 93: Checking path alignment: vehicle=(23.135, 6.813), path_start=(0.000, 0.000), dist=24.118m
2025-12-01 13:45:42,084 - WARNING - integration_test - Could not update reference path at step 93: x and y must have the same length
2025-12-01 13:45:42,084 - INFO - integration_test - === Calling planner.solve_mpc() at step 93 ===
2025-12-01 13:45:42,087 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:42,089 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:42,089 - INFO - integration_test - Warmstart k=0: x0=23.13515560769047 , y0=6.813355239064738 , psi0=0.6247490845197295 , v0=3.0 , spline0=24.837646496492425 , a0=0.0 , w0=0.0
2025-12-01 13:45:42,089 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:42,090 - INFO - integration_test - Dyn residual k=0: pred=[23.378488578871984, 6.9888233704618, 0.6247490845197295, 3.0, 25.137646496492426], ws=[23.378488578871984, 6.9888233704618, 0.6247490845197294, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.546370048096083], res_norm=4.546e+00
2025-12-01 13:45:42,091 - INFO - integration_test - Dyn residual k=1: pred=[23.621821550053497, 7.1642915018588615, 0.6247490845197294, 3.0, 29.98401654458851], ws=[23.621821550053497, 7.1642915018588615, 0.6247490845197294, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:42,092 - INFO - integration_test - Dyn residual k=2: pred=[23.86515452123501, 7.339759633255923, 0.6247490845197294, 3.0, 29.98401654458851], ws=[23.86515452123501, 7.339759633255923, 0.6247490845197294, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:42,108 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,120 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,137 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,149 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,166 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,178 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,196 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,208 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,225 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,238 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,254 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,266 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,283 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,296 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,313 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,325 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,342 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,354 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,371 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,384 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,401 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,413 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,754 - INFO - integration_test - Step 93: MPC solve successful
2025-12-01 13:45:42,766 - INFO - integration_test - Step 93: Computed 10 numeric contouring constraints for visualization (s=24.838)
2025-12-01 13:45:42,766 - DEBUG - integration_test - Step 93: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:42,766 - INFO - integration_test - === Applying control at step 93 ===
2025-12-01 13:45:42,767 - INFO - integration_test -   Control dict from planner: {'a': -3.370025507574124e-11, 'w': -0.040356100820694685}
2025-12-01 13:45:42,767 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:42,767 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:42,768 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:42,768 - INFO - integration_test - Step 93 completed in 0.701s
2025-12-01 13:45:42,793 - INFO - integration_test - Step 94 (contouring until path end)
2025-12-01 13:45:42,793 - DEBUG - integration_test - Syncing planner state at step 94: vehicle_state=[23.37884198  6.9883319   0.62071347  3.00000003 25.1376465 ]
2025-12-01 13:45:42,794 - INFO - integration_test - Step 94: Re-initialized spline from 25.1376 to 25.4434 (vehicle at (23.38, 6.99), closest path point at (23.85, 6.62), distance=0.605m)
2025-12-01 13:45:42,794 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 13:45:42,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:42,809 - DEBUG - integration_test - Step 94: Checking path alignment: vehicle=(23.379, 6.988), path_start=(0.000, 0.000), dist=24.401m
2025-12-01 13:45:42,810 - WARNING - integration_test - Could not update reference path at step 94: x and y must have the same length
2025-12-01 13:45:42,810 - INFO - integration_test - === Calling planner.solve_mpc() at step 94 ===
2025-12-01 13:45:42,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:42,814 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:42,814 - INFO - integration_test - Warmstart k=0: x0=23.37884198081596 , y0=6.98833189809897 , psi0=0.6207134744376601 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 13:45:42,814 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:42,815 - INFO - integration_test - Dyn residual k=0: pred=[23.622881089559737, 7.162816606321617, 0.6207134744376601, 3.0, 25.743442752504436], ws=[23.622881089559737, 7.162816606321617, 0.6207134744376601, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 13:45:42,816 - INFO - integration_test - Dyn residual k=1: pred=[23.866920198303514, 7.3373013145442645, 0.6207134744376601, 3.0, 29.98401654458851], ws=[23.866920198303514, 7.3373013145442645, 0.6207134744376601, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:42,816 - INFO - integration_test - Dyn residual k=2: pred=[24.110959307047292, 7.511786022766912, 0.6207134744376601, 3.0, 29.98401654458851], ws=[24.110959307047292, 7.511786022766912, 0.6207134744376601, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:42,832 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,845 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,862 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,874 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,892 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,904 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,921 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,934 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,951 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,964 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:42,982 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:42,994 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,023 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,052 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,069 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,082 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,099 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,111 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,128 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,140 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,604 - INFO - integration_test - Step 94: MPC solve successful
2025-12-01 13:45:43,615 - INFO - integration_test - Step 94: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 13:45:43,615 - DEBUG - integration_test - Step 94: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:43,615 - INFO - integration_test - === Applying control at step 94 ===
2025-12-01 13:45:43,615 - INFO - integration_test -   Control dict from planner: {'a': 2.3550767086363326e-11, 'w': 0.060952683315215854}
2025-12-01 13:45:43,615 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:43,615 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:43,616 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:43,617 - INFO - integration_test - Step 94 completed in 0.824s
2025-12-01 13:45:43,641 - INFO - integration_test - Step 95 (contouring until path end)
2025-12-01 13:45:43,641 - DEBUG - integration_test - Syncing planner state at step 95: vehicle_state=[23.62234782  7.16355927  0.62680874  3.00000003 25.74344276]
2025-12-01 13:45:43,642 - INFO - integration_test - Step 95: Re-initialized spline from 25.7434 to 25.4434 (vehicle at (23.62, 7.16), closest path point at (23.85, 6.62), distance=0.596m)
2025-12-01 13:45:43,642 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 13:45:43,642 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:43,658 - DEBUG - integration_test - Step 95: Checking path alignment: vehicle=(23.622, 7.164), path_start=(0.000, 0.000), dist=24.685m
2025-12-01 13:45:43,658 - WARNING - integration_test - Could not update reference path at step 95: x and y must have the same length
2025-12-01 13:45:43,658 - INFO - integration_test - === Calling planner.solve_mpc() at step 95 ===
2025-12-01 13:45:43,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:43,662 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:43,662 - INFO - integration_test - Warmstart k=0: x0=23.622347816983478 , y0=7.163559267280854 , psi0=0.6268087427691817 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 13:45:43,662 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:43,663 - INFO - integration_test - Dyn residual k=0: pred=[23.865318867903746, 7.339528208900392, 0.6268087427691817, 3.0, 25.743442752504436], ws=[23.865318867903746, 7.339528208900392, 0.6268087427691817, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 13:45:43,664 - INFO - integration_test - Dyn residual k=1: pred=[24.108289918824013, 7.51549715051993, 0.6268087427691817, 3.0, 29.98401654458851], ws=[24.108289918824013, 7.51549715051993, 0.6268087427691817, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:43,665 - INFO - integration_test - Dyn residual k=2: pred=[24.35126096974428, 7.691466092139468, 0.6268087427691817, 3.0, 29.98401654458851], ws=[24.35126096974428, 7.691466092139468, 0.6268087427691817, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:43,681 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,693 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,712 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,724 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,741 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,753 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,770 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,782 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,799 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,811 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,828 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,840 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,856 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,869 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,886 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,898 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,915 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,927 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,944 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,957 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:43,976 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:43,991 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,413 - INFO - integration_test - Step 95: MPC solve successful
2025-12-01 13:45:44,424 - INFO - integration_test - Step 95: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 13:45:44,425 - DEBUG - integration_test - Step 95: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:44,425 - INFO - integration_test - === Applying control at step 95 ===
2025-12-01 13:45:44,425 - INFO - integration_test -   Control dict from planner: {'a': 8.36955198432945e-12, 'w': -0.025687815517153958}
2025-12-01 13:45:44,425 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:44,425 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:44,426 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:44,426 - INFO - integration_test - Step 95 completed in 0.785s
2025-12-01 13:45:44,450 - INFO - integration_test - Step 96 (contouring until path end)
2025-12-01 13:45:44,452 - DEBUG - integration_test - Syncing planner state at step 96: vehicle_state=[23.86554462  7.33921595  0.62423996  3.00000003 25.74344276]
2025-12-01 13:45:44,453 - INFO - integration_test - Step 96: Re-initialized spline from 25.7434 to 26.0492 (vehicle at (23.87, 7.34), closest path point at (24.32, 6.94), distance=0.605m)
2025-12-01 13:45:44,453 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 13:45:44,453 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:44,469 - DEBUG - integration_test - Step 96: Checking path alignment: vehicle=(23.866, 7.339), path_start=(0.000, 0.000), dist=24.969m
2025-12-01 13:45:44,469 - WARNING - integration_test - Could not update reference path at step 96: x and y must have the same length
2025-12-01 13:45:44,469 - INFO - integration_test - === Calling planner.solve_mpc() at step 96 ===
2025-12-01 13:45:44,472 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:44,473 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:44,473 - INFO - integration_test - Warmstart k=0: x0=23.865544615883863 , y0=7.339215947526053 , psi0=0.6242399612174664 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 13:45:44,473 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:44,474 - INFO - integration_test - Dyn residual k=0: pred=[24.10896689043927, 7.514560169701387, 0.6242399612174664, 3.0, 26.349239008516445], ws=[24.10896689043927, 7.514560169701387, 0.6242399612174663, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 13:45:44,475 - INFO - integration_test - Dyn residual k=1: pred=[24.352389164994676, 7.68990439187672, 0.6242399612174663, 3.0, 29.98401654458851], ws=[24.352389164994676, 7.68990439187672, 0.6242399612174663, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:44,476 - INFO - integration_test - Dyn residual k=2: pred=[24.595811439550083, 7.865248614052053, 0.6242399612174663, 3.0, 29.98401654458851], ws=[24.595811439550083, 7.865248614052053, 0.6242399612174663, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:44,493 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,507 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,525 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,537 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,554 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,567 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,584 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,596 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,616 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,628 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,657 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,674 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,686 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,703 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,715 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,732 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,744 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,761 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,773 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:44,791 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:44,803 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,229 - INFO - integration_test - Step 96: MPC solve successful
2025-12-01 13:45:45,240 - INFO - integration_test - Step 96: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 13:45:45,240 - DEBUG - integration_test - Step 96: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:45,240 - INFO - integration_test - === Applying control at step 96 ===
2025-12-01 13:45:45,240 - INFO - integration_test -   Control dict from planner: {'a': 2.838603549042453e-12, 'w': 0.02579248076550114}
2025-12-01 13:45:45,240 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:45,240 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:45,241 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:45,242 - INFO - integration_test - Step 96 completed in 0.790s
2025-12-01 13:45:45,263 - INFO - integration_test - Step 97 (contouring until path end)
2025-12-01 13:45:45,265 - DEBUG - integration_test - Syncing planner state at step 97: vehicle_state=[24.10874049  7.5148739   0.62681921  3.00000003 26.34923901]
2025-12-01 13:45:45,265 - INFO - integration_test - Step 97: Re-initialized spline from 26.3492 to 26.0492 (vehicle at (24.11, 7.51), closest path point at (24.32, 6.94), distance=0.614m)
2025-12-01 13:45:45,266 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 13:45:45,266 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:45,282 - DEBUG - integration_test - Step 97: Checking path alignment: vehicle=(24.109, 7.515), path_start=(0.000, 0.000), dist=25.253m
2025-12-01 13:45:45,283 - WARNING - integration_test - Could not update reference path at step 97: x and y must have the same length
2025-12-01 13:45:45,283 - INFO - integration_test - === Calling planner.solve_mpc() at step 97 ===
2025-12-01 13:45:45,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:45,287 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:45,287 - INFO - integration_test - Warmstart k=0: x0=24.108740494977468 , y0=7.514873900087181 , psi0=0.6268192092940165 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 13:45:45,287 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:45,288 - INFO - integration_test - Dyn residual k=0: pred=[24.35170970410113, 7.690845384759619, 0.6268192092940165, 3.0, 26.349239008516445], ws=[24.35170970410113, 7.690845384759619, 0.6268192092940166, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 13:45:45,289 - INFO - integration_test - Dyn residual k=1: pred=[24.59467891322479, 7.866816869432057, 0.6268192092940166, 3.0, 29.98401654458851], ws=[24.59467891322479, 7.866816869432057, 0.6268192092940166, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:45,290 - INFO - integration_test - Dyn residual k=2: pred=[24.83764812234845, 8.042788354104495, 0.6268192092940166, 3.0, 29.98401654458851], ws=[24.83764812234845, 8.042788354104495, 0.6268192092940166, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:45,305 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,318 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,335 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,347 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,364 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,376 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,394 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,406 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,423 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,435 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,452 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,464 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,481 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,494 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,511 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,523 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,553 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,570 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,581 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:45,599 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:45,611 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,230 - INFO - integration_test - Step 97: MPC solve successful
2025-12-01 13:45:46,242 - INFO - integration_test - Step 97: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 13:45:46,242 - DEBUG - integration_test - Step 97: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:46,242 - INFO - integration_test - === Applying control at step 97 ===
2025-12-01 13:45:46,242 - INFO - integration_test -   Control dict from planner: {'a': 9.783509625268902e-13, 'w': -0.012183852654869806}
2025-12-01 13:45:46,242 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:46,242 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:46,243 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:46,244 - INFO - integration_test - Step 97 completed in 0.979s
2025-12-01 13:45:46,266 - INFO - integration_test - Step 98 (contouring until path end)
2025-12-01 13:45:46,266 - DEBUG - integration_test - Syncing planner state at step 98: vehicle_state=[24.35181685  7.69069733  0.62560082  3.00000003 26.34923901]
2025-12-01 13:45:46,267 - INFO - integration_test - Step 98: Re-initialized spline from 26.3492 to 26.6550 (vehicle at (24.35, 7.69), closest path point at (24.77, 7.27), distance=0.598m)
2025-12-01 13:45:46,267 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 13:45:46,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:46,283 - DEBUG - integration_test - Step 98: Checking path alignment: vehicle=(24.352, 7.691), path_start=(0.000, 0.000), dist=25.537m
2025-12-01 13:45:46,284 - WARNING - integration_test - Could not update reference path at step 98: x and y must have the same length
2025-12-01 13:45:46,284 - INFO - integration_test - === Calling planner.solve_mpc() at step 98 ===
2025-12-01 13:45:46,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:46,288 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:46,288 - INFO - integration_test - Warmstart k=0: x0=24.351816846937528 , y0=7.6906973279467845 , psi0=0.6256008240285295 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 13:45:46,288 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:46,289 - INFO - integration_test - Dyn residual k=0: pred=[24.59500027673288, 7.866372651976568, 0.6256008240285295, 3.0, 26.95503526452846], ws=[24.59500027673288, 7.866372651976568, 0.6256008240285293, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 13:45:46,290 - INFO - integration_test - Dyn residual k=1: pred=[24.83818370652823, 8.042047976006351, 0.6256008240285293, 3.0, 29.98401654458851], ws=[24.83818370652823, 8.042047976006351, 0.6256008240285293, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:46,291 - INFO - integration_test - Dyn residual k=2: pred=[25.081367136323582, 8.217723300036134, 0.6256008240285293, 3.0, 29.98401654458851], ws=[25.081367136323582, 8.217723300036134, 0.6256008240285293, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:46,307 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,319 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,336 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,348 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,365 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,377 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,395 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,407 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,424 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,436 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,453 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,465 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,482 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,494 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,512 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,525 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,543 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,558 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,579 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,593 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:46,613 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:46,628 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,620 - INFO - integration_test - Step 98: MPC solve successful
2025-12-01 13:45:47,631 - INFO - integration_test - Step 98: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 13:45:47,632 - DEBUG - integration_test - Step 98: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:47,632 - INFO - integration_test - === Applying control at step 98 ===
2025-12-01 13:45:47,632 - INFO - integration_test -   Control dict from planner: {'a': 7.938169624763761e-13, 'w': 0.007700201774130379}
2025-12-01 13:45:47,632 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:47,632 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:47,633 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:47,633 - INFO - integration_test - Step 98 completed in 1.367s
2025-12-01 13:45:47,656 - INFO - integration_test - Step 99 (contouring until path end)
2025-12-01 13:45:47,661 - DEBUG - integration_test - Syncing planner state at step 99: vehicle_state=[24.59493262  7.86646626  0.62637084  3.00000003 26.95503527]
2025-12-01 13:45:47,661 - INFO - integration_test - Step 99: Re-initialized spline from 26.9550 to 26.6550 (vehicle at (24.59, 7.87), closest path point at (24.77, 7.27), distance=0.625m)
2025-12-01 13:45:47,662 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 13:45:47,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:47,677 - DEBUG - integration_test - Step 99: Checking path alignment: vehicle=(24.595, 7.866), path_start=(0.000, 0.000), dist=25.822m
2025-12-01 13:45:47,677 - WARNING - integration_test - Could not update reference path at step 99: x and y must have the same length
2025-12-01 13:45:47,677 - INFO - integration_test - === Calling planner.solve_mpc() at step 99 ===
2025-12-01 13:45:47,680 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:47,681 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:47,681 - INFO - integration_test - Warmstart k=0: x0=24.594932618363437 , y0=7.866466264442936 , psi0=0.6263708442059425 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 13:45:47,681 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:47,682 - INFO - integration_test - Dyn residual k=0: pred=[24.837980702532477, 8.042328792520292, 0.6263708442059425, 3.0, 26.95503526452846], ws=[24.837980702532477, 8.042328792520292, 0.6263708442059426, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 13:45:47,683 - INFO - integration_test - Dyn residual k=1: pred=[25.081028786701516, 8.218191320597649, 0.6263708442059426, 3.0, 29.98401654458851], ws=[25.081028786701516, 8.218191320597649, 0.6263708442059426, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:47,684 - INFO - integration_test - Dyn residual k=2: pred=[25.324076870870556, 8.394053848675005, 0.6263708442059426, 3.0, 29.98401654458851], ws=[25.324076870870556, 8.394053848675005, 0.6263708442059426, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:47,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,713 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,731 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,744 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,764 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,777 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,796 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,809 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,828 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,841 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,859 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,871 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,889 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,901 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,917 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,929 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,946 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,958 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:47,975 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:47,988 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:48,005 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:48,017 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:49,762 - INFO - integration_test - Step 99: MPC solve successful
2025-12-01 13:45:49,773 - INFO - integration_test - Step 99: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 13:45:49,773 - DEBUG - integration_test - Step 99: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:49,774 - INFO - integration_test - === Applying control at step 99 ===
2025-12-01 13:45:49,774 - INFO - integration_test -   Control dict from planner: {'a': -1.4929067692278613e-13, 'w': 0.0053575979138270014}
2025-12-01 13:45:49,774 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:49,774 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:49,775 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:49,775 - INFO - integration_test - Step 99 completed in 2.114s
2025-12-01 13:45:49,801 - INFO - integration_test - Step 100 (contouring until path end)
2025-12-01 13:45:49,803 - DEBUG - integration_test - Syncing planner state at step 100: vehicle_state=[24.83793358  8.04239389  0.6269066   3.00000003 26.95503527]
2025-12-01 13:45:49,803 - INFO - integration_test - Step 100: Re-initialized spline from 26.9550 to 27.2608 (vehicle at (24.84, 8.04), closest path point at (25.23, 7.61), distance=0.584m)
2025-12-01 13:45:49,803 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 13:45:49,804 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:49,819 - DEBUG - integration_test - Step 100: Checking path alignment: vehicle=(24.838, 8.042), path_start=(0.000, 0.000), dist=26.108m
2025-12-01 13:45:49,819 - WARNING - integration_test - Could not update reference path at step 100: x and y must have the same length
2025-12-01 13:45:49,819 - INFO - integration_test - === Calling planner.solve_mpc() at step 100 ===
2025-12-01 13:45:49,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:49,823 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:49,823 - INFO - integration_test - Warmstart k=0: x0=24.83793358330056 , y0=8.042393893560215 , psi0=0.6269066039973251 , v0=3.0 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 13:45:49,823 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:49,824 - INFO - integration_test - Dyn residual k=0: pred=[25.08088741252067, 8.21838661178255, 0.6269066039973251, 3.0, 27.560831520540468], ws=[25.08088741252067, 8.21838661178255, 0.626906603997325, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.123185024048041], res_norm=2.123e+00
2025-12-01 13:45:49,825 - INFO - integration_test - Dyn residual k=1: pred=[25.32384124174078, 8.394379330004886, 0.626906603997325, 3.0, 29.98401654458851], ws=[25.32384124174078, 8.394379330004886, 0.626906603997325, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:49,826 - INFO - integration_test - Dyn residual k=2: pred=[25.56679507096089, 8.570372048227222, 0.626906603997325, 3.0, 29.98401654458851], ws=[25.56679507096089, 8.570372048227222, 0.626906603997325, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:49,842 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:49,855 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:49,875 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:49,889 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:49,909 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:49,923 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:49,942 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:49,956 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:49,975 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:49,989 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,007 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,019 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,036 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,048 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,065 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,077 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,094 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,107 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,124 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,136 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,153 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,166 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,635 - INFO - integration_test - Step 100: MPC solve successful
2025-12-01 13:45:50,646 - INFO - integration_test - Step 100: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 13:45:50,646 - DEBUG - integration_test - Step 100: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:50,646 - INFO - integration_test - === Applying control at step 100 ===
2025-12-01 13:45:50,646 - INFO - integration_test -   Control dict from planner: {'a': -3.0402879905557283e-13, 'w': 0.002794458608422858}
2025-12-01 13:45:50,646 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:50,646 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:50,647 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:50,648 - INFO - integration_test - Step 100 completed in 0.845s
2025-12-01 13:45:50,671 - INFO - integration_test - Step 101 (contouring until path end)
2025-12-01 13:45:50,672 - DEBUG - integration_test - Syncing planner state at step 101: vehicle_state=[25.08086282  8.21842056  0.62718605  3.00000003 27.56083152]
2025-12-01 13:45:50,673 - INFO - integration_test - Step 101: Re-initialized spline from 27.5608 to 27.2608 (vehicle at (25.08, 8.22), closest path point at (25.23, 7.61), distance=0.629m)
2025-12-01 13:45:50,673 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 13:45:50,673 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:50,688 - DEBUG - integration_test - Step 101: Checking path alignment: vehicle=(25.081, 8.218), path_start=(0.000, 0.000), dist=26.393m
2025-12-01 13:45:50,688 - WARNING - integration_test - Could not update reference path at step 101: x and y must have the same length
2025-12-01 13:45:50,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 101 ===
2025-12-01 13:45:50,691 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:50,692 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:50,692 - INFO - integration_test - Warmstart k=0: x0=25.08086282156974 , y0=8.218420557473014 , psi0=0.6271860498581674 , v0=3.0 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 13:45:50,692 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:50,693 - INFO - integration_test - Dyn residual k=0: pred=[25.32376746086771, 8.394481161264782, 0.6271860498581674, 3.0, 27.560831520540468], ws=[25.32376746086771, 8.394481161264782, 0.6271860498581674, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.123185024048041], res_norm=2.123e+00
2025-12-01 13:45:50,694 - INFO - integration_test - Dyn residual k=1: pred=[25.566672100165682, 8.57054176505655, 0.6271860498581674, 3.0, 29.98401654458851], ws=[25.566672100165682, 8.57054176505655, 0.6271860498581674, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:50,694 - INFO - integration_test - Dyn residual k=2: pred=[25.809576739463655, 8.746602368848318, 0.6271860498581674, 3.0, 29.98401654458851], ws=[25.809576739463655, 8.746602368848318, 0.6271860498581674, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:50,710 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,723 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,740 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,752 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,769 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,782 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,799 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,811 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,828 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,840 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,857 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,870 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,887 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,900 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,917 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,929 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,945 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,957 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:50,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:50,988 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,005 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,017 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,505 - INFO - integration_test - Step 101: MPC solve successful
2025-12-01 13:45:51,516 - INFO - integration_test - Step 101: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 13:45:51,516 - DEBUG - integration_test - Step 101: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:51,516 - INFO - integration_test - === Applying control at step 101 ===
2025-12-01 13:45:51,516 - INFO - integration_test -   Control dict from planner: {'a': 1.7469627957388987e-13, 'w': -0.24258845071113533}
2025-12-01 13:45:51,517 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:51,517 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:51,518 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:51,518 - INFO - integration_test - Step 101 completed in 0.846s
2025-12-01 13:45:51,544 - INFO - integration_test - Step 102 (contouring until path end)
2025-12-01 13:45:51,545 - DEBUG - integration_test - Syncing planner state at step 102: vehicle_state=[25.32587905  8.39151775  0.6029272   3.00000003 27.56083152]
2025-12-01 13:45:51,545 - INFO - integration_test - Step 102: Re-initialized spline from 27.5608 to 27.8666 (vehicle at (25.33, 8.39), closest path point at (25.67, 7.95), distance=0.562m)
2025-12-01 13:45:51,546 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 13:45:51,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:51,560 - DEBUG - integration_test - Step 102: Checking path alignment: vehicle=(25.326, 8.392), path_start=(0.000, 0.000), dist=26.680m
2025-12-01 13:45:51,561 - WARNING - integration_test - Could not update reference path at step 102: x and y must have the same length
2025-12-01 13:45:51,561 - INFO - integration_test - === Calling planner.solve_mpc() at step 102 ===
2025-12-01 13:45:51,563 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:51,565 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:51,565 - INFO - integration_test - Warmstart k=0: x0=25.32587904822282 , y0=8.391517746641632 , psi0=0.6029272047870539 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 13:45:51,565 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:51,566 - INFO - integration_test - Dyn residual k=0: pred=[25.572982825372584, 8.561634539811267, 0.6029272047870539, 3.0, 28.166627776552478], ws=[25.572982825372584, 8.561634539811267, 0.6029272047870537, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 13:45:51,566 - INFO - integration_test - Dyn residual k=1: pred=[25.82008660252235, 8.731751332980902, 0.6029272047870537, 3.0, 29.98401654458851], ws=[25.82008660252235, 8.731751332980902, 0.6029272047870537, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:51,567 - INFO - integration_test - Dyn residual k=2: pred=[26.067190379672112, 8.901868126150537, 0.6029272047870537, 3.0, 29.98401654458851], ws=[26.067190379672112, 8.901868126150537, 0.6029272047870537, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:51,583 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,595 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,615 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,628 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,658 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,676 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,688 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,717 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,734 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,745 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,762 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,774 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,791 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,803 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,831 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,848 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,860 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:51,876 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:51,889 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,248 - INFO - integration_test - Step 102: MPC solve successful
2025-12-01 13:45:52,260 - INFO - integration_test - Step 102: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 13:45:52,260 - DEBUG - integration_test - Step 102: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:52,261 - INFO - integration_test - === Applying control at step 102 ===
2025-12-01 13:45:52,261 - INFO - integration_test -   Control dict from planner: {'a': -1.874905630840583e-08, 'w': 0.38138716322027943}
2025-12-01 13:45:52,261 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:52,261 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:52,262 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:52,262 - INFO - integration_test - Step 102 completed in 0.718s
2025-12-01 13:45:52,285 - INFO - integration_test - Step 103 (contouring until path end)
2025-12-01 13:45:52,288 - DEBUG - integration_test - Syncing planner state at step 103: vehicle_state=[25.5696793   8.56630484  0.64106592  3.00000003 28.16662778]
2025-12-01 13:45:52,289 - INFO - integration_test - Step 103: Re-initialized spline from 28.1666 to 28.4724 (vehicle at (25.57, 8.57), closest path point at (26.12, 8.30), distance=0.610m)
2025-12-01 13:45:52,289 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 13:45:52,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:52,303 - DEBUG - integration_test - Step 103: Checking path alignment: vehicle=(25.570, 8.566), path_start=(0.000, 0.000), dist=26.966m
2025-12-01 13:45:52,304 - WARNING - integration_test - Could not update reference path at step 103: x and y must have the same length
2025-12-01 13:45:52,304 - INFO - integration_test - === Calling planner.solve_mpc() at step 103 ===
2025-12-01 13:45:52,306 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:52,308 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:52,308 - INFO - integration_test - Warmstart k=0: x0=25.569679302797603 , y0=8.566304843022708 , psi0=0.6410659211090818 , v0=3.0 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 13:45:52,308 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:52,309 - INFO - integration_test - Dyn residual k=0: pred=[25.810116924531194, 8.745719864843888, 0.6410659211090818, 3.0, 28.772424032564487], ws=[25.810116924531194, 8.745719864843888, 0.6410659211090817, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.911592512024022], res_norm=9.116e-01
2025-12-01 13:45:52,310 - INFO - integration_test - Dyn residual k=1: pred=[26.050554546264785, 8.925134886665068, 0.6410659211090817, 3.0, 29.98401654458851], ws=[26.050554546264785, 8.925134886665068, 0.6410659211090817, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:52,310 - INFO - integration_test - Dyn residual k=2: pred=[26.290992167998375, 9.104549908486248, 0.6410659211090817, 3.0, 29.98401654458851], ws=[26.290992167998375, 9.104549908486248, 0.6410659211090817, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 13:45:52,326 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,339 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,356 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,368 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,398 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,415 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,427 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,444 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,455 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,472 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,484 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,501 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,513 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,529 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,541 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,558 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,570 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,588 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,599 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:52,616 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:52,627 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,108 - INFO - integration_test - Step 103: MPC solve successful
2025-12-01 13:45:53,119 - INFO - integration_test - Step 103: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 13:45:53,119 - DEBUG - integration_test - Step 103: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:53,119 - INFO - integration_test - === Applying control at step 103 ===
2025-12-01 13:45:53,119 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199842654, 'w': -0.015058611658807045}
2025-12-01 13:45:53,119 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:53,119 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:53,120 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:53,121 - INFO - integration_test - Step 103 completed in 0.833s
2025-12-01 13:45:53,144 - INFO - integration_test - Step 104 (contouring until path end)
2025-12-01 13:45:53,145 - DEBUG - integration_test - Syncing planner state at step 104: vehicle_state=[25.80223134  8.73956631  0.63956006  2.80000003 28.75242404]
2025-12-01 13:45:53,146 - INFO - integration_test - Step 104: Re-initialized spline from 28.7524 to 28.4724 (vehicle at (25.80, 8.74), closest path point at (26.12, 8.30), distance=0.543m)
2025-12-01 13:45:53,146 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 13:45:53,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:53,161 - DEBUG - integration_test - Step 104: Checking path alignment: vehicle=(25.802, 8.740), path_start=(0.000, 0.000), dist=27.242m
2025-12-01 13:45:53,161 - WARNING - integration_test - Could not update reference path at step 104: x and y must have the same length
2025-12-01 13:45:53,161 - INFO - integration_test - === Calling planner.solve_mpc() at step 104 ===
2025-12-01 13:45:53,164 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 13:45:53,165 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 13:45:53,165 - INFO - integration_test - Warmstart k=0: x0=25.80223133615236 , y0=8.739566314417637 , psi0=0.6395600599432011 , v0=2.8000000261264626 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 13:45:53,165 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 13:45:53,166 - INFO - integration_test - Dyn residual k=0: pred=[26.02689169317478, 8.906682218644738, 0.6395600599432011, 2.8000000261264626, 28.752424035177132], ws=[26.02689169317478, 8.906682218644738, 0.639560059943201, 2.8000000261264626, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.9315925094113773], res_norm=9.316e-01
2025-12-01 13:45:53,167 - INFO - integration_test - Dyn residual k=1: pred=[26.251552050197198, 9.073798122871839, 0.639560059943201, 2.8000000261264626, 29.964016547201155], ws=[26.251552050197198, 9.073798122871839, 0.639560059943201, 2.8000000261264626, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000261264546], res_norm=2.800e-01
2025-12-01 13:45:53,168 - INFO - integration_test - Dyn residual k=2: pred=[26.476212407219617, 9.24091402709894, 0.639560059943201, 2.8000000261264626, 29.964016547201155], ws=[26.476212407219617, 9.24091402709894, 0.639560059943201, 2.8000000261264626, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000261264546], res_norm=2.800e-01
2025-12-01 13:45:53,184 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,196 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,214 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,226 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,242 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,254 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,271 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,283 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,300 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,312 - INFO - integration_test - Stage 4: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,328 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,340 - INFO - integration_test - Stage 5: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,357 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,369 - INFO - integration_test - Stage 6: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,386 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,398 - INFO - integration_test - Stage 7: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,414 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,426 - INFO - integration_test - Stage 8: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,443 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,454 - INFO - integration_test - Stage 9: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,471 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 13:45:53,483 - INFO - integration_test - Stage 10: constraints count=3 (linearized=0, contouring=3, other=0)
2025-12-01 13:45:53,846 - INFO - integration_test - Step 104: MPC solve successful
2025-12-01 13:45:53,857 - INFO - integration_test - Step 104: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 13:45:53,857 - DEBUG - integration_test - Step 104: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 13:45:53,857 - INFO - integration_test - === Applying control at step 104 ===
2025-12-01 13:45:53,857 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000190307414, 'w': 0.7999999977537086}
2025-12-01 13:45:53,857 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 13:45:53,857 - INFO - integration_test -   Planner output success: True
2025-12-01 13:45:53,859 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 13:45:53,859 - INFO - integration_test - Goal reached at step 104!
2025-12-01 13:45:53,859 - INFO - integration_test - Step 104 completed in 0.714s
2025-12-01 13:45:53,884 - INFO - integration_test - Goal reached at step 104, added 3 extra frames for visualization
2025-12-01 13:45:53,885 - INFO - integration_test - Saving test results...
2025-12-01 13:45:53,886 - INFO - integration_test - Saved 109 vehicle states to test_outputs/20251201_134358_contouring_contouring_ellipsoid_contouring_unicycle/vehicle_states.csv
2025-12-01 13:45:53,886 - INFO - integration_test - Saved obstacle summary to test_outputs/20251201_134358_contouring_contouring_ellipsoid_contouring_unicycle/obstacle_summary.csv
2025-12-01 13:45:53,886 - INFO - integration_test - Saved 116 states for obstacle 0 to test_outputs/20251201_134358_contouring_contouring_ellipsoid_contouring_unicycle/obstacle_0_detailed_states.csv
2025-12-01 13:45:53,886 - INFO - integration_test - Saved state history: 109 vehicle states, 1 obstacles
2025-12-01 13:45:53,886 - INFO - integration_test - Creating animation...
2025-12-01 13:45:53,903 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 13:45:53,914 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 13:45:54,000 - DEBUG - integration_test - Frame 1: Drawing 10 contouring constraint halfspaces
2025-12-01 13:45:54,068 - DEBUG - integration_test - Frame 2: Drawing 10 contouring constraint halfspaces
2025-12-01 13:46:08,211 - INFO - integration_test - Saved animation with 109 frames at 10.00 fps to test_outputs/20251201_134358_contouring_contouring_ellipsoid_contouring_unicycle/animation.gif (duration: 10.90s, size: 1002665 bytes)
2025-12-01 13:46:08,252 - INFO - integration_test - Animation created successfully
2025-12-01 13:46:08,252 - INFO - integration_test - Test completed successfully
