2025-12-01 16:47:56,384 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2025-12-01 16:47:56,384 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2025-12-01 16:47:56,384 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2025-12-01 16:47:56,384 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2025-12-01 16:47:56,384 - INFO - integration_test - Creating objective module: contouring
2025-12-01 16:47:56,391 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2025-12-01 16:47:56,391 - INFO - integration_test - Creating 2 constraint module(s): ['contouring', 'ellipsoid']
2025-12-01 16:47:56,391 - DEBUG - integration_test - Creating constraint module: contouring
2025-12-01 16:47:56,397 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2025-12-01 16:47:56,397 - DEBUG - integration_test - Creating constraint module: ellipsoid
2025-12-01 16:47:56,407 - INFO - integration_test - Constraint module 'ellipsoid' created: ellipsoid_constraints
2025-12-01 16:47:56,407 - INFO - integration_test - Created 2 constraint module(s)
2025-12-01 16:47:56,422 - INFO - integration_test - Setting solver on all modules...
2025-12-01 16:47:56,422 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2025-12-01 16:47:56,422 - WARNING - integration_test -   Module ellipsoid_constraints has no solver attribute
2025-12-01 16:47:56,422 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2025-12-01 16:47:56,422 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2025-12-01 16:47:56,423 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2025-12-01 16:47:56,423 - DEBUG - integration_test -   Set solver on module: contouring_objective
2025-12-01 16:47:56,423 - WARNING - integration_test - Error shaping obstacles: 'max_obstacles'
2025-12-01 16:47:56,423 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2025-12-01 16:47:56,423 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2025-12-01 16:47:56,423 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2025-12-01 16:47:56,423 - INFO - integration_test - Reference path start: (0.00, 0.00)
2025-12-01 16:47:56,423 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2025-12-01 16:47:56,423 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2025-12-01 16:47:56,424 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2025-12-01 16:47:56,424 - INFO - integration_test - Added spline variable: 0.0000
2025-12-01 16:47:56,424 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2025-12-01 16:47:56,424 - INFO - integration_test - Step 0 (contouring until path end)
2025-12-01 16:47:56,424 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2025-12-01 16:47:56,425 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m)
2025-12-01 16:47:56,425 - DEBUG - integration_test -   Set spline state to 0.0000
2025-12-01 16:47:56,425 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:56,440 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2025-12-01 16:47:56,440 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2025-12-01 16:47:56,442 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:56,443 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:47:56,444 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2025-12-01 16:47:56,444 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:47:56,444 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.1], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2025-12-01 16:47:56,445 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.2], ws=[0.2, 0.0, 0.0, 1.0, 0.2127494608332952], res=[0.0, 0.0, 0.0, 0.0, -0.0127494608332952], res_norm=1.275e-02
2025-12-01 16:47:56,446 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.31274946083329525], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.3386985848683951], res=[0.0, 0.0, 0.0, 0.0, -0.025949124035099858], res_norm=2.595e-02
2025-12-01 16:47:56,461 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,473 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,492 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,504 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,522 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,535 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,554 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,568 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,600 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,617 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,629 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,645 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,656 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,672 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,684 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,700 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,712 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,728 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,739 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:56,755 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:56,767 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,474 - INFO - integration_test - Step 0: MPC solve successful
2025-12-01 16:47:57,509 - INFO - integration_test - Step 0: Computed 10 numeric contouring constraints for visualization (s=0.000)
2025-12-01 16:47:57,510 - DEBUG - integration_test - Step 0: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:47:57,510 - DEBUG - integration_test - Linearized constraints module not found at step 0
2025-12-01 16:47:57,510 - INFO - integration_test - === Applying control at step 0 ===
2025-12-01 16:47:57,510 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199975405, 'w': 0.8000000099331989}
2025-12-01 16:47:57,510 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:47:57,510 - INFO - integration_test -   Planner output success: True
2025-12-01 16:47:57,511 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:47:57,512 - INFO - integration_test - Step 0 completed in 1.087s
2025-12-01 16:47:57,539 - INFO - integration_test - Step 1 (contouring until path end)
2025-12-01 16:47:57,540 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2025-12-01 16:47:57,541 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m)
2025-12-01 16:47:57,541 - DEBUG - integration_test -   Set spline state to 0.1200
2025-12-01 16:47:57,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:57,561 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2025-12-01 16:47:57,562 - WARNING - integration_test - Could not update reference path at step 1: x and y must have the same length
2025-12-01 16:47:57,562 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2025-12-01 16:47:57,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:57,567 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:47:57,567 - INFO - integration_test - Warmstart k=0: x0=0.10987737537797444 , y0=0.004530845114594537 , psi0=0.08000000099331989 , v0=1.200000001999754 , spline0=0.12000000019997542 , a0=0.0 , w0=0.0
2025-12-01 16:47:57,567 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:47:57,568 - INFO - integration_test - Dyn residual k=0: pred=[0.2294935803240989, 0.01412060852569339, 0.08000000099331989, 1.200000001999754, 0.24000000039995084], ws=[0.2294935803240989, 0.01412060852569339, 0.08000000099331972, 1.200000001999754, 0.28256625370033567], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -0.042566253300384826], res_norm=4.257e-02
2025-12-01 16:47:57,569 - INFO - integration_test - Dyn residual k=1: pred=[0.3491097852702233, 0.02371037193679222, 0.08000000099331972, 1.200000001999754, 0.4025662539003111], ws=[0.34910978527022335, 0.02371037193679222, 0.08000000099331972, 1.200000001999754, 0.46285207129367745], res=[-5.551115123125783e-17, 0.0, 0.0, 0.0, -0.06028581739336636], res_norm=6.029e-02
2025-12-01 16:47:57,571 - INFO - integration_test - Dyn residual k=2: pred=[0.46872599021634775, 0.03330013534789105, 0.08000000099331972, 1.200000001999754, 0.5828520714936529], ws=[0.4687259902163478, 0.03330013534789105, 0.08000000099331972, 1.200000001999754, 0.661737007758635], res=[-5.551115123125783e-17, 0.0, 0.0, 0.0, -0.07888493626498205], res_norm=7.888e-02
2025-12-01 16:47:57,590 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,604 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,623 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,637 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,656 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,671 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,694 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,710 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,731 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,745 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,767 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,782 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,805 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,822 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,842 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,857 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,880 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,897 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,917 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,930 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:57,947 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:57,959 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,194 - INFO - integration_test - Step 1: MPC solve successful
2025-12-01 16:47:58,210 - INFO - integration_test - Step 1: Computed 10 numeric contouring constraints for visualization (s=0.120)
2025-12-01 16:47:58,210 - DEBUG - integration_test - Step 1: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:47:58,210 - INFO - integration_test - === Applying control at step 1 ===
2025-12-01 16:47:58,210 - INFO - integration_test -   Control dict from planner: {'a': 2.000000004575285, 'w': 0.7999996772064989}
2025-12-01 16:47:58,210 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:47:58,210 - INFO - integration_test -   Planner output success: True
2025-12-01 16:47:58,211 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:47:58,212 - INFO - integration_test - Step 1 completed in 0.672s
2025-12-01 16:47:58,235 - INFO - integration_test - Step 2 (contouring until path end)
2025-12-01 16:47:58,235 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999997 1.4        0.26      ]
2025-12-01 16:47:58,236 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m)
2025-12-01 16:47:58,236 - DEBUG - integration_test -   Set spline state to 0.2600
2025-12-01 16:47:58,236 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:58,251 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2025-12-01 16:47:58,251 - WARNING - integration_test - Could not update reference path at step 2: x and y must have the same length
2025-12-01 16:47:58,251 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2025-12-01 16:47:58,254 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:58,255 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:47:58,255 - INFO - integration_test - Warmstart k=0: x0=0.2388921283831404 , y0=0.02022161980286599 , psi0=0.15999996871396976 , v0=1.4000000024572825 , spline0=0.2600000004457037 , a0=0.0 , w0=0.0
2025-12-01 16:47:58,255 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:47:58,256 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039489961385, 0.04252616444391022, 0.15999996871396976, 1.4000000024572825, 0.40000000069143193], ws=[0.3771039489961385, 0.04252616444391022, 0.15999996871396993, 1.4000000024572825, 0.49222686484248573], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -0.0922268641510538], res_norm=9.223e-02
2025-12-01 16:47:58,257 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157696091366, 0.06483070908495447, 0.15999996871396993, 1.4000000024572825, 0.632226865088214], ws=[0.5153157696091366, 0.06483070908495447, 0.15999996871396993, 1.4000000024572825, 0.747494596041008], res=[0.0, 0.0, 0.0, 0.0, -0.11526773095279397], res_norm=1.153e-01
2025-12-01 16:47:58,258 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275902221347, 0.08713525372599873, 0.15999996871396993, 1.4000000024572825, 0.8874945962867362], ws=[0.6535275902221347, 0.08713525372599873, 0.15999996871396993, 1.4000000024572825, 0.9682208643853458], res=[0.0, 0.0, 0.0, 0.0, -0.08072626809860961], res_norm=8.073e-02
2025-12-01 16:47:58,273 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,285 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,303 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,315 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,331 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,343 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,358 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,370 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,388 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,400 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,418 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,429 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,445 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,457 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,472 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,484 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,501 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,512 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,528 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,540 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,555 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,566 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,819 - INFO - integration_test - Step 2: MPC solve successful
2025-12-01 16:47:58,835 - INFO - integration_test - Step 2: Computed 10 numeric contouring constraints for visualization (s=0.260)
2025-12-01 16:47:58,835 - DEBUG - integration_test - Step 2: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:47:58,835 - INFO - integration_test - === Applying control at step 2 ===
2025-12-01 16:47:58,835 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016941654, 'w': 0.7999999251265072}
2025-12-01 16:47:58,835 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:47:58,835 - INFO - integration_test -   Planner output success: True
2025-12-01 16:47:58,836 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:47:58,837 - INFO - integration_test - Step 2 completed in 0.601s
2025-12-01 16:47:58,860 - INFO - integration_test - Step 3 (contouring until path end)
2025-12-01 16:47:58,860 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999996 1.6        0.42      ]
2025-12-01 16:47:58,861 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m)
2025-12-01 16:47:58,861 - DEBUG - integration_test -   Set spline state to 0.4200
2025-12-01 16:47:58,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:58,876 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2025-12-01 16:47:58,877 - WARNING - integration_test - Could not update reference path at step 3: x and y must have the same length
2025-12-01 16:47:58,877 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2025-12-01 16:47:58,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:58,881 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:47:58,881 - INFO - integration_test - Warmstart k=0: x0=0.38583643682363283 , y0=0.05014470931668249 , psi0=0.23999996122662048 , v0=1.600000004151448 , spline0=0.42000000086084854 , a0=0.0 , w0=0.0
2025-12-01 16:47:58,881 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:47:58,882 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505146778488, 0.08817712361777603, 0.23999996122662048, 1.600000004151448, 0.5800000012759934], ws=[0.5412505146778488, 0.08817712361777605, 0.2399999612266206, 1.600000004151448, 0.7289817600525159], res=[0.0, -1.3877787807814457e-17, -1.1102230246251565e-16, 0.0, -0.14898175877652253], res_norm=1.490e-01
2025-12-01 16:47:58,883 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645925320648, 0.12620953791886963, 0.2399999612266206, 1.600000004151448, 0.8889817604676608], ws=[0.6966645925320648, 0.12620953791886963, 0.2399999612266206, 1.600000004151448, 1.0077625413888678], res=[0.0, 0.0, 0.0, 0.0, -0.11878078092120703], res_norm=1.188e-01
2025-12-01 16:47:58,884 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786703862808, 0.16424195221996318, 0.2399999612266206, 1.600000004151448, 1.1677625418040125], ws=[0.8520786703862808, 0.16424195221996318, 0.2399999612266206, 1.600000004151448, 1.3126338162035736], res=[0.0, 0.0, 0.0, 0.0, -0.14487127439956105], res_norm=1.449e-01
2025-12-01 16:47:58,900 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,913 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,942 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,958 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,970 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:58,986 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:58,998 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,014 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,027 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,043 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,054 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,070 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,081 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,098 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,109 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,125 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,136 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,153 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,165 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,181 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,193 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,431 - INFO - integration_test - Step 3: MPC solve successful
2025-12-01 16:47:59,445 - INFO - integration_test - Step 3: Computed 10 numeric contouring constraints for visualization (s=0.420)
2025-12-01 16:47:59,446 - DEBUG - integration_test - Step 3: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:47:59,446 - INFO - integration_test - === Applying control at step 3 ===
2025-12-01 16:47:59,446 - INFO - integration_test -   Control dict from planner: {'a': 2.000000000337561, 'w': 0.7999993504461149}
2025-12-01 16:47:59,446 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:47:59,446 - INFO - integration_test -   Planner output success: True
2025-12-01 16:47:59,447 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:47:59,447 - INFO - integration_test - Step 3 completed in 0.587s
2025-12-01 16:47:59,468 - INFO - integration_test - Step 4 (contouring until path end)
2025-12-01 16:47:59,469 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913547 0.09724074 0.3199999  1.8        0.6       ]
2025-12-01 16:47:59,469 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.455m)
2025-12-01 16:47:59,469 - DEBUG - integration_test -   Set spline state to 0.6000
2025-12-01 16:47:59,470 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:59,484 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2025-12-01 16:47:59,485 - WARNING - integration_test - Could not update reference path at step 4: x and y must have the same length
2025-12-01 16:47:59,485 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2025-12-01 16:47:59,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:47:59,490 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:47:59,490 - INFO - integration_test - Warmstart k=0: x0=0.5491354655608011 , y0=0.0972407380734889 , psi0=0.319999896271232 , v0=1.800000004185204 , spline0=0.6000000012793689 , a0=0.0 , w0=0.0
2025-12-01 16:47:59,490 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:47:59,491 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978470862423, 0.1538627013926986, 0.319999896271232, 1.800000004185204, 0.7800000016978893], ws=[0.7199978470862423, 0.1538627013926986, 0.31999989627123204, 1.800000004185204, 0.9928306767649313], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -0.212830675067042], res_norm=2.128e-01
2025-12-01 16:47:59,492 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602286116833, 0.2104846647119083, 0.31999989627123204, 1.800000004185204, 1.1728306771834518], ws=[0.8908602286116835, 0.2104846647119083, 0.31999989627123204, 1.800000004185204, 1.361989351016944], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, -0.18915867383349227], res_norm=1.892e-01
2025-12-01 16:47:59,493 - INFO - integration_test - Dyn residual k=2: pred=[1.0617226101371247, 0.267106628031118, 0.31999989627123204, 1.800000004185204, 1.5419893514354646], ws=[1.0617226101371247, 0.267106628031118, 0.31999989627123204, 1.800000004185204, 1.7641730747611883], res=[0.0, 0.0, 0.0, 0.0, -0.22218372332572378], res_norm=2.222e-01
2025-12-01 16:47:59,554 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,565 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,581 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,593 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,610 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,622 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,643 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,655 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,672 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,683 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,701 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,714 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,732 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,744 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,761 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,773 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,790 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,802 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,819 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,831 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:47:59,847 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:47:59,859 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,121 - INFO - integration_test - Step 4: MPC solve successful
2025-12-01 16:48:00,136 - INFO - integration_test - Step 4: Computed 10 numeric contouring constraints for visualization (s=0.600)
2025-12-01 16:48:00,136 - DEBUG - integration_test - Step 4: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:00,136 - INFO - integration_test - === Applying control at step 4 ===
2025-12-01 16:48:00,136 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198918237, 'w': 0.8000000010313227}
2025-12-01 16:48:00,136 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:00,136 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:00,138 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:00,138 - INFO - integration_test - Step 4 completed in 0.669s
2025-12-01 16:48:00,160 - INFO - integration_test - Step 5 (contouring until path end)
2025-12-01 16:48:00,161 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.7268615  0.16427973 0.3999999  2.00000001 0.8       ]
2025-12-01 16:48:00,161 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.375m)
2025-12-01 16:48:00,161 - DEBUG - integration_test -   Set spline state to 0.8000
2025-12-01 16:48:00,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:00,176 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2025-12-01 16:48:00,176 - WARNING - integration_test - Could not update reference path at step 5: x and y must have the same length
2025-12-01 16:48:00,176 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2025-12-01 16:48:00,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:00,181 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:00,181 - INFO - integration_test - Warmstart k=0: x0=0.7268614996703214 , y0=0.1642797309414123 , psi0=0.3999998963743643 , v0=2.0000000061743863 , spline0=0.8000000018968075 , a0=0.0 , w0=0.0
2025-12-01 16:48:00,181 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:00,182 - INFO - integration_test - Dyn residual k=0: pred=[0.9110737071103407, 0.24216338055447761, 0.3999998963743643, 2.0000000061743863, 1.0000000025142461], ws=[0.9110737071103407, 0.24216338055447764, 0.3999998963743643, 2.0000000061743863, 1.2100959694247626], res=[0.0, -2.7755575615628914e-17, 0.0, 0.0, -0.21009596691051646], res_norm=2.101e-01
2025-12-01 16:48:00,183 - INFO - integration_test - Dyn residual k=1: pred=[1.0952859145503602, 0.320047030167543, 0.3999998963743643, 2.0000000061743863, 1.4100959700422013], ws=[1.0952859145503602, 0.320047030167543, 0.3999998963743643, 2.0000000061743863, 1.6563639884473758], res=[0.0, 0.0, 0.0, 0.0, -0.24626801840517443], res_norm=2.463e-01
2025-12-01 16:48:00,184 - INFO - integration_test - Dyn residual k=2: pred=[1.2794981219903796, 0.3979306797806083, 0.3999998963743643, 2.0000000061743863, 1.8563639890648145], ws=[1.2794981219903796, 0.39793067978060837, 0.3999998963743643, 2.0000000061743863, 2.0825433304219008], res=[0.0, -5.551115123125783e-17, 0.0, 0.0, -0.22617934135708628], res_norm=2.262e-01
2025-12-01 16:48:00,199 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,212 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,228 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,239 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,255 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,266 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,282 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,293 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,309 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,320 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,336 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,347 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,363 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,374 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,390 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,410 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,426 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,437 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,452 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,463 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,479 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,490 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,793 - INFO - integration_test - Step 5: MPC solve successful
2025-12-01 16:48:00,808 - INFO - integration_test - Step 5: Computed 10 numeric contouring constraints for visualization (s=0.800)
2025-12-01 16:48:00,808 - DEBUG - integration_test - Step 5: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:00,808 - INFO - integration_test - === Applying control at step 5 ===
2025-12-01 16:48:00,808 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999797095989, 'w': 0.7999973839633686}
2025-12-01 16:48:00,808 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:00,808 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:00,809 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:00,810 - INFO - integration_test - Step 5 completed in 0.650s
2025-12-01 16:48:00,832 - INFO - integration_test - Step 6 (contouring until path end)
2025-12-01 16:48:00,832 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675193 0.25382373 0.47999963 2.2        1.02      ]
2025-12-01 16:48:00,833 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.373m)
2025-12-01 16:48:00,833 - DEBUG - integration_test -   Set spline state to 1.0200
2025-12-01 16:48:00,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:00,847 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2025-12-01 16:48:00,848 - WARNING - integration_test - Could not update reference path at step 6: x and y must have the same length
2025-12-01 16:48:00,848 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2025-12-01 16:48:00,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:00,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:00,851 - INFO - integration_test - Warmstart k=0: x0=0.9167519347988238 , y0=0.25382372602888864 , psi0=0.4799996347707012 , v0=2.200000004145346 , spline0=1.0200000023113422 , a0=0.0 , w0=0.0
2025-12-01 16:48:00,851 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:00,852 - INFO - integration_test - Dyn residual k=0: pred=[1.111890855282106, 0.355415073568994, 0.4799996347707012, 2.200000004145346, 1.2400000027258768], ws=[1.111890855282106, 0.355415073568994, 0.4799996347707012, 2.200000004145346, 1.528421956159481], res=[0.0, 0.0, 0.0, 0.0, -0.2884219534336041], res_norm=2.884e-01
2025-12-01 16:48:00,853 - INFO - integration_test - Dyn residual k=1: pred=[1.3070297757653884, 0.45700642110909934, 0.4799996347707012, 2.200000004145346, 1.7484219565740156], ws=[1.3070297757653884, 0.45700642110909934, 0.4799996347707012, 2.200000004145346, 2.0213814266448145], res=[0.0, 0.0, 0.0, 0.0, -0.2729594700707989], res_norm=2.730e-01
2025-12-01 16:48:00,854 - INFO - integration_test - Dyn residual k=2: pred=[1.5021686962486707, 0.5585977686492046, 0.4799996347707012, 2.200000004145346, 2.2413814270593493], ws=[1.5021686962486707, 0.5585977686492047, 0.4799996347707012, 2.200000004145346, 2.557601243438726], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.3162198163793768], res_norm=3.162e-01
2025-12-01 16:48:00,868 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,880 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,896 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,908 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,924 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,935 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,950 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,962 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:00,978 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:00,990 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,006 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,017 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,033 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,044 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,059 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,071 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,087 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,099 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,115 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,127 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,142 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,154 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,452 - INFO - integration_test - Step 6: MPC solve successful
2025-12-01 16:48:01,467 - INFO - integration_test - Step 6: Computed 10 numeric contouring constraints for visualization (s=1.020)
2025-12-01 16:48:01,467 - DEBUG - integration_test - Step 6: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:01,467 - INFO - integration_test - === Applying control at step 6 ===
2025-12-01 16:48:01,467 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199981214, 'w': 0.8000000099134542}
2025-12-01 16:48:01,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:01,467 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:01,468 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:01,469 - INFO - integration_test - Step 6 completed in 0.636s
2025-12-01 16:48:01,492 - INFO - integration_test - Step 7 (contouring until path end)
2025-12-01 16:48:01,492 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623094 0.36819129 0.55999964 2.40000001 1.26      ]
2025-12-01 16:48:01,493 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.475m)
2025-12-01 16:48:01,493 - DEBUG - integration_test -   Set spline state to 1.2600
2025-12-01 16:48:01,493 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:01,507 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2025-12-01 16:48:01,508 - WARNING - integration_test - Could not update reference path at step 7: x and y must have the same length
2025-12-01 16:48:01,508 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2025-12-01 16:48:01,510 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:01,511 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:01,512 - INFO - integration_test - Warmstart k=0: x0=1.116230936115812 , y0=0.3681912923523496 , psi0=0.5599996357620466 , v0=2.400000006145158 , spline0=1.260000002925858 , a0=0.0 , w0=0.0
2025-12-01 16:48:01,512 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:01,512 - INFO - integration_test - Dyn residual k=0: pred=[1.3195722097144318, 0.4956759061151831, 0.5599996357620466, 2.400000006145158, 1.5000000035403738], ws=[1.319572209714432, 0.4956759061151831, 0.5599996357620465, 2.400000006145158, 1.87386307920714], res=[-2.220446049250313e-16, 0.0, 1.1102230246251565e-16, 0.0, -0.37386307566676624], res_norm=3.739e-01
2025-12-01 16:48:01,513 - INFO - integration_test - Dyn residual k=1: pred=[1.5229134833130518, 0.6231605198780165, 0.5599996357620465, 2.400000006145158, 2.1138630798216558], ws=[1.5229134833130518, 0.6231605198780166, 0.5599996357620465, 2.400000006145158, 2.481385932688462], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.3675228528668062], res_norm=3.675e-01
2025-12-01 16:48:01,514 - INFO - integration_test - Dyn residual k=2: pred=[1.7262547569116715, 0.75064513364085, 0.5599996357620465, 2.400000006145158, 2.7213859333029777], ws=[1.7262547569116715, 0.75064513364085, 0.5599996357620465, 2.400000006145158, 3.0823015476720497], res=[0.0, 0.0, 0.0, 0.0, -0.36091561436907194], res_norm=3.609e-01
2025-12-01 16:48:01,529 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,540 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,556 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,568 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,584 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,596 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,612 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,623 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,639 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,650 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,666 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,677 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,693 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,705 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,721 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,732 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,748 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,759 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,775 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,788 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:01,804 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:01,815 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,111 - INFO - integration_test - Step 7: MPC solve successful
2025-12-01 16:48:02,126 - INFO - integration_test - Step 7: Computed 10 numeric contouring constraints for visualization (s=1.260)
2025-12-01 16:48:02,127 - DEBUG - integration_test - Step 7: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:02,127 - INFO - integration_test - === Applying control at step 7 ===
2025-12-01 16:48:02,127 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199976795, 'w': 0.8000000076920919}
2025-12-01 16:48:02,127 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:02,127 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:02,128 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:02,128 - INFO - integration_test - Step 7 completed in 0.636s
2025-12-01 16:48:02,148 - INFO - integration_test - Step 8 (contouring until path end)
2025-12-01 16:48:02,149 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243461 0.50942421 0.63999964 2.60000001 1.52      ]
2025-12-01 16:48:02,149 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.429m)
2025-12-01 16:48:02,149 - DEBUG - integration_test -   Set spline state to 1.5200
2025-12-01 16:48:02,150 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:02,164 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2025-12-01 16:48:02,164 - WARNING - integration_test - Could not update reference path at step 8: x and y must have the same length
2025-12-01 16:48:02,164 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2025-12-01 16:48:02,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:02,168 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:02,168 - INFO - integration_test - Warmstart k=0: x0=1.322434611191381 , y0=0.5094242136709383 , psi0=0.6399996365312558 , v0=2.600000008144926 , spline0=1.5200000037403507 , a0=0.0 , w0=0.0
2025-12-01 16:48:02,168 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:02,169 - INFO - integration_test - Dyn residual k=0: pred=[1.5309795653306726, 0.6646949531120091, 0.6399996365312558, 2.600000008144926, 1.7800000045548434], ws=[1.5309795653306726, 0.6646949531120091, 0.6399996365312557, 2.600000008144926, 2.1722695123995437], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.39226950784470027], res_norm=3.923e-01
2025-12-01 16:48:02,170 - INFO - integration_test - Dyn residual k=1: pred=[1.7395245194699642, 0.8199656925530799, 0.6399996365312557, 2.600000008144926, 2.4322695132140364], ws=[1.7395245194699642, 0.8199656925530799, 0.6399996365312557, 2.600000008144926, 2.8208115075291738], res=[0.0, 0.0, 0.0, 0.0, -0.38854199431513736], res_norm=3.885e-01
2025-12-01 16:48:02,170 - INFO - integration_test - Dyn residual k=2: pred=[1.9480694736092559, 0.9752364319941508, 0.6399996365312557, 2.600000008144926, 3.0808115083436665], ws=[1.9480694736092559, 0.9752364319941508, 0.6399996365312557, 2.600000008144926, 3.4656377221035495], res=[0.0, 0.0, 0.0, 0.0, -0.384826213759883], res_norm=3.848e-01
2025-12-01 16:48:02,185 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,198 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,214 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,225 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,241 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,252 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,267 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,279 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,295 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,306 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,322 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,333 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,348 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,360 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,375 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,386 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,403 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,414 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,430 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,441 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,457 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,468 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,809 - INFO - integration_test - Step 8: MPC solve successful
2025-12-01 16:48:02,826 - INFO - integration_test - Step 8: Computed 10 numeric contouring constraints for visualization (s=1.520)
2025-12-01 16:48:02,826 - DEBUG - integration_test - Step 8: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:02,826 - INFO - integration_test - === Applying control at step 8 ===
2025-12-01 16:48:02,826 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999845969239, 'w': 0.7999952115308405}
2025-12-01 16:48:02,826 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:02,826 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:02,827 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:02,827 - INFO - integration_test - Step 8 completed in 0.679s
2025-12-01 16:48:02,849 - INFO - integration_test - Step 9 (contouring until path end)
2025-12-01 16:48:02,849 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223955 0.67925659 0.71999916 2.80000001 1.8       ]
2025-12-01 16:48:02,850 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.464m)
2025-12-01 16:48:02,850 - DEBUG - integration_test -   Set spline state to 1.8000
2025-12-01 16:48:02,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:02,865 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2025-12-01 16:48:02,866 - WARNING - integration_test - Could not update reference path at step 9: x and y must have the same length
2025-12-01 16:48:02,866 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2025-12-01 16:48:02,868 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:02,870 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:02,870 - INFO - integration_test - Warmstart k=0: x0=1.5322395549041476 , y0=0.6792565857067918 , psi0=0.7199991576843399 , v0=2.8000000066046185 , spline0=1.8000000044008126 , a0=0.0 , w0=0.0
2025-12-01 16:48:02,870 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:02,871 - INFO - integration_test - Dyn residual k=0: pred=[1.7427453150748728, 0.8638841169820699, 0.7199991576843399, 2.8000000066046185, 2.0800000050612746], ws=[1.7427453150748728, 0.8638841169820699, 0.7199991576843399, 2.8000000066046185, 2.5726637913310157], res=[0.0, 0.0, 0.0, 0.0, -0.49266378626974117], res_norm=4.927e-01
2025-12-01 16:48:02,872 - INFO - integration_test - Dyn residual k=1: pred=[1.953251075245598, 1.048511648257348, 0.7199991576843399, 2.8000000066046185, 2.8526637919914775], ws=[1.953251075245598, 1.048511648257348, 0.7199991576843399, 2.8000000066046185, 3.35338327579705], res=[0.0, 0.0, 0.0, 0.0, -0.5007194838055726], res_norm=5.007e-01
2025-12-01 16:48:02,873 - INFO - integration_test - Dyn residual k=2: pred=[2.163756835416323, 1.233139179532626, 0.7199991576843399, 2.8000000066046185, 3.633383276457512], ws=[2.163756835416323, 1.233139179532626, 0.7199991576843399, 2.8000000066046185, 4.144520092162581], res=[0.0, 0.0, 0.0, 0.0, -0.5111368157050689], res_norm=5.111e-01
2025-12-01 16:48:02,890 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,902 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,920 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,932 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,948 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,959 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:02,974 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:02,985 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,001 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,013 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,030 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,042 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,061 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,074 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,091 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,103 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,119 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,132 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,149 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,160 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,187 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,507 - INFO - integration_test - Step 9: MPC solve successful
2025-12-01 16:48:03,522 - INFO - integration_test - Step 9: Computed 10 numeric contouring constraints for visualization (s=1.800)
2025-12-01 16:48:03,522 - DEBUG - integration_test - Step 9: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:03,522 - INFO - integration_test - === Applying control at step 9 ===
2025-12-01 16:48:03,522 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998181, 'w': 0.8000000096001041}
2025-12-01 16:48:03,522 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:03,522 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:03,523 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:03,524 - INFO - integration_test - Step 9 completed in 0.675s
2025-12-01 16:48:03,546 - INFO - integration_test - Step 10 (contouring until path end)
2025-12-01 16:48:03,546 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229429 0.87908698 0.79999916 3.00000001 2.10000001]
2025-12-01 16:48:03,547 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.397m)
2025-12-01 16:48:03,547 - DEBUG - integration_test -   Set spline state to 2.1000
2025-12-01 16:48:03,547 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:03,561 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2025-12-01 16:48:03,562 - WARNING - integration_test - Could not update reference path at step 10: x and y must have the same length
2025-12-01 16:48:03,562 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2025-12-01 16:48:03,564 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:03,565 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:03,566 - INFO - integration_test - Warmstart k=0: x0=1.742294288580105 , y0=0.8790869780249156 , psi0=0.7999991586443502 , v0=3.0 , spline0=2.1000000052612564 , a0=0.0 , w0=0.0
2025-12-01 16:48:03,566 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:03,566 - INFO - integration_test - Dyn residual k=0: pred=[1.9513064824496607, 1.0942936294412584, 0.7999991586443502, 3.0, 2.4000000052612567], ws=[1.9513064824496607, 1.0942936294412584, 0.7999991586443502, 3.0, 3.000185600733254], res=[0.0, 0.0, 0.0, 0.0, -0.6001855954719972], res_norm=6.002e-01
2025-12-01 16:48:03,567 - INFO - integration_test - Dyn residual k=1: pred=[2.1603186763192164, 1.3095002808576013, 0.7999991586443502, 3.0, 3.300185600733254], ws=[2.1603186763192164, 1.3095002808576013, 0.7999991586443502, 3.0, 3.860204106816764], res=[0.0, 0.0, 0.0, 0.0, -0.5600185060835097], res_norm=5.600e-01
2025-12-01 16:48:03,568 - INFO - integration_test - Dyn residual k=2: pred=[2.369330870188772, 1.5247069322739442, 0.7999991586443502, 3.0, 4.160204106816764], ws=[2.369330870188772, 1.5247069322739442, 0.7999991586443502, 3.0, 4.739620400680703], res=[0.0, 0.0, 0.0, 0.0, -0.5794162938639396], res_norm=5.794e-01
2025-12-01 16:48:03,583 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,595 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,612 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,623 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,640 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,652 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,668 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,680 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,696 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,708 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,724 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,735 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,751 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,763 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,779 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,791 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,807 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,818 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,835 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,846 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:03,864 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:03,876 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,417 - INFO - integration_test - Step 10: MPC solve successful
2025-12-01 16:48:04,431 - INFO - integration_test - Step 10: Computed 10 numeric contouring constraints for visualization (s=2.100)
2025-12-01 16:48:04,431 - DEBUG - integration_test - Step 10: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:04,431 - INFO - integration_test - === Applying control at step 10 ===
2025-12-01 16:48:04,431 - INFO - integration_test -   Control dict from planner: {'a': 1.426359591476575e-07, 'w': 0.8000000090287723}
2025-12-01 16:48:04,431 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:04,431 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:04,432 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:04,433 - INFO - integration_test - Step 10 completed in 0.887s
2025-12-01 16:48:04,453 - INFO - integration_test - Step 11 (contouring until path end)
2025-12-01 16:48:04,453 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247994 1.10242018 0.87999916 3.00000002 2.40000001]
2025-12-01 16:48:04,454 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.398m)
2025-12-01 16:48:04,454 - DEBUG - integration_test -   Set spline state to 2.4000
2025-12-01 16:48:04,454 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:04,468 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2025-12-01 16:48:04,468 - WARNING - integration_test - Could not update reference path at step 11: x and y must have the same length
2025-12-01 16:48:04,468 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2025-12-01 16:48:04,471 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:04,472 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:04,472 - INFO - integration_test - Warmstart k=0: x0=1.9424799352693287 , y0=1.1024201833486142 , psi0=0.8799991595472274 , v0=3.0 , spline0=2.40000000754806 , a0=0.0 , w0=0.0
2025-12-01 16:48:04,472 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:04,473 - INFO - integration_test - Dyn residual k=0: pred=[2.1336254728597237, 1.3336416863695897, 0.8799991595472274, 3.0, 2.70000000754806], ws=[2.1336254728597237, 1.3336416863695897, 0.8799991595472276, 3.0, 3.3331560230067367], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.6331560154586766], res_norm=6.332e-01
2025-12-01 16:48:04,474 - INFO - integration_test - Dyn residual k=1: pred=[2.3247710104501187, 1.5648631893905651, 0.8799991595472276, 3.0, 3.6331560230067366], ws=[2.3247710104501187, 1.5648631893905651, 0.8799991595472276, 3.0, 4.291968858812853], res=[0.0, 0.0, 0.0, 0.0, -0.658812835806116], res_norm=6.588e-01
2025-12-01 16:48:04,474 - INFO - integration_test - Dyn residual k=2: pred=[2.5159165480405137, 1.7960846924115406, 0.8799991595472276, 3.0, 4.591968858812852], ws=[2.5159165480405137, 1.7960846924115406, 0.8799991595472276, 3.0, 5.217337938777675], res=[0.0, 0.0, 0.0, 0.0, -0.6253690799648224], res_norm=6.254e-01
2025-12-01 16:48:04,489 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,500 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,516 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,528 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,544 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,555 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,571 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,582 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,598 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,610 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,637 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,652 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,664 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,680 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,691 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,707 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,719 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,735 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,746 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:04,763 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:04,776 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,062 - INFO - integration_test - Step 11: MPC solve successful
2025-12-01 16:48:05,077 - INFO - integration_test - Step 11: Computed 10 numeric contouring constraints for visualization (s=2.400)
2025-12-01 16:48:05,077 - DEBUG - integration_test - Step 11: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:05,077 - INFO - integration_test - === Applying control at step 11 ===
2025-12-01 16:48:05,077 - INFO - integration_test -   Control dict from planner: {'a': 4.7545206849362234e-08, 'w': -0.551533941410185}
2025-12-01 16:48:05,077 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:05,077 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:05,078 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:05,079 - INFO - integration_test - Step 11 completed in 0.626s
2025-12-01 16:48:05,106 - INFO - integration_test - Step 12 (contouring until path end)
2025-12-01 16:48:05,106 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13990329 1.32825465 0.82484577 3.00000003 2.70000001]
2025-12-01 16:48:05,107 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.279m)
2025-12-01 16:48:05,107 - DEBUG - integration_test -   Set spline state to 2.7000
2025-12-01 16:48:05,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:05,124 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.140, 1.328), path_start=(0.000, 0.000), dist=2.519m
2025-12-01 16:48:05,125 - WARNING - integration_test - Could not update reference path at step 12: x and y must have the same length
2025-12-01 16:48:05,125 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2025-12-01 16:48:05,128 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:05,130 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:05,130 - INFO - integration_test - Warmstart k=0: x0=2.1399032915577516 , y0=1.3282546549664207 , psi0=0.8248457654062089 , v0=3.0 , spline0=2.7000000103103154 , a0=0.0 , w0=0.0
2025-12-01 16:48:05,130 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:05,131 - INFO - integration_test - Dyn residual k=0: pred=[2.3435043666271547, 1.548587589932084, 0.8248457654062089, 3.0, 3.0000000103103153], ws=[2.3435043666271547, 1.548587589932084, 0.8248457654062089, 3.0, 3.7417212142202025], res=[0.0, 0.0, 0.0, 0.0, -0.7417212039098873], res_norm=7.417e-01
2025-12-01 16:48:05,132 - INFO - integration_test - Dyn residual k=1: pred=[2.5471054416965577, 1.7689205248977473, 0.8248457654062089, 3.0, 4.041721214220202], ws=[2.5471054416965577, 1.7689205248977475, 0.8248457654062089, 3.0, 4.757009410689806], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, -0.7152881964696034], res_norm=7.153e-01
2025-12-01 16:48:05,133 - INFO - integration_test - Dyn residual k=2: pred=[2.750706516765961, 1.9892534598634108, 0.8248457654062089, 3.0, 5.057009410689806], ws=[2.750706516765961, 1.989253459863411, 0.8248457654062089, 3.0, 5.810027304263338], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, -0.7530178935735323], res_norm=7.530e-01
2025-12-01 16:48:05,150 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,162 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,179 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,191 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,208 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,219 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,235 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,246 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,262 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,273 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,289 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,300 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,316 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,327 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,342 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,353 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,369 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,381 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,397 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,411 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:05,427 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:05,438 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,125 - INFO - integration_test - Step 12: MPC solve successful
2025-12-01 16:48:06,141 - INFO - integration_test - Step 12: Computed 10 numeric contouring constraints for visualization (s=2.700)
2025-12-01 16:48:06,141 - DEBUG - integration_test - Step 12: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:06,141 - INFO - integration_test - === Applying control at step 12 ===
2025-12-01 16:48:06,141 - INFO - integration_test -   Control dict from planner: {'a': 8.281299258779655e-09, 'w': -0.6314677251016068}
2025-12-01 16:48:06,141 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:06,141 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:06,144 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:06,144 - INFO - integration_test - Step 12 completed in 1.038s
2025-12-01 16:48:06,173 - INFO - integration_test - Step 13 (contouring until path end)
2025-12-01 16:48:06,173 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.35032343 1.54201495 0.76169899 3.00000003 3.00000001]
2025-12-01 16:48:06,174 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.330m)
2025-12-01 16:48:06,174 - DEBUG - integration_test -   Set spline state to 3.0000
2025-12-01 16:48:06,175 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:06,190 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.350, 1.542), path_start=(0.000, 0.000), dist=2.811m
2025-12-01 16:48:06,191 - WARNING - integration_test - Could not update reference path at step 13: x and y must have the same length
2025-12-01 16:48:06,191 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2025-12-01 16:48:06,194 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:06,195 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:06,195 - INFO - integration_test - Warmstart k=0: x0=2.3503234318647315 , y0=1.5420149525934153 , psi0=0.7616989928960483 , v0=3.0 , spline0=3.000000013155384 , a0=0.0 , w0=0.0
2025-12-01 16:48:06,195 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:06,196 - INFO - integration_test - Dyn residual k=0: pred=[2.5674227796194296, 1.749060535025122, 0.7616989928960483, 3.0, 3.300000013155384], ws=[2.5674227796194296, 1.749060535025122, 0.761698992896048, 3.0, 4.0738410881941745], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.7738410750387903], res_norm=7.738e-01
2025-12-01 16:48:06,197 - INFO - integration_test - Dyn residual k=1: pred=[2.7845221273741276, 1.9561061174568288, 0.761698992896048, 3.0, 4.373841088194174], ws=[2.7845221273741276, 1.9561061174568288, 0.761698992896048, 3.0, 5.186950594772236], res=[0.0, 0.0, 0.0, 0.0, -0.813109506578062], res_norm=8.131e-01
2025-12-01 16:48:06,198 - INFO - integration_test - Dyn residual k=2: pred=[3.0016214751288257, 2.1631516998885356, 0.761698992896048, 3.0, 5.486950594772236], ws=[3.0016214751288257, 2.1631516998885356, 0.761698992896048, 3.0, 6.282273197696785], res=[0.0, 0.0, 0.0, 0.0, -0.795322602924549], res_norm=7.953e-01
2025-12-01 16:48:06,213 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,225 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,242 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,253 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,270 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,283 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,300 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,313 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,331 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,344 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,362 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,376 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,394 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,406 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,424 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,436 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,453 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,465 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,482 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,494 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,510 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,521 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,786 - INFO - integration_test - Step 13: MPC solve successful
2025-12-01 16:48:06,802 - INFO - integration_test - Step 13: Computed 10 numeric contouring constraints for visualization (s=3.000)
2025-12-01 16:48:06,802 - DEBUG - integration_test - Step 13: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:06,802 - INFO - integration_test - === Applying control at step 13 ===
2025-12-01 16:48:06,802 - INFO - integration_test -   Control dict from planner: {'a': 1.0327147560254002e-08, 'w': -0.48026065794572004}
2025-12-01 16:48:06,802 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:06,802 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:06,803 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:06,804 - INFO - integration_test - Step 13 completed in 0.630s
2025-12-01 16:48:06,827 - INFO - integration_test - Step 14 (contouring until path end)
2025-12-01 16:48:06,827 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.57231017 1.74376874 0.71367293 3.00000003 3.30000002]
2025-12-01 16:48:06,828 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.198m)
2025-12-01 16:48:06,828 - DEBUG - integration_test -   Set spline state to 3.3000
2025-12-01 16:48:06,828 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:06,842 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.572, 1.744), path_start=(0.000, 0.000), dist=3.108m
2025-12-01 16:48:06,843 - WARNING - integration_test - Could not update reference path at step 14: x and y must have the same length
2025-12-01 16:48:06,843 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2025-12-01 16:48:06,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:06,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:06,846 - INFO - integration_test - Warmstart k=0: x0=2.5723101719158303 , y0=1.7437687428157973 , psi0=0.7136729271014762 , v0=3.0 , spline0=3.3000000161037235 , a0=0.0 , w0=0.0
2025-12-01 16:48:06,847 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:06,847 - INFO - integration_test - Dyn residual k=0: pred=[2.7990989603626097, 1.9401531755869361, 0.7136729271014762, 3.0, 3.6000000161037233], ws=[2.7990989603626097, 1.9401531755869361, 0.7136729271014763, 3.0, 4.4836922157014705], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.8836921995977471], res_norm=8.837e-01
2025-12-01 16:48:06,848 - INFO - integration_test - Dyn residual k=1: pred=[3.025887748809389, 2.1365376083580747, 0.7136729271014763, 3.0, 4.78369221570147], ws=[3.025887748809389, 2.136537608358075, 0.7136729271014763, 3.0, 5.653882309940272], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -0.8701900942388017], res_norm=8.702e-01
2025-12-01 16:48:06,849 - INFO - integration_test - Dyn residual k=2: pred=[3.2526765372561686, 2.3329220411292138, 0.7136729271014763, 3.0, 5.953882309940272], ws=[3.2526765372561686, 2.332922041129214, 0.7136729271014763, 3.0, 6.810026499372843], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -0.8561441894325714], res_norm=8.561e-01
2025-12-01 16:48:06,863 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,875 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,904 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,920 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,932 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,947 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,959 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:06,975 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:06,987 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,003 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,015 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,031 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,042 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,058 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,070 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,086 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,098 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,114 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,126 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,142 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,153 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,456 - INFO - integration_test - Step 14: MPC solve successful
2025-12-01 16:48:07,472 - INFO - integration_test - Step 14: Computed 10 numeric contouring constraints for visualization (s=3.300)
2025-12-01 16:48:07,473 - DEBUG - integration_test - Step 14: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:07,473 - INFO - integration_test - === Applying control at step 14 ===
2025-12-01 16:48:07,473 - INFO - integration_test -   Control dict from planner: {'a': 3.442279958160336e-09, 'w': -0.4246349927027425}
2025-12-01 16:48:07,473 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:07,473 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:07,474 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:07,475 - INFO - integration_test - Step 14 completed in 0.647s
2025-12-01 16:48:07,501 - INFO - integration_test - Step 15 (contouring until path end)
2025-12-01 16:48:07,501 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.80319977 1.93527977 0.67120943 3.00000003 3.60000002]
2025-12-01 16:48:07,502 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.320m)
2025-12-01 16:48:07,502 - DEBUG - integration_test -   Set spline state to 3.6000
2025-12-01 16:48:07,502 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:07,518 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.803, 1.935), path_start=(0.000, 0.000), dist=3.406m
2025-12-01 16:48:07,518 - WARNING - integration_test - Could not update reference path at step 15: x and y must have the same length
2025-12-01 16:48:07,518 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2025-12-01 16:48:07,521 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:07,522 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:07,522 - INFO - integration_test - Warmstart k=0: x0=2.8031997720106903 , y0=1.9352797653375355 , psi0=0.671209427831202 , v0=3.0 , spline0=3.6000000190864863 , a0=0.0 , w0=0.0
2025-12-01 16:48:07,523 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:07,523 - INFO - integration_test - Dyn residual k=0: pred=[3.0381207885330053, 2.1218598178515227, 0.671209427831202, 3.0, 3.9000000190864865], ws=[3.0381207885330053, 2.1218598178515227, 0.6712094278312017, 3.0, 4.814597715646316], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.914597696559829], res_norm=9.146e-01
2025-12-01 16:48:07,524 - INFO - integration_test - Dyn residual k=1: pred=[3.2730418050553203, 2.30843987036551, 0.6712094278312017, 3.0, 5.114597715646315], ws=[3.2730418050553203, 2.30843987036551, 0.6712094278312017, 3.0, 6.016112283642695], res=[0.0, 0.0, 0.0, 0.0, -0.9015145679963794], res_norm=9.015e-01
2025-12-01 16:48:07,525 - INFO - integration_test - Dyn residual k=2: pred=[3.5079628215776353, 2.495019922879497, 0.6712094278312017, 3.0, 6.316112283642695], ws=[3.5079628215776353, 2.495019922879497, 0.6712094278312017, 3.0, 7.275939466266017], res=[0.0, 0.0, 0.0, 0.0, -0.9598271826233225], res_norm=9.598e-01
2025-12-01 16:48:07,541 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,553 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,569 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,581 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,598 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,610 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,626 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,637 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,653 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,665 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,681 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,692 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,709 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,720 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,736 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,748 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,764 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,775 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,792 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,804 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:07,820 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:07,831 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,123 - INFO - integration_test - Step 15: MPC solve successful
2025-12-01 16:48:08,137 - INFO - integration_test - Step 15: Computed 10 numeric contouring constraints for visualization (s=3.600)
2025-12-01 16:48:08,138 - DEBUG - integration_test - Step 15: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:08,138 - INFO - integration_test - === Applying control at step 15 ===
2025-12-01 16:48:08,138 - INFO - integration_test -   Control dict from planner: {'a': 1.147307315532871e-09, 'w': -0.3633177158085549}
2025-12-01 16:48:08,138 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:08,138 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:08,139 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:08,139 - INFO - integration_test - Step 15 completed in 0.638s
2025-12-01 16:48:08,160 - INFO - integration_test - Step 16 (contouring until path end)
2025-12-01 16:48:08,160 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.04145813 2.1175517  0.63487766 3.00000003 3.90000002]
2025-12-01 16:48:08,161 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.162m)
2025-12-01 16:48:08,161 - DEBUG - integration_test -   Set spline state to 3.9000
2025-12-01 16:48:08,161 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:08,176 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.041, 2.118), path_start=(0.000, 0.000), dist=3.706m
2025-12-01 16:48:08,176 - WARNING - integration_test - Could not update reference path at step 16: x and y must have the same length
2025-12-01 16:48:08,176 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2025-12-01 16:48:08,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:08,180 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:08,180 - INFO - integration_test - Warmstart k=0: x0=3.0414581310395725 , y0=2.1175516960017218 , psi0=0.6348776562503465 , v0=3.0 , spline0=3.900000022080722 , a0=0.0 , w0=0.0
2025-12-01 16:48:08,180 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:08,181 - INFO - integration_test - Dyn residual k=0: pred=[3.283001409642406, 2.2954754003297118, 0.6348776562503465, 3.0, 4.200000022080722], ws=[3.283001409642406, 2.2954754003297118, 0.6348776562503464, 3.0, 5.225875789854568], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.0258757677738455], res_norm=1.026e+00
2025-12-01 16:48:08,182 - INFO - integration_test - Dyn residual k=1: pred=[3.524544688245239, 2.4733991046577017, 0.6348776562503464, 3.0, 5.525875789854568], ws=[3.524544688245239, 2.4733991046577017, 0.6348776562503464, 3.0, 6.552012775830157], res=[0.0, 0.0, 0.0, 0.0, -1.0261369859755893], res_norm=1.026e+00
2025-12-01 16:48:08,184 - INFO - integration_test - Dyn residual k=2: pred=[3.7660879668480725, 2.6513228089856917, 0.6348776562503464, 3.0, 6.852012775830157], ws=[3.7660879668480725, 2.6513228089856917, 0.6348776562503464, 3.0, 7.879689480867483], res=[0.0, 0.0, 0.0, 0.0, -1.0276767050373259], res_norm=1.028e+00
2025-12-01 16:48:08,199 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,211 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,228 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,240 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,257 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,269 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,285 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,298 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,315 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,327 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,343 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,356 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,372 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,384 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,403 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,415 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,431 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,443 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,459 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,470 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,486 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,498 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,751 - INFO - integration_test - Step 16: MPC solve successful
2025-12-01 16:48:08,766 - INFO - integration_test - Step 16: Computed 10 numeric contouring constraints for visualization (s=3.900)
2025-12-01 16:48:08,766 - DEBUG - integration_test - Step 16: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:08,766 - INFO - integration_test - === Applying control at step 16 ===
2025-12-01 16:48:08,766 - INFO - integration_test -   Control dict from planner: {'a': -3.865297345263845e-09, 'w': -0.7999995291560575}
2025-12-01 16:48:08,766 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:08,767 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:08,768 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:08,768 - INFO - integration_test - Step 16 completed in 0.608s
2025-12-01 16:48:08,793 - INFO - integration_test - Step 17 (contouring until path end)
2025-12-01 16:48:08,794 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.289857   2.28562911 0.5548777  3.00000003 4.20000003]
2025-12-01 16:48:08,794 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.323m)
2025-12-01 16:48:08,794 - DEBUG - integration_test -   Set spline state to 4.2000
2025-12-01 16:48:08,795 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:08,810 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.290, 2.286), path_start=(0.000, 0.000), dist=4.006m
2025-12-01 16:48:08,810 - WARNING - integration_test - Could not update reference path at step 17: x and y must have the same length
2025-12-01 16:48:08,810 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2025-12-01 16:48:08,813 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:08,815 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:08,815 - INFO - integration_test - Warmstart k=0: x0=3.2898570013074444 , y0=2.2856291064055654 , psi0=0.5548777033347407 , v0=3.0 , spline0=4.200000025036305 , a0=0.0 , w0=0.0
2025-12-01 16:48:08,815 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:08,816 - INFO - integration_test - Dyn residual k=0: pred=[3.544846464504137, 2.443680913287557, 0.5548777033347407, 3.0, 4.500000025036305], ws=[3.544846464504137, 2.443680913287557, 0.554877703334741, 3.0, 5.555309107848252], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.0553090828119478], res_norm=1.055e+00
2025-12-01 16:48:08,817 - INFO - integration_test - Dyn residual k=1: pred=[3.79983592770083, 2.601732720169549, 0.554877703334741, 3.0, 5.855309107848252], ws=[3.79983592770083, 2.601732720169549, 0.554877703334741, 3.0, 6.91178071412663], res=[0.0, 0.0, 0.0, 0.0, -1.0564716062783779], res_norm=1.056e+00
2025-12-01 16:48:08,817 - INFO - integration_test - Dyn residual k=2: pred=[4.0548253908975225, 2.759784527051541, 0.554877703334741, 3.0, 7.21178071412663], ws=[4.0548253908975225, 2.759784527051541, 0.554877703334741, 3.0, 8.270264682340681], res=[0.0, 0.0, 0.0, 0.0, -1.058483968214051], res_norm=1.058e+00
2025-12-01 16:48:08,832 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,844 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,872 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,889 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,901 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,918 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,930 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,945 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,957 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:08,973 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:08,984 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,002 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,013 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,029 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,041 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,057 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,068 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,085 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,097 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,114 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,125 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,429 - INFO - integration_test - Step 17: MPC solve successful
2025-12-01 16:48:09,444 - INFO - integration_test - Step 17: Computed 10 numeric contouring constraints for visualization (s=4.200)
2025-12-01 16:48:09,444 - DEBUG - integration_test - Step 17: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:09,444 - INFO - integration_test - === Applying control at step 17 ===
2025-12-01 16:48:09,444 - INFO - integration_test -   Control dict from planner: {'a': 2.5314080982607807e-09, 'w': -0.7999999645284973}
2025-12-01 16:48:09,444 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:09,444 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:09,445 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:09,446 - INFO - integration_test - Step 17 completed in 0.652s
2025-12-01 16:48:09,468 - INFO - integration_test - Step 18 (contouring until path end)
2025-12-01 16:48:09,468 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.55089327 2.43331824 0.47487771 3.00000003 4.50000003]
2025-12-01 16:48:09,469 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.187m)
2025-12-01 16:48:09,469 - DEBUG - integration_test -   Set spline state to 4.5000
2025-12-01 16:48:09,469 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:09,486 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.551, 2.433), path_start=(0.000, 0.000), dist=4.305m
2025-12-01 16:48:09,486 - WARNING - integration_test - Could not update reference path at step 18: x and y must have the same length
2025-12-01 16:48:09,486 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2025-12-01 16:48:09,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:09,492 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:09,492 - INFO - integration_test - Warmstart k=0: x0=3.5508932700294333 , y0=2.433318242749111 , psi0=0.474877706881891 , v0=3.0 , spline0=4.500000028017202 , a0=0.0 , w0=0.0
2025-12-01 16:48:09,492 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:09,493 - INFO - integration_test - Dyn residual k=0: pred=[3.817697863324776, 2.570487149562961, 0.474877706881891, 3.0, 4.800000028017202], ws=[3.817697863324776, 2.570487149562961, 0.474877706881891, 3.0, 5.9680106632599], res=[0.0, 0.0, 0.0, 0.0, -1.1680106352426982], res_norm=1.168e+00
2025-12-01 16:48:09,494 - INFO - integration_test - Dyn residual k=1: pred=[4.084502456620119, 2.7076560563768113, 0.474877706881891, 3.0, 6.2680106632599], ws=[4.084502456620119, 2.7076560563768113, 0.474877706881891, 3.0, 7.4491252693836305], res=[0.0, 0.0, 0.0, 0.0, -1.1811146061237308], res_norm=1.181e+00
2025-12-01 16:48:09,495 - INFO - integration_test - Dyn residual k=2: pred=[4.351307049915462, 2.8448249631906615, 0.474877706881891, 3.0, 7.74912526938363], ws=[4.351307049915462, 2.8448249631906615, 0.474877706881891, 3.0, 8.871236025643148], res=[0.0, 0.0, 0.0, 0.0, -1.1221107562595174], res_norm=1.122e+00
2025-12-01 16:48:09,512 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,525 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,543 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,556 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,573 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,584 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,601 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,612 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,640 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,656 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,667 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,683 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,695 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,713 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,725 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,742 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,754 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,771 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,783 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:09,799 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:09,811 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,097 - INFO - integration_test - Step 18: MPC solve successful
2025-12-01 16:48:10,115 - INFO - integration_test - Step 18: Computed 10 numeric contouring constraints for visualization (s=4.500)
2025-12-01 16:48:10,116 - DEBUG - integration_test - Step 18: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:10,116 - INFO - integration_test - === Applying control at step 18 ===
2025-12-01 16:48:10,116 - INFO - integration_test -   Control dict from planner: {'a': 7.085557429107972e-10, 'w': 0.7999999270580399}
2025-12-01 16:48:10,116 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:10,116 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:10,117 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:10,118 - INFO - integration_test - Step 18 completed in 0.650s
2025-12-01 16:48:10,144 - INFO - integration_test - Step 19 (contouring until path end)
2025-12-01 16:48:10,145 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.81192954 2.58100738 0.5548777  3.00000003 4.80000003]
2025-12-01 16:48:10,145 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.327m)
2025-12-01 16:48:10,145 - DEBUG - integration_test -   Set spline state to 4.8000
2025-12-01 16:48:10,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:10,162 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.812, 2.581), path_start=(0.000, 0.000), dist=4.604m
2025-12-01 16:48:10,162 - WARNING - integration_test - Could not update reference path at step 19: x and y must have the same length
2025-12-01 16:48:10,162 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2025-12-01 16:48:10,165 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:10,167 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:10,167 - INFO - integration_test - Warmstart k=0: x0=3.8119295390486316 , y0=2.5810073786154515 , psi0=0.554877699587695 , v0=3.0 , spline0=4.800000031005184 , a0=0.0 , w0=0.0
2025-12-01 16:48:10,167 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:10,168 - INFO - integration_test - Dyn residual k=0: pred=[4.066919002837552, 2.7390591845419863, 0.554877699587695, 3.0, 5.100000031005184], ws=[4.066919002837552, 2.7390591845419863, 0.5548776995876947, 3.0, 6.295829161753439], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.1958291307482556], res_norm=1.196e+00
2025-12-01 16:48:10,169 - INFO - integration_test - Dyn residual k=1: pred=[4.321908466626472, 2.897110990468521, 0.5548776995876947, 3.0, 6.595829161753439], ws=[4.321908466626472, 2.897110990468521, 0.5548776995876947, 3.0, 7.806768109777657], res=[0.0, 0.0, 0.0, 0.0, -1.2109389480242179], res_norm=1.211e+00
2025-12-01 16:48:10,170 - INFO - integration_test - Dyn residual k=2: pred=[4.5768979304153925, 3.055162796395056, 0.5548776995876947, 3.0, 8.106768109777658], ws=[4.5768979304153925, 3.055162796395056, 0.5548776995876947, 3.0, 9.330491465457424], res=[0.0, 0.0, 0.0, 0.0, -1.2237233556797662], res_norm=1.224e+00
2025-12-01 16:48:10,187 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,199 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,216 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,227 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,244 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,255 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,270 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,282 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,298 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,310 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,327 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,338 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,354 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,366 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,382 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,394 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,415 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,425 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,441 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,453 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,468 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,480 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,780 - INFO - integration_test - Step 19: MPC solve successful
2025-12-01 16:48:10,795 - INFO - integration_test - Step 19: Computed 10 numeric contouring constraints for visualization (s=4.800)
2025-12-01 16:48:10,795 - DEBUG - integration_test - Step 19: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:10,795 - INFO - integration_test - === Applying control at step 19 ===
2025-12-01 16:48:10,795 - INFO - integration_test -   Control dict from planner: {'a': 7.985872457793955e-10, 'w': 0.1347925796037958}
2025-12-01 16:48:10,795 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:10,795 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:10,796 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:10,797 - INFO - integration_test - Step 19 completed in 0.652s
2025-12-01 16:48:10,818 - INFO - integration_test - Step 20 (contouring until path end)
2025-12-01 16:48:10,819 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.06584609 2.74077291 0.56835696 3.00000003 5.10000003]
2025-12-01 16:48:10,819 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.207m)
2025-12-01 16:48:10,819 - DEBUG - integration_test -   Set spline state to 5.1000
2025-12-01 16:48:10,820 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:10,834 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.066, 2.741), path_start=(0.000, 0.000), dist=4.903m
2025-12-01 16:48:10,834 - WARNING - integration_test - Could not update reference path at step 20: x and y must have the same length
2025-12-01 16:48:10,834 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2025-12-01 16:48:10,837 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:10,838 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:10,838 - INFO - integration_test - Warmstart k=0: x0=4.065846089516756 , y0=2.7407729084580263 , psi0=0.5683569575480746 , v0=3.0 , spline0=5.100000034001153 , a0=0.0 , w0=0.0
2025-12-01 16:48:10,838 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:10,839 - INFO - integration_test - Dyn residual k=0: pred=[4.318682032537254, 2.9022473210345567, 0.5683569575480746, 3.0, 5.4000000340011525], ws=[4.318682032537254, 2.9022473210345567, 0.5683569575480747, 3.0, 6.709752983783884], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.3097529497827312], res_norm=1.310e+00
2025-12-01 16:48:10,839 - INFO - integration_test - Dyn residual k=1: pred=[4.571517975557751, 3.0637217336110876, 0.5683569575480747, 3.0, 7.0097529837838835], ws=[4.571517975557751, 3.0637217336110876, 0.5683569575480747, 3.0, 8.274238728021231], res=[0.0, 0.0, 0.0, 0.0, -1.2644857442373478], res_norm=1.264e+00
2025-12-01 16:48:10,840 - INFO - integration_test - Dyn residual k=2: pred=[4.8243539185782485, 3.225196146187618, 0.5683569575480747, 3.0, 8.574238728021232], ws=[4.8243539185782485, 3.225196146187618, 0.5683569575480747, 3.0, 9.853961103029887], res=[0.0, 0.0, 0.0, 0.0, -1.2797223750086548], res_norm=1.280e+00
2025-12-01 16:48:10,855 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,866 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,883 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,894 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,911 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,922 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,938 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,949 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,965 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:10,976 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:10,993 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,004 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,020 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,031 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,047 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,058 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,074 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,086 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,102 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,114 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,130 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,141 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,419 - INFO - integration_test - Step 20: MPC solve successful
2025-12-01 16:48:11,435 - INFO - integration_test - Step 20: Computed 10 numeric contouring constraints for visualization (s=5.100)
2025-12-01 16:48:11,436 - DEBUG - integration_test - Step 20: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:11,436 - INFO - integration_test - === Applying control at step 20 ===
2025-12-01 16:48:11,436 - INFO - integration_test -   Control dict from planner: {'a': -9.931246217115967e-08, 'w': 0.7999999319350658}
2025-12-01 16:48:11,436 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:11,436 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:11,437 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:11,437 - INFO - integration_test - Step 20 completed in 0.619s
2025-12-01 16:48:11,460 - INFO - integration_test - Step 21 (contouring until path end)
2025-12-01 16:48:11,460 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.3119569  2.91218318 0.64835695 3.00000002 5.40000004]
2025-12-01 16:48:11,461 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.298m)
2025-12-01 16:48:11,461 - DEBUG - integration_test -   Set spline state to 5.4000
2025-12-01 16:48:11,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:11,477 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.312, 2.912), path_start=(0.000, 0.000), dist=5.203m
2025-12-01 16:48:11,478 - WARNING - integration_test - Could not update reference path at step 21: x and y must have the same length
2025-12-01 16:48:11,478 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2025-12-01 16:48:11,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:11,482 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:11,482 - INFO - integration_test - Warmstart k=0: x0=4.3119569008521355 , y0=2.912183184838415 , psi0=0.6483569507415812 , v0=3.0 , spline0=5.400000036003997 , a0=0.0 , w0=0.0
2025-12-01 16:48:11,482 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:11,483 - INFO - integration_test - Dyn residual k=0: pred=[4.55108002323778, 3.093346460202214, 0.6483569507415812, 3.0, 5.700000036003996], ws=[4.55108002323778, 3.093346460202214, 0.6483569507415812, 3.0, 7.122338728209358], res=[0.0, 0.0, 0.0, 0.0, -1.4223386922053614], res_norm=1.422e+00
2025-12-01 16:48:11,484 - INFO - integration_test - Dyn residual k=1: pred=[4.790203145623425, 3.274509735566013, 0.6483569507415812, 3.0, 7.422338728209358], ws=[4.790203145623425, 3.274509735566013, 0.6483569507415812, 3.0, 8.811140336911775], res=[0.0, 0.0, 0.0, 0.0, -1.3888016087024173], res_norm=1.389e+00
2025-12-01 16:48:11,485 - INFO - integration_test - Dyn residual k=2: pred=[5.02932626800907, 3.455673010929812, 0.6483569507415812, 3.0, 9.111140336911776], ws=[5.02932626800907, 3.455673010929812, 0.6483569507415812, 3.0, 10.451520329864696], res=[0.0, 0.0, 0.0, 0.0, -1.3403799929529203], res_norm=1.340e+00
2025-12-01 16:48:11,502 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,515 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,532 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,544 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,574 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,592 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,605 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,622 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,634 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,651 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,664 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,681 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,694 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,711 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,723 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,740 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,752 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,769 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,782 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:11,799 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:11,811 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,116 - INFO - integration_test - Step 21: MPC solve successful
2025-12-01 16:48:12,131 - INFO - integration_test - Step 21: Computed 10 numeric contouring constraints for visualization (s=5.400)
2025-12-01 16:48:12,131 - DEBUG - integration_test - Step 21: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:12,132 - INFO - integration_test - === Applying control at step 21 ===
2025-12-01 16:48:12,132 - INFO - integration_test -   Control dict from planner: {'a': 6.63491102467924e-08, 'w': 0.8000000099447773}
2025-12-01 16:48:12,132 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:12,132 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:12,133 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:12,133 - INFO - integration_test - Step 21 completed in 0.673s
2025-12-01 16:48:12,155 - INFO - integration_test - Step 22 (contouring until path end)
2025-12-01 16:48:12,155 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.54358238 3.10271311 0.72835695 3.00000003 5.70000004]
2025-12-01 16:48:12,156 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.147m)
2025-12-01 16:48:12,156 - DEBUG - integration_test -   Set spline state to 5.7000
2025-12-01 16:48:12,156 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:12,171 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.544, 3.103), path_start=(0.000, 0.000), dist=5.502m
2025-12-01 16:48:12,172 - WARNING - integration_test - Could not update reference path at step 22: x and y must have the same length
2025-12-01 16:48:12,172 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2025-12-01 16:48:12,174 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:12,175 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:12,175 - INFO - integration_test - Warmstart k=0: x0=4.543582378158022 , y0=3.1027131102033993 , psi0=0.7283569517360589 , v0=3.0 , spline0=5.700000038670331 , a0=0.0 , w0=0.0
2025-12-01 16:48:12,175 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:12,176 - INFO - integration_test - Dyn residual k=0: pred=[4.767463106660702, 3.302406423574452, 0.7283569517360589, 3.0, 6.000000038670331], ws=[4.767463106660702, 3.302406423574452, 0.7283569517360586, 3.0, 7.450611671374489], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.4506116327041578], res_norm=1.451e+00
2025-12-01 16:48:12,177 - INFO - integration_test - Dyn residual k=1: pred=[4.991343835163382, 3.5020997369455045, 0.7283569517360586, 3.0, 7.750611671374489], ws=[4.991343835163382, 3.5020997369455045, 0.7283569517360586, 3.0, 9.167663954735712], res=[0.0, 0.0, 0.0, 0.0, -1.4170522833612234], res_norm=1.417e+00
2025-12-01 16:48:12,178 - INFO - integration_test - Dyn residual k=2: pred=[5.2152245636660615, 3.701793050316557, 0.7283569517360586, 3.0, 9.467663954735713], ws=[5.2152245636660615, 3.701793050316557, 0.7283569517360586, 3.0, 10.83769785171878], res=[0.0, 0.0, 0.0, 0.0, -1.3700338969830668], res_norm=1.370e+00
2025-12-01 16:48:12,193 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,204 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,221 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,232 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,249 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,260 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,276 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,287 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,305 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,316 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,332 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,344 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,359 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,370 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,386 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,398 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,414 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,426 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,442 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,455 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,472 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,484 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,747 - INFO - integration_test - Step 22: MPC solve successful
2025-12-01 16:48:12,763 - INFO - integration_test - Step 22: Computed 10 numeric contouring constraints for visualization (s=5.700)
2025-12-01 16:48:12,763 - DEBUG - integration_test - Step 22: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:12,763 - INFO - integration_test - === Applying control at step 22 ===
2025-12-01 16:48:12,763 - INFO - integration_test -   Control dict from planner: {'a': 2.1717835997810983e-08, 'w': 0.8000000099981636}
2025-12-01 16:48:12,763 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:12,763 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:12,764 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:12,764 - INFO - integration_test - Step 22 completed in 0.609s
2025-12-01 16:48:12,788 - INFO - integration_test - Step 23 (contouring until path end)
2025-12-01 16:48:12,788 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.75924091 3.31114394 0.80835695 3.00000003 6.00000004]
2025-12-01 16:48:12,789 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.357m)
2025-12-01 16:48:12,789 - DEBUG - integration_test -   Set spline state to 6.0000
2025-12-01 16:48:12,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:12,806 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.759, 3.311), path_start=(0.000, 0.000), dist=5.798m
2025-12-01 16:48:12,807 - WARNING - integration_test - Could not update reference path at step 23: x and y must have the same length
2025-12-01 16:48:12,807 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2025-12-01 16:48:12,810 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:12,811 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:12,811 - INFO - integration_test - Warmstart k=0: x0=4.75924090859294 , y0=3.311143944562118 , psi0=0.8083569527358752 , v0=3.0 , spline0=6.000000041553844 , a0=0.0 , w0=0.0
2025-12-01 16:48:12,811 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:12,812 - INFO - integration_test - Dyn residual k=0: pred=[4.96644717053004, 3.5280899401786616, 0.8083569527358752, 3.0, 6.300000041553844], ws=[4.96644717053004, 3.528089940178662, 0.8083569527358749, 3.0, 7.863293506037865], res=[0.0, -4.440892098500626e-16, 2.220446049250313e-16, 0.0, -1.5632934644840208], res_norm=1.563e+00
2025-12-01 16:48:12,813 - INFO - integration_test - Dyn residual k=1: pred=[5.173653432467141, 3.7450359357952063, 0.8083569527358749, 3.0, 8.163293506037865], ws=[5.173653432467141, 3.7450359357952063, 0.8083569527358749, 3.0, 9.700589054697375], res=[0.0, 0.0, 0.0, 0.0, -1.5372955486595092], res_norm=1.537e+00
2025-12-01 16:48:12,814 - INFO - integration_test - Dyn residual k=2: pred=[5.380859694404242, 3.96198193141175, 0.8083569527358749, 3.0, 10.000589054697375], ws=[5.380859694404242, 3.9619819314117506, 0.8083569527358749, 3.0, 11.427996956979491], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, -1.4274079022821162], res_norm=1.427e+00
2025-12-01 16:48:12,830 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,843 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,873 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,891 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,904 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,922 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,933 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,961 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:12,976 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:12,988 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,005 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,017 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,032 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,044 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,060 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,072 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,088 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,100 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,116 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,128 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,427 - INFO - integration_test - Step 23: MPC solve successful
2025-12-01 16:48:13,442 - INFO - integration_test - Step 23: Computed 10 numeric contouring constraints for visualization (s=6.000)
2025-12-01 16:48:13,442 - DEBUG - integration_test - Step 23: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:13,442 - INFO - integration_test - === Applying control at step 23 ===
2025-12-01 16:48:13,442 - INFO - integration_test -   Control dict from planner: {'a': 7.503441535368175e-09, 'w': 0.8000000099459799}
2025-12-01 16:48:13,442 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:13,443 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:13,444 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:13,444 - INFO - integration_test - Step 23 completed in 0.656s
2025-12-01 16:48:13,465 - INFO - integration_test - Step 24 (contouring until path end)
2025-12-01 16:48:13,466 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.95755301 3.53614244 0.88835695 3.00000003 6.30000004]
2025-12-01 16:48:13,466 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.334m)
2025-12-01 16:48:13,466 - DEBUG - integration_test -   Set spline state to 6.3000
2025-12-01 16:48:13,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:13,481 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.958, 3.536), path_start=(0.000, 0.000), dist=6.089m
2025-12-01 16:48:13,481 - WARNING - integration_test - Could not update reference path at step 24: x and y must have the same length
2025-12-01 16:48:13,481 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2025-12-01 16:48:13,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:13,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:13,487 - INFO - integration_test - Warmstart k=0: x0=4.957553013240594 , y0=3.5361424416652336 , psi0=0.8883569537304732 , v0=3.0 , spline0=6.300000044512392 , a0=0.0 , w0=0.0
2025-12-01 16:48:13,487 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:13,488 - INFO - integration_test - Dyn residual k=0: pred=[5.146759395616997, 3.7689534054707092, 0.8883569537304732, 3.0, 6.600000044512392], ws=[5.146759395616997, 3.7689534054707092, 0.8883569537304732, 3.0, 8.189872463514092], res=[0.0, 0.0, 0.0, 0.0, -1.5898724190017006], res_norm=1.590e+00
2025-12-01 16:48:13,489 - INFO - integration_test - Dyn residual k=1: pred=[5.3359657779934, 4.001764369276185, 0.8883569537304732, 3.0, 8.489872463514093], ws=[5.3359657779934, 4.001764369276185, 0.8883569537304732, 3.0, 10.05473214123007], res=[0.0, 0.0, 0.0, 0.0, -1.5648596777159778], res_norm=1.565e+00
2025-12-01 16:48:13,490 - INFO - integration_test - Dyn residual k=2: pred=[5.525172160369803, 4.234575333081661, 0.8883569537304732, 3.0, 10.354732141230071], ws=[5.525172160369803, 4.234575333081661, 0.8883569537304732, 3.0, 11.877966026952622], res=[0.0, 0.0, 0.0, 0.0, -1.5232338857225507], res_norm=1.523e+00
2025-12-01 16:48:13,506 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,517 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,534 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,545 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,574 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,591 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,603 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,619 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,630 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,646 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,657 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,673 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,685 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,703 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,714 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,731 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,742 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,759 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,770 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:13,787 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:13,799 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,113 - INFO - integration_test - Step 24: MPC solve successful
2025-12-01 16:48:14,130 - INFO - integration_test - Step 24: Computed 10 numeric contouring constraints for visualization (s=6.300)
2025-12-01 16:48:14,130 - DEBUG - integration_test - Step 24: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:14,130 - INFO - integration_test - === Applying control at step 24 ===
2025-12-01 16:48:14,130 - INFO - integration_test -   Control dict from planner: {'a': 2.131517554868282e-09, 'w': 0.800000009870381}
2025-12-01 16:48:14,130 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:14,130 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:14,132 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:14,132 - INFO - integration_test - Step 24 completed in 0.666s
2025-12-01 16:48:14,157 - INFO - integration_test - Step 25 (contouring until path end)
2025-12-01 16:48:14,157 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.13725017 3.77626938 0.96835695 3.00000003 6.60000005]
2025-12-01 16:48:14,158 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.193m)
2025-12-01 16:48:14,158 - DEBUG - integration_test -   Set spline state to 6.6000
2025-12-01 16:48:14,158 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:14,173 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.137, 3.776), path_start=(0.000, 0.000), dist=6.376m
2025-12-01 16:48:14,173 - WARNING - integration_test - Could not update reference path at step 25: x and y must have the same length
2025-12-01 16:48:14,173 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2025-12-01 16:48:14,176 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:14,177 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:14,177 - INFO - integration_test - Warmstart k=0: x0=5.13725017128555 , y0=3.776269378862849 , psi0=0.9683569547175113 , v0=3.0 , spline0=6.600000047492254 , a0=0.0 , w0=0.0
2025-12-01 16:48:14,177 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:14,178 - INFO - integration_test - Dyn residual k=0: pred=[5.307246398912529, 4.023456115142522, 0.9683569547175113, 3.0, 6.900000047492254], ws=[5.307246398912529, 4.023456115142522, 0.9683569547175113, 3.0, 8.60168198905301], res=[0.0, 0.0, 0.0, 0.0, -1.7016819415607554], res_norm=1.702e+00
2025-12-01 16:48:14,179 - INFO - integration_test - Dyn residual k=1: pred=[5.477242626539508, 4.270642851422195, 0.9683569547175113, 3.0, 8.90168198905301], ws=[5.477242626539508, 4.270642851422195, 0.9683569547175113, 3.0, 10.51632779823629], res=[0.0, 0.0, 0.0, 0.0, -1.6146458091832798], res_norm=1.615e+00
2025-12-01 16:48:14,180 - INFO - integration_test - Dyn residual k=2: pred=[5.647238854166487, 4.5178295877018675, 0.9683569547175113, 3.0, 10.81632779823629], ws=[5.647238854166487, 4.5178295877018675, 0.9683569547175113, 3.0, 12.392556256083058], res=[0.0, 0.0, 0.0, 0.0, -1.5762284578467671], res_norm=1.576e+00
2025-12-01 16:48:14,195 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,207 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,224 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,235 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,252 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,263 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,280 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,292 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,309 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,321 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,337 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,348 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,364 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,376 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,392 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,404 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,420 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,432 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,448 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,459 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,475 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,486 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,780 - INFO - integration_test - Step 25: MPC solve successful
2025-12-01 16:48:14,797 - INFO - integration_test - Step 25: Computed 10 numeric contouring constraints for visualization (s=6.600)
2025-12-01 16:48:14,798 - DEBUG - integration_test - Step 25: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:14,798 - INFO - integration_test - === Applying control at step 25 ===
2025-12-01 16:48:14,798 - INFO - integration_test -   Control dict from planner: {'a': -3.0819789763889047e-10, 'w': 0.8000000096401318}
2025-12-01 16:48:14,798 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:14,798 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:14,799 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:14,799 - INFO - integration_test - Step 25 completed in 0.642s
2025-12-01 16:48:14,821 - INFO - integration_test - Step 26 (contouring until path end)
2025-12-01 16:48:14,821 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.29718293 4.02998876 1.04835696 3.00000003 6.90000005]
2025-12-01 16:48:14,822 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.389m)
2025-12-01 16:48:14,822 - DEBUG - integration_test -   Set spline state to 6.9000
2025-12-01 16:48:14,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:14,838 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.297, 4.030), path_start=(0.000, 0.000), dist=6.656m
2025-12-01 16:48:14,838 - WARNING - integration_test - Could not update reference path at step 26: x and y must have the same length
2025-12-01 16:48:14,838 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2025-12-01 16:48:14,841 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:14,842 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:14,842 - INFO - integration_test - Warmstart k=0: x0=5.297182934100104 , y0=4.029988763146628 , psi0=1.0483569556815244 , v0=3.0 , spline0=6.900000050469035 , a0=0.0 , w0=0.0
2025-12-01 16:48:14,842 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:14,843 - INFO - integration_test - Dyn residual k=0: pred=[5.4468816112300305, 4.2899701202966165, 1.0483569556815244, 3.0, 7.2000000504690345], ws=[5.4468816112300305, 4.2899701202966165, 1.0483569556815242, 3.0, 8.926536841084143], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.7265367906151088], res_norm=1.727e+00
2025-12-01 16:48:14,844 - INFO - integration_test - Dyn residual k=1: pred=[5.596580288359957, 4.549951477446605, 1.0483569556815242, 3.0, 9.226536841084144], ws=[5.596580288359957, 4.549951477446605, 1.0483569556815242, 3.0, 10.931299301277132], res=[0.0, 0.0, 0.0, 0.0, -1.7047624601929883], res_norm=1.705e+00
2025-12-01 16:48:14,845 - INFO - integration_test - Dyn residual k=2: pred=[5.746278965489883, 4.8099328345965935, 1.0483569556815242, 3.0, 11.231299301277133], ws=[5.746278965489883, 4.8099328345965935, 1.0483569556815242, 3.0, 12.837078251680724], res=[0.0, 0.0, 0.0, 0.0, -1.6057789504035913], res_norm=1.606e+00
2025-12-01 16:48:14,860 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,871 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,887 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,900 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,916 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,928 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,944 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,955 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:14,972 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:14,983 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,000 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,012 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,028 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,040 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,058 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,069 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,085 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,097 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,114 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,127 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,143 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,154 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,435 - INFO - integration_test - Step 26: MPC solve successful
2025-12-01 16:48:15,449 - INFO - integration_test - Step 26: Computed 10 numeric contouring constraints for visualization (s=6.900)
2025-12-01 16:48:15,450 - DEBUG - integration_test - Step 26: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:15,450 - INFO - integration_test - === Applying control at step 26 ===
2025-12-01 16:48:15,450 - INFO - integration_test -   Control dict from planner: {'a': 5.859452449119338e-10, 'w': 0.8000000096791665}
2025-12-01 16:48:15,450 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:15,450 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:15,451 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:15,451 - INFO - integration_test - Step 26 completed in 0.630s
2025-12-01 16:48:15,474 - INFO - integration_test - Step 27 (contouring until path end)
2025-12-01 16:48:15,474 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.43632828 4.29567766 1.12835696 3.00000003 7.20000005]
2025-12-01 16:48:15,475 - INFO - integration_test - Step 27: Re-initialized spline from 7.2000 to 6.6638 (vehicle at (5.44, 4.30), closest path point at (5.83, 3.90), distance=0.561m)
2025-12-01 16:48:15,475 - DEBUG - integration_test -   Set spline state to 6.6638
2025-12-01 16:48:15,475 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:15,490 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.436, 4.296), path_start=(0.000, 0.000), dist=6.929m
2025-12-01 16:48:15,491 - WARNING - integration_test - Could not update reference path at step 27: x and y must have the same length
2025-12-01 16:48:15,491 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2025-12-01 16:48:15,494 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:15,495 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:15,495 - INFO - integration_test - Warmstart k=0: x0=5.4363282777622 , y0=4.295677656254378 , psi0=1.1283569566494411 , v0=3.0 , spline0=6.663758816132114 , a0=0.0 , w0=0.0
2025-12-01 16:48:15,495 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:15,496 - INFO - integration_test - Dyn residual k=0: pred=[5.56477184369981, 4.5667906407631085, 1.1283569566494411, 3.0, 6.963758816132114], ws=[5.56477184369981, 4.5667906407631085, 1.1283569566494407, 3.0, 8.688763841432404], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -1.7250050253002902], res_norm=1.725e+00
2025-12-01 16:48:15,497 - INFO - integration_test - Dyn residual k=1: pred=[5.6932154096374195, 4.837903625271839, 1.1283569566494407, 3.0, 8.988763841432405], ws=[5.6932154096374195, 4.837903625271839, 1.1283569566494407, 3.0, 10.634131883893838], res=[0.0, 0.0, 0.0, 0.0, -1.645368042461433], res_norm=1.645e+00
2025-12-01 16:48:15,498 - INFO - integration_test - Dyn residual k=2: pred=[5.821658975575029, 5.109016609780569, 1.1283569566494407, 3.0, 10.934131883893839], ws=[5.821658975575029, 5.109016609780569, 1.1283569566494407, 3.0, 12.549700596857718], res=[0.0, 0.0, 0.0, 0.0, -1.6155687129638796], res_norm=1.616e+00
2025-12-01 16:48:15,513 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,524 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,540 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,552 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,568 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,580 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,596 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,608 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,623 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,635 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,650 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,661 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,678 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,689 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,706 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,717 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,733 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,745 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,761 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,772 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:15,789 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:15,801 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,083 - INFO - integration_test - Step 27: MPC solve successful
2025-12-01 16:48:16,099 - INFO - integration_test - Step 27: Computed 10 numeric contouring constraints for visualization (s=6.664)
2025-12-01 16:48:16,099 - DEBUG - integration_test - Step 27: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:16,100 - INFO - integration_test - === Applying control at step 27 ===
2025-12-01 16:48:16,100 - INFO - integration_test -   Control dict from planner: {'a': -1.2816265841774025e-07, 'w': -0.799998770205912}
2025-12-01 16:48:16,100 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:16,100 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:16,101 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:16,101 - INFO - integration_test - Step 27 completed in 0.627s
2025-12-01 16:48:16,124 - INFO - integration_test - Step 28 (contouring until path end)
2025-12-01 16:48:16,125 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.5754736  4.56136656 1.04835708 3.00000002 6.96375882]
2025-12-01 16:48:16,126 - INFO - integration_test - Step 28: Re-initialized spline from 6.9638 to 6.6638 (vehicle at (5.58, 4.56), closest path point at (5.83, 3.90), distance=0.711m)
2025-12-01 16:48:16,126 - DEBUG - integration_test -   Set spline state to 6.6638
2025-12-01 16:48:16,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:16,141 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.575, 4.561), path_start=(0.000, 0.000), dist=7.204m
2025-12-01 16:48:16,141 - WARNING - integration_test - Could not update reference path at step 28: x and y must have the same length
2025-12-01 16:48:16,141 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2025-12-01 16:48:16,144 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:16,145 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:16,145 - INFO - integration_test - Warmstart k=0: x0=5.575473604770166 , y0=4.561366557644034 , psi0=1.04835707962885 , v0=3.0 , spline0=6.663758816132114 , a0=0.0 , w0=0.0
2025-12-01 16:48:16,145 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:16,146 - INFO - integration_test - Dyn residual k=0: pred=[5.725172249676097, 4.821347933348771, 1.04835707962885, 3.0, 6.963758816132114], ws=[5.725172249676097, 4.821347933348771, 1.0483570796288504, 3.0, 8.688763841432403], res=[0.0, 0.0, -4.440892098500626e-16, 0.0, -1.7250050253002884], res_norm=1.725e+00
2025-12-01 16:48:16,147 - INFO - integration_test - Dyn residual k=1: pred=[5.8748708945820285, 5.081329309053508, 1.0483570796288504, 3.0, 8.988763841432403], ws=[5.8748708945820285, 5.081329309053508, 1.0483570796288504, 3.0, 10.630534710236448], res=[0.0, 0.0, 0.0, 0.0, -1.6417708688040449], res_norm=1.642e+00
2025-12-01 16:48:16,148 - INFO - integration_test - Dyn residual k=2: pred=[6.02456953948796, 5.341310684758246, 1.0483570796288504, 3.0, 10.930534710236449], ws=[6.02456953948796, 5.341310684758246, 1.0483570796288504, 3.0, 12.538006027949654], res=[0.0, 0.0, 0.0, 0.0, -1.6074713177132054], res_norm=1.607e+00
2025-12-01 16:48:16,162 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,173 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,190 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,201 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,217 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,228 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,245 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,256 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,272 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,284 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,300 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,311 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,327 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,339 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,355 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,366 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,382 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,394 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,410 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,422 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,437 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,448 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,720 - INFO - integration_test - Step 28: MPC solve successful
2025-12-01 16:48:16,735 - INFO - integration_test - Step 28: Computed 10 numeric contouring constraints for visualization (s=6.664)
2025-12-01 16:48:16,735 - DEBUG - integration_test - Step 28: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:16,735 - INFO - integration_test - === Applying control at step 28 ===
2025-12-01 16:48:16,735 - INFO - integration_test -   Control dict from planner: {'a': 8.659386401970374e-08, 'w': -0.8000000099973791}
2025-12-01 16:48:16,735 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:16,735 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:16,736 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:16,736 - INFO - integration_test - Step 28 completed in 0.612s
2025-12-01 16:48:16,758 - INFO - integration_test - Step 29 (contouring until path end)
2025-12-01 16:48:16,759 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.73540634 4.81508596 0.96835708 3.00000003 6.96375882]
2025-12-01 16:48:16,760 - INFO - integration_test - Step 29: Re-initialized spline from 6.9638 to 6.6638 (vehicle at (5.74, 4.82), closest path point at (5.83, 3.90), distance=0.922m)
2025-12-01 16:48:16,760 - DEBUG - integration_test -   Set spline state to 6.6638
2025-12-01 16:48:16,760 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:16,774 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.735, 4.815), path_start=(0.000, 0.000), dist=7.489m
2025-12-01 16:48:16,775 - WARNING - integration_test - Could not update reference path at step 29: x and y must have the same length
2025-12-01 16:48:16,775 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2025-12-01 16:48:16,777 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:16,778 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:16,778 - INFO - integration_test - Warmstart k=0: x0=5.735406335696114 , y0=4.815085961030981 , psi0=0.968357078629112 , v0=3.0 , spline0=6.663758816132114 , a0=0.0 , w0=0.0
2025-12-01 16:48:16,779 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:16,779 - INFO - integration_test - Dyn residual k=0: pred=[5.9054025326937865, 5.062272718375157, 0.968357078629112, 3.0, 6.963758816132114], ws=[5.9054025326937865, 5.062272718375157, 0.9683570786291122, 3.0, 8.688763841432403], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.7250050253002884], res_norm=1.725e+00
2025-12-01 16:48:16,780 - INFO - integration_test - Dyn residual k=1: pred=[6.075398729691459, 5.309459475719333, 0.9683570786291122, 3.0, 8.988763841432403], ws=[6.075398729691459, 5.309459475719333, 0.9683570786291122, 3.0, 10.627202857794291], res=[0.0, 0.0, 0.0, 0.0, -1.6384390163618878], res_norm=1.638e+00
2025-12-01 16:48:16,781 - INFO - integration_test - Dyn residual k=2: pred=[6.245394926689132, 5.556646233063509, 0.9683570786291122, 3.0, 10.927202857794292], ws=[6.245394926689132, 5.556646233063509, 0.9683570786291122, 3.0, 12.526993980252868], res=[0.0, 0.0, 0.0, 0.0, -1.5997911224585764], res_norm=1.600e+00
2025-12-01 16:48:16,796 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,808 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,824 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,835 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,851 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,862 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,890 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,906 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,917 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,933 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,944 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,960 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,971 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:16,987 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:16,999 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,015 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,026 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,042 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,053 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,069 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,080 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,334 - INFO - integration_test - Step 29: MPC solve successful
2025-12-01 16:48:17,349 - INFO - integration_test - Step 29: Computed 10 numeric contouring constraints for visualization (s=6.664)
2025-12-01 16:48:17,349 - DEBUG - integration_test - Step 29: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:17,349 - INFO - integration_test - === Applying control at step 29 ===
2025-12-01 16:48:17,349 - INFO - integration_test -   Control dict from planner: {'a': 2.7545557240416043e-08, 'w': -0.800000009233856}
2025-12-01 16:48:17,349 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:17,349 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:17,351 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:17,351 - INFO - integration_test - Step 29 completed in 0.592s
2025-12-01 16:48:17,376 - INFO - integration_test - Step 30 (contouring until path end)
2025-12-01 16:48:17,378 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.91510346 5.05521292 0.88835708 3.00000003 6.96375882]
2025-12-01 16:48:17,378 - INFO - integration_test - Step 30: Re-initialized spline from 6.9638 to 7.2696 (vehicle at (5.92, 5.06), closest path point at (6.41, 4.13), distance=1.049m)
2025-12-01 16:48:17,378 - DEBUG - integration_test -   Set spline state to 7.2696
2025-12-01 16:48:17,379 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:17,394 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.915, 5.055), path_start=(0.000, 0.000), dist=7.781m
2025-12-01 16:48:17,394 - WARNING - integration_test - Could not update reference path at step 30: x and y must have the same length
2025-12-01 16:48:17,394 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2025-12-01 16:48:17,397 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:17,398 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:17,398 - INFO - integration_test - Warmstart k=0: x0=5.915103463822125 , y0=5.055212920288061 , psi0=0.8883570777057264 , v0=3.0 , spline0=7.269555072144124 , a0=0.0 , w0=0.0
2025-12-01 16:48:17,398 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:17,399 - INFO - integration_test - Dyn residual k=0: pred=[6.104309817335728, 5.288023907550444, 0.8883570777057264, 3.0, 7.569555072144124], ws=[6.104309817335728, 5.288023907550444, 0.8883570777057264, 3.0, 9.430535680018764], res=[0.0, 0.0, 0.0, 0.0, -1.86098060787464], res_norm=1.861e+00
2025-12-01 16:48:17,400 - INFO - integration_test - Dyn residual k=1: pred=[6.293516170849331, 5.520834894812826, 0.8883570777057264, 3.0, 9.730535680018765], ws=[6.293516170849331, 5.520834894812826, 0.8883570777057264, 3.0, 11.495200268563924], res=[0.0, 0.0, 0.0, 0.0, -1.764664588545159], res_norm=1.765e+00
2025-12-01 16:48:17,401 - INFO - integration_test - Dyn residual k=2: pred=[6.482722524362933, 5.753645882075209, 0.8883570777057264, 3.0, 11.795200268563924], ws=[6.482722524362933, 5.753645882075209, 0.8883570777057264, 3.0, 13.45478931255224], res=[0.0, 0.0, 0.0, 0.0, -1.6595890439883156], res_norm=1.660e+00
2025-12-01 16:48:17,416 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,427 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,444 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,455 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,471 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,482 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,498 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,510 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,525 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,537 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,553 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,564 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,580 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,591 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,607 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,618 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,634 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,645 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,672 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,688 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:17,700 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:17,981 - INFO - integration_test - Step 30: MPC solve successful
2025-12-01 16:48:17,997 - INFO - integration_test - Step 30: Computed 10 numeric contouring constraints for visualization (s=7.270)
2025-12-01 16:48:17,997 - DEBUG - integration_test - Step 30: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:17,997 - INFO - integration_test - === Applying control at step 30 ===
2025-12-01 16:48:17,997 - INFO - integration_test -   Control dict from planner: {'a': 1.0500191598159799e-08, 'w': -0.8000000099972624}
2025-12-01 16:48:17,997 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:17,997 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:17,998 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:17,999 - INFO - integration_test - Step 30 completed in 0.621s
2025-12-01 16:48:18,024 - INFO - integration_test - Step 31 (contouring until path end)
2025-12-01 16:48:18,026 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.11341554 5.28021144 0.80835708 3.00000003 7.56955508]
2025-12-01 16:48:18,026 - INFO - integration_test - Step 31: Re-initialized spline from 7.5696 to 7.8754 (vehicle at (6.11, 5.28), closest path point at (6.61, 4.20), distance=1.187m)
2025-12-01 16:48:18,026 - DEBUG - integration_test -   Set spline state to 7.8754
2025-12-01 16:48:18,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:18,042 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.113, 5.280), path_start=(0.000, 0.000), dist=8.078m
2025-12-01 16:48:18,042 - WARNING - integration_test - Could not update reference path at step 31: x and y must have the same length
2025-12-01 16:48:18,042 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2025-12-01 16:48:18,045 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:18,046 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:18,046 - INFO - integration_test - Warmstart k=0: x0=6.1134155405597355 , y0=5.280211441956068 , psi0=0.8083570767060001 , v0=3.0 , spline0=7.8753513281561345 , a0=0.0 , w0=0.0
2025-12-01 16:48:18,046 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:18,047 - INFO - integration_test - Dyn residual k=0: pred=[6.320621775602013, 5.497157463259996, 0.8083570767060001, 3.0, 8.175351328156134], ws=[6.320621775602013, 5.497157463259996, 0.8083570767060002, 3.0, 10.08249243763425], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.9071411094781165], res_norm=1.907e+00
2025-12-01 16:48:18,048 - INFO - integration_test - Dyn residual k=1: pred=[6.52782801064429, 5.714103484563925, 0.8083570767060002, 3.0, 10.382492437634252], ws=[6.52782801064429, 5.714103484563925, 0.8083570767060002, 3.0, 12.242887950753257], res=[0.0, 0.0, 0.0, 0.0, -1.8603955131190055], res_norm=1.860e+00
2025-12-01 16:48:18,049 - INFO - integration_test - Dyn residual k=2: pred=[6.735034245686568, 5.931049505867853, 0.8083570767060002, 3.0, 12.542887950753258], ws=[6.735034245686568, 5.931049505867853, 0.8083570767060002, 3.0, 14.305538195174723], res=[0.0, 0.0, 0.0, 0.0, -1.7626502444214651], res_norm=1.763e+00
2025-12-01 16:48:18,064 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,076 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,094 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,106 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,123 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,134 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,151 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,163 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,179 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,190 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,207 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,218 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,234 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,245 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,261 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,272 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,288 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,300 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,316 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,328 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,344 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,355 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,664 - INFO - integration_test - Step 31: MPC solve successful
2025-12-01 16:48:18,680 - INFO - integration_test - Step 31: Computed 10 numeric contouring constraints for visualization (s=7.875)
2025-12-01 16:48:18,681 - DEBUG - integration_test - Step 31: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:18,681 - INFO - integration_test - === Applying control at step 31 ===
2025-12-01 16:48:18,681 - INFO - integration_test -   Control dict from planner: {'a': -7.120604594441893e-10, 'w': -0.8000000081458077}
2025-12-01 16:48:18,681 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:18,681 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:18,682 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:18,683 - INFO - integration_test - Step 31 completed in 0.657s
2025-12-01 16:48:18,704 - INFO - integration_test - Step 32 (contouring until path end)
2025-12-01 16:48:18,705 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.32907405 5.4886423  0.72835708 3.00000003 8.17535133]
2025-12-01 16:48:18,706 - INFO - integration_test - Step 32: Re-initialized spline from 8.1754 to 7.8754 (vehicle at (6.33, 5.49), closest path point at (6.61, 4.20), distance=1.316m)
2025-12-01 16:48:18,706 - DEBUG - integration_test -   Set spline state to 7.8754
2025-12-01 16:48:18,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:18,720 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.329, 5.489), path_start=(0.000, 0.000), dist=8.377m
2025-12-01 16:48:18,721 - WARNING - integration_test - Could not update reference path at step 32: x and y must have the same length
2025-12-01 16:48:18,721 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2025-12-01 16:48:18,724 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:18,725 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:18,725 - INFO - integration_test - Warmstart k=0: x0=6.329074045258824 , y0=5.488642303186588 , psi0=0.7283570758914193 , v0=3.0 , spline0=7.8753513281561345 , a0=0.0 , w0=0.0
2025-12-01 16:48:18,725 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:18,726 - INFO - integration_test - Dyn residual k=0: pred=[6.5529547489685065, 5.688335644353632, 0.7283570758914193, 3.0, 8.175351328156134], ws=[6.5529547489685065, 5.688335644353632, 0.7283570758914193, 3.0, 10.082492437634249], res=[0.0, 0.0, 0.0, 0.0, -1.9071411094781148], res_norm=1.907e+00
2025-12-01 16:48:18,727 - INFO - integration_test - Dyn residual k=1: pred=[6.776835452678189, 5.888028985520676, 0.7283570758914193, 3.0, 10.38249243763425], ws=[6.776835452678189, 5.888028985520676, 0.7283570758914193, 3.0, 12.23986115444605], res=[0.0, 0.0, 0.0, 0.0, -1.8573687168118003], res_norm=1.857e+00
2025-12-01 16:48:18,728 - INFO - integration_test - Dyn residual k=2: pred=[7.000716156387872, 6.08772232668772, 0.7283570758914193, 3.0, 12.53986115444605], ws=[7.000716156387872, 6.08772232668772, 0.7283570758914193, 3.0, 14.295430250137489], res=[0.0, 0.0, 0.0, 0.0, -1.7555690956914383], res_norm=1.756e+00
2025-12-01 16:48:18,742 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,754 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,770 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,782 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,799 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,810 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,826 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,838 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,853 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,864 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,880 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,892 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,907 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,919 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,934 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,945 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,961 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,972 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:18,988 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:18,999 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,015 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,026 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,301 - INFO - integration_test - Step 32: MPC solve successful
2025-12-01 16:48:19,316 - INFO - integration_test - Step 32: Computed 10 numeric contouring constraints for visualization (s=7.875)
2025-12-01 16:48:19,316 - DEBUG - integration_test - Step 32: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:19,316 - INFO - integration_test - === Applying control at step 32 ===
2025-12-01 16:48:19,317 - INFO - integration_test -   Control dict from planner: {'a': 3.951565308491444e-09, 'w': -0.8000000099865485}
2025-12-01 16:48:19,317 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:19,317 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:19,318 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:19,318 - INFO - integration_test - Step 32 completed in 0.613s
2025-12-01 16:48:19,340 - INFO - integration_test - Step 33 (contouring until path end)
2025-12-01 16:48:19,341 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.5606995  5.67917226 0.64835707 3.00000003 8.17535133]
2025-12-01 16:48:19,342 - INFO - integration_test - Step 33: Re-initialized spline from 8.1754 to 8.4811 (vehicle at (6.56, 5.68), closest path point at (7.21, 4.39), distance=1.442m)
2025-12-01 16:48:19,342 - DEBUG - integration_test -   Set spline state to 8.4811
2025-12-01 16:48:19,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:19,356 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.561, 5.679), path_start=(0.000, 0.000), dist=8.677m
2025-12-01 16:48:19,356 - WARNING - integration_test - Could not update reference path at step 33: x and y must have the same length
2025-12-01 16:48:19,357 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2025-12-01 16:48:19,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:19,360 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:19,360 - INFO - integration_test - Warmstart k=0: x0=6.560699499395671 , y0=5.679172257702236 , psi0=0.6483570748927645 , v0=3.0 , spline0=8.481147584168145 , a0=0.0 , w0=0.0
2025-12-01 16:48:19,360 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:19,361 - INFO - integration_test - Dyn residual k=0: pred=[6.79982259928968, 5.860335562753452, 0.6483570748927645, 3.0, 8.781147584168146], ws=[6.79982259928968, 5.860335562753452, 0.6483570748927647, 3.0, 10.815217304111869], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -2.034069719943723], res_norm=2.034e+00
2025-12-01 16:48:19,362 - INFO - integration_test - Dyn residual k=1: pred=[7.038945699183689, 6.041498867804668, 0.6483570748927647, 3.0, 11.11521730411187], ws=[7.038945699183689, 6.041498867804668, 0.6483570748927647, 3.0, 13.026640461730594], res=[0.0, 0.0, 0.0, 0.0, -1.9114231576187244], res_norm=1.911e+00
2025-12-01 16:48:19,363 - INFO - integration_test - Dyn residual k=2: pred=[7.2780687990776975, 6.222662172855884, 0.6483570748927647, 3.0, 13.326640461730594], ws=[7.2780687990776975, 6.222662172855884, 0.6483570748927647, 3.0, 15.144559168403202], res=[0.0, 0.0, 0.0, 0.0, -1.8179187066726072], res_norm=1.818e+00
2025-12-01 16:48:19,377 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,389 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,405 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,416 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,432 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,443 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,460 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,471 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,487 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,499 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,515 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,526 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,541 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,552 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,567 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,578 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,595 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,606 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,622 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,633 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,648 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:19,660 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:19,959 - INFO - integration_test - Step 33: MPC solve successful
2025-12-01 16:48:19,974 - INFO - integration_test - Step 33: Computed 10 numeric contouring constraints for visualization (s=8.481)
2025-12-01 16:48:19,975 - DEBUG - integration_test - Step 33: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:19,975 - INFO - integration_test - === Applying control at step 33 ===
2025-12-01 16:48:19,975 - INFO - integration_test -   Control dict from planner: {'a': -2.0945245722685753e-09, 'w': -0.8000000085019864}
2025-12-01 16:48:19,975 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:19,975 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:19,976 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:19,976 - INFO - integration_test - Step 33 completed in 0.635s
2025-12-01 16:48:20,002 - INFO - integration_test - Step 34 (contouring until path end)
2025-12-01 16:48:20,004 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.80681029 5.85058256 0.56835707 3.00000003 8.78114759]
2025-12-01 16:48:20,004 - INFO - integration_test - Step 34: Re-initialized spline from 8.7811 to 8.4811 (vehicle at (6.81, 5.85), closest path point at (7.21, 4.39), distance=1.513m)
2025-12-01 16:48:20,004 - DEBUG - integration_test -   Set spline state to 8.4811
2025-12-01 16:48:20,005 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:20,019 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.807, 5.851), path_start=(0.000, 0.000), dist=8.976m
2025-12-01 16:48:20,019 - WARNING - integration_test - Could not update reference path at step 34: x and y must have the same length
2025-12-01 16:48:20,019 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2025-12-01 16:48:20,022 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:20,023 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:20,023 - INFO - integration_test - Warmstart k=0: x0=6.806810290475565 , y0=5.850582563960671 , psi0=0.5683570740425659 , v0=3.0 , spline0=8.481147584168145 , a0=0.0 , w0=0.0
2025-12-01 16:48:20,023 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:20,024 - INFO - integration_test - Dyn residual k=0: pred=[7.0596462146851815, 6.0120570059911955, 0.5683570740425659, 3.0, 8.781147584168146], ws=[7.0596462146851815, 6.0120570059911955, 0.5683570740425656, 3.0, 10.815217304111867], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.034069719943721], res_norm=2.034e+00
2025-12-01 16:48:20,025 - INFO - integration_test - Dyn residual k=1: pred=[7.312482138894798, 6.17353144802172, 0.5683570740425656, 3.0, 11.115217304111868], ws=[7.312482138894798, 6.17353144802172, 0.5683570740425656, 3.0, 13.024089348139281], res=[0.0, 0.0, 0.0, 0.0, -1.9088720440274134], res_norm=1.909e+00
2025-12-01 16:48:20,025 - INFO - integration_test - Dyn residual k=2: pred=[7.565318063104415, 6.335005890052244, 0.5683570740425656, 3.0, 13.324089348139282], ws=[7.565318063104415, 6.335005890052244, 0.5683570740425656, 3.0, 15.135733073410496], res=[0.0, 0.0, 0.0, 0.0, -1.8116437252712139], res_norm=1.812e+00
2025-12-01 16:48:20,040 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,051 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,067 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,079 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,107 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,122 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,134 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,149 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,160 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,176 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,187 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,204 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,215 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,231 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,243 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,258 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,270 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,286 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,297 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,314 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,326 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,650 - INFO - integration_test - Step 34: MPC solve successful
2025-12-01 16:48:20,665 - INFO - integration_test - Step 34: Computed 10 numeric contouring constraints for visualization (s=8.481)
2025-12-01 16:48:20,665 - DEBUG - integration_test - Step 34: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:20,665 - INFO - integration_test - === Applying control at step 34 ===
2025-12-01 16:48:20,665 - INFO - integration_test -   Control dict from planner: {'a': -9.351920663707867e-07, 'w': -0.7999995834991473}
2025-12-01 16:48:20,665 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:20,665 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:20,666 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:20,666 - INFO - integration_test - Step 34 completed in 0.663s
2025-12-01 16:48:20,689 - INFO - integration_test - Step 35 (contouring until path end)
2025-12-01 16:48:20,693 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.06583214 6.00177678 0.48835712 2.99999994 8.78114758]
2025-12-01 16:48:20,693 - INFO - integration_test - Step 35: Re-initialized spline from 8.7811 to 8.4811 (vehicle at (7.07, 6.00), closest path point at (7.21, 4.39), distance=1.616m)
2025-12-01 16:48:20,693 - DEBUG - integration_test -   Set spline state to 8.4811
2025-12-01 16:48:20,694 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:20,707 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.066, 6.002), path_start=(0.000, 0.000), dist=9.271m
2025-12-01 16:48:20,708 - WARNING - integration_test - Could not update reference path at step 35: x and y must have the same length
2025-12-01 16:48:20,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2025-12-01 16:48:20,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:20,711 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:20,711 - INFO - integration_test - Warmstart k=0: x0=7.065832142042686 , y0=6.001776784183981 , psi0=0.4883571156926511 , v0=2.9999999360693885 , spline0=8.481147584168145 , a0=0.0 , w0=0.0
2025-12-01 16:48:20,711 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:20,712 - INFO - integration_test - Dyn residual k=0: pred=[7.3307635918200384, 6.142529486051596, 0.4883571156926511, 2.9999999360693885, 8.781147577775084], ws=[7.330763591820039, 6.142529486051596, 0.48835711569265117, 2.9999999360693885, 10.815217297718807], res=[-8.881784197001252e-16, 0.0, -5.551115123125783e-17, 0.0, -2.034069719943723], res_norm=2.034e+00
2025-12-01 16:48:20,713 - INFO - integration_test - Dyn residual k=1: pred=[7.595695041597391, 6.283282187919211, 0.48835711569265117, 2.9999999360693885, 11.115217291325745], ws=[7.595695041597391, 6.283282187919211, 0.48835711569265117, 2.9999999360693885, 13.021871188850003], res=[0.0, 0.0, 0.0, 0.0, -1.906653897524258], res_norm=1.907e+00
2025-12-01 16:48:20,714 - INFO - integration_test - Dyn residual k=2: pred=[7.8606264913747435, 6.424034889786825, 0.48835711569265117, 2.9999999360693885, 13.321871182456942], ws=[7.8606264913747435, 6.424034889786825, 0.48835711569265117, 2.9999999360693885, 15.127831087816416], res=[0.0, 0.0, 0.0, 0.0, -1.8059599053594741], res_norm=1.806e+00
2025-12-01 16:48:20,728 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,739 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,755 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,766 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,782 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,794 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,810 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,821 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,837 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,848 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,864 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,875 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,891 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,902 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,918 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,929 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,945 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,956 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,972 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:20,983 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:20,999 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,011 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,300 - INFO - integration_test - Step 35: MPC solve successful
2025-12-01 16:48:21,315 - INFO - integration_test - Step 35: Computed 10 numeric contouring constraints for visualization (s=8.481)
2025-12-01 16:48:21,315 - DEBUG - integration_test - Step 35: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:21,315 - INFO - integration_test - === Applying control at step 35 ===
2025-12-01 16:48:21,316 - INFO - integration_test -   Control dict from planner: {'a': 6.239462382488013e-07, 'w': -0.80000000890198}
2025-12-01 16:48:21,316 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:21,316 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:21,316 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:21,317 - INFO - integration_test - Step 35 completed in 0.624s
2025-12-01 16:48:21,338 - INFO - integration_test - Step 36 (contouring until path end)
2025-12-01 16:48:21,342 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.3361082  6.13178779 0.40835711 3.         8.78114758]
2025-12-01 16:48:21,342 - INFO - integration_test - Step 36: Re-initialized spline from 8.7811 to 9.0869 (vehicle at (7.34, 6.13), closest path point at (7.83, 4.55), distance=1.660m)
2025-12-01 16:48:21,342 - DEBUG - integration_test -   Set spline state to 9.0869
2025-12-01 16:48:21,343 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:21,356 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.336, 6.132), path_start=(0.000, 0.000), dist=9.561m
2025-12-01 16:48:21,357 - WARNING - integration_test - Could not update reference path at step 36: x and y must have the same length
2025-12-01 16:48:21,357 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2025-12-01 16:48:21,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:21,361 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:21,361 - INFO - integration_test - Warmstart k=0: x0=7.33610820141025 , y0=6.131787793589628 , psi0=0.4083571148024531 , v0=2.999999998464012 , spline0=9.086943840180156 , a0=0.0 , w0=0.0
2025-12-01 16:48:21,361 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:21,362 - INFO - integration_test - Dyn residual k=0: pred=[7.611440537529095, 6.250918413478806, 0.4083571148024531, 2.999999998464012, 9.386943840026557], ws=[7.611440537529095, 6.250918413478806, 0.40835711480245296, 2.999999998464012, 11.540967973383248], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -2.1540241333566907], res_norm=2.154e+00
2025-12-01 16:48:21,362 - INFO - integration_test - Dyn residual k=1: pred=[7.88677287364794, 6.370049033367985, 0.40835711480245296, 2.999999998464012, 11.840967973229649], ws=[7.88677287364794, 6.370049033367985, 0.40835711480245296, 2.999999998464012, 13.857780899381575], res=[0.0, 0.0, 0.0, 0.0, -2.0168129261519265], res_norm=2.017e+00
2025-12-01 16:48:21,363 - INFO - integration_test - Dyn residual k=2: pred=[8.162105209766786, 6.489179653257163, 0.40835711480245296, 2.999999998464012, 14.157780899227976], ws=[8.162105209766786, 6.489179653257163, 0.40835711480245296, 2.999999998464012, 16.110080170608818], res=[0.0, 0.0, 0.0, 0.0, -1.9522992713808414], res_norm=1.952e+00
2025-12-01 16:48:21,378 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,389 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,406 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,417 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,434 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,445 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,461 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,472 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,488 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,500 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,516 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,527 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,543 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,554 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,570 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,581 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,597 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,609 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,625 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,636 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:21,652 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:21,664 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,041 - INFO - integration_test - Step 36: MPC solve successful
2025-12-01 16:48:22,055 - INFO - integration_test - Step 36: Computed 10 numeric contouring constraints for visualization (s=9.087)
2025-12-01 16:48:22,056 - DEBUG - integration_test - Step 36: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:22,056 - INFO - integration_test - === Applying control at step 36 ===
2025-12-01 16:48:22,056 - INFO - integration_test -   Control dict from planner: {'a': 2.1022113583223155e-07, 'w': -0.8000000099926392}
2025-12-01 16:48:22,056 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:22,056 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:22,057 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:22,057 - INFO - integration_test - Step 36 completed in 0.716s
2025-12-01 16:48:22,082 - INFO - integration_test - Step 37 (contouring until path end)
2025-12-01 16:48:22,083 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[7.61590963 6.23978396 0.32835711 3.00000002 9.38694384]
2025-12-01 16:48:22,084 - INFO - integration_test - Step 37: Re-initialized spline from 9.3869 to 9.0869 (vehicle at (7.62, 6.24), closest path point at (7.83, 4.55), distance=1.706m)
2025-12-01 16:48:22,084 - DEBUG - integration_test -   Set spline state to 9.0869
2025-12-01 16:48:22,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:22,099 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.616, 6.240), path_start=(0.000, 0.000), dist=9.846m
2025-12-01 16:48:22,099 - WARNING - integration_test - Could not update reference path at step 37: x and y must have the same length
2025-12-01 16:48:22,099 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2025-12-01 16:48:22,102 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:22,104 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:22,104 - INFO - integration_test - Warmstart k=0: x0=7.615909632571776 , y0=6.239783962294506 , psi0=0.3283571138031892 , v0=3.0 , spline0=9.086943840180156 , a0=0.0 , w0=0.0
2025-12-01 16:48:22,104 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:22,104 - INFO - integration_test - Dyn residual k=0: pred=[7.899881662288196, 6.336530467857944, 0.3283571138031892, 3.0, 9.386943840180157], ws=[7.899881662288196, 6.336530467857944, 0.3283571138031891, 3.0, 11.540967973536846], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.154024133356689], res_norm=2.154e+00
2025-12-01 16:48:22,105 - INFO - integration_test - Dyn residual k=1: pred=[8.183853692004616, 6.433276973421382, 0.3283571138031891, 3.0, 11.840967973536847], ws=[8.183853692004616, 6.433276973421382, 0.3283571138031891, 3.0, 13.855963602878942], res=[0.0, 0.0, 0.0, 0.0, -2.0149956293420956], res_norm=2.015e+00
2025-12-01 16:48:22,106 - INFO - integration_test - Dyn residual k=2: pred=[8.467825721721036, 6.53002347898482, 0.3283571138031891, 3.0, 14.155963602878943], ws=[8.467825721721036, 6.53002347898482, 0.3283571138031891, 3.0, 16.103228475740913], res=[0.0, 0.0, 0.0, 0.0, -1.94726487286197], res_norm=1.947e+00
2025-12-01 16:48:22,121 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,132 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,149 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,160 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,176 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,188 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,204 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,215 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,230 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,241 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,257 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,269 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,296 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,312 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,326 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,342 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,354 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,371 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,383 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,399 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,410 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,818 - INFO - integration_test - Step 37: MPC solve successful
2025-12-01 16:48:22,833 - INFO - integration_test - Step 37: Computed 10 numeric contouring constraints for visualization (s=9.087)
2025-12-01 16:48:22,833 - DEBUG - integration_test - Step 37: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:22,833 - INFO - integration_test - === Applying control at step 37 ===
2025-12-01 16:48:22,833 - INFO - integration_test -   Control dict from planner: {'a': 6.163371915604252e-08, 'w': -0.800000005547624}
2025-12-01 16:48:22,833 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:22,833 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:22,834 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:22,835 - INFO - integration_test - Step 37 completed in 0.752s
2025-12-01 16:48:22,857 - INFO - integration_test - Step 38 (contouring until path end)
2025-12-01 16:48:22,858 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[7.90344666 6.32507448 0.24835711 3.00000003 9.38694384]
2025-12-01 16:48:22,858 - INFO - integration_test - Step 38: Re-initialized spline from 9.3869 to 9.6927 (vehicle at (7.90, 6.33), closest path point at (8.46, 4.66), distance=1.752m)
2025-12-01 16:48:22,858 - DEBUG - integration_test -   Set spline state to 9.6927
2025-12-01 16:48:22,859 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:22,873 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.903, 6.325), path_start=(0.000, 0.000), dist=10.123m
2025-12-01 16:48:22,873 - WARNING - integration_test - Could not update reference path at step 38: x and y must have the same length
2025-12-01 16:48:22,873 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2025-12-01 16:48:22,876 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:22,877 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:22,877 - INFO - integration_test - Warmstart k=0: x0=7.903446658718506 , y0=6.3250744819630365 , psi0=0.24835711324842685 , v0=3.0 , spline0=9.692740096192166 , a0=0.0 , w0=0.0
2025-12-01 16:48:22,877 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:22,878 - INFO - integration_test - Dyn residual k=0: pred=[8.194241929907651, 6.398818025775572, 0.24835711324842685, 3.0, 9.992740096192167], ws=[8.194241929907651, 6.398818025775572, 0.24835711324842702, 3.0, 12.259509697746946], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.2667696015547794], res_norm=2.267e+00
2025-12-01 16:48:22,878 - INFO - integration_test - Dyn residual k=1: pred=[8.485037201096796, 6.472561569588108, 0.24835711324842702, 3.0, 12.559509697746947], ws=[8.485037201096796, 6.472561569588108, 0.24835711324842702, 3.0, 14.689208708355945], res=[0.0, 0.0, 0.0, 0.0, -2.1296990106089986], res_norm=2.130e+00
2025-12-01 16:48:22,879 - INFO - integration_test - Dyn residual k=2: pred=[8.775832472285941, 6.546305113400644, 0.24835711324842702, 3.0, 14.989208708355946], ws=[8.775832472285941, 6.546305113400644, 0.24835711324842702, 3.0, 17.015640260653257], res=[0.0, 0.0, 0.0, 0.0, -2.0264315522973106], res_norm=2.026e+00
2025-12-01 16:48:22,894 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,906 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,921 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,933 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,949 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,960 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:22,975 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:22,987 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,003 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,015 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,031 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,042 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,058 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,069 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,085 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,097 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,113 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,124 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,140 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,152 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,167 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,179 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,591 - INFO - integration_test - Step 38: MPC solve successful
2025-12-01 16:48:23,606 - INFO - integration_test - Step 38: Computed 10 numeric contouring constraints for visualization (s=9.693)
2025-12-01 16:48:23,606 - DEBUG - integration_test - Step 38: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:23,606 - INFO - integration_test - === Applying control at step 38 ===
2025-12-01 16:48:23,606 - INFO - integration_test -   Control dict from planner: {'a': -2.6059784945834543e-09, 'w': -0.7999999923134162}
2025-12-01 16:48:23,606 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:23,606 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:23,607 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:23,607 - INFO - integration_test - Step 38 completed in 0.750s
2025-12-01 16:48:23,629 - INFO - integration_test - Step 39 (contouring until path end)
2025-12-01 16:48:23,630 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[8.19688002 6.38711378 0.16835711 3.00000003 9.9927401 ]
2025-12-01 16:48:23,631 - INFO - integration_test - Step 39: Re-initialized spline from 9.9927 to 9.6927 (vehicle at (8.20, 6.39), closest path point at (8.46, 4.66), distance=1.743m)
2025-12-01 16:48:23,631 - DEBUG - integration_test -   Set spline state to 9.6927
2025-12-01 16:48:23,631 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:23,645 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(8.197, 6.387), path_start=(0.000, 0.000), dist=10.392m
2025-12-01 16:48:23,645 - WARNING - integration_test - Could not update reference path at step 39: x and y must have the same length
2025-12-01 16:48:23,645 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2025-12-01 16:48:23,648 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:23,649 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:23,649 - INFO - integration_test - Warmstart k=0: x0=8.196880023068278 , y0=6.387113784147894 , psi0=0.16835711401708522 , v0=3.0 , spline0=9.692740096192166 , a0=0.0 , w0=0.0
2025-12-01 16:48:23,649 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:23,650 - INFO - integration_test - Dyn residual k=0: pred=[8.492638438271692, 6.437382659571607, 0.16835711401708522, 3.0, 9.992740096192167], ws=[8.492638438271692, 6.437382659571607, 0.16835711401708542, 3.0, 12.259509697746946], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -2.2667696015547794], res_norm=2.267e+00
2025-12-01 16:48:23,651 - INFO - integration_test - Dyn residual k=1: pred=[8.788396853475106, 6.487651534995319, 0.16835711401708542, 3.0, 12.559509697746947], ws=[8.788396853475106, 6.487651534995319, 0.16835711401708542, 3.0, 14.687877206773155], res=[0.0, 0.0, 0.0, 0.0, -2.1283675090262086], res_norm=2.128e+00
2025-12-01 16:48:23,651 - INFO - integration_test - Dyn residual k=2: pred=[9.08415526867852, 6.537920410419031, 0.16835711401708542, 3.0, 14.987877206773156], ws=[9.08415526867852, 6.537920410419031, 0.16835711401708542, 3.0, 17.010598463685938], res=[0.0, 0.0, 0.0, 0.0, -2.0227212569127815], res_norm=2.023e+00
2025-12-01 16:48:23,666 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,677 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,693 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,705 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,722 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,733 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,749 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,760 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,776 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,788 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,804 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,815 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,831 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,842 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,858 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,869 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,885 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,897 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,913 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,924 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:23,940 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:23,951 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,382 - INFO - integration_test - Step 39: MPC solve successful
2025-12-01 16:48:24,398 - INFO - integration_test - Step 39: Computed 10 numeric contouring constraints for visualization (s=9.693)
2025-12-01 16:48:24,398 - DEBUG - integration_test - Step 39: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:24,398 - INFO - integration_test - === Applying control at step 39 ===
2025-12-01 16:48:24,398 - INFO - integration_test -   Control dict from planner: {'a': 3.072879068094278e-08, 'w': -0.8000000099925989}
2025-12-01 16:48:24,398 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:24,398 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:24,399 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:24,399 - INFO - integration_test - Step 39 completed in 0.769s
2025-12-01 16:48:24,421 - INFO - integration_test - Step 40 (contouring until path end)
2025-12-01 16:48:24,422 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[8.49433275 6.42550503 0.08835711 3.00000003 9.9927401 ]
2025-12-01 16:48:24,423 - INFO - integration_test - Step 40: Re-initialized spline from 9.9927 to 9.6927 (vehicle at (8.49, 6.43), closest path point at (8.46, 4.66), distance=1.762m)
2025-12-01 16:48:24,423 - DEBUG - integration_test -   Set spline state to 9.6927
2025-12-01 16:48:24,423 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:24,437 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.494, 6.426), path_start=(0.000, 0.000), dist=10.651m
2025-12-01 16:48:24,438 - WARNING - integration_test - Could not update reference path at step 40: x and y must have the same length
2025-12-01 16:48:24,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2025-12-01 16:48:24,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:24,441 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:24,441 - INFO - integration_test - Warmstart k=0: x0=8.494332753327038 , y0=6.42550502889227 , psi0=0.08835711301782534 , v0=3.0 , spline0=9.692740096192166 , a0=0.0 , w0=0.0
2025-12-01 16:48:24,442 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:24,442 - INFO - integration_test - Dyn residual k=0: pred=[8.793162468077274, 6.451977686150143, 0.08835711301782534, 3.0, 9.992740096192167], ws=[8.793162468077274, 6.451977686150143, 0.08835711301782556, 3.0, 12.259509697746953], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -2.2667696015547865], res_norm=2.267e+00
2025-12-01 16:48:24,443 - INFO - integration_test - Dyn residual k=1: pred=[9.091992182827509, 6.478450343408016, 0.08835711301782556, 3.0, 12.559509697746954], ws=[9.091992182827509, 6.478450343408016, 0.08835711301782556, 3.0, 14.68691839399718], res=[0.0, 0.0, 0.0, 0.0, -2.1274086962502263], res_norm=2.127e+00
2025-12-01 16:48:24,444 - INFO - integration_test - Dyn residual k=2: pred=[9.390821897577744, 6.504923000665889, 0.08835711301782556, 3.0, 14.98691839399718], ws=[9.390821897577744, 6.504923000665889, 0.08835711301782556, 3.0, 17.006712569722048], res=[0.0, 0.0, 0.0, 0.0, -2.0197941757248667], res_norm=2.020e+00
2025-12-01 16:48:24,458 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,470 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,486 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,498 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,514 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,525 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,541 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,553 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,569 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,580 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,597 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,608 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,624 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,635 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,651 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,662 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,677 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,688 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,705 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,717 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:24,732 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:24,744 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,172 - INFO - integration_test - Step 40: MPC solve successful
2025-12-01 16:48:25,186 - INFO - integration_test - Step 40: Computed 10 numeric contouring constraints for visualization (s=9.693)
2025-12-01 16:48:25,186 - DEBUG - integration_test - Step 40: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:25,186 - INFO - integration_test - === Applying control at step 40 ===
2025-12-01 16:48:25,186 - INFO - integration_test -   Control dict from planner: {'a': 8.72251781867218e-09, 'w': -0.8000000089333208}
2025-12-01 16:48:25,186 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:25,186 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:25,187 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:25,188 - INFO - integration_test - Step 40 completed in 0.766s
2025-12-01 16:48:25,213 - INFO - integration_test - Step 41 (contouring until path end)
2025-12-01 16:48:25,214 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[8.79390217e+00 6.44000264e+00 8.35711212e-03 3.00000003e+00
 9.99274010e+00]
2025-12-01 16:48:25,214 - INFO - integration_test - Step 41: Re-initialized spline from 9.9927 to 10.2985 (vehicle at (8.79, 6.44), closest path point at (9.10, 4.74), distance=1.726m)
2025-12-01 16:48:25,214 - DEBUG - integration_test -   Set spline state to 10.2985
2025-12-01 16:48:25,215 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:25,229 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.794, 6.440), path_start=(0.000, 0.000), dist=10.900m
2025-12-01 16:48:25,229 - WARNING - integration_test - Could not update reference path at step 41: x and y must have the same length
2025-12-01 16:48:25,229 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2025-12-01 16:48:25,232 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:25,233 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:25,233 - INFO - integration_test - Warmstart k=0: x0=8.793902167179018 , y0=6.440002642979148 , psi0=0.008357112124493249 , v0=3.0 , spline0=10.298536352204176 , a0=0.0 , w0=0.0
2025-12-01 16:48:25,233 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:25,234 - INFO - integration_test - Dyn residual k=0: pred=[9.09389169104153, 6.442509747433009, 0.008357112124493249, 3.0, 10.598536352204176], ws=[9.09389169104153, 6.442509747433009, 0.008357112124493415, 3.0, 12.971994237200112], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.3734578849959362], res_norm=2.373e+00
2025-12-01 16:48:25,235 - INFO - integration_test - Dyn residual k=1: pred=[9.393881214904043, 6.44501685188687, 0.008357112124493415, 3.0, 13.271994237200113], ws=[9.393881214904043, 6.44501685188687, 0.008357112124493415, 3.0, 15.456347705663708], res=[0.0, 0.0, 0.0, 0.0, -2.184353468463595], res_norm=2.184e+00
2025-12-01 16:48:25,236 - INFO - integration_test - Dyn residual k=2: pred=[9.693870738766556, 6.447523956340731, 0.008357112124493415, 3.0, 15.756347705663709], ws=[9.693870738766556, 6.447523956340731, 0.008357112124493415, 3.0, 17.95574283021549], res=[0.0, 0.0, 0.0, 0.0, -2.1993951245517795], res_norm=2.199e+00
2025-12-01 16:48:25,251 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,262 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,279 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,290 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,307 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,319 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,335 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,346 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,362 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,373 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,390 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,402 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,417 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,429 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,444 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,456 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,472 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,483 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,501 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,514 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:25,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:25,541 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,010 - INFO - integration_test - Step 41: MPC solve successful
2025-12-01 16:48:26,024 - INFO - integration_test - Step 41: Computed 10 numeric contouring constraints for visualization (s=10.299)
2025-12-01 16:48:26,024 - DEBUG - integration_test - Step 41: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:26,024 - INFO - integration_test - === Applying control at step 41 ===
2025-12-01 16:48:26,024 - INFO - integration_test -   Control dict from planner: {'a': -1.1205344663891617e-07, 'w': -0.7999998844136512}
2025-12-01 16:48:26,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:26,024 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:26,025 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:26,026 - INFO - integration_test - Step 41 completed in 0.812s
2025-12-01 16:48:26,048 - INFO - integration_test - Step 42 (contouring until path end)
2025-12-01 16:48:26,049 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 9.09367204  6.43051389 -0.07164288  3.00000002 10.59853635]
2025-12-01 16:48:26,050 - INFO - integration_test - Step 42: Re-initialized spline from 10.5985 to 10.2985 (vehicle at (9.09, 6.43), closest path point at (9.10, 4.74), distance=1.689m)
2025-12-01 16:48:26,050 - DEBUG - integration_test -   Set spline state to 10.2985
2025-12-01 16:48:26,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:26,064 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(9.094, 6.431), path_start=(0.000, 0.000), dist=11.138m
2025-12-01 16:48:26,064 - WARNING - integration_test - Could not update reference path at step 42: x and y must have the same length
2025-12-01 16:48:26,064 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2025-12-01 16:48:26,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:26,068 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:26,068 - INFO - integration_test - Warmstart k=0: x0=9.093672042015264 , y0=6.430513893029927 , psi0=-0.07164287631687187 , v0=3.0 , spline0=10.298536352204176 , a0=0.0 , w0=0.0
2025-12-01 16:48:26,068 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:26,069 - INFO - integration_test - Dyn residual k=0: pred=[9.392902466007722, 6.40903941149268, -0.07164287631687187, 3.0, 10.598536352204176], ws=[9.392902466007722, 6.40903941149268, -0.07164287631687172, 3.0, 12.97199423720011], res=[0.0, 0.0, -1.5265566588595902e-16, 0.0, -2.3734578849959345], res_norm=2.373e+00
2025-12-01 16:48:26,070 - INFO - integration_test - Dyn residual k=1: pred=[9.692132890000181, 6.387564929955433, -0.07164287631687172, 3.0, 13.271994237200111], ws=[9.692132890000181, 6.387564929955433, -0.07164287631687172, 3.0, 15.45606006160692], res=[0.0, 0.0, 0.0, 0.0, -2.184065824406808], res_norm=2.184e+00
2025-12-01 16:48:26,071 - INFO - integration_test - Dyn residual k=2: pred=[9.99136331399264, 6.366090448418186, -0.07164287631687172, 3.0, 15.75606006160692], ws=[9.99136331399264, 6.366090448418186, -0.07164287631687172, 3.0, 17.954182332888333], res=[0.0, 0.0, 0.0, 0.0, -2.198122271281413], res_norm=2.198e+00
2025-12-01 16:48:26,086 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,097 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,113 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,124 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,141 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,152 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,167 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,179 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,195 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,207 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,223 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,234 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,249 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,260 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,277 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,288 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,315 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,332 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,343 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,358 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,370 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,831 - INFO - integration_test - Step 42: MPC solve successful
2025-12-01 16:48:26,849 - INFO - integration_test - Step 42: Computed 10 numeric contouring constraints for visualization (s=10.299)
2025-12-01 16:48:26,850 - DEBUG - integration_test - Step 42: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:26,850 - INFO - integration_test - === Applying control at step 42 ===
2025-12-01 16:48:26,850 - INFO - integration_test -   Control dict from planner: {'a': 7.909664523172597e-08, 'w': -0.8000000099538933}
2025-12-01 16:48:26,850 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:26,850 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:26,851 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:26,851 - INFO - integration_test - Step 42 completed in 0.802s
2025-12-01 16:48:26,875 - INFO - integration_test - Step 43 (contouring until path end)
2025-12-01 16:48:26,876 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 9.39172487  6.39709947 -0.15164288  3.00000003 10.59853635]
2025-12-01 16:48:26,877 - INFO - integration_test - Step 43: Re-initialized spline from 10.5985 to 10.9043 (vehicle at (9.39, 6.40), closest path point at (9.75, 4.78), distance=1.654m)
2025-12-01 16:48:26,877 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 16:48:26,877 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:26,891 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(9.392, 6.397), path_start=(0.000, 0.000), dist=11.363m
2025-12-01 16:48:26,891 - WARNING - integration_test - Could not update reference path at step 43: x and y must have the same length
2025-12-01 16:48:26,891 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2025-12-01 16:48:26,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:26,895 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:26,895 - INFO - integration_test - Warmstart k=0: x0=9.391724874188219 , y0=6.397099474663841 , psi0=-0.15164287731226123 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 16:48:26,895 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:26,896 - INFO - integration_test - Dyn residual k=0: pred=[9.688282144736252, 6.351780766770736, -0.15164287731226123, 3.0, 11.204332608216188], ws=[9.688282144736252, 6.351780766770736, -0.15164287731226134, 3.0, 13.68103458024699], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.476701972030803], res_norm=2.477e+00
2025-12-01 16:48:26,897 - INFO - integration_test - Dyn residual k=1: pred=[9.984839415284286, 6.3064620588776314, -0.15164287731226134, 3.0, 13.981034580246991], ws=[9.984839415284286, 6.3064620588776314, -0.15164287731226134, 3.0, 16.29856643601107], res=[0.0, 0.0, 0.0, 0.0, -2.317531855764077], res_norm=2.318e+00
2025-12-01 16:48:26,897 - INFO - integration_test - Dyn residual k=2: pred=[10.28139668583232, 6.2611433509845265, -0.15164287731226134, 3.0, 16.59856643601107], ws=[10.28139668583232, 6.2611433509845265, -0.15164287731226134, 3.0, 18.905999730750736], res=[0.0, 0.0, 0.0, 0.0, -2.307433294739667], res_norm=2.307e+00
2025-12-01 16:48:26,912 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,923 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,939 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,950 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,966 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:26,977 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:26,993 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,004 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,020 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,031 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,047 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,058 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,074 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,085 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,100 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,112 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,127 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,139 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,155 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,166 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,194 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,669 - INFO - integration_test - Step 43: MPC solve successful
2025-12-01 16:48:27,685 - INFO - integration_test - Step 43: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 16:48:27,686 - DEBUG - integration_test - Step 43: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:27,686 - INFO - integration_test - === Applying control at step 43 ===
2025-12-01 16:48:27,686 - INFO - integration_test -   Control dict from planner: {'a': 7.609926833758084e-09, 'w': -0.7999999788284269}
2025-12-01 16:48:27,686 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:27,686 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:27,687 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:27,688 - INFO - integration_test - Step 43 completed in 0.812s
2025-12-01 16:48:27,714 - INFO - integration_test - Step 44 (contouring until path end)
2025-12-01 16:48:27,715 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.68615414  6.33997312 -0.23164288  3.00000003 11.20433261]
2025-12-01 16:48:27,716 - INFO - integration_test - Step 44: Re-initialized spline from 11.2043 to 10.9043 (vehicle at (9.69, 6.34), closest path point at (9.75, 4.78), distance=1.559m)
2025-12-01 16:48:27,716 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 16:48:27,717 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:27,731 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.686, 6.340), path_start=(0.000, 0.000), dist=11.577m
2025-12-01 16:48:27,732 - WARNING - integration_test - Could not update reference path at step 44: x and y must have the same length
2025-12-01 16:48:27,732 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2025-12-01 16:48:27,734 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:27,735 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:27,735 - INFO - integration_test - Warmstart k=0: x0=9.686154143313205 , y0=6.3399731246377495 , psi0=-0.2316428751951039 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 16:48:27,735 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:27,736 - INFO - integration_test - Dyn residual k=0: pred=[9.97814130608539, 6.271100076380476, -0.2316428751951039, 3.0, 11.204332608216188], ws=[9.97814130608539, 6.271100076380476, -0.23164287519510385, 3.0, 13.681034580246994], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.4767019720308063], res_norm=2.477e+00
2025-12-01 16:48:27,737 - INFO - integration_test - Dyn residual k=1: pred=[10.270128468857576, 6.202227028123202, -0.23164287519510385, 3.0, 13.981034580246995], ws=[10.270128468857576, 6.202227028123202, -0.23164287519510385, 3.0, 16.298911429043738], res=[0.0, 0.0, 0.0, 0.0, -2.317876848796743], res_norm=2.318e+00
2025-12-01 16:48:27,738 - INFO - integration_test - Dyn residual k=2: pred=[10.562115631629762, 6.1333539798659285, -0.23164287519510385, 3.0, 16.59891142904374], ws=[10.562115631629762, 6.1333539798659285, -0.23164287519510385, 3.0, 18.906866652332393], res=[0.0, 0.0, 0.0, 0.0, -2.307955223288655], res_norm=2.308e+00
2025-12-01 16:48:27,752 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,763 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,779 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,790 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,806 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,818 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,834 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,845 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,861 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,872 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,888 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,899 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,915 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,926 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,942 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,953 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,968 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:27,979 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:27,996 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,008 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,024 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,036 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,605 - INFO - integration_test - Step 44: MPC solve successful
2025-12-01 16:48:28,619 - INFO - integration_test - Step 44: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 16:48:28,620 - DEBUG - integration_test - Step 44: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:28,620 - INFO - integration_test - === Applying control at step 44 ===
2025-12-01 16:48:28,620 - INFO - integration_test -   Control dict from planner: {'a': -1.8850634183496866e-07, 'w': -0.7999990741460957}
2025-12-01 16:48:28,620 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:28,620 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:28,621 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:28,621 - INFO - integration_test - Step 44 completed in 0.906s
2025-12-01 16:48:28,643 - INFO - integration_test - Step 45 (contouring until path end)
2025-12-01 16:48:28,644 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.97507651  6.25950027 -0.31164278  3.00000001 11.20433261]
2025-12-01 16:48:28,644 - INFO - integration_test - Step 45: Re-initialized spline from 11.2043 to 10.9043 (vehicle at (9.98, 6.26), closest path point at (9.75, 4.78), distance=1.495m)
2025-12-01 16:48:28,644 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 16:48:28,645 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:28,659 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.975, 6.260), path_start=(0.000, 0.000), dist=11.776m
2025-12-01 16:48:28,660 - WARNING - integration_test - Could not update reference path at step 45: x and y must have the same length
2025-12-01 16:48:28,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2025-12-01 16:48:28,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:28,664 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:28,664 - INFO - integration_test - Warmstart k=0: x0=9.975076509499685 , y0=6.259500270406729 , psi0=-0.31164278260971345 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 16:48:28,664 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:28,665 - INFO - integration_test - Dyn residual k=0: pred=[10.260625851511893, 6.167513460067447, -0.31164278260971345, 3.0, 11.204332608216188], ws=[10.260625851511893, 6.167513460067447, -0.31164278260971345, 3.0, 13.68103458024699], res=[0.0, 0.0, 0.0, 0.0, -2.476701972030803], res_norm=2.477e+00
2025-12-01 16:48:28,666 - INFO - integration_test - Dyn residual k=1: pred=[10.546175193524101, 6.075526649728165, -0.31164278260971345, 3.0, 13.981034580246991], ws=[10.546175193524101, 6.075526649728165, -0.31164278260971345, 3.0, 16.299637813554547], res=[0.0, 0.0, 0.0, 0.0, -2.318603233307556], res_norm=2.319e+00
2025-12-01 16:48:28,667 - INFO - integration_test - Dyn residual k=2: pred=[10.83172453553631, 5.983539839388882, -0.31164278260971345, 3.0, 16.599637813554548], ws=[10.83172453553631, 5.983539839388882, -0.31164278260971345, 3.0, 18.90896490853088], res=[0.0, 0.0, 0.0, 0.0, -2.3093270949763323], res_norm=2.309e+00
2025-12-01 16:48:28,682 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,693 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,710 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,721 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,737 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,748 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,764 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,775 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,791 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,802 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,818 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,829 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,856 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,882 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,899 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,911 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,928 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,940 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:28,957 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:28,969 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,327 - INFO - integration_test - Step 45: MPC solve successful
2025-12-01 16:48:29,341 - INFO - integration_test - Step 45: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 16:48:29,342 - DEBUG - integration_test - Step 45: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:29,342 - INFO - integration_test - === Applying control at step 45 ===
2025-12-01 16:48:29,342 - INFO - integration_test -   Control dict from planner: {'a': 1.4699750211432475e-07, 'w': -0.8000000099229305}
2025-12-01 16:48:29,342 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:29,342 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:29,343 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:29,343 - INFO - integration_test - Step 45 completed in 0.700s
2025-12-01 16:48:29,364 - INFO - integration_test - Step 46 (contouring until path end)
2025-12-01 16:48:29,366 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[10.25664386  6.15619566 -0.39164278  3.00000002 11.20433261]
2025-12-01 16:48:29,366 - INFO - integration_test - Step 46: Re-initialized spline from 11.2043 to 11.5101 (vehicle at (10.26, 6.16), closest path point at (10.40, 4.79), distance=1.376m)
2025-12-01 16:48:29,366 - DEBUG - integration_test -   Set spline state to 11.5101
2025-12-01 16:48:29,367 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:29,381 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(10.257, 6.156), path_start=(0.000, 0.000), dist=11.962m
2025-12-01 16:48:29,381 - WARNING - integration_test - Could not update reference path at step 46: x and y must have the same length
2025-12-01 16:48:29,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2025-12-01 16:48:29,384 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:29,386 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:29,386 - INFO - integration_test - Warmstart k=0: x0=10.256643857937505 , y0=6.156195662533299 , psi0=-0.3916427836020065 , v0=3.0 , spline0=11.510128864228196 , a0=0.0 , w0=0.0
2025-12-01 16:48:29,386 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:29,387 - INFO - integration_test - Dyn residual k=0: pred=[10.53392883137777, 6.041683464474614, -0.3916427836020065, 3.0, 11.810128864228197], ws=[10.53392883137777, 6.041683464474614, -0.39164278360200644, 3.0, 14.390320401389912], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.5801915371617152], res_norm=2.580e+00
2025-12-01 16:48:29,388 - INFO - integration_test - Dyn residual k=1: pred=[10.811213804818035, 5.92717126641593, -0.39164278360200644, 3.0, 14.690320401389913], ws=[10.811213804818035, 5.92717126641593, -0.39164278360200644, 3.0, 17.16231175166635], res=[0.0, 0.0, 0.0, 0.0, -2.471991350276438], res_norm=2.472e+00
2025-12-01 16:48:29,389 - INFO - integration_test - Dyn residual k=2: pred=[11.0884987782583, 5.812659068357245, -0.39164278360200644, 3.0, 17.462311751666352], ws=[11.0884987782583, 5.812659068357245, -0.39164278360200644, 3.0, 20.01187010402552], res=[0.0, 0.0, 0.0, 0.0, -2.549558352359167], res_norm=2.550e+00
2025-12-01 16:48:29,405 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,418 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,434 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,445 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,461 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,472 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,488 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,499 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,515 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,526 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,542 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,553 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,568 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,580 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,596 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,607 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,622 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,633 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,649 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,660 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:29,676 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:29,687 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,046 - INFO - integration_test - Step 46: MPC solve successful
2025-12-01 16:48:30,061 - INFO - integration_test - Step 46: Computed 10 numeric contouring constraints for visualization (s=11.510)
2025-12-01 16:48:30,061 - DEBUG - integration_test - Step 46: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:30,061 - INFO - integration_test - === Applying control at step 46 ===
2025-12-01 16:48:30,061 - INFO - integration_test -   Control dict from planner: {'a': 4.8821579482798364e-08, 'w': -0.8000000049959619}
2025-12-01 16:48:30,061 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:30,061 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:30,062 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:30,062 - INFO - integration_test - Step 46 completed in 0.697s
2025-12-01 16:48:30,084 - INFO - integration_test - Step 47 (contouring until path end)
2025-12-01 16:48:30,085 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[10.52905512  6.03072008 -0.47164278  3.00000003 11.81012887]
2025-12-01 16:48:30,086 - INFO - integration_test - Step 47: Re-initialized spline from 11.8101 to 11.5101 (vehicle at (10.53, 6.03), closest path point at (10.40, 4.79), distance=1.250m)
2025-12-01 16:48:30,086 - DEBUG - integration_test -   Set spline state to 11.5101
2025-12-01 16:48:30,086 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:30,101 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(10.529, 6.031), path_start=(0.000, 0.000), dist=12.134m
2025-12-01 16:48:30,101 - WARNING - integration_test - Could not update reference path at step 47: x and y must have the same length
2025-12-01 16:48:30,102 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2025-12-01 16:48:30,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:30,106 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:30,106 - INFO - integration_test - Warmstart k=0: x0=10.529055115974707 , y0=6.030720084046839 , psi0=-0.4716427841016027 , v0=3.0 , spline0=11.510128864228196 , a0=0.0 , w0=0.0
2025-12-01 16:48:30,106 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:30,107 - INFO - integration_test - Dyn residual k=0: pred=[10.796302043300345, 5.894414985701235, -0.4716427841016027, 3.0, 11.810128864228197], ws=[10.796302043300345, 5.894414985701235, -0.4716427841016029, 3.0, 14.390320401389912], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -2.5801915371617152], res_norm=2.580e+00
2025-12-01 16:48:30,108 - INFO - integration_test - Dyn residual k=1: pred=[11.063548970625984, 5.75810988735563, -0.4716427841016029, 3.0, 14.690320401389913], ws=[11.063548970625984, 5.75810988735563, -0.4716427841016029, 3.0, 17.16373250583755], res=[0.0, 0.0, 0.0, 0.0, -2.473412104447638], res_norm=2.473e+00
2025-12-01 16:48:30,109 - INFO - integration_test - Dyn residual k=2: pred=[11.330795897951623, 5.621804789010025, -0.4716427841016029, 3.0, 17.46373250583755], ws=[11.330795897951623, 5.621804789010025, -0.4716427841016029, 3.0, 20.01680447177899], res=[0.0, 0.0, 0.0, 0.0, -2.553071965941438], res_norm=2.553e+00
2025-12-01 16:48:30,123 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,134 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,151 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,162 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,178 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,189 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,207 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,218 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,234 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,246 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,262 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,273 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,291 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,303 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,319 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,331 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,347 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,358 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,374 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,385 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,413 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,750 - INFO - integration_test - Step 47: MPC solve successful
2025-12-01 16:48:30,764 - INFO - integration_test - Step 47: Computed 10 numeric contouring constraints for visualization (s=11.510)
2025-12-01 16:48:30,764 - DEBUG - integration_test - Step 47: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:30,764 - INFO - integration_test - === Applying control at step 47 ===
2025-12-01 16:48:30,764 - INFO - integration_test -   Control dict from planner: {'a': -7.856812650584932e-09, 'w': -0.0906691289981241}
2025-12-01 16:48:30,764 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:30,764 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:30,765 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:30,766 - INFO - integration_test - Step 47 completed in 0.681s
2025-12-01 16:48:30,788 - INFO - integration_test - Step 48 (contouring until path end)
2025-12-01 16:48:30,789 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.79568046  5.89320531 -0.4807097   3.00000003 11.81012887]
2025-12-01 16:48:30,789 - INFO - integration_test - Step 48: Re-initialized spline from 11.8101 to 12.1159 (vehicle at (10.80, 5.89), closest path point at (11.05, 4.76), distance=1.158m)
2025-12-01 16:48:30,789 - DEBUG - integration_test -   Set spline state to 12.1159
2025-12-01 16:48:30,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:30,804 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.796, 5.893), path_start=(0.000, 0.000), dist=12.299m
2025-12-01 16:48:30,805 - WARNING - integration_test - Could not update reference path at step 48: x and y must have the same length
2025-12-01 16:48:30,805 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2025-12-01 16:48:30,807 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:30,809 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:30,809 - INFO - integration_test - Warmstart k=0: x0=10.795680455054217 , y0=5.893205308025197 , psi0=-0.48070969700141514 , v0=3.0 , spline0=12.115925120240208 , a0=0.0 , w0=0.0
2025-12-01 16:48:30,809 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:30,810 - INFO - integration_test - Dyn residual k=0: pred=[11.061680547894511, 5.75448274097515, -0.48070969700141514, 3.0, 12.415925120240209], ws=[11.061680547894511, 5.75448274097515, -0.4807096970014153, 3.0, 15.103954188406348], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -2.6880290681661396], res_norm=2.688e+00
2025-12-01 16:48:30,811 - INFO - integration_test - Dyn residual k=1: pred=[11.327680640734805, 5.615760173925103, -0.4807096970014153, 3.0, 15.403954188406349], ws=[11.327680640734805, 5.615760173925103, -0.4807096970014153, 3.0, 18.052528287752924], res=[0.0, 0.0, 0.0, 0.0, -2.6485740993465754], res_norm=2.649e+00
2025-12-01 16:48:30,811 - INFO - integration_test - Dyn residual k=2: pred=[11.593680733575098, 5.477037606875055, -0.4807096970014153, 3.0, 18.352528287752925], ws=[11.593680733575098, 5.477037606875055, -0.4807096970014153, 3.0, 21.05371814681512], res=[0.0, 0.0, 0.0, 0.0, -2.7011898590621968], res_norm=2.701e+00
2025-12-01 16:48:30,826 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,837 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,853 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,865 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,881 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,892 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,908 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,920 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,935 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,946 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,961 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:30,972 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:30,988 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,000 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,015 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,026 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,042 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,053 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,069 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,080 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,096 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,107 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,442 - INFO - integration_test - Step 48: MPC solve successful
2025-12-01 16:48:31,457 - INFO - integration_test - Step 48: Computed 10 numeric contouring constraints for visualization (s=12.116)
2025-12-01 16:48:31,457 - DEBUG - integration_test - Step 48: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:31,457 - INFO - integration_test - === Applying control at step 48 ===
2025-12-01 16:48:31,457 - INFO - integration_test -   Control dict from planner: {'a': 1.0059270604206225e-08, 'w': 0.799999940838222}
2025-12-01 16:48:31,457 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:31,457 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:31,458 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:31,459 - INFO - integration_test - Step 48 completed in 0.670s
2025-12-01 16:48:31,485 - INFO - integration_test - Step 49 (contouring until path end)
2025-12-01 16:48:31,485 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[11.06694286  5.76526499 -0.4007097   3.00000003 12.41592512]
2025-12-01 16:48:31,486 - INFO - integration_test - Step 49: Re-initialized spline from 12.4159 to 12.1159 (vehicle at (11.07, 5.77), closest path point at (11.05, 4.76), distance=1.003m)
2025-12-01 16:48:31,486 - DEBUG - integration_test -   Set spline state to 12.1159
2025-12-01 16:48:31,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:31,501 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(11.067, 5.765), path_start=(0.000, 0.000), dist=12.479m
2025-12-01 16:48:31,501 - WARNING - integration_test - Could not update reference path at step 49: x and y must have the same length
2025-12-01 16:48:31,501 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2025-12-01 16:48:31,504 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:31,505 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:31,505 - INFO - integration_test - Warmstart k=0: x0=11.066942855096512 , y0=5.765264990836502 , psi0=-0.40070970291759295 , v0=3.0 , spline0=12.115925120240208 , a0=0.0 , w0=0.0
2025-12-01 16:48:31,505 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:31,506 - INFO - integration_test - Dyn residual k=0: pred=[11.343178172316474, 5.6482434136791815, -0.40070970291759295, 3.0, 12.415925120240209], ws=[11.343178172316474, 5.6482434136791815, -0.400709702917593, 3.0, 15.103954188406348], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -2.6880290681661396], res_norm=2.688e+00
2025-12-01 16:48:31,507 - INFO - integration_test - Dyn residual k=1: pred=[11.619413489536436, 5.531221836521861, -0.400709702917593, 3.0, 15.403954188406349], ws=[11.619413489536436, 5.531221836521861, -0.400709702917593, 3.0, 18.05104048415957], res=[0.0, 0.0, 0.0, 0.0, -2.6470862957532226], res_norm=2.647e+00
2025-12-01 16:48:31,508 - INFO - integration_test - Dyn residual k=2: pred=[11.895648806756398, 5.414200259364541, -0.400709702917593, 3.0, 18.351040484159572], ws=[11.895648806756398, 5.414200259364541, -0.400709702917593, 3.0, 21.048209425842785], res=[0.0, 0.0, 0.0, 0.0, -2.6971689416832128], res_norm=2.697e+00
2025-12-01 16:48:31,523 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,534 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,551 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,562 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,579 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,591 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,607 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,619 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,635 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,647 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,663 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,675 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,693 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,706 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,723 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,734 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,751 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,763 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,780 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,791 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:31,807 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:31,819 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,389 - INFO - integration_test - Step 49: MPC solve successful
2025-12-01 16:48:32,404 - INFO - integration_test - Step 49: Computed 10 numeric contouring constraints for visualization (s=12.116)
2025-12-01 16:48:32,404 - DEBUG - integration_test - Step 49: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:32,404 - INFO - integration_test - === Applying control at step 49 ===
2025-12-01 16:48:32,404 - INFO - integration_test -   Control dict from planner: {'a': -1.1129778536928337e-07, 'w': 0.7999995924617526}
2025-12-01 16:48:32,404 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:32,404 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:32,405 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:32,406 - INFO - integration_test - Step 49 completed in 0.920s
2025-12-01 16:48:32,427 - INFO - integration_test - Step 50 (contouring until path end)
2025-12-01 16:48:32,428 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[11.34756199  5.65941171 -0.32070974  3.00000002 12.41592512]
2025-12-01 16:48:32,429 - INFO - integration_test - Step 50: Re-initialized spline from 12.4159 to 12.1159 (vehicle at (11.35, 5.66), closest path point at (11.05, 4.76), distance=0.945m)
2025-12-01 16:48:32,429 - DEBUG - integration_test -   Set spline state to 12.1159
2025-12-01 16:48:32,430 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:32,444 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(11.348, 5.659), path_start=(0.000, 0.000), dist=12.681m
2025-12-01 16:48:32,444 - WARNING - integration_test - Could not update reference path at step 50: x and y must have the same length
2025-12-01 16:48:32,444 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2025-12-01 16:48:32,447 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:32,448 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:32,448 - INFO - integration_test - Warmstart k=0: x0=11.34756198672761 , y0=5.6594117096408425 , psi0=-0.3207097436714177 , v0=3.0 , spline0=12.115925120240208 , a0=0.0 , w0=0.0
2025-12-01 16:48:32,448 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:32,449 - INFO - integration_test - Dyn residual k=0: pred=[11.632265561945658, 5.564839651092553, -0.3207097436714177, 3.0, 12.415925120240209], ws=[11.632265561945658, 5.564839651092553, -0.3207097436714177, 3.0, 15.103954188406345], res=[0.0, 0.0, 0.0, 0.0, -2.688029068166136], res_norm=2.688e+00
2025-12-01 16:48:32,450 - INFO - integration_test - Dyn residual k=1: pred=[11.916969137163706, 5.470267592544264, -0.3207097436714177, 3.0, 15.403954188406345], ws=[11.916969137163706, 5.470267592544264, -0.3207097436714177, 3.0, 18.049922030422678], res=[0.0, 0.0, 0.0, 0.0, -2.645967842016333], res_norm=2.646e+00
2025-12-01 16:48:32,451 - INFO - integration_test - Dyn residual k=2: pred=[12.201672712381754, 5.375695533995975, -0.3207097436714177, 3.0, 18.34992203042268], ws=[12.201672712381754, 5.375695533995975, -0.3207097436714177, 3.0, 21.043889389831925], res=[0.0, 0.0, 0.0, 0.0, -2.693967359409246], res_norm=2.694e+00
2025-12-01 16:48:32,466 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,477 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,494 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,505 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,521 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,533 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,548 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,560 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,575 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,587 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,603 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,614 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,630 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,642 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,658 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,670 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,687 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,699 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,716 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,728 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:32,746 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:32,759 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,353 - INFO - integration_test - Step 50: MPC solve successful
2025-12-01 16:48:33,369 - INFO - integration_test - Step 50: Computed 10 numeric contouring constraints for visualization (s=12.116)
2025-12-01 16:48:33,369 - DEBUG - integration_test - Step 50: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:33,369 - INFO - integration_test - === Applying control at step 50 ===
2025-12-01 16:48:33,369 - INFO - integration_test -   Control dict from planner: {'a': 5.417296784547287e-08, 'w': 0.799999935212513}
2025-12-01 16:48:33,369 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:33,369 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:33,370 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:33,371 - INFO - integration_test - Step 50 completed in 0.942s
2025-12-01 16:48:33,395 - INFO - integration_test - Step 51 (contouring until path end)
2025-12-01 16:48:33,397 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[11.63574285  5.57632256 -0.24070975  3.00000002 12.41592512]
2025-12-01 16:48:33,397 - INFO - integration_test - Step 51: Re-initialized spline from 12.4159 to 12.7217 (vehicle at (11.64, 5.58), closest path point at (11.70, 4.71), distance=0.864m)
2025-12-01 16:48:33,397 - DEBUG - integration_test -   Set spline state to 12.7217
2025-12-01 16:48:33,398 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:33,412 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(11.636, 5.576), path_start=(0.000, 0.000), dist=12.903m
2025-12-01 16:48:33,412 - WARNING - integration_test - Could not update reference path at step 51: x and y must have the same length
2025-12-01 16:48:33,412 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2025-12-01 16:48:33,415 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:33,416 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:33,416 - INFO - integration_test - Warmstart k=0: x0=11.635742846231611 , y0=5.576322563656401 , psi0=-0.24070975015016638 , v0=3.0 , spline0=12.721721376252217 , a0=0.0 , w0=0.0
2025-12-01 16:48:33,416 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:33,417 - INFO - integration_test - Dyn residual k=0: pred=[11.927093552452995, 5.504804971524806, -0.24070975015016638, 3.0, 13.021721376252218], ws=[11.927093552452995, 5.504804971524806, -0.24070975015016627, 3.0, 15.825804347696117], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -2.804082971443899], res_norm=2.804e+00
2025-12-01 16:48:33,417 - INFO - integration_test - Dyn residual k=1: pred=[12.218444258674378, 5.433287379393212, -0.24070975015016627, 3.0, 16.125804347696118], ws=[12.218444258674378, 5.433287379393212, -0.24070975015016627, 3.0, 18.86422746593343], res=[0.0, 0.0, 0.0, 0.0, -2.7384231182373107], res_norm=2.738e+00
2025-12-01 16:48:33,418 - INFO - integration_test - Dyn residual k=2: pred=[12.509794964895761, 5.3617697872616175, -0.24070975015016627, 3.0, 19.16422746593343], ws=[12.509794964895761, 5.3617697872616175, -0.24070975015016627, 3.0, 22.094557711120775], res=[0.0, 0.0, 0.0, 0.0, -2.9303302451873456], res_norm=2.930e+00
2025-12-01 16:48:33,432 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,443 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,459 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,470 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,486 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,498 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,513 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,524 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,540 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,551 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,567 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,578 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,594 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,605 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,621 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,633 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,649 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,661 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,677 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,690 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:33,710 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:33,723 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,270 - INFO - integration_test - Step 51: MPC solve successful
2025-12-01 16:48:34,285 - INFO - integration_test - Step 51: Computed 10 numeric contouring constraints for visualization (s=12.722)
2025-12-01 16:48:34,286 - DEBUG - integration_test - Step 51: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:34,286 - INFO - integration_test - === Applying control at step 51 ===
2025-12-01 16:48:34,286 - INFO - integration_test -   Control dict from planner: {'a': -1.690393613810943e-06, 'w': 0.7999972372223136}
2025-12-01 16:48:34,286 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:34,286 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:34,287 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:34,287 - INFO - integration_test - Step 51 completed in 0.891s
2025-12-01 16:48:34,310 - INFO - integration_test - Step 52 (contouring until path end)
2025-12-01 16:48:34,312 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.92964205  5.51652901 -0.16071003  2.99999985 13.02172136]
2025-12-01 16:48:34,313 - INFO - integration_test - Step 52: Re-initialized spline from 13.0217 to 12.7217 (vehicle at (11.93, 5.52), closest path point at (11.70, 4.71), distance=0.836m)
2025-12-01 16:48:34,313 - DEBUG - integration_test -   Set spline state to 12.7217
2025-12-01 16:48:34,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:34,327 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.930, 5.517), path_start=(0.000, 0.000), dist=13.143m
2025-12-01 16:48:34,327 - WARNING - integration_test - Could not update reference path at step 52: x and y must have the same length
2025-12-01 16:48:34,327 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2025-12-01 16:48:34,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:34,331 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:34,331 - INFO - integration_test - Warmstart k=0: x0=11.929642046419666 , y0=5.516529006217063 , psi0=-0.16071002642793503 , v0=2.9999998529990197 , spline0=12.721721376252217 , a0=0.0 , w0=0.0
2025-12-01 16:48:34,331 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:34,332 - INFO - integration_test - Dyn residual k=0: pred=[12.225776206228645, 5.468523271412025, -0.16071002642793503, 2.9999998529990197, 13.02172136155212], ws=[12.225776206228645, 5.468523271412025, -0.16071002642793486, 2.9999998529990197, 15.82580433299602], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.8040829714439006], res_norm=2.804e+00
2025-12-01 16:48:34,333 - INFO - integration_test - Dyn residual k=1: pred=[12.521910366037623, 5.420517536606987, -0.16071002642793486, 2.9999998529990197, 16.125804318295923], ws=[12.521910366037623, 5.420517536606987, -0.16071002642793486, 2.9999998529990197, 18.863823861935117], res=[0.0, 0.0, 0.0, 0.0, -2.7380195436391936], res_norm=2.738e+00
2025-12-01 16:48:34,334 - INFO - integration_test - Dyn residual k=2: pred=[12.818044525846602, 5.372511801801949, -0.16071002642793486, 2.9999998529990197, 19.16382384723502], ws=[12.818044525846602, 5.372511801801949, -0.16071002642793486, 2.9999998529990197, 22.091901338858516], res=[0.0, 0.0, 0.0, 0.0, -2.9280774916234975], res_norm=2.928e+00
2025-12-01 16:48:34,348 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,359 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,376 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,388 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,404 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,415 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,431 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,442 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,458 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,469 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,485 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,497 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,512 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,524 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,539 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,550 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,566 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,577 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,594 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,606 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:34,623 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:34,634 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,128 - INFO - integration_test - Step 52: MPC solve successful
2025-12-01 16:48:35,145 - INFO - integration_test - Step 52: Computed 10 numeric contouring constraints for visualization (s=12.722)
2025-12-01 16:48:35,145 - DEBUG - integration_test - Step 52: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:35,145 - INFO - integration_test - === Applying control at step 52 ===
2025-12-01 16:48:35,145 - INFO - integration_test -   Control dict from planner: {'a': -9.611250157707367e-07, 'w': 0.7999939978664994}
2025-12-01 16:48:35,145 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:35,145 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:35,146 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:35,147 - INFO - integration_test - Step 52 completed in 0.835s
2025-12-01 16:48:35,170 - INFO - integration_test - Step 53 (contouring until path end)
2025-12-01 16:48:35,172 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[12.22737963  5.48041342 -0.08071063  2.99999976 13.02172135]
2025-12-01 16:48:35,172 - INFO - integration_test - Step 53: Re-initialized spline from 13.0217 to 13.3275 (vehicle at (12.23, 5.48), closest path point at (12.34, 4.65), distance=0.841m)
2025-12-01 16:48:35,172 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 16:48:35,173 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:35,189 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(12.227, 5.480), path_start=(0.000, 0.000), dist=13.399m
2025-12-01 16:48:35,190 - WARNING - integration_test - Could not update reference path at step 53: x and y must have the same length
2025-12-01 16:48:35,190 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2025-12-01 16:48:35,193 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:35,194 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:35,194 - INFO - integration_test - Warmstart k=0: x0=12.22737962615594 , y0=5.480413421860535 , psi0=-0.08071062664128509 , v0=2.999999756886518 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 16:48:35,194 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:35,195 - INFO - integration_test - Dyn residual k=0: pred=[12.52640300145652, 5.456226515546571, -0.08071062664128509, 2.999999756886518, 13.62751760795288], ws=[12.52640300145652, 5.456226515546571, -0.08071062664128492, 2.999999756886518, 16.55907666774685], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.9315590597939707], res_norm=2.932e+00
2025-12-01 16:48:35,196 - INFO - integration_test - Dyn residual k=1: pred=[12.8254263767571, 5.432039609232606, -0.08071062664128492, 2.999999756886518, 16.859076643435504], ws=[12.8254263767571, 5.432039609232606, -0.08071062664128492, 2.999999756886518, 19.81039041304161], res=[0.0, 0.0, 0.0, 0.0, -2.951313769606106], res_norm=2.951e+00
2025-12-01 16:48:35,197 - INFO - integration_test - Dyn residual k=2: pred=[13.12444975205768, 5.407852702918642, -0.08071062664128492, 2.999999756886518, 20.110390388730263], ws=[13.12444975205768, 5.407852702918642, -0.08071062664128492, 2.999999756886518, 23.18990667736814], res=[0.0, 0.0, 0.0, 0.0, -3.079516288637876], res_norm=3.080e+00
2025-12-01 16:48:35,212 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,224 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,239 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,251 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,270 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,283 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,302 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,314 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,341 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,356 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,367 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,383 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,395 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,410 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,422 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,437 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,448 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,465 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,476 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:35,494 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:35,506 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,009 - INFO - integration_test - Step 53: MPC solve successful
2025-12-01 16:48:36,023 - INFO - integration_test - Step 53: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 16:48:36,024 - DEBUG - integration_test - Step 53: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:36,024 - INFO - integration_test - === Applying control at step 53 ===
2025-12-01 16:48:36,024 - INFO - integration_test -   Control dict from planner: {'a': 1.5871799416120141e-06, 'w': 0.3622154489954214}
2025-12-01 16:48:36,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:36,024 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:36,025 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:36,025 - INFO - integration_test - Step 53 completed in 0.854s
2025-12-01 16:48:36,047 - INFO - integration_test - Step 54 (contouring until path end)
2025-12-01 16:48:36,048 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[12.52677562  5.46164676 -0.04448908  2.99999992 13.62751762]
2025-12-01 16:48:36,049 - INFO - integration_test - Step 54: Re-initialized spline from 13.6275 to 13.3275 (vehicle at (12.53, 5.46), closest path point at (12.34, 4.65), distance=0.836m)
2025-12-01 16:48:36,049 - DEBUG - integration_test -   Set spline state to 13.3275
2025-12-01 16:48:36,049 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:36,064 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(12.527, 5.462), path_start=(0.000, 0.000), dist=13.666m
2025-12-01 16:48:36,064 - WARNING - integration_test - Could not update reference path at step 54: x and y must have the same length
2025-12-01 16:48:36,064 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2025-12-01 16:48:36,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:36,068 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:36,068 - INFO - integration_test - Warmstart k=0: x0=12.526775623053021 , y0=5.461646755844715 , psi0=-0.04448908174174295 , v0=2.9999999156045125 , spline0=13.327517632264229 , a0=0.0 , w0=0.0
2025-12-01 16:48:36,068 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:36,069 - INFO - integration_test - Dyn residual k=0: pred=[12.826478771828747, 5.44830443407575, -0.04448908174174295, 2.9999999156045125, 13.62751762382468], ws=[12.826478771828747, 5.44830443407575, -0.04448908174174315, 2.9999999156045125, 16.55907668361865], res=[0.0, 0.0, 2.0122792321330962e-16, 0.0, -2.931559059793969], res_norm=2.932e+00
2025-12-01 16:48:36,070 - INFO - integration_test - Dyn residual k=1: pred=[13.126181920604472, 5.434962112306785, -0.04448908174174315, 2.9999999156045125, 16.8590766751791], ws=[13.126181920604472, 5.434962112306785, -0.04448908174174315, 2.9999999156045125, 19.810436699352117], res=[0.0, 0.0, 0.0, 0.0, -2.9513600241730167], res_norm=2.951e+00
2025-12-01 16:48:36,070 - INFO - integration_test - Dyn residual k=2: pred=[13.425885069380197, 5.42161979053782, -0.04448908174174315, 2.9999999156045125, 20.110436690912568], ws=[13.425885069380197, 5.42161979053782, -0.04448908174174315, 2.9999999156045125, 23.189265683457872], res=[0.0, 0.0, 0.0, 0.0, -3.0788289925453043], res_norm=3.079e+00
2025-12-01 16:48:36,085 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,097 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,113 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,125 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,141 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,152 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,168 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,179 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,195 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,206 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,222 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,234 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,249 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,260 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,276 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,287 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,315 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,342 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,358 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,369 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,844 - INFO - integration_test - Step 54: MPC solve successful
2025-12-01 16:48:36,858 - INFO - integration_test - Step 54: Computed 10 numeric contouring constraints for visualization (s=13.328)
2025-12-01 16:48:36,859 - DEBUG - integration_test - Step 54: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:36,859 - INFO - integration_test - === Applying control at step 54 ===
2025-12-01 16:48:36,859 - INFO - integration_test -   Control dict from planner: {'a': 4.138788179882038e-07, 'w': -0.799999056851239}
2025-12-01 16:48:36,859 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:36,859 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:36,860 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:36,860 - INFO - integration_test - Step 54 completed in 0.812s
2025-12-01 16:48:36,885 - INFO - integration_test - Step 55 (contouring until path end)
2025-12-01 16:48:36,886 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[12.82562579  5.43633694 -0.12448899  2.99999996 13.62751763]
2025-12-01 16:48:36,886 - INFO - integration_test - Step 55: Re-initialized spline from 13.6275 to 13.9333 (vehicle at (12.83, 5.44), closest path point at (12.98, 4.57), distance=0.882m)
2025-12-01 16:48:36,886 - DEBUG - integration_test -   Set spline state to 13.9333
2025-12-01 16:48:36,887 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:36,901 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(12.826, 5.436), path_start=(0.000, 0.000), dist=13.930m
2025-12-01 16:48:36,901 - WARNING - integration_test - Could not update reference path at step 55: x and y must have the same length
2025-12-01 16:48:36,901 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2025-12-01 16:48:36,904 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:36,905 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:36,905 - INFO - integration_test - Warmstart k=0: x0=12.825625790149575 , y0=5.436336941199461 , psi0=-0.12448898742686684 , v0=2.9999999569923945 , spline0=13.933313888276238 , a0=0.0 , w0=0.0
2025-12-01 16:48:36,905 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:36,906 - INFO - integration_test - Dyn residual k=0: pred=[13.123304160292498, 5.399086634239704, -0.12448898742686684, 2.9999999569923945, 14.233313883975478], ws=[13.123304160292498, 5.399086634239704, -0.12448898742686687, 2.9999999569923945, 17.306124354723828], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, -3.0728104707483492], res_norm=3.073e+00
2025-12-01 16:48:36,907 - INFO - integration_test - Dyn residual k=1: pred=[13.420982530435422, 5.3618363272799465, -0.12448898742686687, 2.9999999569923945, 17.606124350423066], ws=[13.420982530435422, 5.3618363272799465, -0.12448898742686687, 2.9999999569923945, 20.79235892550134], res=[0.0, 0.0, 0.0, 0.0, -3.1862345750782737], res_norm=3.186e+00
2025-12-01 16:48:36,908 - INFO - integration_test - Dyn residual k=2: pred=[13.718660900578346, 5.324586020320189, -0.12448898742686687, 2.9999999569923945, 21.092358921200578], ws=[13.718660900578346, 5.324586020320189, -0.12448898742686687, 2.9999999569923945, 24.318580951055903], res=[0.0, 0.0, 0.0, 0.0, -3.2262220298553252], res_norm=3.226e+00
2025-12-01 16:48:36,922 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,933 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,949 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,960 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:36,977 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:36,989 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,004 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,016 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,031 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,042 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,058 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,069 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,085 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,097 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,112 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,123 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,139 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,150 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,166 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,178 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,195 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,206 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,699 - INFO - integration_test - Step 55: MPC solve successful
2025-12-01 16:48:37,714 - INFO - integration_test - Step 55: Computed 10 numeric contouring constraints for visualization (s=13.933)
2025-12-01 16:48:37,714 - DEBUG - integration_test - Step 55: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:37,714 - INFO - integration_test - === Applying control at step 55 ===
2025-12-01 16:48:37,714 - INFO - integration_test -   Control dict from planner: {'a': 2.6626015882595527e-07, 'w': -0.7999999313142597}
2025-12-01 16:48:37,714 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:37,714 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:37,715 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:37,715 - INFO - integration_test - Step 55 completed in 0.830s
2025-12-01 16:48:37,738 - INFO - integration_test - Step 56 (contouring until path end)
2025-12-01 16:48:37,739 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[13.12149753  5.38722557 -0.20448898  2.99999998 14.23331389]
2025-12-01 16:48:37,740 - INFO - integration_test - Step 56: Re-initialized spline from 14.2333 to 13.9333 (vehicle at (13.12, 5.39), closest path point at (12.98, 4.57), distance=0.831m)
2025-12-01 16:48:37,740 - DEBUG - integration_test -   Set spline state to 13.9333
2025-12-01 16:48:37,740 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:37,754 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(13.121, 5.387), path_start=(0.000, 0.000), dist=14.184m
2025-12-01 16:48:37,755 - WARNING - integration_test - Could not update reference path at step 56: x and y must have the same length
2025-12-01 16:48:37,755 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2025-12-01 16:48:37,757 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:37,758 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:37,758 - INFO - integration_test - Warmstart k=0: x0=13.121497526216103 , y0=5.387225569579001 , psi0=-0.20448898055829282 , v0=2.9999999836184106 , spline0=13.933313888276238 , a0=0.0 , w0=0.0
2025-12-01 16:48:37,758 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:37,759 - INFO - integration_test - Dyn residual k=0: pred=[13.415246989648566, 5.326305525666958, -0.20448898055829282, 2.9999999836184106, 14.23331388663808], ws=[13.415246989648566, 5.326305525666958, -0.2044889805582928, 2.9999999836184106, 17.306124357386437], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, -3.072810470748358], res_norm=3.073e+00
2025-12-01 16:48:37,760 - INFO - integration_test - Dyn residual k=1: pred=[13.708996453081028, 5.265385481754914, -0.2044889805582928, 2.9999999836184106, 17.60612435574828], ws=[13.708996453081028, 5.265385481754914, -0.2044889805582928, 2.9999999836184106, 20.79299382356365], res=[0.0, 0.0, 0.0, 0.0, -3.18686946781537], res_norm=3.187e+00
2025-12-01 16:48:37,761 - INFO - integration_test - Dyn residual k=2: pred=[14.00274591651349, 5.204465437842871, -0.2044889805582928, 2.9999999836184106, 21.09299382192549], ws=[14.00274591651349, 5.204465437842871, -0.2044889805582928, 2.9999999836184106, 24.322540866753556], res=[0.0, 0.0, 0.0, 0.0, -3.2295470448280668], res_norm=3.230e+00
2025-12-01 16:48:37,776 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,788 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,805 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,816 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,832 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,844 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,860 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,871 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,899 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,915 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,926 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,942 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,953 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,969 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:37,980 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:37,997 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,009 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,026 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,038 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,055 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,067 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,603 - INFO - integration_test - Step 56: MPC solve successful
2025-12-01 16:48:38,619 - INFO - integration_test - Step 56: Computed 10 numeric contouring constraints for visualization (s=13.933)
2025-12-01 16:48:38,619 - DEBUG - integration_test - Step 56: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:38,619 - INFO - integration_test - === Applying control at step 56 ===
2025-12-01 16:48:38,619 - INFO - integration_test -   Control dict from planner: {'a': 3.091875769496576e-07, 'w': -0.8000000099080964}
2025-12-01 16:48:38,619 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:38,619 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:38,620 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:38,621 - INFO - integration_test - Step 56 completed in 0.882s
2025-12-01 16:48:38,643 - INFO - integration_test - Step 57 (contouring until path end)
2025-12-01 16:48:38,644 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[13.41249826  5.31462677 -0.28448898  3.00000001 14.23331389]
2025-12-01 16:48:38,645 - INFO - integration_test - Step 57: Re-initialized spline from 14.2333 to 14.5391 (vehicle at (13.41, 5.31), closest path point at (13.62, 4.48), distance=0.856m)
2025-12-01 16:48:38,645 - DEBUG - integration_test -   Set spline state to 14.5391
2025-12-01 16:48:38,645 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:38,659 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(13.412, 5.315), path_start=(0.000, 0.000), dist=14.427m
2025-12-01 16:48:38,660 - WARNING - integration_test - Could not update reference path at step 57: x and y must have the same length
2025-12-01 16:48:38,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2025-12-01 16:48:38,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:38,664 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:38,664 - INFO - integration_test - Warmstart k=0: x0=13.41249826032883 , y0=5.314626771466944 , psi0=-0.28448898154910246 , v0=3.0 , spline0=14.539110144288248 , a0=0.0 , w0=0.0
2025-12-01 16:48:38,664 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:38,664 - INFO - integration_test - Dyn residual k=0: pred=[13.700439821526855, 5.230426668528503, -0.28448898154910246, 3.0, 14.839110144288249], ws=[13.700439821526855, 5.230426668528503, -0.2844889815491025, 3.0, 18.06839309474522], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -3.2292829504569696], res_norm=3.229e+00
2025-12-01 16:48:38,665 - INFO - integration_test - Dyn residual k=1: pred=[13.98838138272488, 5.146226565590062, -0.2844889815491025, 3.0, 18.36839309474522], ws=[13.98838138272488, 5.146226565590062, -0.2844889815491025, 3.0, 21.685045837710142], res=[0.0, 0.0, 0.0, 0.0, -3.316652742964923], res_norm=3.317e+00
2025-12-01 16:48:38,666 - INFO - integration_test - Dyn residual k=2: pred=[14.276322943922905, 5.062026462651621, -0.2844889815491025, 3.0, 21.985045837710143], ws=[14.276322943922905, 5.062026462651621, -0.2844889815491025, 3.0, 25.403238252557482], res=[0.0, 0.0, 0.0, 0.0, -3.41819241484734], res_norm=3.418e+00
2025-12-01 16:48:38,681 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,692 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,708 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,719 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,735 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,746 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,762 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,773 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,789 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,800 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,816 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,828 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,843 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,855 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,882 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,899 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,911 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,927 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,938 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:38,954 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:38,966 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,484 - INFO - integration_test - Step 57: MPC solve successful
2025-12-01 16:48:39,499 - INFO - integration_test - Step 57: Computed 10 numeric contouring constraints for visualization (s=14.539)
2025-12-01 16:48:39,499 - DEBUG - integration_test - Step 57: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:39,499 - INFO - integration_test - === Applying control at step 57 ===
2025-12-01 16:48:39,499 - INFO - integration_test -   Control dict from planner: {'a': 1.0307641762982049e-07, 'w': -0.800000009924138}
2025-12-01 16:48:39,499 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:39,499 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:39,500 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:39,500 - INFO - integration_test - Step 57 completed in 0.856s
2025-12-01 16:48:39,524 - INFO - integration_test - Step 58 (contouring until path end)
2025-12-01 16:48:39,525 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[13.69676658  5.21900493 -0.36448898  3.00000002 14.83911015]
2025-12-01 16:48:39,526 - INFO - integration_test - Step 58: Re-initialized spline from 14.8391 to 14.5391 (vehicle at (13.70, 5.22), closest path point at (13.62, 4.48), distance=0.739m)
2025-12-01 16:48:39,526 - DEBUG - integration_test -   Set spline state to 14.5391
2025-12-01 16:48:39,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:39,540 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(13.697, 5.219), path_start=(0.000, 0.000), dist=14.657m
2025-12-01 16:48:39,540 - WARNING - integration_test - Could not update reference path at step 58: x and y must have the same length
2025-12-01 16:48:39,540 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2025-12-01 16:48:39,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:39,544 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:39,544 - INFO - integration_test - Warmstart k=0: x0=13.696766579756838 , y0=5.219004930096016 , psi0=-0.36448898254151624 , v0=3.0 , spline0=14.539110144288248 , a0=0.0 , w0=0.0
2025-12-01 16:48:39,544 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:39,545 - INFO - integration_test - Dyn residual k=0: pred=[13.977058393709841, 5.11206336179381, -0.36448898254151624, 3.0, 14.839110144288249], ws=[13.977058393709841, 5.11206336179381, -0.3644889825415163, 3.0, 18.06839309474522], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -3.2292829504569696], res_norm=3.229e+00
2025-12-01 16:48:39,546 - INFO - integration_test - Dyn residual k=1: pred=[14.257350207662844, 5.005121793491604, -0.3644889825415163, 3.0, 18.36839309474522], ws=[14.257350207662844, 5.005121793491604, -0.3644889825415163, 3.0, 21.686589278312972], res=[0.0, 0.0, 0.0, 0.0, -3.3181961835677534], res_norm=3.318e+00
2025-12-01 16:48:39,546 - INFO - integration_test - Dyn residual k=2: pred=[14.537642021615847, 4.898180225189398, -0.3644889825415163, 3.0, 21.986589278312973], ws=[14.537642021615847, 4.898180225189398, -0.3644889825415163, 3.0, 25.41033798531303], res=[0.0, 0.0, 0.0, 0.0, -3.4237487070000583], res_norm=3.424e+00
2025-12-01 16:48:39,561 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,572 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,588 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,600 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,616 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,627 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,643 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,654 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,670 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,682 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,710 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,737 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,753 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,765 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,781 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,793 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,810 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,822 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:39,839 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:39,851 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,213 - INFO - integration_test - Step 58: MPC solve successful
2025-12-01 16:48:40,227 - INFO - integration_test - Step 58: Computed 10 numeric contouring constraints for visualization (s=14.539)
2025-12-01 16:48:40,227 - DEBUG - integration_test - Step 58: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:40,227 - INFO - integration_test - === Applying control at step 58 ===
2025-12-01 16:48:40,227 - INFO - integration_test -   Control dict from planner: {'a': -1.949066010765804e-07, 'w': -0.7999979921095645}
2025-12-01 16:48:40,227 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:40,227 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:40,228 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:40,229 - INFO - integration_test - Step 58 completed in 0.704s
2025-12-01 16:48:40,251 - INFO - integration_test - Step 59 (contouring until path end)
2025-12-01 16:48:40,252 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[13.97248415  5.10097173 -0.44448878  3.00000001 14.83911014]
2025-12-01 16:48:40,253 - INFO - integration_test - Step 59: Re-initialized spline from 14.8391 to 15.1449 (vehicle at (13.97, 5.10), closest path point at (13.82, 4.46), distance=0.661m)
2025-12-01 16:48:40,253 - DEBUG - integration_test -   Set spline state to 15.1449
2025-12-01 16:48:40,253 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:40,267 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(13.972, 5.101), path_start=(0.000, 0.000), dist=14.874m
2025-12-01 16:48:40,267 - WARNING - integration_test - Could not update reference path at step 59: x and y must have the same length
2025-12-01 16:48:40,268 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2025-12-01 16:48:40,270 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:40,271 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:40,271 - INFO - integration_test - Warmstart k=0: x0=13.972484147168576 , y0=5.100971727289305 , psi0=-0.4444887817524727 , v0=3.0 , spline0=15.14490640030026 , a0=0.0 , w0=0.0
2025-12-01 16:48:40,271 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:40,272 - INFO - integration_test - Dyn residual k=0: pred=[14.243333328777705, 4.971972809380415, -0.4444887817524727, 3.0, 15.44490640030026], ws=[14.243333328777705, 4.971972809380415, -0.44448878175247275, 3.0, 18.726225860904886], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -3.2813194606046263], res_norm=3.281e+00
2025-12-01 16:48:40,273 - INFO - integration_test - Dyn residual k=1: pred=[14.514182510386835, 4.842973891471526, -0.44448878175247275, 3.0, 19.026225860904887], ws=[14.514182510386835, 4.842973891471526, -0.44448878175247275, 3.0, 22.541461234999897], res=[0.0, 0.0, 0.0, 0.0, -3.5152353740950097], res_norm=3.515e+00
2025-12-01 16:48:40,273 - INFO - integration_test - Dyn residual k=2: pred=[14.785031691995965, 4.713974973562636, -0.44448878175247275, 3.0, 22.841461234999898], ws=[14.785031691995965, 4.713974973562636, -0.44448878175247275, 3.0, 26.342586538066502], res=[0.0, 0.0, 0.0, 0.0, -3.5011253030666047], res_norm=3.501e+00
2025-12-01 16:48:40,289 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,300 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,316 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,327 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,344 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,355 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,370 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,382 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,399 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,410 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,426 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,437 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,453 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,464 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,480 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,492 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,519 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,535 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,546 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,562 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:40,573 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:40,953 - INFO - integration_test - Step 59: MPC solve successful
2025-12-01 16:48:40,967 - INFO - integration_test - Step 59: Computed 10 numeric contouring constraints for visualization (s=15.145)
2025-12-01 16:48:40,968 - DEBUG - integration_test - Step 59: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:40,968 - INFO - integration_test - === Applying control at step 59 ===
2025-12-01 16:48:40,968 - INFO - integration_test -   Control dict from planner: {'a': 1.617815174690581e-07, 'w': -0.7999999389911826}
2025-12-01 16:48:40,968 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:40,968 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:40,970 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:40,970 - INFO - integration_test - Step 59 completed in 0.718s
2025-12-01 16:48:40,994 - INFO - integration_test - Step 60 (contouring until path end)
2025-12-01 16:48:40,995 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[14.23788732  4.96128217 -0.52448878  3.00000002 15.4449064 ]
2025-12-01 16:48:40,996 - INFO - integration_test - Step 60: Re-initialized spline from 15.4449 to 15.7507 (vehicle at (14.24, 4.96), closest path point at (14.46, 4.38), distance=0.626m)
2025-12-01 16:48:40,996 - DEBUG - integration_test -   Set spline state to 15.7507
2025-12-01 16:48:40,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:41,010 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(14.238, 4.961), path_start=(0.000, 0.000), dist=15.078m
2025-12-01 16:48:41,011 - WARNING - integration_test - Could not update reference path at step 60: x and y must have the same length
2025-12-01 16:48:41,011 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2025-12-01 16:48:41,013 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:41,015 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:41,015 - INFO - integration_test - Warmstart k=0: x0=14.237887315489816 , y0=4.961282172001588 , psi0=-0.5244887756515909 , v0=3.0 , spline0=15.750702656312269 , a0=0.0 , w0=0.0
2025-12-01 16:48:41,015 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:41,016 - INFO - integration_test - Dyn residual k=0: pred=[14.497561333737965, 4.811051002642961, -0.5244887756515909, 3.0, 16.050702656312268], ws=[14.497561333737965, 4.811051002642961, -0.5244887756515908, 3.0, 19.509161161280105], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.4584585049678367], res_norm=3.458e+00
2025-12-01 16:48:41,016 - INFO - integration_test - Dyn residual k=1: pred=[14.757235351986113, 4.660819833284335, -0.5244887756515908, 3.0, 19.809161161280105], ws=[14.757235351986113, 4.660819833284335, -0.5244887756515908, 3.0, 23.5647470447369], res=[0.0, 0.0, 0.0, 0.0, -3.7555858834567957], res_norm=3.756e+00
2025-12-01 16:48:41,017 - INFO - integration_test - Dyn residual k=2: pred=[15.016909370234261, 4.5105886639257085, -0.5244887756515908, 3.0, 23.8647470447369], ws=[15.016909370234261, 4.5105886639257085, -0.5244887756515908, 3.0, 27.52707398079105], res=[0.0, 0.0, 0.0, 0.0, -3.66232693605415], res_norm=3.662e+00
2025-12-01 16:48:41,031 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,043 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,058 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,070 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,086 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,097 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,125 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,141 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,152 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,168 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,179 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,196 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,207 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,223 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,235 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,250 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,262 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,278 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,290 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,306 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,317 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,714 - INFO - integration_test - Step 60: MPC solve successful
2025-12-01 16:48:41,729 - INFO - integration_test - Step 60: Computed 10 numeric contouring constraints for visualization (s=15.751)
2025-12-01 16:48:41,729 - DEBUG - integration_test - Step 60: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:41,729 - INFO - integration_test - === Applying control at step 60 ===
2025-12-01 16:48:41,729 - INFO - integration_test -   Control dict from planner: {'a': 7.796484409070917e-09, 'w': -0.3895076478380463}
2025-12-01 16:48:41,729 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:41,729 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:41,730 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:41,730 - INFO - integration_test - Step 60 completed in 0.735s
2025-12-01 16:48:41,754 - INFO - integration_test - Step 61 (contouring until path end)
2025-12-01 16:48:41,755 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[14.49457024  4.80603237 -0.56343954  3.00000002 16.05070266]
2025-12-01 16:48:41,756 - DEBUG - integration_test - Step 61: Using propagated spline 16.0507 (close to path, dist=0.431m)
2025-12-01 16:48:41,756 - DEBUG - integration_test -   Set spline state to 16.0507
2025-12-01 16:48:41,756 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:41,770 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(14.495, 4.806), path_start=(0.000, 0.000), dist=15.271m
2025-12-01 16:48:41,771 - WARNING - integration_test - Could not update reference path at step 61: x and y must have the same length
2025-12-01 16:48:41,771 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2025-12-01 16:48:41,774 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:41,775 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:41,775 - INFO - integration_test - Warmstart k=0: x0=14.494570239958723 , y0=4.806032374562265 , psi0=-0.5634395404353956 , v0=3.0 , spline0=16.050702658543464 , a0=0.0 , w0=0.0
2025-12-01 16:48:41,775 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:41,776 - INFO - integration_test - Dyn residual k=0: pred=[14.748197159913108, 4.645803209069675, -0.5634395404353956, 3.0, 16.350702658543465], ws=[14.748197159913108, 4.645803209069675, -0.5634395404353958, 3.0, 19.968534048231426], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.617831389687961], res_norm=3.618e+00
2025-12-01 16:48:41,777 - INFO - integration_test - Dyn residual k=1: pred=[15.001824079867493, 4.485574043577086, -0.5634395404353958, 3.0, 20.268534048231427], ws=[15.001824079867493, 4.485574043577086, -0.5634395404353958, 3.0, 24.11076464548892], res=[0.0, 0.0, 0.0, 0.0, -3.842230597257494], res_norm=3.842e+00
2025-12-01 16:48:41,777 - INFO - integration_test - Dyn residual k=2: pred=[15.255450999821878, 4.325344878084496, -0.5634395404353958, 3.0, 24.41076464548892], ws=[15.255450999821878, 4.325344878084496, -0.5634395404353958, 3.0, 28.132375702933093], res=[0.0, 0.0, 0.0, 0.0, -3.7216110574441714], res_norm=3.722e+00
2025-12-01 16:48:41,793 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,804 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,821 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,832 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,860 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,876 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,888 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,904 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,915 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,931 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,942 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,958 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,969 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:41,985 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:41,996 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,012 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,023 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,039 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,050 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,066 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,077 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,456 - INFO - integration_test - Step 61: MPC solve successful
2025-12-01 16:48:42,470 - INFO - integration_test - Step 61: Computed 10 numeric contouring constraints for visualization (s=16.051)
2025-12-01 16:48:42,470 - DEBUG - integration_test - Step 61: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:42,470 - INFO - integration_test - === Applying control at step 61 ===
2025-12-01 16:48:42,470 - INFO - integration_test -   Control dict from planner: {'a': 4.878210336461011e-08, 'w': 0.799999166571432}
2025-12-01 16:48:42,470 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:42,470 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:42,471 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:42,472 - INFO - integration_test - Step 61 completed in 0.716s
2025-12-01 16:48:42,496 - INFO - integration_test - Step 62 (contouring until path end)
2025-12-01 16:48:42,497 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[14.75433246  4.65611372 -0.48343962  3.00000003 16.35070266]
2025-12-01 16:48:42,498 - DEBUG - integration_test - Step 62: Using propagated spline 16.3507 (close to path, dist=0.405m)
2025-12-01 16:48:42,498 - DEBUG - integration_test -   Set spline state to 16.3507
2025-12-01 16:48:42,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:42,512 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(14.754, 4.656), path_start=(0.000, 0.000), dist=15.472m
2025-12-01 16:48:42,513 - WARNING - integration_test - Could not update reference path at step 62: x and y must have the same length
2025-12-01 16:48:42,513 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2025-12-01 16:48:42,516 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:42,517 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:42,517 - INFO - integration_test - Warmstart k=0: x0=14.754332459953458 , y0=4.656113718466406 , psi0=-0.48343962377825234 , v0=3.0 , spline0=16.35070266126248 , a0=0.0 , w0=0.0
2025-12-01 16:48:42,517 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:42,518 - INFO - integration_test - Dyn residual k=0: pred=[15.019952859631532, 4.516665508456883, -0.48343962377825234, 3.0, 16.650702661262482], ws=[15.019952859631532, 4.516665508456883, -0.48343962377825234, 3.0, 20.297760380301252], res=[0.0, 0.0, 0.0, 0.0, -3.64705771903877], res_norm=3.647e+00
2025-12-01 16:48:42,518 - INFO - integration_test - Dyn residual k=1: pred=[15.285573259309606, 4.377217298447361, -0.48343962377825234, 3.0, 20.597760380301253], ws=[15.285573259309606, 4.377217298447361, -0.48343962377825234, 3.0, 24.467990096840417], res=[0.0, 0.0, 0.0, 0.0, -3.870229716539164], res_norm=3.870e+00
2025-12-01 16:48:42,519 - INFO - integration_test - Dyn residual k=2: pred=[15.55119365898768, 4.2377690884378385, -0.48343962377825234, 3.0, 24.767990096840418], ws=[15.55119365898768, 4.2377690884378385, -0.48343962377825234, 3.0, 28.504067139234692], res=[0.0, 0.0, 0.0, 0.0, -3.7360770423942746], res_norm=3.736e+00
2025-12-01 16:48:42,534 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,545 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,561 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,572 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,588 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,600 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,616 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,627 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,643 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,654 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,670 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,681 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,697 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,709 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,724 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,735 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,751 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,762 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,778 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,790 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:42,806 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:42,818 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,307 - INFO - integration_test - Step 62: MPC solve successful
2025-12-01 16:48:43,321 - INFO - integration_test - Step 62: Computed 10 numeric contouring constraints for visualization (s=16.351)
2025-12-01 16:48:43,321 - DEBUG - integration_test - Step 62: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:43,321 - INFO - integration_test - === Applying control at step 62 ===
2025-12-01 16:48:43,322 - INFO - integration_test -   Control dict from planner: {'a': -1.951051155034721e-07, 'w': 0.7999364911365343}
2025-12-01 16:48:43,322 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:43,322 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:43,322 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:43,323 - INFO - integration_test - Step 62 completed in 0.826s
2025-12-01 16:48:43,346 - INFO - integration_test - Step 63 (contouring until path end)
2025-12-01 16:48:43,346 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[15.02524418  4.52743249 -0.40344597  3.00000001 16.65070266]
2025-12-01 16:48:43,347 - DEBUG - integration_test - Step 63: Using propagated spline 16.6507 (close to path, dist=0.236m)
2025-12-01 16:48:43,347 - DEBUG - integration_test -   Set spline state to 16.6507
2025-12-01 16:48:43,347 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:43,361 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(15.025, 4.527), path_start=(0.000, 0.000), dist=15.693m
2025-12-01 16:48:43,361 - WARNING - integration_test - Could not update reference path at step 63: x and y must have the same length
2025-12-01 16:48:43,361 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2025-12-01 16:48:43,364 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:43,365 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:43,365 - INFO - integration_test - Warmstart k=0: x0=15.025244184270058 , y0=4.527432487946978 , psi0=-0.4034459746645989 , v0=3.0 , spline0=16.650702662030447 , a0=0.0 , w0=0.0
2025-12-01 16:48:43,365 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:43,366 - INFO - integration_test - Dyn residual k=0: pred=[15.301158264942673, 4.40965549491954, -0.4034459746645989, 3.0, 16.950702662030448], ws=[15.301158264942673, 4.40965549491954, -0.40344597466459886, 3.0, 20.767445922309086], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -3.8167432602786384], res_norm=3.817e+00
2025-12-01 16:48:43,366 - INFO - integration_test - Dyn residual k=1: pred=[15.577072345615289, 4.291878501892102, -0.40344597466459886, 3.0, 21.067445922309087], ws=[15.577072345615289, 4.291878501892102, -0.40344597466459886, 3.0, 25.015777209325186], res=[0.0, 0.0, 0.0, 0.0, -3.9483312870160994], res_norm=3.948e+00
2025-12-01 16:48:43,367 - INFO - integration_test - Dyn residual k=2: pred=[15.852986426287904, 4.174101508864664, -0.40344597466459886, 3.0, 25.315777209325187], ws=[15.852986426287904, 4.174101508864664, -0.40344597466459886, 3.0, 29.101039721263994], res=[0.0, 0.0, 0.0, 0.0, -3.7852625119388073], res_norm=3.785e+00
2025-12-01 16:48:43,382 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,394 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,410 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,421 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,437 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,448 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,464 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,475 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,492 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,503 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,519 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,531 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,547 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,558 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,574 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,587 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,605 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,618 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,636 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,648 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:43,665 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:43,677 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,056 - INFO - integration_test - Step 63: MPC solve successful
2025-12-01 16:48:44,071 - INFO - integration_test - Step 63: Computed 10 numeric contouring constraints for visualization (s=16.651)
2025-12-01 16:48:44,071 - DEBUG - integration_test - Step 63: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:44,071 - INFO - integration_test - === Applying control at step 63 ===
2025-12-01 16:48:44,071 - INFO - integration_test -   Control dict from planner: {'a': 1.2848008363460373e-07, 'w': 0.7999994132060915}
2025-12-01 16:48:44,071 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:44,071 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:44,072 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:44,072 - INFO - integration_test - Step 63 completed in 0.726s
2025-12-01 16:48:44,100 - INFO - integration_test - Step 64 (contouring until path end)
2025-12-01 16:48:44,100 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[15.30557262  4.42081175 -0.32344603  3.00000002 16.95070266]
2025-12-01 16:48:44,101 - DEBUG - integration_test - Step 64: Using propagated spline 16.9507 (close to path, dist=0.232m)
2025-12-01 16:48:44,101 - DEBUG - integration_test -   Set spline state to 16.9507
2025-12-01 16:48:44,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:44,115 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(15.306, 4.421), path_start=(0.000, 0.000), dist=15.931m
2025-12-01 16:48:44,115 - WARNING - integration_test - Could not update reference path at step 64: x and y must have the same length
2025-12-01 16:48:44,115 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2025-12-01 16:48:44,118 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:44,119 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:44,119 - INFO - integration_test - Warmstart k=0: x0=15.305572620725506 , y0=4.42081175155606 , psi0=-0.32344603334398975 , v0=3.0 , spline0=16.950702664083213 , a0=0.0 , w0=0.0
2025-12-01 16:48:44,119 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:44,120 - INFO - integration_test - Dyn residual k=0: pred=[15.590016353892162, 4.32546101657087, -0.32344603334398975, 3.0, 17.250702664083214], ws=[15.590016353892162, 4.32546101657087, -0.3234460333439899, 3.0, 21.09822221000127], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -3.8475195459180576], res_norm=3.848e+00
2025-12-01 16:48:44,120 - INFO - integration_test - Dyn residual k=1: pred=[15.874460087058818, 4.23011028158568, -0.3234460333439899, 3.0, 21.398222210001272], ws=[15.874460087058818, 4.23011028158568, -0.3234460333439899, 3.0, 25.452144438693693], res=[0.0, 0.0, 0.0, 0.0, -4.0539222286924215], res_norm=4.054e+00
2025-12-01 16:48:44,121 - INFO - integration_test - Dyn residual k=2: pred=[16.158903820225476, 4.13475954660049, -0.3234460333439899, 3.0, 25.752144438693694], ws=[16.158903820225476, 4.13475954660049, -0.3234460333439899, 3.0, 29.6070551395387], res=[0.0, 0.0, 0.0, 0.0, -3.854910700845007], res_norm=3.855e+00
2025-12-01 16:48:44,136 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,147 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,163 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,174 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,191 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,202 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,218 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,229 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,245 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,256 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,272 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,283 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,300 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,312 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,329 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,340 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,356 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,368 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,396 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,412 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,423 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,815 - INFO - integration_test - Step 64: MPC solve successful
2025-12-01 16:48:44,829 - INFO - integration_test - Step 64: Computed 10 numeric contouring constraints for visualization (s=16.951)
2025-12-01 16:48:44,829 - DEBUG - integration_test - Step 64: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:44,829 - INFO - integration_test - === Applying control at step 64 ===
2025-12-01 16:48:44,829 - INFO - integration_test -   Control dict from planner: {'a': -6.667236439118176e-07, 'w': 0.7996858620521459}
2025-12-01 16:48:44,829 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:44,829 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:44,831 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:44,831 - INFO - integration_test - Step 64 completed in 0.731s
2025-12-01 16:48:44,856 - INFO - integration_test - Step 65 (contouring until path end)
2025-12-01 16:48:44,857 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[15.59352379  4.33692983 -0.24347745  2.99999995 17.25070266]
2025-12-01 16:48:44,858 - DEBUG - integration_test - Step 65: Using propagated spline 17.2507 (close to path, dist=0.180m)
2025-12-01 16:48:44,858 - DEBUG - integration_test -   Set spline state to 17.2507
2025-12-01 16:48:44,858 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:44,875 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(15.594, 4.337), path_start=(0.000, 0.000), dist=16.185m
2025-12-01 16:48:44,876 - WARNING - integration_test - Could not update reference path at step 65: x and y must have the same length
2025-12-01 16:48:44,876 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2025-12-01 16:48:44,878 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:44,879 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:44,879 - INFO - integration_test - Warmstart k=0: x0=15.593523785660864 , y0=4.336929832698147 , psi0=-0.24347744713877517 , v0=2.999999953855293 , spline0=17.250702659468743 , a0=0.0 , w0=0.0
2025-12-01 16:48:44,879 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:44,880 - INFO - integration_test - Dyn residual k=0: pred=[15.884675432738359, 4.264606146153698, -0.24347744713877517, 2.999999953855293, 17.550702654854273], ws=[15.884675432738359, 4.264606146153698, -0.24347744713877528, 2.999999953855293, 21.575092110998227], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.024389456143954], res_norm=4.024e+00
2025-12-01 16:48:44,881 - INFO - integration_test - Dyn residual k=1: pred=[16.175827079815853, 4.192282459609248, -0.24347744713877528, 2.999999953855293, 21.875092106383757], ws=[16.175827079815853, 4.192282459609248, -0.24347744713877528, 2.999999953855293, 25.993649683175928], res=[0.0, 0.0, 0.0, 0.0, -4.1185575767921705], res_norm=4.119e+00
2025-12-01 16:48:44,883 - INFO - integration_test - Dyn residual k=2: pred=[16.46697872689335, 4.119958773064798, -0.24347744713877528, 2.999999953855293, 26.293649678561458], ws=[16.46697872689335, 4.119958773064798, -0.24347744713877528, 2.999999953855293, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.390366866027051], res_norm=3.390e+00
2025-12-01 16:48:44,898 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,910 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,927 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,939 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,956 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,967 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:44,984 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:44,997 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,013 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,024 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,040 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,051 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,068 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,080 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,097 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,108 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,124 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,135 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,152 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,163 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,179 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,190 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,532 - INFO - integration_test - Step 65: MPC solve successful
2025-12-01 16:48:45,546 - INFO - integration_test - Step 65: Computed 10 numeric contouring constraints for visualization (s=17.251)
2025-12-01 16:48:45,547 - DEBUG - integration_test - Step 65: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:45,547 - INFO - integration_test - === Applying control at step 65 ===
2025-12-01 16:48:45,547 - INFO - integration_test -   Control dict from planner: {'a': 3.8149885982662206e-07, 'w': 0.7999216828077771}
2025-12-01 16:48:45,547 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:45,547 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:45,548 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:45,548 - INFO - integration_test - Step 65 completed in 0.691s
2025-12-01 16:48:45,569 - INFO - integration_test - Step 66 (contouring until path end)
2025-12-01 16:48:45,571 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[15.88725616  4.27632197 -0.16348528  2.99999999 17.55070266]
2025-12-01 16:48:45,571 - DEBUG - integration_test - Step 66: Using propagated spline 17.5507 (close to path, dist=0.139m)
2025-12-01 16:48:45,571 - DEBUG - integration_test -   Set spline state to 17.5507
2025-12-01 16:48:45,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:45,586 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(15.887, 4.276), path_start=(0.000, 0.000), dist=16.453m
2025-12-01 16:48:45,586 - WARNING - integration_test - Could not update reference path at step 66: x and y must have the same length
2025-12-01 16:48:45,586 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2025-12-01 16:48:45,589 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:45,591 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:45,591 - INFO - integration_test - Warmstart k=0: x0=15.887256159288604 , y0=4.276321968107499 , psi0=-0.16348527885799746 , v0=2.9999999920051788 , spline0=17.550702658669262 , a0=0.0 , w0=0.0
2025-12-01 16:48:45,591 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:45,592 - INFO - integration_test - Dyn residual k=0: pred=[16.18325596453592, 4.227494569918963, -0.16348527885799746, 2.9999999920051788, 17.850702657869782], ws=[16.18325596453592, 4.227494569918963, -0.16348527885799768, 2.9999999920051788, 21.906646229665927], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -4.055943571796146], res_norm=4.056e+00
2025-12-01 16:48:45,593 - INFO - integration_test - Dyn residual k=1: pred=[16.479255769783236, 4.178667171730426, -0.16348527885799768, 2.9999999920051788, 22.206646228866447], ws=[16.479255769783236, 4.178667171730426, -0.16348527885799768, 2.9999999920051788, 26.346547588932584], res=[0.0, 0.0, 0.0, 0.0, -4.139901360066137], res_norm=4.140e+00
2025-12-01 16:48:45,594 - INFO - integration_test - Dyn residual k=2: pred=[16.775255575030553, 4.12983977354189, -0.16348527885799768, 2.9999999920051788, 26.646547588133103], ws=[16.775255575030553, 4.12983977354189, -0.16348527885799768, 2.9999999920051788, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.037468956455406], res_norm=3.037e+00
2025-12-01 16:48:45,609 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,620 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,637 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,648 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,665 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,676 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,692 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,704 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,720 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,732 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,747 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,759 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,775 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,786 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,802 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,814 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,830 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,841 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,857 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,869 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:45,884 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:45,896 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,192 - INFO - integration_test - Step 66: MPC solve successful
2025-12-01 16:48:46,207 - INFO - integration_test - Step 66: Computed 10 numeric contouring constraints for visualization (s=17.551)
2025-12-01 16:48:46,207 - DEBUG - integration_test - Step 66: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:46,207 - INFO - integration_test - === Applying control at step 66 ===
2025-12-01 16:48:46,207 - INFO - integration_test -   Control dict from planner: {'a': 2.5326875024852715e-07, 'w': 0.8000000074744972}
2025-12-01 16:48:46,207 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:46,207 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:46,208 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:46,209 - INFO - integration_test - Step 66 completed in 0.638s
2025-12-01 16:48:46,232 - INFO - integration_test - Step 67 (contouring until path end)
2025-12-01 16:48:46,233 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[16.18489239  4.23938031 -0.08348528  3.00000002 17.85070266]
2025-12-01 16:48:46,234 - DEBUG - integration_test - Step 67: Using propagated spline 17.8507 (close to path, dist=0.216m)
2025-12-01 16:48:46,234 - DEBUG - integration_test -   Set spline state to 17.8507
2025-12-01 16:48:46,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:46,248 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(16.185, 4.239), path_start=(0.000, 0.000), dist=16.731m
2025-12-01 16:48:46,248 - WARNING - integration_test - Could not update reference path at step 67: x and y must have the same length
2025-12-01 16:48:46,249 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2025-12-01 16:48:46,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:46,252 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:46,252 - INFO - integration_test - Warmstart k=0: x0=16.184892392432726 , y0=4.239380314154247 , psi0=-0.08348527811054775 , v0=3.0 , spline0=17.85070266040247 , a0=0.0 , w0=0.0
2025-12-01 16:48:46,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:46,253 - INFO - integration_test - Dyn residual k=0: pred=[16.483847530767438, 4.214363814333657, -0.08348527811054775, 3.0, 18.15070266040247], ws=[16.483847530767438, 4.214363814333657, -0.08348527811054796, 3.0, 22.38626398821688], res=[0.0, 0.0, 2.0816681711721685e-16, 0.0, -4.235561327814409], res_norm=4.236e+00
2025-12-01 16:48:46,254 - INFO - integration_test - Dyn residual k=1: pred=[16.78280266910215, 4.189347314513067, -0.08348527811054796, 3.0, 22.68626398821688], ws=[16.78280266910215, 4.189347314513067, -0.08348527811054796, 3.0, 26.94402299700058], res=[0.0, 0.0, 0.0, 0.0, -4.257759008783701], res_norm=4.258e+00
2025-12-01 16:48:46,255 - INFO - integration_test - Dyn residual k=2: pred=[17.081757807436862, 4.164330814692477, -0.08348527811054796, 3.0, 27.24402299700058], ws=[17.081757807436862, 4.164330814692477, -0.08348527811054796, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.439993547587928], res_norm=2.440e+00
2025-12-01 16:48:46,269 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,281 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,297 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,308 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,325 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,336 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,352 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,363 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,379 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,391 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,407 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,418 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,434 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,445 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,461 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,472 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,500 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,517 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,528 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,544 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,555 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,845 - INFO - integration_test - Step 67: MPC solve successful
2025-12-01 16:48:46,859 - INFO - integration_test - Step 67: Computed 10 numeric contouring constraints for visualization (s=17.851)
2025-12-01 16:48:46,860 - DEBUG - integration_test - Step 67: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:46,860 - INFO - integration_test - === Applying control at step 67 ===
2025-12-01 16:48:46,860 - INFO - integration_test -   Control dict from planner: {'a': 8.414194403173099e-08, 'w': 0.7999999950454492}
2025-12-01 16:48:46,860 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:46,860 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:46,861 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:46,861 - INFO - integration_test - Step 67 completed in 0.628s
2025-12-01 16:48:46,888 - INFO - integration_test - Step 68 (contouring until path end)
2025-12-01 16:48:46,890 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[ 1.64845289e+01  4.22634232e+00 -3.48527861e-03  3.00000003e+00
  1.81507027e+01]
2025-12-01 16:48:46,890 - DEBUG - integration_test - Step 68: Using propagated spline 18.1507 (close to path, dist=0.085m)
2025-12-01 16:48:46,890 - DEBUG - integration_test -   Set spline state to 18.1507
2025-12-01 16:48:46,891 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:46,905 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(16.485, 4.226), path_start=(0.000, 0.000), dist=17.018m
2025-12-01 16:48:46,906 - WARNING - integration_test - Could not update reference path at step 68: x and y must have the same length
2025-12-01 16:48:46,906 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2025-12-01 16:48:46,908 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:46,909 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:46,909 - INFO - integration_test - Warmstart k=0: x0=16.484528880147305 , y0=4.226342318898919 , psi0=-0.0034852786060028396 , v0=3.0 , spline0=18.150702662977093 , a0=0.0 , w0=0.0
2025-12-01 16:48:46,909 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:46,910 - INFO - integration_test - Dyn residual k=0: pred=[16.784527058074104, 4.225296737433929, -0.0034852786060028396, 3.0, 18.450702662977093], ws=[16.784527058074104, 4.225296737433929, -0.003485278606002673, 3.0, 22.717560029336738], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -4.266857366359645], res_norm=4.267e+00
2025-12-01 16:48:46,911 - INFO - integration_test - Dyn residual k=1: pred=[17.084525236000903, 4.22425115596894, -0.003485278606002673, 3.0, 23.01756002933674], ws=[17.084525236000903, 4.22425115596894, -0.003485278606002673, 3.0, 27.292621212505015], res=[0.0, 0.0, 0.0, 0.0, -4.275061183168276], res_norm=4.275e+00
2025-12-01 16:48:46,912 - INFO - integration_test - Dyn residual k=2: pred=[17.384523413927703, 4.22320557450395, -0.003485278606002673, 3.0, 27.592621212505016], ws=[17.384523413927703, 4.22320557450395, -0.003485278606002673, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.0913953320834935], res_norm=2.091e+00
2025-12-01 16:48:46,927 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,938 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,954 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,966 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:46,983 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:46,995 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,011 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,023 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,039 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,050 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,066 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,078 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,095 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,106 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,122 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,134 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,150 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,161 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,178 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,190 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,206 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,217 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,489 - INFO - integration_test - Step 68: MPC solve successful
2025-12-01 16:48:47,506 - INFO - integration_test - Step 68: Computed 10 numeric contouring constraints for visualization (s=18.151)
2025-12-01 16:48:47,506 - DEBUG - integration_test - Step 68: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:47,506 - INFO - integration_test - === Applying control at step 68 ===
2025-12-01 16:48:47,506 - INFO - integration_test -   Control dict from planner: {'a': -2.5422922412868514e-06, 'w': 0.7991931870583973}
2025-12-01 16:48:47,506 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:47,506 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:47,507 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:47,508 - INFO - integration_test - Step 68 completed in 0.618s
2025-12-01 16:48:47,531 - INFO - integration_test - Step 69 (contouring until path end)
2025-12-01 16:48:47,532 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[16.78424956  4.2372793   0.07643404  2.99999977 18.45070264]
2025-12-01 16:48:47,532 - DEBUG - integration_test - Step 69: Using propagated spline 18.4507 (close to path, dist=0.267m)
2025-12-01 16:48:47,532 - DEBUG - integration_test -   Set spline state to 18.4507
2025-12-01 16:48:47,533 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:47,548 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(16.784, 4.237), path_start=(0.000, 0.000), dist=17.311m
2025-12-01 16:48:47,548 - WARNING - integration_test - Could not update reference path at step 69: x and y must have the same length
2025-12-01 16:48:47,548 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2025-12-01 16:48:47,551 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:47,553 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:47,553 - INFO - integration_test - Warmstart k=0: x0=16.784249560080706 , y0=4.237279295470722 , psi0=0.0764340400998369 , v0=2.9999997715170235 , spline0=18.450702640128796 , a0=0.0 , w0=0.0
2025-12-01 16:48:47,553 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:47,554 - INFO - integration_test - Dyn residual k=0: pred=[17.08337363947893, 4.260187185272891, 0.0764340400998369, 2.9999997715170235, 18.7507026172805], ws=[17.08337363947893, 4.260187185272891, 0.07643404009983712, 2.9999997715170235, 23.048848559092765], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.298145941812265], res_norm=4.298e+00
2025-12-01 16:48:47,555 - INFO - integration_test - Dyn residual k=1: pred=[17.38249771887715, 4.283095075075061, 0.07643404009983712, 2.9999997715170235, 23.348848536244468], ws=[17.38249771887715, 4.283095075075061, 0.07643404009983668, 2.9999997715170235, 27.642355584308532], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -4.293507048064065], res_norm=4.294e+00
2025-12-01 16:48:47,556 - INFO - integration_test - Dyn residual k=2: pred=[17.681621798275373, 4.30600296487723, 0.07643404009983668, 2.9999997715170235, 27.942355561460236], ws=[17.681621798275373, 4.30600296487723, 0.07643404009983668, 2.9999997715170235, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.7416609831282734], res_norm=1.742e+00
2025-12-01 16:48:47,571 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,582 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,600 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,612 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,628 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,640 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,656 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,667 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,685 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,697 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,713 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,725 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,740 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,752 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,767 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,779 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,807 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,823 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,834 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:47,850 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:47,862 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,168 - INFO - integration_test - Step 69: MPC solve successful
2025-12-01 16:48:48,183 - INFO - integration_test - Step 69: Computed 10 numeric contouring constraints for visualization (s=18.451)
2025-12-01 16:48:48,183 - DEBUG - integration_test - Step 69: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:48,183 - INFO - integration_test - === Applying control at step 69 ===
2025-12-01 16:48:48,183 - INFO - integration_test -   Control dict from planner: {'a': 1.4283792806680303e-07, 'w': -0.7998499305848971}
2025-12-01 16:48:48,183 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:48,183 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:48,184 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:48,185 - INFO - integration_test - Step 69 completed in 0.653s
2025-12-01 16:48:48,210 - INFO - integration_test - Step 70 (contouring until path end)
2025-12-01 16:48:48,211 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[ 1.70839705e+01  4.24820642e+00 -3.55095296e-03  2.99999979e+00
  1.87507026e+01]
2025-12-01 16:48:48,211 - DEBUG - integration_test - Step 70: Using propagated spline 18.7507 (close to path, dist=0.049m)
2025-12-01 16:48:48,211 - DEBUG - integration_test -   Set spline state to 18.7507
2025-12-01 16:48:48,212 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:48,225 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(17.084, 4.248), path_start=(0.000, 0.000), dist=17.604m
2025-12-01 16:48:48,225 - WARNING - integration_test - Could not update reference path at step 70: x and y must have the same length
2025-12-01 16:48:48,225 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2025-12-01 16:48:48,228 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:48,229 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:48,229 - INFO - integration_test - Warmstart k=0: x0=17.083970455851958 , y0=4.248206424997121 , psi0=-0.003550952958652806 , v0=2.9999997858008163 , spline0=18.75070261870888 , a0=0.0 , w0=0.0
2025-12-01 16:48:48,229 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:48,230 - INFO - integration_test - Dyn residual k=0: pred=[17.383968543044126, 4.24714114142433, -0.003550952958652806, 2.9999997858008163, 19.05070259728896], ws=[17.383968543044126, 4.24714114142433, -0.003550952958652598, 2.9999997858008163, 23.524342781250986], res=[0.0, 0.0, -2.0816681711721685e-16, 0.0, -4.473640183962026], res_norm=4.474e+00
2025-12-01 16:48:48,231 - INFO - integration_test - Dyn residual k=1: pred=[17.683966630236295, 4.246075857851539, -0.003550952958652598, 2.9999997858008163, 23.82434275983107], ws=[17.683966630236295, 4.246075857851539, -0.003550952958653042, 2.9999997858008163, 28.22043948504594], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -4.396096725214871], res_norm=4.396e+00
2025-12-01 16:48:48,232 - INFO - integration_test - Dyn residual k=2: pred=[17.983964717428464, 4.245010574278749, -0.003550952958653042, 2.9999997858008163, 28.520439463626023], ws=[17.983964717428464, 4.245010574278749, -0.003550952958653042, 2.9999997858008163, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1635770809624866], res_norm=1.164e+00
2025-12-01 16:48:48,246 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,257 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,273 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,284 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,301 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,312 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,328 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,340 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,356 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,367 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,384 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,395 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,412 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,423 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,439 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,450 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,466 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,477 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,494 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,506 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,521 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:48,532 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:48,887 - INFO - integration_test - Step 70: MPC solve successful
2025-12-01 16:48:48,910 - INFO - integration_test - Step 70: Computed 10 numeric contouring constraints for visualization (s=18.751)
2025-12-01 16:48:48,910 - DEBUG - integration_test - Step 70: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:48,911 - INFO - integration_test - === Applying control at step 70 ===
2025-12-01 16:48:48,911 - INFO - integration_test -   Control dict from planner: {'a': 1.485370334583391e-06, 'w': -0.7999996911853966}
2025-12-01 16:48:48,911 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:48,911 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:48,913 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:48,914 - INFO - integration_test - Step 70 completed in 0.703s
2025-12-01 16:48:48,950 - INFO - integration_test - Step 71 (contouring until path end)
2025-12-01 16:48:48,956 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[17.38360607  4.23514876 -0.08355092  2.99999993 19.05070261]
2025-12-01 16:48:48,957 - DEBUG - integration_test - Step 71: Using propagated spline 19.0507 (close to path, dist=0.316m)
2025-12-01 16:48:48,957 - DEBUG - integration_test -   Set spline state to 19.0507
2025-12-01 16:48:48,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:48,981 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(17.384, 4.235), path_start=(0.000, 0.000), dist=17.892m
2025-12-01 16:48:48,982 - WARNING - integration_test - Could not update reference path at step 71: x and y must have the same length
2025-12-01 16:48:48,982 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2025-12-01 16:48:48,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:48,989 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:48,989 - INFO - integration_test - Warmstart k=0: x0=17.383606070785614 , y0=4.235148756485582 , psi0=-0.08355092207719246 , v0=2.9999999343378496 , spline0=19.050702612142665 , a0=0.0 , w0=0.0
2025-12-01 16:48:48,989 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:48,991 - INFO - integration_test - Dyn residual k=0: pred=[17.68255955975062, 4.210112632665752, -0.08355092207719246, 2.9999999343378496, 19.35070260557645], ws=[17.68255955975062, 4.210112632665752, -0.08355092207719261, 2.9999999343378496, 23.85437130603757], res=[0.0, 0.0, 1.5265566588595902e-16, 0.0, -4.50366870046112], res_norm=4.504e+00
2025-12-01 16:48:48,992 - INFO - integration_test - Dyn residual k=1: pred=[17.981513048715623, 4.185076508845922, -0.08355092207719261, 2.9999999343378496, 24.154371299471357], ws=[17.981513048715623, 4.185076508845922, -0.08355092207719261, 2.9999999343378496, 28.57118613055861], res=[0.0, 0.0, 0.0, 0.0, -4.416814831087251], res_norm=4.417e+00
2025-12-01 16:48:48,993 - INFO - integration_test - Dyn residual k=2: pred=[18.280466537680628, 4.160040385026092, -0.08355092207719261, 2.9999999343378496, 28.871186123992395], ws=[18.280466537680628, 4.160040385026092, -0.08355092207719261, 2.9999999343378496, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.8128304205961143], res_norm=8.128e-01
2025-12-01 16:48:49,016 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,034 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,067 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,089 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,112 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,128 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,169 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,188 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,208 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,222 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,240 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,254 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,271 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,284 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,303 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,316 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,334 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,346 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,364 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,377 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,395 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,408 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,804 - INFO - integration_test - Step 71: MPC solve successful
2025-12-01 16:48:49,821 - INFO - integration_test - Step 71: Computed 10 numeric contouring constraints for visualization (s=19.051)
2025-12-01 16:48:49,821 - DEBUG - integration_test - Step 71: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:49,821 - INFO - integration_test - === Applying control at step 71 ===
2025-12-01 16:48:49,821 - INFO - integration_test -   Control dict from planner: {'a': 6.372570834164519e-07, 'w': -0.8000000094899231}
2025-12-01 16:48:49,821 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:49,821 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:49,822 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:49,823 - INFO - integration_test - Step 71 completed in 0.867s
2025-12-01 16:48:49,853 - INFO - integration_test - Step 72 (contouring until path end)
2025-12-01 16:48:49,856 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[17.68123987  4.19818756 -0.16355092  3.         19.35070261]
2025-12-01 16:48:49,857 - DEBUG - integration_test - Step 72: Using propagated spline 19.3507 (close to path, dist=0.047m)
2025-12-01 16:48:49,857 - DEBUG - integration_test -   Set spline state to 19.3507
2025-12-01 16:48:49,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:49,873 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(17.681, 4.198), path_start=(0.000, 0.000), dist=18.173m
2025-12-01 16:48:49,873 - WARNING - integration_test - Could not update reference path at step 72: x and y must have the same length
2025-12-01 16:48:49,873 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2025-12-01 16:48:49,876 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:49,878 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:49,878 - INFO - integration_test - Warmstart k=0: x0=17.68123987446387 , y0=4.198187564974073 , psi0=-0.1635509230261848 , v0=2.999999998063558 , spline0=19.35070261194902 , a0=0.0 , w0=0.0
2025-12-01 16:48:49,878 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:49,879 - INFO - integration_test - Dyn residual k=0: pred=[17.977236474437248, 4.149340736131109, -0.1635509230261848, 2.999999998063558, 19.650702611755378], ws=[17.977236474437248, 4.149340736131109, -0.16355092302618468, 2.999999998063558, 24.32020128703397], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.669498675278593], res_norm=4.669e+00
2025-12-01 16:48:49,880 - INFO - integration_test - Dyn residual k=1: pred=[18.273233074410626, 4.100493907288146, -0.16355092302618468, 2.999999998063558, 24.620201286840327], ws=[18.273233074410626, 4.100493907288146, -0.16355092302618468, 2.999999998063558, 29.086600813764782], res=[0.0, 0.0, 0.0, 0.0, -4.466399526924455], res_norm=4.466e+00
2025-12-01 16:48:49,881 - INFO - integration_test - Dyn residual k=2: pred=[18.569229674384005, 4.051647078445183, -0.16355092302618468, 2.999999998063558, 29.38660081357114], ws=[18.569229674384005, 4.051647078445183, -0.16355092302618468, 2.999999998063558, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.2974157310173702], res_norm=2.974e-01
2025-12-01 16:48:49,898 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,911 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,929 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,942 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,960 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:49,973 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:49,992 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,005 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,022 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,035 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,053 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,065 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,083 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,096 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,113 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,125 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,144 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,158 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,177 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,190 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,207 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,220 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,582 - INFO - integration_test - Step 72: MPC solve successful
2025-12-01 16:48:50,600 - INFO - integration_test - Step 72: Computed 10 numeric contouring constraints for visualization (s=19.351)
2025-12-01 16:48:50,600 - DEBUG - integration_test - Step 72: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:50,600 - INFO - integration_test - === Applying control at step 72 ===
2025-12-01 16:48:50,600 - INFO - integration_test -   Control dict from planner: {'a': 2.128820832567767e-07, 'w': -0.8000000099785453}
2025-12-01 16:48:50,600 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:50,600 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:50,601 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:50,602 - INFO - integration_test - Step 72 completed in 0.746s
2025-12-01 16:48:50,631 - INFO - integration_test - Step 73 (contouring until path end)
2025-12-01 16:48:50,632 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[17.97496802  4.13755927 -0.24355092  3.00000002 19.65070261]
2025-12-01 16:48:50,633 - DEBUG - integration_test - Step 73: Using propagated spline 19.6507 (close to path, dist=0.295m)
2025-12-01 16:48:50,633 - DEBUG - integration_test -   Set spline state to 19.6507
2025-12-01 16:48:50,633 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:50,649 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(17.975, 4.138), path_start=(0.000, 0.000), dist=18.445m
2025-12-01 16:48:50,650 - WARNING - integration_test - Could not update reference path at step 73: x and y must have the same length
2025-12-01 16:48:50,650 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2025-12-01 16:48:50,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:50,654 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:50,654 - INFO - integration_test - Warmstart k=0: x0=17.974968019623752 , y0=4.13755927075535 , psi0=-0.24355092402403933 , v0=3.0 , spline0=19.6507026138842 , a0=0.0 , w0=0.0
2025-12-01 16:48:50,654 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:50,656 - INFO - integration_test - Dyn residual k=0: pred=[18.26611435627438, 4.065214190377205, -0.24355092402403933, 3.0, 19.9507026138842], ws=[18.26611435627438, 4.065214190377205, -0.24355092402403944, 3.0, 24.647963263188306], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.697260649304106], res_norm=4.697e+00
2025-12-01 16:48:50,656 - INFO - integration_test - Dyn residual k=1: pred=[18.557260692925006, 3.9928691099990594, -0.24355092402403944, 3.0, 24.947963263188306], ws=[18.557260692925006, 3.9928691099990594, -0.24355092402403944, 3.0, 29.483059440769765], res=[0.0, 0.0, 0.0, 0.0, -4.535096177581458], res_norm=4.535e+00
2025-12-01 16:48:50,657 - INFO - integration_test - Dyn residual k=2: pred=[18.848407029575633, 3.920524029620914, -0.24355092402403944, 3.0, 29.783059440769765], ws=[18.848407029575633, 3.920524029620914, -0.24355092402403944, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.09904289618125617], res_norm=9.904e-02
2025-12-01 16:48:50,674 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,686 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,707 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,720 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,740 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,752 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,771 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,783 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,814 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,832 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,846 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,865 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,878 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,897 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,911 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,929 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,941 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,959 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:50,971 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:50,989 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,002 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,475 - INFO - integration_test - Step 73: MPC solve successful
2025-12-01 16:48:51,493 - INFO - integration_test - Step 73: Computed 10 numeric contouring constraints for visualization (s=19.651)
2025-12-01 16:48:51,494 - DEBUG - integration_test - Step 73: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:51,494 - INFO - integration_test - === Applying control at step 73 ===
2025-12-01 16:48:51,494 - INFO - integration_test -   Control dict from planner: {'a': 7.095504810710155e-08, 'w': -0.8000000099765929}
2025-12-01 16:48:51,494 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:51,494 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:51,495 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:51,496 - INFO - integration_test - Step 73 completed in 0.864s
2025-12-01 16:48:51,544 - INFO - integration_test - Step 74 (contouring until path end)
2025-12-01 16:48:51,549 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[18.26291165  4.05365169 -0.32355093  3.00000003 19.95070262]
2025-12-01 16:48:51,550 - DEBUG - integration_test - Step 74: Using propagated spline 19.9507 (close to path, dist=0.267m)
2025-12-01 16:48:51,550 - DEBUG - integration_test -   Set spline state to 19.9507
2025-12-01 16:48:51,550 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:51,568 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(18.263, 4.054), path_start=(0.000, 0.000), dist=18.707m
2025-12-01 16:48:51,569 - WARNING - integration_test - Could not update reference path at step 74: x and y must have the same length
2025-12-01 16:48:51,569 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2025-12-01 16:48:51,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:51,574 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:51,574 - INFO - integration_test - Warmstart k=0: x0=18.26291164561094 , y0=4.053651688122175 , psi0=-0.32355092502169863 , v0=3.0 , spline0=19.950702616528925 , a0=0.0 , w0=0.0
2025-12-01 16:48:51,574 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:51,576 - INFO - integration_test - Dyn residual k=0: pred=[18.54734537571429, 3.958271117881191, -0.32355092502169863, 3.0, 20.250702616528926], ws=[18.54734537571429, 3.958271117881191, -0.3235509250216988, 3.0, 25.09952555311616], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.848822936587233], res_norm=4.849e+00
2025-12-01 16:48:51,577 - INFO - integration_test - Dyn residual k=1: pred=[18.83177910581764, 3.862890547640207, -0.3235509250216988, 3.0, 25.39952555311616], ws=[18.83177910581764, 3.862890547640207, -0.3235509250216988, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.2844909914723495], res_norm=4.284e+00
2025-12-01 16:48:51,578 - INFO - integration_test - Dyn residual k=2: pred=[19.116212835920987, 3.7675099773992233, -0.3235509250216988, 3.0, 29.98401654458851], ws=[19.116212835920987, 3.7675099773992233, -0.3235509250216988, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:51,596 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,609 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,627 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,640 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,660 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,673 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,695 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,708 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,726 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,738 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,755 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,767 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,784 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,796 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,813 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,824 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,840 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,852 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,867 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,879 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:51,895 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:51,906 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,205 - INFO - integration_test - Step 74: MPC solve successful
2025-12-01 16:48:52,219 - INFO - integration_test - Step 74: Computed 10 numeric contouring constraints for visualization (s=19.951)
2025-12-01 16:48:52,220 - DEBUG - integration_test - Step 74: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:52,220 - INFO - integration_test - === Applying control at step 74 ===
2025-12-01 16:48:52,220 - INFO - integration_test -   Control dict from planner: {'a': 2.3667299278861764e-08, 'w': -0.8000000099799724}
2025-12-01 16:48:52,220 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:52,220 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:52,221 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:52,221 - INFO - integration_test - Step 74 completed in 0.673s
2025-12-01 16:48:52,244 - INFO - integration_test - Step 75 (contouring until path end)
2025-12-01 16:48:52,246 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[18.54322889  3.94700154 -0.40355093  3.00000003 20.25070262]
2025-12-01 16:48:52,246 - DEBUG - integration_test - Step 75: Using propagated spline 20.2507 (close to path, dist=0.413m)
2025-12-01 16:48:52,247 - DEBUG - integration_test -   Set spline state to 20.2507
2025-12-01 16:48:52,247 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:52,261 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(18.543, 3.947), path_start=(0.000, 0.000), dist=18.959m
2025-12-01 16:48:52,261 - WARNING - integration_test - Could not update reference path at step 75: x and y must have the same length
2025-12-01 16:48:52,261 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2025-12-01 16:48:52,264 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:52,265 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:52,265 - INFO - integration_test - Warmstart k=0: x0=18.543228894862885 , y0=3.947001539385603 , psi0=-0.4035509260196959 , v0=3.0 , spline0=20.250702619410326 , a0=0.0 , w0=0.0
2025-12-01 16:48:52,265 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:52,266 - INFO - integration_test - Dyn residual k=0: pred=[18.81913061316094, 3.829195589450205, -0.4035509260196959, 3.0, 20.550702619410327], ws=[18.81913061316094, 3.829195589450205, -0.40355092601969567, 3.0, 25.42437341034419], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.873670790933865], res_norm=4.874e+00
2025-12-01 16:48:52,267 - INFO - integration_test - Dyn residual k=1: pred=[19.095032331458995, 3.711389639514807, -0.40355092601969567, 3.0, 25.724373410344192], ws=[19.095032331458995, 3.711389639514807, -0.4035509260196961, 3.0, 29.68401654458851], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -3.959643134244317], res_norm=3.960e+00
2025-12-01 16:48:52,268 - INFO - integration_test - Dyn residual k=2: pred=[19.37093404975705, 3.593583689579409, -0.4035509260196961, 3.0, 29.98401654458851], ws=[19.37093404975705, 3.593583689579409, -0.4035509260196961, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:52,283 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,294 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,311 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,322 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,349 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,365 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,376 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,393 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,405 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,421 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,432 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,448 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,459 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,486 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,502 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,514 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,530 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,541 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,557 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,568 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,848 - INFO - integration_test - Step 75: MPC solve successful
2025-12-01 16:48:52,863 - INFO - integration_test - Step 75: Computed 10 numeric contouring constraints for visualization (s=20.251)
2025-12-01 16:48:52,864 - DEBUG - integration_test - Step 75: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:52,864 - INFO - integration_test - === Applying control at step 75 ===
2025-12-01 16:48:52,864 - INFO - integration_test -   Control dict from planner: {'a': 7.865425841542707e-09, 'w': 0.58891194039599}
2025-12-01 16:48:52,864 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:52,864 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:52,865 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:52,865 - INFO - integration_test - Step 75 completed in 0.620s
2025-12-01 16:48:52,891 - INFO - integration_test - Step 76 (contouring until path end)
2025-12-01 16:48:52,892 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[18.82243903  3.83738541 -0.34465973  3.00000003 20.55070262]
2025-12-01 16:48:52,892 - INFO - integration_test - Step 76: Re-initialized spline from 20.5507 to 19.9913 (vehicle at (18.82, 3.84), closest path point at (18.98, 4.41), distance=0.596m)
2025-12-01 16:48:52,893 - DEBUG - integration_test -   Set spline state to 19.9913
2025-12-01 16:48:52,893 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:52,907 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(18.822, 3.837), path_start=(0.000, 0.000), dist=19.210m
2025-12-01 16:48:52,907 - WARNING - integration_test - Could not update reference path at step 76: x and y must have the same length
2025-12-01 16:48:52,907 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2025-12-01 16:48:52,910 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:52,911 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:52,911 - INFO - integration_test - Warmstart k=0: x0=18.8224390296541 , y0=3.837385414455102 , psi0=-0.34465973198009686 , v0=3.0 , spline0=19.99127644839634 , a0=0.0 , w0=0.0
2025-12-01 16:48:52,911 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:52,912 - INFO - integration_test - Dyn residual k=0: pred=[19.104796172345512, 3.736022482516742, -0.34465973198009686, 3.0, 20.291276448396342], ws=[19.104796172345512, 3.736022482516742, -0.34465973198009703, 3.0, 25.159612506491747], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.868336058095405], res_norm=4.868e+00
2025-12-01 16:48:52,913 - INFO - integration_test - Dyn residual k=1: pred=[19.387153315036926, 3.6346595505783816, -0.34465973198009703, 3.0, 25.459612506491748], ws=[19.387153315036926, 3.6346595505783816, -0.34465973198009703, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.224404038096761], res_norm=4.224e+00
2025-12-01 16:48:52,914 - INFO - integration_test - Dyn residual k=2: pred=[19.66951045772834, 3.5332966186400214, -0.34465973198009703, 3.0, 29.98401654458851], ws=[19.66951045772834, 3.5332966186400214, -0.34465973198009703, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:52,928 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,939 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,955 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,966 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:52,982 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:52,994 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,010 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,022 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,037 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,049 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,064 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,075 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,091 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,103 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,118 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,130 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,146 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,157 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,173 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,186 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,202 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,213 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,485 - INFO - integration_test - Step 76: MPC solve successful
2025-12-01 16:48:53,501 - INFO - integration_test - Step 76: Computed 10 numeric contouring constraints for visualization (s=19.991)
2025-12-01 16:48:53,501 - DEBUG - integration_test - Step 76: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:53,501 - INFO - integration_test - === Applying control at step 76 ===
2025-12-01 16:48:53,501 - INFO - integration_test -   Control dict from planner: {'a': -1.7526104021402062e-08, 'w': 0.8000000004173236}
2025-12-01 16:48:53,501 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:53,501 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:53,503 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:53,503 - INFO - integration_test - Step 76 completed in 0.611s
2025-12-01 16:48:53,529 - INFO - integration_test - Step 77 (contouring until path end)
2025-12-01 16:48:53,529 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[19.10854745  3.74741883 -0.26465973  3.00000003 20.29127645]
2025-12-01 16:48:53,530 - INFO - integration_test - Step 77: Re-initialized spline from 20.2913 to 19.9913 (vehicle at (19.11, 3.75), closest path point at (18.98, 4.41), distance=0.678m)
2025-12-01 16:48:53,530 - DEBUG - integration_test -   Set spline state to 19.9913
2025-12-01 16:48:53,530 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:53,545 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(19.109, 3.747), path_start=(0.000, 0.000), dist=19.473m
2025-12-01 16:48:53,545 - WARNING - integration_test - Could not update reference path at step 77: x and y must have the same length
2025-12-01 16:48:53,545 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2025-12-01 16:48:53,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:53,549 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:53,550 - INFO - integration_test - Warmstart k=0: x0=19.108547449896843 , y0=3.74741882962141 , psi0=-0.2646597319383645 , v0=3.0 , spline0=19.99127644839634 , a0=0.0 , w0=0.0
2025-12-01 16:48:53,550 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:53,550 - INFO - integration_test - Dyn residual k=0: pred=[19.398101919207324, 3.6689445707696944, -0.2646597319383645, 3.0, 20.291276448396342], ws=[19.398101919207324, 3.6689445707696944, -0.26465973193836456, 3.0, 25.159612506491747], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -4.868336058095405], res_norm=4.868e+00
2025-12-01 16:48:53,551 - INFO - integration_test - Dyn residual k=1: pred=[19.687656388517805, 3.590470311917979, -0.26465973193836456, 3.0, 25.459612506491748], ws=[19.687656388517805, 3.590470311917979, -0.26465973193836456, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.224404038096761], res_norm=4.224e+00
2025-12-01 16:48:53,552 - INFO - integration_test - Dyn residual k=2: pred=[19.977210857828286, 3.5119960530662633, -0.26465973193836456, 3.0, 29.98401654458851], ws=[19.977210857828286, 3.5119960530662633, -0.26465973193836456, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:53,567 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,579 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,595 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,607 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,623 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,634 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,650 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,662 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,677 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,689 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,705 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,717 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,733 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,744 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,760 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,771 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,787 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,798 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,815 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,826 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:53,842 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:53,853 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,122 - INFO - integration_test - Step 77: MPC solve successful
2025-12-01 16:48:54,136 - INFO - integration_test - Step 77: Computed 10 numeric contouring constraints for visualization (s=19.991)
2025-12-01 16:48:54,136 - DEBUG - integration_test - Step 77: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:54,136 - INFO - integration_test - === Applying control at step 77 ===
2025-12-01 16:48:54,136 - INFO - integration_test -   Control dict from planner: {'a': 1.4304528798310763e-08, 'w': 0.8000000099920869}
2025-12-01 16:48:54,136 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:54,136 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:54,138 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:54,138 - INFO - integration_test - Step 77 completed in 0.609s
2025-12-01 16:48:54,161 - INFO - integration_test - Step 78 (contouring until path end)
2025-12-01 16:48:54,162 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[19.40093046  3.68060425 -0.18465973  3.00000003 20.29127645]
2025-12-01 16:48:54,162 - INFO - integration_test - Step 78: Re-initialized spline from 20.2913 to 19.9913 (vehicle at (19.40, 3.68), closest path point at (18.98, 4.41), distance=0.846m)
2025-12-01 16:48:54,163 - DEBUG - integration_test -   Set spline state to 19.9913
2025-12-01 16:48:54,163 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:54,177 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(19.401, 3.681), path_start=(0.000, 0.000), dist=19.747m
2025-12-01 16:48:54,177 - WARNING - integration_test - Could not update reference path at step 78: x and y must have the same length
2025-12-01 16:48:54,177 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2025-12-01 16:48:54,180 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:54,182 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:54,182 - INFO - integration_test - Warmstart k=0: x0=19.40093046349448 , y0=3.6806042513529276 , psi0=-0.18465973093915583 , v0=3.0 , spline0=19.99127644839634 , a0=0.0 , w0=0.0
2025-12-01 16:48:54,182 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:54,183 - INFO - integration_test - Dyn residual k=0: pred=[19.695830099006347, 3.6255206333257237, -0.18465973093915583, 3.0, 20.291276448396342], ws=[19.695830099006347, 3.6255206333257237, -0.18465973093915578, 3.0, 25.159612506491747], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -4.868336058095405], res_norm=4.868e+00
2025-12-01 16:48:54,183 - INFO - integration_test - Dyn residual k=1: pred=[19.990729734518215, 3.57043701529852, -0.18465973093915578, 3.0, 25.459612506491748], ws=[19.990729734518215, 3.57043701529852, -0.18465973093915578, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.224404038096761], res_norm=4.224e+00
2025-12-01 16:48:54,184 - INFO - integration_test - Dyn residual k=2: pred=[20.285629370030083, 3.515353397271316, -0.18465973093915578, 3.0, 29.98401654458851], ws=[20.285629370030083, 3.515353397271316, -0.18465973093915578, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:54,201 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,214 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,231 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,242 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,258 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,269 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,285 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,297 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,313 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,324 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,340 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,351 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,378 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,394 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,406 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,422 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,433 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,449 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,460 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,475 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,486 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,750 - INFO - integration_test - Step 78: MPC solve successful
2025-12-01 16:48:54,766 - INFO - integration_test - Step 78: Computed 10 numeric contouring constraints for visualization (s=19.991)
2025-12-01 16:48:54,767 - DEBUG - integration_test - Step 78: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:54,767 - INFO - integration_test - === Applying control at step 78 ===
2025-12-01 16:48:54,767 - INFO - integration_test -   Control dict from planner: {'a': 4.8023592679025725e-09, 'w': 0.800000009997833}
2025-12-01 16:48:54,767 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:54,767 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:54,768 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:54,768 - INFO - integration_test - Step 78 completed in 0.606s
2025-12-01 16:48:54,794 - INFO - integration_test - Step 79 (contouring until path end)
2025-12-01 16:48:54,797 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[19.69771782  3.63736907 -0.10465973  3.00000003 20.29127645]
2025-12-01 16:48:54,798 - INFO - integration_test - Step 79: Re-initialized spline from 20.2913 to 20.5971 (vehicle at (19.70, 3.64), closest path point at (19.60, 4.56), distance=0.924m)
2025-12-01 16:48:54,798 - DEBUG - integration_test -   Set spline state to 20.5971
2025-12-01 16:48:54,798 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:54,812 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(19.698, 3.637), path_start=(0.000, 0.000), dist=20.031m
2025-12-01 16:48:54,813 - WARNING - integration_test - Could not update reference path at step 79: x and y must have the same length
2025-12-01 16:48:54,813 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2025-12-01 16:48:54,815 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:54,816 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:54,817 - INFO - integration_test - Warmstart k=0: x0=19.69771781705514 , y0=3.637369065064697 , psi0=-0.10465972993937254 , v0=3.0 , spline0=20.59707270440835 , a0=0.0 , w0=0.0
2025-12-01 16:48:54,817 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:54,817 - INFO - integration_test - Dyn residual k=0: pred=[19.996076267430084, 3.6060284350477034, -0.10465972993937254, 3.0, 20.89707270440835], ws=[19.996076267430084, 3.6060284350477034, -0.10465972993937234, 3.0, 25.925094692250916], res=[0.0, 0.0, -2.0816681711721685e-16, 0.0, -5.028021987842564], res_norm=5.028e+00
2025-12-01 16:48:54,818 - INFO - integration_test - Dyn residual k=1: pred=[20.29443471780503, 3.57468780503071, -0.10465972993937234, 3.0, 26.225094692250916], ws=[20.29443471780503, 3.57468780503071, -0.10465972993937234, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.4589218523375926], res_norm=3.459e+00
2025-12-01 16:48:54,819 - INFO - integration_test - Dyn residual k=2: pred=[20.592793168179973, 3.5433471750137167, -0.10465972993937234, 3.0, 29.98401654458851], ws=[20.592793168179973, 3.5433471750137167, -0.10465972993937234, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:54,833 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,845 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,872 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,888 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,900 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,916 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,928 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,944 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,955 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,970 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:54,982 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:54,998 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,009 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,025 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,036 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,052 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,064 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,080 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,092 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,108 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,119 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,381 - INFO - integration_test - Step 79: MPC solve successful
2025-12-01 16:48:55,397 - INFO - integration_test - Step 79: Computed 10 numeric contouring constraints for visualization (s=20.597)
2025-12-01 16:48:55,397 - DEBUG - integration_test - Step 79: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:55,397 - INFO - integration_test - === Applying control at step 79 ===
2025-12-01 16:48:55,397 - INFO - integration_test -   Control dict from planner: {'a': -5.080993419105616e-08, 'w': 0.7999999993185827}
2025-12-01 16:48:55,397 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:55,397 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:55,398 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:55,399 - INFO - integration_test - Step 79 completed in 0.602s
2025-12-01 16:48:55,423 - INFO - integration_test - Step 80 (contouring until path end)
2025-12-01 16:48:55,425 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[19.99701108  3.61798983 -0.02465973  3.00000002 20.89707271]
2025-12-01 16:48:55,426 - INFO - integration_test - Step 80: Re-initialized spline from 20.8971 to 20.5971 (vehicle at (20.00, 3.62), closest path point at (19.60, 4.56), distance=1.019m)
2025-12-01 16:48:55,426 - DEBUG - integration_test -   Set spline state to 20.5971
2025-12-01 16:48:55,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:55,441 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(19.997, 3.618), path_start=(0.000, 0.000), dist=20.322m
2025-12-01 16:48:55,442 - WARNING - integration_test - Could not update reference path at step 80: x and y must have the same length
2025-12-01 16:48:55,442 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2025-12-01 16:48:55,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:55,446 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:55,446 - INFO - integration_test - Warmstart k=0: x0=19.99701108395579 , y0=3.6179898282844376 , psi0=-0.02465973000751427 , v0=3.0 , spline0=20.59707270440835 , a0=0.0 , w0=0.0
2025-12-01 16:48:55,446 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:55,447 - INFO - integration_test - Dyn residual k=0: pred=[20.296919873235446, 3.6105926590412936, -0.02465973000751427, 3.0, 20.89707270440835], ws=[20.296919873235446, 3.6105926590412936, -0.024659730007514202, 3.0, 25.925094692250916], res=[0.0, 0.0, -6.938893903907228e-17, 0.0, -5.028021987842564], res_norm=5.028e+00
2025-12-01 16:48:55,448 - INFO - integration_test - Dyn residual k=1: pred=[20.5968286625151, 3.6031954897981495, -0.024659730007514202, 3.0, 26.225094692250916], ws=[20.5968286625151, 3.6031954897981495, -0.024659730007514202, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.4589218523375926], res_norm=3.459e+00
2025-12-01 16:48:55,449 - INFO - integration_test - Dyn residual k=2: pred=[20.896737451794756, 3.5957983205550055, -0.024659730007514202, 3.0, 29.98401654458851], ws=[20.896737451794756, 3.5957983205550055, -0.024659730007514202, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:55,464 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,476 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,493 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,505 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,522 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,533 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,550 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,561 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,591 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,608 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,620 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,636 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,648 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,664 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,675 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,692 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,704 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,720 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,731 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:55,747 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:55,758 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,004 - INFO - integration_test - Step 80: MPC solve successful
2025-12-01 16:48:56,019 - INFO - integration_test - Step 80: Computed 10 numeric contouring constraints for visualization (s=20.597)
2025-12-01 16:48:56,019 - DEBUG - integration_test - Step 80: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:56,019 - INFO - integration_test - === Applying control at step 80 ===
2025-12-01 16:48:56,019 - INFO - integration_test -   Control dict from planner: {'a': 9.737994775904264e-09, 'w': 0.8000000041277663}
2025-12-01 16:48:56,019 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:56,019 - INFO - integration_test -   Planner output success: True
2025-12-01 16:48:56,020 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:56,021 - INFO - integration_test - Step 80 completed in 0.596s
2025-12-01 16:48:56,044 - INFO - integration_test - Step 81 (contouring until path end)
2025-12-01 16:48:56,046 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[20.29689581  3.6225905   0.05534027  3.00000003 20.89707271]
2025-12-01 16:48:56,047 - INFO - integration_test - Step 81: Re-initialized spline from 20.8971 to 21.2029 (vehicle at (20.30, 3.62), closest path point at (20.20, 4.73), distance=1.115m)
2025-12-01 16:48:56,047 - DEBUG - integration_test -   Set spline state to 21.2029
2025-12-01 16:48:56,048 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:56,063 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(20.297, 3.623), path_start=(0.000, 0.000), dist=20.618m
2025-12-01 16:48:56,063 - WARNING - integration_test - Could not update reference path at step 81: x and y must have the same length
2025-12-01 16:48:56,063 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2025-12-01 16:48:56,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:56,067 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:56,067 - INFO - integration_test - Warmstart k=0: x0=20.2968958086568 , y0=3.622590501878979 , psi0=0.05534027040526235 , v0=3.0 , spline0=21.202868960420364 , a0=0.0 , w0=0.0
2025-12-01 16:48:56,067 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:56,068 - INFO - integration_test - Dyn residual k=0: pred=[20.596436544055365, 3.6391841101931957, 0.05534027040526235, 3.0, 21.502868960420365], ws=[20.596436544055365, 3.6391841101931957, 0.05534027040526235, 3.0, 26.670060534375445], res=[0.0, 0.0, 0.0, 0.0, -5.16719157395508], res_norm=5.167e+00
2025-12-01 16:48:56,069 - INFO - integration_test - Dyn residual k=1: pred=[20.89597727945393, 3.6557777185074123, 0.05534027040526235, 3.0, 26.970060534375445], ws=[20.89597727945393, 3.6557777185074123, 0.05534027040526235, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.7139560102130638], res_norm=2.714e+00
2025-12-01 16:48:56,070 - INFO - integration_test - Dyn residual k=2: pred=[21.195518014852496, 3.672371326821629, 0.05534027040526235, 3.0, 29.98401654458851], ws=[21.195518014852496, 3.672371326821629, 0.05534027040526235, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:56,086 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,099 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,117 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,128 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,144 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,155 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,171 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,183 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,200 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,211 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,228 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,239 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,255 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,266 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,282 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,294 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,310 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,322 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,338 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,349 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:56,365 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:56,376 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,102 - WARNING - integration_test - Step 81: MPC solve failed
2025-12-01 16:48:59,102 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 16:48:59,115 - INFO - integration_test - Step 81: Computed 10 numeric contouring constraints for visualization (s=21.203)
2025-12-01 16:48:59,115 - DEBUG - integration_test - Step 81: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:48:59,115 - INFO - integration_test - === Applying control at step 81 ===
2025-12-01 16:48:59,115 - INFO - integration_test -   Control dict from planner: {'a': 9.737994775904264e-09, 'w': 0.8000000041277663}
2025-12-01 16:48:59,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:48:59,116 - INFO - integration_test -   Planner output success: False
2025-12-01 16:48:59,117 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:48:59,117 - INFO - integration_test - Step 81 completed in 3.071s
2025-12-01 16:48:59,140 - INFO - integration_test - Step 82 (contouring until path end)
2025-12-01 16:48:59,141 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[20.59545375  3.65114166  0.13534027  3.00000003 21.50286896]
2025-12-01 16:48:59,142 - INFO - integration_test - Step 82: Re-initialized spline from 21.5029 to 21.2029 (vehicle at (20.60, 3.65), closest path point at (20.20, 4.73), distance=1.152m)
2025-12-01 16:48:59,142 - DEBUG - integration_test -   Set spline state to 21.2029
2025-12-01 16:48:59,142 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:59,156 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(20.595, 3.651), path_start=(0.000, 0.000), dist=20.917m
2025-12-01 16:48:59,157 - WARNING - integration_test - Could not update reference path at step 82: x and y must have the same length
2025-12-01 16:48:59,157 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2025-12-01 16:48:59,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:48:59,161 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:48:59,161 - INFO - integration_test - Warmstart k=0: x0=20.595453752595624 , y0=3.6511416573011752 , psi0=0.13534027081803895 , v0=3.0 , spline0=21.202868960420364 , a0=0.0 , w0=0.0
2025-12-01 16:48:59,161 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:48:59,162 - INFO - integration_test - Dyn residual k=0: pred=[20.892710395601075, 3.691619900705882, 0.13534027081803895, 3.0, 21.502868960420365], ws=[20.892710395601075, 3.691619900705882, 0.1353402708180389, 3.0, 26.670060534375438], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -5.167191573955073], res_norm=5.167e+00
2025-12-01 16:48:59,163 - INFO - integration_test - Dyn residual k=1: pred=[21.189967038606525, 3.732098144110589, 0.1353402708180389, 3.0, 26.97006053437544], ws=[21.189967038606525, 3.732098144110589, 0.1353402708180389, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.713956010213071], res_norm=2.714e+00
2025-12-01 16:48:59,163 - INFO - integration_test - Dyn residual k=2: pred=[21.487223681611976, 3.772576387515296, 0.1353402708180389, 3.0, 29.98401654458851], ws=[21.487223681611976, 3.772576387515296, 0.1353402708180389, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:48:59,178 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,190 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,207 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,219 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,235 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,247 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,263 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,274 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,291 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,303 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,319 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,331 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,347 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,358 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,375 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,387 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,404 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,417 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,435 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,448 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:48:59,467 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:48:59,480 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:10,884 - WARNING - integration_test - Step 82: MPC solve failed
2025-12-01 16:49:10,884 - WARNING - integration_test -   Consecutive MPC failures: 2/50
2025-12-01 16:49:10,896 - INFO - integration_test - Step 82: Computed 10 numeric contouring constraints for visualization (s=21.203)
2025-12-01 16:49:10,896 - DEBUG - integration_test - Step 82: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:10,896 - INFO - integration_test - === Applying control at step 82 ===
2025-12-01 16:49:10,896 - INFO - integration_test -   Control dict from planner: {'a': 9.737994775904264e-09, 'w': 0.8000000041277663}
2025-12-01 16:49:10,896 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:10,896 - INFO - integration_test -   Planner output success: False
2025-12-01 16:49:10,898 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:10,898 - INFO - integration_test - Step 82 completed in 11.757s
2025-12-01 16:49:10,922 - INFO - integration_test - Step 83 (contouring until path end)
2025-12-01 16:49:10,923 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[20.89077516  3.70346066  0.21534027  3.00000003 21.50286896]
2025-12-01 16:49:10,924 - INFO - integration_test - Step 83: Re-initialized spline from 21.5029 to 21.2029 (vehicle at (20.89, 3.70), closest path point at (20.20, 4.73), distance=1.240m)
2025-12-01 16:49:10,924 - DEBUG - integration_test -   Set spline state to 21.2029
2025-12-01 16:49:10,924 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:10,937 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(20.891, 3.703), path_start=(0.000, 0.000), dist=21.217m
2025-12-01 16:49:10,938 - WARNING - integration_test - Could not update reference path at step 83: x and y must have the same length
2025-12-01 16:49:10,938 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2025-12-01 16:49:10,940 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:10,942 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:10,942 - INFO - integration_test - Warmstart k=0: x0=20.89077516377028 , y0=3.7034606646037527 , psi0=0.21534027123081556 , v0=3.0 , spline0=21.202868960420364 , a0=0.0 , w0=0.0
2025-12-01 16:49:10,942 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:10,943 - INFO - integration_test - Dyn residual k=0: pred=[21.183846286267343, 3.767564620474754, 0.21534027123081556, 3.0, 21.502868960420365], ws=[21.183846286267343, 3.767564620474754, 0.21534027123081545, 3.0, 26.670060534375434], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.167191573955069], res_norm=5.167e+00
2025-12-01 16:49:10,943 - INFO - integration_test - Dyn residual k=1: pred=[21.476917408764407, 3.831668576345755, 0.21534027123081545, 3.0, 26.970060534375435], ws=[21.476917408764407, 3.831668576345755, 0.21534027123081545, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.7139560102130744], res_norm=2.714e+00
2025-12-01 16:49:10,944 - INFO - integration_test - Dyn residual k=2: pred=[21.769988531261472, 3.8957725322167565, 0.21534027123081545, 3.0, 29.98401654458851], ws=[21.769988531261472, 3.8957725322167565, 0.21534027123081545, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:10,959 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:10,970 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:10,987 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:10,999 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,015 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,027 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,043 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,054 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,070 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,081 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,098 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,109 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,125 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,136 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,153 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,164 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,180 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,192 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,222 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:11,239 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:11,252 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,050 - WARNING - integration_test - Step 83: MPC solve failed
2025-12-01 16:49:13,050 - WARNING - integration_test -   Consecutive MPC failures: 3/50
2025-12-01 16:49:13,061 - INFO - integration_test - Step 83: Computed 10 numeric contouring constraints for visualization (s=21.203)
2025-12-01 16:49:13,062 - DEBUG - integration_test - Step 83: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:13,062 - INFO - integration_test - === Applying control at step 83 ===
2025-12-01 16:49:13,062 - INFO - integration_test -   Control dict from planner: {'a': 9.737994775904264e-09, 'w': 0.8000000041277663}
2025-12-01 16:49:13,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:13,062 - INFO - integration_test -   Planner output success: False
2025-12-01 16:49:13,063 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:13,063 - INFO - integration_test - Step 83 completed in 2.141s
2025-12-01 16:49:13,089 - INFO - integration_test - Step 84 (contouring until path end)
2025-12-01 16:49:13,091 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[21.18097099  3.77921286  0.29534027  3.00000003 21.50286896]
2025-12-01 16:49:13,091 - INFO - integration_test - Step 84: Re-initialized spline from 21.5029 to 21.8087 (vehicle at (21.18, 3.78), closest path point at (20.78, 4.94), distance=1.230m)
2025-12-01 16:49:13,092 - DEBUG - integration_test -   Set spline state to 21.8087
2025-12-01 16:49:13,092 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:13,106 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(21.181, 3.779), path_start=(0.000, 0.000), dist=21.515m
2025-12-01 16:49:13,107 - WARNING - integration_test - Could not update reference path at step 84: x and y must have the same length
2025-12-01 16:49:13,107 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2025-12-01 16:49:13,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:13,110 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:13,110 - INFO - integration_test - Warmstart k=0: x0=21.180970992942445 , y0=3.779212860695963 , psi0=0.29534027164359217 , v0=3.0 , spline0=21.808665216432374 , a0=0.0 , w0=0.0
2025-12-01 16:49:13,110 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:13,111 - INFO - integration_test - Dyn residual k=0: pred=[21.467981939863854, 3.8665324824729512, 0.29534027164359217, 3.0, 22.108665216432374], ws=[21.467981939863854, 3.8665324824729512, 0.295340271643592, 3.0, 27.39716066881291], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -5.288495452380534], res_norm=5.288e+00
2025-12-01 16:49:13,112 - INFO - integration_test - Dyn residual k=1: pred=[21.754992886785264, 3.9538521042499393, 0.295340271643592, 3.0, 27.69716066881291], ws=[21.754992886785264, 3.9538521042499393, 0.295340271643592, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.9868558757755999], res_norm=1.987e+00
2025-12-01 16:49:13,113 - INFO - integration_test - Dyn residual k=2: pred=[22.042003833706673, 4.041171726026928, 0.295340271643592, 3.0, 29.98401654458851], ws=[22.042003833706673, 4.041171726026928, 0.295340271643592, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:13,128 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,139 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,156 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,168 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,185 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,197 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,214 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,225 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,241 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,253 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,269 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,280 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,297 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,308 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,324 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,336 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,352 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,364 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,381 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,394 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:13,411 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:13,425 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,610 - WARNING - integration_test - Step 84: MPC solve failed
2025-12-01 16:49:26,610 - WARNING - integration_test -   Consecutive MPC failures: 4/50
2025-12-01 16:49:26,621 - INFO - integration_test - Step 84: Computed 10 numeric contouring constraints for visualization (s=21.809)
2025-12-01 16:49:26,622 - DEBUG - integration_test - Step 84: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:26,622 - INFO - integration_test - === Applying control at step 84 ===
2025-12-01 16:49:26,622 - INFO - integration_test -   Control dict from planner: {'a': 9.737994775904264e-09, 'w': 0.8000000041277663}
2025-12-01 16:49:26,622 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:26,622 - INFO - integration_test -   Planner output success: False
2025-12-01 16:49:26,623 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:26,624 - INFO - integration_test - Step 84 completed in 13.533s
2025-12-01 16:49:26,648 - INFO - integration_test - Step 85 (contouring until path end)
2025-12-01 16:49:26,648 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[21.46418498  3.87791369  0.37534027  3.00000003 22.10866522]
2025-12-01 16:49:26,648 - INFO - integration_test - Step 85: Re-initialized spline from 22.1087 to 22.4145 (vehicle at (21.46, 3.88), closest path point at (20.96, 5.01), distance=1.243m)
2025-12-01 16:49:26,649 - DEBUG - integration_test -   Set spline state to 22.4145
2025-12-01 16:49:26,649 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:26,663 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(21.464, 3.878), path_start=(0.000, 0.000), dist=21.812m
2025-12-01 16:49:26,664 - WARNING - integration_test - Could not update reference path at step 85: x and y must have the same length
2025-12-01 16:49:26,664 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2025-12-01 16:49:26,666 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:26,667 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:26,667 - INFO - integration_test - Warmstart k=0: x0=21.464184977106154 , y0=3.8779136900452156 , psi0=0.3753402720563688 , v0=3.0 , spline0=22.414461472444383 , a0=0.0 , w0=0.0
2025-12-01 16:49:26,667 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:26,668 - INFO - integration_test - Dyn residual k=0: pred=[21.743299857827736, 3.987890430130456, 0.3753402720563688, 3.0, 22.714461472444384], ws=[21.743299857827736, 3.987890430130456, 0.375340272056369, 3.0, 28.03887025895392], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.324408786509537], res_norm=5.324e+00
2025-12-01 16:49:26,669 - INFO - integration_test - Dyn residual k=1: pred=[22.02241473854932, 4.097867170215696, 0.375340272056369, 3.0, 28.33887025895392], ws=[22.02241473854932, 4.097867170215696, 0.375340272056369, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.3451462856345877], res_norm=1.345e+00
2025-12-01 16:49:26,670 - INFO - integration_test - Dyn residual k=2: pred=[22.3015296192709, 4.2078439103009355, 0.375340272056369, 3.0, 29.98401654458851], ws=[22.3015296192709, 4.2078439103009355, 0.375340272056369, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:26,685 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,697 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,713 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,725 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,741 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,752 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,768 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,780 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,796 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,808 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,824 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,835 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,851 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,862 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,878 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,890 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,907 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,919 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,936 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,949 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:26,966 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:26,980 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,345 - INFO - integration_test - Step 85: MPC solve successful
2025-12-01 16:49:27,359 - INFO - integration_test - Step 85: Computed 10 numeric contouring constraints for visualization (s=22.414)
2025-12-01 16:49:27,359 - DEBUG - integration_test - Step 85: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:27,360 - INFO - integration_test - === Applying control at step 85 ===
2025-12-01 16:49:27,360 - INFO - integration_test -   Control dict from planner: {'a': -2.000000010769997, 'w': 0.8000000034007984}
2025-12-01 16:49:27,360 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:27,360 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:27,361 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:27,361 - INFO - integration_test - Step 85 completed in 0.714s
2025-12-01 16:49:27,388 - INFO - integration_test - Step 86 (contouring until path end)
2025-12-01 16:49:27,389 - DEBUG - integration_test - Syncing planner state at step 86: vehicle_state=[21.72951195  3.9947759   0.45534027  2.80000003 22.69446148]
2025-12-01 16:49:27,389 - INFO - integration_test - Step 86: Re-initialized spline from 22.6945 to 22.4145 (vehicle at (21.73, 3.99), closest path point at (20.96, 5.01), distance=1.276m)
2025-12-01 16:49:27,389 - DEBUG - integration_test -   Set spline state to 22.4145
2025-12-01 16:49:27,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:27,405 - DEBUG - integration_test - Step 86: Checking path alignment: vehicle=(21.730, 3.995), path_start=(0.000, 0.000), dist=22.094m
2025-12-01 16:49:27,405 - WARNING - integration_test - Could not update reference path at step 86: x and y must have the same length
2025-12-01 16:49:27,405 - INFO - integration_test - === Calling planner.solve_mpc() at step 86 ===
2025-12-01 16:49:27,408 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:27,409 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:27,409 - INFO - integration_test - Warmstart k=0: x0=21.729511947862257 , y0=3.9947759023489517 , psi0=0.4553402723964486 , v0=2.800000028469625 , spline0=22.414461472444383 , a0=0.0 , w0=0.0
2025-12-01 16:49:27,409 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:27,410 - INFO - integration_test - Dyn residual k=0: pred=[21.980983153418684, 4.117910927302438, 0.4553402723964486, 2.800000028469625, 22.694461475291344], ws=[21.980983153418684, 4.117910927302438, 0.4553402723964486, 2.800000028469625, 28.01887026180088], res=[0.0, 0.0, 0.0, 0.0, -5.324408786509537], res_norm=5.324e+00
2025-12-01 16:49:27,411 - INFO - integration_test - Dyn residual k=1: pred=[22.23245435897511, 4.241045952255924, 0.4553402723964486, 2.800000028469625, 28.298870264647842], ws=[22.23245435897511, 4.241045952255924, 0.4553402723964486, 2.800000028469625, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.3851462799406669], res_norm=1.385e+00
2025-12-01 16:49:27,412 - INFO - integration_test - Dyn residual k=2: pred=[22.48392556453154, 4.36418097720941, 0.4553402723964486, 2.800000028469625, 29.96401654743547], ws=[22.48392556453154, 4.36418097720941, 0.4553402723964486, 2.800000028469625, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000284696114], res_norm=2.800e-01
2025-12-01 16:49:27,426 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,438 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,454 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,466 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,482 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,494 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,511 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,523 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,539 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,550 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,566 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,577 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,594 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,606 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,622 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,633 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,649 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,660 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,677 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,689 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:27,717 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:27,999 - INFO - integration_test - Step 86: MPC solve successful
2025-12-01 16:49:28,016 - INFO - integration_test - Step 86: Computed 10 numeric contouring constraints for visualization (s=22.414)
2025-12-01 16:49:28,016 - DEBUG - integration_test - Step 86: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:28,016 - INFO - integration_test - === Applying control at step 86 ===
2025-12-01 16:49:28,017 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000093536436, 'w': 0.8000000053292586}
2025-12-01 16:49:28,017 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:28,017 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:28,018 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:28,018 - INFO - integration_test - Step 86 completed in 0.629s
2025-12-01 16:49:28,041 - INFO - integration_test - Step 87 (contouring until path end)
2025-12-01 16:49:28,042 - DEBUG - integration_test - Syncing planner state at step 87: vehicle_state=[21.96705987  4.12296379  0.53534027  2.60000003 22.67446148]
2025-12-01 16:49:28,043 - INFO - integration_test - Step 87: Re-initialized spline from 22.6745 to 23.0203 (vehicle at (21.97, 4.12), closest path point at (21.52, 5.26), distance=1.222m)
2025-12-01 16:49:28,043 - DEBUG - integration_test -   Set spline state to 23.0203
2025-12-01 16:49:28,044 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:28,058 - DEBUG - integration_test - Step 87: Checking path alignment: vehicle=(21.967, 4.123), path_start=(0.000, 0.000), dist=22.351m
2025-12-01 16:49:28,058 - WARNING - integration_test - Could not update reference path at step 87: x and y must have the same length
2025-12-01 16:49:28,058 - INFO - integration_test - === Calling planner.solve_mpc() at step 87 ===
2025-12-01 16:49:28,061 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:28,062 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:28,062 - INFO - integration_test - Warmstart k=0: x0=21.96705986826475 , y0=4.122963792408314 , psi0=0.5353402729293745 , v0=2.6000000275342607 , spline0=23.020257728456393 , a0=0.0 , w0=0.0
2025-12-01 16:49:28,062 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:28,063 - INFO - integration_test - Dyn residual k=0: pred=[22.190684595169344, 4.255598565181622, 0.5353402729293745, 2.6000000275342607, 23.28025773120982], ws=[22.190684595169344, 4.255598565181622, 0.5353402729293744, 2.6000000275342607, 28.709487840464504], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.429230109254686], res_norm=5.429e+00
2025-12-01 16:49:28,064 - INFO - integration_test - Dyn residual k=1: pred=[22.414309322073937, 4.388233337954931, 0.5353402729293744, 2.6000000275342607, 28.96948784321793], ws=[22.414309322073937, 4.388233337954931, 0.5353402729293744, 2.6000000275342607, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.714528701370579], res_norm=7.145e-01
2025-12-01 16:49:28,065 - INFO - integration_test - Dyn residual k=2: pred=[22.63793404897853, 4.52086811072824, 0.5353402729293744, 2.6000000275342607, 29.944016547341935], ws=[22.63793404897853, 4.52086811072824, 0.5353402729293744, 2.6000000275342607, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2600000027534257], res_norm=2.600e-01
2025-12-01 16:49:28,080 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,091 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,108 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,120 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,136 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,148 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,164 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,175 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,191 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,203 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,219 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,230 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,247 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,259 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,287 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,306 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,316 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,332 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,343 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,359 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,371 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,719 - INFO - integration_test - Step 87: MPC solve successful
2025-12-01 16:49:28,733 - INFO - integration_test - Step 87: Computed 10 numeric contouring constraints for visualization (s=23.020)
2025-12-01 16:49:28,733 - DEBUG - integration_test - Step 87: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:28,733 - INFO - integration_test - === Applying control at step 87 ===
2025-12-01 16:49:28,733 - INFO - integration_test -   Control dict from planner: {'a': -1.9999998446132938, 'w': 0.7999998201363312}
2025-12-01 16:49:28,733 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:28,733 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:28,734 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:28,735 - INFO - integration_test - Step 87 completed in 0.693s
2025-12-01 16:49:28,757 - INFO - integration_test - Step 88 (contouring until path end)
2025-12-01 16:49:28,758 - DEBUG - integration_test - Syncing planner state at step 88: vehicle_state=[22.17682828  4.25884576  0.61534025  2.40000004 23.26025773]
2025-12-01 16:49:28,759 - INFO - integration_test - Step 88: Re-initialized spline from 23.2603 to 23.0203 (vehicle at (22.18, 4.26), closest path point at (21.52, 5.26), distance=1.198m)
2025-12-01 16:49:28,759 - DEBUG - integration_test -   Set spline state to 23.0203
2025-12-01 16:49:28,759 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:28,773 - DEBUG - integration_test - Step 88: Checking path alignment: vehicle=(22.177, 4.259), path_start=(0.000, 0.000), dist=22.582m
2025-12-01 16:49:28,774 - WARNING - integration_test - Could not update reference path at step 88: x and y must have the same length
2025-12-01 16:49:28,774 - INFO - integration_test - === Calling planner.solve_mpc() at step 88 ===
2025-12-01 16:49:28,776 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:28,777 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:28,778 - INFO - integration_test - Warmstart k=0: x0=22.176828276521306 , y0=4.258845763247541 , psi0=0.6153402549430076 , v0=2.4000000430729314 , spline0=23.020257728456393 , a0=0.0 , w0=0.0
2025-12-01 16:49:28,778 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:28,778 - INFO - integration_test - Dyn residual k=0: pred=[22.37280678083098, 4.39738250175413, 0.6153402549430076, 2.4000000430729314, 23.260257732763687], ws=[22.37280678083098, 4.39738250175413, 0.6153402549430078, 2.4000000430729314, 28.68948784201838], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.429230109254693], res_norm=5.429e+00
2025-12-01 16:49:28,779 - INFO - integration_test - Dyn residual k=1: pred=[22.568785285140656, 4.53591924026072, 0.6153402549430078, 2.4000000430729314, 28.929487846325674], ws=[22.568785285140656, 4.53591924026072, 0.6153402549430078, 2.4000000430729314, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7545286982628348], res_norm=7.545e-01
2025-12-01 16:49:28,780 - INFO - integration_test - Dyn residual k=2: pred=[22.76476378945033, 4.674455978767309, 0.6153402549430078, 2.4000000430729314, 29.924016548895803], ws=[22.76476378945033, 4.674455978767309, 0.6153402549430078, 2.4000000430729314, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2400000043072943], res_norm=2.400e-01
2025-12-01 16:49:28,796 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,807 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,824 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,835 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,851 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,862 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,890 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,907 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,918 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,934 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,945 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,961 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:28,973 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:28,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,002 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,018 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,030 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,046 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,057 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,073 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,085 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,458 - INFO - integration_test - Step 88: MPC solve successful
2025-12-01 16:49:29,472 - INFO - integration_test - Step 88: Computed 10 numeric contouring constraints for visualization (s=23.020)
2025-12-01 16:49:29,472 - DEBUG - integration_test - Step 88: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:29,472 - INFO - integration_test - === Applying control at step 88 ===
2025-12-01 16:49:29,472 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000196861496, 'w': 0.8000000093998968}
2025-12-01 16:49:29,472 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:29,473 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:29,473 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:29,474 - INFO - integration_test - Step 88 completed in 0.716s
2025-12-01 16:49:29,501 - INFO - integration_test - Step 89 (contouring until path end)
2025-12-01 16:49:29,502 - DEBUG - integration_test - Syncing planner state at step 89: vehicle_state=[22.35921424  4.39887139  0.69534026  2.20000004 23.24025773]
2025-12-01 16:49:29,502 - INFO - integration_test - Step 89: Re-initialized spline from 23.2403 to 23.6261 (vehicle at (22.36, 4.40), closest path point at (22.06, 5.53), distance=1.167m)
2025-12-01 16:49:29,502 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:49:29,503 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:29,517 - DEBUG - integration_test - Step 89: Checking path alignment: vehicle=(22.359, 4.399), path_start=(0.000, 0.000), dist=22.788m
2025-12-01 16:49:29,517 - WARNING - integration_test - Could not update reference path at step 89: x and y must have the same length
2025-12-01 16:49:29,517 - INFO - integration_test - === Calling planner.solve_mpc() at step 89 ===
2025-12-01 16:49:29,520 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:29,521 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:29,521 - INFO - integration_test - Warmstart k=0: x0=22.359214235190944 , y0=4.398871389373108 , psi0=0.6953402558829973 , v0=2.2000000411043166 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:49:29,521 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:29,522 - INFO - integration_test - Dyn residual k=0: pred=[22.528138106080082, 4.5398136742006905, 0.6953402558829973, 2.2000000411043166, 23.846053988578838], ws=[22.528138106080082, 4.5398136742006905, 0.6953402558829973, 2.2000000411043166, 29.372266521766278], res=[0.0, 0.0, 0.0, 0.0, -5.52621253318744], res_norm=5.526e+00
2025-12-01 16:49:29,523 - INFO - integration_test - Dyn residual k=1: pred=[22.69706197696922, 4.680755959028273, 0.6953402558829973, 2.2000000411043166, 29.59226652587671], ws=[22.69706197696922, 4.680755959028273, 0.6953402558829973, 2.2000000411043166, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.09175001871179944], res_norm=9.175e-02
2025-12-01 16:49:29,523 - INFO - integration_test - Dyn residual k=2: pred=[22.865985847858358, 4.821698243855856, 0.6953402558829973, 2.2000000411043166, 29.90401654869894], ws=[22.865985847858358, 4.821698243855856, 0.6953402558829973, 2.2000000411043166, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.22000000411043175], res_norm=2.200e-01
2025-12-01 16:49:29,538 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,550 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,566 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,578 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,595 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,606 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,622 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,634 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,649 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,661 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,678 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,690 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,717 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,733 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,745 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,761 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,772 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,788 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,800 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:29,816 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:29,827 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,145 - INFO - integration_test - Step 89: MPC solve successful
2025-12-01 16:49:30,159 - INFO - integration_test - Step 89: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:49:30,159 - DEBUG - integration_test - Step 89: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:30,159 - INFO - integration_test - === Applying control at step 89 ===
2025-12-01 16:49:30,159 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000148745873, 'w': 0.8000000080839857}
2025-12-01 16:49:30,159 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:30,159 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:30,161 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:30,161 - INFO - integration_test - Step 89 completed in 0.660s
2025-12-01 16:49:30,188 - INFO - integration_test - Step 90 (contouring until path end)
2025-12-01 16:49:30,189 - DEBUG - integration_test - Syncing planner state at step 90: vehicle_state=[22.52964792  4.5532222   0.77534026  2.40000004 23.86605399]
2025-12-01 16:49:30,190 - INFO - integration_test - Step 90: Re-initialized spline from 23.8661 to 23.6261 (vehicle at (22.53, 4.55), closest path point at (22.06, 5.53), distance=1.082m)
2025-12-01 16:49:30,190 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:49:30,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:30,204 - DEBUG - integration_test - Step 90: Checking path alignment: vehicle=(22.530, 4.553), path_start=(0.000, 0.000), dist=22.985m
2025-12-01 16:49:30,205 - WARNING - integration_test - Could not update reference path at step 90: x and y must have the same length
2025-12-01 16:49:30,205 - INFO - integration_test - === Calling planner.solve_mpc() at step 90 ===
2025-12-01 16:49:30,207 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:30,208 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:30,208 - INFO - integration_test - Warmstart k=0: x0=22.529647921942022 , y0=4.553222198574637 , psi0=0.7753402566913958 , v0=2.4000000425917754 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:49:30,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:30,209 - INFO - integration_test - Dyn residual k=0: pred=[22.70105182329455, 4.7212123906857775, 0.7753402566913958, 2.4000000425917754, 23.866053988727582], ws=[22.70105182329455, 4.7212123906857775, 0.7753402566913961, 2.4000000425917754, 29.392266521915033], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.526212533187451], res_norm=5.526e+00
2025-12-01 16:49:30,210 - INFO - integration_test - Dyn residual k=1: pred=[22.872455724647075, 4.889202582796918, 0.7753402566913961, 2.4000000425917754, 29.63226652617421], ws=[22.872455724647075, 4.889202582796918, 0.7753402566913961, 2.4000000425917754, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.0517500184142996], res_norm=5.175e-02
2025-12-01 16:49:30,211 - INFO - integration_test - Dyn residual k=2: pred=[23.043859625999602, 5.057192774908059, 0.7753402566913961, 2.4000000425917754, 29.924016548847685], ws=[23.043859625999602, 5.057192774908059, 0.7753402566913961, 2.4000000425917754, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.24000000425917634], res_norm=2.400e-01
2025-12-01 16:49:30,226 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,237 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,253 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,265 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,282 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,294 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,311 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,323 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,339 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,350 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,366 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,378 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,394 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,406 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,433 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,450 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,461 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,478 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,490 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,506 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,517 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,812 - INFO - integration_test - Step 90: MPC solve successful
2025-12-01 16:49:30,828 - INFO - integration_test - Step 90: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:49:30,828 - DEBUG - integration_test - Step 90: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:30,828 - INFO - integration_test - === Applying control at step 90 ===
2025-12-01 16:49:30,828 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000150258246, 'w': 0.8000000087989361}
2025-12-01 16:49:30,828 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:30,828 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:30,829 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:30,830 - INFO - integration_test - Step 90 completed in 0.641s
2025-12-01 16:49:30,853 - INFO - integration_test - Step 91 (contouring until path end)
2025-12-01 16:49:30,855 - DEBUG - integration_test - Syncing planner state at step 91: vehicle_state=[22.70091037  4.7352548   0.85534026  2.60000004 23.88605399]
2025-12-01 16:49:30,856 - INFO - integration_test - Step 91: Re-initialized spline from 23.8861 to 23.6261 (vehicle at (22.70, 4.74), closest path point at (22.06, 5.53), distance=1.020m)
2025-12-01 16:49:30,856 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:49:30,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:30,871 - DEBUG - integration_test - Step 91: Checking path alignment: vehicle=(22.701, 4.735), path_start=(0.000, 0.000), dist=23.190m
2025-12-01 16:49:30,871 - WARNING - integration_test - Could not update reference path at step 91: x and y must have the same length
2025-12-01 16:49:30,871 - INFO - integration_test - === Calling planner.solve_mpc() at step 91 ===
2025-12-01 16:49:30,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:30,875 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:30,875 - INFO - integration_test - Warmstart k=0: x0=22.70091037262881 , y0=4.7352548013480185 , psi0=0.8553402575712894 , v0=2.6000000440943576 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:49:30,875 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:30,876 - INFO - integration_test - Dyn residual k=0: pred=[22.871460423576515, 4.931501285175481, 0.8553402575712894, 2.6000000440943576, 23.88605398887784], ws=[22.871460423576515, 4.931501285175481, 0.8553402575712896, 2.6000000440943576, 29.412266522065277], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.5262125331874365], res_norm=5.526e+00
2025-12-01 16:49:30,876 - INFO - integration_test - Dyn residual k=1: pred=[23.04201047452422, 5.127747769002944, 0.8553402575712896, 2.6000000440943576, 29.67226652647471], ws=[23.04201047452422, 5.127747769002944, 0.8553402575712896, 2.6000000440943576, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.011750018113797722], res_norm=1.175e-02
2025-12-01 16:49:30,877 - INFO - integration_test - Dyn residual k=2: pred=[23.212560525471922, 5.323994252830407, 0.8553402575712896, 2.6000000440943576, 29.944016548997944], ws=[23.212560525471922, 5.323994252830407, 0.8553402575712896, 2.6000000440943576, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2600000044094344], res_norm=2.600e-01
2025-12-01 16:49:30,893 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,905 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,922 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,933 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,950 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,962 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:30,979 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:30,991 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,008 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,019 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,035 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,047 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,063 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,074 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,090 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,102 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,118 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,130 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,146 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,157 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,173 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,184 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,491 - INFO - integration_test - Step 91: MPC solve successful
2025-12-01 16:49:31,507 - INFO - integration_test - Step 91: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:49:31,507 - DEBUG - integration_test - Step 91: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:31,507 - INFO - integration_test - === Applying control at step 91 ===
2025-12-01 16:49:31,507 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199289607, 'w': 0.800000009986283}
2025-12-01 16:49:31,507 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:31,507 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:31,508 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:31,509 - INFO - integration_test - Step 91 completed in 0.654s
2025-12-01 16:49:31,532 - INFO - integration_test - Step 92 (contouring until path end)
2025-12-01 16:49:31,534 - DEBUG - integration_test - Syncing planner state at step 92: vehicle_state=[22.86957973  4.94599587  0.93534026  2.80000005 23.90605399]
2025-12-01 16:49:31,534 - INFO - integration_test - Step 92: Re-initialized spline from 23.9061 to 23.6261 (vehicle at (22.87, 4.95), closest path point at (22.06, 5.53), distance=0.999m)
2025-12-01 16:49:31,534 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:49:31,535 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:31,549 - DEBUG - integration_test - Step 92: Checking path alignment: vehicle=(22.870, 4.946), path_start=(0.000, 0.000), dist=23.398m
2025-12-01 16:49:31,550 - WARNING - integration_test - Could not update reference path at step 92: x and y must have the same length
2025-12-01 16:49:31,550 - INFO - integration_test - === Calling planner.solve_mpc() at step 92 ===
2025-12-01 16:49:31,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:31,554 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:31,554 - INFO - integration_test - Warmstart k=0: x0=22.869579727796562 , y0=4.94599587279488 , psi0=0.9353402585699178 , v0=2.800000046087254 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:49:31,554 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:31,555 - INFO - integration_test - Dyn residual k=0: pred=[23.035772224208415, 5.171340179839196, 0.9353402585699178, 2.800000046087254, 23.906053989077133], ws=[23.035772224208415, 5.171340179839196, 0.9353402585699175, 2.800000046087254, 29.432266522264566], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.526212533187433], res_norm=5.526e+00
2025-12-01 16:49:31,556 - INFO - integration_test - Dyn residual k=1: pred=[23.201964720620268, 5.396684486883512, 0.9353402585699175, 2.800000046087254, 29.712266526873293], ws=[23.201964720620268, 5.396684486883512, 0.9353402585699175, 2.800000046087254, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.028249982284783925], res_norm=2.825e-02
2025-12-01 16:49:31,557 - INFO - integration_test - Dyn residual k=2: pred=[23.36815721703212, 5.622028793927828, 0.9353402585699175, 2.800000046087254, 29.964016549197236], ws=[23.36815721703212, 5.622028793927828, 0.9353402585699175, 2.800000046087254, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.280000004608727], res_norm=2.800e-01
2025-12-01 16:49:31,572 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,584 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,601 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,613 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,629 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,641 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,669 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,685 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,698 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,714 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,726 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,742 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,754 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,770 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,782 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,798 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,810 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,826 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,838 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:31,854 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:31,865 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,165 - INFO - integration_test - Step 92: MPC solve successful
2025-12-01 16:49:32,179 - INFO - integration_test - Step 92: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:49:32,180 - DEBUG - integration_test - Step 92: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:32,180 - INFO - integration_test - === Applying control at step 92 ===
2025-12-01 16:49:32,180 - INFO - integration_test -   Control dict from planner: {'a': 1.9999998415547444, 'w': 0.800000005978577}
2025-12-01 16:49:32,180 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:32,180 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:32,181 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:32,181 - INFO - integration_test - Step 92 completed in 0.648s
2025-12-01 16:49:32,205 - INFO - integration_test - Step 93 (contouring until path end)
2025-12-01 16:49:32,208 - DEBUG - integration_test - Syncing planner state at step 93: vehicle_state=[23.03208306  5.18609553  1.01534026  3.00000003 23.92605399]
2025-12-01 16:49:32,208 - INFO - integration_test - Step 93: Re-initialized spline from 23.9261 to 24.2319 (vehicle at (23.03, 5.19), closest path point at (22.90, 6.00), distance=0.825m)
2025-12-01 16:49:32,209 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 16:49:32,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:32,223 - DEBUG - integration_test - Step 93: Checking path alignment: vehicle=(23.032, 5.186), path_start=(0.000, 0.000), dist=23.609m
2025-12-01 16:49:32,224 - WARNING - integration_test - Could not update reference path at step 93: x and y must have the same length
2025-12-01 16:49:32,224 - INFO - integration_test - === Calling planner.solve_mpc() at step 93 ===
2025-12-01 16:49:32,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:32,227 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:32,228 - INFO - integration_test - Warmstart k=0: x0=23.032083056809274 , y0=5.1860955326560365 , psi0=1.0153402591677754 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 16:49:32,228 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:32,228 - INFO - integration_test - Dyn residual k=0: pred=[23.19028231404891, 5.440993541688722, 1.0153402591677754, 3.0, 24.531850240480416], ws=[23.19028231404891, 5.440993541688722, 1.0153402591677754, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 16:49:32,229 - INFO - integration_test - Dyn residual k=1: pred=[23.34848157128855, 5.695891550721408, 1.0153402591677754, 3.0, 29.98401654458851], ws=[23.34848157128855, 5.695891550721408, 1.0153402591677754, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:32,230 - INFO - integration_test - Dyn residual k=2: pred=[23.506680828528186, 5.950789559754093, 1.0153402591677754, 3.0, 29.98401654458851], ws=[23.506680828528186, 5.950789559754093, 1.0153402591677754, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:32,245 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,257 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,273 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,285 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,302 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,314 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,330 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,342 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,358 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,370 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,386 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,399 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,415 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,427 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,443 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,455 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,471 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,483 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,500 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,512 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,528 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,540 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,889 - INFO - integration_test - Step 93: MPC solve successful
2025-12-01 16:49:32,903 - INFO - integration_test - Step 93: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 16:49:32,904 - DEBUG - integration_test - Step 93: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:32,904 - INFO - integration_test - === Applying control at step 93 ===
2025-12-01 16:49:32,904 - INFO - integration_test -   Control dict from planner: {'a': -1.6255113375763909e-09, 'w': 0.8000000097502613}
2025-12-01 16:49:32,904 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:32,904 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:32,905 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:32,905 - INFO - integration_test - Step 93 completed in 0.697s
2025-12-01 16:49:32,928 - INFO - integration_test - Step 94 (contouring until path end)
2025-12-01 16:49:32,931 - DEBUG - integration_test - Syncing planner state at step 94: vehicle_state=[23.17992314  5.44704634  1.09534026  3.00000003 24.53185024]
2025-12-01 16:49:32,932 - INFO - integration_test - Step 94: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (23.18, 5.45), closest path point at (22.90, 6.00), distance=0.621m)
2025-12-01 16:49:32,932 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 16:49:32,932 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:32,946 - DEBUG - integration_test - Step 94: Checking path alignment: vehicle=(23.180, 5.447), path_start=(0.000, 0.000), dist=23.811m
2025-12-01 16:49:32,946 - WARNING - integration_test - Could not update reference path at step 94: x and y must have the same length
2025-12-01 16:49:32,947 - INFO - integration_test - === Calling planner.solve_mpc() at step 94 ===
2025-12-01 16:49:32,949 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:32,950 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:32,950 - INFO - integration_test - Warmstart k=0: x0=23.179923141929212 , y0=5.4470463399688995 , psi0=1.0953402601428015 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 16:49:32,950 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:32,951 - INFO - integration_test - Dyn residual k=0: pred=[23.317246334836227, 5.7137715556681705, 1.0953402601428015, 3.0, 24.531850240480416], ws=[23.317246334836227, 5.7137715556681705, 1.0953402601428017, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 16:49:32,952 - INFO - integration_test - Dyn residual k=1: pred=[23.454569527743242, 5.9804967713674415, 1.0953402601428017, 3.0, 29.98401654458851], ws=[23.454569527743242, 5.980496771367442, 1.0953402601428017, 3.0, 29.68401654458851], res=[0.0, -8.881784197001252e-16, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:32,953 - INFO - integration_test - Dyn residual k=2: pred=[23.591892720650257, 6.247221987066714, 1.0953402601428017, 3.0, 29.98401654458851], ws=[23.591892720650257, 6.247221987066714, 1.0953402601428017, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:32,968 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:32,979 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:32,996 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,008 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,025 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,036 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,053 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,064 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,080 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,092 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,109 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,121 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,148 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,164 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,175 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,192 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,204 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,220 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,232 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,247 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,259 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,619 - INFO - integration_test - Step 94: MPC solve successful
2025-12-01 16:49:33,633 - INFO - integration_test - Step 94: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 16:49:33,634 - DEBUG - integration_test - Step 94: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:33,634 - INFO - integration_test - === Applying control at step 94 ===
2025-12-01 16:49:33,634 - INFO - integration_test -   Control dict from planner: {'a': -5.413436664655544e-10, 'w': 0.5656138046284228}
2025-12-01 16:49:33,634 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:33,634 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:33,635 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:33,635 - INFO - integration_test - Step 94 completed in 0.705s
2025-12-01 16:49:33,659 - INFO - integration_test - Step 95 (contouring until path end)
2025-12-01 16:49:33,660 - DEBUG - integration_test - Syncing planner state at step 95: vehicle_state=[23.30963197  5.71751192  1.15190164  3.00000003 24.53185024]
2025-12-01 16:49:33,660 - INFO - integration_test - Step 95: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (23.31, 5.72), closest path point at (22.90, 6.00), distance=0.500m)
2025-12-01 16:49:33,661 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 16:49:33,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:33,675 - DEBUG - integration_test - Step 95: Checking path alignment: vehicle=(23.310, 5.718), path_start=(0.000, 0.000), dist=24.001m
2025-12-01 16:49:33,676 - WARNING - integration_test - Could not update reference path at step 95: x and y must have the same length
2025-12-01 16:49:33,676 - INFO - integration_test - === Calling planner.solve_mpc() at step 95 ===
2025-12-01 16:49:33,678 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:33,679 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:33,679 - INFO - integration_test - Warmstart k=0: x0=23.30963196540296 , y0=5.717511924083935 , psi0=1.1519016406056437 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 16:49:33,679 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:33,680 - INFO - integration_test - Dyn residual k=0: pred=[23.43165725171236, 5.991573649797521, 1.1519016406056437, 3.0, 24.531850240480416], ws=[23.43165725171236, 5.991573649797521, 1.1519016406056437, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 16:49:33,681 - INFO - integration_test - Dyn residual k=1: pred=[23.553682538021757, 6.265635375511108, 1.1519016406056437, 3.0, 29.98401654458851], ws=[23.553682538021757, 6.265635375511108, 1.1519016406056437, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:33,682 - INFO - integration_test - Dyn residual k=2: pred=[23.675707824331155, 6.539697101224695, 1.1519016406056437, 3.0, 29.98401654458851], ws=[23.675707824331155, 6.539697101224695, 1.1519016406056437, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:33,697 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,709 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,726 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,737 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,754 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,765 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,781 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,793 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,810 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,821 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,837 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,849 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,865 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,877 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,893 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,905 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,921 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,932 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,949 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,960 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:33,976 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:33,988 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,313 - INFO - integration_test - Step 95: MPC solve successful
2025-12-01 16:49:34,328 - INFO - integration_test - Step 95: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 16:49:34,329 - DEBUG - integration_test - Step 95: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:34,329 - INFO - integration_test - === Applying control at step 95 ===
2025-12-01 16:49:34,329 - INFO - integration_test -   Control dict from planner: {'a': -1.8012122594561072e-10, 'w': 0.4401866711665923}
2025-12-01 16:49:34,329 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:34,329 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:34,330 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:34,330 - INFO - integration_test - Step 95 completed in 0.670s
2025-12-01 16:49:34,355 - INFO - integration_test - Step 96 (contouring until path end)
2025-12-01 16:49:34,357 - DEBUG - integration_test - Syncing planner state at step 96: vehicle_state=[23.42558691  5.99417042  1.19592031  3.00000003 24.53185024]
2025-12-01 16:49:34,358 - DEBUG - integration_test - Step 96: Using propagated spline 24.5319 (close to path, dist=0.311m)
2025-12-01 16:49:34,358 - DEBUG - integration_test -   Set spline state to 24.5319
2025-12-01 16:49:34,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:34,373 - DEBUG - integration_test - Step 96: Checking path alignment: vehicle=(23.426, 5.994), path_start=(0.000, 0.000), dist=24.180m
2025-12-01 16:49:34,373 - WARNING - integration_test - Could not update reference path at step 96: x and y must have the same length
2025-12-01 16:49:34,373 - INFO - integration_test - === Calling planner.solve_mpc() at step 96 ===
2025-12-01 16:49:34,376 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:34,377 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:34,377 - INFO - integration_test - Warmstart k=0: x0=23.425586907908603 , y0=5.994170417464395 , psi0=1.1959203077223028 , v0=3.0 , spline0=24.53185024348122 , a0=0.0 , w0=0.0
2025-12-01 16:49:34,377 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:34,378 - INFO - integration_test - Dyn residual k=0: pred=[23.535434056230617, 6.273336325134943, 1.1959203077223028, 3.0, 24.83185024348122], ws=[23.535434056230617, 6.273336325134943, 1.1959203077223028, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.852166301107289], res_norm=4.852e+00
2025-12-01 16:49:34,379 - INFO - integration_test - Dyn residual k=1: pred=[23.64528120455263, 6.552502232805492, 1.1959203077223028, 3.0, 29.98401654458851], ws=[23.64528120455263, 6.552502232805492, 1.1959203077223028, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:34,379 - INFO - integration_test - Dyn residual k=2: pred=[23.755128352874646, 6.83166814047604, 1.1959203077223028, 3.0, 29.98401654458851], ws=[23.755128352874646, 6.83166814047604, 1.1959203077223028, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:34,397 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,409 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,426 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,438 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,456 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,468 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,485 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,497 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,514 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,526 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,542 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,553 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,570 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,582 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,598 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,610 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,627 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,638 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,656 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,668 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,683 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:34,695 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:34,996 - INFO - integration_test - Step 96: MPC solve successful
2025-12-01 16:49:35,010 - INFO - integration_test - Step 96: Computed 10 numeric contouring constraints for visualization (s=24.532)
2025-12-01 16:49:35,011 - DEBUG - integration_test - Step 96: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:35,011 - INFO - integration_test - === Applying control at step 96 ===
2025-12-01 16:49:35,011 - INFO - integration_test -   Control dict from planner: {'a': -6.150573641175944e-11, 'w': -0.8000000099204415}
2025-12-01 16:49:35,011 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:35,011 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:35,012 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:35,013 - INFO - integration_test - Step 96 completed in 0.655s
2025-12-01 16:49:35,036 - INFO - integration_test - Step 97 (contouring until path end)
2025-12-01 16:49:35,037 - DEBUG - integration_test - Syncing planner state at step 97: vehicle_state=[23.54647761  6.26864711  1.11592031  3.00000003 24.83185025]
2025-12-01 16:49:35,037 - DEBUG - integration_test - Step 97: Using propagated spline 24.8319 (close to path, dist=0.168m)
2025-12-01 16:49:35,037 - DEBUG - integration_test -   Set spline state to 24.8319
2025-12-01 16:49:35,038 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:35,054 - DEBUG - integration_test - Step 97: Checking path alignment: vehicle=(23.546, 6.269), path_start=(0.000, 0.000), dist=24.367m
2025-12-01 16:49:35,054 - WARNING - integration_test - Could not update reference path at step 97: x and y must have the same length
2025-12-01 16:49:35,054 - INFO - integration_test - === Calling planner.solve_mpc() at step 97 ===
2025-12-01 16:49:35,057 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:35,058 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:35,058 - INFO - integration_test - Warmstart k=0: x0=23.546477608529795 , y0=6.268647107001808 , psi0=1.1159203067302588 , v0=3.0 , spline0=24.83185024648141 , a0=0.0 , w0=0.0
2025-12-01 16:49:35,058 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:35,059 - INFO - integration_test - Dyn residual k=0: pred=[23.678282891755124, 6.538141758737034, 1.1159203067302588, 3.0, 25.13185024648141], ws=[23.678282891755124, 6.538141758737034, 1.115920306730259, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.5521662981071], res_norm=4.552e+00
2025-12-01 16:49:35,060 - INFO - integration_test - Dyn residual k=1: pred=[23.810088174980454, 6.807636410472259, 1.115920306730259, 3.0, 29.98401654458851], ws=[23.810088174980454, 6.807636410472259, 1.115920306730259, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:35,061 - INFO - integration_test - Dyn residual k=2: pred=[23.941893458205783, 7.077131062207485, 1.115920306730259, 3.0, 29.98401654458851], ws=[23.941893458205783, 7.077131062207485, 1.115920306730259, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:35,076 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,088 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,105 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,117 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,134 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,146 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,162 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,173 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,190 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,203 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,219 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,231 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,247 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,259 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,287 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,316 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,333 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,344 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,361 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,372 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,710 - INFO - integration_test - Step 97: MPC solve successful
2025-12-01 16:49:35,724 - INFO - integration_test - Step 97: Computed 10 numeric contouring constraints for visualization (s=24.832)
2025-12-01 16:49:35,724 - DEBUG - integration_test - Step 97: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:35,724 - INFO - integration_test - === Applying control at step 97 ===
2025-12-01 16:49:35,724 - INFO - integration_test -   Control dict from planner: {'a': -1.6195946348145284e-11, 'w': -0.8000000099697495}
2025-12-01 16:49:35,724 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:35,724 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:35,725 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:35,726 - INFO - integration_test - Step 97 completed in 0.689s
2025-12-01 16:49:35,750 - INFO - integration_test - Step 98 (contouring until path end)
2025-12-01 16:49:35,751 - DEBUG - integration_test - Syncing planner state at step 98: vehicle_state=[23.68891639  6.532585    1.03592031  3.00000003 25.13185025]
2025-12-01 16:49:35,752 - DEBUG - integration_test - Step 98: Using propagated spline 25.1319 (close to path, dist=0.185m)
2025-12-01 16:49:35,752 - DEBUG - integration_test -   Set spline state to 25.1319
2025-12-01 16:49:35,752 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:35,766 - DEBUG - integration_test - Step 98: Checking path alignment: vehicle=(23.689, 6.533), path_start=(0.000, 0.000), dist=24.573m
2025-12-01 16:49:35,767 - WARNING - integration_test - Could not update reference path at step 98: x and y must have the same length
2025-12-01 16:49:35,767 - INFO - integration_test - === Calling planner.solve_mpc() at step 98 ===
2025-12-01 16:49:35,769 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:35,770 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:35,771 - INFO - integration_test - Warmstart k=0: x0=23.688916386093474 , y0=6.532584995987125 , psi0=1.0359203057332838 , v0=3.0 , spline0=25.131850249481435 , a0=0.0 , w0=0.0
2025-12-01 16:49:35,771 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:35,771 - INFO - integration_test - Dyn residual k=0: pred=[23.84183670018925, 6.790684545651297, 1.0359203057332838, 3.0, 25.431850249481435], ws=[23.84183670018925, 6.790684545651297, 1.035920305733284, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.252166295107074], res_norm=4.252e+00
2025-12-01 16:49:35,772 - INFO - integration_test - Dyn residual k=1: pred=[23.994757014285028, 7.048784095315471, 1.035920305733284, 3.0, 29.98401654458851], ws=[23.994757014285028, 7.048784095315471, 1.035920305733284, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:35,773 - INFO - integration_test - Dyn residual k=2: pred=[24.147677328380805, 7.306883644979644, 1.035920305733284, 3.0, 29.98401654458851], ws=[24.147677328380805, 7.306883644979644, 1.035920305733284, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:35,788 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,800 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,816 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,828 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,844 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,856 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,872 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,884 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,900 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,911 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,927 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,939 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,954 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,966 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:35,982 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:35,994 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,022 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,038 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,049 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,065 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,076 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,406 - INFO - integration_test - Step 98: MPC solve successful
2025-12-01 16:49:36,421 - INFO - integration_test - Step 98: Computed 10 numeric contouring constraints for visualization (s=25.132)
2025-12-01 16:49:36,421 - DEBUG - integration_test - Step 98: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:36,421 - INFO - integration_test - === Applying control at step 98 ===
2025-12-01 16:49:36,421 - INFO - integration_test -   Control dict from planner: {'a': -4.4853364636885466e-12, 'w': -0.8000000099724491}
2025-12-01 16:49:36,421 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:36,421 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:36,422 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:36,422 - INFO - integration_test - Step 98 completed in 0.671s
2025-12-01 16:49:36,444 - INFO - integration_test - Step 99 (contouring until path end)
2025-12-01 16:49:36,445 - DEBUG - integration_test - Syncing planner state at step 99: vehicle_state=[23.85199212  6.78429578  0.9559203   3.00000003 25.43185025]
2025-12-01 16:49:36,446 - DEBUG - integration_test - Step 99: Using propagated spline 25.4319 (close to path, dist=0.169m)
2025-12-01 16:49:36,446 - DEBUG - integration_test -   Set spline state to 25.4319
2025-12-01 16:49:36,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:36,460 - DEBUG - integration_test - Step 99: Checking path alignment: vehicle=(23.852, 6.784), path_start=(0.000, 0.000), dist=24.798m
2025-12-01 16:49:36,461 - WARNING - integration_test - Could not update reference path at step 99: x and y must have the same length
2025-12-01 16:49:36,461 - INFO - integration_test - === Calling planner.solve_mpc() at step 99 ===
2025-12-01 16:49:36,463 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:36,465 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:36,465 - INFO - integration_test - Warmstart k=0: x0=23.851992118488667 , y0=6.784295782604564 , psi0=0.9559203047360388 , v0=3.0 , spline0=25.431850252481414 , a0=0.0 , w0=0.0
2025-12-01 16:49:36,465 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:36,466 - INFO - integration_test - Dyn residual k=0: pred=[24.025049295277043, 7.029349273830535, 0.9559203047360388, 3.0, 25.731850252481415], ws=[24.025049295277043, 7.029349273830535, 0.955920304736039, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.952166292107094], res_norm=3.952e+00
2025-12-01 16:49:36,466 - INFO - integration_test - Dyn residual k=1: pred=[24.19810647206542, 7.274402765056506, 0.955920304736039, 3.0, 29.98401654458851], ws=[24.19810647206542, 7.274402765056506, 0.955920304736039, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:36,467 - INFO - integration_test - Dyn residual k=2: pred=[24.371163648853795, 7.519456256282478, 0.955920304736039, 3.0, 29.98401654458851], ws=[24.371163648853795, 7.519456256282478, 0.955920304736039, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:36,482 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,494 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,510 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,522 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,539 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,550 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,567 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,578 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,595 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,607 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,623 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,634 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,651 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,662 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,678 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,690 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,707 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,718 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,734 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,746 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:36,762 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:36,773 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,091 - INFO - integration_test - Step 99: MPC solve successful
2025-12-01 16:49:37,105 - INFO - integration_test - Step 99: Computed 10 numeric contouring constraints for visualization (s=25.432)
2025-12-01 16:49:37,105 - DEBUG - integration_test - Step 99: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:37,105 - INFO - integration_test - === Applying control at step 99 ===
2025-12-01 16:49:37,105 - INFO - integration_test -   Control dict from planner: {'a': -6.166954881236147e-13, 'w': -0.8000000099647658}
2025-12-01 16:49:37,106 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:37,106 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:37,107 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:37,107 - INFO - integration_test - Step 99 completed in 0.662s
2025-12-01 16:49:37,130 - INFO - integration_test - Step 100 (contouring until path end)
2025-12-01 16:49:37,131 - DEBUG - integration_test - Syncing planner state at step 100: vehicle_state=[24.03466168  7.02216938  0.8759203   3.00000003 25.73185026]
2025-12-01 16:49:37,131 - DEBUG - integration_test - Step 100: Using propagated spline 25.7319 (close to path, dist=0.296m)
2025-12-01 16:49:37,132 - DEBUG - integration_test -   Set spline state to 25.7319
2025-12-01 16:49:37,132 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:37,146 - DEBUG - integration_test - Step 100: Checking path alignment: vehicle=(24.035, 7.022), path_start=(0.000, 0.000), dist=25.039m
2025-12-01 16:49:37,147 - WARNING - integration_test - Could not update reference path at step 100: x and y must have the same length
2025-12-01 16:49:37,147 - INFO - integration_test - === Calling planner.solve_mpc() at step 100 ===
2025-12-01 16:49:37,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:37,150 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:37,150 - INFO - integration_test - Warmstart k=0: x0=24.03466167751513 , y0=7.022169376769325 , psi0=0.8759203037395622 , v0=3.0 , spline0=25.73185025548139 , a0=0.0 , w0=0.0
2025-12-01 16:49:37,151 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:37,152 - INFO - integration_test - Dyn residual k=0: pred=[24.226748741612724, 7.252609303445165, 0.8759203037395622, 3.0, 26.03185025548139], ws=[24.226748741612724, 7.252609303445165, 0.8759203037395622, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.652166289107118], res_norm=3.652e+00
2025-12-01 16:49:37,152 - INFO - integration_test - Dyn residual k=1: pred=[24.41883580571032, 7.483049230121004, 0.8759203037395622, 3.0, 29.98401654458851], ws=[24.41883580571032, 7.483049230121004, 0.8759203037395622, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:37,153 - INFO - integration_test - Dyn residual k=2: pred=[24.610922869807915, 7.713489156796844, 0.8759203037395622, 3.0, 29.98401654458851], ws=[24.610922869807915, 7.713489156796844, 0.8759203037395622, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:37,168 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,180 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,196 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,208 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,224 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,236 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,252 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,264 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,280 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,291 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,308 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,319 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,335 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,347 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,363 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,375 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,392 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,404 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,421 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,432 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,448 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,460 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,840 - INFO - integration_test - Step 100: MPC solve successful
2025-12-01 16:49:37,854 - INFO - integration_test - Step 100: Computed 10 numeric contouring constraints for visualization (s=25.732)
2025-12-01 16:49:37,855 - DEBUG - integration_test - Step 100: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:37,855 - INFO - integration_test - === Applying control at step 100 ===
2025-12-01 16:49:37,855 - INFO - integration_test -   Control dict from planner: {'a': 7.791096724220798e-13, 'w': -0.8000000099244365}
2025-12-01 16:49:37,855 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:37,855 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:37,856 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:37,856 - INFO - integration_test - Step 100 completed in 0.726s
2025-12-01 16:49:37,879 - INFO - integration_test - Step 101 (contouring until path end)
2025-12-01 16:49:37,880 - DEBUG - integration_test - Syncing planner state at step 101: vehicle_state=[24.2357566   7.2446842   0.7959203   3.00000003 26.03185026]
2025-12-01 16:49:37,881 - DEBUG - integration_test - Step 101: Using propagated spline 26.0319 (close to path, dist=0.318m)
2025-12-01 16:49:37,881 - DEBUG - integration_test -   Set spline state to 26.0319
2025-12-01 16:49:37,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:37,896 - DEBUG - integration_test - Step 101: Checking path alignment: vehicle=(24.236, 7.245), path_start=(0.000, 0.000), dist=25.295m
2025-12-01 16:49:37,896 - WARNING - integration_test - Could not update reference path at step 101: x and y must have the same length
2025-12-01 16:49:37,896 - INFO - integration_test - === Calling planner.solve_mpc() at step 101 ===
2025-12-01 16:49:37,899 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:37,900 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:37,900 - INFO - integration_test - Warmstart k=0: x0=24.235756601344566 , y0=7.244684199210038 , psi0=0.7959203027471186 , v0=3.0 , spline0=26.031850258481374 , a0=0.0 , w0=0.0
2025-12-01 16:49:37,900 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:37,901 - INFO - integration_test - Dyn residual k=0: pred=[24.44564485102702, 7.459036532169667, 0.7959203027471186, 3.0, 26.331850258481374], ws=[24.44564485102702, 7.459036532169667, 0.7959203027471187, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.352166286107135], res_norm=3.352e+00
2025-12-01 16:49:37,902 - INFO - integration_test - Dyn residual k=1: pred=[24.655533100709473, 7.673388865129295, 0.7959203027471187, 3.0, 29.98401654458851], ws=[24.655533100709473, 7.673388865129295, 0.7959203027471187, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:37,903 - INFO - integration_test - Dyn residual k=2: pred=[24.865421350391927, 7.887741198088924, 0.7959203027471187, 3.0, 29.98401654458851], ws=[24.865421350391927, 7.887741198088924, 0.7959203027471187, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:37,918 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,929 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,946 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,958 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:37,974 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:37,986 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,003 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,015 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,031 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,042 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,059 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,070 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,086 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,098 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,115 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,126 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,142 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,154 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,170 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,182 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,198 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,210 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,518 - INFO - integration_test - Step 101: MPC solve successful
2025-12-01 16:49:38,533 - INFO - integration_test - Step 101: Computed 10 numeric contouring constraints for visualization (s=26.032)
2025-12-01 16:49:38,533 - DEBUG - integration_test - Step 101: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:38,533 - INFO - integration_test - === Applying control at step 101 ===
2025-12-01 16:49:38,533 - INFO - integration_test -   Control dict from planner: {'a': -1.8534199641216956e-13, 'w': -0.6045245798388429}
2025-12-01 16:49:38,534 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:38,534 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:38,534 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:38,535 - INFO - integration_test - Step 101 completed in 0.655s
2025-12-01 16:49:38,557 - INFO - integration_test - Step 102 (contouring until path end)
2025-12-01 16:49:38,558 - DEBUG - integration_test - Syncing planner state at step 102: vehicle_state=[24.45199413  7.4525638   0.73546784  3.00000003 26.33185026]
2025-12-01 16:49:38,559 - DEBUG - integration_test - Step 102: Using propagated spline 26.3319 (close to path, dist=0.372m)
2025-12-01 16:49:38,559 - DEBUG - integration_test -   Set spline state to 26.3319
2025-12-01 16:49:38,560 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:38,574 - DEBUG - integration_test - Step 102: Checking path alignment: vehicle=(24.452, 7.453), path_start=(0.000, 0.000), dist=25.562m
2025-12-01 16:49:38,575 - WARNING - integration_test - Could not update reference path at step 102: x and y must have the same length
2025-12-01 16:49:38,575 - INFO - integration_test - === Calling planner.solve_mpc() at step 102 ===
2025-12-01 16:49:38,578 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:38,579 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:38,579 - INFO - integration_test - Warmstart k=0: x0=24.45199412792321 , y0=7.452563802163741 , psi0=0.7354678447632342 , v0=3.0 , spline0=26.331850261481353 , a0=0.0 , w0=0.0
2025-12-01 16:49:38,579 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:38,580 - INFO - integration_test - Dyn residual k=0: pred=[24.67444921038498, 7.653844045324681, 0.7354678447632342, 3.0, 26.631850261481354], ws=[24.67444921038498, 7.653844045324681, 0.7354678447632343, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.052166283107155], res_norm=3.052e+00
2025-12-01 16:49:38,581 - INFO - integration_test - Dyn residual k=1: pred=[24.896904292846752, 7.855124288485621, 0.7354678447632343, 3.0, 29.98401654458851], ws=[24.896904292846752, 7.855124288485621, 0.7354678447632343, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:38,581 - INFO - integration_test - Dyn residual k=2: pred=[25.119359375308523, 8.05640453164656, 0.7354678447632343, 3.0, 29.98401654458851], ws=[25.119359375308523, 8.05640453164656, 0.7354678447632343, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:38,597 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,610 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,628 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,639 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,656 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,667 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,684 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,695 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,713 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,724 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,741 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,753 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,769 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,782 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,799 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,811 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,828 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,839 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,868 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:38,885 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:38,897 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:39,981 - INFO - integration_test - Step 102: MPC solve successful
2025-12-01 16:49:39,995 - INFO - integration_test - Step 102: Computed 10 numeric contouring constraints for visualization (s=26.332)
2025-12-01 16:49:39,996 - DEBUG - integration_test - Step 102: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:39,996 - INFO - integration_test - === Applying control at step 102 ===
2025-12-01 16:49:39,996 - INFO - integration_test -   Control dict from planner: {'a': -6.156036224893935e-09, 'w': 0.021827776762818007}
2025-12-01 16:49:39,996 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:39,996 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:39,997 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:39,997 - INFO - integration_test - Step 102 completed in 1.439s
2025-12-01 16:49:40,022 - INFO - integration_test - Step 103 (contouring until path end)
2025-12-01 16:49:40,023 - DEBUG - integration_test - Syncing planner state at step 103: vehicle_state=[24.67422936  7.65408667  0.73765062  3.00000003 26.63185026]
2025-12-01 16:49:40,024 - DEBUG - integration_test - Step 103: Using propagated spline 26.6319 (close to path, dist=0.399m)
2025-12-01 16:49:40,024 - DEBUG - integration_test -   Set spline state to 26.6319
2025-12-01 16:49:40,024 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:40,038 - DEBUG - integration_test - Step 103: Checking path alignment: vehicle=(24.674, 7.654), path_start=(0.000, 0.000), dist=25.834m
2025-12-01 16:49:40,039 - WARNING - integration_test - Could not update reference path at step 103: x and y must have the same length
2025-12-01 16:49:40,039 - INFO - integration_test - === Calling planner.solve_mpc() at step 103 ===
2025-12-01 16:49:40,041 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:40,042 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:40,043 - INFO - integration_test - Warmstart k=0: x0=24.67422936101251 , y0=7.654086672382939 , psi0=0.7376506224395161 , v0=3.0 , spline0=26.631850264419775 , a0=0.0 , w0=0.0
2025-12-01 16:49:40,043 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:40,043 - INFO - integration_test - Dyn residual k=0: pred=[24.89624456385626, 7.855852005644748, 0.7376506224395161, 3.0, 26.931850264419776], ws=[24.89624456385626, 7.855852005644748, 0.7376506224395163, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -2.7521662801687334], res_norm=2.752e+00
2025-12-01 16:49:40,044 - INFO - integration_test - Dyn residual k=1: pred=[25.11825976670001, 8.057617338906558, 0.7376506224395163, 3.0, 29.98401654458851], ws=[25.11825976670001, 8.057617338906558, 0.7376506224395163, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:40,045 - INFO - integration_test - Dyn residual k=2: pred=[25.34027496954376, 8.259382672168368, 0.7376506224395163, 3.0, 29.98401654458851], ws=[25.34027496954376, 8.259382672168368, 0.7376506224395163, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:40,060 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,072 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,090 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,103 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,121 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,134 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,151 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,164 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,182 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,194 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,212 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,224 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,240 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,252 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,268 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,280 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,297 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,309 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,325 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,337 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:40,354 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:40,365 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,594 - INFO - integration_test - Step 103: MPC solve successful
2025-12-01 16:49:41,608 - INFO - integration_test - Step 103: Computed 10 numeric contouring constraints for visualization (s=26.632)
2025-12-01 16:49:41,609 - DEBUG - integration_test - Step 103: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:41,609 - INFO - integration_test - === Applying control at step 103 ===
2025-12-01 16:49:41,609 - INFO - integration_test -   Control dict from planner: {'a': 4.103990715518288e-09, 'w': -0.09748148759180711}
2025-12-01 16:49:41,609 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:41,609 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:41,610 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:41,610 - INFO - integration_test - Step 103 completed in 1.587s
2025-12-01 16:49:41,634 - INFO - integration_test - Step 104 (contouring until path end)
2025-12-01 16:49:41,635 - DEBUG - integration_test - Syncing planner state at step 104: vehicle_state=[24.89722446  7.8547667   0.72790247  3.00000003 26.93185027]
2025-12-01 16:49:41,636 - DEBUG - integration_test - Step 104: Using propagated spline 26.9319 (close to path, dist=0.412m)
2025-12-01 16:49:41,636 - DEBUG - integration_test -   Set spline state to 26.9319
2025-12-01 16:49:41,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:41,651 - DEBUG - integration_test - Step 104: Checking path alignment: vehicle=(24.897, 7.855), path_start=(0.000, 0.000), dist=26.107m
2025-12-01 16:49:41,651 - WARNING - integration_test - Could not update reference path at step 104: x and y must have the same length
2025-12-01 16:49:41,651 - INFO - integration_test - === Calling planner.solve_mpc() at step 104 ===
2025-12-01 16:49:41,654 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:41,655 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:41,655 - INFO - integration_test - Warmstart k=0: x0=24.89722446130938 , y0=7.85476670209125 , psi0=0.7279024736803353 , v0=3.0 , spline0=26.931850267399234 , a0=0.0 , w0=0.0
2025-12-01 16:49:41,655 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:41,656 - INFO - integration_test - Dyn residual k=0: pred=[25.121195922916424, 8.054358245964245, 0.7279024736803353, 3.0, 27.231850267399235], ws=[25.121195922916424, 8.054358245964245, 0.7279024736803352, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -2.4521662771892743], res_norm=2.452e+00
2025-12-01 16:49:41,656 - INFO - integration_test - Dyn residual k=1: pred=[25.345167384523467, 8.25394978983724, 0.7279024736803352, 3.0, 29.98401654458851], ws=[25.345167384523467, 8.25394978983724, 0.7279024736803352, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:41,657 - INFO - integration_test - Dyn residual k=2: pred=[25.56913884613051, 8.453541333710234, 0.7279024736803352, 3.0, 29.98401654458851], ws=[25.56913884613051, 8.453541333710234, 0.7279024736803352, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:41,672 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,685 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,703 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,715 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,733 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,748 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,767 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,781 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,814 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,847 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,865 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,878 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,897 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,910 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,928 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,940 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,959 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:41,972 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:41,991 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:42,004 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,129 - INFO - integration_test - Step 104: MPC solve successful
2025-12-01 16:49:43,143 - INFO - integration_test - Step 104: Computed 10 numeric contouring constraints for visualization (s=26.932)
2025-12-01 16:49:43,143 - DEBUG - integration_test - Step 104: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:43,143 - INFO - integration_test - === Applying control at step 104 ===
2025-12-01 16:49:43,143 - INFO - integration_test -   Control dict from planner: {'a': -3.992238641855431e-07, 'w': -0.025906495278135346}
2025-12-01 16:49:43,143 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:43,143 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:43,144 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:43,145 - INFO - integration_test - Step 104 completed in 1.510s
2025-12-01 16:49:43,169 - INFO - integration_test - Step 105 (contouring until path end)
2025-12-01 16:49:43,170 - DEBUG - integration_test - Syncing planner state at step 105: vehicle_state=[25.12145421  8.05406791  0.72531182  2.99999999 27.23185027]
2025-12-01 16:49:43,171 - DEBUG - integration_test - Step 105: Using propagated spline 27.2319 (close to path, dist=0.460m)
2025-12-01 16:49:43,171 - DEBUG - integration_test -   Set spline state to 27.2319
2025-12-01 16:49:43,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:43,186 - DEBUG - integration_test - Step 105: Checking path alignment: vehicle=(25.121, 8.054), path_start=(0.000, 0.000), dist=26.381m
2025-12-01 16:49:43,186 - WARNING - integration_test - Could not update reference path at step 105: x and y must have the same length
2025-12-01 16:49:43,186 - INFO - integration_test - === Calling planner.solve_mpc() at step 105 ===
2025-12-01 16:49:43,189 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:43,190 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:43,190 - INFO - integration_test - Warmstart k=0: x0=25.12145420884633 , y0=8.054067907741258 , psi0=0.7253118241525218 , v0=2.9999999898722183 , spline0=27.231850266386456 , a0=0.0 , w0=0.0
2025-12-01 16:49:43,190 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:43,191 - INFO - integration_test - Dyn residual k=0: pred=[25.345941989268134, 8.253078550254731, 0.7253118241525218, 2.9999999898722183, 27.531850265373677], ws=[25.345941989268134, 8.253078550254731, 0.7253118241525218, 2.9999999898722183, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.152166279214832], res_norm=2.152e+00
2025-12-01 16:49:43,192 - INFO - integration_test - Dyn residual k=1: pred=[25.570429769689937, 8.452089192768204, 0.7253118241525218, 2.9999999898722183, 29.98401654357573], ws=[25.570429769689937, 8.452089192768204, 0.7253118241525218, 2.9999999898722183, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999999989872215], res_norm=3.000e-01
2025-12-01 16:49:43,192 - INFO - integration_test - Dyn residual k=2: pred=[25.79491755011174, 8.651099835281677, 0.7253118241525218, 2.9999999898722183, 29.98401654357573], ws=[25.79491755011174, 8.651099835281677, 0.7253118241525218, 2.9999999898722183, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2999999989872215], res_norm=3.000e-01
2025-12-01 16:49:43,208 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,220 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,237 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,250 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,268 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,280 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,298 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,311 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,344 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,363 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,376 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,395 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,407 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,425 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,438 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,455 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,467 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,486 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,499 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,516 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,529 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:43,906 - INFO - integration_test - Step 105: MPC solve successful
2025-12-01 16:49:43,922 - INFO - integration_test - Step 105: Computed 10 numeric contouring constraints for visualization (s=27.232)
2025-12-01 16:49:43,922 - DEBUG - integration_test - Step 105: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:43,922 - INFO - integration_test - === Applying control at step 105 ===
2025-12-01 16:49:43,922 - INFO - integration_test -   Control dict from planner: {'a': 2.6751645049783153e-07, 'w': -0.03727861482217769}
2025-12-01 16:49:43,922 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:43,922 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:43,923 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:43,924 - INFO - integration_test - Step 105 completed in 0.754s
2025-12-01 16:49:43,947 - INFO - integration_test - Step 106 (contouring until path end)
2025-12-01 16:49:43,948 - DEBUG - integration_test - Syncing planner state at step 106: vehicle_state=[25.34631241  8.25265966  0.72158396  3.00000002 27.53185027]
2025-12-01 16:49:43,949 - DEBUG - integration_test - Step 106: Using propagated spline 27.5319 (close to path, dist=0.445m)
2025-12-01 16:49:43,949 - DEBUG - integration_test -   Set spline state to 27.5319
2025-12-01 16:49:43,950 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:43,964 - DEBUG - integration_test - Step 106: Checking path alignment: vehicle=(25.346, 8.253), path_start=(0.000, 0.000), dist=26.656m
2025-12-01 16:49:43,964 - WARNING - integration_test - Could not update reference path at step 106: x and y must have the same length
2025-12-01 16:49:43,964 - INFO - integration_test - === Calling planner.solve_mpc() at step 106 ===
2025-12-01 16:49:43,967 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:43,968 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:43,968 - INFO - integration_test - Warmstart k=0: x0=25.346312411947135 , y0=8.252659661009329 , psi0=0.721583962670304 , v0=3.0 , spline0=27.531850268048842 , a0=0.0 , w0=0.0
2025-12-01 16:49:43,968 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:43,969 - INFO - integration_test - Dyn residual k=0: pred=[25.57154051567369, 8.450832063961256, 0.721583962670304, 3.0, 27.831850268048843], ws=[25.57154051567369, 8.450832063961256, 0.7215839626703042, 3.0, 29.68401654458851], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.8521662765396663], res_norm=1.852e+00
2025-12-01 16:49:43,970 - INFO - integration_test - Dyn residual k=1: pred=[25.79676861940024, 8.649004466913183, 0.7215839626703042, 3.0, 29.98401654458851], ws=[25.79676861940024, 8.649004466913183, 0.7215839626703042, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:43,971 - INFO - integration_test - Dyn residual k=2: pred=[26.02199672312679, 8.84717686986511, 0.7215839626703042, 3.0, 29.98401654458851], ws=[26.02199672312679, 8.847176869865113, 0.7215839626703042, 3.0, 29.68401654458851], res=[0.0, -1.7763568394002505e-15, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:43,986 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:43,998 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,027 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,043 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,055 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,071 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,082 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,099 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,111 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,128 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,139 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,232 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,243 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,259 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,271 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,287 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,301 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,319 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,332 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,349 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,362 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,713 - INFO - integration_test - Step 106: MPC solve successful
2025-12-01 16:49:44,729 - INFO - integration_test - Step 106: Computed 10 numeric contouring constraints for visualization (s=27.532)
2025-12-01 16:49:44,729 - DEBUG - integration_test - Step 106: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:44,729 - INFO - integration_test - === Applying control at step 106 ===
2025-12-01 16:49:44,729 - INFO - integration_test -   Control dict from planner: {'a': 8.913512693384143e-08, 'w': 0.6991852248238812}
2025-12-01 16:49:44,729 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:44,729 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:44,730 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:44,731 - INFO - integration_test - Step 106 completed in 0.782s
2025-12-01 16:49:44,755 - INFO - integration_test - Step 107 (contouring until path end)
2025-12-01 16:49:44,756 - DEBUG - integration_test - Syncing planner state at step 107: vehicle_state=[25.56443192  8.45854124  0.79150249  3.00000003 27.83185027]
2025-12-01 16:49:44,757 - INFO - integration_test - Step 107: Re-initialized spline from 27.8319 to 27.8666 (vehicle at (25.56, 8.46), closest path point at (25.67, 7.95), distance=0.520m)
2025-12-01 16:49:44,757 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 16:49:44,758 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:44,775 - DEBUG - integration_test - Step 107: Checking path alignment: vehicle=(25.564, 8.459), path_start=(0.000, 0.000), dist=26.927m
2025-12-01 16:49:44,775 - WARNING - integration_test - Could not update reference path at step 107: x and y must have the same length
2025-12-01 16:49:44,775 - INFO - integration_test - === Calling planner.solve_mpc() at step 107 ===
2025-12-01 16:49:44,779 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:44,781 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:44,781 - INFO - integration_test - Warmstart k=0: x0=25.564431916589673 , y0=8.458541243303035 , psi0=0.7915024851526922 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 16:49:44,781 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:44,782 - INFO - integration_test - Dyn residual k=0: pred=[25.775265084496795, 8.671964239510677, 0.7915024851526922, 3.0, 28.166627776552478], ws=[25.775265084496795, 8.671964239510677, 0.7915024851526922, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 16:49:44,783 - INFO - integration_test - Dyn residual k=1: pred=[25.986098252403917, 8.88538723571832, 0.7915024851526922, 3.0, 29.98401654458851], ws=[25.986098252403917, 8.88538723571832, 0.7915024851526922, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:44,784 - INFO - integration_test - Dyn residual k=2: pred=[26.19693142031104, 9.098810231925961, 0.7915024851526922, 3.0, 29.98401654458851], ws=[26.19693142031104, 9.098810231925961, 0.7915024851526922, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:44,801 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,814 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,833 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,845 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,864 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,876 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,895 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,908 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,926 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,938 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,954 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,966 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:44,982 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:44,994 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,010 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,022 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,038 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,050 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,066 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,078 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,096 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,107 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,431 - INFO - integration_test - Step 107: MPC solve successful
2025-12-01 16:49:45,446 - INFO - integration_test - Step 107: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 16:49:45,446 - DEBUG - integration_test - Step 107: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:45,447 - INFO - integration_test - === Applying control at step 107 ===
2025-12-01 16:49:45,447 - INFO - integration_test -   Control dict from planner: {'a': 2.9747388622126188e-08, 'w': 0.8000000099074418}
2025-12-01 16:49:45,447 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:45,447 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:45,448 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:45,448 - INFO - integration_test - Step 107 completed in 0.692s
2025-12-01 16:49:45,472 - INFO - integration_test - Step 108 (contouring until path end)
2025-12-01 16:49:45,473 - DEBUG - integration_test - Syncing planner state at step 108: vehicle_state=[25.7665079   8.6801655   0.87150249  3.00000003 28.16662778]
2025-12-01 16:49:45,474 - INFO - integration_test - Step 108: Re-initialized spline from 28.1666 to 28.4724 (vehicle at (25.77, 8.68), closest path point at (26.12, 8.30), distance=0.519m)
2025-12-01 16:49:45,474 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 16:49:45,475 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:45,490 - DEBUG - integration_test - Step 108: Checking path alignment: vehicle=(25.767, 8.680), path_start=(0.000, 0.000), dist=27.189m
2025-12-01 16:49:45,490 - WARNING - integration_test - Could not update reference path at step 108: x and y must have the same length
2025-12-01 16:49:45,490 - INFO - integration_test - === Calling planner.solve_mpc() at step 108 ===
2025-12-01 16:49:45,493 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:45,495 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:45,495 - INFO - integration_test - Warmstart k=0: x0=25.766507904524477 , y0=8.680165496302466 , psi0=0.8715024861434364 , v0=3.0 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 16:49:45,495 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:45,496 - INFO - integration_test - Dyn residual k=0: pred=[25.959611132384104, 8.909754571369625, 0.8715024861434364, 3.0, 28.772424032564487], ws=[25.959611132384104, 8.909754571369625, 0.8715024861434362, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.911592512024022], res_norm=9.116e-01
2025-12-01 16:49:45,497 - INFO - integration_test - Dyn residual k=1: pred=[26.15271436024373, 9.139343646436783, 0.8715024861434362, 3.0, 29.98401654458851], ws=[26.15271436024373, 9.139343646436783, 0.8715024861434362, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:45,497 - INFO - integration_test - Dyn residual k=2: pred=[26.34581758810336, 9.368932721503942, 0.8715024861434362, 3.0, 29.98401654458851], ws=[26.34581758810336, 9.368932721503942, 0.8715024861434362, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:49:45,512 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,524 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,540 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,552 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,569 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,581 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,597 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,609 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,626 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,637 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,654 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,665 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,682 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,694 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,711 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,723 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,738 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,750 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,766 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,778 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:45,796 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:45,808 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,083 - INFO - integration_test - Step 108: MPC solve successful
2025-12-01 16:49:46,098 - INFO - integration_test - Step 108: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 16:49:46,099 - DEBUG - integration_test - Step 108: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:46,099 - INFO - integration_test - === Applying control at step 108 ===
2025-12-01 16:49:46,099 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199252175, 'w': -0.44903272276389783}
2025-12-01 16:49:46,099 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:46,099 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:46,100 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:46,101 - INFO - integration_test - Step 108 completed in 0.627s
2025-12-01 16:49:46,126 - INFO - integration_test - Step 109 (contouring until path end)
2025-12-01 16:49:46,127 - DEBUG - integration_test - Syncing planner state at step 109: vehicle_state=[25.95803746  8.89788621  0.82659921  2.80000003 28.75242404]
2025-12-01 16:49:46,127 - INFO - integration_test - Step 109: Re-initialized spline from 28.7524 to 28.4724 (vehicle at (25.96, 8.90), closest path point at (26.12, 8.30), distance=0.621m)
2025-12-01 16:49:46,127 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 16:49:46,128 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:46,142 - DEBUG - integration_test - Step 109: Checking path alignment: vehicle=(25.958, 8.898), path_start=(0.000, 0.000), dist=27.441m
2025-12-01 16:49:46,143 - WARNING - integration_test - Could not update reference path at step 109: x and y must have the same length
2025-12-01 16:49:46,143 - INFO - integration_test - === Calling planner.solve_mpc() at step 109 ===
2025-12-01 16:49:46,145 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:49:46,147 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'ellipsoid_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:49:46,147 - INFO - integration_test - Warmstart k=0: x0=25.95803745537346 , y0=8.897886208694967 , psi0=0.8265992138670466 , v0=2.8000000265195926 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 16:49:46,147 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:49:46,148 - INFO - integration_test - Dyn residual k=0: pred=[26.147704249009053, 9.10386317070065, 0.8265992138670466, 2.8000000265195926, 28.752424035216446], ws=[26.147704249009053, 9.10386317070065, 0.8265992138670466, 2.8000000265195926, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.931592509372063], res_norm=9.316e-01
2025-12-01 16:49:46,149 - INFO - integration_test - Dyn residual k=1: pred=[26.337371042644644, 9.309840132706334, 0.8265992138670466, 2.8000000265195926, 29.96401654724047], ws=[26.337371042644644, 9.309840132706334, 0.8265992138670466, 2.8000000265195926, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2800000026519598], res_norm=2.800e-01
2025-12-01 16:49:46,149 - INFO - integration_test - Dyn residual k=2: pred=[26.527037836280236, 9.515817094712018, 0.8265992138670466, 2.8000000265195926, 29.96401654724047], ws=[26.527037836280236, 9.515817094712018, 0.8265992138670466, 2.8000000265195926, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2800000026519598], res_norm=2.800e-01
2025-12-01 16:49:46,164 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,176 - INFO - integration_test - Stage 0: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,193 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,205 - INFO - integration_test - Stage 1: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,221 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,233 - INFO - integration_test - Stage 2: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,249 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,260 - INFO - integration_test - Stage 3: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,277 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,289 - INFO - integration_test - Stage 4: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,306 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,318 - INFO - integration_test - Stage 5: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,334 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,346 - INFO - integration_test - Stage 6: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,362 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,374 - INFO - integration_test - Stage 7: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,391 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,403 - INFO - integration_test - Stage 8: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,420 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,432 - INFO - integration_test - Stage 9: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,448 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:49:46,460 - INFO - integration_test - Stage 10: constraints count=5 (linearized=0, contouring=2, other=3)
2025-12-01 16:49:46,790 - INFO - integration_test - Step 109: MPC solve successful
2025-12-01 16:49:46,805 - INFO - integration_test - Step 109: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 16:49:46,805 - DEBUG - integration_test - Step 109: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:49:46,805 - INFO - integration_test - === Applying control at step 109 ===
2025-12-01 16:49:46,805 - INFO - integration_test -   Control dict from planner: {'a': -2.000000018421768, 'w': -0.6712320095602587}
2025-12-01 16:49:46,805 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:49:46,805 - INFO - integration_test -   Planner output success: True
2025-12-01 16:49:46,806 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:49:46,806 - INFO - integration_test - Goal reached at step 109!
2025-12-01 16:49:46,807 - INFO - integration_test - Step 109 completed in 0.680s
2025-12-01 16:49:46,830 - INFO - integration_test - Goal reached at step 109, added 3 extra frames for visualization
2025-12-01 16:49:46,831 - INFO - integration_test - Saving test results...
2025-12-01 16:49:46,832 - INFO - integration_test - Saved 114 vehicle states to test_outputs/20251201_164756_contouring_contouring_ellipsoid_contouring_unicycle/vehicle_states.csv
2025-12-01 16:49:46,832 - INFO - integration_test - Saved obstacle summary to test_outputs/20251201_164756_contouring_contouring_ellipsoid_contouring_unicycle/obstacle_summary.csv
2025-12-01 16:49:46,832 - INFO - integration_test - Saved 121 states for obstacle 0 to test_outputs/20251201_164756_contouring_contouring_ellipsoid_contouring_unicycle/obstacle_0_detailed_states.csv
2025-12-01 16:49:46,833 - INFO - integration_test - Saved 121 states for obstacle 1 to test_outputs/20251201_164756_contouring_contouring_ellipsoid_contouring_unicycle/obstacle_1_detailed_states.csv
2025-12-01 16:49:46,833 - INFO - integration_test - Saved 121 states for obstacle 2 to test_outputs/20251201_164756_contouring_contouring_ellipsoid_contouring_unicycle/obstacle_2_detailed_states.csv
2025-12-01 16:49:46,833 - INFO - integration_test - Saved state history: 114 vehicle states, 3 obstacles
2025-12-01 16:49:46,833 - INFO - integration_test - Creating animation...
2025-12-01 16:49:46,852 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 16:49:46,868 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 16:49:46,960 - DEBUG - integration_test - Frame 1: Drawing 10 contouring constraint halfspaces
2025-12-01 16:49:47,036 - DEBUG - integration_test - Frame 2: Drawing 10 contouring constraint halfspaces
2025-12-01 16:50:02,041 - INFO - integration_test - Saved animation with 114 frames at 10.00 fps to test_outputs/20251201_164756_contouring_contouring_ellipsoid_contouring_unicycle/animation.gif (duration: 11.40s, size: 1143174 bytes)
2025-12-01 16:50:02,079 - INFO - integration_test - Animation created successfully
2025-12-01 16:50:02,080 - INFO - integration_test - Test completed successfully
