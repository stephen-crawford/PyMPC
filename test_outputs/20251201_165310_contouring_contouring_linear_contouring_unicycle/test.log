2025-12-01 16:53:10,517 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2025-12-01 16:53:10,517 - WARNING - integration_test -   Vehicle dynamics 'contouring_unicycle' is not automatically converted. Ensure it supports contouring (has 'spline' state variable)
2025-12-01 16:53:10,518 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2025-12-01 16:53:10,518 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2025-12-01 16:53:10,518 - INFO - integration_test - Creating objective module: contouring
2025-12-01 16:53:10,524 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2025-12-01 16:53:10,524 - INFO - integration_test - Creating 2 constraint module(s): ['contouring', 'linear']
2025-12-01 16:53:10,524 - DEBUG - integration_test - Creating constraint module: contouring
2025-12-01 16:53:10,530 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2025-12-01 16:53:10,530 - DEBUG - integration_test - Creating constraint module: linear
2025-12-01 16:53:10,535 - INFO - integration_test - Constraint module 'linear' created: linearized_constraints
2025-12-01 16:53:10,535 - INFO - integration_test - Created 2 constraint module(s)
2025-12-01 16:53:10,549 - INFO - integration_test - Setting solver on all modules...
2025-12-01 16:53:10,549 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2025-12-01 16:53:10,549 - DEBUG - integration_test -   Set solver on module: linearized_constraints
2025-12-01 16:53:10,549 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2025-12-01 16:53:10,549 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2025-12-01 16:53:10,549 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2025-12-01 16:53:10,549 - DEBUG - integration_test -   Set solver on module: contouring_objective
2025-12-01 16:53:10,550 - WARNING - integration_test - Error shaping obstacles: 'max_obstacles'
2025-12-01 16:53:10,550 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2025-12-01 16:53:10,550 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2025-12-01 16:53:10,550 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2025-12-01 16:53:10,550 - INFO - integration_test - Reference path start: (0.00, 0.00)
2025-12-01 16:53:10,550 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2025-12-01 16:53:10,550 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2025-12-01 16:53:10,551 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2025-12-01 16:53:10,551 - INFO - integration_test - Added spline variable: 0.0000
2025-12-01 16:53:10,551 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2025-12-01 16:53:10,551 - INFO - integration_test - Step 0 (contouring until path end)
2025-12-01 16:53:10,551 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2025-12-01 16:53:10,552 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m)
2025-12-01 16:53:10,552 - DEBUG - integration_test -   Set spline state to 0.0000
2025-12-01 16:53:10,553 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:10,567 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2025-12-01 16:53:10,567 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2025-12-01 16:53:10,570 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:10,571 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:10,571 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2025-12-01 16:53:10,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:10,572 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.1], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2025-12-01 16:53:10,573 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.2], ws=[0.2, 0.0, 0.0, 1.0, 0.2127494608332952], res=[0.0, 0.0, 0.0, 0.0, -0.0127494608332952], res_norm=1.275e-02
2025-12-01 16:53:10,574 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.31274946083329525], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.3386985848683951], res=[0.0, 0.0, 0.0, 0.0, -0.025949124035099858], res_norm=2.595e-02
2025-12-01 16:53:10,588 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,602 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,618 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,630 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,658 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,674 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,687 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,702 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,714 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,730 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,742 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,758 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,771 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,786 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,799 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,827 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,842 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,855 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:10,870 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:10,881 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:11,554 - INFO - integration_test - Step 0: MPC solve successful
2025-12-01 16:53:11,583 - INFO - integration_test - Step 0: Computed 10 numeric contouring constraints for visualization (s=0.000)
2025-12-01 16:53:11,584 - DEBUG - integration_test - Step 0: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:11,584 - DEBUG - integration_test - Captured 2 linearized constraint halfspaces at step 0
2025-12-01 16:53:11,584 - INFO - integration_test - === Applying control at step 0 ===
2025-12-01 16:53:11,584 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019993503, 'w': 0.8000000098235426}
2025-12-01 16:53:11,584 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:11,584 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:11,586 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:11,586 - INFO - integration_test - Step 0 completed in 1.035s
2025-12-01 16:53:11,611 - INFO - integration_test - Step 1 (contouring until path end)
2025-12-01 16:53:11,612 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2025-12-01 16:53:11,612 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m)
2025-12-01 16:53:11,612 - DEBUG - integration_test -   Set spline state to 0.1200
2025-12-01 16:53:11,614 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:11,614 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:11,631 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2025-12-01 16:53:11,632 - WARNING - integration_test - Could not update reference path at step 1: x and y must have the same length
2025-12-01 16:53:11,632 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2025-12-01 16:53:11,636 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:11,637 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:11,637 - INFO - integration_test - Warmstart k=0: x0=0.10987737537798789 , y0=0.0045308451139730995 , psi0=0.08000000098235426 , v0=1.2000000019993502 , spline0=0.12000000019993502 , a0=0.0 , w0=0.0
2025-12-01 16:53:11,637 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:11,638 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358032417722, 0.014120608523757055, 0.08000000098235426, 1.2000000019993502, 0.24000000039987004], ws=[0.22949358032417724, 0.014120608523757058, 0.08000000098235427, 1.2000000019993502, 0.2825662537002405], res=[-2.7755575615628914e-17, -3.469446951953614e-18, -1.3877787807814457e-17, 0.0, -0.04256625330037048], res_norm=4.257e-02
2025-12-01 16:53:11,639 - INFO - integration_test - Dyn residual k=1: pred=[0.34910978527036657, 0.023710371933541016, 0.08000000098235427, 1.2000000019993502, 0.40256625390017553], ws=[0.3491097852703666, 0.023710371933541016, 0.08000000098235427, 1.2000000019993502, 0.4628520712936688], res=[-5.551115123125783e-17, 0.0, 0.0, 0.0, -0.06028581739349326], res_norm=6.029e-02
2025-12-01 16:53:11,640 - INFO - integration_test - Dyn residual k=2: pred=[0.468725990216556, 0.033300135343324974, 0.08000000098235427, 1.2000000019993502, 0.5828520714936039], ws=[0.468725990216556, 0.033300135343324974, 0.08000000098235427, 1.2000000019993502, 0.6617370077588454], res=[0.0, 0.0, 0.0, 0.0, -0.07888493626524151], res_norm=7.888e-02
2025-12-01 16:53:11,657 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,674 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,695 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,710 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,727 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,743 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,762 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,780 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,820 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,839 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,855 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,876 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,893 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,913 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,930 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,950 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:11,967 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:11,986 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,000 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,017 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,028 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:12,249 - INFO - integration_test - Step 1: MPC solve successful
2025-12-01 16:53:12,258 - INFO - integration_test - Step 1: Computed 10 numeric contouring constraints for visualization (s=0.120)
2025-12-01 16:53:12,259 - DEBUG - integration_test - Step 1: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:12,259 - INFO - integration_test - === Applying control at step 1 ===
2025-12-01 16:53:12,259 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001766651, 'w': 0.7999999672852307}
2025-12-01 16:53:12,259 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:12,259 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:12,260 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:12,260 - INFO - integration_test - Step 1 completed in 0.649s
2025-12-01 16:53:12,282 - INFO - integration_test - Step 2 (contouring until path end)
2025-12-01 16:53:12,283 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2025-12-01 16:53:12,283 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m)
2025-12-01 16:53:12,283 - DEBUG - integration_test -   Set spline state to 0.2600
2025-12-01 16:53:12,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:12,285 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:12,300 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2025-12-01 16:53:12,300 - WARNING - integration_test - Could not update reference path at step 2: x and y must have the same length
2025-12-01 16:53:12,300 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2025-12-01 16:53:12,304 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:12,305 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:12,305 - INFO - integration_test - Warmstart k=0: x0=0.2388921281898357 , y0=0.02022162172569844 , psi0=0.1599999977108773 , v0=1.4000000037660012 , spline0=0.26000000057653516 , a0=0.0 , w0=0.0
2025-12-01 16:53:12,305 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:12,306 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039482852713, 0.042526170395308316, 0.1599999977108773, 1.4000000037660012, 0.40000000095313526], ws=[0.3771039482852713, 0.042526170395308316, 0.15999999771087747, 1.4000000037660012, 0.4922268651505974], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -0.09222686419746212], res_norm=9.223e-02
2025-12-01 16:53:12,307 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157683807068, 0.06483071906491822, 0.15999999771087747, 1.4000000037660012, 0.6322268655271975], ws=[0.5153157683807068, 0.06483071906491822, 0.15999999771087747, 1.4000000037660012, 0.7474945961470119], res=[0.0, 0.0, 0.0, 0.0, -0.11526773061981432], res_norm=1.153e-01
2025-12-01 16:53:12,307 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275884761423, 0.08713526773452812, 0.15999999771087747, 1.4000000037660012, 0.887494596523612], ws=[0.6535275884761423, 0.08713526773452812, 0.15999999771087747, 1.4000000037660012, 0.9682208639333026], res=[0.0, 0.0, 0.0, 0.0, -0.08072626740969069], res_norm=8.073e-02
2025-12-01 16:53:12,323 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,336 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,353 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,365 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,382 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,395 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,410 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,423 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,438 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,450 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,479 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,495 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,507 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,523 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,535 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,551 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,563 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,579 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,592 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,608 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,618 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:12,851 - INFO - integration_test - Step 2: MPC solve successful
2025-12-01 16:53:12,859 - INFO - integration_test - Step 2: Computed 10 numeric contouring constraints for visualization (s=0.260)
2025-12-01 16:53:12,859 - DEBUG - integration_test - Step 2: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:12,860 - INFO - integration_test - === Applying control at step 2 ===
2025-12-01 16:53:12,860 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000186867557, 'w': 0.7999999732918849}
2025-12-01 16:53:12,860 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:12,860 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:12,861 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:12,861 - INFO - integration_test - Step 2 completed in 0.579s
2025-12-01 16:53:12,884 - INFO - integration_test - Step 3 (contouring until path end)
2025-12-01 16:53:12,884 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2025-12-01 16:53:12,885 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m)
2025-12-01 16:53:12,885 - DEBUG - integration_test -   Set spline state to 0.4200
2025-12-01 16:53:12,886 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:12,887 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:12,901 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2025-12-01 16:53:12,901 - WARNING - integration_test - Could not update reference path at step 3: x and y must have the same length
2025-12-01 16:53:12,901 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2025-12-01 16:53:12,904 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:12,906 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:12,906 - INFO - integration_test - Warmstart k=0: x0=0.3858364358210305 , y0=0.05014471588907178 , psi0=0.2399999950400658 , v0=1.6000000056346768 , spline0=0.42000000114000285 , a0=0.0 , w0=0.0
2025-12-01 16:53:12,906 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:12,907 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505125333111, 0.08817713548050747, 0.2399999950400658, 1.6000000056346768, 0.5800000017034705], ws=[0.5412505125333111, 0.08817713548050747, 0.23999999504006597, 1.6000000056346768, 0.7289817605790141], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -0.14898175887554355], res_norm=1.490e-01
2025-12-01 16:53:12,907 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645892455917, 0.1262095550719432, 0.23999999504006597, 1.6000000056346768, 0.8889817611424817], ws=[0.6966645892455917, 0.1262095550719432, 0.23999999504006597, 1.6000000056346768, 1.0077625417341805], res=[0.0, 0.0, 0.0, 0.0, -0.11878078059169872], res_norm=1.188e-01
2025-12-01 16:53:12,908 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786659578723, 0.16424197466337892, 0.23999999504006597, 1.6000000056346768, 1.167762542297648], ws=[0.8520786659578723, 0.16424197466337892, 0.23999999504006597, 1.6000000056346768, 1.31263381597094], res=[0.0, 0.0, 0.0, 0.0, -0.144871273673292], res_norm=1.449e-01
2025-12-01 16:53:12,923 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,937 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,953 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,967 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:12,984 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:12,997 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,013 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,025 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,041 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,053 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,068 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,081 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,097 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,110 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,126 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,138 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,154 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,166 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,182 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,195 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,211 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,221 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:13,445 - INFO - integration_test - Step 3: MPC solve successful
2025-12-01 16:53:13,452 - INFO - integration_test - Step 3: Computed 10 numeric contouring constraints for visualization (s=0.420)
2025-12-01 16:53:13,453 - DEBUG - integration_test - Step 3: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:13,453 - INFO - integration_test - === Applying control at step 3 ===
2025-12-01 16:53:13,453 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999537604225, 'w': 0.7999978718416912}
2025-12-01 16:53:13,453 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:13,453 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:13,454 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:13,454 - INFO - integration_test - Step 3 completed in 0.570s
2025-12-01 16:53:13,475 - INFO - integration_test - Step 4 (contouring until path end)
2025-12-01 16:53:13,476 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913547 0.09724074 0.31999978 1.8        0.6       ]
2025-12-01 16:53:13,476 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.455m)
2025-12-01 16:53:13,476 - DEBUG - integration_test -   Set spline state to 0.6000
2025-12-01 16:53:13,478 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:13,478 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:13,493 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2025-12-01 16:53:13,493 - WARNING - integration_test - Could not update reference path at step 4: x and y must have the same length
2025-12-01 16:53:13,493 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2025-12-01 16:53:13,496 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:13,498 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:13,498 - INFO - integration_test - Warmstart k=0: x0=0.5491354665962043 , y0=0.09724073787815156 , psi0=0.3199997822242349 , v0=1.800000001010719 , spline0=0.6000000012410748 , a0=0.0 , w0=0.0
2025-12-01 16:53:13,498 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:13,499 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978542778759, 0.15386268161116073, 0.3199997822242349, 1.800000001010719, 0.7800000013421466], ws=[0.7199978542778759, 0.15386268161116073, 0.31999978222423486, 1.800000001010719, 0.9928306763956052], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -0.21283067505345854], res_norm=2.128e-01
2025-12-01 16:53:13,499 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602419595475, 0.2104846253441699, 0.31999978222423486, 1.800000001010719, 1.1728306764966772], ws=[0.8908602419595475, 0.2104846253441699, 0.31999978222423486, 1.800000001010719, 1.3619893516852914], res=[0.0, 0.0, 0.0, 0.0, -0.1891586751886143], res_norm=1.892e-01
2025-12-01 16:53:13,500 - INFO - integration_test - Dyn residual k=2: pred=[1.061722629641219, 0.26710656907717906, 0.31999978222423486, 1.800000001010719, 1.5419893517863634], ws=[1.061722629641219, 0.26710656907717906, 0.31999978222423486, 1.800000001010719, 1.764173077711761], res=[0.0, 0.0, 0.0, 0.0, -0.2221837259253976], res_norm=2.222e-01
2025-12-01 16:53:13,515 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,529 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,545 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,557 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,573 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,586 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,602 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,614 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,630 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,642 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,657 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,670 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,686 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,698 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,714 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,727 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,742 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,754 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,770 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,783 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:13,798 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:13,809 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:14,066 - INFO - integration_test - Step 4: MPC solve successful
2025-12-01 16:53:14,074 - INFO - integration_test - Step 4: Computed 10 numeric contouring constraints for visualization (s=0.600)
2025-12-01 16:53:14,074 - DEBUG - integration_test - Step 4: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:14,074 - INFO - integration_test - === Applying control at step 4 ===
2025-12-01 16:53:14,074 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000184426616, 'w': 0.7999999344511795}
2025-12-01 16:53:14,074 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:14,075 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:14,075 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:14,076 - INFO - integration_test - Step 4 completed in 0.601s
2025-12-01 16:53:14,097 - INFO - integration_test - Step 5 (contouring until path end)
2025-12-01 16:53:14,098 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686151 0.16427971 0.39999978 2.         0.8       ]
2025-12-01 16:53:14,099 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.375m)
2025-12-01 16:53:14,099 - DEBUG - integration_test -   Set spline state to 0.8000
2025-12-01 16:53:14,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:14,100 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:14,114 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2025-12-01 16:53:14,115 - WARNING - integration_test - Could not update reference path at step 5: x and y must have the same length
2025-12-01 16:53:14,115 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2025-12-01 16:53:14,118 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:14,119 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:14,119 - INFO - integration_test - Warmstart k=0: x0=0.7268615082825238 , y0=0.16427970976345457 , psi0=0.39999977566935285 , v0=2.000000002854985 , spline0=0.8000000015265734 , a0=0.0 , w0=0.0
2025-12-01 16:53:14,119 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:14,120 - INFO - integration_test - Dyn residual k=0: pred=[0.9110737248177515, 0.24216333701191925, 0.39999977566935285, 2.000000002854985, 1.0000000018120718], ws=[0.9110737248177515, 0.24216333701191925, 0.39999977566935296, 2.000000002854985, 1.2100959685907728], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.21009596677870102], res_norm=2.101e-01
2025-12-01 16:53:14,121 - INFO - integration_test - Dyn residual k=1: pred=[1.0952859413529792, 0.3200469642603839, 0.39999977566935296, 2.000000002854985, 1.4100959688762713], ws=[1.0952859413529792, 0.3200469642603839, 0.39999977566935296, 2.000000002854985, 1.6563639883698604], res=[0.0, 0.0, 0.0, 0.0, -0.24626801949358912], res_norm=2.463e-01
2025-12-01 16:53:14,122 - INFO - integration_test - Dyn residual k=2: pred=[1.2794981578882068, 0.39793059150884863, 0.39999977566935296, 2.000000002854985, 1.856363988655359], ws=[1.2794981578882068, 0.39793059150884863, 0.39999977566935296, 2.000000002854985, 2.0825433322068356], res=[0.0, 0.0, 0.0, 0.0, -0.22617934355147673], res_norm=2.262e-01
2025-12-01 16:53:14,136 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,150 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,167 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,180 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,197 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,209 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,225 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,237 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,252 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,264 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,281 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,293 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,308 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,321 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,336 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,348 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,364 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,377 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,392 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,405 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,420 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,430 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:14,681 - INFO - integration_test - Step 5: MPC solve successful
2025-12-01 16:53:14,689 - INFO - integration_test - Step 5: Computed 10 numeric contouring constraints for visualization (s=0.800)
2025-12-01 16:53:14,689 - DEBUG - integration_test - Step 5: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:14,689 - INFO - integration_test - === Applying control at step 5 ===
2025-12-01 16:53:14,689 - INFO - integration_test -   Control dict from planner: {'a': 2.000000003871825, 'w': 0.7999989130560892}
2025-12-01 16:53:14,689 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:14,690 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:14,690 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:14,691 - INFO - integration_test - Step 5 completed in 0.593s
2025-12-01 16:53:14,712 - INFO - integration_test - Step 6 (contouring until path end)
2025-12-01 16:53:14,712 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675195 0.2538237  0.47999967 2.2        1.02      ]
2025-12-01 16:53:14,713 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.373m)
2025-12-01 16:53:14,713 - DEBUG - integration_test -   Set spline state to 1.0200
2025-12-01 16:53:14,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:14,714 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:14,728 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2025-12-01 16:53:14,729 - WARNING - integration_test - Could not update reference path at step 6: x and y must have the same length
2025-12-01 16:53:14,729 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2025-12-01 16:53:14,732 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:14,733 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:14,733 - INFO - integration_test - Warmstart k=0: x0=0.9167519468796329 , y0=0.25382369649899356 , psi0=0.47999966697496177 , v0=2.2000000032421676 , spline0=1.0200000018507902 , a0=0.0 , w0=0.0
2025-12-01 16:53:14,733 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:14,734 - INFO - integration_test - Dyn residual k=0: pred=[1.1118908640111294, 0.3554150502816966, 0.47999966697496177, 2.2000000032421676, 1.240000002175007], ws=[1.1118908640111294, 0.3554150502816966, 0.47999966697496177, 2.2000000032421676, 1.5284219554446457], res=[0.0, 0.0, 0.0, 0.0, -0.2884219532696386], res_norm=2.884e-01
2025-12-01 16:53:14,735 - INFO - integration_test - Dyn residual k=1: pred=[1.3070297811426257, 0.4570064040643997, 0.47999966697496177, 2.2000000032421676, 1.7484219557688625], ws=[1.3070297811426257, 0.4570064040643997, 0.47999966697496177, 2.2000000032421676, 2.0213814253958198], res=[0.0, 0.0, 0.0, 0.0, -0.2729594696269573], res_norm=2.730e-01
2025-12-01 16:53:14,735 - INFO - integration_test - Dyn residual k=2: pred=[1.5021686982741222, 0.5585977578471027, 0.47999966697496177, 2.2000000032421676, 2.2413814257200366], ws=[1.5021686982741222, 0.5585977578471027, 0.47999966697496177, 2.2000000032421676, 2.5576012414192597], res=[0.0, 0.0, 0.0, 0.0, -0.3162198156992231], res_norm=3.162e-01
2025-12-01 16:53:14,750 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,763 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,779 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,792 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,808 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,820 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,836 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,848 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,863 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,876 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,891 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,904 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,919 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,931 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,946 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,959 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:14,974 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:14,987 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,003 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,015 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,030 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,041 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:15,316 - INFO - integration_test - Step 6: MPC solve successful
2025-12-01 16:53:15,326 - INFO - integration_test - Step 6: Computed 10 numeric contouring constraints for visualization (s=1.020)
2025-12-01 16:53:15,326 - DEBUG - integration_test - Step 6: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:15,326 - INFO - integration_test - === Applying control at step 6 ===
2025-12-01 16:53:15,326 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000128611113, 'w': 0.7999993948962697}
2025-12-01 16:53:15,326 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:15,326 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:15,327 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:15,328 - INFO - integration_test - Step 6 completed in 0.616s
2025-12-01 16:53:15,351 - INFO - integration_test - Step 7 (contouring until path end)
2025-12-01 16:53:15,352 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623095 0.36819126 0.55999961 2.4        1.26      ]
2025-12-01 16:53:15,352 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.475m)
2025-12-01 16:53:15,352 - DEBUG - integration_test -   Set spline state to 1.2600
2025-12-01 16:53:15,354 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:15,354 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:15,412 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2025-12-01 16:53:15,413 - WARNING - integration_test - Could not update reference path at step 7: x and y must have the same length
2025-12-01 16:53:15,413 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2025-12-01 16:53:15,416 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:15,417 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:15,417 - INFO - integration_test - Warmstart k=0: x0=1.1162309480540236 , y0=0.3681912630073349 , psi0=0.5599996064645887 , v0=2.4000000045282786 , spline0=1.260000002303618 , a0=0.0 , w0=0.0
2025-12-01 16:53:15,417 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:15,418 - INFO - integration_test - Dyn residual k=0: pred=[1.3195722252506275, 0.49567587072689956, 0.5599996064645887, 2.4000000045282786, 1.5000000027564457], ws=[1.3195722252506275, 0.49567587072689956, 0.5599996064645887, 2.4000000045282786, 1.873863078201703], res=[0.0, 0.0, 0.0, 0.0, -0.3738630754452572], res_norm=3.739e-01
2025-12-01 16:53:15,419 - INFO - integration_test - Dyn residual k=1: pred=[1.5229135024472313, 0.6231604784464642, 0.5599996064645887, 2.4000000045282786, 2.1138630786545307], ws=[1.5229135024472313, 0.6231604784464642, 0.5599996064645887, 2.4000000045282786, 2.4813859313965203], res=[0.0, 0.0, 0.0, 0.0, -0.3675228527419896], res_norm=3.675e-01
2025-12-01 16:53:15,419 - INFO - integration_test - Dyn residual k=2: pred=[1.7262547796438352, 0.7506450861660288, 0.5599996064645887, 2.4000000045282786, 2.721385931849348], ws=[1.7262547796438352, 0.7506450861660288, 0.5599996064645887, 2.4000000045282786, 3.0823015461482126], res=[0.0, 0.0, 0.0, 0.0, -0.36091561429886454], res_norm=3.609e-01
2025-12-01 16:53:15,433 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,446 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,462 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,475 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,491 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,504 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,519 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,532 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,547 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,559 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,588 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,603 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,616 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,631 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,643 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,658 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,671 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,687 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,700 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:15,715 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:15,726 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:16,006 - INFO - integration_test - Step 7: MPC solve successful
2025-12-01 16:53:16,014 - INFO - integration_test - Step 7: Computed 10 numeric contouring constraints for visualization (s=1.260)
2025-12-01 16:53:16,014 - DEBUG - integration_test - Step 7: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:16,014 - INFO - integration_test - === Applying control at step 7 ===
2025-12-01 16:53:16,014 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199981436, 'w': 0.8000000097203118}
2025-12-01 16:53:16,014 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:16,014 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:16,015 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:16,016 - INFO - integration_test - Step 7 completed in 0.664s
2025-12-01 16:53:16,034 - INFO - integration_test - Step 8 (contouring until path end)
2025-12-01 16:53:16,034 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243463 0.50942418 0.63999961 2.60000001 1.52      ]
2025-12-01 16:53:16,035 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.429m)
2025-12-01 16:53:16,035 - DEBUG - integration_test -   Set spline state to 1.5200
2025-12-01 16:53:16,036 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:16,037 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:16,050 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2025-12-01 16:53:16,050 - WARNING - integration_test - Could not update reference path at step 8: x and y must have the same length
2025-12-01 16:53:16,050 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2025-12-01 16:53:16,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:16,054 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:16,054 - INFO - integration_test - Warmstart k=0: x0=1.3224346271191565 , y0=0.5094241782144091 , psi0=0.6399996074366199 , v0=2.600000006528093 , spline0=1.5200000029564273 , a0=0.0 , w0=0.0
2025-12-01 16:53:16,054 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:16,055 - INFO - integration_test - Dyn residual k=0: pred=[1.5309795856463082, 0.6646949114913839, 0.6399996074366199, 2.600000006528093, 1.7800000036092367], ws=[1.5309795856463082, 0.6646949114913839, 0.6399996074366197, 2.600000006528093, 2.172269511172826], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.39226950756358914], res_norm=3.923e-01
2025-12-01 16:53:16,056 - INFO - integration_test - Dyn residual k=1: pred=[1.73952454417346, 0.8199656447683586, 0.6399996074366197, 2.600000006528093, 2.432269511825635], ws=[1.73952454417346, 0.8199656447683586, 0.6399996074366197, 2.600000006528093, 2.8208115058339325], res=[0.0, 0.0, 0.0, 0.0, -0.3885419940082975], res_norm=3.885e-01
2025-12-01 16:53:16,056 - INFO - integration_test - Dyn residual k=2: pred=[1.9480695027006116, 0.9752363780453334, 0.6399996074366197, 2.600000006528093, 3.0808115064867416], ws=[1.9480695027006116, 0.9752363780453334, 0.6399996074366197, 2.600000006528093, 3.465637719868054], res=[0.0, 0.0, 0.0, 0.0, -0.3848262133813125], res_norm=3.848e-01
2025-12-01 16:53:16,070 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,084 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,100 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,113 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,128 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,141 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,156 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,168 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,184 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,197 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,212 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,224 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,240 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,252 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,268 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,281 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,296 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,309 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,324 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,337 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,352 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,362 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:16,660 - INFO - integration_test - Step 8: MPC solve successful
2025-12-01 16:53:16,668 - INFO - integration_test - Step 8: Computed 10 numeric contouring constraints for visualization (s=1.520)
2025-12-01 16:53:16,668 - DEBUG - integration_test - Step 8: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:16,669 - INFO - integration_test - === Applying control at step 8 ===
2025-12-01 16:53:16,669 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018532283, 'w': 0.7999997874300946}
2025-12-01 16:53:16,669 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:16,669 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:16,670 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:16,670 - INFO - integration_test - Step 8 completed in 0.636s
2025-12-01 16:53:16,692 - INFO - integration_test - Step 9 (contouring until path end)
2025-12-01 16:53:16,692 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223954 0.67925659 0.71999959 2.80000001 1.8       ]
2025-12-01 16:53:16,693 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.464m)
2025-12-01 16:53:16,693 - DEBUG - integration_test -   Set spline state to 1.8000
2025-12-01 16:53:16,695 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:16,695 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:16,709 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2025-12-01 16:53:16,709 - WARNING - integration_test - Could not update reference path at step 9: x and y must have the same length
2025-12-01 16:53:16,709 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2025-12-01 16:53:16,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:16,713 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:16,713 - INFO - integration_test - Warmstart k=0: x0=1.532239535801681 , y0=0.6792565922299274 , psi0=0.7199995861796293 , v0=2.8000000083813212 , spline0=1.8000000037945596 , a0=0.0 , w0=0.0
2025-12-01 16:53:16,714 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:16,714 - INFO - integration_test - Dyn residual k=0: pred=[1.7427452169939328, 0.8638842138230681, 0.7199995861796293, 2.8000000083813212, 2.0800000046326916], ws=[1.7427452169939328, 0.8638842138230681, 0.7199995861796293, 2.8000000083813212, 2.572663790685094], res=[0.0, 0.0, 0.0, 0.0, -0.4926637860524026], res_norm=4.927e-01
2025-12-01 16:53:16,715 - INFO - integration_test - Dyn residual k=1: pred=[1.9532508981861847, 1.0485118354162088, 0.7199995861796293, 2.8000000083813212, 2.8526637915232262], ws=[1.9532508981861847, 1.0485118354162088, 0.7199995861796293, 2.8000000083813212, 3.3533832771049834], res=[0.0, 0.0, 0.0, 0.0, -0.5007194855817572], res_norm=5.007e-01
2025-12-01 16:53:16,716 - INFO - integration_test - Dyn residual k=2: pred=[2.1637565793784366, 1.2331394570093497, 0.7199995861796293, 2.8000000083813212, 3.6333832779431154], ws=[2.1637565793784366, 1.2331394570093497, 0.7199995861796293, 2.8000000083813212, 4.144520098358104], res=[0.0, 0.0, 0.0, 0.0, -0.5111368204149884], res_norm=5.111e-01
2025-12-01 16:53:16,731 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,744 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,772 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,788 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,801 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,816 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,828 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,844 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,856 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,871 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,884 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,913 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,928 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,940 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,955 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,968 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:16,984 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:16,997 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,012 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,022 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:17,358 - INFO - integration_test - Step 9: MPC solve successful
2025-12-01 16:53:17,367 - INFO - integration_test - Step 9: Computed 10 numeric contouring constraints for visualization (s=1.800)
2025-12-01 16:53:17,367 - DEBUG - integration_test - Step 9: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:17,367 - INFO - integration_test - === Applying control at step 9 ===
2025-12-01 16:53:17,367 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998941, 'w': 0.8000000097803381}
2025-12-01 16:53:17,367 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:17,367 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:17,368 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:17,368 - INFO - integration_test - Step 9 completed in 0.676s
2025-12-01 16:53:17,388 - INFO - integration_test - Step 10 (contouring until path end)
2025-12-01 16:53:17,389 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229418 0.87908707 0.79999959 3.00000001 2.1       ]
2025-12-01 16:53:17,389 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.397m)
2025-12-01 16:53:17,389 - DEBUG - integration_test -   Set spline state to 2.1000
2025-12-01 16:53:17,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:17,391 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:17,405 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2025-12-01 16:53:17,405 - WARNING - integration_test - Could not update reference path at step 10: x and y must have the same length
2025-12-01 16:53:17,405 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2025-12-01 16:53:17,408 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:17,409 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:17,409 - INFO - integration_test - Warmstart k=0: x0=1.7422941839781405 , y0=0.8790870746797583 , psi0=0.7999995871576632 , v0=3.0 , spline0=2.100000004832681 , a0=0.0 , w0=0.0
2025-12-01 16:53:17,409 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:17,410 - INFO - integration_test - Dyn residual k=0: pred=[1.9513062856287617, 1.094293815660589, 0.7999995871576632, 3.0, 2.4000000048326813], ws=[1.9513062856287617, 1.094293815660589, 0.7999995871576631, 3.0, 3.00018560015112], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.6001855953184387], res_norm=6.002e-01
2025-12-01 16:53:17,411 - INFO - integration_test - Dyn residual k=1: pred=[2.160318387279383, 1.3095005566414197, 0.7999995871576631, 3.0, 3.30018560015112], ws=[2.160318387279383, 1.3095005566414197, 0.7999995871576631, 3.0, 3.8602041104786435], res=[0.0, 0.0, 0.0, 0.0, -0.5600185103275237], res_norm=5.600e-01
2025-12-01 16:53:17,411 - INFO - integration_test - Dyn residual k=2: pred=[2.369330488930004, 1.5247072976222504, 0.7999995871576631, 3.0, 4.160204110478643], ws=[2.369330488930004, 1.5247072976222504, 0.7999995871576631, 3.0, 4.73962041421779], res=[0.0, 0.0, 0.0, 0.0, -0.5794163037391469], res_norm=5.794e-01
2025-12-01 16:53:17,426 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,439 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,454 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,467 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,483 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,496 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,512 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,524 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,540 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,552 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,568 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,581 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,596 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,609 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,624 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,637 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,652 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,665 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,681 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,694 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:17,709 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:17,719 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:18,494 - INFO - integration_test - Step 10: MPC solve successful
2025-12-01 16:53:18,501 - INFO - integration_test - Step 10: Computed 10 numeric contouring constraints for visualization (s=2.100)
2025-12-01 16:53:18,502 - DEBUG - integration_test - Step 10: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:18,502 - INFO - integration_test - === Applying control at step 10 ===
2025-12-01 16:53:18,502 - INFO - integration_test -   Control dict from planner: {'a': -8.88952438189681e-06, 'w': 0.7888398533398248}
2025-12-01 16:53:18,502 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:18,502 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:18,503 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:18,503 - INFO - integration_test - Step 10 completed in 1.115s
2025-12-01 16:53:18,523 - INFO - integration_test - Step 11 (contouring until path end)
2025-12-01 16:53:18,523 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94260578 1.10231024 0.87888357 2.99999912 2.39999992]
2025-12-01 16:53:18,524 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.398m)
2025-12-01 16:53:18,524 - DEBUG - integration_test -   Set spline state to 2.4000
2025-12-01 16:53:18,525 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:18,526 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:18,539 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.943, 1.102), path_start=(0.000, 0.000), dist=2.234m
2025-12-01 16:53:18,539 - WARNING - integration_test - Could not update reference path at step 11: x and y must have the same length
2025-12-01 16:53:18,539 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2025-12-01 16:53:18,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:18,543 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:18,543 - INFO - integration_test - Warmstart k=0: x0=1.9426057758533726 , y0=1.1023102412716788 , psi0=0.8788835724916456 , v0=2.999999121428777 , spline0=2.399999916975559 , a0=0.0 , w0=0.0
2025-12-01 16:53:18,543 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:18,544 - INFO - integration_test - Dyn residual k=0: pred=[2.1340090861085823, 1.3333182933155032, 0.8788835724916456, 2.999999121428777, 2.6999998291184366], ws=[2.1340090861085823, 1.3333182933155032, 0.8788835724916453, 2.999999121428777, 3.3331558117824596], res=[0.0, 0.0, 3.3306690738754696e-16, 0.0, -0.633155982664023], res_norm=6.332e-01
2025-12-01 16:53:18,545 - INFO - integration_test - Dyn residual k=1: pred=[2.325412396363792, 1.5643263453593277, 0.8788835724916453, 2.999999121428777, 3.6331557239253374], ws=[2.325412396363792, 1.5643263453593277, 0.8788835724916453, 2.999999121428777, 4.291950754120972], res=[0.0, 0.0, 0.0, 0.0, -0.6587950301956345], res_norm=6.588e-01
2025-12-01 16:53:18,546 - INFO - integration_test - Dyn residual k=2: pred=[2.516815706619002, 1.7953343974031521, 0.8788835724916453, 2.999999121428777, 4.591950666263849], ws=[2.516815706619002, 1.7953343974031521, 0.8788835724916453, 2.999999121428777, 5.217281414634912], res=[0.0, 0.0, 0.0, 0.0, -0.6253307483710628], res_norm=6.253e-01
2025-12-01 16:53:18,560 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,573 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,590 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,603 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,620 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,633 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,650 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,663 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,680 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,694 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,711 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,725 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,741 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,755 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,771 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,784 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,800 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,813 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,828 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,841 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:18,856 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:18,867 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:19,149 - INFO - integration_test - Step 11: MPC solve successful
2025-12-01 16:53:19,158 - INFO - integration_test - Step 11: Computed 10 numeric contouring constraints for visualization (s=2.400)
2025-12-01 16:53:19,159 - DEBUG - integration_test - Step 11: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:19,159 - INFO - integration_test - === Applying control at step 11 ===
2025-12-01 16:53:19,159 - INFO - integration_test -   Control dict from planner: {'a': 9.085686698654515e-06, 'w': -0.5507128215546904}
2025-12-01 16:53:19,159 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:19,159 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:19,160 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:19,160 - INFO - integration_test - Step 11 completed in 0.637s
2025-12-01 16:53:19,183 - INFO - integration_test - Step 12 (contouring until path end)
2025-12-01 16:53:19,184 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.14027173 1.3279325  0.82381229 3.00000003 2.69999992]
2025-12-01 16:53:19,184 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.279m)
2025-12-01 16:53:19,184 - DEBUG - integration_test -   Set spline state to 2.7000
2025-12-01 16:53:19,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:19,186 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:19,200 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.140, 1.328), path_start=(0.000, 0.000), dist=2.519m
2025-12-01 16:53:19,200 - WARNING - integration_test - Could not update reference path at step 12: x and y must have the same length
2025-12-01 16:53:19,200 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2025-12-01 16:53:19,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:19,204 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:19,204 - INFO - integration_test - Warmstart k=0: x0=2.140271729511457 , y0=1.3279324960294498 , psi0=0.8238122903361765 , v0=3.0 , spline0=2.6999999199753035 , a0=0.0 , w0=0.0
2025-12-01 16:53:19,204 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:19,205 - INFO - integration_test - Dyn residual k=0: pred=[2.3441004044055553, 1.548054896731686, 0.8238122903361765, 3.0, 2.999999919975304], ws=[2.3441004044055553, 1.548054896731686, 0.8238122903361766, 3.0, 3.74172109121521], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.7417211712399063], res_norm=7.417e-01
2025-12-01 16:53:19,206 - INFO - integration_test - Dyn residual k=1: pred=[2.547929079299654, 1.7681772974339223, 0.8238122903361766, 3.0, 4.04172109121521], ws=[2.547929079299654, 1.7681772974339223, 0.8238122903361766, 3.0, 4.756995448299209], res=[0.0, 0.0, 0.0, 0.0, -0.7152743570839988], res_norm=7.153e-01
2025-12-01 16:53:19,207 - INFO - integration_test - Dyn residual k=2: pred=[2.7517577541937523, 1.9882996981361585, 0.8238122903361766, 3.0, 5.056995448299209], ws=[2.7517577541937523, 1.9882996981361585, 0.8238122903361766, 3.0, 5.809980471857823], res=[0.0, 0.0, 0.0, 0.0, -0.7529850235586144], res_norm=7.530e-01
2025-12-01 16:53:19,221 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,234 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,249 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,261 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,277 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,290 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,306 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,318 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,334 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,346 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,362 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,374 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,391 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,403 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,419 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,431 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,447 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,459 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,488 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,503 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,514 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:19,802 - INFO - integration_test - Step 12: MPC solve successful
2025-12-01 16:53:19,810 - INFO - integration_test - Step 12: Computed 10 numeric contouring constraints for visualization (s=2.700)
2025-12-01 16:53:19,811 - DEBUG - integration_test - Step 12: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:19,811 - INFO - integration_test - === Applying control at step 12 ===
2025-12-01 16:53:19,811 - INFO - integration_test -   Control dict from planner: {'a': -1.1185325721532346e-10, 'w': -0.4058431129555262}
2025-12-01 16:53:19,811 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:19,811 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:19,812 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:19,812 - INFO - integration_test - Step 12 completed in 0.629s
2025-12-01 16:53:19,834 - INFO - integration_test - Step 13 (contouring until path end)
2025-12-01 16:53:19,835 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.3485106  1.54385892 0.78322798 3.00000003 2.99999992]
2025-12-01 16:53:19,835 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.328m)
2025-12-01 16:53:19,835 - DEBUG - integration_test -   Set spline state to 3.0000
2025-12-01 16:53:19,837 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:19,837 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:19,852 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.349, 1.544), path_start=(0.000, 0.000), dist=2.811m
2025-12-01 16:53:19,852 - WARNING - integration_test - Could not update reference path at step 13: x and y must have the same length
2025-12-01 16:53:19,852 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2025-12-01 16:53:19,863 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:19,864 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:19,865 - INFO - integration_test - Warmstart k=0: x0=2.3485106023432216 , y0=1.5438589217891046 , psi0=0.7832279790406239 , v0=3.0 , spline0=2.9999999229739296 , a0=0.0 , w0=0.0
2025-12-01 16:53:19,865 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:19,865 - INFO - integration_test - Dyn residual k=0: pred=[2.5611025024214222, 1.7555300913449519, 0.7832279790406239, 3.0, 3.29999992297393], ws=[2.5611025024214222, 1.7555300913449519, 0.7832279790406238, 3.0, 4.07384096495637], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.7738410419824397], res_norm=7.738e-01
2025-12-01 16:53:19,866 - INFO - integration_test - Dyn residual k=1: pred=[2.773694402499623, 1.9672012609007992, 0.7832279790406238, 3.0, 4.373840964956369], ws=[2.773694402499623, 1.9672012609007992, 0.7832279790406238, 3.0, 5.187199462265658], res=[0.0, 0.0, 0.0, 0.0, -0.8133584973092889], res_norm=8.134e-01
2025-12-01 16:53:19,867 - INFO - integration_test - Dyn residual k=2: pred=[2.9862863025778235, 2.1788724304566465, 0.7832279790406238, 3.0, 5.487199462265658], ws=[2.986286302577824, 2.1788724304566465, 0.7832279790406238, 3.0, 6.2831281610908], res=[-4.440892098500626e-16, 0.0, 0.0, 0.0, -0.7959286988251417], res_norm=7.959e-01
2025-12-01 16:53:19,882 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,895 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,911 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,923 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,939 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,952 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,967 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:19,981 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:19,997 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,010 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,025 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,038 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,053 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,066 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,082 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,095 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,110 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,123 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,138 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,151 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,166 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,176 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:20,429 - INFO - integration_test - Step 13: MPC solve successful
2025-12-01 16:53:20,437 - INFO - integration_test - Step 13: Computed 10 numeric contouring constraints for visualization (s=3.000)
2025-12-01 16:53:20,438 - DEBUG - integration_test - Step 13: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:20,438 - INFO - integration_test - === Applying control at step 13 ===
2025-12-01 16:53:20,438 - INFO - integration_test -   Control dict from planner: {'a': -6.039901562584836e-09, 'w': -0.6566975206970083}
2025-12-01 16:53:20,438 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:20,438 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:20,439 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:20,439 - INFO - integration_test - Step 13 completed in 0.605s
2025-12-01 16:53:20,459 - INFO - integration_test - Step 14 (contouring until path end)
2025-12-01 16:53:20,460 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.56789744 1.74840007 0.71755823 3.00000003 3.29999993]
2025-12-01 16:53:20,461 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.192m)
2025-12-01 16:53:20,461 - DEBUG - integration_test -   Set spline state to 3.3000
2025-12-01 16:53:20,463 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:20,463 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:20,478 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.568, 1.748), path_start=(0.000, 0.000), dist=3.107m
2025-12-01 16:53:20,479 - WARNING - integration_test - Could not update reference path at step 14: x and y must have the same length
2025-12-01 16:53:20,479 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2025-12-01 16:53:20,483 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:20,484 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:20,484 - INFO - integration_test - Warmstart k=0: x0=2.5678974371814647 , y0=1.7484000678177996 , psi0=0.7175582269709231 , v0=3.0 , spline0=3.299999925912157 , a0=0.0 , w0=0.0
2025-12-01 16:53:20,484 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:20,485 - INFO - integration_test - Dyn residual k=0: pred=[2.793921503387748, 1.9456641585580494, 0.7175582269709231, 3.0, 3.599999925912157], ws=[2.793921503387748, 1.9456641585580494, 0.7175582269709233, 3.0, 4.483692092524003], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.883692166611846], res_norm=8.837e-01
2025-12-01 16:53:20,486 - INFO - integration_test - Dyn residual k=1: pred=[3.0199455695940314, 2.1429282492982993, 0.7175582269709233, 3.0, 4.783692092524003], ws=[3.0199455695940314, 2.1429282492982993, 0.7175582269709233, 3.0, 5.653917261841127], res=[0.0, 0.0, 0.0, 0.0, -0.8702251693171243], res_norm=8.702e-01
2025-12-01 16:53:20,487 - INFO - integration_test - Dyn residual k=2: pred=[3.2459696358003147, 2.3401923400385494, 0.7175582269709233, 3.0, 5.953917261841127], ws=[3.2459696358003147, 2.3401923400385494, 0.7175582269709233, 3.0, 6.810155674813217], res=[0.0, 0.0, 0.0, 0.0, -0.8562384129720897], res_norm=8.562e-01
2025-12-01 16:53:20,503 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,518 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,534 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,546 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,574 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,590 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,603 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,618 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,631 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,646 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,658 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,673 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,687 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,702 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,715 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,730 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,742 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,758 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,771 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:20,787 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:20,798 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:21,022 - INFO - integration_test - Step 14: MPC solve successful
2025-12-01 16:53:21,031 - INFO - integration_test - Step 14: Computed 10 numeric contouring constraints for visualization (s=3.300)
2025-12-01 16:53:21,031 - DEBUG - integration_test - Step 14: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:21,031 - INFO - integration_test - === Applying control at step 14 ===
2025-12-01 16:53:21,031 - INFO - integration_test -   Control dict from planner: {'a': 4.116511872596968e-09, 'w': -0.5301263745800756}
2025-12-01 16:53:21,031 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:21,031 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:21,032 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:21,033 - INFO - integration_test - Step 14 completed in 0.573s
2025-12-01 16:53:21,054 - INFO - integration_test - Step 15 (contouring until path end)
2025-12-01 16:53:21,055 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.79904317 1.93958211 0.66454559 3.00000003 3.59999993]
2025-12-01 16:53:21,055 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.316m)
2025-12-01 16:53:21,055 - DEBUG - integration_test -   Set spline state to 3.6000
2025-12-01 16:53:21,057 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:21,057 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:21,072 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.799, 1.940), path_start=(0.000, 0.000), dist=3.405m
2025-12-01 16:53:21,073 - WARNING - integration_test - Could not update reference path at step 15: x and y must have the same length
2025-12-01 16:53:21,073 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2025-12-01 16:53:21,076 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:21,077 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:21,077 - INFO - integration_test - Warmstart k=0: x0=2.7990431742063575 , y0=1.9395821144384662 , psi0=0.6645455895129155 , v0=3.0 , spline0=3.599999928891549 , a0=0.0 , w0=0.0
2025-12-01 16:53:21,077 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:21,078 - INFO - integration_test - Dyn residual k=0: pred=[3.0352023048108743, 2.1245925601763185, 0.6645455895129155, 3.0, 3.899999928891549], ws=[3.0352023048108743, 2.1245925601763185, 0.6645455895129153, 3.0, 4.814597591934195], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.9145976630426462], res_norm=9.146e-01
2025-12-01 16:53:21,079 - INFO - integration_test - Dyn residual k=1: pred=[3.271361435415391, 2.3096030059141706, 0.6645455895129153, 3.0, 5.114597591934195], ws=[3.271361435415391, 2.3096030059141706, 0.6645455895129153, 3.0, 6.016067567258345], res=[0.0, 0.0, 0.0, 0.0, -0.90146997532415], res_norm=9.015e-01
2025-12-01 16:53:21,080 - INFO - integration_test - Dyn residual k=2: pred=[3.507520566019908, 2.4946134516520226, 0.6645455895129153, 3.0, 6.316067567258345], ws=[3.507520566019908, 2.4946134516520226, 0.6645455895129153, 3.0, 7.275742227820794], res=[0.0, 0.0, 0.0, 0.0, -0.9596746605624498], res_norm=9.597e-01
2025-12-01 16:53:21,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,109 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,124 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,137 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,153 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,165 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,182 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,195 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,210 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,223 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,238 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,250 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,266 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,279 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,295 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,307 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,322 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,335 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,350 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,363 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,379 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,390 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:21,636 - INFO - integration_test - Step 15: MPC solve successful
2025-12-01 16:53:21,645 - INFO - integration_test - Step 15: Computed 10 numeric contouring constraints for visualization (s=3.600)
2025-12-01 16:53:21,645 - DEBUG - integration_test - Step 15: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:21,645 - INFO - integration_test - === Applying control at step 15 ===
2025-12-01 16:53:21,645 - INFO - integration_test -   Control dict from planner: {'a': 1.3310050057981692e-09, 'w': -0.3181025286571514}
2025-12-01 16:53:21,645 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:21,645 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:21,647 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:21,647 - INFO - integration_test - Step 15 completed in 0.593s
2025-12-01 16:53:21,674 - INFO - integration_test - Step 16 (contouring until path end)
2025-12-01 16:53:21,674 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.03810485 2.12080554 0.63273534 3.00000003 3.89999993]
2025-12-01 16:53:21,675 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.157m)
2025-12-01 16:53:21,675 - DEBUG - integration_test -   Set spline state to 3.9000
2025-12-01 16:53:21,677 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:21,677 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:21,693 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.038, 2.121), path_start=(0.000, 0.000), dist=3.705m
2025-12-01 16:53:21,693 - WARNING - integration_test - Could not update reference path at step 16: x and y must have the same length
2025-12-01 16:53:21,693 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2025-12-01 16:53:21,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:21,698 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:21,698 - INFO - integration_test - Warmstart k=0: x0=3.0381048477657218 , y0=2.120805537745269 , psi0=0.6327353366472004 , v0=3.0 , spline0=3.8999999318842513 , a0=0.0 , w0=0.0
2025-12-01 16:53:21,698 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:21,699 - INFO - integration_test - Dyn residual k=0: pred=[3.28002874123139, 2.2982113712750936, 0.6327353366472004, 3.0, 4.199999931884252], ws=[3.28002874123139, 2.2982113712750936, 0.6327353366472002, 3.0, 5.225875666271319], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.0258757343870677], res_norm=1.026e+00
2025-12-01 16:53:21,700 - INFO - integration_test - Dyn residual k=1: pred=[3.5219526346970587, 2.475617204804918, 0.6327353366472002, 3.0, 5.525875666271319], ws=[3.5219526346970587, 2.475617204804918, 0.6327353366472002, 3.0, 6.551998034526227], res=[0.0, 0.0, 0.0, 0.0, -1.0261223682549083], res_norm=1.026e+00
2025-12-01 16:53:21,701 - INFO - integration_test - Dyn residual k=2: pred=[3.763876528162727, 2.6530230383347426, 0.6327353366472002, 3.0, 6.851998034526227], ws=[3.763876528162727, 2.6530230383347426, 0.6327353366472002, 3.0, 7.879624412333535], res=[0.0, 0.0, 0.0, 0.0, -1.0276263778073078], res_norm=1.028e+00
2025-12-01 16:53:21,716 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,729 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,746 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,759 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,776 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,789 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,804 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,817 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,832 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,845 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,860 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,873 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,888 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,901 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,916 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,929 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,944 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,956 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:21,972 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:21,984 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,000 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,011 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:22,259 - INFO - integration_test - Step 16: MPC solve successful
2025-12-01 16:53:22,267 - INFO - integration_test - Step 16: Computed 10 numeric contouring constraints for visualization (s=3.900)
2025-12-01 16:53:22,267 - DEBUG - integration_test - Step 16: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:22,267 - INFO - integration_test - === Applying control at step 16 ===
2025-12-01 16:53:22,267 - INFO - integration_test -   Control dict from planner: {'a': 4.845663150675499e-10, 'w': -0.34492275302365755}
2025-12-01 16:53:22,267 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:22,267 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:22,268 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:22,269 - INFO - integration_test - Step 16 completed in 0.595s
2025-12-01 16:53:22,292 - INFO - integration_test - Step 17 (contouring until path end)
2025-12-01 16:53:22,293 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.28304004 2.29400436 0.59824306 3.00000003 4.19999993]
2025-12-01 16:53:22,293 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.319m)
2025-12-01 16:53:22,293 - DEBUG - integration_test -   Set spline state to 4.2000
2025-12-01 16:53:22,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:22,295 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:22,309 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.283, 2.294), path_start=(0.000, 0.000), dist=4.005m
2025-12-01 16:53:22,309 - WARNING - integration_test - Could not update reference path at step 17: x and y must have the same length
2025-12-01 16:53:22,310 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2025-12-01 16:53:22,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:22,314 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:22,314 - INFO - integration_test - Warmstart k=0: x0=3.283040038589361 , y0=2.294004358923346 , psi0=0.5982430613448346 , v0=3.0 , spline0=4.1999999348818 , a0=0.0 , w0=0.0
2025-12-01 16:53:22,314 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:22,315 - INFO - integration_test - Dyn residual k=0: pred=[3.53093795341457, 2.462961820508543, 0.5982430613448346, 3.0, 4.499999934881799], ws=[3.53093795341457, 2.462961820508543, 0.5982430613448346, 3.0, 5.555308983722584], res=[0.0, 0.0, 0.0, 0.0, -1.055309048840785], res_norm=1.055e+00
2025-12-01 16:53:22,315 - INFO - integration_test - Dyn residual k=1: pred=[3.778835868239779, 2.6319192820937403, 0.5982430613448346, 3.0, 5.855308983722584], ws=[3.778835868239779, 2.6319192820937403, 0.5982430613448346, 3.0, 6.911952829802093], res=[0.0, 0.0, 0.0, 0.0, -1.056643846079509], res_norm=1.057e+00
2025-12-01 16:53:22,316 - INFO - integration_test - Dyn residual k=2: pred=[4.026733783064988, 2.8008767436789377, 0.5982430613448346, 3.0, 7.211952829802093], ws=[4.026733783064988, 2.8008767436789377, 0.5982430613448346, 3.0, 8.27125010375199], res=[0.0, 0.0, 0.0, 0.0, -1.0592972739498974], res_norm=1.059e+00
2025-12-01 16:53:22,331 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,344 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,359 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,372 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,389 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,401 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,417 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,429 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,444 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,457 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,472 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,485 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,500 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,513 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,528 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,541 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,556 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,568 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,584 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,597 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:22,612 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:22,623 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:23,043 - INFO - integration_test - Step 17: MPC solve successful
2025-12-01 16:53:23,051 - INFO - integration_test - Step 17: Computed 10 numeric contouring constraints for visualization (s=4.200)
2025-12-01 16:53:23,051 - DEBUG - integration_test - Step 17: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:23,051 - INFO - integration_test - === Applying control at step 17 ===
2025-12-01 16:53:23,051 - INFO - integration_test -   Control dict from planner: {'a': 1.6136047269499026e-10, 'w': -0.2616409267224766}
2025-12-01 16:53:23,051 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:23,051 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:23,052 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:23,053 - INFO - integration_test - Step 17 completed in 0.760s
2025-12-01 16:53:23,073 - INFO - integration_test - Step 18 (contouring until path end)
2025-12-01 16:53:23,073 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.53311986 2.45969972 0.57207897 3.00000003 4.49999994]
2025-12-01 16:53:23,074 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.155m)
2025-12-01 16:53:23,074 - DEBUG - integration_test -   Set spline state to 4.5000
2025-12-01 16:53:23,075 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:23,075 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:23,089 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.533, 2.460), path_start=(0.000, 0.000), dist=4.305m
2025-12-01 16:53:23,090 - WARNING - integration_test - Could not update reference path at step 18: x and y must have the same length
2025-12-01 16:53:23,090 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2025-12-01 16:53:23,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:23,094 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:23,094 - INFO - integration_test - Warmstart k=0: x0=3.53311985668729 , y0=2.4596997189288956 , psi0=0.572078968672587 , v0=3.0 , spline0=4.499999937880961 , a0=0.0 , w0=0.0
2025-12-01 16:53:23,094 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:23,095 - INFO - integration_test - Dyn residual k=0: pred=[3.7853530402230113, 2.62211406904438, 0.572078968672587, 3.0, 4.799999937880961], ws=[3.7853530402230118, 2.62211406904438, 0.5720789686725869, 3.0, 5.968010539377037], res=[-4.440892098500626e-16, 0.0, 1.1102230246251565e-16, 0.0, -1.1680106014960758], res_norm=1.168e+00
2025-12-01 16:53:23,095 - INFO - integration_test - Dyn residual k=1: pred=[4.037586223758733, 2.784528419159864, 0.5720789686725869, 3.0, 6.268010539377037], ws=[4.037586223758733, 2.784528419159864, 0.5720789686725869, 3.0, 7.449459872108238], res=[0.0, 0.0, 0.0, 0.0, -1.1814493327312015], res_norm=1.181e+00
2025-12-01 16:53:23,096 - INFO - integration_test - Dyn residual k=2: pred=[4.289819407294455, 2.9469427692753483, 0.5720789686725869, 3.0, 7.749459872108238], ws=[4.289819407294455, 2.9469427692753483, 0.5720789686725869, 3.0, 8.87329948587], res=[0.0, 0.0, 0.0, 0.0, -1.1238396137617617], res_norm=1.124e+00
2025-12-01 16:53:23,110 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,123 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,140 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,153 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,169 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,183 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,198 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,212 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,227 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,241 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,257 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,269 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,297 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,313 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,325 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,340 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,352 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,368 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,380 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,395 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,405 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:23,649 - INFO - integration_test - Step 18: MPC solve successful
2025-12-01 16:53:23,656 - INFO - integration_test - Step 18: Computed 10 numeric contouring constraints for visualization (s=4.500)
2025-12-01 16:53:23,657 - DEBUG - integration_test - Step 18: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:23,657 - INFO - integration_test - === Applying control at step 18 ===
2025-12-01 16:53:23,657 - INFO - integration_test -   Control dict from planner: {'a': 5.3641364549471434e-11, 'w': -0.2589084170749638}
2025-12-01 16:53:23,657 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:23,657 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:23,658 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:23,659 - INFO - integration_test - Step 18 completed in 0.586s
2025-12-01 16:53:23,683 - INFO - integration_test - Step 19 (contouring until path end)
2025-12-01 16:53:23,683 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.78742727 2.61883084 0.54618813 3.00000003 4.79999994]
2025-12-01 16:53:23,684 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.301m)
2025-12-01 16:53:23,684 - DEBUG - integration_test -   Set spline state to 4.8000
2025-12-01 16:53:23,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:23,686 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:23,700 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.787, 2.619), path_start=(0.000, 0.000), dist=4.605m
2025-12-01 16:53:23,700 - WARNING - integration_test - Could not update reference path at step 19: x and y must have the same length
2025-12-01 16:53:23,700 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2025-12-01 16:53:23,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:23,704 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:23,705 - INFO - integration_test - Warmstart k=0: x0=3.787427268267083 , y0=2.6188308435963545 , psi0=0.5461881269650907 , v0=3.0 , spline0=4.799999940880659 , a0=0.0 , w0=0.0
2025-12-01 16:53:23,705 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:23,705 - INFO - integration_test - Dyn residual k=0: pred=[4.04378049052047, 2.7746609608404404, 0.5461881269650907, 3.0, 5.099999940880659], ws=[4.04378049052047, 2.7746609608404404, 0.5461881269650908, 3.0, 6.29582903724123], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.1958290963605709], res_norm=1.196e+00
2025-12-01 16:53:23,706 - INFO - integration_test - Dyn residual k=1: pred=[4.3001337127738575, 2.9304910780845264, 0.5461881269650908, 3.0, 6.59582903724123], ws=[4.3001337127738575, 2.9304910780845264, 0.5461881269650908, 3.0, 7.806717948090471], res=[0.0, 0.0, 0.0, 0.0, -1.210888910849241], res_norm=1.211e+00
2025-12-01 16:53:23,707 - INFO - integration_test - Dyn residual k=2: pred=[4.5564869350272446, 3.0863211953286123, 0.5461881269650908, 3.0, 8.106717948090472], ws=[4.5564869350272446, 3.0863211953286123, 0.5461881269650908, 3.0, 9.33020936556432], res=[0.0, 0.0, 0.0, 0.0, -1.2234914174738485], res_norm=1.223e+00
2025-12-01 16:53:23,722 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,735 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,751 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,763 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,779 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,792 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,812 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,825 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,841 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,853 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,869 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,882 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,897 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,910 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,926 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,939 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,954 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,966 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:23,982 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:23,994 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,009 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,020 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:24,271 - INFO - integration_test - Step 19: MPC solve successful
2025-12-01 16:53:24,279 - INFO - integration_test - Step 19: Computed 10 numeric contouring constraints for visualization (s=4.800)
2025-12-01 16:53:24,279 - DEBUG - integration_test - Step 19: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:24,279 - INFO - integration_test - === Applying control at step 19 ===
2025-12-01 16:53:24,280 - INFO - integration_test -   Control dict from planner: {'a': -3.5177429034432596e-08, 'w': -0.2177130091846731}
2025-12-01 16:53:24,280 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:24,280 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:24,281 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:24,281 - INFO - integration_test - Step 19 completed in 0.598s
2025-12-01 16:53:24,305 - INFO - integration_test - Step 20 (contouring until path end)
2025-12-01 16:53:24,306 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.04545649 2.77185819 0.52441683 3.00000003 5.09999994]
2025-12-01 16:53:24,306 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.171m)
2025-12-01 16:53:24,306 - DEBUG - integration_test -   Set spline state to 5.1000
2025-12-01 16:53:24,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:24,308 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:24,323 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.045, 2.772), path_start=(0.000, 0.000), dist=4.904m
2025-12-01 16:53:24,323 - WARNING - integration_test - Could not update reference path at step 20: x and y must have the same length
2025-12-01 16:53:24,323 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2025-12-01 16:53:24,326 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:24,328 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:24,328 - INFO - integration_test - Warmstart k=0: x0=4.045456487176709 , y0=2.7718581909292337 , psi0=0.5244168260466233 , v0=3.0 , spline0=5.099999943528583 , a0=0.0 , w0=0.0
2025-12-01 16:53:24,328 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:24,330 - INFO - integration_test - Dyn residual k=0: pred=[4.305141313826004, 2.922070676455989, 0.5244168260466233, 3.0, 5.399999943528583], ws=[4.305141313826004, 2.922070676455989, 0.5244168260466235, 3.0, 6.709752859136907], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -1.3097529156083247], res_norm=1.310e+00
2025-12-01 16:53:24,331 - INFO - integration_test - Dyn residual k=1: pred=[4.564826140475299, 3.0722831619827446, 0.5244168260466235, 3.0, 7.009752859136907], ws=[4.564826140475299, 3.0722831619827446, 0.5244168260466235, 3.0, 8.273939019716956], res=[0.0, 0.0, 0.0, 0.0, -1.2641861605800484], res_norm=1.264e+00
2025-12-01 16:53:24,332 - INFO - integration_test - Dyn residual k=2: pred=[4.824510967124594, 3.2224956475095, 0.5244168260466235, 3.0, 8.573939019716956], ws=[4.824510967124594, 3.2224956475095, 0.5244168260466235, 3.0, 9.852324469079484], res=[0.0, 0.0, 0.0, 0.0, -1.2783854493625277], res_norm=1.278e+00
2025-12-01 16:53:24,348 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,364 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,382 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,396 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,413 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,425 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,440 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,453 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,468 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,481 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,497 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,509 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,525 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,537 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,552 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,565 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,580 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,593 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,609 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,621 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:24,636 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:24,646 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:25,310 - INFO - integration_test - Step 20: MPC solve successful
2025-12-01 16:53:25,318 - INFO - integration_test - Step 20: Computed 10 numeric contouring constraints for visualization (s=5.100)
2025-12-01 16:53:25,318 - DEBUG - integration_test - Step 20: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:25,318 - INFO - integration_test - === Applying control at step 20 ===
2025-12-01 16:53:25,318 - INFO - integration_test -   Control dict from planner: {'a': 2.151557869329195e-08, 'w': -0.27553655790573084}
2025-12-01 16:53:25,318 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:25,318 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:25,319 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:25,319 - INFO - integration_test - Step 20 completed in 1.014s
2025-12-01 16:53:25,340 - INFO - integration_test - Step 21 (contouring until path end)
2025-12-01 16:53:25,340 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.30717778 2.91847426 0.49686317 3.00000003 5.39999995]
2025-12-01 16:53:25,341 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.294m)
2025-12-01 16:53:25,341 - DEBUG - integration_test -   Set spline state to 5.4000
2025-12-01 16:53:25,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:25,342 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:25,356 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.307, 2.918), path_start=(0.000, 0.000), dist=5.203m
2025-12-01 16:53:25,356 - WARNING - integration_test - Could not update reference path at step 21: x and y must have the same length
2025-12-01 16:53:25,356 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2025-12-01 16:53:25,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:25,360 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:25,360 - INFO - integration_test - Warmstart k=0: x0=4.307177779208424 , y0=2.918474264744349 , psi0=0.49686317025605026 , v0=3.0 , spline0=5.399999946391662 , a0=0.0 , w0=0.0
2025-12-01 16:53:25,360 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:25,361 - INFO - integration_test - Dyn residual k=0: pred=[4.5709024146510835, 3.0614753719450847, 0.49686317025605026, 3.0, 5.699999946391662], ws=[4.5709024146510835, 3.0614753719450847, 0.4968631702560504, 3.0, 7.1223386052066555], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -1.4223386588149936], res_norm=1.422e+00
2025-12-01 16:53:25,362 - INFO - integration_test - Dyn residual k=1: pred=[4.834627050093743, 3.204476479145821, 0.4968631702560504, 3.0, 7.422338605206655], ws=[4.834627050093743, 3.204476479145821, 0.4968631702560504, 3.0, 8.809366667731418], res=[0.0, 0.0, 0.0, 0.0, -1.3870280625247622], res_norm=1.387e+00
2025-12-01 16:53:25,362 - INFO - integration_test - Dyn residual k=2: pred=[5.098351685536402, 3.347477586346557, 0.4968631702560504, 3.0, 9.109366667731418], ws=[5.098351685536402, 3.347477586346557, 0.4968631702560504, 3.0, 10.443795295039696], res=[0.0, 0.0, 0.0, 0.0, -1.3344286273082773], res_norm=1.334e+00
2025-12-01 16:53:25,377 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,391 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,407 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,420 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,435 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,448 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,463 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,476 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,492 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,504 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,520 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,534 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,550 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,563 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,581 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,595 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,612 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,625 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,642 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,655 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:25,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:25,683 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:25,944 - INFO - integration_test - Step 21: MPC solve successful
2025-12-01 16:53:25,952 - INFO - integration_test - Step 21: Computed 10 numeric contouring constraints for visualization (s=5.400)
2025-12-01 16:53:25,952 - DEBUG - integration_test - Step 21: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:25,952 - INFO - integration_test - === Applying control at step 21 ===
2025-12-01 16:53:25,952 - INFO - integration_test -   Control dict from planner: {'a': 9.125267577525192e-09, 'w': -0.14567866789266304}
2025-12-01 16:53:25,952 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:25,952 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:25,953 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:25,954 - INFO - integration_test - Step 21 completed in 0.614s
2025-12-01 16:53:25,978 - INFO - integration_test - Step 22 (contouring until path end)
2025-12-01 16:53:25,979 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.57193468 3.0595494  0.4822953  3.00000003 5.69999995]
2025-12-01 16:53:25,979 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.196m)
2025-12-01 16:53:25,979 - DEBUG - integration_test -   Set spline state to 5.7000
2025-12-01 16:53:25,981 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:25,981 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:25,995 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.572, 3.060), path_start=(0.000, 0.000), dist=5.501m
2025-12-01 16:53:25,995 - WARNING - integration_test - Could not update reference path at step 22: x and y must have the same length
2025-12-01 16:53:25,995 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2025-12-01 16:53:25,998 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:25,999 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:25,999 - INFO - integration_test - Warmstart k=0: x0=4.571934681379563 , y0=3.059549396647311 , psi0=0.48229530346678395 , v0=3.0 , spline0=5.699999949345995 , a0=0.0 , w0=0.0
2025-12-01 16:53:25,999 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:26,000 - INFO - integration_test - Dyn residual k=0: pred=[4.8377144805311065, 3.198693560603136, 0.48229530346678395, 3.0, 5.999999949345995], ws=[4.8377144805311065, 3.198693560603136, 0.48229530346678384, 3.0, 7.4506115481738995], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.450611598827905], res_norm=1.451e+00
2025-12-01 16:53:26,001 - INFO - integration_test - Dyn residual k=1: pred=[5.10349427968265, 3.3378377245589608, 0.48229530346678384, 3.0, 7.750611548173899], ws=[5.10349427968265, 3.3378377245589608, 0.48229530346678384, 3.0, 9.164126115951852], res=[0.0, 0.0, 0.0, 0.0, -1.4135145677779528], res_norm=1.414e+00
2025-12-01 16:53:26,002 - INFO - integration_test - Dyn residual k=2: pred=[5.369274078834193, 3.4769818885147856, 0.48229530346678384, 3.0, 9.464126115951853], ws=[5.369274078834193, 3.4769818885147856, 0.48229530346678384, 3.0, 10.82311406442825], res=[0.0, 0.0, 0.0, 0.0, -1.358987948476397], res_norm=1.359e+00
2025-12-01 16:53:26,016 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,029 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,045 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,058 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,074 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,086 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,102 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,115 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,130 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,142 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,157 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,170 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,186 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,199 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,214 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,226 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,241 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,254 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,269 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,282 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,297 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,308 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:26,590 - INFO - integration_test - Step 22: MPC solve successful
2025-12-01 16:53:26,599 - INFO - integration_test - Step 22: Computed 10 numeric contouring constraints for visualization (s=5.700)
2025-12-01 16:53:26,600 - DEBUG - integration_test - Step 22: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:26,600 - INFO - integration_test - === Applying control at step 22 ===
2025-12-01 16:53:26,600 - INFO - integration_test -   Control dict from planner: {'a': 3.0415574031792087e-09, 'w': -0.3615044743585648}
2025-12-01 16:53:26,600 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:26,600 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:26,601 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:26,602 - INFO - integration_test - Step 22 completed in 0.623s
2025-12-01 16:53:26,626 - INFO - integration_test - Step 23 (contouring until path end)
2025-12-01 16:53:26,627 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.84017139 3.19385975 0.44614486 3.00000003 5.99999995]
2025-12-01 16:53:26,627 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.416m)
2025-12-01 16:53:26,627 - DEBUG - integration_test -   Set spline state to 6.0000
2025-12-01 16:53:26,629 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:26,629 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:26,645 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.840, 3.194), path_start=(0.000, 0.000), dist=5.799m
2025-12-01 16:53:26,646 - WARNING - integration_test - Could not update reference path at step 23: x and y must have the same length
2025-12-01 16:53:26,646 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2025-12-01 16:53:26,649 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:26,651 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:26,651 - INFO - integration_test - Warmstart k=0: x0=4.840171385860702 , y0=3.1938597509501205 , psi0=0.44614485603092746 , v0=3.0 , spline0=5.999999952330743 , a0=0.0 , w0=0.0
2025-12-01 16:53:26,651 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:26,652 - INFO - integration_test - Dyn residual k=0: pred=[5.110806564364623, 3.323307038121969, 0.44614485603092746, 3.0, 6.299999952330743], ws=[5.110806564364623, 3.323307038121969, 0.44614485603092735, 3.0, 7.863293383655611], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.563293431324868], res_norm=1.563e+00
2025-12-01 16:53:26,653 - INFO - integration_test - Dyn residual k=1: pred=[5.381441742868543, 3.4527543252938173, 0.44614485603092735, 3.0, 8.163293383655612], ws=[5.381441742868543, 3.4527543252938173, 0.44614485603092735, 3.0, 9.693608475146622], res=[0.0, 0.0, 0.0, 0.0, -1.5303150914910102], res_norm=1.530e+00
2025-12-01 16:53:26,654 - INFO - integration_test - Dyn residual k=2: pred=[5.652076921372464, 3.5822016124656657, 0.44614485603092735, 3.0, 9.993608475146623], ws=[5.652076921372464, 3.5822016124656657, 0.44614485603092735, 3.0, 11.401886485033865], res=[0.0, 0.0, 0.0, 0.0, -1.4082780098872423], res_norm=1.408e+00
2025-12-01 16:53:26,670 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,685 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,703 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,717 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,733 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,745 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,760 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,773 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,789 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,802 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,818 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,830 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,858 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,873 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,886 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,902 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,914 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,929 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,942 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:26,957 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:26,967 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:27,221 - INFO - integration_test - Step 23: MPC solve successful
2025-12-01 16:53:27,230 - INFO - integration_test - Step 23: Computed 10 numeric contouring constraints for visualization (s=6.000)
2025-12-01 16:53:27,231 - DEBUG - integration_test - Step 23: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:27,231 - INFO - integration_test - === Applying control at step 23 ===
2025-12-01 16:53:27,231 - INFO - integration_test -   Control dict from planner: {'a': 1.0127846897072718e-09, 'w': -0.11444546762867759}
2025-12-01 16:53:27,231 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:27,231 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:27,232 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:27,232 - INFO - integration_test - Step 23 completed in 0.606s
2025-12-01 16:53:27,253 - INFO - integration_test - Step 24 (contouring until path end)
2025-12-01 16:53:27,254 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.11154138 3.32175558 0.43470031 3.00000003 6.29999996]
2025-12-01 16:53:27,254 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.359m)
2025-12-01 16:53:27,254 - DEBUG - integration_test -   Set spline state to 6.3000
2025-12-01 16:53:27,256 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:27,256 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:27,272 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.112, 3.322), path_start=(0.000, 0.000), dist=6.096m
2025-12-01 16:53:27,272 - WARNING - integration_test - Could not update reference path at step 24: x and y must have the same length
2025-12-01 16:53:27,272 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2025-12-01 16:53:27,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:27,277 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:27,277 - INFO - integration_test - Warmstart k=0: x0=5.111541383930207 , y0=3.3217555820573392 , psi0=0.4347003092680597 , v0=3.0 , spline0=6.299999955325619 , a0=0.0 , w0=0.0
2025-12-01 16:53:27,277 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:27,278 - INFO - integration_test - Dyn residual k=0: pred=[5.383640272239414, 3.448097162627212, 0.4347003092680597, 3.0, 6.599999955325619], ws=[5.383640272239414, 3.448097162627212, 0.43470030926805947, 3.0, 8.189872340625577], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -1.589872385299958], res_norm=1.590e+00
2025-12-01 16:53:27,278 - INFO - integration_test - Dyn residual k=1: pred=[5.655739160548621, 3.5744387431970845, 0.43470030926805947, 3.0, 8.489872340625578], ws=[5.655739160548621, 3.5744387431970845, 0.43470030926805947, 3.0, 10.044786139314139], res=[0.0, 0.0, 0.0, 0.0, -1.5549137986885615], res_norm=1.555e+00
2025-12-01 16:53:27,279 - INFO - integration_test - Dyn residual k=2: pred=[5.927838048857828, 3.700780323766957, 0.43470030926805947, 3.0, 10.34478613931414], ws=[5.927838048857828, 3.700780323766957, 0.43470030926805947, 3.0, 11.840137380254681], res=[0.0, 0.0, 0.0, 0.0, -1.4953512409405416], res_norm=1.495e+00
2025-12-01 16:53:27,295 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,309 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,326 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,340 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,357 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,371 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,388 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,402 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,418 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,432 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,448 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,461 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,477 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,490 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,505 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,518 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,533 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,545 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,575 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,590 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,601 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:27,853 - INFO - integration_test - Step 24: MPC solve successful
2025-12-01 16:53:27,861 - INFO - integration_test - Step 24: Computed 10 numeric contouring constraints for visualization (s=6.300)
2025-12-01 16:53:27,861 - DEBUG - integration_test - Step 24: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:27,861 - INFO - integration_test - === Applying control at step 24 ===
2025-12-01 16:53:27,861 - INFO - integration_test -   Control dict from planner: {'a': 3.384164195738626e-10, 'w': -0.36888121724161893}
2025-12-01 16:53:27,861 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:27,861 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:27,862 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:27,863 - INFO - integration_test - Step 24 completed in 0.609s
2025-12-01 16:53:27,888 - INFO - integration_test - Step 25 (contouring until path end)
2025-12-01 16:53:27,888 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.38590856 3.44305047 0.39781219 3.00000003 6.59999996]
2025-12-01 16:53:27,889 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.227m)
2025-12-01 16:53:27,889 - DEBUG - integration_test -   Set spline state to 6.6000
2025-12-01 16:53:27,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:27,890 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:27,905 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.386, 3.443), path_start=(0.000, 0.000), dist=6.392m
2025-12-01 16:53:27,905 - WARNING - integration_test - Could not update reference path at step 25: x and y must have the same length
2025-12-01 16:53:27,905 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2025-12-01 16:53:27,908 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:27,909 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:27,909 - INFO - integration_test - Warmstart k=0: x0=5.385908557917265 , y0=3.4430504735955387 , psi0=0.3978121875438978 , v0=3.0 , spline0=6.599999958323879 , a0=0.0 , w0=0.0
2025-12-01 16:53:27,909 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:27,910 - INFO - integration_test - Dyn residual k=0: pred=[5.662481786902483, 3.5592711645618627, 0.3978121875438978, 3.0, 6.899999958323879], ws=[5.662481786902483, 3.5592711645618627, 0.3978121875438978, 3.0, 8.601681867150765], res=[0.0, 0.0, 0.0, 0.0, -1.7016819088268855], res_norm=1.702e+00
2025-12-01 16:53:27,911 - INFO - integration_test - Dyn residual k=1: pred=[5.939055015887702, 3.6754918555281866, 0.3978121875438978, 3.0, 8.901681867150765], ws=[5.939055015887702, 3.6754918555281866, 0.3978121875438978, 3.0, 10.502331219975433], res=[0.0, 0.0, 0.0, 0.0, -1.600649352824668], res_norm=1.601e+00
2025-12-01 16:53:27,911 - INFO - integration_test - Dyn residual k=2: pred=[6.21562824487292, 3.7917125464945105, 0.3978121875438978, 3.0, 10.802331219975434], ws=[6.21562824487292, 3.7917125464945105, 0.3978121875438978, 3.0, 12.340447283186656], res=[0.0, 0.0, 0.0, 0.0, -1.5381160632112216], res_norm=1.538e+00
2025-12-01 16:53:27,926 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,939 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,955 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,967 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:27,984 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:27,997 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,012 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,025 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,041 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,053 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,069 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,082 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,098 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,110 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,126 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,138 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,154 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,166 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,183 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,196 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,211 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,222 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:28,503 - INFO - integration_test - Step 25: MPC solve successful
2025-12-01 16:53:28,511 - INFO - integration_test - Step 25: Computed 10 numeric contouring constraints for visualization (s=6.600)
2025-12-01 16:53:28,511 - DEBUG - integration_test - Step 25: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:28,511 - INFO - integration_test - === Applying control at step 25 ===
2025-12-01 16:53:28,511 - INFO - integration_test -   Control dict from planner: {'a': 1.0442014735681444e-10, 'w': -0.2378914673791715}
2025-12-01 16:53:28,511 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:28,511 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:28,512 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:28,513 - INFO - integration_test - Step 25 completed in 0.625s
2025-12-01 16:53:28,537 - INFO - integration_test - Step 26 (contouring until path end)
2025-12-01 16:53:28,537 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.66383803 3.55597064 0.37402304 3.00000003 6.89999996]
2025-12-01 16:53:28,538 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.382m)
2025-12-01 16:53:28,538 - DEBUG - integration_test -   Set spline state to 6.9000
2025-12-01 16:53:28,539 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:28,539 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:28,553 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.664, 3.556), path_start=(0.000, 0.000), dist=6.688m
2025-12-01 16:53:28,554 - WARNING - integration_test - Could not update reference path at step 26: x and y must have the same length
2025-12-01 16:53:28,554 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2025-12-01 16:53:28,557 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:28,558 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:28,558 - INFO - integration_test - Warmstart k=0: x0=5.663838034244033 , y0=3.555970638587125 , psi0=0.37402304080598064 , v0=3.0 , spline0=6.899999961323183 , a0=0.0 , w0=0.0
2025-12-01 16:53:28,558 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:28,559 - INFO - integration_test - Dyn residual k=0: pred=[5.943097537576755, 3.6655796245251446, 0.37402304080598064, 3.0, 7.199999961323183], ws=[5.943097537576755, 3.6655796245251446, 0.3740230408059806, 3.0, 8.926536718727844], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -1.726536757404661], res_norm=1.727e+00
2025-12-01 16:53:28,560 - INFO - integration_test - Dyn residual k=1: pred=[6.222357040909478, 3.7751886104631645, 0.3740230408059806, 3.0, 9.226536718727845], ws=[6.222357040909478, 3.7751886104631645, 0.3740230408059806, 3.0, 10.91187298438873], res=[0.0, 0.0, 0.0, 0.0, -1.6853362656608848], res_norm=1.685e+00
2025-12-01 16:53:28,560 - INFO - integration_test - Dyn residual k=2: pred=[6.501616544242201, 3.8847975964011843, 0.3740230408059806, 3.0, 11.21187298438873], ws=[6.501616544242201, 3.8847975964011843, 0.3740230408059806, 3.0, 12.769136081042248], res=[0.0, 0.0, 0.0, 0.0, -1.557263096653518], res_norm=1.557e+00
2025-12-01 16:53:28,576 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,589 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,606 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,618 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,634 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,646 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,662 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,675 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,691 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,704 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,719 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,731 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,746 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,759 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,774 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,787 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,802 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,815 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,830 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,843 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:28,858 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:28,868 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:29,131 - INFO - integration_test - Step 26: MPC solve successful
2025-12-01 16:53:29,139 - INFO - integration_test - Step 26: Computed 10 numeric contouring constraints for visualization (s=6.900)
2025-12-01 16:53:29,139 - DEBUG - integration_test - Step 26: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:29,140 - INFO - integration_test - === Applying control at step 26 ===
2025-12-01 16:53:29,140 - INFO - integration_test -   Control dict from planner: {'a': -1.696183403302161e-07, 'w': -0.22861578722910975}
2025-12-01 16:53:29,140 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:29,140 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:29,141 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:29,141 - INFO - integration_test - Step 26 completed in 0.604s
2025-12-01 16:53:29,164 - INFO - integration_test - Step 27 (contouring until path end)
2025-12-01 16:53:29,164 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.94432608 3.66237806 0.35116146 3.00000001 7.19999996]
2025-12-01 16:53:29,165 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.261m)
2025-12-01 16:53:29,165 - DEBUG - integration_test -   Set spline state to 7.2000
2025-12-01 16:53:29,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:29,166 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:29,181 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.944, 3.662), path_start=(0.000, 0.000), dist=6.982m
2025-12-01 16:53:29,182 - WARNING - integration_test - Could not update reference path at step 27: x and y must have the same length
2025-12-01 16:53:29,182 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2025-12-01 16:53:29,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:29,186 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:29,186 - INFO - integration_test - Warmstart k=0: x0=5.944326076997752 , y0=3.662378060132141 , psi0=0.3511614620830697 , v0=3.0 , spline0=7.199999962626304 , a0=0.0 , w0=0.0
2025-12-01 16:53:29,186 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:29,187 - INFO - integration_test - Dyn residual k=0: pred=[6.2260182219570845, 3.7655746466464746, 0.3511614620830697, 3.0, 7.499999962626304], ws=[6.226018221957085, 3.7655746466464746, 0.35116146208306986, 3.0, 9.336205278782966], res=[-8.881784197001252e-16, 0.0, -1.6653345369377348e-16, 0.0, -1.8362053161566623], res_norm=1.836e+00
2025-12-01 16:53:29,188 - INFO - integration_test - Dyn residual k=1: pred=[6.507710366916418, 3.868771233160808, 0.35116146208306986, 3.0, 9.636205278782967], ws=[6.507710366916418, 3.868771233160808, 0.35116146208306986, 3.0, 11.363405927048017], res=[0.0, 0.0, 0.0, 0.0, -1.7272006482650504], res_norm=1.727e+00
2025-12-01 16:53:29,189 - INFO - integration_test - Dyn residual k=2: pred=[6.78940251187575, 3.971967819675142, 0.35116146208306986, 3.0, 11.663405927048018], ws=[6.78940251187575, 3.971967819675142, 0.35116146208306986, 3.0, 13.26166218997043], res=[0.0, 0.0, 0.0, 0.0, -1.598256262922412], res_norm=1.598e+00
2025-12-01 16:53:29,203 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,217 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,232 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,245 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,260 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,273 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,289 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,302 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,317 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,330 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,345 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,358 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,373 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,386 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,402 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,415 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,430 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,443 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,459 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,472 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,489 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,500 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:29,768 - INFO - integration_test - Step 27: MPC solve successful
2025-12-01 16:53:29,776 - INFO - integration_test - Step 27: Computed 10 numeric contouring constraints for visualization (s=7.200)
2025-12-01 16:53:29,776 - DEBUG - integration_test - Step 27: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:29,776 - INFO - integration_test - === Applying control at step 27 ===
2025-12-01 16:53:29,776 - INFO - integration_test -   Control dict from planner: {'a': 1.1259765924615068e-07, 'w': -0.2470234778771105}
2025-12-01 16:53:29,776 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:29,776 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:29,778 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:29,778 - INFO - integration_test - Step 27 completed in 0.614s
2025-12-01 16:53:29,801 - INFO - integration_test - Step 28 (contouring until path end)
2025-12-01 16:53:29,802 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.22726411 3.7620851  0.32645911 3.00000002 7.49999997]
2025-12-01 16:53:29,802 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.410m)
2025-12-01 16:53:29,802 - DEBUG - integration_test -   Set spline state to 7.5000
2025-12-01 16:53:29,804 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:29,804 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:29,819 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.227, 3.762), path_start=(0.000, 0.000), dist=7.275m
2025-12-01 16:53:29,819 - WARNING - integration_test - Could not update reference path at step 28: x and y must have the same length
2025-12-01 16:53:29,819 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2025-12-01 16:53:29,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:29,824 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:29,824 - INFO - integration_test - Warmstart k=0: x0=6.227264110428899 , y0=3.7620851006517815 , psi0=0.3264591142953587 , v0=3.0 , spline0=7.499999965055402 , a0=0.0 , w0=0.0
2025-12-01 16:53:29,824 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:29,825 - INFO - integration_test - Dyn residual k=0: pred=[6.511419253364446, 3.8582924535063263, 0.3264591142953587, 3.0, 7.7999999650554015], ws=[6.511419253364446, 3.8582924535063263, 0.3264591142953588, 3.0, 9.659325702538343], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -1.8593257374829415], res_norm=1.859e+00
2025-12-01 16:53:29,826 - INFO - integration_test - Dyn residual k=1: pred=[6.795574396299993, 3.954499806360871, 0.3264591142953588, 3.0, 9.959325702538344], ws=[6.795574396299993, 3.954499806360871, 0.3264591142953588, 3.0, 11.70541781400986], res=[0.0, 0.0, 0.0, 0.0, -1.7460921114715156], res_norm=1.746e+00
2025-12-01 16:53:29,826 - INFO - integration_test - Dyn residual k=2: pred=[7.07972953923554, 4.050707159215416, 0.3264591142953588, 3.0, 12.00541781400986], ws=[7.07972953923554, 4.050707159215416, 0.3264591142953588, 3.0, 13.6879437492491], res=[0.0, 0.0, 0.0, 0.0, -1.6825259352392408], res_norm=1.683e+00
2025-12-01 16:53:29,841 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,854 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,870 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,883 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,899 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,912 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,927 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,939 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,955 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,968 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:29,983 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:29,996 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,011 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,024 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,051 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,066 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,079 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,095 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,108 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,123 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,133 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:30,379 - INFO - integration_test - Step 28: MPC solve successful
2025-12-01 16:53:30,387 - INFO - integration_test - Step 28: Computed 10 numeric contouring constraints for visualization (s=7.500)
2025-12-01 16:53:30,387 - DEBUG - integration_test - Step 28: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:30,387 - INFO - integration_test - === Applying control at step 28 ===
2025-12-01 16:53:30,387 - INFO - integration_test -   Control dict from planner: {'a': 3.80526701157761e-08, 'w': -0.2693596462850597}
2025-12-01 16:53:30,387 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:30,387 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:30,388 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:30,388 - INFO - integration_test - Step 28 completed in 0.587s
2025-12-01 16:53:30,412 - INFO - integration_test - Step 29 (contouring until path end)
2025-12-01 16:53:30,412 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.51268054 3.85445406 0.29952315 3.00000003 7.79999997]
2025-12-01 16:53:30,413 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.294m)
2025-12-01 16:53:30,413 - DEBUG - integration_test -   Set spline state to 7.8000
2025-12-01 16:53:30,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:30,414 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:30,429 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.513, 3.854), path_start=(0.000, 0.000), dist=7.568m
2025-12-01 16:53:30,429 - WARNING - integration_test - Could not update reference path at step 29: x and y must have the same length
2025-12-01 16:53:30,429 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2025-12-01 16:53:30,432 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:30,434 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:30,434 - INFO - integration_test - Warmstart k=0: x0=6.512680536461825 , y0=3.854454055881267 , psi0=0.29952314966685273 , v0=3.0 , spline0=7.799999967865026 , a0=0.0 , w0=0.0
2025-12-01 16:53:30,434 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:30,434 - INFO - integration_test - Dyn residual k=0: pred=[6.799323726286048, 3.942973442048332, 0.29952314966685273, 3.0, 8.099999967865026], ws=[6.799323726286048, 3.942973442048332, 0.2995231496668529, 3.0, 10.065420099281397], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -1.965420131416371], res_norm=1.965e+00
2025-12-01 16:53:30,435 - INFO - integration_test - Dyn residual k=1: pred=[7.085966916110272, 4.031492828215397, 0.2995231496668529, 3.0, 10.365420099281398], ws=[7.085966916110272, 4.031492828215397, 0.2995231496668529, 3.0, 12.20825142591669], res=[0.0, 0.0, 0.0, 0.0, -1.8428313266352916], res_norm=1.843e+00
2025-12-01 16:53:30,436 - INFO - integration_test - Dyn residual k=2: pred=[7.372610105934496, 4.120012214382462, 0.2995231496668529, 3.0, 12.50825142591669], ws=[7.372610105934496, 4.120012214382462, 0.2995231496668529, 3.0, 14.231250315613483], res=[0.0, 0.0, 0.0, 0.0, -1.7229988896967932], res_norm=1.723e+00
2025-12-01 16:53:30,450 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,463 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,479 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,492 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,508 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,520 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,535 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,548 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,563 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,576 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,592 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,604 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,620 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,632 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,647 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,660 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,675 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,688 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,703 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,716 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:30,731 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:30,741 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:31,032 - INFO - integration_test - Step 29: MPC solve successful
2025-12-01 16:53:31,041 - INFO - integration_test - Step 29: Computed 10 numeric contouring constraints for visualization (s=7.800)
2025-12-01 16:53:31,042 - DEBUG - integration_test - Step 29: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:31,042 - INFO - integration_test - === Applying control at step 29 ===
2025-12-01 16:53:31,042 - INFO - integration_test -   Control dict from planner: {'a': 1.2683751081949742e-08, 'w': -0.2789307481230894}
2025-12-01 16:53:31,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:31,042 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:31,043 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:31,044 - INFO - integration_test - Step 29 completed in 0.632s
2025-12-01 16:53:31,068 - INFO - integration_test - Step 30 (contouring until path end)
2025-12-01 16:53:31,069 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[6.80052102 3.93896454 0.27163007 3.00000003 8.09999997]
2025-12-01 16:53:31,069 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.324m)
2025-12-01 16:53:31,070 - DEBUG - integration_test -   Set spline state to 8.1000
2025-12-01 16:53:31,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:31,071 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:31,088 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(6.801, 3.939), path_start=(0.000, 0.000), dist=7.859m
2025-12-01 16:53:31,088 - WARNING - integration_test - Could not update reference path at step 30: x and y must have the same length
2025-12-01 16:53:31,088 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2025-12-01 16:53:31,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:31,092 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:31,092 - INFO - integration_test - Warmstart k=0: x0=6.80052102024436 , y0=3.9389645441743815 , psi0=0.27163007485454377 , v0=3.0 , spline0=8.099999970801488 , a0=0.0 , w0=0.0
2025-12-01 16:53:31,092 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:31,093 - INFO - integration_test - Dyn residual k=0: pred=[7.089521467417906, 4.019455174271869, 0.27163007485454377, 3.0, 8.399999970801488], ws=[7.089521467417906, 4.019455174271869, 0.27163007485454393, 3.0, 10.386816885991463], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -1.9868169151899746], res_norm=1.987e+00
2025-12-01 16:53:31,094 - INFO - integration_test - Dyn residual k=1: pred=[7.378521914591452, 4.099945804369356, 0.27163007485454393, 3.0, 10.686816885991464], ws=[7.378521914591452, 4.099945804369356, 0.27163007485454393, 3.0, 12.547196444852927], res=[0.0, 0.0, 0.0, 0.0, -1.8603795588614638], res_norm=1.860e+00
2025-12-01 16:53:31,095 - INFO - integration_test - Dyn residual k=2: pred=[7.6675223617649975, 4.180436434466843, 0.27163007485454393, 3.0, 12.847196444852928], ws=[7.6675223617649975, 4.180436434466843, 0.27163007485454393, 3.0, 14.589449448113225], res=[0.0, 0.0, 0.0, 0.0, -1.7422530032602968], res_norm=1.742e+00
2025-12-01 16:53:31,110 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,123 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,139 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,151 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,167 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,180 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,196 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,208 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,223 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,236 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,251 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,264 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,279 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,292 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,307 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,320 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,335 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,347 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,363 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,376 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,392 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,402 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:31,658 - INFO - integration_test - Step 30: MPC solve successful
2025-12-01 16:53:31,667 - INFO - integration_test - Step 30: Computed 10 numeric contouring constraints for visualization (s=8.100)
2025-12-01 16:53:31,668 - DEBUG - integration_test - Step 30: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:31,668 - INFO - integration_test - === Applying control at step 30 ===
2025-12-01 16:53:31,668 - INFO - integration_test -   Control dict from planner: {'a': 4.129827225066709e-09, 'w': -0.23193748807796252}
2025-12-01 16:53:31,668 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:31,668 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:31,669 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:31,669 - INFO - integration_test - Step 30 completed in 0.601s
2025-12-01 16:53:31,690 - INFO - integration_test - Step 31 (contouring until path end)
2025-12-01 16:53:31,691 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.09042896 4.01609661 0.24843633 3.00000003 8.39999997]
2025-12-01 16:53:31,691 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.395m)
2025-12-01 16:53:31,691 - DEBUG - integration_test -   Set spline state to 8.4000
2025-12-01 16:53:31,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:31,693 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:31,707 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.090, 4.016), path_start=(0.000, 0.000), dist=8.149m
2025-12-01 16:53:31,708 - WARNING - integration_test - Could not update reference path at step 31: x and y must have the same length
2025-12-01 16:53:31,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2025-12-01 16:53:31,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:31,713 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:31,714 - INFO - integration_test - Warmstart k=0: x0=7.090428957587344 , y0=4.016096606932213 , psi0=0.2484363260467475 , v0=3.0 , spline0=8.399999973779247 , a0=0.0 , w0=0.0
2025-12-01 16:53:31,714 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:31,714 - INFO - integration_test - Dyn residual k=0: pred=[7.38121838643171, 4.089863185220536, 0.2484363260467475, 3.0, 8.699999973779247], ws=[7.38121838643171, 4.089863185220536, 0.2484363260467477, 3.0, 10.78802461177057], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -2.0880246379913228], res_norm=2.088e+00
2025-12-01 16:53:31,715 - INFO - integration_test - Dyn residual k=1: pred=[7.672007815276077, 4.163629763508859, 0.2484363260467477, 3.0, 11.088024611770571], ws=[7.672007815276077, 4.163629763508859, 0.2484363260467477, 3.0, 12.983861482891232], res=[0.0, 0.0, 0.0, 0.0, -1.895836871120661], res_norm=1.896e+00
2025-12-01 16:53:31,716 - INFO - integration_test - Dyn residual k=2: pred=[7.962797244120443, 4.237396341797182, 0.2484363260467477, 3.0, 13.283861482891233], ws=[7.962797244120443, 4.237396341797182, 0.2484363260467477, 3.0, 15.068892476145184], res=[0.0, 0.0, 0.0, 0.0, -1.785030993253951], res_norm=1.785e+00
2025-12-01 16:53:31,730 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,743 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,773 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,789 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,802 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,817 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,830 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,846 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,858 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,874 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,887 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,903 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,916 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,932 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,945 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,960 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:31,973 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:31,989 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:32,002 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:32,017 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:32,028 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:32,815 - WARNING - integration_test - Step 31: MPC solve failed
2025-12-01 16:53:32,815 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 16:53:32,820 - INFO - integration_test - Step 31: Computed 10 numeric contouring constraints for visualization (s=8.400)
2025-12-01 16:53:32,820 - DEBUG - integration_test - Step 31: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:32,820 - INFO - integration_test - === Applying control at step 31 ===
2025-12-01 16:53:32,820 - INFO - integration_test -   Control dict from planner: {'a': 4.129827225066709e-09, 'w': -0.23193748807796252}
2025-12-01 16:53:32,820 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:32,820 - INFO - integration_test -   Planner output success: False
2025-12-01 16:53:32,821 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:32,822 - INFO - integration_test - Step 31 completed in 1.131s
2025-12-01 16:53:32,842 - INFO - integration_test - Step 32 (contouring until path end)
2025-12-01 16:53:32,842 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.38204774 4.08648448 0.22524258 3.00000003 8.69999998]
2025-12-01 16:53:32,843 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.350m)
2025-12-01 16:53:32,843 - DEBUG - integration_test -   Set spline state to 8.7000
2025-12-01 16:53:32,844 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:32,845 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:32,858 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.382, 4.086), path_start=(0.000, 0.000), dist=8.438m
2025-12-01 16:53:32,858 - WARNING - integration_test - Could not update reference path at step 32: x and y must have the same length
2025-12-01 16:53:32,858 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2025-12-01 16:53:32,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:32,862 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:32,862 - INFO - integration_test - Warmstart k=0: x0=7.38204774177684 , y0=4.086484475008748 , psi0=0.22524257723895125 , v0=3.0 , spline0=8.699999976798305 , a0=0.0 , w0=0.0
2025-12-01 16:53:32,862 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:32,863 - INFO - integration_test - Dyn residual k=0: pred=[7.67446972913601, 4.153487320537227, 0.22524257723895125, 3.0, 8.999999976798305], ws=[7.67446972913601, 4.153487320537227, 0.22524257723895147, 3.0, 11.107767681281224], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -2.107767704482919], res_norm=2.108e+00
2025-12-01 16:53:32,864 - INFO - integration_test - Dyn residual k=1: pred=[7.966891716495181, 4.220490166065706, 0.22524257723895147, 3.0, 11.407767681281225], ws=[7.966891716495181, 4.220490166065706, 0.22524257723895147, 3.0, 13.37722173358468], res=[0.0, 0.0, 0.0, 0.0, -1.9694540523034547], res_norm=1.969e+00
2025-12-01 16:53:32,865 - INFO - integration_test - Dyn residual k=2: pred=[8.259313703854351, 4.287493011594185, 0.22524257723895147, 3.0, 13.67722173358468], ws=[8.259313703854351, 4.287493011594185, 0.22524257723895147, 3.0, 15.557983075605554], res=[0.0, 0.0, 0.0, 0.0, -1.8807613420208735], res_norm=1.881e+00
2025-12-01 16:53:32,879 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:32,893 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:32,909 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:32,922 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:32,940 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:32,954 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:32,971 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:32,986 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,003 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,016 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,033 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,046 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,079 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,097 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,110 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,125 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,138 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,154 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,166 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,193 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:33,799 - WARNING - integration_test - Step 32: MPC solve failed
2025-12-01 16:53:33,799 - WARNING - integration_test -   Consecutive MPC failures: 2/50
2025-12-01 16:53:33,804 - INFO - integration_test - Step 32: Computed 10 numeric contouring constraints for visualization (s=8.700)
2025-12-01 16:53:33,804 - DEBUG - integration_test - Step 32: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:33,804 - INFO - integration_test - === Applying control at step 32 ===
2025-12-01 16:53:33,804 - INFO - integration_test -   Control dict from planner: {'a': 4.129827225066709e-09, 'w': -0.23193748807796252}
2025-12-01 16:53:33,804 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:33,804 - INFO - integration_test -   Planner output success: False
2025-12-01 16:53:33,805 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:33,806 - INFO - integration_test - Step 32 completed in 0.964s
2025-12-01 16:53:33,826 - INFO - integration_test - Step 33 (contouring until path end)
2025-12-01 16:53:33,826 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.6752205  4.15009028 0.20204883 3.00000003 8.99999998]
2025-12-01 16:53:33,827 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.425m)
2025-12-01 16:53:33,827 - DEBUG - integration_test -   Set spline state to 9.0000
2025-12-01 16:53:33,828 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:33,828 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:33,842 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.675, 4.150), path_start=(0.000, 0.000), dist=8.725m
2025-12-01 16:53:33,842 - WARNING - integration_test - Could not update reference path at step 33: x and y must have the same length
2025-12-01 16:53:33,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2025-12-01 16:53:33,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:33,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:33,846 - INFO - integration_test - Warmstart k=0: x0=7.675220503525588 , y0=4.150090284947068 , psi0=0.202048828431155 , v0=3.0 , spline0=8.99999997985866 , a0=0.0 , w0=0.0
2025-12-01 16:53:33,846 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:33,847 - INFO - integration_test - Dyn residual k=0: pred=[7.96911774804809, 4.21029335515184, 0.202048828431155, 3.0, 9.299999979858661], ws=[7.96911774804809, 4.21029335515184, 0.2020488284311548, 3.0, 11.503314824915233], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, -2.203314845056571], res_norm=2.203e+00
2025-12-01 16:53:33,848 - INFO - integration_test - Dyn residual k=1: pred=[8.263014992570591, 4.270496425356611, 0.2020488284311548, 3.0, 11.803314824915233], ws=[8.263014992570591, 4.270496425356611, 0.2020488284311548, 3.0, 13.807282031978112], res=[0.0, 0.0, 0.0, 0.0, -2.0039672070628782], res_norm=2.004e+00
2025-12-01 16:53:33,848 - INFO - integration_test - Dyn residual k=2: pred=[8.556912237093092, 4.330699495561382, 0.2020488284311548, 3.0, 14.107282031978112], ws=[8.556912237093092, 4.330699495561382, 0.2020488284311548, 3.0, 16.035401082635246], res=[0.0, 0.0, 0.0, 0.0, -1.9281190506571342], res_norm=1.928e+00
2025-12-01 16:53:33,863 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,876 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,893 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,906 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,921 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,934 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,950 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,962 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:33,978 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:33,990 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,006 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,018 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,033 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,046 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,062 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,075 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,094 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,107 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,125 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,139 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,166 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:34,498 - INFO - integration_test - Step 33: MPC solve successful
2025-12-01 16:53:34,505 - INFO - integration_test - Step 33: Computed 10 numeric contouring constraints for visualization (s=9.000)
2025-12-01 16:53:34,505 - DEBUG - integration_test - Step 33: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:34,505 - INFO - integration_test - === Applying control at step 33 ===
2025-12-01 16:53:34,506 - INFO - integration_test -   Control dict from planner: {'a': -1.3358756887888542e-06, 'w': -0.289195090009005}
2025-12-01 16:53:34,506 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:34,506 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:34,506 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:34,507 - INFO - integration_test - Step 33 completed in 0.681s
2025-12-01 16:53:34,526 - INFO - integration_test - Step 34 (contouring until path end)
2025-12-01 16:53:34,528 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[7.96994724 4.20603558 0.17312932 2.9999999  9.29999997]
2025-12-01 16:53:34,528 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.369m)
2025-12-01 16:53:34,528 - DEBUG - integration_test -   Set spline state to 9.3000
2025-12-01 16:53:34,530 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:34,530 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:34,543 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(7.970, 4.206), path_start=(0.000, 0.000), dist=9.012m
2025-12-01 16:53:34,543 - WARNING - integration_test - Could not update reference path at step 34: x and y must have the same length
2025-12-01 16:53:34,543 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2025-12-01 16:53:34,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:34,548 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:34,548 - INFO - integration_test - Warmstart k=0: x0=7.969947240978483 , y0=4.206035577355643 , psi0=0.17312931943025447 , v0=2.9999998970159933 , spline0=9.29999996956026 , a0=0.0 , w0=0.0
2025-12-01 16:53:34,548 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:34,549 - INFO - integration_test - Dyn residual k=0: pred=[8.265462385762117, 4.257715293148854, 0.17312931943025447, 2.9999998970159933, 9.599999959261858], ws=[8.265462385762117, 4.257715293148854, 0.17312931943025456, 2.9999998970159933, 11.82159777797352], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, -2.221597818711663], res_norm=2.222e+00
2025-12-01 16:53:34,549 - INFO - integration_test - Dyn residual k=1: pred=[8.560977530545753, 4.309395008942064, 0.17312931943025456, 2.9999998970159933, 12.12159776767512], ws=[8.560977530545753, 4.309395008942064, 0.17312931943025456, 2.9999998970159933, 14.141978480993235], res=[0.0, 0.0, 0.0, 0.0, -2.020380713318115], res_norm=2.020e+00
2025-12-01 16:53:34,550 - INFO - integration_test - Dyn residual k=2: pred=[8.856492675329388, 4.361074724735275, 0.17312931943025456, 2.9999998970159933, 14.441978470694833], ws=[8.856492675329388, 4.361074724735275, 0.17312931943025456, 2.9999998970159933, 16.392986144797135], res=[0.0, 0.0, 0.0, 0.0, -1.9510076741023017], res_norm=1.951e+00
2025-12-01 16:53:34,564 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,578 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,594 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,607 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,631 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,643 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,658 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,671 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,686 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,698 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,714 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,726 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,742 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,755 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,770 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,783 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,798 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,811 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,826 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,839 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:34,854 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:34,864 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:35,145 - INFO - integration_test - Step 34: MPC solve successful
2025-12-01 16:53:35,153 - INFO - integration_test - Step 34: Computed 10 numeric contouring constraints for visualization (s=9.300)
2025-12-01 16:53:35,153 - DEBUG - integration_test - Step 34: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:35,153 - INFO - integration_test - === Applying control at step 34 ===
2025-12-01 16:53:35,153 - INFO - integration_test -   Control dict from planner: {'a': 4.480154262811019e-07, 'w': -0.31485063372682576}
2025-12-01 16:53:35,153 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:35,154 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:35,154 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:35,155 - INFO - integration_test - Step 34 completed in 0.627s
2025-12-01 16:53:35,180 - INFO - integration_test - Step 35 (contouring until path end)
2025-12-01 16:53:35,180 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.26622707 4.25305498 0.14164426 2.99999994 9.59999996]
2025-12-01 16:53:35,180 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.453m)
2025-12-01 16:53:35,181 - DEBUG - integration_test -   Set spline state to 9.6000
2025-12-01 16:53:35,182 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:35,182 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:35,196 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.266, 4.253), path_start=(0.000, 0.000), dist=9.296m
2025-12-01 16:53:35,196 - WARNING - integration_test - Could not update reference path at step 35: x and y must have the same length
2025-12-01 16:53:35,196 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2025-12-01 16:53:35,199 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:35,201 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:35,201 - INFO - integration_test - Warmstart k=0: x0=8.266227068373633 , y0=4.253054983265048 , psi0=0.14164425605757192 , v0=2.999999941817536 , spline0=9.599999963742013 , a0=0.0 , w0=0.0
2025-12-01 16:53:35,201 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:35,202 - INFO - integration_test - Dyn residual k=0: pred=[8.563222626556163, 4.295406310622038, 0.14164425605757192, 2.999999941817536, 9.899999957923766], ws=[8.563222626556163, 4.295406310622038, 0.14164425605757192, 2.999999941817536, 12.13826022335704], res=[0.0, 0.0, 0.0, 0.0, -2.238260265433274], res_norm=2.238e+00
2025-12-01 16:53:35,202 - INFO - integration_test - Dyn residual k=1: pred=[8.860218184738693, 4.337757637979029, 0.14164425605757192, 2.999999941817536, 12.438260217538794], ws=[8.860218184738693, 4.337757637979029, 0.14164425605757192, 2.999999941817536, 14.535470279458325], res=[0.0, 0.0, 0.0, 0.0, -2.0972100619195313], res_norm=2.097e+00
2025-12-01 16:53:35,203 - INFO - integration_test - Dyn residual k=2: pred=[9.157213742921224, 4.380108965336019, 0.14164425605757192, 2.999999941817536, 14.835470273640079], ws=[9.157213742921224, 4.380108965336019, 0.14164425605757192, 2.999999941817536, 16.90019362502817], res=[0.0, 0.0, 0.0, 0.0, -2.064723351388091], res_norm=2.065e+00
2025-12-01 16:53:35,217 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,230 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,245 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,258 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,274 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,287 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,302 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,315 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,343 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,358 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,371 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,387 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,400 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,416 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,429 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,444 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,457 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,472 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,485 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,500 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,511 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:35,839 - INFO - integration_test - Step 35: MPC solve successful
2025-12-01 16:53:35,846 - INFO - integration_test - Step 35: Computed 10 numeric contouring constraints for visualization (s=9.600)
2025-12-01 16:53:35,847 - DEBUG - integration_test - Step 35: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:35,847 - INFO - integration_test - === Applying control at step 35 ===
2025-12-01 16:53:35,847 - INFO - integration_test -   Control dict from planner: {'a': 4.3104156349758345e-07, 'w': -0.3053451352850673}
2025-12-01 16:53:35,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:35,847 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:35,848 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:35,848 - INFO - integration_test - Step 35 completed in 0.668s
2025-12-01 16:53:35,869 - INFO - integration_test - Step 36 (contouring until path end)
2025-12-01 16:53:35,870 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.56382302 4.29086577 0.11110974 2.99999998 9.89999996]
2025-12-01 16:53:35,870 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.387m)
2025-12-01 16:53:35,870 - DEBUG - integration_test -   Set spline state to 9.9000
2025-12-01 16:53:35,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:35,872 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:35,886 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.564, 4.291), path_start=(0.000, 0.000), dist=9.579m
2025-12-01 16:53:35,887 - WARNING - integration_test - Could not update reference path at step 36: x and y must have the same length
2025-12-01 16:53:35,887 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2025-12-01 16:53:35,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:35,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:35,891 - INFO - integration_test - Warmstart k=0: x0=8.563823018332421 , y0=4.290865774955348 , psi0=0.11110974252906519 , v0=2.999999984921692 , spline0=9.899999962234181 , a0=0.0 , w0=0.0
2025-12-01 16:53:35,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:35,892 - INFO - integration_test - Dyn residual k=0: pred=[8.861973114920868, 4.324130155298303, 0.11110974252906519, 2.999999984921692, 10.19999996072635], ws=[8.861973114920868, 4.324130155298303, 0.11110974252906525, 2.999999984921692, 12.528872684167002], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.328872723440652], res_norm=2.329e+00
2025-12-01 16:53:35,893 - INFO - integration_test - Dyn residual k=1: pred=[9.160123211509315, 4.357394535641259, 0.11110974252906525, 2.999999984921692, 12.82887268265917], ws=[9.160123211509315, 4.357394535641259, 0.11110974252906525, 2.999999984921692, 14.96221300107048], res=[0.0, 0.0, 0.0, 0.0, -2.13334031841131], res_norm=2.133e+00
2025-12-01 16:53:35,893 - INFO - integration_test - Dyn residual k=2: pred=[9.458273308097763, 4.390658915984214, 0.11110974252906525, 2.999999984921692, 15.26221299956265], ws=[9.458273308097763, 4.390658915984214, 0.11110974252906525, 2.999999984921692, 17.382390781381954], res=[0.0, 0.0, 0.0, 0.0, -2.1201777818193044], res_norm=2.120e+00
2025-12-01 16:53:35,908 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,921 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,949 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,965 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:35,978 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:35,994 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,006 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,021 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,034 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,049 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,062 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,078 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,091 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,106 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,119 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,134 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,146 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,162 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,175 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,191 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,202 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:36,505 - INFO - integration_test - Step 36: MPC solve successful
2025-12-01 16:53:36,513 - INFO - integration_test - Step 36: Computed 10 numeric contouring constraints for visualization (s=9.900)
2025-12-01 16:53:36,513 - DEBUG - integration_test - Step 36: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:36,513 - INFO - integration_test - === Applying control at step 36 ===
2025-12-01 16:53:36,513 - INFO - integration_test -   Control dict from planner: {'a': 1.8443237630135146e-07, 'w': -0.2610833798641146}
2025-12-01 16:53:36,513 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:36,513 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:36,514 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:36,515 - INFO - integration_test - Step 36 completed in 0.645s
2025-12-01 16:53:36,534 - INFO - integration_test - Step 37 (contouring until path end)
2025-12-01 16:53:36,536 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 8.86237346  4.3202345   0.0850014   3.         10.19999996]
2025-12-01 16:53:36,536 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.484m)
2025-12-01 16:53:36,536 - DEBUG - integration_test -   Set spline state to 10.2000
2025-12-01 16:53:36,538 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:36,538 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:36,551 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(8.862, 4.320), path_start=(0.000, 0.000), dist=9.859m
2025-12-01 16:53:36,552 - WARNING - integration_test - Could not update reference path at step 37: x and y must have the same length
2025-12-01 16:53:36,552 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2025-12-01 16:53:36,555 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:36,556 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:36,556 - INFO - integration_test - Warmstart k=0: x0=8.862373459115538 , y0=4.320234495768147 , psi0=0.08500140454265373 , v0=3.0 , spline0=10.199999962570674 , a0=0.0 , w0=0.0
2025-12-01 16:53:36,556 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:36,557 - INFO - integration_test - Dyn residual k=0: pred=[9.161290325693205, 4.3457042204503855, 0.08500140454265373, 3.0, 10.499999962570675], ws=[9.161290325693205, 4.3457042204503855, 0.0850014045426537, 3.0, 12.84460451302083], res=[0.0, 0.0, 2.7755575615628914e-17, 0.0, -2.344604550450155], res_norm=2.345e+00
2025-12-01 16:53:36,558 - INFO - integration_test - Dyn residual k=1: pred=[9.460207192270872, 4.371173945132624, 0.0850014045426537, 3.0, 13.14460451302083], ws=[9.460207192270872, 4.371173945132624, 0.0850014045426537, 3.0, 15.362712555262977], res=[0.0, 0.0, 0.0, 0.0, -2.2181080422421466], res_norm=2.218e+00
2025-12-01 16:53:36,558 - INFO - integration_test - Dyn residual k=2: pred=[9.759124058848538, 4.396643669814863, 0.0850014045426537, 3.0, 15.662712555262978], ws=[9.759124058848538, 4.396643669814863, 0.0850014045426537, 3.0, 17.818337736066134], res=[0.0, 0.0, 0.0, 0.0, -2.155625180803156], res_norm=2.156e+00
2025-12-01 16:53:36,575 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,588 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,604 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,617 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,632 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,645 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,660 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,673 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,689 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,702 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,717 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,730 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,745 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,757 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,773 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,786 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,801 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,814 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,829 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,842 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:36,857 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:36,868 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:37,237 - INFO - integration_test - Step 37: MPC solve successful
2025-12-01 16:53:37,245 - INFO - integration_test - Step 37: Computed 10 numeric contouring constraints for visualization (s=10.200)
2025-12-01 16:53:37,245 - DEBUG - integration_test - Step 37: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:37,245 - INFO - integration_test - === Applying control at step 37 ===
2025-12-01 16:53:37,245 - INFO - integration_test -   Control dict from planner: {'a': -6.135061192457929e-08, 'w': -0.22153463261088988}
2025-12-01 16:53:37,245 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:37,245 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:37,246 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:37,246 - INFO - integration_test - Step 37 completed in 0.711s
2025-12-01 16:53:37,266 - INFO - integration_test - Step 38 (contouring until path end)
2025-12-01 16:53:37,267 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.16154799  4.34239125  0.06284794  3.         10.49999996]
2025-12-01 16:53:37,268 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.404m)
2025-12-01 16:53:37,268 - DEBUG - integration_test -   Set spline state to 10.5000
2025-12-01 16:53:37,269 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:37,269 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:37,283 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.162, 4.342), path_start=(0.000, 0.000), dist=10.139m
2025-12-01 16:53:37,284 - WARNING - integration_test - Could not update reference path at step 38: x and y must have the same length
2025-12-01 16:53:37,284 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2025-12-01 16:53:37,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:37,288 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:37,288 - INFO - integration_test - Warmstart k=0: x0=9.161547985914021 , y0=4.342391250686381 , psi0=0.06284794128156475 , v0=2.9999999972298683 , spline0=10.49999996229366 , a0=0.0 , w0=0.0
2025-12-01 16:53:37,288 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:37,289 - INFO - integration_test - Dyn residual k=0: pred=[9.460955701071173, 4.361233223464348, 0.06284794128156475, 2.9999999972298683, 10.799999962016647], ws=[9.460955701071173, 4.361233223464348, 0.06284794128156479, 2.9999999972298683, 13.231543392582422], res=[0.0, 0.0, -4.163336342344337e-17, 0.0, -2.4315434305657746], res_norm=2.432e+00
2025-12-01 16:53:37,290 - INFO - integration_test - Dyn residual k=1: pred=[9.760363416228325, 4.380075196242315, 0.06284794128156479, 2.9999999972298683, 13.531543392305409], ws=[9.760363416228325, 4.380075196242315, 0.06284794128156479, 2.9999999972298683, 15.789349257214244], res=[0.0, 0.0, 0.0, 0.0, -2.2578058649088355], res_norm=2.258e+00
2025-12-01 16:53:37,290 - INFO - integration_test - Dyn residual k=2: pred=[10.059771131385476, 4.398917169020281, 0.06284794128156479, 2.9999999972298683, 16.089349256937233], ws=[10.059771131385476, 4.398917169020281, 0.06284794128156479, 2.9999999972298683, 18.30565373949529], res=[0.0, 0.0, 0.0, 0.0, -2.2163044825580585], res_norm=2.216e+00
2025-12-01 16:53:37,305 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,318 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,334 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,346 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,374 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,390 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,403 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,419 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,431 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,446 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,459 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,474 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,487 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,503 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,515 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,531 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,543 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,579 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:37,599 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,611 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:37,909 - INFO - integration_test - Step 38: MPC solve successful
2025-12-01 16:53:37,917 - INFO - integration_test - Step 38: Computed 10 numeric contouring constraints for visualization (s=10.500)
2025-12-01 16:53:37,917 - DEBUG - integration_test - Step 38: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:37,917 - INFO - integration_test - === Applying control at step 38 ===
2025-12-01 16:53:37,917 - INFO - integration_test -   Control dict from planner: {'a': 1.2871546388800998e-07, 'w': -0.2061703116175193}
2025-12-01 16:53:37,917 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:37,917 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:37,918 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:37,919 - INFO - integration_test - Step 38 completed in 0.652s
2025-12-01 16:53:37,939 - INFO - integration_test - Step 39 (contouring until path end)
2025-12-01 16:53:37,939 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.46112872  4.35814555  0.04223091  3.00000001 10.79999996]
2025-12-01 16:53:37,940 - INFO - integration_test - Step 39: Re-initialized spline from 10.8000 to 10.9043 (vehicle at (9.46, 4.36), closest path point at (9.75, 4.78), distance=0.512m)
2025-12-01 16:53:37,940 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 16:53:37,941 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:37,941 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:37,955 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.461, 4.358), path_start=(0.000, 0.000), dist=10.417m
2025-12-01 16:53:37,955 - WARNING - integration_test - Could not update reference path at step 39: x and y must have the same length
2025-12-01 16:53:37,956 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2025-12-01 16:53:37,958 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:37,960 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:37,960 - INFO - integration_test - Warmstart k=0: x0=9.461128716934464 , y0=4.3581455489203345 , psi0=0.042230910119812816 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 16:53:37,960 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:37,961 - INFO - integration_test - Dyn residual k=0: pred=[9.760861239225331, 4.370811056456727, 0.042230910119812816, 3.0, 11.204332608216188], ws=[9.760861239225331, 4.370811056456727, 0.04223091011981284, 3.0, 13.68103458024699], res=[0.0, 0.0, -2.0816681711721685e-17, 0.0, -2.476701972030803], res_norm=2.477e+00
2025-12-01 16:53:37,962 - INFO - integration_test - Dyn residual k=1: pred=[10.060593761516198, 4.38347656399312, 0.04223091011981284, 3.0, 13.981034580246991], ws=[10.060593761516198, 4.38347656399312, 0.04223091011981284, 3.0, 16.299320621213965], res=[0.0, 0.0, 0.0, 0.0, -2.3182860409669743], res_norm=2.318e+00
2025-12-01 16:53:37,962 - INFO - integration_test - Dyn residual k=2: pred=[10.360326283807066, 4.396142071529512, 0.04223091011981284, 3.0, 16.599320621213966], ws=[10.360326283807066, 4.396142071529512, 0.04223091011981284, 3.0, 18.909019295228834], res=[0.0, 0.0, 0.0, 0.0, -2.309698674014868], res_norm=2.310e+00
2025-12-01 16:53:37,977 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:37,991 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,007 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,019 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,035 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,048 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,064 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,076 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,092 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,105 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,120 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,133 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,149 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,161 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,178 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,190 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,206 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,218 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,234 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,246 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,262 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,273 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:38,706 - INFO - integration_test - Step 39: MPC solve successful
2025-12-01 16:53:38,713 - INFO - integration_test - Step 39: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 16:53:38,714 - DEBUG - integration_test - Step 39: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:38,714 - INFO - integration_test - === Applying control at step 39 ===
2025-12-01 16:53:38,714 - INFO - integration_test -   Control dict from planner: {'a': 1.1492310677698662e-07, 'w': -0.3280300447583668}
2025-12-01 16:53:38,714 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:38,714 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:38,715 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:38,715 - INFO - integration_test - Step 39 completed in 0.776s
2025-12-01 16:53:38,736 - INFO - integration_test - Step 40 (contouring until path end)
2025-12-01 16:53:38,737 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[9.76101520e+00 4.36589316e+00 9.42790564e-03 3.00000002e+00
 1.12043326e+01]
2025-12-01 16:53:38,737 - DEBUG - integration_test - Step 40: Using propagated spline 11.2043 (close to path, dist=0.416m)
2025-12-01 16:53:38,737 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 16:53:38,739 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:38,739 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:38,752 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.761, 4.366), path_start=(0.000, 0.000), dist=10.693m
2025-12-01 16:53:38,753 - WARNING - integration_test - Could not update reference path at step 40: x and y must have the same length
2025-12-01 16:53:38,753 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2025-12-01 16:53:38,755 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:38,756 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:38,756 - INFO - integration_test - Warmstart k=0: x0=9.761015204659786 , y0=4.365893162365125 , psi0=0.009427905643976144 , v0=3.0 , spline0=11.204332610375559 , a0=0.0 , w0=0.0
2025-12-01 16:53:38,757 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:38,757 - INFO - integration_test - Dyn residual k=0: pred=[10.06100187194782, 4.368721492158343, 0.009427905643976144, 3.0, 11.50433261037556], ws=[10.06100187194782, 4.368721492158343, 0.009427905643976331, 3.0, 14.067073896315694], res=[0.0, 0.0, -1.8735013540549517e-16, 0.0, -2.5627412859401346], res_norm=2.563e+00
2025-12-01 16:53:38,758 - INFO - integration_test - Dyn residual k=1: pred=[10.360988539235853, 4.371549821951562, 0.009427905643976331, 3.0, 14.367073896315695], ws=[10.360988539235853, 4.371549821951562, 0.009427905643976331, 3.0, 16.72886018839738], res=[0.0, 0.0, 0.0, 0.0, -2.3617862920816854], res_norm=2.362e+00
2025-12-01 16:53:38,759 - INFO - integration_test - Dyn residual k=2: pred=[10.660975206523887, 4.37437815174478, 0.009427905643976331, 3.0, 17.02886018839738], ws=[10.660975206523887, 4.37437815174478, 0.009427905643976331, 3.0, 19.514017075816273], res=[0.0, 0.0, 0.0, 0.0, -2.485156887418892], res_norm=2.485e+00
2025-12-01 16:53:38,773 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,787 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,803 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,815 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,831 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,843 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,858 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,871 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,887 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,900 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,915 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,927 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,943 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,955 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,971 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:38,983 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:38,999 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,011 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,027 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,039 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,054 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,065 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:39,439 - INFO - integration_test - Step 40: MPC solve successful
2025-12-01 16:53:39,447 - INFO - integration_test - Step 40: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 16:53:39,447 - DEBUG - integration_test - Step 40: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:39,447 - INFO - integration_test - === Applying control at step 40 ===
2025-12-01 16:53:39,447 - INFO - integration_test -   Control dict from planner: {'a': -1.2585573939103063e-07, 'w': -0.1889205877159116}
2025-12-01 16:53:39,447 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:39,447 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:39,448 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:39,448 - INFO - integration_test - Step 40 completed in 0.712s
2025-12-01 16:53:39,468 - INFO - integration_test - Step 41 (contouring until path end)
2025-12-01 16:53:39,469 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 1.00610107e+01  4.36588773e+00 -9.46415313e-03  3.00000001e+00
  1.15043326e+01]
2025-12-01 16:53:39,470 - INFO - integration_test - Step 41: Re-initialized spline from 11.5043 to 10.9043 (vehicle at (10.06, 4.37), closest path point at (9.75, 4.78), distance=0.520m)
2025-12-01 16:53:39,470 - DEBUG - integration_test -   Set spline state to 10.9043
2025-12-01 16:53:39,472 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:39,472 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:39,486 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.061, 4.366), path_start=(0.000, 0.000), dist=10.967m
2025-12-01 16:53:39,487 - WARNING - integration_test - Could not update reference path at step 41: x and y must have the same length
2025-12-01 16:53:39,487 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2025-12-01 16:53:39,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:39,491 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:39,491 - INFO - integration_test - Warmstart k=0: x0=10.061010744800203 , y0=4.365887725325389 , psi0=-0.009464153127615019 , v0=3.0 , spline0=10.904332608216187 , a0=0.0 , w0=0.0
2025-12-01 16:53:39,491 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:39,492 - INFO - integration_test - Dyn residual k=0: pred=[10.360997309371324, 4.363048521772217, -0.009464153127615019, 3.0, 11.204332608216188], ws=[10.360997309371324, 4.363048521772217, -0.00946415312761495, 3.0, 13.681034580246992], res=[0.0, 0.0, -6.938893903907228e-17, 0.0, -2.4767019720308046], res_norm=2.477e+00
2025-12-01 16:53:39,493 - INFO - integration_test - Dyn residual k=1: pred=[10.660983873942445, 4.360209318219044, -0.00946415312761495, 3.0, 13.981034580246993], ws=[10.660983873942445, 4.360209318219044, -0.00946415312761495, 3.0, 16.298899915912138], res=[0.0, 0.0, 0.0, 0.0, -2.317865335665145], res_norm=2.318e+00
2025-12-01 16:53:39,493 - INFO - integration_test - Dyn residual k=2: pred=[10.960970438513566, 4.357370114665872, -0.00946415312761495, 3.0, 16.59889991591214], ws=[10.960970438513566, 4.357370114665872, -0.00946415312761495, 3.0, 18.90750820271845], res=[0.0, 0.0, 0.0, 0.0, -2.3086082868063116], res_norm=2.309e+00
2025-12-01 16:53:39,508 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,520 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,536 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,549 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,564 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,577 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,592 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,605 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,620 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,633 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,647 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,660 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,675 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,688 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,704 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,716 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,731 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,744 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,759 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,771 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:39,788 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:39,798 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:40,161 - INFO - integration_test - Step 41: MPC solve successful
2025-12-01 16:53:40,169 - INFO - integration_test - Step 41: Computed 10 numeric contouring constraints for visualization (s=10.904)
2025-12-01 16:53:40,169 - DEBUG - integration_test - Step 41: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:40,169 - INFO - integration_test - === Applying control at step 41 ===
2025-12-01 16:53:40,169 - INFO - integration_test -   Control dict from planner: {'a': 1.2607915665416766e-07, 'w': 0.7999708913032786}
2025-12-01 16:53:40,169 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:40,169 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:40,170 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:40,170 - INFO - integration_test - Step 41 completed in 0.701s
2025-12-01 16:53:40,192 - INFO - integration_test - Step 42 (contouring until path end)
2025-12-01 16:53:40,193 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.36079096  4.37504418  0.07053294  3.00000002 11.20433261]
2025-12-01 16:53:40,194 - DEBUG - integration_test - Step 42: Using propagated spline 11.2043 (close to path, dist=0.414m)
2025-12-01 16:53:40,194 - DEBUG - integration_test -   Set spline state to 11.2043
2025-12-01 16:53:40,195 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:40,195 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:40,209 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.361, 4.375), path_start=(0.000, 0.000), dist=11.247m
2025-12-01 16:53:40,209 - WARNING - integration_test - Could not update reference path at step 42: x and y must have the same length
2025-12-01 16:53:40,209 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2025-12-01 16:53:40,212 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:40,213 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:40,213 - INFO - integration_test - Warmstart k=0: x0=10.360790958606122 , y0=4.375044177574152 , psi0=0.07053293600271285 , v0=3.0 , spline0=11.204332610377794 , a0=0.0 , w0=0.0
2025-12-01 16:53:40,213 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:40,214 - INFO - integration_test - Dyn residual k=0: pred=[10.66004503366541, 4.396186518040852, 0.07053293600271285, 3.0, 11.504332610377794], ws=[10.66004503366541, 4.396186518040852, 0.07053293600271271, 3.0, 14.067073896318572], res=[0.0, 0.0, 1.3877787807814457e-16, 0.0, -2.5627412859407777], res_norm=2.563e+00
2025-12-01 16:53:40,215 - INFO - integration_test - Dyn residual k=1: pred=[10.959299108724698, 4.4173288585075525, 0.07053293600271271, 3.0, 14.367073896318573], ws=[10.959299108724698, 4.4173288585075525, 0.07053293600271271, 3.0, 16.72946178686157], res=[0.0, 0.0, 0.0, 0.0, -2.3623878905429976], res_norm=2.362e+00
2025-12-01 16:53:40,215 - INFO - integration_test - Dyn residual k=2: pred=[11.258553183783986, 4.438471198974253, 0.07053293600271271, 3.0, 17.02946178686157], ws=[11.258553183783986, 4.438471198974253, 0.07053293600271271, 3.0, 19.515887565136094], res=[0.0, 0.0, 0.0, 0.0, -2.4864257782745227], res_norm=2.486e+00
2025-12-01 16:53:40,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,242 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,258 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,270 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,286 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,298 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,314 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,326 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,341 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,355 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,371 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,384 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,400 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,412 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,427 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,439 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,454 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,467 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,483 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,495 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:40,510 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:40,521 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:40,938 - INFO - integration_test - Step 42: MPC solve successful
2025-12-01 16:53:40,946 - INFO - integration_test - Step 42: Computed 10 numeric contouring constraints for visualization (s=11.204)
2025-12-01 16:53:40,946 - DEBUG - integration_test - Step 42: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:40,946 - INFO - integration_test - === Applying control at step 42 ===
2025-12-01 16:53:40,946 - INFO - integration_test -   Control dict from planner: {'a': -1.851967234228846e-08, 'w': 0.7999901391372776}
2025-12-01 16:53:40,946 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:40,946 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:40,947 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:40,948 - INFO - integration_test - Step 42 completed in 0.755s
2025-12-01 16:53:40,968 - INFO - integration_test - Step 43 (contouring until path end)
2025-12-01 16:53:40,969 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.65888071  4.40812761  0.15053195  3.00000002 11.50433261]
2025-12-01 16:53:40,969 - DEBUG - integration_test - Step 43: Using propagated spline 11.5043 (close to path, dist=0.460m)
2025-12-01 16:53:40,969 - DEBUG - integration_test -   Set spline state to 11.5043
2025-12-01 16:53:40,971 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:40,971 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:40,985 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.659, 4.408), path_start=(0.000, 0.000), dist=11.534m
2025-12-01 16:53:40,985 - WARNING - integration_test - Could not update reference path at step 43: x and y must have the same length
2025-12-01 16:53:40,985 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2025-12-01 16:53:40,988 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:40,989 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:40,989 - INFO - integration_test - Warmstart k=0: x0=10.6588807133377 , y0=4.408127607647662 , psi0=0.1505319499164406 , v0=3.0 , spline0=11.504332612354204 , a0=0.0 , w0=0.0
2025-12-01 16:53:40,989 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:40,990 - INFO - integration_test - Dyn residual k=0: pred=[10.955488146670024, 4.453116834046995, 0.1505319499164406, 3.0, 11.804332612354205], ws=[10.955488146670024, 4.453116834046995, 0.1505319499164406, 3.0, 14.38282698049806], res=[0.0, 0.0, 0.0, 0.0, -2.578494368143854], res_norm=2.578e+00
2025-12-01 16:53:40,991 - INFO - integration_test - Dyn residual k=1: pred=[11.252095580002349, 4.498106060446327, 0.1505319499164406, 3.0, 14.68282698049806], ws=[11.252095580002349, 4.498106060446327, 0.1505319499164406, 3.0, 17.152520205667592], res=[0.0, 0.0, 0.0, 0.0, -2.4696932251695323], res_norm=2.470e+00
2025-12-01 16:53:40,992 - INFO - integration_test - Dyn residual k=2: pred=[11.548703013334674, 4.543095286845659, 0.1505319499164406, 3.0, 17.452520205667593], ws=[11.548703013334674, 4.543095286845659, 0.1505319499164406, 3.0, 19.996643143891372], res=[0.0, 0.0, 0.0, 0.0, -2.5441229382237793], res_norm=2.544e+00
2025-12-01 16:53:41,006 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,019 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,034 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,046 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,062 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,074 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,091 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,103 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,118 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,131 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,145 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,158 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,173 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,186 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,201 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,213 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,228 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,241 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,256 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,268 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,284 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,295 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:41,730 - INFO - integration_test - Step 43: MPC solve successful
2025-12-01 16:53:41,738 - INFO - integration_test - Step 43: Computed 10 numeric contouring constraints for visualization (s=11.504)
2025-12-01 16:53:41,738 - DEBUG - integration_test - Step 43: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:41,738 - INFO - integration_test - === Applying control at step 43 ===
2025-12-01 16:53:41,738 - INFO - integration_test -   Control dict from planner: {'a': 6.822824037879985e-08, 'w': 0.269125925609591}
2025-12-01 16:53:41,738 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:41,738 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:41,739 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:41,740 - INFO - integration_test - Step 43 completed in 0.771s
2025-12-01 16:53:41,760 - INFO - integration_test - Step 44 (contouring until path end)
2025-12-01 16:53:41,760 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[10.95484699  4.4571024   0.17744454  3.00000003 11.80433262]
2025-12-01 16:53:41,761 - DEBUG - integration_test - Step 44: Using propagated spline 11.8043 (close to path, dist=0.320m)
2025-12-01 16:53:41,761 - DEBUG - integration_test -   Set spline state to 11.8043
2025-12-01 16:53:41,762 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:41,762 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:41,777 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(10.955, 4.457), path_start=(0.000, 0.000), dist=11.827m
2025-12-01 16:53:41,777 - WARNING - integration_test - Could not update reference path at step 44: x and y must have the same length
2025-12-01 16:53:41,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2025-12-01 16:53:41,780 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:41,781 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:41,781 - INFO - integration_test - Warmstart k=0: x0=10.954846993636005 , y0=4.457102400383075 , psi0=0.17744454247739969 , v0=3.0 , spline0=11.804332615012896 , a0=0.0 , w0=0.0
2025-12-01 16:53:41,782 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:41,782 - INFO - integration_test - Dyn residual k=0: pred=[11.250136388336148, 4.510056846632881, 0.17744454247739969, 3.0, 12.104332615012897], ws=[11.250136388336148, 4.510056846632881, 0.17744454247739982, 3.0, 14.698265914443274], res=[0.0, 0.0, -1.3877787807814457e-16, 0.0, -2.593933299430377], res_norm=2.594e+00
2025-12-01 16:53:41,783 - INFO - integration_test - Dyn residual k=1: pred=[11.54542578303629, 4.5630112928826865, 0.17744454247739982, 3.0, 14.998265914443275], ws=[11.54542578303629, 4.5630112928826865, 0.17744454247739982, 3.0, 17.49271364889257], res=[0.0, 0.0, 0.0, 0.0, -2.4944477344492935], res_norm=2.494e+00
2025-12-01 16:53:41,784 - INFO - integration_test - Dyn residual k=2: pred=[11.840715177736431, 4.615965739132492, 0.17744454247739982, 3.0, 17.79271364889257], ws=[11.840715177736431, 4.615965739132492, 0.17744454247739982, 3.0, 20.3744419107357], res=[0.0, 0.0, 0.0, 0.0, -2.581728261843132], res_norm=2.582e+00
2025-12-01 16:53:41,798 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,811 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,826 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,839 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,854 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,867 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,883 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,896 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,911 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,923 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,938 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,951 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,966 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:41,979 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:41,995 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,007 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,022 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,035 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,063 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,080 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,090 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:42,513 - INFO - integration_test - Step 44: MPC solve successful
2025-12-01 16:53:42,521 - INFO - integration_test - Step 44: Computed 10 numeric contouring constraints for visualization (s=11.804)
2025-12-01 16:53:42,521 - DEBUG - integration_test - Step 44: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:42,521 - INFO - integration_test - === Applying control at step 44 ===
2025-12-01 16:53:42,521 - INFO - integration_test -   Control dict from planner: {'a': 2.274354786225701e-08, 'w': -0.44257137754238796}
2025-12-01 16:53:42,521 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:42,521 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:42,522 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:42,523 - INFO - integration_test - Step 44 completed in 0.763s
2025-12-01 16:53:42,544 - INFO - integration_test - Step 45 (contouring until path end)
2025-12-01 16:53:42,544 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.25121162  4.5035063   0.1331874   3.00000003 12.10433262]
2025-12-01 16:53:42,545 - DEBUG - integration_test - Step 45: Using propagated spline 12.1043 (close to path, dist=0.329m)
2025-12-01 16:53:42,545 - DEBUG - integration_test -   Set spline state to 12.1043
2025-12-01 16:53:42,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:42,546 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:42,560 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.251, 4.504), path_start=(0.000, 0.000), dist=12.119m
2025-12-01 16:53:42,560 - WARNING - integration_test - Could not update reference path at step 45: x and y must have the same length
2025-12-01 16:53:42,560 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2025-12-01 16:53:42,563 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:42,564 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:42,564 - INFO - integration_test - Warmstart k=0: x0=11.251211618826728 , y0=4.503506296671676 , psi0=0.13318740472316087 , v0=3.0 , spline0=12.104332617899024 , a0=0.0 , w0=0.0
2025-12-01 16:53:42,564 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:42,565 - INFO - integration_test - Dyn residual k=0: pred=[11.54855471713557, 4.543344493017624, 0.13318740472316087, 3.0, 12.404332617899025], ws=[11.54855471713557, 4.543344493017624, 0.1331874047231607, 3.0, 15.088764471115063], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -2.6844318532160383], res_norm=2.684e+00
2025-12-01 16:53:42,566 - INFO - integration_test - Dyn residual k=1: pred=[11.845897815444411, 4.583182689363572, 0.1331874047231607, 3.0, 15.388764471115064], ws=[11.845897815444411, 4.583182689363572, 0.1331874047231607, 3.0, 18.029572284073375], res=[0.0, 0.0, 0.0, 0.0, -2.640807812958311], res_norm=2.641e+00
2025-12-01 16:53:42,566 - INFO - integration_test - Dyn residual k=2: pred=[12.143240913753253, 4.62302088570952, 0.1331874047231607, 3.0, 18.329572284073375], ws=[12.143240913753253, 4.62302088570952, 0.1331874047231607, 3.0, 21.01301827448845], res=[0.0, 0.0, 0.0, 0.0, -2.6834459904150734], res_norm=2.683e+00
2025-12-01 16:53:42,581 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,595 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,611 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,623 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,639 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,652 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,667 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,680 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,696 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,708 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,724 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,736 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,751 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,764 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,779 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,792 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,807 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,819 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,835 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,847 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:42,862 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:42,872 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:43,201 - INFO - integration_test - Step 45: MPC solve successful
2025-12-01 16:53:43,209 - INFO - integration_test - Step 45: Computed 10 numeric contouring constraints for visualization (s=12.104)
2025-12-01 16:53:43,209 - DEBUG - integration_test - Step 45: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:43,209 - INFO - integration_test - === Applying control at step 45 ===
2025-12-01 16:53:43,209 - INFO - integration_test -   Control dict from planner: {'a': -4.24202472058653e-08, 'w': -0.4264937359535659}
2025-12-01 16:53:43,209 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:43,209 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:43,210 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:43,210 - INFO - integration_test - Step 45 completed in 0.666s
2025-12-01 16:53:43,231 - INFO - integration_test - Step 46 (contouring until path end)
2025-12-01 16:53:43,232 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.54931399  4.53699263  0.09053803  3.00000002 12.40433262]
2025-12-01 16:53:43,232 - DEBUG - integration_test - Step 46: Using propagated spline 12.4043 (close to path, dist=0.229m)
2025-12-01 16:53:43,232 - DEBUG - integration_test -   Set spline state to 12.4043
2025-12-01 16:53:43,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:43,234 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:43,247 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.549, 4.537), path_start=(0.000, 0.000), dist=12.409m
2025-12-01 16:53:43,248 - WARNING - integration_test - Could not update reference path at step 46: x and y must have the same length
2025-12-01 16:53:43,248 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2025-12-01 16:53:43,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:43,252 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:43,252 - INFO - integration_test - Warmstart k=0: x0=11.549313993643942 , y0=4.536992629680912 , psi0=0.09053803112780429 , v0=3.0 , spline0=12.404332620360949 , a0=0.0 , w0=0.0
2025-12-01 16:53:43,252 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:43,253 - INFO - integration_test - Dyn residual k=0: pred=[11.8480852630652, 4.564116946601542, 0.09053803112780429, 3.0, 12.70433262036095], ws=[11.8480852630652, 4.564116946601542, 0.09053803112780434, 3.0, 15.40514885077412], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.700816230413171], res_norm=2.701e+00
2025-12-01 16:53:43,254 - INFO - integration_test - Dyn residual k=1: pred=[12.146856532486456, 4.591241263522172, 0.09053803112780434, 3.0, 15.70514885077412], ws=[12.146856532486456, 4.591241263522172, 0.09053803112780434, 3.0, 18.373102363394718], res=[0.0, 0.0, 0.0, 0.0, -2.6679535126205973], res_norm=2.668e+00
2025-12-01 16:53:43,254 - INFO - integration_test - Dyn residual k=2: pred=[12.445627801907714, 4.618365580442802, 0.09053803112780434, 3.0, 18.67310236339472], ws=[12.445627801907714, 4.618365580442802, 0.09053803112780434, 3.0, 21.505177396229424], res=[0.0, 0.0, 0.0, 0.0, -2.8320750328347053], res_norm=2.832e+00
2025-12-01 16:53:43,268 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,282 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,298 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,310 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,325 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,338 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,353 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,366 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,380 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,393 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,409 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,421 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,436 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,449 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,464 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,478 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,493 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,505 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,521 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,533 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:43,548 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:43,559 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:44,003 - INFO - integration_test - Step 46: MPC solve successful
2025-12-01 16:53:44,011 - INFO - integration_test - Step 46: Computed 10 numeric contouring constraints for visualization (s=12.404)
2025-12-01 16:53:44,011 - DEBUG - integration_test - Step 46: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:44,011 - INFO - integration_test - === Applying control at step 46 ===
2025-12-01 16:53:44,011 - INFO - integration_test -   Control dict from planner: {'a': -1.4268398338946758e-06, 'w': -0.42230208527951285}
2025-12-01 16:53:44,011 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:44,011 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:44,012 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:44,013 - INFO - integration_test - Step 46 completed in 0.781s
2025-12-01 16:53:44,034 - INFO - integration_test - Step 47 (contouring until path end)
2025-12-01 16:53:44,036 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.84856911  4.55780124  0.04830782  2.99999988 12.70433261]
2025-12-01 16:53:44,036 - DEBUG - integration_test - Step 47: Using propagated spline 12.7043 (close to path, dist=0.219m)
2025-12-01 16:53:44,036 - DEBUG - integration_test -   Set spline state to 12.7043
2025-12-01 16:53:44,038 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:44,038 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:44,051 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.849, 4.558), path_start=(0.000, 0.000), dist=12.695m
2025-12-01 16:53:44,052 - WARNING - integration_test - Could not update reference path at step 47: x and y must have the same length
2025-12-01 16:53:44,052 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2025-12-01 16:53:44,054 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:44,056 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:44,056 - INFO - integration_test - Warmstart k=0: x0=11.848569110009711 , y0=4.5578012358566315 , psi0=0.048307822599853 , v0=2.9999998819352713 , spline0=12.704332608554475 , a0=0.0 , w0=0.0
2025-12-01 16:53:44,056 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:44,056 - INFO - integration_test - Dyn residual k=0: pred=[12.148219119426845, 4.572287946056944, 0.048307822599853, 2.9999998819352713, 13.004332596748002], ws=[12.148219119426845, 4.572287946056944, 0.048307822599853, 2.9999998819352713, 15.802543317819179], res=[0.0, 0.0, 0.0, 0.0, -2.798210721071177], res_norm=2.798e+00
2025-12-01 16:53:44,057 - INFO - integration_test - Dyn residual k=1: pred=[12.447869128843978, 4.586774656257257, 0.048307822599853, 2.9999998819352713, 16.102543306012706], ws=[12.447869128843978, 4.586774656257257, 0.048307822599853, 2.9999998819352713, 18.83161319341813], res=[0.0, 0.0, 0.0, 0.0, -2.729069887405423], res_norm=2.729e+00
2025-12-01 16:53:44,058 - INFO - integration_test - Dyn residual k=2: pred=[12.747519138261111, 4.601261366457569, 0.048307822599853, 2.9999998819352713, 19.131613181611655], ws=[12.747519138261111, 4.601261366457569, 0.048307822599853, 2.9999998819352713, 22.04518771610422], res=[0.0, 0.0, 0.0, 0.0, -2.9135745344925645], res_norm=2.914e+00
2025-12-01 16:53:44,073 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,086 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,101 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,114 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,129 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,142 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,157 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,169 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,185 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,200 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,215 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,228 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,243 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,255 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,271 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,283 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,299 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,311 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,327 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,339 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,354 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,364 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:44,839 - INFO - integration_test - Step 47: MPC solve successful
2025-12-01 16:53:44,846 - INFO - integration_test - Step 47: Computed 10 numeric contouring constraints for visualization (s=12.704)
2025-12-01 16:53:44,846 - DEBUG - integration_test - Step 47: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:44,847 - INFO - integration_test - === Applying control at step 47 ===
2025-12-01 16:53:44,847 - INFO - integration_test -   Control dict from planner: {'a': 9.766725501375597e-07, 'w': -0.7999992056218134}
2025-12-01 16:53:44,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:44,847 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:44,848 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:44,848 - INFO - integration_test - Step 47 completed in 0.812s
2025-12-01 16:53:44,868 - INFO - integration_test - Step 48 (contouring until path end)
2025-12-01 16:53:44,870 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.14847876  4.5602929  -0.0316921   2.99999998 13.00433261]
2025-12-01 16:53:44,871 - DEBUG - integration_test - Step 48: Using propagated spline 13.0043 (close to path, dist=0.209m)
2025-12-01 16:53:44,871 - DEBUG - integration_test -   Set spline state to 13.0043
2025-12-01 16:53:44,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:44,873 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:44,887 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.148, 4.560), path_start=(0.000, 0.000), dist=12.976m
2025-12-01 16:53:44,887 - WARNING - integration_test - Could not update reference path at step 48: x and y must have the same length
2025-12-01 16:53:44,887 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2025-12-01 16:53:44,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:44,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:44,891 - INFO - integration_test - Warmstart k=0: x0=12.148478763647693 , y0=4.560292901227686 , psi0=-0.03169209796232833 , v0=2.9999999796025265 , spline0=13.004332606514728 , a0=0.0 , w0=0.0
2025-12-01 16:53:44,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:44,892 - INFO - integration_test - Dyn residual k=0: pred=[12.448328115857528, 4.55078686338354, -0.03169209796232833, 2.9999999796025265, 13.30433260447498], ws=[12.448328115857528, 4.55078686338354, -0.031692097962328525, 2.9999999796025265, 16.120390755169886], res=[0.0, 0.0, 1.942890293094024e-16, 0.0, -2.8160581506949054], res_norm=2.816e+00
2025-12-01 16:53:44,893 - INFO - integration_test - Dyn residual k=1: pred=[12.748177468067363, 4.541280825539395, -0.031692097962328525, 2.9999999796025265, 16.42039075313014], ws=[12.748177468067363, 4.541280825539395, -0.031692097962328525, 2.9999999796025265, 19.285463042583213], res=[0.0, 0.0, 0.0, 0.0, -2.8650722894530745], res_norm=2.865e+00
2025-12-01 16:53:44,894 - INFO - integration_test - Dyn residual k=2: pred=[13.048026820277197, 4.531774787695249, -0.031692097962328525, 2.9999999796025265, 19.585463040543466], ws=[13.048026820277197, 4.531774787695249, -0.031692097962328525, 2.9999999796025265, 22.564774571006243], res=[0.0, 0.0, 0.0, 0.0, -2.979311530462777], res_norm=2.979e+00
2025-12-01 16:53:44,908 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,921 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,949 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,964 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:44,977 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:44,993 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,005 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,020 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,033 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,048 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,060 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,076 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,088 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,104 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,116 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,131 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,143 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,159 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,171 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,187 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,197 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:45,603 - INFO - integration_test - Step 48: MPC solve successful
2025-12-01 16:53:45,610 - INFO - integration_test - Step 48: Computed 10 numeric contouring constraints for visualization (s=13.004)
2025-12-01 16:53:45,611 - DEBUG - integration_test - Step 48: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:45,611 - INFO - integration_test - === Applying control at step 48 ===
2025-12-01 16:53:45,611 - INFO - integration_test -   Control dict from planner: {'a': 4.566181555634068e-08, 'w': -0.7999845772944362}
2025-12-01 16:53:45,611 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:45,611 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:45,612 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:45,612 - INFO - integration_test - Step 48 completed in 0.742s
2025-12-01 16:53:45,632 - INFO - integration_test - Step 49 (contouring until path end)
2025-12-01 16:53:45,633 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.44762836  4.53880965 -0.11169056  2.99999998 13.3043326 ]
2025-12-01 16:53:45,634 - DEBUG - integration_test - Step 49: Using propagated spline 13.3043 (close to path, dist=0.153m)
2025-12-01 16:53:45,634 - DEBUG - integration_test -   Set spline state to 13.3043
2025-12-01 16:53:45,635 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:45,636 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:45,649 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.448, 4.539), path_start=(0.000, 0.000), dist=13.249m
2025-12-01 16:53:45,649 - WARNING - integration_test - Could not update reference path at step 49: x and y must have the same length
2025-12-01 16:53:45,649 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2025-12-01 16:53:45,652 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:45,653 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:45,653 - INFO - integration_test - Warmstart k=0: x0=12.447628364245112 , y0=4.538809651385234 , psi0=-0.11169055569177196 , v0=2.999999984168708 , spline0=13.304332604931599 , a0=0.0 , w0=0.0
2025-12-01 16:53:45,653 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:45,654 - INFO - integration_test - Dyn residual k=0: pred=[12.745759090080304, 4.505372107170615, -0.11169055569177196, 2.999999984168708, 13.60433260334847], ws=[12.745759090080304, 4.505372107170615, -0.111690555691772, 2.999999984168708, 16.527247818195576], res=[0.0, 0.0, 4.163336342344337e-17, 0.0, -2.922915214847107], res_norm=2.923e+00
2025-12-01 16:53:45,654 - INFO - integration_test - Dyn residual k=1: pred=[13.043889815915495, 4.471934562955996, -0.111690555691772, 2.999999984168708, 16.82724781661245], ws=[13.043889815915495, 4.471934562955996, -0.111690555691772, 2.999999984168708, 19.764083068571257], res=[0.0, 0.0, 0.0, 0.0, -2.936835251958808], res_norm=2.937e+00
2025-12-01 16:53:45,655 - INFO - integration_test - Dyn residual k=2: pred=[13.342020541750687, 4.438497018741376, -0.111690555691772, 2.999999984168708, 20.06408306698813], ws=[13.342020541750687, 4.438497018741376, -0.111690555691772, 2.999999984168708, 23.12812603018676], res=[0.0, 0.0, 0.0, 0.0, -3.064042963198631], res_norm=3.064e+00
2025-12-01 16:53:45,669 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,682 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,699 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,711 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,726 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,739 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,754 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,766 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,782 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,794 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,810 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,822 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,837 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,850 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,865 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,877 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,894 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,906 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,922 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,935 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:45,950 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:45,961 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:46,444 - INFO - integration_test - Step 49: MPC solve successful
2025-12-01 16:53:46,452 - INFO - integration_test - Step 49: Computed 10 numeric contouring constraints for visualization (s=13.304)
2025-12-01 16:53:46,452 - DEBUG - integration_test - Step 49: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:46,452 - INFO - integration_test - === Applying control at step 49 ===
2025-12-01 16:53:46,452 - INFO - integration_test -   Control dict from planner: {'a': 2.1527830350892597e-07, 'w': -0.7999946959532768}
2025-12-01 16:53:46,452 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:46,452 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:46,453 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:46,454 - INFO - integration_test - Step 49 completed in 0.820s
2025-12-01 16:53:46,476 - INFO - integration_test - Step 50 (contouring until path end)
2025-12-01 16:53:46,477 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.74410442  4.49348897 -0.19169003  3.00000001 13.60433261]
2025-12-01 16:53:46,478 - DEBUG - integration_test - Step 50: Using propagated spline 13.6043 (close to path, dist=0.248m)
2025-12-01 16:53:46,478 - DEBUG - integration_test -   Set spline state to 13.6043
2025-12-01 16:53:46,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:46,479 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:46,493 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.744, 4.493), path_start=(0.000, 0.000), dist=13.513m
2025-12-01 16:53:46,493 - WARNING - integration_test - Could not update reference path at step 50: x and y must have the same length
2025-12-01 16:53:46,493 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2025-12-01 16:53:46,496 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:46,497 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:46,497 - INFO - integration_test - Warmstart k=0: x0=12.744104415479162 , y0=4.493488969849314 , psi0=-0.19169002528709964 , v0=3.0 , spline0=13.604332605501252 , a0=0.0 , w0=0.0
2025-12-01 16:53:46,497 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:46,498 - INFO - integration_test - Dyn residual k=0: pred=[13.038609512449629, 4.436333498908941, -0.19169002528709964, 3.0, 13.904332605501253], ws=[13.038609512449629, 4.436333498908941, -0.19169002528709944, 3.0, 16.846968185039277], res=[0.0, 0.0, -1.942890293094024e-16, 0.0, -2.942635579538024], res_norm=2.943e+00
2025-12-01 16:53:46,499 - INFO - integration_test - Dyn residual k=1: pred=[13.333114609420095, 4.379178027968568, -0.19169002528709944, 3.0, 17.146968185039277], ws=[13.333114609420095, 4.379178027968568, -0.19169002528709944, 3.0, 20.11737073664987], res=[0.0, 0.0, 0.0, 0.0, -2.9704025516105936], res_norm=2.970e+00
2025-12-01 16:53:46,500 - INFO - integration_test - Dyn residual k=2: pred=[13.627619706390561, 4.322022557028196, -0.19169002528709944, 3.0, 20.417370736649872], ws=[13.627619706390561, 4.322022557028196, -0.19169002528709944, 3.0, 23.520734136334088], res=[0.0, 0.0, 0.0, 0.0, -3.1033633996842163], res_norm=3.103e+00
2025-12-01 16:53:46,514 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,527 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,542 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,555 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,570 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,583 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,599 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,611 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,627 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,639 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,654 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,666 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,682 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,695 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,710 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,722 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,737 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,750 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,765 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,778 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:46,794 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:46,804 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:47,236 - INFO - integration_test - Step 50: MPC solve successful
2025-12-01 16:53:47,244 - INFO - integration_test - Step 50: Computed 10 numeric contouring constraints for visualization (s=13.604)
2025-12-01 16:53:47,244 - DEBUG - integration_test - Step 50: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:47,244 - INFO - integration_test - === Applying control at step 50 ===
2025-12-01 16:53:47,244 - INFO - integration_test -   Control dict from planner: {'a': 1.590990489820502e-07, 'w': -0.7999999329934394}
2025-12-01 16:53:47,244 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:47,244 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:47,245 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:47,245 - INFO - integration_test - Step 50 completed in 0.768s
2025-12-01 16:53:47,265 - INFO - integration_test - Step 51 (contouring until path end)
2025-12-01 16:53:47,266 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.03601048  4.42462052 -0.27169002  3.00000002 13.90433261]
2025-12-01 16:53:47,267 - DEBUG - integration_test - Step 51: Using propagated spline 13.9043 (close to path, dist=0.154m)
2025-12-01 16:53:47,267 - DEBUG - integration_test -   Set spline state to 13.9043
2025-12-01 16:53:47,268 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:47,269 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:47,283 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.036, 4.425), path_start=(0.000, 0.000), dist=13.766m
2025-12-01 16:53:47,284 - WARNING - integration_test - Could not update reference path at step 51: x and y must have the same length
2025-12-01 16:53:47,284 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2025-12-01 16:53:47,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:47,288 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:47,288 - INFO - integration_test - Warmstart k=0: x0=13.036010480129622 , y0=4.424620522466476 , psi0=-0.2716900185864436 , v0=3.0 , spline0=13.904332607661896 , a0=0.0 , w0=0.0
2025-12-01 16:53:47,288 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:47,289 - INFO - integration_test - Dyn residual k=0: pred=[13.325006101875195, 4.344112568748287, -0.2716900185864436, 3.0, 14.204332607661897], ws=[13.325006101875195, 4.344112568748287, -0.2716900185864435, 3.0, 17.265169515815778], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.060836908153881], res_norm=3.061e+00
2025-12-01 16:53:47,289 - INFO - integration_test - Dyn residual k=1: pred=[13.614001723620767, 4.263604615030097, -0.2716900185864435, 3.0, 17.56516951581578], ws=[13.614001723620767, 4.263604615030097, -0.2716900185864435, 3.0, 20.73323053898401], res=[0.0, 0.0, 0.0, 0.0, -3.1680610231682316], res_norm=3.168e+00
2025-12-01 16:53:47,290 - INFO - integration_test - Dyn residual k=2: pred=[13.90299734536634, 4.183096661311907, -0.2716900185864435, 3.0, 21.03323053898401], ws=[13.90299734536634, 4.183096661311907, -0.2716900185864435, 3.0, 24.247903414008352], res=[0.0, 0.0, 0.0, 0.0, -3.214672875024341], res_norm=3.215e+00
2025-12-01 16:53:47,304 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,317 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,332 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,345 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,360 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,373 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,388 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,401 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,415 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,428 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,443 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,455 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,470 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,483 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,498 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,510 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,525 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,538 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,553 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,565 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:47,581 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:47,591 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:47,962 - INFO - integration_test - Step 51: MPC solve successful
2025-12-01 16:53:47,971 - INFO - integration_test - Step 51: Computed 10 numeric contouring constraints for visualization (s=13.904)
2025-12-01 16:53:47,971 - DEBUG - integration_test - Step 51: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:47,971 - INFO - integration_test - === Applying control at step 51 ===
2025-12-01 16:53:47,971 - INFO - integration_test -   Control dict from planner: {'a': -6.827787352971181e-07, 'w': -0.7999577452386839}
2025-12-01 16:53:47,971 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:47,971 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:47,972 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:47,973 - INFO - integration_test - Step 51 completed in 0.707s
2025-12-01 16:53:47,993 - INFO - integration_test - Step 52 (contouring until path end)
2025-12-01 16:53:47,995 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.32147954  4.33264536 -0.35168579  2.99999995 14.2043326 ]
2025-12-01 16:53:47,995 - DEBUG - integration_test - Step 52: Using propagated spline 14.2043 (close to path, dist=0.335m)
2025-12-01 16:53:47,995 - DEBUG - integration_test -   Set spline state to 14.2043
2025-12-01 16:53:47,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:47,997 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:48,010 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.321, 4.333), path_start=(0.000, 0.000), dist=14.008m
2025-12-01 16:53:48,011 - WARNING - integration_test - Could not update reference path at step 52: x and y must have the same length
2025-12-01 16:53:48,011 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2025-12-01 16:53:48,013 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:48,015 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:48,015 - INFO - integration_test - Warmstart k=0: x0=13.321479542739059 , y0=4.332645355127532 , psi0=-0.351685793110312 , v0=2.9999999533285697 , spline0=14.204332602994754 , a0=0.0 , w0=0.0
2025-12-01 16:53:48,015 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:48,015 - INFO - integration_test - Dyn residual k=0: pred=[13.603117535425346, 4.229301084481533, -0.351685793110312, 2.9999999533285697, 14.504332598327611], ws=[13.603117535425346, 4.229301084481533, -0.3516857931103119, 2.9999999533285697, 17.587057828211748], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -3.0827252298841366], res_norm=3.083e+00
2025-12-01 16:53:48,016 - INFO - integration_test - Dyn residual k=1: pred=[13.884755528111633, 4.1259568138355345, -0.3516857931103119, 2.9999999533285697, 17.887057823544605], ws=[13.884755528111633, 4.1259568138355345, -0.3516857931103119, 2.9999999533285697, 21.09231479947698], res=[0.0, 0.0, 0.0, 0.0, -3.2052569759323752], res_norm=3.205e+00
2025-12-01 16:53:48,017 - INFO - integration_test - Dyn residual k=2: pred=[14.16639352079792, 4.0226125431895365, -0.3516857931103119, 2.9999999533285697, 21.392314794809838], ws=[14.16639352079792, 4.0226125431895365, -0.3516857931103119, 2.9999999533285697, 24.72658902925177], res=[0.0, 0.0, 0.0, 0.0, -3.3342742344419314], res_norm=3.334e+00
2025-12-01 16:53:48,032 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,045 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,061 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,073 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,090 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,103 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,118 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,131 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,146 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,159 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,174 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,187 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,203 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,215 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,232 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,244 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,261 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,273 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,290 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,303 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,318 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,328 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:48,734 - INFO - integration_test - Step 52: MPC solve successful
2025-12-01 16:53:48,742 - INFO - integration_test - Step 52: Computed 10 numeric contouring constraints for visualization (s=14.204)
2025-12-01 16:53:48,742 - DEBUG - integration_test - Step 52: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:48,742 - INFO - integration_test - === Applying control at step 52 ===
2025-12-01 16:53:48,742 - INFO - integration_test -   Control dict from planner: {'a': 4.833228911196092e-07, 'w': -0.7999984255957058}
2025-12-01 16:53:48,742 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:48,742 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:48,743 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:48,743 - INFO - integration_test - Step 52 completed in 0.749s
2025-12-01 16:53:48,764 - INFO - integration_test - Step 53 (contouring until path end)
2025-12-01 16:53:48,766 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.59868567  4.21815179 -0.43168564  3.         14.5043326 ]
2025-12-01 16:53:48,767 - DEBUG - integration_test - Step 53: Using propagated spline 14.5043 (close to path, dist=0.267m)
2025-12-01 16:53:48,767 - DEBUG - integration_test -   Set spline state to 14.5043
2025-12-01 16:53:48,768 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:48,768 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:48,782 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.599, 4.218), path_start=(0.000, 0.000), dist=14.238m
2025-12-01 16:53:48,783 - WARNING - integration_test - Could not update reference path at step 53: x and y must have the same length
2025-12-01 16:53:48,783 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2025-12-01 16:53:48,786 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:48,787 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:48,787 - INFO - integration_test - Warmstart k=0: x0=13.59868566653378 , y0=4.218151789509686 , psi0=-0.4316856356698826 , v0=3.0 , spline0=14.50433260316084 , a0=0.0 , w0=0.0
2025-12-01 16:53:48,787 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:48,788 - INFO - integration_test - Dyn residual k=0: pred=[13.871164196442, 4.092631071143929, -0.4316856356698826, 3.0, 14.80433260316084], ws=[13.871164196442, 4.092631071143929, -0.43168563566988283, 3.0, 18.017753331492514], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.2134207283316734], res_norm=3.213e+00
2025-12-01 16:53:48,788 - INFO - integration_test - Dyn residual k=1: pred=[14.14364272635022, 3.967110352778172, -0.43168563566988283, 3.0, 18.317753331492515], ws=[14.14364272635022, 3.967110352778172, -0.43168563566988283, 3.0, 21.613120892030558], res=[0.0, 0.0, 0.0, 0.0, -3.2953675605380433], res_norm=3.295e+00
2025-12-01 16:53:48,789 - INFO - integration_test - Dyn residual k=2: pred=[14.41612125625844, 3.841589634412415, -0.43168563566988283, 3.0, 21.91312089203056], ws=[14.41612125625844, 3.841589634412415, -0.43168563566988283, 3.0, 25.323597635678578], res=[0.0, 0.0, 0.0, 0.0, -3.410476743648019], res_norm=3.410e+00
2025-12-01 16:53:48,803 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,816 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,832 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,844 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,860 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,872 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,888 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,900 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,915 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,928 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,943 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,955 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,971 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:48,984 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:48,999 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,011 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,027 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,041 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,057 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,071 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,087 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,098 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:49,771 - INFO - integration_test - Step 53: MPC solve successful
2025-12-01 16:53:49,780 - INFO - integration_test - Step 53: Computed 10 numeric contouring constraints for visualization (s=14.504)
2025-12-01 16:53:49,781 - DEBUG - integration_test - Step 53: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:49,781 - INFO - integration_test - === Applying control at step 53 ===
2025-12-01 16:53:49,781 - INFO - integration_test -   Control dict from planner: {'a': 1.0834131734933418e-07, 'w': 0.39460338627868613}
2025-12-01 16:53:49,781 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:49,781 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:49,782 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:49,782 - INFO - integration_test - Step 53 completed in 1.016s
2025-12-01 16:53:49,810 - INFO - integration_test - Step 54 (contouring until path end)
2025-12-01 16:53:49,812 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.87356971  4.09803899 -0.3922253   3.00000001 14.8043326 ]
2025-12-01 16:53:49,813 - DEBUG - integration_test - Step 54: Using propagated spline 14.8043 (close to path, dist=0.364m)
2025-12-01 16:53:49,813 - DEBUG - integration_test -   Set spline state to 14.8043
2025-12-01 16:53:49,815 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:49,815 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:49,833 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.874, 4.098), path_start=(0.000, 0.000), dist=14.466m
2025-12-01 16:53:49,833 - WARNING - integration_test - Could not update reference path at step 54: x and y must have the same length
2025-12-01 16:53:49,833 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2025-12-01 16:53:49,837 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:49,839 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:49,839 - INFO - integration_test - Warmstart k=0: x0=13.873569712962965 , y0=4.0980389932989265 , psi0=-0.392225297042014 , v0=3.0 , spline0=14.80433260441034 , a0=0.0 , w0=0.0
2025-12-01 16:53:49,839 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:49,841 - INFO - integration_test - Dyn residual k=0: pred=[14.150787934468157, 3.983365292453884, -0.392225297042014, 3.0, 15.10433260441034], ws=[14.150787934468157, 3.983365292453884, -0.3922252970420139, 3.0, 18.34198227739712], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -3.2376496729867785], res_norm=3.238e+00
2025-12-01 16:53:49,842 - INFO - integration_test - Dyn residual k=1: pred=[14.42800615597335, 3.868691591608841, -0.3922252970420139, 3.0, 18.64198227739712], ws=[14.42800615597335, 3.868691591608841, -0.3922252970420139, 3.0, 22.09170138422366], res=[0.0, 0.0, 0.0, 0.0, -3.4497191068265423], res_norm=3.450e+00
2025-12-01 16:53:49,843 - INFO - integration_test - Dyn residual k=2: pred=[14.705224377478542, 3.7540178907637984, -0.3922252970420139, 3.0, 22.391701384223662], ws=[14.705224377478542, 3.7540178907637984, -0.3922252970420139, 3.0, 25.8430688818225], res=[0.0, 0.0, 0.0, 0.0, -3.451367497598838], res_norm=3.451e+00
2025-12-01 16:53:49,860 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,877 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,912 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,930 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,945 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,963 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:49,979 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:49,999 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,015 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:50,035 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,051 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:50,073 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,089 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:50,109 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,126 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:50,145 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,162 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:50,180 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,196 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:50,216 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:50,229 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:50,867 - INFO - integration_test - Step 54: MPC solve successful
2025-12-01 16:53:50,877 - INFO - integration_test - Step 54: Computed 10 numeric contouring constraints for visualization (s=14.804)
2025-12-01 16:53:50,878 - DEBUG - integration_test - Step 54: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:50,878 - INFO - integration_test - === Applying control at step 54 ===
2025-12-01 16:53:50,878 - INFO - integration_test -   Control dict from planner: {'a': 1.0744037934782737e-07, 'w': 0.6041530166509738}
2025-12-01 16:53:50,878 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:50,878 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:50,879 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:50,880 - INFO - integration_test - Step 54 completed in 1.068s
2025-12-01 16:53:50,922 - INFO - integration_test - Step 55 (contouring until path end)
2025-12-01 16:53:50,923 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.1540823   3.9918066  -0.33181     3.00000002 15.10433261]
2025-12-01 16:53:50,924 - DEBUG - integration_test - Step 55: Using propagated spline 15.1043 (close to path, dist=0.492m)
2025-12-01 16:53:50,924 - DEBUG - integration_test -   Set spline state to 15.1043
2025-12-01 16:53:50,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:50,928 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:50,962 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.154, 3.992), path_start=(0.000, 0.000), dist=14.706m
2025-12-01 16:53:50,962 - WARNING - integration_test - Could not update reference path at step 55: x and y must have the same length
2025-12-01 16:53:50,962 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2025-12-01 16:53:50,967 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:50,968 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:50,969 - INFO - integration_test - Warmstart k=0: x0=14.15408229632749 , y0=3.99180660302312 , psi0=-0.3318099953769166 , v0=3.0 , spline0=15.104332606734243 , a0=0.0 , w0=0.0
2025-12-01 16:53:50,969 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:50,970 - INFO - integration_test - Dyn residual k=0: pred=[14.437718579670188, 3.894080154343448, -0.3318099953769166, 3.0, 15.404332606734243], ws=[14.437718579670188, 3.894080154343448, -0.3318099953769167, 3.0, 18.78555545079156], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -3.3812228440573158], res_norm=3.381e+00
2025-12-01 16:53:50,971 - INFO - integration_test - Dyn residual k=1: pred=[14.721354863012886, 3.796353705663776, -0.3318099953769167, 3.0, 19.08555545079156], ws=[14.721354863012886, 3.796353705663776, -0.3318099953769167, 3.0, 22.62532830051491], res=[0.0, 0.0, 0.0, 0.0, -3.5397728497233487], res_norm=3.540e+00
2025-12-01 16:53:50,972 - INFO - integration_test - Dyn residual k=2: pred=[15.004991146355584, 3.6986272569841043, -0.3318099953769167, 3.0, 22.92532830051491], ws=[15.004991146355584, 3.6986272569841043, -0.3318099953769167, 3.0, 26.43561546824854], res=[0.0, 0.0, 0.0, 0.0, -3.5102871677336296], res_norm=3.510e+00
2025-12-01 16:53:50,992 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,008 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,028 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,044 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,065 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,080 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,098 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,113 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,131 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,147 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,167 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,183 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,202 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,217 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,235 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,250 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,285 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,303 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,318 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,336 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,349 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:51,754 - INFO - integration_test - Step 55: MPC solve successful
2025-12-01 16:53:51,762 - INFO - integration_test - Step 55: Computed 10 numeric contouring constraints for visualization (s=15.104)
2025-12-01 16:53:51,762 - DEBUG - integration_test - Step 55: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:51,762 - INFO - integration_test - === Applying control at step 55 ===
2025-12-01 16:53:51,762 - INFO - integration_test -   Control dict from planner: {'a': 3.9071052537341234e-08, 'w': 0.5498477861258482}
2025-12-01 16:53:51,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:51,762 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:51,763 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:51,764 - INFO - integration_test - Step 55 completed in 0.841s
2025-12-01 16:53:51,787 - INFO - integration_test - Step 56 (contouring until path end)
2025-12-01 16:53:51,788 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.44026174  3.90192526 -0.27682522  3.00000003 15.40433261]
2025-12-01 16:53:51,789 - DEBUG - integration_test - Step 56: Using propagated spline 15.4043 (close to path, dist=0.475m)
2025-12-01 16:53:51,789 - DEBUG - integration_test -   Set spline state to 15.4043
2025-12-01 16:53:51,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:51,790 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:51,804 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.440, 3.902), path_start=(0.000, 0.000), dist=14.958m
2025-12-01 16:53:51,804 - WARNING - integration_test - Could not update reference path at step 56: x and y must have the same length
2025-12-01 16:53:51,804 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2025-12-01 16:53:51,807 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:51,808 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:51,808 - INFO - integration_test - Warmstart k=0: x0=14.440261740501162 , y0=3.901925263715568 , psi0=-0.27682521676433175 , v0=3.0 , spline0=15.404332609448856 , a0=0.0 , w0=0.0
2025-12-01 16:53:51,808 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:51,809 - INFO - integration_test - Dyn residual k=0: pred=[14.728840129329996, 3.819934328235144, -0.27682521676433175, 3.0, 15.704332609448857], ws=[14.728840129329996, 3.819934328235144, -0.2768252167643319, 3.0, 19.112149121243622], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -3.407816511794765], res_norm=3.408e+00
2025-12-01 16:53:51,809 - INFO - integration_test - Dyn residual k=1: pred=[15.017418518158829, 3.7379433927547194, -0.2768252167643319, 3.0, 19.412149121243623], ws=[15.017418518158829, 3.7379433927547194, -0.2768252167643319, 3.0, 22.986789245164506], res=[0.0, 0.0, 0.0, 0.0, -3.574640123920883], res_norm=3.575e+00
2025-12-01 16:53:51,810 - INFO - integration_test - Dyn residual k=2: pred=[15.305996906987662, 3.655952457274295, -0.2768252167643319, 3.0, 23.286789245164506], ws=[15.305996906987662, 3.655952457274295, -0.2768252167643319, 3.0, 26.877471075924188], res=[0.0, 0.0, 0.0, 0.0, -3.5906818307596815], res_norm=3.591e+00
2025-12-01 16:53:51,824 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,836 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,852 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,864 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,880 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,892 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,907 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,919 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,934 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,946 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,961 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:51,974 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:51,989 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,001 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,016 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,029 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,044 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,056 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,071 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,084 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,099 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,110 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:52,436 - INFO - integration_test - Step 56: MPC solve successful
2025-12-01 16:53:52,443 - INFO - integration_test - Step 56: Computed 10 numeric contouring constraints for visualization (s=15.404)
2025-12-01 16:53:52,444 - DEBUG - integration_test - Step 56: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:52,444 - INFO - integration_test - === Applying control at step 56 ===
2025-12-01 16:53:52,444 - INFO - integration_test -   Control dict from planner: {'a': 1.744101315487823e-08, 'w': 0.5329219510508731}
2025-12-01 16:53:52,444 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:52,444 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:52,445 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:52,445 - INFO - integration_test - Step 56 completed in 0.657s
2025-12-01 16:53:52,466 - INFO - integration_test - Step 57 (contouring until path end)
2025-12-01 16:53:52,466 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.73088778  3.8276608  -0.22353302  3.00000003 15.70433261]
2025-12-01 16:53:52,467 - INFO - integration_test - Step 57: Re-initialized spline from 15.7043 to 16.3565 (vehicle at (14.73, 3.83), closest path point at (15.10, 4.31), distance=0.606m)
2025-12-01 16:53:52,467 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 16:53:52,468 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:52,469 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:52,483 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.731, 3.828), path_start=(0.000, 0.000), dist=15.220m
2025-12-01 16:53:52,483 - WARNING - integration_test - Could not update reference path at step 57: x and y must have the same length
2025-12-01 16:53:52,483 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2025-12-01 16:53:52,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:52,488 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:52,488 - INFO - integration_test - Warmstart k=0: x0=14.730887777139968 , y0=3.827660799849638 , psi0=-0.22353302165924444 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 16:53:52,488 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:52,488 - INFO - integration_test - Dyn residual k=0: pred=[15.02342388221851, 3.7611579636283468, -0.22353302165924444, 3.0, 16.65649891232428], ws=[15.02342388221851, 3.7611579636283468, -0.22353302165924438, 3.0, 20.306761713285425], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -3.650262800961144], res_norm=3.650e+00
2025-12-01 16:53:52,489 - INFO - integration_test - Dyn residual k=1: pred=[15.315959987297054, 3.6946551274070556, -0.22353302165924438, 3.0, 20.606761713285426], ws=[15.315959987297054, 3.6946551274070556, -0.22353302165924438, 3.0, 24.47212822009544], res=[0.0, 0.0, 0.0, 0.0, -3.8653665068100125], res_norm=3.865e+00
2025-12-01 16:53:52,490 - INFO - integration_test - Dyn residual k=2: pred=[15.608496092375598, 3.6281522911857644, -0.22353302165924438, 3.0, 24.77212822009544], ws=[15.608496092375598, 3.6281522911857644, -0.22353302165924438, 3.0, 28.487494722933825], res=[0.0, 0.0, 0.0, 0.0, -3.7153665028383855], res_norm=3.715e+00
2025-12-01 16:53:52,504 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,517 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,532 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,545 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,560 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,572 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,588 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,600 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,615 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,627 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,642 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,654 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,669 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,682 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,697 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,709 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,724 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,737 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,752 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,764 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:52,780 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:52,790 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:53,164 - INFO - integration_test - Step 57: MPC solve successful
2025-12-01 16:53:53,172 - INFO - integration_test - Step 57: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 16:53:53,172 - DEBUG - integration_test - Step 57: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:53,172 - INFO - integration_test - === Applying control at step 57 ===
2025-12-01 16:53:53,172 - INFO - integration_test -   Control dict from planner: {'a': 2.5355780931469508e-09, 'w': 0.7999999614599559}
2025-12-01 16:53:53,172 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:53,172 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:53,173 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:53,174 - INFO - integration_test - Step 57 completed in 0.708s
2025-12-01 16:53:53,197 - INFO - integration_test - Step 58 (contouring until path end)
2025-12-01 16:53:53,198 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.02577065  3.77292408 -0.14353303  3.00000003 16.65649892]
2025-12-01 16:53:53,198 - INFO - integration_test - Step 58: Re-initialized spline from 16.6565 to 16.3565 (vehicle at (15.03, 3.77), closest path point at (15.10, 4.31), distance=0.538m)
2025-12-01 16:53:53,198 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 16:53:53,200 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:53,200 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:53,214 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.026, 3.773), path_start=(0.000, 0.000), dist=15.492m
2025-12-01 16:53:53,214 - WARNING - integration_test - Could not update reference path at step 58: x and y must have the same length
2025-12-01 16:53:53,214 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2025-12-01 16:53:53,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:53,219 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:53,219 - INFO - integration_test - Warmstart k=0: x0=15.025770645516866 , y0=3.7729240801773805 , psi0=-0.14353302551324884 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 16:53:53,219 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:53,220 - INFO - integration_test - Dyn residual k=0: pred=[15.322685687853603, 3.7300118717260076, -0.14353302551324884, 3.0, 16.65649891232428], ws=[15.322685687853603, 3.7300118717260076, -0.14353302551324898, 3.0, 20.306761713285425], res=[0.0, 0.0, 1.3877787807814457e-16, 0.0, -3.650262800961144], res_norm=3.650e+00
2025-12-01 16:53:53,222 - INFO - integration_test - Dyn residual k=1: pred=[15.61960073019034, 3.6870996632746342, -0.14353302551324898, 3.0, 20.606761713285426], ws=[15.61960073019034, 3.6870996632746342, -0.14353302551324898, 3.0, 24.47030247717464], res=[0.0, 0.0, 0.0, 0.0, -3.8635407638892154], res_norm=3.864e+00
2025-12-01 16:53:53,223 - INFO - integration_test - Dyn residual k=2: pred=[15.916515772527077, 3.644187454823261, -0.14353302551324898, 3.0, 24.770302477174642], ws=[15.916515772527077, 3.644187454823261, -0.14353302551324898, 3.0, 28.47982745926152], res=[0.0, 0.0, 0.0, 0.0, -3.7095249820868794], res_norm=3.710e+00
2025-12-01 16:53:53,238 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,252 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,269 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,283 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,299 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,312 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,329 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,342 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,357 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,371 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,387 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,400 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,415 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,428 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,443 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,456 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,471 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,485 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,500 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,513 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,528 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,538 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:53,868 - INFO - integration_test - Step 58: MPC solve successful
2025-12-01 16:53:53,876 - INFO - integration_test - Step 58: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 16:53:53,876 - DEBUG - integration_test - Step 58: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:53,876 - INFO - integration_test - === Applying control at step 58 ===
2025-12-01 16:53:53,876 - INFO - integration_test -   Control dict from planner: {'a': -2.0711356123292269e-07, 'w': 0.7999901138670473}
2025-12-01 16:53:53,876 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:53,877 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:53,878 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:53,878 - INFO - integration_test - Step 58 completed in 0.681s
2025-12-01 16:53:53,900 - INFO - integration_test - Step 59 (contouring until path end)
2025-12-01 16:53:53,901 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.32408465  3.74192775 -0.06353401  3.00000001 16.65649891]
2025-12-01 16:53:53,902 - INFO - integration_test - Step 59: Re-initialized spline from 16.6565 to 16.3565 (vehicle at (15.32, 3.74), closest path point at (15.10, 4.31), distance=0.605m)
2025-12-01 16:53:53,902 - DEBUG - integration_test -   Set spline state to 16.3565
2025-12-01 16:53:53,903 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:53,904 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:53,917 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.324, 3.742), path_start=(0.000, 0.000), dist=15.774m
2025-12-01 16:53:53,917 - WARNING - integration_test - Could not update reference path at step 59: x and y must have the same length
2025-12-01 16:53:53,918 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2025-12-01 16:53:53,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:53,921 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:53,921 - INFO - integration_test - Warmstart k=0: x0=15.324084645634322 , y0=3.7419277506486064 , psi0=-0.06353401412654412 , v0=3.0 , spline0=16.35649891232428 , a0=0.0 , w0=0.0
2025-12-01 16:53:53,921 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:53,922 - INFO - integration_test - Dyn residual k=0: pred=[15.623479363638078, 3.72288036680064, -0.06353401412654412, 3.0, 16.65649891232428], ws=[15.623479363638078, 3.72288036680064, -0.06353401412654414, 3.0, 20.306761713285425], res=[0.0, 0.0, 1.3877787807814457e-17, 0.0, -3.650262800961144], res_norm=3.650e+00
2025-12-01 16:53:53,923 - INFO - integration_test - Dyn residual k=1: pred=[15.922874081641833, 3.7038329829526737, -0.06353401412654414, 3.0, 20.606761713285426], ws=[15.922874081641833, 3.7038329829526737, -0.06353401412654414, 3.0, 24.468837237462548], res=[0.0, 0.0, 0.0, 0.0, -3.862075524177122], res_norm=3.862e+00
2025-12-01 16:53:53,924 - INFO - integration_test - Dyn residual k=2: pred=[16.222268799645587, 3.6847855991047074, -0.06353401412654414, 3.0, 24.76883723746255], ws=[16.222268799645587, 3.6847855991047074, -0.06353401412654414, 3.0, 28.47315612215844], res=[0.0, 0.0, 0.0, 0.0, -3.7043188846958905], res_norm=3.704e+00
2025-12-01 16:53:53,938 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,950 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,966 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:53,979 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:53,996 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,008 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,023 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,036 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,051 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,063 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,079 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,091 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,107 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,119 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,146 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,161 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,174 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,191 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,203 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,218 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,229 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:54,561 - INFO - integration_test - Step 59: MPC solve successful
2025-12-01 16:53:54,568 - INFO - integration_test - Step 59: Computed 10 numeric contouring constraints for visualization (s=16.356)
2025-12-01 16:53:54,569 - DEBUG - integration_test - Step 59: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:54,569 - INFO - integration_test - === Applying control at step 59 ===
2025-12-01 16:53:54,569 - INFO - integration_test -   Control dict from planner: {'a': 1.4355026069296562e-07, 'w': -0.3183778641688729}
2025-12-01 16:53:54,569 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:54,569 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:54,570 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:54,570 - INFO - integration_test - Step 59 completed in 0.669s
2025-12-01 16:53:54,594 - INFO - integration_test - Step 60 (contouring until path end)
2025-12-01 16:53:54,594 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.6231256   3.71811795 -0.0953718   3.00000002 16.65649891]
2025-12-01 16:53:54,595 - INFO - integration_test - Step 60: Re-initialized spline from 16.6565 to 16.9623 (vehicle at (15.62, 3.72), closest path point at (15.75, 4.25), distance=0.547m)
2025-12-01 16:53:54,595 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 16:53:54,597 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:54,597 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:54,610 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.623, 3.718), path_start=(0.000, 0.000), dist=16.059m
2025-12-01 16:53:54,610 - WARNING - integration_test - Could not update reference path at step 60: x and y must have the same length
2025-12-01 16:53:54,610 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2025-12-01 16:53:54,613 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:54,614 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:54,614 - INFO - integration_test - Warmstart k=0: x0=15.623125600230827 , y0=3.7181179544130805 , psi0=-0.09537180054343142 , v0=3.0 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 16:53:54,614 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:54,615 - INFO - integration_test - Dyn residual k=0: pred=[15.921762267031742, 3.6895497685756955, -0.09537180054343142, 3.0, 17.26229516833629], ws=[15.921762267031742, 3.6895497685756955, -0.09537180054343164, 3.0, 21.116561067978346], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -3.854265899642055], res_norm=3.854e+00
2025-12-01 16:53:54,616 - INFO - integration_test - Dyn residual k=1: pred=[16.220398933832655, 3.6609815827383105, -0.09537180054343164, 3.0, 21.416561067978346], ws=[16.220398933832655, 3.6609815827383105, -0.09537180054343164, 3.0, 25.46943837657883], res=[0.0, 0.0, 0.0, 0.0, -4.052877308600483], res_norm=4.053e+00
2025-12-01 16:53:54,617 - INFO - integration_test - Dyn residual k=2: pred=[16.51903560063357, 3.6324133969009256, -0.09537180054343164, 3.0, 25.76943837657883], ws=[16.51903560063357, 3.6324133969009256, -0.09537180054343164, 3.0, 29.610114076854106], res=[0.0, 0.0, 0.0, 0.0, -3.840675700275277], res_norm=3.841e+00
2025-12-01 16:53:54,631 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,643 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,659 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,672 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,688 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,700 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,715 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,728 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,743 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,755 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,770 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,783 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,798 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,811 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,825 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,838 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,852 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,865 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,881 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,893 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:54,908 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:54,918 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:55,241 - INFO - integration_test - Step 60: MPC solve successful
2025-12-01 16:53:55,248 - INFO - integration_test - Step 60: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 16:53:55,248 - DEBUG - integration_test - Step 60: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:55,249 - INFO - integration_test - === Applying control at step 60 ===
2025-12-01 16:53:55,249 - INFO - integration_test -   Control dict from planner: {'a': -1.5851915354266645e-08, 'w': 0.7999986019123075}
2025-12-01 16:53:55,249 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:55,249 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:55,250 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:55,250 - INFO - integration_test - Step 60 completed in 0.656s
2025-12-01 16:53:55,274 - INFO - integration_test - Step 61 (contouring until path end)
2025-12-01 16:53:55,274 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[ 1.59225859e+01  3.70151931e+00 -1.53719404e-02  3.00000002e+00
  1.72622952e+01]
2025-12-01 16:53:55,275 - INFO - integration_test - Step 61: Re-initialized spline from 17.2623 to 16.9623 (vehicle at (15.92, 3.70), closest path point at (15.75, 4.25), distance=0.575m)
2025-12-01 16:53:55,275 - DEBUG - integration_test -   Set spline state to 16.9623
2025-12-01 16:53:55,276 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:55,277 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:55,290 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.923, 3.702), path_start=(0.000, 0.000), dist=16.347m
2025-12-01 16:53:55,290 - WARNING - integration_test - Could not update reference path at step 61: x and y must have the same length
2025-12-01 16:53:55,290 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2025-12-01 16:53:55,293 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:55,294 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:55,294 - INFO - integration_test - Warmstart k=0: x0=15.922585946855875 , y0=3.7015193073649924 , psi0=-0.015371940352200658 , v0=3.0 , spline0=16.96229516833629 , a0=0.0 , w0=0.0
2025-12-01 16:53:55,294 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:55,295 - INFO - integration_test - Dyn residual k=0: pred=[16.222550503071293, 3.69690790687401, -0.015371940352200658, 3.0, 17.26229516833629], ws=[16.222550503071293, 3.69690790687401, -0.015371940352200575, 3.0, 21.116561067978346], res=[0.0, 0.0, -8.326672684688674e-17, 0.0, -3.854265899642055], res_norm=3.854e+00
2025-12-01 16:53:55,296 - INFO - integration_test - Dyn residual k=1: pred=[16.52251505928671, 3.6922965063830278, -0.015371940352200575, 3.0, 21.416561067978346], ws=[16.52251505928671, 3.6922965063830278, -0.015371940352200575, 3.0, 25.46775604622494], res=[0.0, 0.0, 0.0, 0.0, -4.0511949782465955], res_norm=4.051e+00
2025-12-01 16:53:55,297 - INFO - integration_test - Dyn residual k=2: pred=[16.82247961550213, 3.6876851058920455, -0.015371940352200575, 3.0, 25.767756046224942], ws=[16.82247961550213, 3.6876851058920455, -0.015371940352200575, 3.0, 29.60310701544796], res=[0.0, 0.0, 0.0, 0.0, -3.8353509692230183], res_norm=3.835e+00
2025-12-01 16:53:55,311 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,324 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,339 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,352 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,367 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,380 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,396 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,408 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,423 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,436 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,451 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,463 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,479 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,492 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,507 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,520 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,535 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,547 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,562 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,575 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:55,591 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:55,601 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:55,954 - INFO - integration_test - Step 61: MPC solve successful
2025-12-01 16:53:55,962 - INFO - integration_test - Step 61: Computed 10 numeric contouring constraints for visualization (s=16.962)
2025-12-01 16:53:55,962 - DEBUG - integration_test - Step 61: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:55,962 - INFO - integration_test - === Applying control at step 61 ===
2025-12-01 16:53:55,962 - INFO - integration_test -   Control dict from planner: {'a': 5.816589344097122e-08, 'w': -0.04626903155207532}
2025-12-01 16:53:55,962 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:55,962 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:55,963 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:55,963 - INFO - integration_test - Step 61 completed in 0.689s
2025-12-01 16:53:55,986 - INFO - integration_test - Step 62 (contouring until path end)
2025-12-01 16:53:55,987 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.22253877  3.69621397 -0.01999884  3.00000003 17.26229517]
2025-12-01 16:53:55,988 - INFO - integration_test - Step 62: Re-initialized spline from 17.2623 to 17.5681 (vehicle at (16.22, 3.70), closest path point at (16.40, 4.22), distance=0.550m)
2025-12-01 16:53:55,988 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 16:53:55,990 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:55,990 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:56,003 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.223, 3.696), path_start=(0.000, 0.000), dist=16.638m
2025-12-01 16:53:56,004 - WARNING - integration_test - Could not update reference path at step 62: x and y must have the same length
2025-12-01 16:53:56,004 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2025-12-01 16:53:56,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:56,008 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:56,008 - INFO - integration_test - Warmstart k=0: x0=16.222538766965275 , y0=3.6962139710470088 , psi0=-0.01999884350740819 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 16:53:56,008 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:56,009 - INFO - integration_test - Dyn residual k=0: pred=[16.52247877590354, 3.690214717917403, -0.01999884350740819, 3.0, 17.8680914243483], ws=[16.52247877590354, 3.690214717917403, -0.019998843507408104, 3.0, 21.9344238840555], res=[0.0, 0.0, -8.673617379884035e-17, 0.0, -4.066332459707201], res_norm=4.066e+00
2025-12-01 16:53:56,010 - INFO - integration_test - Dyn residual k=1: pred=[16.822418784841805, 3.6842154647877976, -0.019998843507408104, 3.0, 22.234423884055502], ws=[16.822418784841805, 3.6842154647877976, -0.019998843507408104, 3.0, 26.378041586814675], res=[0.0, 0.0, 0.0, 0.0, -4.1436177027591725], res_norm=4.144e+00
2025-12-01 16:53:56,010 - INFO - integration_test - Dyn residual k=2: pred=[17.12235879378007, 3.6782162116581922, -0.019998843507408104, 3.0, 26.678041586814675], ws=[17.12235879378007, 3.6782162116581922, -0.019998843507408104, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.0059749577738337], res_norm=3.006e+00
2025-12-01 16:53:56,025 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,037 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,053 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,065 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,081 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,094 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,109 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,121 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,136 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,148 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,163 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,175 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,191 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,203 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,218 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,230 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,245 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,257 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,272 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,285 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,300 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,310 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:56,597 - INFO - integration_test - Step 62: MPC solve successful
2025-12-01 16:53:56,604 - INFO - integration_test - Step 62: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 16:53:56,604 - DEBUG - integration_test - Step 62: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:56,605 - INFO - integration_test - === Applying control at step 62 ===
2025-12-01 16:53:56,605 - INFO - integration_test -   Control dict from planner: {'a': -1.7633447237729962e-07, 'w': 0.7999963714222296}
2025-12-01 16:53:56,605 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:56,605 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:56,606 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:56,606 - INFO - integration_test - Step 62 completed in 0.619s
2025-12-01 16:53:56,628 - INFO - integration_test - Step 63 (contouring until path end)
2025-12-01 16:53:56,628 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.52239879  3.70221226  0.06000079  3.00000001 17.86809143]
2025-12-01 16:53:56,629 - INFO - integration_test - Step 63: Re-initialized spline from 17.8681 to 17.5681 (vehicle at (16.52, 3.70), closest path point at (16.40, 4.22), distance=0.529m)
2025-12-01 16:53:56,629 - DEBUG - integration_test -   Set spline state to 17.5681
2025-12-01 16:53:56,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:56,631 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:56,644 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.522, 3.702), path_start=(0.000, 0.000), dist=16.932m
2025-12-01 16:53:56,644 - WARNING - integration_test - Could not update reference path at step 63: x and y must have the same length
2025-12-01 16:53:56,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2025-12-01 16:53:56,647 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:56,648 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:56,648 - INFO - integration_test - Warmstart k=0: x0=16.52239879232508 , y0=3.702212263796762 , psi0=0.06000079363481477 , v0=3.0 , spline0=17.5680914243483 , a0=0.0 , w0=0.0
2025-12-01 16:53:56,648 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:56,649 - INFO - integration_test - Dyn residual k=0: pred=[16.82185894002869, 3.7202017034026, 0.06000079363481477, 3.0, 17.8680914243483], ws=[16.82185894002869, 3.7202017034026, 0.06000079363481481, 3.0, 21.9344238840555], res=[0.0, 0.0, -4.163336342344337e-17, 0.0, -4.066332459707201], res_norm=4.066e+00
2025-12-01 16:53:56,650 - INFO - integration_test - Dyn residual k=1: pred=[17.1213190877323, 3.738191143008438, 0.06000079363481481, 3.0, 22.234423884055502], ws=[17.1213190877323, 3.738191143008438, 0.06000079363481481, 3.0, 26.37646767197289], res=[0.0, 0.0, 0.0, 0.0, -4.1420437879173875], res_norm=4.142e+00
2025-12-01 16:53:56,651 - INFO - integration_test - Dyn residual k=2: pred=[17.42077923543591, 3.756180582614276, 0.06000079363481481, 3.0, 26.67646767197289], ws=[17.42077923543591, 3.756180582614276, 0.06000079363481481, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.0075488726156188], res_norm=3.008e+00
2025-12-01 16:53:56,664 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,677 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,693 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,706 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,721 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,734 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,749 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,761 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,776 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,789 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,804 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,817 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,832 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,844 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,859 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,872 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,887 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,900 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,915 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,927 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:56,943 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:56,953 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:57,298 - INFO - integration_test - Step 63: MPC solve successful
2025-12-01 16:53:57,306 - INFO - integration_test - Step 63: Computed 10 numeric contouring constraints for visualization (s=17.568)
2025-12-01 16:53:57,306 - DEBUG - integration_test - Step 63: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:57,306 - INFO - integration_test - === Applying control at step 63 ===
2025-12-01 16:53:57,306 - INFO - integration_test -   Control dict from planner: {'a': 1.3736831784957667e-07, 'w': 0.8000000057527253}
2025-12-01 16:53:57,306 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:57,306 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:57,307 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:57,308 - INFO - integration_test - Step 63 completed in 0.679s
2025-12-01 16:53:57,327 - INFO - integration_test - Step 64 (contouring until path end)
2025-12-01 16:53:57,328 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.82082043  3.73215454  0.14000079  3.00000002 17.86809143]
2025-12-01 16:53:57,329 - INFO - integration_test - Step 64: Re-initialized spline from 17.8681 to 18.1739 (vehicle at (16.82, 3.73), closest path point at (17.05, 4.21), distance=0.532m)
2025-12-01 16:53:57,329 - DEBUG - integration_test -   Set spline state to 18.1739
2025-12-01 16:53:57,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:57,331 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:57,343 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.821, 3.732), path_start=(0.000, 0.000), dist=17.230m
2025-12-01 16:53:57,344 - WARNING - integration_test - Could not update reference path at step 64: x and y must have the same length
2025-12-01 16:53:57,344 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2025-12-01 16:53:57,347 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:57,348 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:57,348 - INFO - integration_test - Warmstart k=0: x0=16.820820430031098 , y0=3.7321545402771785 , psi0=0.14000079421008732 , v0=3.0 , spline0=18.173887680360313 , a0=0.0 , w0=0.0
2025-12-01 16:53:57,348 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:57,349 - INFO - integration_test - Dyn residual k=0: pred=[17.11788519564683, 3.7740177106022963, 0.14000079421008732, 3.0, 18.473887680360313], ws=[17.11788519564683, 3.7740177106022963, 0.14000079421008715, 3.0, 22.754549500591665], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.2806618202313516], res_norm=4.281e+00
2025-12-01 16:53:57,350 - INFO - integration_test - Dyn residual k=1: pred=[17.414949961262565, 3.8158808809274136, 0.14000079421008715, 3.0, 23.054549500591666], ws=[17.414949961262565, 3.8158808809274136, 0.14000079421008715, 3.0, 27.33487784353528], res=[0.0, 0.0, 0.0, 0.0, -4.280328342943616], res_norm=4.280e+00
2025-12-01 16:53:57,350 - INFO - integration_test - Dyn residual k=2: pred=[17.712014726878298, 3.857744051252531, 0.14000079421008715, 3.0, 27.634877843535282], ws=[17.712014726878298, 3.857744051252531, 0.14000079421008715, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.049138701053227], res_norm=2.049e+00
2025-12-01 16:53:57,364 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,378 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,393 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,406 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,421 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,434 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,449 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,461 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,476 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,488 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,503 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,516 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,531 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,543 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,558 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,570 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,585 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,598 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,613 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,625 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:57,640 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,651 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:57,908 - INFO - integration_test - Step 64: MPC solve successful
2025-12-01 16:53:57,917 - INFO - integration_test - Step 64: Computed 10 numeric contouring constraints for visualization (s=18.174)
2025-12-01 16:53:57,918 - DEBUG - integration_test - Step 64: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:57,918 - INFO - integration_test - === Applying control at step 64 ===
2025-12-01 16:53:57,918 - INFO - integration_test -   Control dict from planner: {'a': -3.0741730594704716e-08, 'w': 0.7999964712991054}
2025-12-01 16:53:57,918 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:57,918 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:57,919 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:57,919 - INFO - integration_test - Step 64 completed in 0.591s
2025-12-01 16:53:57,942 - INFO - integration_test - Step 65 (contouring until path end)
2025-12-01 16:53:57,943 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.11589481  3.78584927  0.22000044  3.00000002 18.47388768]
2025-12-01 16:53:57,943 - DEBUG - integration_test - Step 65: Using propagated spline 18.4739 (close to path, dist=0.432m)
2025-12-01 16:53:57,943 - DEBUG - integration_test -   Set spline state to 18.4739
2025-12-01 16:53:57,945 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:57,945 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:57,959 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.116, 3.786), path_start=(0.000, 0.000), dist=17.530m
2025-12-01 16:53:57,960 - WARNING - integration_test - Could not update reference path at step 65: x and y must have the same length
2025-12-01 16:53:57,960 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2025-12-01 16:53:57,962 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:57,964 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:57,964 - INFO - integration_test - Warmstart k=0: x0=17.11589481051227 , y0=3.7858492746488306 , psi0=0.22000044133999785 , v0=3.0 , spline0=18.47388768236512 , a0=0.0 , w0=0.0
2025-12-01 16:53:57,964 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:57,965 - INFO - integration_test - Dyn residual k=0: pred=[17.408664016417383, 3.8513182907838583, 0.22000044133999785, 3.0, 18.77388768236512], ws=[17.408664016417383, 3.8513182907838583, 0.22000044133999808, 3.0, 23.08577925969331], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -4.31189157732819], res_norm=4.312e+00
2025-12-01 16:53:57,966 - INFO - integration_test - Dyn residual k=1: pred=[17.701433222322496, 3.916787306918886, 0.22000044133999808, 3.0, 23.38577925969331], ws=[17.701433222322496, 3.916787306918886, 0.22000044133999763, 3.0, 27.68476936495618], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -4.298990105262867], res_norm=4.299e+00
2025-12-01 16:53:57,967 - INFO - integration_test - Dyn residual k=2: pred=[17.99420242822761, 3.982256323053914, 0.22000044133999763, 3.0, 27.98476936495618], ws=[17.99420242822761, 3.982256323053914, 0.22000044133999763, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.69924717963233], res_norm=1.699e+00
2025-12-01 16:53:57,982 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:57,995 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,010 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,023 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,039 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,051 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,067 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,080 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,095 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,108 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,123 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,136 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,151 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,163 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,181 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,193 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,209 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,221 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,237 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,250 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,266 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,277 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:58,562 - INFO - integration_test - Step 65: MPC solve successful
2025-12-01 16:53:58,571 - INFO - integration_test - Step 65: Computed 10 numeric contouring constraints for visualization (s=18.474)
2025-12-01 16:53:58,572 - DEBUG - integration_test - Step 65: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:58,572 - INFO - integration_test - === Applying control at step 65 ===
2025-12-01 16:53:58,572 - INFO - integration_test -   Control dict from planner: {'a': 6.592616433169779e-08, 'w': 0.7999999723718303}
2025-12-01 16:53:58,572 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:58,572 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:58,573 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:58,573 - INFO - integration_test - Step 65 completed in 0.630s
2025-12-01 16:53:58,595 - INFO - integration_test - Step 66 (contouring until path end)
2025-12-01 16:53:58,596 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.40573447  3.862953    0.30000044  3.00000003 18.77388769]
2025-12-01 16:53:58,597 - DEBUG - integration_test - Step 66: Using propagated spline 18.7739 (close to path, dist=0.479m)
2025-12-01 16:53:58,597 - DEBUG - integration_test -   Set spline state to 18.7739
2025-12-01 16:53:58,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:58,599 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:58,613 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.406, 3.863), path_start=(0.000, 0.000), dist=17.829m
2025-12-01 16:53:58,613 - WARNING - integration_test - Could not update reference path at step 66: x and y must have the same length
2025-12-01 16:53:58,613 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2025-12-01 16:53:58,616 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:58,618 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:58,618 - INFO - integration_test - Warmstart k=0: x0=17.405734471399146 , y0=3.8629530046374727 , psi0=0.3000004385771809 , v0=3.0 , spline0=18.77388768502919 , a0=0.0 , w0=0.0
2025-12-01 16:53:58,618 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:58,619 - INFO - integration_test - Dyn residual k=0: pred=[17.692335379254274, 3.9516091923325014, 0.3000004385771809, 3.0, 19.07388768502919], ws=[17.692335379254274, 3.9516091923325014, 0.30000043857718106, 3.0, 23.56083618722291], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -4.486948502193719], res_norm=4.487e+00
2025-12-01 16:53:58,620 - INFO - integration_test - Dyn residual k=1: pred=[17.978936287109402, 4.04026538002753, 0.30000043857718106, 3.0, 23.86083618722291], ws=[17.978936287109402, 4.04026538002753, 0.3000004385771806, 3.0, 28.258223394075138], res=[0.0, 0.0, 4.440892098500626e-16, 0.0, -4.397387206852226], res_norm=4.397e+00
2025-12-01 16:53:58,620 - INFO - integration_test - Dyn residual k=2: pred=[18.26553719496453, 4.128921567722559, 0.3000004385771806, 3.0, 28.55822339407514], ws=[18.26553719496453, 4.128921567722559, 0.3000004385771806, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.1257931505133705], res_norm=1.126e+00
2025-12-01 16:53:58,634 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,647 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,663 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,676 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,691 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,704 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,719 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,731 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,746 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,758 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,773 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,786 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,801 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,813 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,828 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,840 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,855 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,868 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,883 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,896 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:58,911 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:58,921 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:53:59,179 - INFO - integration_test - Step 66: MPC solve successful
2025-12-01 16:53:59,187 - INFO - integration_test - Step 66: Computed 10 numeric contouring constraints for visualization (s=18.774)
2025-12-01 16:53:59,188 - DEBUG - integration_test - Step 66: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:53:59,188 - INFO - integration_test - === Applying control at step 66 ===
2025-12-01 16:53:59,188 - INFO - integration_test -   Control dict from planner: {'a': -1.15816821491715e-06, 'w': 0.7997654209898438}
2025-12-01 16:53:59,188 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:53:59,188 - INFO - integration_test -   Planner output success: True
2025-12-01 16:53:59,189 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:53:59,189 - INFO - integration_test - Step 66 completed in 0.593s
2025-12-01 16:53:59,214 - INFO - integration_test - Step 67 (contouring until path end)
2025-12-01 16:53:59,214 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.68848663  3.96296928  0.37997698  2.99999991 19.07388768]
2025-12-01 16:53:59,215 - DEBUG - integration_test - Step 67: Using propagated spline 19.0739 (close to path, dist=0.279m)
2025-12-01 16:53:59,215 - DEBUG - integration_test -   Set spline state to 19.0739
2025-12-01 16:53:59,216 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:59,216 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:53:59,231 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.688, 3.963), path_start=(0.000, 0.000), dist=18.127m
2025-12-01 16:53:59,231 - WARNING - integration_test - Could not update reference path at step 67: x and y must have the same length
2025-12-01 16:53:59,231 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2025-12-01 16:53:59,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:53:59,235 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:53:59,235 - INFO - integration_test - Warmstart k=0: x0=17.68848663126958 , y0=3.9629692790224222 , psi0=0.37997698067616525 , v0=2.9999999108238673 , spline0=19.07388767611158 , a0=0.0 , w0=0.0
2025-12-01 16:53:59,235 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:53:59,236 - INFO - integration_test - Dyn residual k=0: pred=[17.96708857508869, 4.074239003339707, 0.37997698067616525, 2.9999999108238673, 19.373887667193966], ws=[17.96708857508869, 4.074239003339707, 0.37997698067616525, 2.9999999108238673, 23.890703397022477], res=[0.0, 0.0, 0.0, 0.0, -4.516815729828512], res_norm=4.517e+00
2025-12-01 16:53:59,237 - INFO - integration_test - Dyn residual k=1: pred=[18.245690518907804, 4.185508727656991, 0.37997698067616525, 2.9999999108238673, 24.190703388104865], ws=[18.245690518907804, 4.185508727656991, 0.37997698067616525, 2.9999999108238673, 28.605124792146015], res=[0.0, 0.0, 0.0, 0.0, -4.41442140404115], res_norm=4.414e+00
2025-12-01 16:53:59,237 - INFO - integration_test - Dyn residual k=2: pred=[18.524292462726915, 4.2967784519742755, 0.37997698067616525, 2.9999999108238673, 28.905124783228402], ws=[18.524292462726915, 4.2967784519742755, 0.37997698067616525, 2.9999999108238673, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7788917613601072], res_norm=7.789e-01
2025-12-01 16:53:59,252 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,265 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,288 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,301 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,317 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,329 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,345 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,357 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,373 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,386 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,402 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,414 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,430 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,443 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,458 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,470 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,486 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,500 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,528 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:53:59,543 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:53:59,554 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:00,106 - INFO - integration_test - Step 67: MPC solve successful
2025-12-01 16:54:00,114 - INFO - integration_test - Step 67: Computed 10 numeric contouring constraints for visualization (s=19.074)
2025-12-01 16:54:00,115 - DEBUG - integration_test - Step 67: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:00,115 - INFO - integration_test - === Applying control at step 67 ===
2025-12-01 16:54:00,115 - INFO - integration_test -   Control dict from planner: {'a': -1.7657814974688154e-07, 'w': 0.794324347420711}
2025-12-01 16:54:00,115 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:00,115 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:00,116 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:00,116 - INFO - integration_test - Step 67 completed in 0.902s
2025-12-01 16:54:00,137 - INFO - integration_test - Step 68 (contouring until path end)
2025-12-01 16:54:00,137 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.96237881  4.08518123  0.45940942  2.99999989 19.37388767]
2025-12-01 16:54:00,138 - DEBUG - integration_test - Step 68: Using propagated spline 19.3739 (close to path, dist=0.306m)
2025-12-01 16:54:00,138 - DEBUG - integration_test -   Set spline state to 19.3739
2025-12-01 16:54:00,139 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:00,139 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:00,153 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.962, 4.085), path_start=(0.000, 0.000), dist=18.421m
2025-12-01 16:54:00,153 - WARNING - integration_test - Could not update reference path at step 68: x and y must have the same length
2025-12-01 16:54:00,153 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2025-12-01 16:54:00,156 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:00,157 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:00,157 - INFO - integration_test - Warmstart k=0: x0=17.96237880732574 , y0=4.085181230643301 , psi0=0.4594094154182364 , v0=2.9999998931660525 , spline0=19.373887665428185 , a0=0.0 , w0=0.0
2025-12-01 16:54:00,157 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:00,158 - INFO - integration_test - Dyn residual k=0: pred=[18.231273156795126, 4.218206876341412, 0.4594094154182364, 2.9999998931660525, 19.673887654744792], ws=[18.231273156795126, 4.218206876341412, 0.4594094154182362, 2.9999998931660525, 24.355780863545156], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.681893208800364], res_norm=4.682e+00
2025-12-01 16:54:00,159 - INFO - integration_test - Dyn residual k=1: pred=[18.50016750626451, 4.351232522039523, 0.4594094154182362, 2.9999998931660525, 24.655780852861763], ws=[18.50016750626451, 4.351232522039523, 0.4594094154182362, 2.9999998931660525, 29.11546320234833], res=[0.0, 0.0, 0.0, 0.0, -4.459682349486567], res_norm=4.460e+00
2025-12-01 16:54:00,159 - INFO - integration_test - Dyn residual k=2: pred=[18.769061855733895, 4.484258167737634, 0.4594094154182362, 2.9999998931660525, 29.415463191664937], ws=[18.769061855733895, 4.484258167737634, 0.4594094154182362, 2.9999998931660525, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.26855335292357196], res_norm=2.686e-01
2025-12-01 16:54:00,174 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,187 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,203 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,215 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,231 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,244 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,259 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,271 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,287 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,300 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,315 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,327 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,342 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,354 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,370 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,382 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,397 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,410 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,425 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,437 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,455 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,466 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:00,755 - INFO - integration_test - Step 68: MPC solve successful
2025-12-01 16:54:00,762 - INFO - integration_test - Step 68: Computed 10 numeric contouring constraints for visualization (s=19.374)
2025-12-01 16:54:00,763 - DEBUG - integration_test - Step 68: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:00,763 - INFO - integration_test - === Applying control at step 68 ===
2025-12-01 16:54:00,763 - INFO - integration_test -   Control dict from planner: {'a': 8.949037896830592e-07, 'w': -0.6322268583732751}
2025-12-01 16:54:00,763 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:00,763 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:00,764 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:00,764 - INFO - integration_test - Step 68 completed in 0.627s
2025-12-01 16:54:00,790 - INFO - integration_test - Step 69 (contouring until path end)
2025-12-01 16:54:00,791 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[18.23529778  4.209621    0.39618673  2.99999998 19.67388766]
2025-12-01 16:54:00,791 - DEBUG - integration_test - Step 69: Using propagated spline 19.6739 (close to path, dist=0.146m)
2025-12-01 16:54:00,791 - DEBUG - integration_test -   Set spline state to 19.6739
2025-12-01 16:54:00,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:00,793 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:00,807 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(18.235, 4.210), path_start=(0.000, 0.000), dist=18.715m
2025-12-01 16:54:00,807 - WARNING - integration_test - Could not update reference path at step 69: x and y must have the same length
2025-12-01 16:54:00,807 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2025-12-01 16:54:00,810 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:00,811 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:00,811 - INFO - integration_test - Warmstart k=0: x0=18.23529778370082 , y0=4.2096209963636495 , psi0=0.3961867295809089 , v0=2.9999999826564316 , spline0=19.67388766369383 , a0=0.0 , w0=0.0
2025-12-01 16:54:00,811 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:00,812 - INFO - integration_test - Dyn residual k=0: pred=[18.51205955748157, 4.325391975167141, 0.3961867295809089, 2.9999999826564316, 19.973887661959473], ws=[18.51205955748157, 4.325391975167141, 0.3961867295809087, 2.9999999826564316, 24.683298154270222], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -4.709410492310749], res_norm=4.709e+00
2025-12-01 16:54:00,812 - INFO - integration_test - Dyn residual k=1: pred=[18.788821331262323, 4.441162953970632, 0.3961867295809087, 2.9999999826564316, 24.983298152535866], ws=[18.788821331262323, 4.441162953970632, 0.3961867295809087, 2.9999999826564316, 29.507988568474573], res=[0.0, 0.0, 0.0, 0.0, -4.524690415938707], res_norm=4.525e+00
2025-12-01 16:54:00,813 - INFO - integration_test - Dyn residual k=2: pred=[19.065583105043075, 4.556933932774123, 0.3961867295809087, 2.9999999826564316, 29.807988566740217], ws=[19.065583105043075, 4.556933932774123, 0.3961867295809087, 2.9999999826564316, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.12397202215170822], res_norm=1.240e-01
2025-12-01 16:54:00,827 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,840 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,856 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,868 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,885 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,898 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,913 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,926 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,941 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,953 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,968 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:00,981 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:00,997 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,009 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,024 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,037 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,051 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,064 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,080 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,092 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,108 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,118 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:01,406 - INFO - integration_test - Step 69: MPC solve successful
2025-12-01 16:54:01,413 - INFO - integration_test - Step 69: Computed 10 numeric contouring constraints for visualization (s=19.674)
2025-12-01 16:54:01,414 - DEBUG - integration_test - Step 69: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:01,414 - INFO - integration_test - === Applying control at step 69 ===
2025-12-01 16:54:01,414 - INFO - integration_test -   Control dict from planner: {'a': 3.092955099984194e-07, 'w': 0.3965419684085008}
2025-12-01 16:54:01,414 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:01,414 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:01,415 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:01,415 - INFO - integration_test - Step 69 completed in 0.624s
2025-12-01 16:54:01,440 - INFO - integration_test - Step 70 (contouring until path end)
2025-12-01 16:54:01,441 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.50969193  4.3308483   0.43584093  3.00000001 19.97388767]
2025-12-01 16:54:01,441 - DEBUG - integration_test - Step 70: Using propagated spline 19.9739 (close to path, dist=0.168m)
2025-12-01 16:54:01,441 - DEBUG - integration_test -   Set spline state to 19.9739
2025-12-01 16:54:01,443 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:01,443 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:01,457 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.510, 4.331), path_start=(0.000, 0.000), dist=19.010m
2025-12-01 16:54:01,457 - WARNING - integration_test - Could not update reference path at step 70: x and y must have the same length
2025-12-01 16:54:01,457 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2025-12-01 16:54:01,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:01,462 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:01,462 - INFO - integration_test - Warmstart k=0: x0=18.50969193042053 , y0=4.330848301418895 , psi0=0.435840926421759 , v0=3.0 , spline0=19.973887665052427 , a0=0.0 , w0=0.0
2025-12-01 16:54:01,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:01,463 - INFO - integration_test - Dyn residual k=0: pred=[18.781646534385633, 4.457500160395316, 0.435840926421759, 3.0, 20.273887665052428], ws=[18.781646534385633, 4.457500160395316, 0.4358409264217591, 3.0, 25.1338910736183], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -4.860003408565873], res_norm=4.860e+00
2025-12-01 16:54:01,464 - INFO - integration_test - Dyn residual k=1: pred=[19.053601138350736, 4.5841520193717376, 0.4358409264217591, 3.0, 25.4338910736183], ws=[19.053601138350736, 4.5841520193717376, 0.4358409264217591, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -4.250125470970207], res_norm=4.250e+00
2025-12-01 16:54:01,465 - INFO - integration_test - Dyn residual k=2: pred=[19.32555574231584, 4.710803878348159, 0.4358409264217591, 3.0, 29.98401654458851], ws=[19.32555574231584, 4.710803878348159, 0.4358409264217591, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:01,480 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,494 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,510 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,523 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,539 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,551 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,567 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,580 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,596 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,609 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,624 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,636 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,651 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,664 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,680 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,693 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,708 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,721 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,737 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,750 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:01,765 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:01,776 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:02,059 - INFO - integration_test - Step 70: MPC solve successful
2025-12-01 16:54:02,067 - INFO - integration_test - Step 70: Computed 10 numeric contouring constraints for visualization (s=19.974)
2025-12-01 16:54:02,068 - DEBUG - integration_test - Step 70: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:02,068 - INFO - integration_test - === Applying control at step 70 ===
2025-12-01 16:54:02,068 - INFO - integration_test -   Control dict from planner: {'a': 9.944790151803005e-08, 'w': 0.28815186521333075}
2025-12-01 16:54:02,068 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:02,068 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:02,069 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:02,069 - INFO - integration_test - Step 70 completed in 0.628s
2025-12-01 16:54:02,093 - INFO - integration_test - Step 71 (contouring until path end)
2025-12-01 16:54:02,095 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.77978428  4.46140058  0.46465611  3.00000002 20.27388767]
2025-12-01 16:54:02,095 - DEBUG - integration_test - Step 71: Using propagated spline 20.2739 (close to path, dist=0.204m)
2025-12-01 16:54:02,095 - DEBUG - integration_test -   Set spline state to 20.2739
2025-12-01 16:54:02,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:02,097 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:02,111 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.780, 4.461), path_start=(0.000, 0.000), dist=19.302m
2025-12-01 16:54:02,111 - WARNING - integration_test - Could not update reference path at step 71: x and y must have the same length
2025-12-01 16:54:02,111 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2025-12-01 16:54:02,114 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:02,116 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:02,116 - INFO - integration_test - Warmstart k=0: x0=18.779784280805476 , y0=4.461400575355789 , psi0=0.46465611294309206 , v0=3.0 , spline0=20.273887667405504 , a0=0.0 , w0=0.0
2025-12-01 16:54:02,116 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:02,117 - INFO - integration_test - Dyn residual k=0: pred=[19.04797699667054, 4.5958351957365595, 0.46465611294309206, 3.0, 20.573887667405504], ws=[19.04797699667054, 4.5958351957365595, 0.46465611294309195, 3.0, 25.458450692702577], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.884563025297073], res_norm=4.885e+00
2025-12-01 16:54:02,117 - INFO - integration_test - Dyn residual k=1: pred=[19.3161697125356, 4.73026981611733, 0.46465611294309195, 3.0, 25.758450692702578], ws=[19.3161697125356, 4.73026981611733, 0.46465611294309195, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.9255658518859313], res_norm=3.926e+00
2025-12-01 16:54:02,118 - INFO - integration_test - Dyn residual k=2: pred=[19.584362428400663, 4.8647044364981005, 0.46465611294309195, 3.0, 29.98401654458851], ws=[19.584362428400663, 4.8647044364981005, 0.46465611294309195, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:02,132 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,145 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,161 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,173 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,190 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,203 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,218 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,230 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,245 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,257 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,272 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,285 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,300 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,313 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,328 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,341 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,356 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,369 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,397 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,412 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,422 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:02,751 - INFO - integration_test - Step 71: MPC solve successful
2025-12-01 16:54:02,758 - INFO - integration_test - Step 71: Computed 10 numeric contouring constraints for visualization (s=20.274)
2025-12-01 16:54:02,759 - DEBUG - integration_test - Step 71: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:02,759 - INFO - integration_test - === Applying control at step 71 ===
2025-12-01 16:54:02,759 - INFO - integration_test -   Control dict from planner: {'a': 4.30366188163072e-08, 'w': 0.8000000029416183}
2025-12-01 16:54:02,759 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:02,759 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:02,760 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:02,760 - INFO - integration_test - Step 71 completed in 0.666s
2025-12-01 16:54:02,782 - INFO - integration_test - Step 72 (contouring until path end)
2025-12-01 16:54:02,783 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[19.0423165   4.60641384  0.54465611  3.00000003 20.57388767]
2025-12-01 16:54:02,784 - DEBUG - integration_test - Step 72: Using propagated spline 20.5739 (close to path, dist=0.204m)
2025-12-01 16:54:02,784 - DEBUG - integration_test -   Set spline state to 20.5739
2025-12-01 16:54:02,785 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:02,786 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:02,799 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(19.042, 4.606), path_start=(0.000, 0.000), dist=19.592m
2025-12-01 16:54:02,799 - WARNING - integration_test - Could not update reference path at step 72: x and y must have the same length
2025-12-01 16:54:02,799 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2025-12-01 16:54:02,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:02,803 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:02,803 - INFO - integration_test - Warmstart k=0: x0=19.042316504439803 , y0=4.606413836443695 , psi0=0.5446561132372539 , v0=3.0 , spline0=20.573887670188945 , a0=0.0 , w0=0.0
2025-12-01 16:54:02,803 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:02,804 - INFO - integration_test - Dyn residual k=0: pred=[19.298908159639716, 4.761851034313989, 0.5446561132372539, 3.0, 20.873887670188946], ws=[19.298908159639716, 4.761851034313989, 0.544656113237254, 3.0, 25.89214675379558], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.018259083606633], res_norm=5.018e+00
2025-12-01 16:54:02,805 - INFO - integration_test - Dyn residual k=1: pred=[19.555499814839628, 4.9172882321842835, 0.544656113237254, 3.0, 26.19214675379558], ws=[19.555499814839628, 4.9172882321842835, 0.544656113237254, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.4918697907929293], res_norm=3.492e+00
2025-12-01 16:54:02,806 - INFO - integration_test - Dyn residual k=2: pred=[19.81209147003954, 5.072725430054578, 0.544656113237254, 3.0, 29.98401654458851], ws=[19.81209147003954, 5.072725430054578, 0.544656113237254, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:02,820 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,832 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,848 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,860 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,876 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,889 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,905 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,917 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,932 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,945 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,959 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:02,972 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:02,988 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,000 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,015 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,028 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,055 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,071 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,084 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,099 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,109 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:03,357 - INFO - integration_test - Step 72: MPC solve successful
2025-12-01 16:54:03,366 - INFO - integration_test - Step 72: Computed 10 numeric contouring constraints for visualization (s=20.574)
2025-12-01 16:54:03,366 - DEBUG - integration_test - Step 72: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:03,366 - INFO - integration_test - === Applying control at step 72 ===
2025-12-01 16:54:03,366 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:03,366 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:03,366 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:03,367 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:03,368 - INFO - integration_test - Step 72 completed in 0.585s
2025-12-01 16:54:03,391 - INFO - integration_test - Step 73 (contouring until path end)
2025-12-01 16:54:03,393 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.29242038  4.77194349  0.62465611  3.00000003 20.87388767]
2025-12-01 16:54:03,393 - DEBUG - integration_test - Step 73: Using propagated spline 20.8739 (close to path, dist=0.374m)
2025-12-01 16:54:03,393 - DEBUG - integration_test -   Set spline state to 20.8739
2025-12-01 16:54:03,395 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:03,395 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:03,410 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.292, 4.772), path_start=(0.000, 0.000), dist=19.874m
2025-12-01 16:54:03,410 - WARNING - integration_test - Could not update reference path at step 73: x and y must have the same length
2025-12-01 16:54:03,410 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2025-12-01 16:54:03,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:03,415 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:03,415 - INFO - integration_test - Warmstart k=0: x0=19.292420382669672 , y0=4.771943485156336 , psi0=0.624656114217439 , v0=3.0 , spline0=20.873887673114464 , a0=0.0 , w0=0.0
2025-12-01 16:54:03,415 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:03,416 - INFO - integration_test - Dyn residual k=0: pred=[19.53576966612476, 4.947388993055215, 0.624656114217439, 3.0, 21.173887673114464], ws=[19.53576966612476, 4.947388993055215, 0.6246561142174389, 3.0, 26.213649558247468], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.039761885133004], res_norm=5.040e+00
2025-12-01 16:54:03,417 - INFO - integration_test - Dyn residual k=1: pred=[19.77911894957985, 5.122834500954094, 0.6246561142174389, 3.0, 26.51364955824747], ws=[19.77911894957985, 5.122834500954094, 0.6246561142174389, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.1703669863410404], res_norm=3.170e+00
2025-12-01 16:54:03,417 - INFO - integration_test - Dyn residual k=2: pred=[20.02246823303494, 5.298280008852974, 0.6246561142174389, 3.0, 29.98401654458851], ws=[20.02246823303494, 5.298280008852974, 0.6246561142174389, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:03,433 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,447 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,464 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,478 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,494 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,507 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,522 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,535 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,551 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,564 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,582 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,594 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,609 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,621 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,636 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,649 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,664 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,677 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,692 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,705 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:03,720 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:03,730 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:04,610 - WARNING - integration_test - Step 73: MPC solve failed
2025-12-01 16:54:04,610 - WARNING - integration_test -   Consecutive MPC failures: 1/50
2025-12-01 16:54:04,614 - INFO - integration_test - Step 73: Computed 10 numeric contouring constraints for visualization (s=20.874)
2025-12-01 16:54:04,615 - DEBUG - integration_test - Step 73: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:04,615 - INFO - integration_test - === Applying control at step 73 ===
2025-12-01 16:54:04,615 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:04,615 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:04,615 - INFO - integration_test -   Planner output success: False
2025-12-01 16:54:04,616 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:04,616 - INFO - integration_test - Step 73 completed in 1.223s
2025-12-01 16:54:04,638 - INFO - integration_test - Step 74 (contouring until path end)
2025-12-01 16:54:04,640 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.5284961   4.9569307   0.70465612  3.00000003 21.17388768]
2025-12-01 16:54:04,641 - DEBUG - integration_test - Step 74: Using propagated spline 21.1739 (close to path, dist=0.407m)
2025-12-01 16:54:04,641 - DEBUG - integration_test -   Set spline state to 21.1739
2025-12-01 16:54:04,642 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:04,642 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:04,656 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.528, 4.957), path_start=(0.000, 0.000), dist=20.148m
2025-12-01 16:54:04,657 - WARNING - integration_test - Could not update reference path at step 74: x and y must have the same length
2025-12-01 16:54:04,657 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2025-12-01 16:54:04,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:04,661 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:04,661 - INFO - integration_test - Warmstart k=0: x0=19.52849610395289 , y0=4.956930696645017 , psi0=0.7046561151976242 , v0=3.0 , spline0=21.173887676182055 , a0=0.0 , w0=0.0
2025-12-01 16:54:04,661 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:04,662 - INFO - integration_test - Dyn residual k=0: pred=[19.757046410665954, 5.151262262020701, 0.7046561151976242, 3.0, 21.473887676182056], ws=[19.757046410665954, 5.151262262020701, 0.7046561151976243, 3.0, 26.63046192314682], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.156574246964766], res_norm=5.157e+00
2025-12-01 16:54:04,663 - INFO - integration_test - Dyn residual k=1: pred=[19.985596717379018, 5.345593827396386, 0.7046561151976243, 3.0, 26.930461923146822], ws=[19.985596717379018, 5.345593827396386, 0.7046561151976243, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.753554621441687], res_norm=2.754e+00
2025-12-01 16:54:04,664 - INFO - integration_test - Dyn residual k=2: pred=[20.21414702409208, 5.539925392772071, 0.7046561151976243, 3.0, 29.98401654458851], ws=[20.21414702409208, 5.539925392772071, 0.7046561151976243, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:04,679 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,693 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,710 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,726 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,745 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,760 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,778 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,791 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,807 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,820 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,835 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,848 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,863 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,875 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,891 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,904 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,919 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,931 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,947 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,959 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:04,974 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:04,985 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:05,897 - WARNING - integration_test - Step 74: MPC solve failed
2025-12-01 16:54:05,897 - WARNING - integration_test -   Consecutive MPC failures: 2/50
2025-12-01 16:54:05,902 - INFO - integration_test - Step 74: Computed 10 numeric contouring constraints for visualization (s=21.174)
2025-12-01 16:54:05,902 - DEBUG - integration_test - Step 74: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:05,902 - INFO - integration_test - === Applying control at step 74 ===
2025-12-01 16:54:05,902 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:05,902 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:05,902 - INFO - integration_test -   Planner output success: False
2025-12-01 16:54:05,903 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:05,904 - INFO - integration_test - Step 74 completed in 1.264s
2025-12-01 16:54:05,929 - INFO - integration_test - Step 75 (contouring until path end)
2025-12-01 16:54:05,931 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.74903359  5.16019218  0.78465612  3.00000003 21.47388768]
2025-12-01 16:54:05,931 - INFO - integration_test - Step 75: Re-initialized spline from 21.4739 to 21.2029 (vehicle at (19.75, 5.16), closest path point at (20.20, 4.73), distance=0.621m)
2025-12-01 16:54:05,931 - DEBUG - integration_test -   Set spline state to 21.2029
2025-12-01 16:54:05,933 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:05,933 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:05,947 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.749, 5.160), path_start=(0.000, 0.000), dist=20.412m
2025-12-01 16:54:05,948 - WARNING - integration_test - Could not update reference path at step 75: x and y must have the same length
2025-12-01 16:54:05,948 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2025-12-01 16:54:05,951 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:05,952 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:05,952 - INFO - integration_test - Warmstart k=0: x0=19.749033589255504 , y0=5.160192184033425 , psi0=0.7846561161778093 , v0=3.0 , spline0=21.202868960420364 , a0=0.0 , w0=0.0
2025-12-01 16:54:05,952 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:05,953 - INFO - integration_test - Dyn residual k=0: pred=[19.96132297717975, 5.372166748013985, 0.7846561161778093, 3.0, 21.502868960420365], ws=[19.96132297717975, 5.372166748013985, 0.7846561161778092, 3.0, 26.67006053437545], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.167191573955087], res_norm=5.167e+00
2025-12-01 16:54:05,954 - INFO - integration_test - Dyn residual k=1: pred=[20.173612365104, 5.584141311994545, 0.7846561161778092, 3.0, 26.970060534375452], ws=[20.173612365104, 5.584141311994545, 0.7846561161778092, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.7139560102130567], res_norm=2.714e+00
2025-12-01 16:54:05,954 - INFO - integration_test - Dyn residual k=2: pred=[20.385901753028246, 5.796115875975104, 0.7846561161778092, 3.0, 29.98401654458851], ws=[20.385901753028246, 5.796115875975104, 0.7846561161778092, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:05,970 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:05,984 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,000 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,014 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,030 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,042 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,057 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,070 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,086 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,098 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,113 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,125 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,140 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,152 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,168 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,180 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,195 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,208 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,223 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,235 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:06,252 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:06,263 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:07,079 - WARNING - integration_test - Step 75: MPC solve failed
2025-12-01 16:54:07,079 - WARNING - integration_test -   Consecutive MPC failures: 3/50
2025-12-01 16:54:07,084 - INFO - integration_test - Step 75: Computed 10 numeric contouring constraints for visualization (s=21.203)
2025-12-01 16:54:07,084 - DEBUG - integration_test - Step 75: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:07,084 - INFO - integration_test - === Applying control at step 75 ===
2025-12-01 16:54:07,085 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:07,085 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:07,085 - INFO - integration_test -   Planner output success: False
2025-12-01 16:54:07,086 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:07,086 - INFO - integration_test - Step 75 completed in 1.156s
2025-12-01 16:54:07,108 - INFO - integration_test - Step 76 (contouring until path end)
2025-12-01 16:54:07,109 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.95262215  5.38042777  0.86465612  3.00000003 21.50286896]
2025-12-01 16:54:07,110 - INFO - integration_test - Step 76: Re-initialized spline from 21.5029 to 21.2029 (vehicle at (19.95, 5.38), closest path point at (20.20, 4.73), distance=0.693m)
2025-12-01 16:54:07,110 - DEBUG - integration_test -   Set spline state to 21.2029
2025-12-01 16:54:07,111 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:07,111 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:07,125 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.953, 5.380), path_start=(0.000, 0.000), dist=20.665m
2025-12-01 16:54:07,125 - WARNING - integration_test - Could not update reference path at step 76: x and y must have the same length
2025-12-01 16:54:07,125 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2025-12-01 16:54:07,128 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:07,130 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:07,130 - INFO - integration_test - Warmstart k=0: x0=19.95262215122902 , y0=5.380427767438341 , psi0=0.8646561171579944 , v0=3.0 , spline0=21.202868960420364 , a0=0.0 , w0=0.0
2025-12-01 16:54:07,130 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:07,131 - INFO - integration_test - Dyn residual k=0: pred=[20.147292692708355, 5.608689416166599, 0.8646561171579944, 3.0, 21.502868960420365], ws=[20.147292692708355, 5.608689416166599, 0.8646561171579945, 3.0, 26.670060534375438], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -5.167191573955073], res_norm=5.167e+00
2025-12-01 16:54:07,132 - INFO - integration_test - Dyn residual k=1: pred=[20.34196323418769, 5.836951064894857, 0.8646561171579945, 3.0, 26.97006053437544], ws=[20.34196323418769, 5.836951064894857, 0.8646561171579945, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.713956010213071], res_norm=2.714e+00
2025-12-01 16:54:07,132 - INFO - integration_test - Dyn residual k=2: pred=[20.536633775667028, 6.065212713623114, 0.8646561171579945, 3.0, 29.98401654458851], ws=[20.536633775667028, 6.065212713623114, 0.8646561171579945, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:07,149 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,163 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,184 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,198 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,215 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,229 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,245 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,259 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,276 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,289 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,305 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,318 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,333 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,346 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,361 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,374 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,391 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,404 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,421 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,435 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:07,450 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:07,461 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:08,391 - WARNING - integration_test - Step 76: MPC solve failed
2025-12-01 16:54:08,391 - WARNING - integration_test -   Consecutive MPC failures: 4/50
2025-12-01 16:54:08,397 - INFO - integration_test - Step 76: Computed 10 numeric contouring constraints for visualization (s=21.203)
2025-12-01 16:54:08,397 - DEBUG - integration_test - Step 76: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:08,397 - INFO - integration_test - === Applying control at step 76 ===
2025-12-01 16:54:08,397 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:08,397 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:08,397 - INFO - integration_test -   Planner output success: False
2025-12-01 16:54:08,399 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:08,399 - INFO - integration_test - Step 76 completed in 1.290s
2025-12-01 16:54:08,425 - INFO - integration_test - Step 77 (contouring until path end)
2025-12-01 16:54:08,426 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.13795952  5.61622869  0.94465612  3.00000003 21.50286896]
2025-12-01 16:54:08,427 - INFO - integration_test - Step 77: Re-initialized spline from 21.5029 to 21.2029 (vehicle at (20.14, 5.62), closest path point at (20.20, 4.73), distance=0.885m)
2025-12-01 16:54:08,427 - DEBUG - integration_test -   Set spline state to 21.2029
2025-12-01 16:54:08,428 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:08,428 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:08,442 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.138, 5.616), path_start=(0.000, 0.000), dist=20.906m
2025-12-01 16:54:08,443 - WARNING - integration_test - Could not update reference path at step 77: x and y must have the same length
2025-12-01 16:54:08,443 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2025-12-01 16:54:08,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:08,447 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:08,447 - INFO - integration_test - Warmstart k=0: x0=20.13795951779563 , y0=5.616228690683987 , psi0=0.9446561181381795 , v0=3.0 , spline0=21.202868960420364 , a0=0.0 , w0=0.0
2025-12-01 16:54:08,447 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:08,448 - INFO - integration_test - Dyn residual k=0: pred=[20.313765985667796, 5.859317328539221, 0.9446561181381795, 3.0, 21.502868960420365], ws=[20.313765985667796, 5.859317328539221, 0.9446561181381794, 3.0, 26.670060534375438], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.167191573955073], res_norm=5.167e+00
2025-12-01 16:54:08,449 - INFO - integration_test - Dyn residual k=1: pred=[20.489572453539964, 6.102405966394454, 0.9446561181381794, 3.0, 26.97006053437544], ws=[20.489572453539964, 6.102405966394454, 0.9446561181381794, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -2.713956010213071], res_norm=2.714e+00
2025-12-01 16:54:08,450 - INFO - integration_test - Dyn residual k=2: pred=[20.66537892141213, 6.345494604249688, 0.9446561181381794, 3.0, 29.98401654458851], ws=[20.66537892141213, 6.345494604249688, 0.9446561181381794, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:08,465 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,479 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,496 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,509 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,524 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,537 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,552 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,566 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,583 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,597 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,615 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,629 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,645 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,659 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,676 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,689 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,706 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,720 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,736 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,750 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:08,767 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:08,779 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:10,057 - WARNING - integration_test - Step 77: MPC solve failed
2025-12-01 16:54:10,057 - WARNING - integration_test -   Consecutive MPC failures: 5/50
2025-12-01 16:54:10,062 - INFO - integration_test - Step 77: Computed 10 numeric contouring constraints for visualization (s=21.203)
2025-12-01 16:54:10,062 - DEBUG - integration_test - Step 77: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:10,062 - INFO - integration_test - === Applying control at step 77 ===
2025-12-01 16:54:10,062 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:10,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:10,063 - INFO - integration_test -   Planner output success: False
2025-12-01 16:54:10,063 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:10,064 - INFO - integration_test - Step 77 completed in 1.638s
2025-12-01 16:54:10,088 - INFO - integration_test - Step 78 (contouring until path end)
2025-12-01 16:54:10,089 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[20.30386016  5.86608663  1.02465612  3.00000004 21.50286896]
2025-12-01 16:54:10,089 - INFO - integration_test - Step 78: Re-initialized spline from 21.5029 to 21.8087 (vehicle at (20.30, 5.87), closest path point at (20.78, 4.94), distance=1.040m)
2025-12-01 16:54:10,089 - DEBUG - integration_test -   Set spline state to 21.8087
2025-12-01 16:54:10,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:10,091 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:10,104 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(20.304, 5.866), path_start=(0.000, 0.000), dist=21.134m
2025-12-01 16:54:10,105 - WARNING - integration_test - Could not update reference path at step 78: x and y must have the same length
2025-12-01 16:54:10,105 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2025-12-01 16:54:10,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:10,109 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:10,109 - INFO - integration_test - Warmstart k=0: x0=20.303860162245698 , y0=5.866086632534143 , psi0=1.0246561191183647 , v0=3.0 , spline0=21.808665216432374 , a0=0.0 , w0=0.0
2025-12-01 16:54:10,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:10,109 - INFO - integration_test - Dyn residual k=0: pred=[20.459677995046846, 6.122447321761555, 1.0246561191183647, 3.0, 22.108665216432374], ws=[20.459677995046846, 6.122447321761555, 1.0246561191183652, 3.0, 27.397160668812884], res=[0.0, 0.0, -4.440892098500626e-16, 0.0, -5.288495452380509], res_norm=5.288e+00
2025-12-01 16:54:10,110 - INFO - integration_test - Dyn residual k=1: pred=[20.615495827847994, 6.378808010988967, 1.0246561191183652, 3.0, 27.697160668812884], ws=[20.615495827847994, 6.378808010988967, 1.0246561191183652, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.9868558757756247], res_norm=1.987e+00
2025-12-01 16:54:10,111 - INFO - integration_test - Dyn residual k=2: pred=[20.77131366064914, 6.635168700216379, 1.0246561191183652, 3.0, 29.98401654458851], ws=[20.77131366064914, 6.635168700216379, 1.0246561191183652, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:10,125 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,138 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,153 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,166 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,182 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,195 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,210 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,222 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,249 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,264 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,277 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,292 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,305 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,320 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,332 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,347 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,360 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,377 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,390 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:10,407 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:10,418 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:11,559 - WARNING - integration_test - Step 78: MPC solve failed
2025-12-01 16:54:11,559 - WARNING - integration_test -   Consecutive MPC failures: 6/50
2025-12-01 16:54:11,564 - INFO - integration_test - Step 78: Computed 10 numeric contouring constraints for visualization (s=21.809)
2025-12-01 16:54:11,564 - DEBUG - integration_test - Step 78: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:11,564 - INFO - integration_test - === Applying control at step 78 ===
2025-12-01 16:54:11,564 - INFO - integration_test -   Control dict from planner: {'a': 1.4207324744338036e-08, 'w': 0.8000000098018514}
2025-12-01 16:54:11,565 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:11,565 - INFO - integration_test -   Planner output success: False
2025-12-01 16:54:11,565 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:11,566 - INFO - integration_test - Step 78 completed in 1.477s
2025-12-01 16:54:11,589 - INFO - integration_test - Step 79 (contouring until path end)
2025-12-01 16:54:11,591 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[20.44926289  6.12840335  1.10465612  3.00000004 22.10866522]
2025-12-01 16:54:11,592 - INFO - integration_test - Step 79: Re-initialized spline from 22.1087 to 22.4145 (vehicle at (20.45, 6.13), closest path point at (20.96, 5.01), distance=1.226m)
2025-12-01 16:54:11,592 - DEBUG - integration_test -   Set spline state to 22.4145
2025-12-01 16:54:11,593 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:11,594 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:11,607 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(20.449, 6.128), path_start=(0.000, 0.000), dist=21.348m
2025-12-01 16:54:11,607 - WARNING - integration_test - Could not update reference path at step 79: x and y must have the same length
2025-12-01 16:54:11,607 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2025-12-01 16:54:11,610 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:11,611 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:11,611 - INFO - integration_test - Warmstart k=0: x0=20.449262886563247 , y0=6.128403354800905 , psi0=1.1046561200985499 , v0=3.0 , spline0=22.414461472444383 , a0=0.0 , w0=0.0
2025-12-01 16:54:11,611 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:11,612 - INFO - integration_test - Dyn residual k=0: pred=[20.584095381883788, 6.396396261807109, 1.1046561200985499, 3.0, 22.714461472444384], ws=[20.584095381883788, 6.396396261807109, 1.10465612009855, 3.0, 28.038870258953917], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.324408786509533], res_norm=5.324e+00
2025-12-01 16:54:11,613 - INFO - integration_test - Dyn residual k=1: pred=[20.71892787720433, 6.664389168813313, 1.10465612009855, 3.0, 28.338870258953918], ws=[20.71892787720433, 6.664389168813313, 1.10465612009855, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -1.3451462856345913], res_norm=1.345e+00
2025-12-01 16:54:11,614 - INFO - integration_test - Dyn residual k=2: pred=[20.85376037252487, 6.9323820758195165, 1.10465612009855, 3.0, 29.98401654458851], ws=[20.85376037252487, 6.9323820758195165, 1.10465612009855, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:11,628 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,640 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,656 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,669 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,685 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,697 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,713 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,725 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,740 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,752 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,767 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,780 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,795 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,808 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,823 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,835 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,851 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,864 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,881 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,894 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:11,912 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:11,923 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:12,180 - INFO - integration_test - Step 79: MPC solve successful
2025-12-01 16:54:12,188 - INFO - integration_test - Step 79: Computed 10 numeric contouring constraints for visualization (s=22.414)
2025-12-01 16:54:12,188 - DEBUG - integration_test - Step 79: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:12,188 - INFO - integration_test - === Applying control at step 79 ===
2025-12-01 16:54:12,188 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019977449, 'w': -0.8000000099810252}
2025-12-01 16:54:12,188 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:12,189 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:12,190 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:12,190 - INFO - integration_test - Step 79 completed in 0.599s
2025-12-01 16:54:12,215 - INFO - integration_test - Step 80 (contouring until path end)
2025-12-01 16:54:12,216 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[20.58970227  6.38204081  1.02465612  2.80000004 22.69446148]
2025-12-01 16:54:12,216 - INFO - integration_test - Step 80: Re-initialized spline from 22.6945 to 22.4145 (vehicle at (20.59, 6.38), closest path point at (20.96, 5.01), distance=1.417m)
2025-12-01 16:54:12,217 - DEBUG - integration_test -   Set spline state to 22.4145
2025-12-01 16:54:12,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:12,218 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:12,233 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(20.590, 6.382), path_start=(0.000, 0.000), dist=21.556m
2025-12-01 16:54:12,233 - WARNING - integration_test - Could not update reference path at step 80: x and y must have the same length
2025-12-01 16:54:12,233 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2025-12-01 16:54:12,236 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:12,237 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:12,237 - INFO - integration_test - Warmstart k=0: x0=20.58970226824309 , y0=6.382040809839289 , psi0=1.0246561191004473 , v0=2.800000035781817 , spline0=22.414461472444383 , a0=0.0 , w0=0.0
2025-12-01 16:54:12,237 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:12,238 - INFO - integration_test - Dyn residual k=0: pred=[20.73513224738693, 6.6213107895066186, 1.0246561191004473, 2.800000035781817, 22.694461476022564], ws=[20.73513224738693, 6.6213107895066186, 1.024656119100447, 2.800000035781817, 28.0188702625321], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.324408786509537], res_norm=5.324e+00
2025-12-01 16:54:12,239 - INFO - integration_test - Dyn residual k=1: pred=[20.880562226530767, 6.860580769173947, 1.024656119100447, 2.800000035781817, 28.29887026611028], ws=[20.880562226530767, 6.860580769173948, 1.024656119100447, 2.800000035781817, 29.68401654458851], res=[0.0, -8.881784197001252e-16, 0.0, 0.0, -1.3851462784782278], res_norm=1.385e+00
2025-12-01 16:54:12,240 - INFO - integration_test - Dyn residual k=2: pred=[21.025992205674605, 7.099850748841277, 1.024656119100447, 2.800000035781817, 29.96401654816669], ws=[21.025992205674605, 7.099850748841277, 1.024656119100447, 2.800000035781817, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000357818067], res_norm=2.800e-01
2025-12-01 16:54:12,255 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,268 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,283 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,296 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,312 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,324 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,339 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,351 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,366 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,378 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,394 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,406 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,421 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,433 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,448 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,460 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,476 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,489 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,505 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,517 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:12,532 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,543 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:12,905 - INFO - integration_test - Step 80: MPC solve successful
2025-12-01 16:54:12,913 - INFO - integration_test - Step 80: Computed 10 numeric contouring constraints for visualization (s=22.414)
2025-12-01 16:54:12,913 - DEBUG - integration_test - Step 80: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:12,913 - INFO - integration_test - === Applying control at step 80 ===
2025-12-01 16:54:12,914 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019989808, 'w': -0.8000000099934036}
2025-12-01 16:54:12,914 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:12,914 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:12,914 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:12,915 - INFO - integration_test - Step 80 completed in 0.699s
2025-12-01 16:54:12,936 - INFO - integration_test - Step 81 (contouring until path end)
2025-12-01 16:54:12,937 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[20.7389018   6.60698669  0.94465612  2.60000003 22.67446148]
2025-12-01 16:54:12,937 - INFO - integration_test - Step 81: Re-initialized spline from 22.6745 to 23.0203 (vehicle at (20.74, 6.61), closest path point at (21.52, 5.26), distance=1.557m)
2025-12-01 16:54:12,938 - DEBUG - integration_test -   Set spline state to 23.0203
2025-12-01 16:54:12,939 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:12,939 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:12,952 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(20.739, 6.607), path_start=(0.000, 0.000), dist=21.766m
2025-12-01 16:54:12,953 - WARNING - integration_test - Could not update reference path at step 81: x and y must have the same length
2025-12-01 16:54:12,953 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2025-12-01 16:54:12,956 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:12,957 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:12,957 - INFO - integration_test - Warmstart k=0: x0=20.738901800430515 , y0=6.606986691344081 , psi0=0.944656118101107 , v0=2.600000033782836 , spline0=23.020257728456393 , a0=0.0 , w0=0.0
2025-12-01 16:54:12,957 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:12,958 - INFO - integration_test - Dyn residual k=0: pred=[20.891267407907282, 6.817663513550376, 0.944656118101107, 2.600000033782836, 23.280257731834677], ws=[20.891267407907282, 6.817663513550376, 0.9446561181011068, 2.600000033782836, 28.709487841089373], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.429230109254696], res_norm=5.429e+00
2025-12-01 16:54:12,958 - INFO - integration_test - Dyn residual k=1: pred=[21.04363301538405, 7.028340335756671, 0.9446561181011068, 2.600000033782836, 28.969487844467658], ws=[21.04363301538405, 7.028340335756671, 0.9446561181011068, 2.600000033782836, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7145287001208516], res_norm=7.145e-01
2025-12-01 16:54:12,959 - INFO - integration_test - Dyn residual k=2: pred=[21.195998622860817, 7.239017157962967, 0.9446561181011068, 2.600000033782836, 29.944016547966793], ws=[21.195998622860817, 7.239017157962967, 0.9446561181011068, 2.600000033782836, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2600000033782841], res_norm=2.600e-01
2025-12-01 16:54:12,974 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:12,987 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,002 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,015 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,030 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,043 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,058 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,071 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,086 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,099 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,114 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,126 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,141 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,154 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,169 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,182 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,198 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,210 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,226 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,238 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,253 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,263 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:13,627 - INFO - integration_test - Step 81: MPC solve successful
2025-12-01 16:54:13,635 - INFO - integration_test - Step 81: Computed 10 numeric contouring constraints for visualization (s=23.020)
2025-12-01 16:54:13,635 - DEBUG - integration_test - Step 81: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:13,635 - INFO - integration_test - === Applying control at step 81 ===
2025-12-01 16:54:13,636 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199977266, 'w': -0.800000009997274}
2025-12-01 16:54:13,636 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:13,636 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:13,636 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:13,637 - INFO - integration_test - Step 81 completed in 0.700s
2025-12-01 16:54:13,658 - INFO - integration_test - Step 82 (contouring until path end)
2025-12-01 16:54:13,659 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[20.89324481  6.80356983  0.86465612  2.40000003 23.26025773]
2025-12-01 16:54:13,660 - INFO - integration_test - Step 82: Re-initialized spline from 23.2603 to 23.0203 (vehicle at (20.89, 6.80), closest path point at (21.52, 5.26), distance=1.666m)
2025-12-01 16:54:13,660 - DEBUG - integration_test -   Set spline state to 23.0203
2025-12-01 16:54:13,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:13,662 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:13,676 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(20.893, 6.804), path_start=(0.000, 0.000), dist=21.973m
2025-12-01 16:54:13,676 - WARNING - integration_test - Could not update reference path at step 82: x and y must have the same length
2025-12-01 16:54:13,676 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2025-12-01 16:54:13,679 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:13,680 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:13,680 - INFO - integration_test - Warmstart k=0: x0=20.89324480576567 , y0=6.803569833205194 , psi0=0.8646561171013796 , v0=2.4000000317830636 , spline0=23.020257728456393 , a0=0.0 , w0=0.0
2025-12-01 16:54:13,680 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:13,681 - INFO - integration_test - Dyn residual k=0: pred=[21.048981241021885, 6.986179154597268, 0.8646561171013796, 2.4000000317830636, 23.2602577316347], ws=[21.048981241021885, 6.986179154597268, 0.8646561171013794, 2.4000000317830636, 28.68948784088939], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -5.429230109254693], res_norm=5.429e+00
2025-12-01 16:54:13,682 - INFO - integration_test - Dyn residual k=1: pred=[21.2047176762781, 7.168788475989342, 0.8646561171013794, 2.4000000317830636, 28.929487844067697], ws=[21.2047176762781, 7.168788475989342, 0.8646561171013794, 2.4000000317830636, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.7545287005208117], res_norm=7.545e-01
2025-12-01 16:54:13,683 - INFO - integration_test - Dyn residual k=2: pred=[21.360454111534317, 7.351397797381416, 0.8646561171013794, 2.4000000317830636, 29.924016547766815], ws=[21.360454111534317, 7.351397797381416, 0.8646561171013794, 2.4000000317830636, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.24000000317830583], res_norm=2.400e-01
2025-12-01 16:54:13,697 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,710 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,725 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,738 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,753 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,765 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,781 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,794 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,809 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,822 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,836 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,849 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,864 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,877 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,892 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,905 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,920 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,932 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,947 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,959 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:13,974 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:13,984 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:14,408 - INFO - integration_test - Step 82: MPC solve successful
2025-12-01 16:54:14,416 - INFO - integration_test - Step 82: Computed 10 numeric contouring constraints for visualization (s=23.020)
2025-12-01 16:54:14,416 - DEBUG - integration_test - Step 82: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:14,416 - INFO - integration_test - === Applying control at step 82 ===
2025-12-01 16:54:14,416 - INFO - integration_test -   Control dict from planner: {'a': -2.00000001997674, 'w': -0.800000009959432}
2025-12-01 16:54:14,416 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:14,416 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:14,417 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:14,417 - INFO - integration_test - Step 82 completed in 0.758s
2025-12-01 16:54:14,439 - INFO - integration_test - Step 83 (contouring until path end)
2025-12-01 16:54:14,440 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.04923149  6.9725076   0.78465612  2.20000003 23.24025773]
2025-12-01 16:54:14,440 - INFO - integration_test - Step 83: Re-initialized spline from 23.2403 to 23.6261 (vehicle at (21.05, 6.97), closest path point at (22.06, 5.53), distance=1.762m)
2025-12-01 16:54:14,441 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:54:14,442 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:14,442 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:14,455 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.049, 6.973), path_start=(0.000, 0.000), dist=22.174m
2025-12-01 16:54:14,456 - WARNING - integration_test - Could not update reference path at step 83: x and y must have the same length
2025-12-01 16:54:14,456 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2025-12-01 16:54:14,459 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:14,460 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:14,460 - INFO - integration_test - Warmstart k=0: x0=21.049231487857746 , y0=6.972507598023604 , psi0=0.7846561161054364 , v0=2.2000000297853894 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:54:14,460 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:14,461 - INFO - integration_test - Dyn residual k=0: pred=[21.204910374454485, 7.127955613702662, 0.7846561161054364, 2.2000000297853894, 23.846053987446943], ws=[21.204910374454485, 7.127955613702662, 0.7846561161054364, 2.2000000297853894, 29.372266520634398], res=[0.0, 0.0, 0.0, 0.0, -5.526212533187454], res_norm=5.526e+00
2025-12-01 16:54:14,461 - INFO - integration_test - Dyn residual k=1: pred=[21.360589261051224, 7.28340362938172, 0.7846561161054364, 2.2000000297853894, 29.592266523612935], ws=[21.360589261051224, 7.28340362938172, 0.7846561161054364, 2.2000000297853894, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.09175002097557439], res_norm=9.175e-02
2025-12-01 16:54:14,462 - INFO - integration_test - Dyn residual k=2: pred=[21.516268147647963, 7.438851645060778, 0.7846561161054364, 2.2000000297853894, 29.904016547567046], ws=[21.516268147647963, 7.438851645060778, 0.7846561161054364, 2.2000000297853894, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.22000000297853717], res_norm=2.200e-01
2025-12-01 16:54:14,477 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,490 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,506 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,519 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,534 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,547 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,562 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,575 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,591 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,603 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,618 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,631 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,646 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,658 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,674 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,687 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,702 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,715 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,730 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,743 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:14,758 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:14,768 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:15,054 - INFO - integration_test - Step 83: MPC solve successful
2025-12-01 16:54:15,061 - INFO - integration_test - Step 83: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:54:15,062 - DEBUG - integration_test - Step 83: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:15,062 - INFO - integration_test - === Applying control at step 83 ===
2025-12-01 16:54:15,062 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018261334, 'w': -0.8000000098460753}
2025-12-01 16:54:15,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:15,062 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:15,063 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:15,063 - INFO - integration_test - Step 83 completed in 0.623s
2025-12-01 16:54:15,087 - INFO - integration_test - Step 84 (contouring until path end)
2025-12-01 16:54:15,088 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[21.21840057  7.12824339  0.70465612  2.40000003 23.86605399]
2025-12-01 16:54:15,089 - INFO - integration_test - Step 84: Re-initialized spline from 23.8661 to 23.6261 (vehicle at (21.22, 7.13), closest path point at (22.06, 5.53), distance=1.808m)
2025-12-01 16:54:15,089 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:54:15,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:15,090 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:15,104 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(21.218, 7.128), path_start=(0.000, 0.000), dist=22.384m
2025-12-01 16:54:15,105 - WARNING - integration_test - Could not update reference path at step 84: x and y must have the same length
2025-12-01 16:54:15,105 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2025-12-01 16:54:15,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:15,109 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:15,109 - INFO - integration_test - Warmstart k=0: x0=21.2184005655282 , y0=7.128243388798003 , psi0=0.7046561151208288 , v0=2.4000000316115226 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:54:15,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:15,110 - INFO - integration_test - Dyn residual k=0: pred=[21.401240813318864, 7.283708643132215, 0.7046561151208288, 2.4000000316115226, 23.86605398762956], ws=[21.401240813318864, 7.283708643132215, 0.7046561151208288, 2.4000000316115226, 29.392266520816992], res=[0.0, 0.0, 0.0, 0.0, -5.526212533187433], res_norm=5.526e+00
2025-12-01 16:54:15,111 - INFO - integration_test - Dyn residual k=1: pred=[21.58408106110953, 7.439173897466427, 0.7046561151208288, 2.4000000316115226, 29.632266523978146], ws=[21.58408106110953, 7.439173897466427, 0.7046561151208288, 2.4000000316115226, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.05175002061036338], res_norm=5.175e-02
2025-12-01 16:54:15,111 - INFO - integration_test - Dyn residual k=2: pred=[21.766921308900194, 7.594639151800639, 0.7046561151208288, 2.4000000316115226, 29.924016547749662], ws=[21.766921308900194, 7.594639151800639, 0.7046561151208288, 2.4000000316115226, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.24000000316115333], res_norm=2.400e-01
2025-12-01 16:54:15,126 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,138 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,154 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,166 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,182 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,195 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,210 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,223 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,250 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,265 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,277 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,293 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,305 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,321 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,333 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,348 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,360 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,378 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,391 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,407 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,417 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:15,664 - INFO - integration_test - Step 84: MPC solve successful
2025-12-01 16:54:15,672 - INFO - integration_test - Step 84: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:54:15,672 - DEBUG - integration_test - Step 84: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:15,673 - INFO - integration_test - === Applying control at step 84 ===
2025-12-01 16:54:15,673 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999996947253, 'w': -0.8000000089661424}
2025-12-01 16:54:15,673 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:15,673 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:15,674 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:15,674 - INFO - integration_test - Step 84 completed in 0.586s
2025-12-01 16:54:15,700 - INFO - integration_test - Step 85 (contouring until path end)
2025-12-01 16:54:15,701 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[21.41521255  7.28229448  0.62465611  2.60000003 23.88605399]
2025-12-01 16:54:15,702 - INFO - integration_test - Step 85: Re-initialized spline from 23.8861 to 23.6261 (vehicle at (21.42, 7.28), closest path point at (22.06, 5.53), distance=1.869m)
2025-12-01 16:54:15,702 - DEBUG - integration_test -   Set spline state to 23.6261
2025-12-01 16:54:15,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:15,703 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:15,717 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(21.415, 7.282), path_start=(0.000, 0.000), dist=22.620m
2025-12-01 16:54:15,718 - WARNING - integration_test - Could not update reference path at step 85: x and y must have the same length
2025-12-01 16:54:15,718 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2025-12-01 16:54:15,721 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:15,722 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:15,722 - INFO - integration_test - Warmstart k=0: x0=21.415212550328896 , y0=7.282294476231578 , psi0=0.6246561142242146 , v0=2.6000000315809952 , spline0=23.626053984468406 , a0=0.0 , w0=0.0
2025-12-01 16:54:15,722 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:15,723 - INFO - integration_test - Dyn residual k=0: pred=[21.626115265217344, 7.434347251592284, 0.6246561142242146, 2.6000000315809952, 23.886053987626507], ws=[21.626115265217344, 7.434347251592284, 0.6246561142242149, 2.6000000315809952, 29.412266520813954], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -5.526212533187447], res_norm=5.526e+00
2025-12-01 16:54:15,724 - INFO - integration_test - Dyn residual k=1: pred=[21.83701798010579, 7.586400026952989, 0.6246561142242149, 2.6000000315809952, 29.672266523972056], ws=[21.83701798010579, 7.586400026952989, 0.6246561142242149, 2.6000000315809952, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.011750020616453583], res_norm=1.175e-02
2025-12-01 16:54:15,724 - INFO - integration_test - Dyn residual k=2: pred=[22.04792069499424, 7.738452802313695, 0.6246561142242149, 2.6000000315809952, 29.94401654774661], ws=[22.04792069499424, 7.738452802313695, 0.6246561142242149, 2.6000000315809952, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2600000031581011], res_norm=2.600e-01
2025-12-01 16:54:15,738 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,751 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,767 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,779 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,795 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,808 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,823 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,836 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,851 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,863 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,879 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,892 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,907 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,920 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,935 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,948 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,963 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:15,975 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:15,991 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,004 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,019 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,029 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:16,287 - INFO - integration_test - Step 85: MPC solve successful
2025-12-01 16:54:16,295 - INFO - integration_test - Step 85: Computed 10 numeric contouring constraints for visualization (s=23.626)
2025-12-01 16:54:16,296 - DEBUG - integration_test - Step 85: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:16,296 - INFO - integration_test - === Applying control at step 85 ===
2025-12-01 16:54:16,296 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999237231454, 'w': -0.7999999977139555}
2025-12-01 16:54:16,296 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:16,296 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:16,297 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:16,298 - INFO - integration_test - Step 85 completed in 0.597s
2025-12-01 16:54:16,324 - INFO - integration_test - Step 86 (contouring until path end)
2025-12-01 16:54:16,325 - DEBUG - integration_test - Syncing planner state at step 86: vehicle_state=[21.64037961  7.43116     0.54465611  2.80000002 23.90605399]
2025-12-01 16:54:16,326 - INFO - integration_test - Step 86: Re-initialized spline from 23.9061 to 24.2319 (vehicle at (21.64, 7.43), closest path point at (22.90, 6.00), distance=1.904m)
2025-12-01 16:54:16,326 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 16:54:16,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:16,328 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:16,344 - DEBUG - integration_test - Step 86: Checking path alignment: vehicle=(21.640, 7.431), path_start=(0.000, 0.000), dist=22.881m
2025-12-01 16:54:16,344 - WARNING - integration_test - Could not update reference path at step 86: x and y must have the same length
2025-12-01 16:54:16,344 - INFO - integration_test - === Calling planner.solve_mpc() at step 86 ===
2025-12-01 16:54:16,348 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:16,349 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:16,350 - INFO - integration_test - Warmstart k=0: x0=21.64037960954822 , y0=7.431160003053634 , psi0=0.544656114452819 , v0=2.80000002395331 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 16:54:16,350 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:16,351 - INFO - integration_test - Dyn residual k=0: pred=[21.879865156273862, 7.576234722598097, 0.544656114452819, 2.80000002395331, 24.511850242875745], ws=[21.879865156273862, 7.576234722598097, 0.544656114452819, 2.80000002395331, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -5.172166301712764], res_norm=5.172e+00
2025-12-01 16:54:16,351 - INFO - integration_test - Dyn residual k=1: pred=[22.119350702999505, 7.7213094421425605, 0.544656114452819, 2.80000002395331, 29.96401654698384], ws=[22.119350702999505, 7.7213094421425605, 0.544656114452819, 2.80000002395331, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2800000023953295], res_norm=2.800e-01
2025-12-01 16:54:16,352 - INFO - integration_test - Dyn residual k=2: pred=[22.358836249725147, 7.866384161687024, 0.544656114452819, 2.80000002395331, 29.96401654698384], ws=[22.358836249725147, 7.866384161687024, 0.544656114452819, 2.80000002395331, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.2800000023953295], res_norm=2.800e-01
2025-12-01 16:54:16,368 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,382 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,399 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,412 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,428 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,441 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,457 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,471 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,487 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,499 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,515 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,527 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,542 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,555 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,571 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,583 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,599 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,611 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,626 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,638 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:16,653 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:16,664 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:16,944 - INFO - integration_test - Step 86: MPC solve successful
2025-12-01 16:54:16,952 - INFO - integration_test - Step 86: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 16:54:16,953 - DEBUG - integration_test - Step 86: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:16,953 - INFO - integration_test - === Applying control at step 86 ===
2025-12-01 16:54:16,953 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018990791, 'w': -0.800000009425141}
2025-12-01 16:54:16,953 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:16,953 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:16,954 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:16,954 - INFO - integration_test - Step 86 completed in 0.629s
2025-12-01 16:54:16,979 - INFO - integration_test - Step 87 (contouring until path end)
2025-12-01 16:54:16,980 - DEBUG - integration_test - Syncing planner state at step 87: vehicle_state=[21.89422521  7.57122281  0.46465611  3.00000003 24.53185024]
2025-12-01 16:54:16,981 - INFO - integration_test - Step 87: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (21.89, 7.57), closest path point at (22.90, 6.00), distance=1.864m)
2025-12-01 16:54:16,981 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 16:54:16,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:16,983 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:16,996 - DEBUG - integration_test - Step 87: Checking path alignment: vehicle=(21.894, 7.571), path_start=(0.000, 0.000), dist=23.166m
2025-12-01 16:54:16,997 - WARNING - integration_test - Could not update reference path at step 87: x and y must have the same length
2025-12-01 16:54:16,997 - INFO - integration_test - === Calling planner.solve_mpc() at step 87 ===
2025-12-01 16:54:17,000 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:17,001 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:17,001 - INFO - integration_test - Warmstart k=0: x0=21.89422520928164 , y0=7.571222808010768 , psi0=0.4646561135103049 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 16:54:17,001 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:17,002 - INFO - integration_test - Dyn residual k=0: pred=[22.16241792507045, 7.7056574285436605, 0.4646561135103049, 3.0, 24.531850240480416], ws=[22.16241792507045, 7.7056574285436605, 0.4646561135103049, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 16:54:17,003 - INFO - integration_test - Dyn residual k=1: pred=[22.43061064085926, 7.840092049076553, 0.4646561135103049, 3.0, 29.98401654458851], ws=[22.43061064085926, 7.840092049076553, 0.4646561135103049, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:17,003 - INFO - integration_test - Dyn residual k=2: pred=[22.69880335664807, 7.974526669609445, 0.4646561135103049, 3.0, 29.98401654458851], ws=[22.69880335664807, 7.974526669609445, 0.4646561135103049, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:17,017 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,030 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,046 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,058 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,074 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,087 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,103 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,115 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,130 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,143 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,158 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,170 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,186 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,198 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,213 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,225 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,240 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,253 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,268 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,280 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,296 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,306 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:17,592 - INFO - integration_test - Step 87: MPC solve successful
2025-12-01 16:54:17,599 - INFO - integration_test - Step 87: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 16:54:17,600 - DEBUG - integration_test - Step 87: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:17,600 - INFO - integration_test - === Applying control at step 87 ===
2025-12-01 16:54:17,600 - INFO - integration_test -   Control dict from planner: {'a': 2.7644087412466876e-08, 'w': -0.8000000099927753}
2025-12-01 16:54:17,600 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:17,600 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:17,601 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:17,601 - INFO - integration_test - Step 87 completed in 0.621s
2025-12-01 16:54:17,626 - INFO - integration_test - Step 88 (contouring until path end)
2025-12-01 16:54:17,627 - DEBUG - integration_test - Syncing planner state at step 88: vehicle_state=[22.16750647  7.69479209  0.38465611  3.00000003 24.53185024]
2025-12-01 16:54:17,627 - INFO - integration_test - Step 88: Re-initialized spline from 24.5319 to 24.2319 (vehicle at (22.17, 7.69), closest path point at (22.90, 6.00), distance=1.845m)
2025-12-01 16:54:17,628 - DEBUG - integration_test -   Set spline state to 24.2319
2025-12-01 16:54:17,629 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:17,629 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:17,643 - DEBUG - integration_test - Step 88: Checking path alignment: vehicle=(22.168, 7.695), path_start=(0.000, 0.000), dist=23.465m
2025-12-01 16:54:17,643 - WARNING - integration_test - Could not update reference path at step 88: x and y must have the same length
2025-12-01 16:54:17,643 - INFO - integration_test - === Calling planner.solve_mpc() at step 88 ===
2025-12-01 16:54:17,646 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:17,647 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:17,647 - INFO - integration_test - Warmstart k=0: x0=22.167506468292927 , y0=7.694792091828241 , psi0=0.3846561125110274 , v0=3.0 , spline0=24.231850240480416 , a0=0.0 , w0=0.0
2025-12-01 16:54:17,647 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:17,648 - INFO - integration_test - Dyn residual k=0: pred=[22.445584726680384, 7.807364211876672, 0.3846561125110274, 3.0, 24.531850240480416], ws=[22.445584726680384, 7.807364211876672, 0.38465611251102727, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -5.152166304108093], res_norm=5.152e+00
2025-12-01 16:54:17,649 - INFO - integration_test - Dyn residual k=1: pred=[22.72366298506784, 7.919936331925103, 0.38465611251102727, 3.0, 29.98401654458851], ws=[22.72366298506784, 7.919936331925103, 0.38465611251102727, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:17,649 - INFO - integration_test - Dyn residual k=2: pred=[23.001741243455296, 8.032508451973534, 0.38465611251102727, 3.0, 29.98401654458851], ws=[23.001741243455296, 8.032508451973534, 0.38465611251102727, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:17,663 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,676 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,693 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,705 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,721 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,733 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,748 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,761 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,776 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,789 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,805 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,817 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,832 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,845 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,860 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,873 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,889 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,901 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,917 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,930 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:17,945 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:17,955 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:18,229 - INFO - integration_test - Step 88: MPC solve successful
2025-12-01 16:54:18,237 - INFO - integration_test - Step 88: Computed 10 numeric contouring constraints for visualization (s=24.232)
2025-12-01 16:54:18,237 - DEBUG - integration_test - Step 88: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:18,237 - INFO - integration_test - === Applying control at step 88 ===
2025-12-01 16:54:18,237 - INFO - integration_test -   Control dict from planner: {'a': 9.05685325996006e-09, 'w': -0.8000000097119211}
2025-12-01 16:54:18,237 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:18,237 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:18,238 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:18,239 - INFO - integration_test - Step 88 completed in 0.612s
2025-12-01 16:54:18,260 - INFO - integration_test - Step 89 (contouring until path end)
2025-12-01 16:54:18,261 - DEBUG - integration_test - Syncing planner state at step 89: vehicle_state=[22.4497887   7.79612698  0.30465611  3.00000003 24.53185024]
2025-12-01 16:54:18,262 - INFO - integration_test - Step 89: Re-initialized spline from 24.5319 to 24.8376 (vehicle at (22.45, 7.80), closest path point at (23.38, 6.30), distance=1.761m)
2025-12-01 16:54:18,262 - DEBUG - integration_test -   Set spline state to 24.8376
2025-12-01 16:54:18,263 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:18,264 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:18,277 - DEBUG - integration_test - Step 89: Checking path alignment: vehicle=(22.450, 7.796), path_start=(0.000, 0.000), dist=23.765m
2025-12-01 16:54:18,277 - WARNING - integration_test - Could not update reference path at step 89: x and y must have the same length
2025-12-01 16:54:18,277 - INFO - integration_test - === Calling planner.solve_mpc() at step 89 ===
2025-12-01 16:54:18,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:18,282 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:18,282 - INFO - integration_test - Warmstart k=0: x0=22.44978869534831 , y0=7.7961269763877485 , psi0=0.3046561115398353 , v0=3.0 , spline0=24.837646496492425 , a0=0.0 , w0=0.0
2025-12-01 16:54:18,282 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:18,283 - INFO - integration_test - Dyn residual k=0: pred=[22.73597374440512, 7.886116518537674, 0.3046561115398353, 3.0, 25.137646496492426], ws=[22.73597374440512, 7.886116518537674, 0.3046561115398352, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -4.546370048096083], res_norm=4.546e+00
2025-12-01 16:54:18,284 - INFO - integration_test - Dyn residual k=1: pred=[23.022158793461927, 7.976106060687599, 0.3046561115398352, 3.0, 29.98401654458851], ws=[23.022158793461927, 7.976106060687599, 0.3046561115398352, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:18,284 - INFO - integration_test - Dyn residual k=2: pred=[23.308343842518735, 8.066095602837523, 0.3046561115398352, 3.0, 29.98401654458851], ws=[23.308343842518735, 8.066095602837523, 0.3046561115398352, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:18,308 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,320 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,336 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,348 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,364 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,376 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,392 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,405 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,420 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,432 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,447 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,460 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,475 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,489 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,504 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,517 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,532 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,545 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,560 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,572 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,588 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,599 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:18,887 - INFO - integration_test - Step 89: MPC solve successful
2025-12-01 16:54:18,896 - INFO - integration_test - Step 89: Computed 10 numeric contouring constraints for visualization (s=24.838)
2025-12-01 16:54:18,896 - DEBUG - integration_test - Step 89: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:18,896 - INFO - integration_test - === Applying control at step 89 ===
2025-12-01 16:54:18,896 - INFO - integration_test -   Control dict from planner: {'a': 3.1803728885364484e-09, 'w': -0.800000009965714}
2025-12-01 16:54:18,896 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:18,896 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:18,897 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:18,897 - INFO - integration_test - Step 89 completed in 0.636s
2025-12-01 16:54:18,919 - INFO - integration_test - Step 90 (contouring until path end)
2025-12-01 16:54:18,920 - DEBUG - integration_test - Syncing planner state at step 90: vehicle_state=[22.73926625  7.87457926  0.22465611  3.00000003 25.1376465 ]
2025-12-01 16:54:18,920 - INFO - integration_test - Step 90: Re-initialized spline from 25.1376 to 25.4434 (vehicle at (22.74, 7.87), closest path point at (23.85, 6.62), distance=1.683m)
2025-12-01 16:54:18,921 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 16:54:18,922 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:18,922 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:18,936 - DEBUG - integration_test - Step 90: Checking path alignment: vehicle=(22.739, 7.875), path_start=(0.000, 0.000), dist=24.064m
2025-12-01 16:54:18,937 - WARNING - integration_test - Could not update reference path at step 90: x and y must have the same length
2025-12-01 16:54:18,937 - INFO - integration_test - === Calling planner.solve_mpc() at step 90 ===
2025-12-01 16:54:18,939 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:18,940 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:18,941 - INFO - integration_test - Warmstart k=0: x0=22.73926624736007 , y0=7.874579264168131 , psi0=0.2246561105432639 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 16:54:18,941 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:18,941 - INFO - integration_test - Dyn residual k=0: pred=[23.031727479366133, 7.941410602427181, 0.2246561105432639, 3.0, 25.743442752504436], ws=[23.031727479366133, 7.941410602427181, 0.22465611054326384, 3.0, 29.68401654458851], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 16:54:18,942 - INFO - integration_test - Dyn residual k=1: pred=[23.324188711372194, 8.008241940686231, 0.22465611054326384, 3.0, 29.98401654458851], ws=[23.324188711372194, 8.008241940686231, 0.22465611054326384, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:18,943 - INFO - integration_test - Dyn residual k=2: pred=[23.616649943378256, 8.07507327894528, 0.22465611054326384, 3.0, 29.98401654458851], ws=[23.616649943378256, 8.07507327894528, 0.22465611054326384, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:18,957 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,970 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:18,986 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:18,998 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,014 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,026 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,041 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,053 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,068 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,081 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,097 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,109 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,124 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,136 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,151 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,163 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,178 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,191 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,206 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,218 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,233 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,244 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:19,570 - INFO - integration_test - Step 90: MPC solve successful
2025-12-01 16:54:19,578 - INFO - integration_test - Step 90: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 16:54:19,578 - DEBUG - integration_test - Step 90: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:19,578 - INFO - integration_test - === Applying control at step 90 ===
2025-12-01 16:54:19,578 - INFO - integration_test -   Control dict from planner: {'a': 1.060993496905667e-09, 'w': 0.2980998895976842}
2025-12-01 16:54:19,578 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:19,579 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:19,579 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:19,580 - INFO - integration_test - Step 90 completed in 0.660s
2025-12-01 16:54:19,601 - INFO - integration_test - Step 91 (contouring until path end)
2025-12-01 16:54:19,603 - DEBUG - integration_test - Syncing planner state at step 91: vehicle_state=[23.03068812  7.94575952  0.2544661   3.00000003 25.74344276]
2025-12-01 16:54:19,603 - INFO - integration_test - Step 91: Re-initialized spline from 25.7434 to 25.4434 (vehicle at (23.03, 7.95), closest path point at (23.85, 6.62), distance=1.565m)
2025-12-01 16:54:19,603 - DEBUG - integration_test -   Set spline state to 25.4434
2025-12-01 16:54:19,605 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:19,605 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:19,618 - DEBUG - integration_test - Step 91: Checking path alignment: vehicle=(23.031, 7.946), path_start=(0.000, 0.000), dist=24.363m
2025-12-01 16:54:19,618 - WARNING - integration_test - Could not update reference path at step 91: x and y must have the same length
2025-12-01 16:54:19,618 - INFO - integration_test - === Calling planner.solve_mpc() at step 91 ===
2025-12-01 16:54:19,621 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:19,622 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:19,622 - INFO - integration_test - Warmstart k=0: x0=23.030688122074093 , y0=7.945759515731332 , psi0=0.25446609950303234 , v0=3.0 , spline0=25.443442752504435 , a0=0.0 , w0=0.0
2025-12-01 16:54:19,622 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:19,623 - INFO - integration_test - Dyn residual k=0: pred=[23.32102747158863, 8.021278136769297, 0.25446609950303234, 3.0, 25.743442752504436], ws=[23.32102747158863, 8.021278136769297, 0.25446609950303234, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -3.9405737920840735], res_norm=3.941e+00
2025-12-01 16:54:19,624 - INFO - integration_test - Dyn residual k=1: pred=[23.611366821103164, 8.096796757807262, 0.25446609950303234, 3.0, 29.98401654458851], ws=[23.611366821103164, 8.096796757807262, 0.25446609950303234, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:19,625 - INFO - integration_test - Dyn residual k=2: pred=[23.9017061706177, 8.172315378845227, 0.25446609950303234, 3.0, 29.98401654458851], ws=[23.9017061706177, 8.172315378845227, 0.25446609950303234, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:19,638 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,651 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,667 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,680 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,696 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,708 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,723 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,736 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,751 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,763 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,779 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,792 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,807 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,819 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,834 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,847 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,862 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,875 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,891 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,903 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:19,918 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:19,928 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:20,312 - INFO - integration_test - Step 91: MPC solve successful
2025-12-01 16:54:20,320 - INFO - integration_test - Step 91: Computed 10 numeric contouring constraints for visualization (s=25.443)
2025-12-01 16:54:20,320 - DEBUG - integration_test - Step 91: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:20,320 - INFO - integration_test - === Applying control at step 91 ===
2025-12-01 16:54:20,320 - INFO - integration_test -   Control dict from planner: {'a': 3.541496330563443e-10, 'w': -0.27653511295671573}
2025-12-01 16:54:20,320 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:20,320 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:20,321 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:20,321 - INFO - integration_test - Step 91 completed in 0.719s
2025-12-01 16:54:20,343 - INFO - integration_test - Step 92 (contouring until path end)
2025-12-01 16:54:20,344 - DEBUG - integration_test - Syncing planner state at step 92: vehicle_state=[23.32203458  8.01725432  0.22681259  3.00000003 25.74344276]
2025-12-01 16:54:20,345 - INFO - integration_test - Step 92: Re-initialized spline from 25.7434 to 26.0492 (vehicle at (23.32, 8.02), closest path point at (24.32, 6.94), distance=1.469m)
2025-12-01 16:54:20,345 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 16:54:20,346 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:20,346 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:20,360 - DEBUG - integration_test - Step 92: Checking path alignment: vehicle=(23.322, 8.017), path_start=(0.000, 0.000), dist=24.662m
2025-12-01 16:54:20,360 - WARNING - integration_test - Could not update reference path at step 92: x and y must have the same length
2025-12-01 16:54:20,360 - INFO - integration_test - === Calling planner.solve_mpc() at step 92 ===
2025-12-01 16:54:20,363 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:20,364 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:20,364 - INFO - integration_test - Warmstart k=0: x0=23.322034582395073 , y0=8.017254317386916 , psi0=0.22681258820736078 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 16:54:20,364 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:20,365 - INFO - integration_test - Dyn residual k=0: pred=[23.614351014194625, 8.084716185875548, 0.22681258820736078, 3.0, 26.349239008516445], ws=[23.614351014194625, 8.084716185875548, 0.22681258820736083, 3.0, 29.68401654458851], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 16:54:20,366 - INFO - integration_test - Dyn residual k=1: pred=[23.906667445994177, 8.15217805436418, 0.22681258820736083, 3.0, 29.98401654458851], ws=[23.906667445994177, 8.15217805436418, 0.22681258820736083, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:20,366 - INFO - integration_test - Dyn residual k=2: pred=[24.19898387779373, 8.219639922852812, 0.22681258820736083, 3.0, 29.98401654458851], ws=[24.19898387779373, 8.219639922852812, 0.22681258820736083, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:20,380 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,393 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,408 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,421 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,436 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,449 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,464 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,476 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,491 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,503 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,518 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,531 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,546 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,558 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,574 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,587 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,603 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,615 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,630 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,642 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:20,658 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:20,668 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:20,991 - INFO - integration_test - Step 92: MPC solve successful
2025-12-01 16:54:20,998 - INFO - integration_test - Step 92: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 16:54:20,999 - DEBUG - integration_test - Step 92: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:20,999 - INFO - integration_test - === Applying control at step 92 ===
2025-12-01 16:54:20,999 - INFO - integration_test -   Control dict from planner: {'a': 1.184036278728337e-10, 'w': 0.8000000099410731}
2025-12-01 16:54:20,999 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:20,999 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:21,000 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:21,000 - INFO - integration_test - Step 92 completed in 0.656s
2025-12-01 16:54:21,021 - INFO - integration_test - Step 93 (contouring until path end)
2025-12-01 16:54:21,023 - DEBUG - integration_test - Syncing planner state at step 93: vehicle_state=[23.61134228  8.09633067  0.30681259  3.00000003 26.34923901]
2025-12-01 16:54:21,023 - INFO - integration_test - Step 93: Re-initialized spline from 26.3492 to 26.0492 (vehicle at (23.61, 8.10), closest path point at (24.32, 6.94), distance=1.357m)
2025-12-01 16:54:21,023 - DEBUG - integration_test -   Set spline state to 26.0492
2025-12-01 16:54:21,025 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:21,025 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:21,038 - DEBUG - integration_test - Step 93: Checking path alignment: vehicle=(23.611, 8.096), path_start=(0.000, 0.000), dist=24.961m
2025-12-01 16:54:21,038 - WARNING - integration_test - Could not update reference path at step 93: x and y must have the same length
2025-12-01 16:54:21,038 - INFO - integration_test - === Calling planner.solve_mpc() at step 93 ===
2025-12-01 16:54:21,041 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:21,042 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:21,042 - INFO - integration_test - Warmstart k=0: x0=23.61134228086891 , y0=8.09633067414954 , psi0=0.3068125892014681 , v0=3.0 , spline0=26.049239008516444 , a0=0.0 , w0=0.0
2025-12-01 16:54:21,042 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:21,043 - INFO - integration_test - Dyn residual k=0: pred=[23.897332604202067, 8.186937158243097, 0.3068125892014681, 3.0, 26.349239008516445], ws=[23.897332604202067, 8.186937158243097, 0.3068125892014679, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.6653345369377348e-16, 0.0, -3.334777536072064], res_norm=3.335e+00
2025-12-01 16:54:21,044 - INFO - integration_test - Dyn residual k=1: pred=[24.183322927535222, 8.277543642336655, 0.3068125892014679, 3.0, 29.98401654458851], ws=[24.183322927535222, 8.277543642336655, 0.3068125892014679, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:21,045 - INFO - integration_test - Dyn residual k=2: pred=[24.469313250868378, 8.368150126430212, 0.3068125892014679, 3.0, 29.98401654458851], ws=[24.469313250868378, 8.368150126430212, 0.3068125892014679, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:21,059 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,072 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,088 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,100 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,116 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,129 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,144 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,156 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,171 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,184 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,199 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,212 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,226 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,239 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,254 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,266 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,281 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,294 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,309 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,321 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,336 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,346 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:21,823 - INFO - integration_test - Step 93: MPC solve successful
2025-12-01 16:54:21,830 - INFO - integration_test - Step 93: Computed 10 numeric contouring constraints for visualization (s=26.049)
2025-12-01 16:54:21,830 - DEBUG - integration_test - Step 93: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:21,830 - INFO - integration_test - === Applying control at step 93 ===
2025-12-01 16:54:21,830 - INFO - integration_test -   Control dict from planner: {'a': 3.8186832846825396e-11, 'w': 0.17737210028904007}
2025-12-01 16:54:21,831 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:21,831 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:21,831 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:21,832 - INFO - integration_test - Step 93 completed in 0.809s
2025-12-01 16:54:21,852 - INFO - integration_test - Step 94 (contouring until path end)
2025-12-01 16:54:21,853 - DEBUG - integration_test - Syncing planner state at step 94: vehicle_state=[23.89651408  8.18946868  0.3245498   3.00000003 26.34923901]
2025-12-01 16:54:21,854 - INFO - integration_test - Step 94: Re-initialized spline from 26.3492 to 26.6550 (vehicle at (23.90, 8.19), closest path point at (24.77, 7.27), distance=1.273m)
2025-12-01 16:54:21,854 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 16:54:21,855 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:21,856 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:21,869 - DEBUG - integration_test - Step 94: Checking path alignment: vehicle=(23.897, 8.189), path_start=(0.000, 0.000), dist=25.261m
2025-12-01 16:54:21,870 - WARNING - integration_test - Could not update reference path at step 94: x and y must have the same length
2025-12-01 16:54:21,870 - INFO - integration_test - === Calling planner.solve_mpc() at step 94 ===
2025-12-01 16:54:21,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:21,874 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:21,874 - INFO - integration_test - Warmstart k=0: x0=23.896514079409933 , y0=8.18946867704235 , psi0=0.3245497992303721 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 16:54:21,874 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:21,875 - INFO - integration_test - Dyn residual k=0: pred=[24.18085239444068, 8.285133313170203, 0.3245497992303721, 3.0, 26.95503526452846], ws=[24.18085239444068, 8.285133313170203, 0.32454979923037186, 3.0, 29.68401654458851], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 16:54:21,876 - INFO - integration_test - Dyn residual k=1: pred=[24.46519070947143, 8.380797949298055, 0.32454979923037186, 3.0, 29.98401654458851], ws=[24.46519070947143, 8.380797949298055, 0.32454979923037186, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:21,877 - INFO - integration_test - Dyn residual k=2: pred=[24.749529024502177, 8.476462585425907, 0.32454979923037186, 3.0, 29.98401654458851], ws=[24.749529024502177, 8.476462585425907, 0.32454979923037186, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:21,891 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,904 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,920 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,933 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,948 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,960 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:21,976 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:21,989 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,004 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,017 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,032 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,045 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,060 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,072 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,088 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,101 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,116 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,129 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,144 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,156 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:22,171 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:22,182 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:23,258 - INFO - integration_test - Step 94: MPC solve successful
2025-12-01 16:54:23,266 - INFO - integration_test - Step 94: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 16:54:23,266 - DEBUG - integration_test - Step 94: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:23,266 - INFO - integration_test - === Applying control at step 94 ===
2025-12-01 16:54:23,266 - INFO - integration_test -   Control dict from planner: {'a': 1.3684092908872878e-11, 'w': 0.6427353711151135}
2025-12-01 16:54:23,266 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:23,266 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:23,267 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:23,268 - INFO - integration_test - Step 94 completed in 1.415s
2025-12-01 16:54:23,292 - INFO - integration_test - Step 95 (contouring until path end)
2025-12-01 16:54:23,293 - DEBUG - integration_test - Syncing planner state at step 95: vehicle_state=[24.17758337  8.29420203  0.38882334  3.00000003 26.95503527]
2025-12-01 16:54:23,293 - INFO - integration_test - Step 95: Re-initialized spline from 26.9550 to 26.6550 (vehicle at (24.18, 8.29), closest path point at (24.77, 7.27), distance=1.187m)
2025-12-01 16:54:23,294 - DEBUG - integration_test -   Set spline state to 26.6550
2025-12-01 16:54:23,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:23,295 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:23,309 - DEBUG - integration_test - Step 95: Checking path alignment: vehicle=(24.178, 8.294), path_start=(0.000, 0.000), dist=25.561m
2025-12-01 16:54:23,309 - WARNING - integration_test - Could not update reference path at step 95: x and y must have the same length
2025-12-01 16:54:23,309 - INFO - integration_test - === Calling planner.solve_mpc() at step 95 ===
2025-12-01 16:54:23,312 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:23,313 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:23,313 - INFO - integration_test - Warmstart k=0: x0=24.177583374222657 , y0=8.294202031273478 , psi0=0.38882333634188343 , v0=3.0 , spline0=26.655035264528458 , a0=0.0 , w0=0.0
2025-12-01 16:54:23,313 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:23,314 - INFO - integration_test - Dyn residual k=0: pred=[24.455190106230624, 8.407931984864677, 0.38882333634188343, 3.0, 26.95503526452846], ws=[24.455190106230624, 8.407931984864677, 0.3888233363418836, 3.0, 29.68401654458851], res=[0.0, 0.0, -1.6653345369377348e-16, 0.0, -2.728981280060051], res_norm=2.729e+00
2025-12-01 16:54:23,315 - INFO - integration_test - Dyn residual k=1: pred=[24.732796838238592, 8.521661938455875, 0.3888233363418836, 3.0, 29.98401654458851], ws=[24.732796838238592, 8.521661938455875, 0.3888233363418836, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:23,316 - INFO - integration_test - Dyn residual k=2: pred=[25.01040357024656, 8.635391892047073, 0.3888233363418836, 3.0, 29.98401654458851], ws=[25.01040357024656, 8.635391892047073, 0.3888233363418836, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:23,330 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,343 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,360 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,374 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,391 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,406 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,422 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,436 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,453 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,466 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,483 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,496 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,511 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,524 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,539 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,551 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,566 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,579 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,594 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,607 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:23,622 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:23,632 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:23,925 - INFO - integration_test - Step 95: MPC solve successful
2025-12-01 16:54:23,933 - INFO - integration_test - Step 95: Computed 10 numeric contouring constraints for visualization (s=26.655)
2025-12-01 16:54:23,933 - DEBUG - integration_test - Step 95: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:23,933 - INFO - integration_test - === Applying control at step 95 ===
2025-12-01 16:54:23,933 - INFO - integration_test -   Control dict from planner: {'a': 3.872494296980568e-12, 'w': -0.33389685758886556}
2025-12-01 16:54:23,933 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:23,933 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:23,934 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:23,935 - INFO - integration_test - Step 95 completed in 0.642s
2025-12-01 16:54:23,957 - INFO - integration_test - Step 96 (contouring until path end)
2025-12-01 16:54:23,959 - DEBUG - integration_test - Syncing planner state at step 96: vehicle_state=[24.45703706  8.40327668  0.35543365  3.00000003 26.95503527]
2025-12-01 16:54:23,959 - INFO - integration_test - Step 96: Re-initialized spline from 26.9550 to 27.2608 (vehicle at (24.46, 8.40), closest path point at (25.23, 7.61), distance=1.107m)
2025-12-01 16:54:23,959 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 16:54:23,961 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:23,961 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:23,974 - DEBUG - integration_test - Step 96: Checking path alignment: vehicle=(24.457, 8.403), path_start=(0.000, 0.000), dist=25.860m
2025-12-01 16:54:23,975 - WARNING - integration_test - Could not update reference path at step 96: x and y must have the same length
2025-12-01 16:54:23,975 - INFO - integration_test - === Calling planner.solve_mpc() at step 96 ===
2025-12-01 16:54:23,978 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:23,979 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:23,979 - INFO - integration_test - Warmstart k=0: x0=24.4570370567115 , y0=8.403276684599799 , psi0=0.35543365058299686 , v0=3.0 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 16:54:23,979 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:23,980 - INFO - integration_test - Dyn residual k=0: pred=[24.738285757080302, 8.507675767645866, 0.35543365058299686, 3.0, 27.560831520540468], ws=[24.738285757080302, 8.507675767645866, 0.3554336505829969, 3.0, 29.68401654458851], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.123185024048041], res_norm=2.123e+00
2025-12-01 16:54:23,981 - INFO - integration_test - Dyn residual k=1: pred=[25.019534457449105, 8.612074850691933, 0.3554336505829969, 3.0, 29.98401654458851], ws=[25.019534457449105, 8.612074850691933, 0.3554336505829969, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:23,981 - INFO - integration_test - Dyn residual k=2: pred=[25.300783157817907, 8.716473933738, 0.3554336505829969, 3.0, 29.98401654458851], ws=[25.300783157817907, 8.716473933738, 0.3554336505829969, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:23,996 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,008 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,024 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,036 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,052 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,064 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,080 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,093 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,108 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,120 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,135 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,148 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,163 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,176 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,192 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,204 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,219 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,232 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,259 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:24,274 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:24,285 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:25,091 - INFO - integration_test - Step 96: MPC solve successful
2025-12-01 16:54:25,099 - INFO - integration_test - Step 96: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 16:54:25,099 - DEBUG - integration_test - Step 96: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:25,099 - INFO - integration_test - === Applying control at step 96 ===
2025-12-01 16:54:25,099 - INFO - integration_test -   Control dict from planner: {'a': 1.5524423457097077e-12, 'w': 0.5238578989497135}
2025-12-01 16:54:25,099 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:25,099 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:25,100 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:25,101 - INFO - integration_test - Step 96 completed in 1.142s
2025-12-01 16:54:25,122 - INFO - integration_test - Step 97 (contouring until path end)
2025-12-01 16:54:25,123 - DEBUG - integration_test - Syncing planner state at step 97: vehicle_state=[24.73542325  8.51499306  0.40781944  3.00000003 27.56083152]
2025-12-01 16:54:25,123 - INFO - integration_test - Step 97: Re-initialized spline from 27.5608 to 27.2608 (vehicle at (24.74, 8.51), closest path point at (25.23, 7.61), distance=1.033m)
2025-12-01 16:54:25,123 - DEBUG - integration_test -   Set spline state to 27.2608
2025-12-01 16:54:25,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:25,125 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:25,138 - DEBUG - integration_test - Step 97: Checking path alignment: vehicle=(24.735, 8.515), path_start=(0.000, 0.000), dist=26.160m
2025-12-01 16:54:25,139 - WARNING - integration_test - Could not update reference path at step 97: x and y must have the same length
2025-12-01 16:54:25,139 - INFO - integration_test - === Calling planner.solve_mpc() at step 97 ===
2025-12-01 16:54:25,142 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:25,143 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:25,143 - INFO - integration_test - Warmstart k=0: x0=24.735423252215803 , y0=8.514993058838813 , psi0=0.4078194404779682 , v0=3.0 , spline0=27.260831520540467 , a0=0.0 , w0=0.0
2025-12-01 16:54:25,143 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:25,144 - INFO - integration_test - Dyn residual k=0: pred=[25.01081960214972, 8.633975622448258, 0.4078194404779682, 3.0, 27.560831520540468], ws=[25.01081960214972, 8.633975622448258, 0.40781944047796825, 3.0, 29.68401654458851], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, -2.123185024048041], res_norm=2.123e+00
2025-12-01 16:54:25,145 - INFO - integration_test - Dyn residual k=1: pred=[25.286215952083637, 8.752958186057702, 0.40781944047796825, 3.0, 29.98401654458851], ws=[25.286215952083637, 8.752958186057702, 0.40781944047796825, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:25,145 - INFO - integration_test - Dyn residual k=2: pred=[25.561612302017554, 8.871940749667147, 0.40781944047796825, 3.0, 29.98401654458851], ws=[25.561612302017554, 8.871940749667147, 0.40781944047796825, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:25,159 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,172 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,189 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,202 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,219 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,233 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,251 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,265 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,283 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,297 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,314 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,328 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,344 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,356 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,372 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,384 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,400 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,413 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,428 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,441 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,456 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,467 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:25,740 - INFO - integration_test - Step 97: MPC solve successful
2025-12-01 16:54:25,749 - INFO - integration_test - Step 97: Computed 10 numeric contouring constraints for visualization (s=27.261)
2025-12-01 16:54:25,749 - DEBUG - integration_test - Step 97: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:25,749 - INFO - integration_test - === Applying control at step 97 ===
2025-12-01 16:54:25,749 - INFO - integration_test -   Control dict from planner: {'a': 1.0390721819407582e-12, 'w': -0.4098687511716809}
2025-12-01 16:54:25,749 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:25,749 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:25,751 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:25,751 - INFO - integration_test - Step 97 completed in 0.628s
2025-12-01 16:54:25,778 - INFO - integration_test - Step 98 (contouring until path end)
2025-12-01 16:54:25,779 - DEBUG - integration_test - Syncing planner state at step 98: vehicle_state=[25.01318052  8.62829929  0.36683257  3.00000003 27.56083152]
2025-12-01 16:54:25,780 - INFO - integration_test - Step 98: Re-initialized spline from 27.5608 to 27.8666 (vehicle at (25.01, 8.63), closest path point at (25.67, 7.95), distance=0.946m)
2025-12-01 16:54:25,780 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 16:54:25,781 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:25,781 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:25,796 - DEBUG - integration_test - Step 98: Checking path alignment: vehicle=(25.013, 8.628), path_start=(0.000, 0.000), dist=26.460m
2025-12-01 16:54:25,796 - WARNING - integration_test - Could not update reference path at step 98: x and y must have the same length
2025-12-01 16:54:25,796 - INFO - integration_test - === Calling planner.solve_mpc() at step 98 ===
2025-12-01 16:54:25,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:25,801 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:25,801 - INFO - integration_test - Warmstart k=0: x0=25.013180524591245 , y0=8.628299285034355 , psi0=0.3668325653608001 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 16:54:25,801 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:25,802 - INFO - integration_test - Dyn residual k=0: pred=[25.293220942617246, 8.73589744613306, 0.3668325653608001, 3.0, 28.166627776552478], ws=[25.293220942617246, 8.73589744613306, 0.3668325653608, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 16:54:25,803 - INFO - integration_test - Dyn residual k=1: pred=[25.573261360643247, 8.843495607231766, 0.3668325653608, 3.0, 29.98401654458851], ws=[25.573261360643247, 8.843495607231766, 0.3668325653608, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:25,803 - INFO - integration_test - Dyn residual k=2: pred=[25.85330177866925, 8.951093768330471, 0.3668325653608, 3.0, 29.98401654458851], ws=[25.85330177866925, 8.951093768330471, 0.3668325653608, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:25,818 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,831 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,846 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,859 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,877 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,890 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,906 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,919 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,935 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,948 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,965 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:25,979 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:25,994 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,007 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,022 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,035 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,050 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,063 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,078 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,091 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,107 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,117 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:26,403 - INFO - integration_test - Step 98: MPC solve successful
2025-12-01 16:54:26,411 - INFO - integration_test - Step 98: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 16:54:26,411 - DEBUG - integration_test - Step 98: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:26,412 - INFO - integration_test - === Applying control at step 98 ===
2025-12-01 16:54:26,412 - INFO - integration_test -   Control dict from planner: {'a': -4.0754257303754224e-13, 'w': 0.5869949947446739}
2025-12-01 16:54:26,412 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:26,412 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:26,413 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:26,413 - INFO - integration_test - Step 98 completed in 0.634s
2025-12-01 16:54:26,435 - INFO - integration_test - Step 99 (contouring until path end)
2025-12-01 16:54:26,436 - DEBUG - integration_test - Syncing planner state at step 99: vehicle_state=[25.28990308  8.74405242  0.42553206  3.00000003 28.16662778]
2025-12-01 16:54:26,437 - INFO - integration_test - Step 99: Re-initialized spline from 28.1666 to 27.8666 (vehicle at (25.29, 8.74), closest path point at (25.67, 7.95), distance=0.882m)
2025-12-01 16:54:26,437 - DEBUG - integration_test -   Set spline state to 27.8666
2025-12-01 16:54:26,439 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:26,439 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:26,452 - DEBUG - integration_test - Step 99: Checking path alignment: vehicle=(25.290, 8.744), path_start=(0.000, 0.000), dist=26.759m
2025-12-01 16:54:26,453 - WARNING - integration_test - Could not update reference path at step 99: x and y must have the same length
2025-12-01 16:54:26,453 - INFO - integration_test - === Calling planner.solve_mpc() at step 99 ===
2025-12-01 16:54:26,456 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:26,457 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:26,457 - INFO - integration_test - Warmstart k=0: x0=25.28990308245855 , y0=8.744052424267586 , psi0=0.4255320648352675 , v0=3.0 , spline0=27.866627776552477 , a0=0.0 , w0=0.0
2025-12-01 16:54:26,457 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:26,458 - INFO - integration_test - Dyn residual k=0: pred=[25.56314884924492, 8.867894060776996, 0.4255320648352675, 3.0, 28.166627776552478], ws=[25.56314884924492, 8.867894060776996, 0.4255320648352674, 3.0, 29.68401654458851], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -1.5173887680360316], res_norm=1.517e+00
2025-12-01 16:54:26,459 - INFO - integration_test - Dyn residual k=1: pred=[25.836394616031292, 8.991735697286405, 0.4255320648352674, 3.0, 29.98401654458851], ws=[25.836394616031292, 8.991735697286405, 0.4255320648352674, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:26,459 - INFO - integration_test - Dyn residual k=2: pred=[26.109640382817663, 9.115577333795814, 0.4255320648352674, 3.0, 29.98401654458851], ws=[26.109640382817663, 9.115577333795814, 0.4255320648352674, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:26,474 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,487 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,503 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,516 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,531 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,543 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,559 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,571 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,600 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,615 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,628 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,643 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,655 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,670 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,683 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,698 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,711 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,726 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,739 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:26,754 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:26,764 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:27,055 - INFO - integration_test - Step 99: MPC solve successful
2025-12-01 16:54:27,063 - INFO - integration_test - Step 99: Computed 10 numeric contouring constraints for visualization (s=27.867)
2025-12-01 16:54:27,063 - DEBUG - integration_test - Step 99: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:27,063 - INFO - integration_test - === Applying control at step 99 ===
2025-12-01 16:54:27,063 - INFO - integration_test -   Control dict from planner: {'a': -4.544290528063204e-12, 'w': -0.8000000098615446}
2025-12-01 16:54:27,064 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:27,064 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:27,064 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:27,065 - INFO - integration_test - Step 99 completed in 0.629s
2025-12-01 16:54:27,088 - INFO - integration_test - Step 100 (contouring until path end)
2025-12-01 16:54:27,089 - DEBUG - integration_test - Syncing planner state at step 100: vehicle_state=[25.56780851  8.85683801  0.34553206  3.00000003 28.16662778]
2025-12-01 16:54:27,090 - INFO - integration_test - Step 100: Re-initialized spline from 28.1666 to 28.4724 (vehicle at (25.57, 8.86), closest path point at (26.12, 8.30), distance=0.784m)
2025-12-01 16:54:27,090 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 16:54:27,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:27,092 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:27,105 - DEBUG - integration_test - Step 100: Checking path alignment: vehicle=(25.568, 8.857), path_start=(0.000, 0.000), dist=27.058m
2025-12-01 16:54:27,105 - WARNING - integration_test - Could not update reference path at step 100: x and y must have the same length
2025-12-01 16:54:27,105 - INFO - integration_test - === Calling planner.solve_mpc() at step 100 ===
2025-12-01 16:54:27,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:27,109 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:27,109 - INFO - integration_test - Warmstart k=0: x0=25.567808511202347 , y0=8.856838005218796 , psi0=0.34553206384911306 , v0=3.0 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 16:54:27,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:27,110 - INFO - integration_test - Dyn residual k=0: pred=[25.850077124357462, 8.958447207693219, 0.34553206384911306, 3.0, 28.772424032564487], ws=[25.850077124357462, 8.958447207693219, 0.34553206384911306, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.911592512024022], res_norm=9.116e-01
2025-12-01 16:54:27,111 - INFO - integration_test - Dyn residual k=1: pred=[26.132345737512576, 9.060056410167642, 0.34553206384911306, 3.0, 29.98401654458851], ws=[26.132345737512576, 9.060056410167642, 0.34553206384911306, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:27,111 - INFO - integration_test - Dyn residual k=2: pred=[26.41461435066769, 9.161665612642064, 0.34553206384911306, 3.0, 29.98401654458851], ws=[26.41461435066769, 9.161665612642064, 0.34553206384911306, 3.0, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.3000000000000007], res_norm=3.000e-01
2025-12-01 16:54:27,126 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,139 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,154 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,167 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,183 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,196 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,211 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,223 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,238 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,251 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,266 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,279 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,295 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,307 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,322 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,334 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,349 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,362 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,377 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,390 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,405 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,416 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:27,668 - INFO - integration_test - Step 100: MPC solve successful
2025-12-01 16:54:27,675 - INFO - integration_test - Step 100: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 16:54:27,676 - DEBUG - integration_test - Step 100: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:27,676 - INFO - integration_test - === Applying control at step 100 ===
2025-12-01 16:54:27,676 - INFO - integration_test -   Control dict from planner: {'a': -1.999999940485087, 'w': -0.7999977935069991}
2025-12-01 16:54:27,676 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:27,676 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:27,677 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:27,677 - INFO - integration_test - Step 100 completed in 0.589s
2025-12-01 16:54:27,702 - INFO - integration_test - Step 101 (contouring until path end)
2025-12-01 16:54:27,703 - DEBUG - integration_test - Syncing planner state at step 101: vehicle_state=[25.84426391  8.94417409  0.26553228  2.80000004 28.75242404]
2025-12-01 16:54:27,704 - INFO - integration_test - Step 101: Re-initialized spline from 28.7524 to 28.4724 (vehicle at (25.84, 8.94), closest path point at (26.12, 8.30), distance=0.702m)
2025-12-01 16:54:27,704 - DEBUG - integration_test -   Set spline state to 28.4724
2025-12-01 16:54:27,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:27,706 - DEBUG - integration_test - Error updating modules: 'x'
2025-12-01 16:54:27,719 - DEBUG - integration_test - Step 101: Checking path alignment: vehicle=(25.844, 8.944), path_start=(0.000, 0.000), dist=27.348m
2025-12-01 16:54:27,720 - WARNING - integration_test - Could not update reference path at step 101: x and y must have the same length
2025-12-01 16:54:27,720 - INFO - integration_test - === Calling planner.solve_mpc() at step 101 ===
2025-12-01 16:54:27,722 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2025-12-01 16:54:27,724 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['contouring_constraints', 'linearized_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2025-12-01 16:54:27,724 - INFO - integration_test - Warmstart k=0: x0=25.844263909508403 , y0=8.944174087682455 , psi0=0.26553228449841315 , v0=2.8000000359507045 , spline0=28.472424032564486 , a0=0.0 , w0=0.0
2025-12-01 16:54:27,724 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2025-12-01 16:54:27,724 - INFO - integration_test - Dyn residual k=0: pred=[26.114450740076816, 9.017652510369903, 0.26553228449841315, 2.8000000359507045, 28.752424036159557], ws=[26.114450740076816, 9.017652510369903, 0.26553228449841315, 2.8000000359507045, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, -0.9315925084289525], res_norm=9.316e-01
2025-12-01 16:54:27,725 - INFO - integration_test - Dyn residual k=1: pred=[26.38463757064523, 9.09113093305735, 0.26553228449841315, 2.8000000359507045, 29.96401654818358], ws=[26.38463757064523, 9.09113093305735, 0.26553228449841315, 2.8000000359507045, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000359507027], res_norm=2.800e-01
2025-12-01 16:54:27,726 - INFO - integration_test - Dyn residual k=2: pred=[26.65482440121364, 9.164609355744798, 0.26553228449841315, 2.8000000359507045, 29.96401654818358], ws=[26.65482440121364, 9.164609355744798, 0.26553228449841315, 2.8000000359507045, 29.68401654458851], res=[0.0, 0.0, 0.0, 0.0, 0.28000000359507027], res_norm=2.800e-01
2025-12-01 16:54:27,740 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,753 - INFO - integration_test - Stage 0: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,768 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,781 - INFO - integration_test - Stage 1: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,798 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,810 - INFO - integration_test - Stage 2: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,825 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,838 - INFO - integration_test - Stage 3: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,853 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,866 - INFO - integration_test - Stage 4: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,881 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,894 - INFO - integration_test - Stage 5: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,909 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,921 - INFO - integration_test - Stage 6: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,936 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,948 - INFO - integration_test - Stage 7: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,964 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:27,977 - INFO - integration_test - Stage 8: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:27,992 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:28,005 - INFO - integration_test - Stage 9: constraints count=4 (linearized=2, contouring=2, other=0)
2025-12-01 16:54:28,020 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2025-12-01 16:54:28,030 - INFO - integration_test - Stage 10: constraints count=2 (linearized=0, contouring=2, other=0)
2025-12-01 16:54:28,309 - INFO - integration_test - Step 101: MPC solve successful
2025-12-01 16:54:28,317 - INFO - integration_test - Step 101: Computed 10 numeric contouring constraints for visualization (s=28.472)
2025-12-01 16:54:28,318 - DEBUG - integration_test - Step 101: Captured 10 contouring constraint halfspaces for visualization
2025-12-01 16:54:28,318 - INFO - integration_test - === Applying control at step 101 ===
2025-12-01 16:54:28,318 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199980725, 'w': 0.569554705411772}
2025-12-01 16:54:28,318 - INFO - integration_test -   Expected input names: ['a', 'w']
2025-12-01 16:54:28,318 - INFO - integration_test -   Planner output success: True
2025-12-01 16:54:28,319 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2025-12-01 16:54:28,319 - INFO - integration_test - Goal reached at step 101!
2025-12-01 16:54:28,319 - INFO - integration_test - Step 101 completed in 0.616s
2025-12-01 16:54:28,342 - INFO - integration_test - Goal reached at step 101, added 3 extra frames for visualization
2025-12-01 16:54:28,343 - INFO - integration_test - Saving test results...
2025-12-01 16:54:28,344 - INFO - integration_test - Saved 106 vehicle states to test_outputs/20251201_165310_contouring_contouring_linear_contouring_unicycle/vehicle_states.csv
2025-12-01 16:54:28,344 - INFO - integration_test - Saved obstacle summary to test_outputs/20251201_165310_contouring_contouring_linear_contouring_unicycle/obstacle_summary.csv
2025-12-01 16:54:28,344 - INFO - integration_test - Saved 113 states for obstacle 0 to test_outputs/20251201_165310_contouring_contouring_linear_contouring_unicycle/obstacle_0_detailed_states.csv
2025-12-01 16:54:28,345 - INFO - integration_test - Saved 113 states for obstacle 1 to test_outputs/20251201_165310_contouring_contouring_linear_contouring_unicycle/obstacle_1_detailed_states.csv
2025-12-01 16:54:28,345 - INFO - integration_test - Saved state history: 106 vehicle states, 2 obstacles
2025-12-01 16:54:28,345 - INFO - integration_test - Creating animation...
2025-12-01 16:54:28,364 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 16:54:28,373 - DEBUG - integration_test - Frame 0: Drawing 10 contouring constraint halfspaces
2025-12-01 16:54:28,454 - DEBUG - integration_test - Frame 1: Drawing 10 contouring constraint halfspaces
2025-12-01 16:54:28,519 - DEBUG - integration_test - Frame 2: Drawing 10 contouring constraint halfspaces
2025-12-01 16:54:40,897 - INFO - integration_test - Saved animation with 106 frames at 10.00 fps to test_outputs/20251201_165310_contouring_contouring_linear_contouring_unicycle/animation.gif (duration: 10.60s, size: 1225071 bytes)
2025-12-01 16:54:40,924 - INFO - integration_test - Animation created successfully
2025-12-01 16:54:40,924 - INFO - integration_test - Test completed successfully
