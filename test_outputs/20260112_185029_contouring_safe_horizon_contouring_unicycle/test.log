2026-01-12 18:50:29,437 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-12 18:50:29,437 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-12 18:50:29,437 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-12 18:50:29,437 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-12 18:50:29,438 - INFO - integration_test - Creating objective module: contouring
2026-01-12 18:50:29,446 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-12 18:50:29,446 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-12 18:50:29,446 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-12 18:50:29,453 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-12 18:50:29,453 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-12 18:50:29,459 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-12 18:50:29,459 - INFO - integration_test - Created 2 constraint module(s)
2026-01-12 18:50:29,459 - INFO - integration_test - Safe Horizon diagnostics enabled for this test, output folder: test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle
2026-01-12 18:50:29,479 - INFO - integration_test - Setting solver on all modules...
2026-01-12 18:50:29,479 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-12 18:50:29,479 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-12 18:50:29,479 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-12 18:50:29,479 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-12 18:50:29,479 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-12 18:50:29,479 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-12 18:50:29,481 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-12 18:50:29,481 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-12 18:50:29,482 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-12 18:50:29,482 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-12 18:50:29,482 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-12 18:50:29,482 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-12 18:50:29,482 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-12 18:50:29,483 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-12 18:50:29,483 - INFO - integration_test - Added spline variable: 0.0000
2026-01-12 18:50:29,483 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-12 18:50:29,483 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-12 18:50:29,483 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-12 18:50:29,483 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-12 18:50:29,483 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-12 18:50:29,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:29,509 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-12 18:50:29,509 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-12 18:50:29,514 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:29,530 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:29,530 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-12 18:50:29,530 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:29,531 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.1, 0.0, 0.0, 1.0, 0.051515151515151514], res=[0.0, 0.0, 0.0, 0.0, 0.04848484848484849], res_norm=4.848e-02
2026-01-12 18:50:29,532 - INFO - integration_test - Dyn residual k=1: pred=[0.2, 0.0, 0.0, 1.0, 0.15151515151515152], ws=[0.2, 0.0, 0.0, 1.0, 0.10530806991582416], res=[0.0, 0.0, 0.0, 0.0, 0.04620708159932736], res_norm=4.621e-02
2026-01-12 18:50:29,534 - INFO - integration_test - Dyn residual k=2: pred=[0.30000000000000004, 0.0, 0.0, 1.0, 0.20530806991582418], ws=[0.30000000000000004, 0.0, 0.0, 1.0, 0.16177874499601194], res=[0.0, 0.0, 0.0, 0.0, 0.043529324919812235], res_norm=4.353e-02
2026-01-12 18:50:29,553 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,647 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:29,667 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,682 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:29,701 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,715 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:29,734 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,749 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:29,770 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,784 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:29,801 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,815 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:29,832 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,847 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:29,864 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,878 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:29,896 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,910 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:29,927 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,942 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:29,960 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:29,973 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:31,307 - INFO - integration_test - Step 0: MPC solve successful
2026-01-12 18:50:31,570 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-12 18:50:31,571 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:31,571 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-12 18:50:31,571 - INFO - integration_test - === Applying control at step 0 ===
2026-01-12 18:50:31,571 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999903142502, 'w': 0.799999483713939}
2026-01-12 18:50:31,571 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:31,571 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:31,573 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:31,573 - INFO - integration_test - Step 0 completed in 2.090s
2026-01-12 18:50:31,586 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-12 18:50:31,587 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.07999995 1.2        0.12      ]
2026-01-12 18:50:31,588 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-12 18:50:31,588 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-12 18:50:31,589 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:31,671 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-12 18:50:31,671 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-12 18:50:31,732 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:31,743 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:31,743 - INFO - integration_test - Warmstart k=0: x0=0.10987737539105888 , y0=0.004530842129684506 , psi0=0.0799999483713939 , v0=1.199999999031425 , spline0=0.05171717171619336 , a0=0.0 , w0=0.0
2026-01-12 18:50:31,743 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:31,745 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358054593144, 0.014120599222626965, 0.0799999483713939, 1.199999999031425, 0.17171717161933586], ws=[0.22949358054593144, 0.014120599222626965, 0.07999994837139379, 1.199999999031425, 0.10627058848510937], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.0654465831342265], res_norm=6.545e-02
2026-01-12 18:50:31,746 - INFO - integration_test - Dyn residual k=1: pred=[0.349109785700804, 0.02371035631556941, 0.07999994837139379, 1.199999999031425, 0.22627058838825187], ws=[0.349109785700804, 0.023710356315569413, 0.07999994837139379, 1.199999999031425, 0.21885435613169435], res=[0.0, -3.469446951953614e-18, 0.0, 0.0, 0.00741623225655752], res_norm=7.416e-03
2026-01-12 18:50:31,747 - INFO - integration_test - Dyn residual k=2: pred=[0.4687259908556765, 0.033300113408511856, 0.07999994837139379, 1.199999999031425, 0.3388543560348368], ws=[0.4687259908556765, 0.033300113408511856, 0.07999994837139379, 1.199999999031425, 0.2822950990152304], res=[0.0, 0.0, 0.0, 0.0, 0.0565592570196064], res_norm=5.656e-02
2026-01-12 18:50:31,763 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:31,843 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:31,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:31,872 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:31,889 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:31,901 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:31,917 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:31,930 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:31,946 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:31,958 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:31,975 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:31,992 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,016 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,034 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,055 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,071 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,098 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,120 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,147 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,167 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,194 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,212 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,364 - INFO - integration_test - Step 1: MPC solve successful
2026-01-12 18:50:32,423 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-12 18:50:32,423 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:32,423 - INFO - integration_test - === Applying control at step 1 ===
2026-01-12 18:50:32,423 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018993867, 'w': 0.7999999917470677}
2026-01-12 18:50:32,423 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:32,423 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:32,425 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:32,426 - INFO - integration_test - Step 1 completed in 0.839s
2026-01-12 18:50:32,445 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-12 18:50:32,445 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022161 0.15999995 1.4        0.26      ]
2026-01-12 18:50:32,446 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-12 18:50:32,446 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-12 18:50:32,448 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:32,559 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-12 18:50:32,559 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-12 18:50:32,635 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:32,650 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:32,650 - INFO - integration_test - Warmstart k=0: x0=0.23889212871862728 , y0=0.020221612080769287 , psi0=0.15999994754610067 , v0=1.4000000009308116 , spline0=0.15939393939382496 , a0=0.0 , w0=0.0
2026-01-12 18:50:32,650 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:32,651 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039496530677, 0.042526153771844336, 0.15999994754610067, 1.4000000009308116, 0.2993939394869061], ws=[0.3771039496530677, 0.042526153771844336, 0.1599999475461007, 1.4000000009308116, 0.21989439508533812], res=[0.0, 0.0, -2.7755575615628914e-17, 0.0, 0.079499544401568], res_norm=7.950e-02
2026-01-12 18:50:32,653 - INFO - integration_test - Dyn residual k=1: pred=[0.5153157705875081, 0.06483069546291939, 0.1599999475461007, 1.4000000009308116, 0.35989439517841926], ws=[0.5153157705875081, 0.06483069546291939, 0.1599999475461007, 1.4000000009308116, 0.2850309021848837], res=[0.0, 0.0, 0.0, 0.0, 0.07486349299353556], res_norm=7.486e-02
2026-01-12 18:50:32,654 - INFO - integration_test - Dyn residual k=2: pred=[0.6535275915219485, 0.08713523715399445, 0.1599999475461007, 1.4000000009308116, 0.42503090227796486], ws=[0.6535275915219485, 0.08713523715399445, 0.1599999475461007, 1.4000000009308116, 0.4146696911017055], res=[0.0, 0.0, 0.0, 0.0, 0.010361211176259377], res_norm=1.036e-02
2026-01-12 18:50:32,676 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,771 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:32,791 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,807 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:32,833 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,850 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:32,872 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,891 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:32,914 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,929 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,949 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,964 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:32,982 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:32,997 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:33,016 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,031 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:33,056 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,079 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:33,107 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,127 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:33,145 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,159 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:33,370 - INFO - integration_test - Step 2: MPC solve successful
2026-01-12 18:50:33,482 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-12 18:50:33,483 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:33,483 - INFO - integration_test - === Applying control at step 2 ===
2026-01-12 18:50:33,483 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019969703, 'w': 0.800000009554609}
2026-01-12 18:50:33,483 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:33,483 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:33,486 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:33,487 - INFO - integration_test - Step 2 completed in 1.042s
2026-01-12 18:50:33,509 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-12 18:50:33,510 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.0501447  0.23999995 1.6        0.42      ]
2026-01-12 18:50:33,511 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-12 18:50:33,511 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-12 18:50:33,513 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:33,650 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-12 18:50:33,651 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-12 18:50:33,762 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:33,777 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:33,777 - INFO - integration_test - Warmstart k=0: x0=0.3858364375203746 , y0=0.05014469908938899 , psi0=0.2399999485015616 , v0=1.6000000029277819 , spline0=0.2189898990015758 , a0=0.0 , w0=0.0
2026-01-12 18:50:33,777 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:33,779 - INFO - integration_test - Dyn residual k=0: pred=[0.541250515739696, 0.08817711138374239, 0.2399999485015616, 1.6000000029277819, 0.378989899294354], ws=[0.541250515739696, 0.08817711138374239, 0.2399999485015618, 1.6000000029277819, 0.3421640093423796], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, 0.03682588995197439], res_norm=3.683e-02
2026-01-12 18:50:33,780 - INFO - integration_test - Dyn residual k=1: pred=[0.6966645939590173, 0.12620952367809582, 0.2399999485015618, 1.6000000029277819, 0.5021640096351578], ws=[0.6966645939590173, 0.12620952367809582, 0.2399999485015618, 1.6000000029277819, 0.4166868340841541], res=[0.0, 0.0, 0.0, 0.0, 0.08547717555100376], res_norm=8.548e-02
2026-01-12 18:50:33,782 - INFO - integration_test - Dyn residual k=2: pred=[0.8520786721783385, 0.16424193597244924, 0.2399999485015618, 1.6000000029277819, 0.5766868343769322], ws=[0.8520786721783387, 0.16424193597244924, 0.2399999485015618, 1.6000000029277819, 0.7399794738944075], res=[-1.1102230246251565e-16, 0.0, 0.0, 0.0, -0.1632926395174753], res_norm=1.633e-01
2026-01-12 18:50:33,803 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,900 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:33,923 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,940 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:33,962 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:33,978 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:34,000 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,015 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:34,036 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,051 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,070 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,084 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,103 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,118 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,136 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,151 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,170 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,185 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,205 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,219 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,237 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,252 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,426 - INFO - integration_test - Step 3: MPC solve successful
2026-01-12 18:50:34,486 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-12 18:50:34,486 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:34,486 - INFO - integration_test - === Applying control at step 3 ===
2026-01-12 18:50:34,486 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019316054, 'w': 0.7999999918416483}
2026-01-12 18:50:34,487 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:34,487 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:34,488 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:34,489 - INFO - integration_test - Step 3 completed in 0.979s
2026-01-12 18:50:34,504 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-12 18:50:34,505 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913547 0.09724073 0.31999995 1.8        0.6       ]
2026-01-12 18:50:34,505 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.455m, drift=0.006m)
2026-01-12 18:50:34,505 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-12 18:50:34,506 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:34,598 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-12 18:50:34,598 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-12 18:50:34,675 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:34,688 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:34,688 - INFO - integration_test - Warmstart k=0: x0=0.5491354652203763 , y0=0.09724073108136463 , psi0=0.3199999476857264 , v0=1.8000000048593874 , spline0=0.3393939394409055 , a0=0.0 , w0=0.0
2026-01-12 18:50:34,688 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:34,690 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978438986234, 0.15386270320658477, 0.3199999476857264, 1.8000000048593874, 0.5193939399268442], ws=[0.7199978438986234, 0.15386270320658477, 0.3199999476857265, 1.8000000048593874, 0.4743568626402012], res=[0.0, 0.0, -5.551115123125783e-17, 0.0, 0.045037077286643024], res_norm=4.504e-02
2026-01-12 18:50:34,691 - INFO - integration_test - Dyn residual k=1: pred=[0.8908602225768706, 0.21048467533180493, 0.3199999476857265, 1.8000000048593874, 0.6543568631261399], ws=[0.8908602225768706, 0.21048467533180493, 0.3199999476857265, 1.8000000048593874, 0.8018290656413772], res=[0.0, 0.0, 0.0, 0.0, -0.1474722025152373], res_norm=1.475e-01
2026-01-12 18:50:34,692 - INFO - integration_test - Dyn residual k=2: pred=[1.0617226012551177, 0.26710664745702506, 0.3199999476857265, 1.8000000048593874, 0.981829066127316], ws=[1.0617226012551177, 0.26710664745702506, 0.3199999476857265, 1.8000000048593874, 0.8999392968499212], res=[0.0, 0.0, 0.0, 0.0, 0.08188976927739477], res_norm=8.189e-02
2026-01-12 18:50:34,712 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,806 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:34,826 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,843 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:34,864 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,881 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:34,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,921 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:34,943 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,958 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:34,977 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:34,990 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:35,009 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,023 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:35,049 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,074 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:35,105 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,128 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:35,160 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,182 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:35,214 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,240 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:35,518 - INFO - integration_test - Step 4: MPC solve successful
2026-01-12 18:50:35,581 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-12 18:50:35,581 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:35,581 - INFO - integration_test - === Applying control at step 4 ===
2026-01-12 18:50:35,581 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199172376, 'w': 0.8000000077796632}
2026-01-12 18:50:35,581 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:35,581 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:35,583 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:35,583 - INFO - integration_test - Step 4 completed in 1.079s
2026-01-12 18:50:35,597 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-12 18:50:35,598 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.7268615  0.16427973 0.39999995 2.00000001 0.8       ]
2026-01-12 18:50:35,598 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.375m, drift=0.194m)
2026-01-12 18:50:35,598 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-12 18:50:35,599 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:35,690 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-12 18:50:35,691 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-12 18:50:35,764 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:35,777 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:35,777 - INFO - integration_test - Warmstart k=0: x0=0.7268614959225027 , y0=0.16427973317149042 , psi0=0.39999994846369274 , v0=2.0000000068511112 , spline0=0.46868686880485266 , a0=0.0 , w0=0.0
2026-01-12 18:50:35,777 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:35,779 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736993679454, 0.24216339240639875, 0.39999994846369274, 2.0000000068511112, 0.6686868694899638], ws=[0.9110736993679454, 0.24216339240639875, 0.3999999484636927, 2.0000000068511112, 0.6103245125056777], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.05836235698428616], res_norm=5.836e-02
2026-01-12 18:50:35,780 - INFO - integration_test - Dyn residual k=1: pred=[1.095285902813388, 0.3200470516413071, 0.3999999484636927, 2.0000000068511112, 0.8103245131907888], ws=[1.095285902813388, 0.3200470516413071, 0.3999999484636927, 2.0000000068511112, 0.955481526659672], res=[0.0, 0.0, 0.0, 0.0, -0.1451570134688832], res_norm=1.452e-01
2026-01-12 18:50:35,781 - INFO - integration_test - Dyn residual k=2: pred=[1.2794981062588304, 0.3979307108762154, 0.3999999484636927, 2.0000000068511112, 1.1554815273447832], ws=[1.2794981062588304, 0.3979307108762154, 0.3999999484636927, 2.0000000068511112, 1.0655810522823381], res=[0.0, 0.0, 0.0, 0.0, 0.08990047506244503], res_norm=8.990e-02
2026-01-12 18:50:35,800 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,898 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:35,916 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,929 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:35,946 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,959 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:35,976 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:35,988 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:36,005 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,018 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,033 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,045 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,060 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,071 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,099 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,114 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,126 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,141 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,152 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,167 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,179 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,328 - INFO - integration_test - Step 5: MPC solve successful
2026-01-12 18:50:36,463 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-12 18:50:36,464 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:36,464 - INFO - integration_test - === Applying control at step 5 ===
2026-01-12 18:50:36,464 - INFO - integration_test -   Control dict from planner: {'a': 2.00000002000012, 'w': 0.8000000099847976}
2026-01-12 18:50:36,464 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:36,464 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:36,465 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:36,465 - INFO - integration_test - Step 5 completed in 0.868s
2026-01-12 18:50:36,478 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-12 18:50:36,479 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382376 0.47999995 2.20000001 1.02      ]
2026-01-12 18:50:36,479 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.373m, drift=0.414m)
2026-01-12 18:50:36,479 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-12 18:50:36,480 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:36,558 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-12 18:50:36,558 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-12 18:50:36,618 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:36,629 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:36,629 - INFO - integration_test - Warmstart k=0: x0=0.9167519143529672 , y0=0.25382376343919255 , psi0=0.4799999494621725 , v0=2.200000008851123 , spline0=0.6080808083176933 , a0=0.0 , w0=0.0
2026-01-12 18:50:36,630 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:36,631 - INFO - integration_test - Dyn residual k=0: pred=[1.1118908032837092, 0.3554151726051499, 0.4799999494621725, 2.200000008851123, 0.8280808092028056], ws=[1.1118908032837092, 0.3554151726051499, 0.4799999494621723, 2.200000008851123, 0.9559336015772415], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.12785279237443592], res_norm=1.279e-01
2026-01-12 18:50:36,632 - INFO - integration_test - Dyn residual k=1: pred=[1.307029692214451, 0.45700658177110715, 0.4799999494621723, 2.200000008851123, 1.175933602462354], ws=[1.307029692214451, 0.4570065817711071, 0.4799999494621723, 2.200000008851123, 1.1373145690002828], res=[0.0, 5.551115123125783e-17, 0.0, 0.0, 0.03861903346207107], res_norm=3.862e-02
2026-01-12 18:50:36,632 - INFO - integration_test - Dyn residual k=2: pred=[1.502168581145193, 0.5585979909370643, 0.4799999494621723, 2.200000008851123, 1.3573145698853952], ws=[1.502168581145193, 0.5585979909370643, 0.4799999494621723, 2.200000008851123, 1.4647139039233077], res=[0.0, 0.0, 0.0, 0.0, -0.10739933403791246], res_norm=1.074e-01
2026-01-12 18:50:36,648 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,729 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:36,745 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,757 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:36,775 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,788 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:36,805 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,818 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:36,834 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,846 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,861 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,872 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,886 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,899 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,913 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,926 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,952 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,967 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:36,979 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:36,994 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,005 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,146 - INFO - integration_test - Step 6: MPC solve successful
2026-01-12 18:50:37,200 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-12 18:50:37,200 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:37,200 - INFO - integration_test - === Applying control at step 6 ===
2026-01-12 18:50:37,200 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197864587, 'w': 0.7999999821139628}
2026-01-12 18:50:37,200 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:37,200 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:37,201 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:37,202 - INFO - integration_test - Step 6 completed in 0.723s
2026-01-12 18:50:37,215 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-12 18:50:37,215 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819139 0.55999995 2.40000001 1.26      ]
2026-01-12 18:50:37,216 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.475m, drift=0.654m)
2026-01-12 18:50:37,216 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-12 18:50:37,217 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:37,292 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-12 18:50:37,292 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-12 18:50:37,350 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:37,362 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:37,362 - INFO - integration_test - Warmstart k=0: x0=1.1162308802517709 , y0=0.36819139249103777 , psi0=0.5599999476735688 , v0=2.400000010829769 , spline0=1.0117171722712148 , a0=0.0 , w0=0.0
2026-01-12 18:50:37,362 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:37,363 - INFO - integration_test - Dyn residual k=0: pred=[1.319572114483367, 0.49567606992719127, 0.5599999476735688, 2.400000010829769, 1.2517171733541916], ws=[1.319572114483367, 0.49567606992719127, 0.5599999476735689, 2.400000010829769, 1.1328713103566417], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, 0.11884586299754996], res_norm=1.188e-01
2026-01-12 18:50:37,364 - INFO - integration_test - Dyn residual k=1: pred=[1.522913348714963, 0.6231607473633447, 0.5599999476735689, 2.400000010829769, 1.3728713114396185], ws=[1.522913348714963, 0.6231607473633447, 0.5599999476735689, 2.400000010829769, 1.3250255394692734], res=[0.0, 0.0, 0.0, 0.0, 0.04784577197034512], res_norm=4.785e-02
2026-01-12 18:50:37,365 - INFO - integration_test - Dyn residual k=2: pred=[1.7262545829465592, 0.7506454247994981, 0.5599999476735689, 2.400000010829769, 1.5650255405522504], ws=[1.7262545829465592, 0.7506454247994983, 0.5599999476735689, 2.400000010829769, 1.681340577380233], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, -0.11631503682798261], res_norm=1.163e-01
2026-01-12 18:50:37,380 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,457 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:37,474 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,486 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:37,503 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,516 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:37,532 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,544 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:37,560 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,571 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,587 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,600 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,615 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,627 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,644 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,656 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,671 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,683 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,698 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,710 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:37,736 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:37,906 - INFO - integration_test - Step 7: MPC solve successful
2026-01-12 18:50:37,963 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-12 18:50:37,963 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:37,963 - INFO - integration_test - === Applying control at step 7 ===
2026-01-12 18:50:37,963 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199996237, 'w': 0.8000000099523308}
2026-01-12 18:50:37,963 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:37,963 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:37,964 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:37,964 - INFO - integration_test - Step 7 completed in 0.750s
2026-01-12 18:50:37,977 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-12 18:50:37,978 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243451 0.50942438 0.63999995 2.60000001 1.52      ]
2026-01-12 18:50:37,978 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.429m, drift=0.308m)
2026-01-12 18:50:37,978 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-12 18:50:37,979 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:38,056 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-12 18:50:38,056 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-12 18:50:38,115 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:38,125 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:38,125 - INFO - integration_test - Warmstart k=0: x0=1.3224345116452123 , y0=0.5094243784147712 , psi0=0.6399999486688018 , v0=2.600000012829731 , spline0=1.1854545463111117 , a0=0.0 , w0=0.0
2026-01-12 18:50:38,125 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:38,128 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794176944322, 0.6646951832303191, 0.6399999486688018, 2.600000012829731, 1.4454545475940848], ws=[1.5309794176944325, 0.6646951832303192, 0.6399999486688017, 2.600000012829731, 1.3114308071297969], res=[-2.220446049250313e-16, -1.1102230246251565e-16, 1.1102230246251565e-16, 0.0, 0.1340237404642879], res_norm=1.340e-01
2026-01-12 18:50:38,129 - INFO - integration_test - Dyn residual k=1: pred=[1.7395243237436526, 0.8199659880458671, 0.6399999486688017, 2.600000012829731, 1.57143080841277], ws=[1.7395243237436526, 0.8199659880458671, 0.6399999486688017, 2.600000012829731, 1.738925127597707], res=[0.0, 0.0, 0.0, 0.0, -0.16749431918493696], res_norm=1.675e-01
2026-01-12 18:50:38,130 - INFO - integration_test - Dyn residual k=2: pred=[1.9480692297928728, 0.975236792861415, 0.6399999486688017, 2.600000012829731, 1.99892512888068], ws=[1.9480692297928728, 0.975236792861415, 0.6399999486688017, 2.600000012829731, 2.1160617162645865], res=[0.0, 0.0, 0.0, 0.0, -0.11713658738390653], res_norm=1.171e-01
2026-01-12 18:50:38,146 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,224 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:38,240 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,253 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:38,270 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,286 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:38,303 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,316 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:38,331 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,343 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,357 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,368 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,383 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,395 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,410 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,421 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,435 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,447 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,462 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,473 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:38,500 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:38,743 - INFO - integration_test - Step 8: MPC solve successful
2026-01-12 18:50:38,801 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-12 18:50:38,801 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:38,801 - INFO - integration_test - === Applying control at step 8 ===
2026-01-12 18:50:38,801 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000200031036, 'w': 0.8000000097751802}
2026-01-12 18:50:38,801 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:38,801 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:38,802 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:38,803 - INFO - integration_test - Step 8 completed in 0.825s
2026-01-12 18:50:38,815 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-12 18:50:38,815 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223936 0.67925687 0.71999995 2.80000001 1.80000001]
2026-01-12 18:50:38,816 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.464m, drift=0.588m)
2026-01-12 18:50:38,816 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-12 18:50:38,817 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:38,891 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-12 18:50:38,891 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-12 18:50:38,952 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:38,963 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:38,963 - INFO - integration_test - Warmstart k=0: x0=1.5322393609284966 , y0=0.6792568667593892 , psi0=0.7199999496463199 , v0=2.8000000148300415 , spline0=1.5797979812370173 , a0=0.0 , w0=0.0
2026-01-12 18:50:38,963 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:38,965 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449754995625, 0.8638845652895397, 0.7199999496463199, 2.8000000148300415, 1.8597979827200215], ws=[1.7427449754995625, 0.8638845652895398, 0.7199999496463199, 2.8000000148300415, 1.737086870197468], res=[0.0, -1.1102230246251565e-16, 0.0, 0.0, 0.12271111252255351], res_norm=1.227e-01
2026-01-12 18:50:38,965 - INFO - integration_test - Dyn residual k=1: pred=[1.9532505900706285, 1.0485122638196904, 0.7199999496463199, 2.8000000148300415, 2.017086871680472], ws=[1.9532505900706285, 1.0485122638196904, 0.7199999496463199, 2.8000000148300415, 1.97024678846566], res=[0.0, 0.0, 0.0, 0.0, 0.046840083214812145], res_norm=4.684e-02
2026-01-12 18:50:38,966 - INFO - integration_test - Dyn residual k=2: pred=[2.1637562046416945, 1.233139962349841, 0.7199999496463199, 2.8000000148300415, 2.250246789948664], ws=[2.1637562046416945, 1.233139962349841, 0.7199999496463199, 2.8000000148300415, 2.384388178449505], res=[0.0, 0.0, 0.0, 0.0, -0.1341413885008409], res_norm=1.341e-01
2026-01-12 18:50:38,982 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,062 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,078 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,090 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,107 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,119 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,135 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,148 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,164 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,176 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,190 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,201 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,216 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,228 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,242 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,253 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,268 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,279 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,294 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,305 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,320 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,332 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,507 - INFO - integration_test - Step 9: MPC solve successful
2026-01-12 18:50:39,566 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-12 18:50:39,566 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:39,566 - INFO - integration_test - === Applying control at step 9 ===
2026-01-12 18:50:39,566 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998987, 'w': 0.0719969893519461}
2026-01-12 18:50:39,567 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:39,567 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:39,567 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:39,568 - INFO - integration_test - Step 9 completed in 0.753s
2026-01-12 18:50:39,581 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-12 18:50:39,582 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74956484 0.8712706  0.72719965 3.00000002 2.10000001]
2026-01-12 18:50:39,582 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.408m, drift=0.283m)
2026-01-12 18:50:39,582 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-12 18:50:39,583 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:39,658 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.750, 0.871), path_start=(0.000, 0.000), dist=1.955m
2026-01-12 18:50:39,658 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-12 18:50:39,718 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:39,729 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:39,729 - INFO - integration_test - Warmstart k=0: x0=1.749564839141401 , y0=0.871270601426529 , psi0=0.7271996485815144 , v0=3.00000001682994 , spline0=1.7929292949184625 , a0=0.0 , w0=0.0
2026-01-12 18:50:39,729 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:39,730 - INFO - integration_test - Dyn residual k=0: pred=[1.9736765246238837, 1.0707046843712382, 0.7271996485815144, 3.00000001682994, 2.0929292966014565], ws=[1.9736765233666216, 1.070704683252417, 0.7271996485815144, 3.0, 1.974906964163568], res=[1.257262072229537e-09, 1.1188212578616685e-09, 0.0, 1.6829940108209485e-08, 0.11802233243788862], res_norm=1.180e-01
2026-01-12 18:50:39,731 - INFO - integration_test - Dyn residual k=1: pred=[2.197788207591842, 1.270138765078305, 0.7271996485815144, 3.0, 2.274906964163568], ws=[2.197788207591842, 1.270138765078305, 0.7271996485815144, 3.0, 2.398935065668522], res=[0.0, 0.0, 0.0, 0.0, -0.1240281015049538], res_norm=1.240e-01
2026-01-12 18:50:39,732 - INFO - integration_test - Dyn residual k=2: pred=[2.4218998918170627, 1.4695728469041929, 0.7271996485815144, 3.0, 2.698935065668522], ws=[2.4218998918170627, 1.4695728469041929, 0.7271996485815144, 3.0, 2.594952744035894], res=[0.0, 0.0, 0.0, 0.0, 0.10398232163262788], res_norm=1.040e-01
2026-01-12 18:50:39,748 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,828 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,844 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,855 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,871 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,884 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,900 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,913 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:39,928 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,939 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,953 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,965 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:39,980 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:39,991 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,006 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,017 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,032 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,043 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,058 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,069 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,084 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,096 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,284 - INFO - integration_test - Step 10: MPC solve successful
2026-01-12 18:50:40,346 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-12 18:50:40,347 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:40,347 - INFO - integration_test - === Applying control at step 10 ===
2026-01-12 18:50:40,347 - INFO - integration_test -   Control dict from planner: {'a': 1.315941091602095e-07, 'w': -0.21802281741624202}
2026-01-12 18:50:40,347 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:40,347 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:40,348 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:40,348 - INFO - integration_test - Step 10 completed in 0.767s
2026-01-12 18:50:40,361 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-12 18:50:40,362 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.97583274 1.06824591 0.70539737 3.00000003 2.40000001]
2026-01-12 18:50:40,362 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.442m, drift=0.583m)
2026-01-12 18:50:40,362 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-12 18:50:40,363 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:40,437 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.976, 1.068), path_start=(0.000, 0.000), dist=2.246m
2026-01-12 18:50:40,437 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-12 18:50:40,497 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:40,508 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:40,508 - INFO - integration_test - Warmstart k=0: x0=1.975832743621734 , y0=1.0682459090948793 , psi0=0.7053973668398902 , v0=3.000000029989351 , spline0=2.1676767708626805 , a0=0.0 , w0=0.0
2026-01-12 18:50:40,508 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:40,510 - INFO - integration_test - Dyn residual k=0: pred=[2.204238941250326, 1.2627468363014347, 0.7053973668398902, 3.000000029989351, 2.4676767738616157], ws=[2.2042389389670745, 1.262746834357116, 0.7053973668398901, 3.0, 2.3568863315901414], res=[2.283251365753358e-09, 1.9443187060375067e-09, 1.1102230246251565e-16, 2.9989351002512876e-08, 0.11079044227147428], res_norm=1.108e-01
2026-01-12 18:50:40,511 - INFO - integration_test - Dyn residual k=1: pred=[2.432645134312415, 1.4572477596193525, 0.7053973668398901, 3.0, 2.656886331590141], ws=[2.432645134312415, 1.4572477596193525, 0.7053973668398901, 3.0, 2.812200916221283], res=[0.0, 0.0, 0.0, 0.0, -0.1553145846311419], res_norm=1.553e-01
2026-01-12 18:50:40,512 - INFO - integration_test - Dyn residual k=2: pred=[2.6610513296577554, 1.651748684881589, 0.7053973668398901, 3.0, 3.1122009162212834], ws=[2.6610513296577554, 1.6517486848815892, 0.7053973668398901, 3.0, 3.0317082483056033], res=[0.0, -2.220446049250313e-16, 0.0, 0.0, 0.0804926679156801], res_norm=8.049e-02
2026-01-12 18:50:40,527 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,605 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:40,621 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,634 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:40,650 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,663 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:40,679 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,691 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:40,706 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,718 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,732 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,744 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,769 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,784 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,796 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,811 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,822 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,837 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,849 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:40,864 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:40,874 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,052 - INFO - integration_test - Step 11: MPC solve successful
2026-01-12 18:50:41,118 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-12 18:50:41,118 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:41,118 - INFO - integration_test - === Applying control at step 11 ===
2026-01-12 18:50:41,118 - INFO - integration_test -   Control dict from planner: {'a': 4.746631461606491e-11, 'w': -0.17908205504428726}
2026-01-12 18:50:41,118 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:41,118 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:41,119 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:41,119 - INFO - integration_test - Step 11 completed in 0.758s
2026-01-12 18:50:41,131 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-12 18:50:41,132 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.20596827 1.26069132 0.68748916 3.00000003 2.70000001]
2026-01-12 18:50:41,133 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.369m, drift=0.277m)
2026-01-12 18:50:41,133 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-12 18:50:41,134 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:41,211 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.206, 1.261), path_start=(0.000, 0.000), dist=2.541m
2026-01-12 18:50:41,211 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-12 18:50:41,270 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:41,281 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:41,281 - INFO - integration_test - Warmstart k=0: x0=2.2059682677414325 , y0=1.2606913223711245 , psi0=0.6874891613354615 , v0=3.0000000299940974 , spline0=2.4111111154559515 , a0=0.0 , w0=0.0
2026-01-12 18:50:41,281 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:41,282 - INFO - integration_test - Dyn residual k=0: pred=[2.4378208173796008, 1.4510709353183266, 0.6874891613354615, 3.0000000299940974, 2.7111111184553613], ws=[2.4378208150615315, 1.451070933414905, 0.6874891613354617, 3.0, 2.6215800824703432], res=[2.3180692920732326e-09, 1.9034216425239947e-09, -2.220446049250313e-16, 2.9994097427987754e-08, 0.0895310359850181], res_norm=8.953e-02
2026-01-12 18:50:41,283 - INFO - integration_test - Dyn residual k=1: pred=[2.6696733623816304, 1.6414505444586855, 0.6874891613354617, 3.0, 2.921580082470343], ws=[2.6696733623816304, 1.6414505444586855, 0.6874891613354617, 3.0, 3.003864973067052], res=[0.0, 0.0, 0.0, 0.0, -0.08228489059670885], res_norm=8.228e-02
2026-01-12 18:50:41,284 - INFO - integration_test - Dyn residual k=2: pred=[2.9015259097017294, 1.831830155502466, 0.6874891613354617, 3.0, 3.3038649730670517], ws=[2.9015259097017294, 1.831830155502466, 0.6874891613354617, 3.0, 3.2199747566811876], res=[0.0, 0.0, 0.0, 0.0, 0.08389021638586414], res_norm=8.389e-02
2026-01-12 18:50:41,300 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,379 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:41,395 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,408 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:41,426 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,438 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:41,454 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,467 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:41,483 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,495 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,510 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,522 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,537 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,549 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,564 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,575 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,590 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,602 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,617 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,628 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,643 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:41,654 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:41,817 - INFO - integration_test - Step 12: MPC solve successful
2026-01-12 18:50:41,998 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-12 18:50:41,999 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:41,999 - INFO - integration_test - === Applying control at step 12 ===
2026-01-12 18:50:41,999 - INFO - integration_test -   Control dict from planner: {'a': 3.828253452596154e-11, 'w': -0.18563795142251333}
2026-01-12 18:50:41,999 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:41,999 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:42,000 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:42,000 - INFO - integration_test - Step 12 completed in 0.868s
2026-01-12 18:50:42,014 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-12 18:50:42,015 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.43957453 1.44890803 0.66892537 3.00000003 3.00000002]
2026-01-12 18:50:42,016 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.438m, drift=0.577m)
2026-01-12 18:50:42,016 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-12 18:50:42,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:42,094 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.440, 1.449), path_start=(0.000, 0.000), dist=2.837m
2026-01-12 18:50:42,094 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-12 18:50:42,152 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:42,163 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:42,164 - INFO - integration_test - Warmstart k=0: x0=2.4395745343148336 , y0=1.4489080311027949 , psi0=0.6689253661932101 , v0=3.0000000299979255 , spline0=2.8282828342488258 , a0=0.0 , w0=0.0
2026-01-12 18:50:42,164 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:42,165 - INFO - integration_test - Dyn residual k=0: pred=[2.6749211003763995, 1.6349510251738013, 0.6689253661932101, 3.0000000299979255, 3.1282828372486184], ws=[2.6749210980230966, 1.6349510233135, 0.6689253661932102, 3.0, 2.7891525156430133], res=[2.3533028858935268e-09, 1.8603012463813684e-09, -1.1102230246251565e-16, 2.999792547697666e-08, 0.3391303216056052], res_norm=3.391e-01
2026-01-12 18:50:42,166 - INFO - integration_test - Dyn residual k=1: pred=[2.9102676617313596, 1.8209940155242053, 0.6689253661932102, 3.0, 3.089152515643013], ws=[2.9102676617313596, 1.8209940155242053, 0.6689253661932102, 3.0, 3.1884670091177747], res=[0.0, 0.0, 0.0, 0.0, -0.09931449347476162], res_norm=9.931e-02
2026-01-12 18:50:42,166 - INFO - integration_test - Dyn residual k=2: pred=[3.1456142254396227, 2.0070370077349104, 0.6689253661932102, 3.0, 3.488467009117775], ws=[3.1456142254396227, 2.0070370077349104, 0.6689253661932102, 3.0, 3.4174038550623944], res=[0.0, 0.0, 0.0, 0.0, 0.07106315405538055], res_norm=7.106e-02
2026-01-12 18:50:42,182 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,261 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:42,277 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,289 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:42,305 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,318 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:42,334 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,346 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:42,362 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,373 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,388 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,400 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,415 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,426 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,440 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,452 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,466 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,478 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,493 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,504 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,519 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:42,531 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:42,694 - INFO - integration_test - Step 13: MPC solve successful
2026-01-12 18:50:42,761 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-12 18:50:42,762 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:42,762 - INFO - integration_test - === Applying control at step 13 ===
2026-01-12 18:50:42,762 - INFO - integration_test -   Control dict from planner: {'a': 1.289955288511903e-11, 'w': -0.1823551234145227}
2026-01-12 18:50:42,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:42,762 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:42,763 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:42,763 - INFO - integration_test - Step 13 completed in 0.748s
2026-01-12 18:50:42,775 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-12 18:50:42,776 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.6766043  1.63279494 0.65068985 3.00000003 3.30000002]
2026-01-12 18:50:42,777 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.346m, drift=0.271m)
2026-01-12 18:50:42,777 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-12 18:50:42,778 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:42,852 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.677, 1.633), path_start=(0.000, 0.000), dist=3.135m
2026-01-12 18:50:42,852 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-12 18:50:42,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:42,924 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:42,924 - INFO - integration_test - Warmstart k=0: x0=2.6766043048015438 , y0=1.632794941276167 , psi0=0.6506898538517578 , v0=3.0000000299992156 , spline0=3.018181825409153 , a0=0.0 , w0=0.0
2026-01-12 18:50:42,924 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:42,926 - INFO - integration_test - Dyn residual k=0: pred=[2.915304142882981, 1.8145155760424165, 0.6506898538517578, 3.0000000299992156, 3.3181818284090743], ws=[2.915304140496045, 1.8145155742252577, 0.650689853851758, 3.0, 3.252080314192757], res=[2.3869359822015213e-09, 1.8171588678228545e-09, -2.220446049250313e-16, 2.9999215556131276e-08, 0.06610151421631727], res_norm=6.610e-02
2026-01-12 18:50:42,927 - INFO - integration_test - Dyn residual k=1: pred=[3.154003976190546, 1.9962362071743482, 0.650689853851758, 3.0, 3.5520803141927573], ws=[3.154003976190546, 1.9962362071743482, 0.650689853851758, 3.0, 3.667591255771998], res=[0.0, 0.0, 0.0, 0.0, -0.1155109415792408], res_norm=1.155e-01
2026-01-12 18:50:42,928 - INFO - integration_test - Dyn residual k=2: pred=[3.392703811885047, 2.177956840123439, 0.650689853851758, 3.0, 3.967591255771998], ws=[3.392703811885047, 2.177956840123439, 0.650689853851758, 3.0, 3.833995227502181], res=[0.0, 0.0, 0.0, 0.0, 0.13359602826981698], res_norm=1.336e-01
2026-01-12 18:50:42,945 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,025 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,041 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,053 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,069 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,083 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,099 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,111 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,127 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,138 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,153 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,164 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,179 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,190 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,205 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,217 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,231 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,243 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,258 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,269 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,284 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,296 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,455 - INFO - integration_test - Step 14: MPC solve successful
2026-01-12 18:50:43,525 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-12 18:50:43,526 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:43,526 - INFO - integration_test - === Applying control at step 14 ===
2026-01-12 18:50:43,526 - INFO - integration_test -   Control dict from planner: {'a': 4.198454222968445e-12, 'w': -0.19563529594236512}
2026-01-12 18:50:43,526 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:43,526 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:43,527 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:43,528 - INFO - integration_test - Step 14 completed in 0.752s
2026-01-12 18:50:43,538 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-12 18:50:43,540 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.91706641 1.81216915 0.63112632 3.00000003 3.60000002]
2026-01-12 18:50:43,541 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.442m, drift=0.035m)
2026-01-12 18:50:43,541 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-12 18:50:43,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:43,618 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.917, 1.812), path_start=(0.000, 0.000), dist=3.434m
2026-01-12 18:50:43,618 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-12 18:50:43,677 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:43,688 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:43,688 - INFO - integration_test - Warmstart k=0: x0=2.9170664086696374 , y0=1.8121691533617885 , psi0=0.6311263242575214 , v0=3.000000029999635 , spline0=3.2141414226907075 , a0=0.0 , w0=0.0
2026-01-12 18:50:43,688 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:43,690 - INFO - integration_test - Dyn residual k=0: pred=[3.1592754394575095, 1.9891855006429864, 0.6311263242575214, 3.000000029999635, 3.514141425690671], ws=[3.1592754370354488, 1.9891854988728446, 0.6311263242575214, 3.0, 3.438130587459857], res=[2.422060774165402e-09, 1.7701418109083988e-09, 0.0, 2.9999635220434584e-08, 0.07601083823081423], res_norm=7.601e-02
2026-01-12 18:50:43,691 - INFO - integration_test - Dyn residual k=1: pred=[3.40148446540126, 2.1662018443839006, 0.6311263242575214, 3.0, 3.7381305874598567], ws=[3.40148446540126, 2.1662018443839006, 0.6311263242575214, 3.0, 3.8715716613391518], res=[0.0, 0.0, 0.0, 0.0, -0.13344107387929505], res_norm=1.334e-01
2026-01-12 18:50:43,692 - INFO - integration_test - Dyn residual k=2: pred=[3.6436934937670715, 2.3432181898949564, 0.6311263242575214, 3.0, 4.171571661339152], ws=[3.6436934937670715, 2.343218189894957, 0.6311263242575214, 3.0, 4.022462015861434], res=[0.0, -4.440892098500626e-16, 0.0, 0.0, 0.14910964547771766], res_norm=1.491e-01
2026-01-12 18:50:43,708 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,784 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,801 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,814 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,831 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,843 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,859 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,871 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:43,887 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,899 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,914 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,925 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,940 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,951 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,966 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:43,978 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:43,993 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,004 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,019 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,031 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,045 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,056 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,213 - INFO - integration_test - Step 15: MPC solve successful
2026-01-12 18:50:44,287 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-12 18:50:44,288 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:44,288 - INFO - integration_test - === Applying control at step 15 ===
2026-01-12 18:50:44,288 - INFO - integration_test -   Control dict from planner: {'a': 1.4684991930254857e-12, 'w': -0.21575801324327587}
2026-01-12 18:50:44,288 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:44,288 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:44,289 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:44,290 - INFO - integration_test - Step 15 completed in 0.750s
2026-01-12 18:50:44,302 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-12 18:50:44,302 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.16116621 1.98655894 0.60955052 3.00000003 3.90000003]
2026-01-12 18:50:44,303 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.338m, drift=0.265m)
2026-01-12 18:50:44,303 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-12 18:50:44,304 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:44,380 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.161, 1.987), path_start=(0.000, 0.000), dist=3.734m
2026-01-12 18:50:44,380 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-12 18:50:44,442 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:44,453 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:44,453 - INFO - integration_test - Warmstart k=0: x0=3.161166208606459 , y0=1.9865589414068883 , psi0=0.6095505229331938 , v0=3.000000029999782 , spline0=3.416161626093478 , a0=0.0 , w0=0.0
2026-01-12 18:50:44,453 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:44,455 - INFO - integration_test - Dyn residual k=0: pred=[3.4071378388139126, 2.158308639901746, 0.6095505229331938, 3.000000029999782, 3.7161616290934565], ws=[3.4071378363542144, 2.1583086381842618, 0.6095505229331937, 3.0, 3.848566542023601], res=[2.4596982228786146e-09, 1.7174843769396375e-09, 1.1102230246251565e-16, 2.9999782213963044e-08, -0.13240491293014456], res_norm=1.324e-01
2026-01-12 18:50:44,456 - INFO - integration_test - Dyn residual k=1: pred=[3.65310946410197, 2.330058334961635, 0.6095505229331937, 3.0, 4.148566542023601], ws=[3.65310946410197, 2.330058334961635, 0.6095505229331937, 3.0, 4.29268163713106], res=[0.0, 0.0, 0.0, 0.0, -0.144115095107459], res_norm=1.441e-01
2026-01-12 18:50:44,457 - INFO - integration_test - Dyn residual k=2: pred=[3.8990810918497254, 2.5018080317390083, 0.6095505229331937, 3.0, 4.59268163713106], ws=[3.8990810918497254, 2.5018080317390083, 0.6095505229331937, 3.0, 4.505560596031421], res=[0.0, 0.0, 0.0, 0.0, 0.08712104109963903], res_norm=8.712e-02
2026-01-12 18:50:44,472 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,555 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:44,572 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,585 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:44,601 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,614 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:44,630 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,643 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:44,658 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,669 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,685 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,697 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,711 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,722 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,736 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,749 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,764 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,775 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,790 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,802 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:44,817 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:44,829 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,056 - INFO - integration_test - Step 16: MPC solve successful
2026-01-12 18:50:45,131 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-12 18:50:45,131 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:45,131 - INFO - integration_test - === Applying control at step 16 ===
2026-01-12 18:50:45,131 - INFO - integration_test -   Control dict from planner: {'a': -4.025903400119692e-10, 'w': -0.1928837104297895}
2026-01-12 18:50:45,131 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:45,131 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:45,132 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:45,133 - INFO - integration_test - Step 16 completed in 0.831s
2026-01-12 18:50:45,146 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-12 18:50:45,147 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.40877892 2.15592587 0.59026215 3.00000003 4.20000003]
2026-01-12 18:50:45,148 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.421m, drift=0.041m)
2026-01-12 18:50:45,148 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-12 18:50:45,148 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:45,224 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.409, 2.156), path_start=(0.000, 0.000), dist=4.033m
2026-01-12 18:50:45,224 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-12 18:50:45,283 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:45,294 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:45,294 - INFO - integration_test - Warmstart k=0: x0=3.40877892177795 , y0=2.1559258679551356 , psi0=0.5902621518902148 , v0=3.0000000299595233 , spline0=3.8101010220577143 , a0=0.0 , w0=0.0
2026-01-12 18:50:45,294 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:45,296 - INFO - integration_test - Dyn residual k=0: pred=[3.6580173641035953, 2.32289952056134, 0.5902621518902148, 3.0000000299595233, 4.110101025053667], ws=[3.6580173616145735, 2.322899518893856, 0.5902621518902147, 3.0, 4.0503252738849485], res=[2.489021877494224e-09, 1.6674839287134091e-09, 1.1102230246251565e-16, 2.995952330664409e-08, 0.05977575116871847], res_norm=5.978e-02
2026-01-12 18:50:45,296 - INFO - integration_test - Dyn residual k=1: pred=[3.907255801451197, 2.4898731698325762, 0.5902621518902147, 3.0, 4.350325273884948], ws=[3.907255801451197, 2.4898731698325762, 0.5902621518902147, 3.0, 4.51322739173216], res=[0.0, 0.0, 0.0, 0.0, -0.16290211784721187], res_norm=1.629e-01
2026-01-12 18:50:45,297 - INFO - integration_test - Dyn residual k=2: pred=[4.156494241287821, 2.6568468207712965, 0.5902621518902147, 3.0, 4.81322739173216], ws=[4.156494241287821, 2.6568468207712965, 0.5902621518902147, 3.0, 4.928925211786684], res=[0.0, 0.0, 0.0, 0.0, -0.11569782005452378], res_norm=1.157e-01
2026-01-12 18:50:45,313 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,390 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:45,407 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,419 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:45,435 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,448 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:45,464 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,476 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:45,492 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,503 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,518 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,530 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,544 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,555 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,569 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,581 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,596 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,607 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,622 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,634 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,648 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:45,659 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:45,826 - INFO - integration_test - Step 17: MPC solve successful
2026-01-12 18:50:45,902 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-12 18:50:45,902 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:45,902 - INFO - integration_test - === Applying control at step 17 ===
2026-01-12 18:50:45,902 - INFO - integration_test -   Control dict from planner: {'a': 2.6883791098738303e-10, 'w': -0.21988810695701252}
2026-01-12 18:50:45,902 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:45,902 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:45,903 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:45,904 - INFO - integration_test - Step 17 completed in 0.757s
2026-01-12 18:50:45,916 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-12 18:50:45,917 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.65983298 2.32014595 0.56827334 3.00000003 4.50000003]
2026-01-12 18:50:45,917 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.343m, drift=0.259m)
2026-01-12 18:50:45,917 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-12 18:50:45,918 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:45,993 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.660, 2.320), path_start=(0.000, 0.000), dist=4.333m
2026-01-12 18:50:45,993 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-12 18:50:46,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:46,064 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:46,064 - INFO - integration_test - Warmstart k=0: x0=3.6598329818750286 , y0=2.320145947335413 , psi0=0.5682733411945136 , v0=3.000000029986407 , spline0=4.030303043823512 , a0=0.0 , w0=0.0
2026-01-12 18:50:46,064 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:46,065 - INFO - integration_test - Dyn residual k=0: pred=[3.9126824284405566, 2.4815992197416747, 0.5682733411945136, 3.000000029986407, 4.330303046822152], ws=[3.912682425913208, 2.4815992181278737, 0.5682733411945136, 3.0, 4.4930402169266355], res=[2.527348552661124e-09, 1.613801092759104e-09, 0.0, 2.998640713514078e-08, -0.1627371701044833], res_norm=1.627e-01
2026-01-12 18:50:46,066 - INFO - integration_test - Dyn residual k=1: pred=[4.165531869951387, 2.6430524889203344, 0.5682733411945136, 3.0, 4.793040216926635], ws=[4.165531869951387, 2.6430524889203344, 0.5682733411945136, 3.0, 4.685057233726632], res=[0.0, 0.0, 0.0, 0.0, 0.10798298320000299], res_norm=1.080e-01
2026-01-12 18:50:46,067 - INFO - integration_test - Dyn residual k=2: pred=[4.418381313989566, 2.804505759712795, 0.5682733411945136, 3.0, 4.985057233726632], ws=[4.418381313989566, 2.804505759712795, 0.5682733411945136, 3.0, 5.078899535267482], res=[0.0, 0.0, 0.0, 0.0, -0.0938423015408496], res_norm=9.384e-02
2026-01-12 18:50:46,082 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,169 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:46,186 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,199 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:46,216 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,229 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:46,245 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,257 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:46,273 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,284 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,299 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,311 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,326 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,337 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,352 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,363 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,378 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,389 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,404 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,415 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,430 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,441 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:46,599 - INFO - integration_test - Step 18: MPC solve successful
2026-01-12 18:50:46,679 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-12 18:50:46,679 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:46,679 - INFO - integration_test - === Applying control at step 18 ===
2026-01-12 18:50:46,679 - INFO - integration_test -   Control dict from planner: {'a': 7.950243103016293e-11, 'w': -0.22431402113422427}
2026-01-12 18:50:46,679 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:46,679 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:46,681 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:46,681 - INFO - integration_test - Step 18 completed in 0.765s
2026-01-12 18:50:46,694 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-12 18:50:46,695 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.91447196 2.47874992 0.54584194 3.00000003 4.80000003]
2026-01-12 18:50:46,696 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.410m, drift=0.046m)
2026-01-12 18:50:46,696 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-12 18:50:46,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:46,771 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.914, 2.479), path_start=(0.000, 0.000), dist=4.633m
2026-01-12 18:50:46,771 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-12 18:50:46,832 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:46,845 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:46,845 - INFO - integration_test - Warmstart k=0: x0=3.9144719604241143 , y0=2.478749915518548 , psi0=0.5458419390810911 , v0=3.000000029994357 , spline0=4.454545470395065 , a0=0.0 , w0=0.0
2026-01-12 18:50:46,845 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:46,847 - INFO - integration_test - Dyn residual k=0: pred=[4.170879116377105, 2.634491278604147, 0.5458419390810911, 3.000000029994357, 4.754545473394501], ws=[4.170879113813515, 2.6344912770470263, 0.5458419390810914, 3.0, 4.68299271100236], res=[2.563589340809358e-09, 1.557120654638311e-09, -2.220446049250313e-16, 2.9994357220175516e-08, 0.07155276239214103], res_norm=7.155e-02
2026-01-12 18:50:46,847 - INFO - integration_test - Dyn residual k=1: pred=[4.427286267202916, 2.7902326385755045, 0.5458419390810914, 3.0, 4.9829927110023595], ws=[4.427286267202916, 2.7902326385755045, 0.5458419390810914, 3.0, 5.0560884688724945], res=[0.0, 0.0, 0.0, 0.0, -0.073095757870135], res_norm=7.310e-02
2026-01-12 18:50:46,848 - INFO - integration_test - Dyn residual k=2: pred=[4.683693420592317, 2.9459740001039827, 0.5458419390810914, 3.0, 5.356088468872494], ws=[4.683693420592317, 2.9459740001039827, 0.5458419390810914, 3.0, 5.297937501147708], res=[0.0, 0.0, 0.0, 0.0, 0.05815096772478601], res_norm=5.815e-02
2026-01-12 18:50:46,864 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,941 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:46,957 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,969 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:46,986 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:46,999 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:47,015 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,027 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:47,042 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,053 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,068 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,080 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,095 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,106 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,121 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,132 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,147 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,158 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,172 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,184 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,199 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,210 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:47,370 - INFO - integration_test - Step 19: MPC solve successful
2026-01-12 18:50:47,452 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-12 18:50:47,452 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:47,452 - INFO - integration_test - === Applying control at step 19 ===
2026-01-12 18:50:47,452 - INFO - integration_test -   Control dict from planner: {'a': 3.6218563857065746e-11, 'w': -0.23292382646384663}
2026-01-12 18:50:47,452 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:47,452 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:47,453 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:47,454 - INFO - integration_test - Step 19 completed in 0.759s
2026-01-12 18:50:47,466 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-12 18:50:47,467 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.17266964 2.63149116 0.52254956 3.00000003 5.10000004]
2026-01-12 18:50:47,467 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.360m, drift=0.254m)
2026-01-12 18:50:47,467 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-12 18:50:47,468 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:47,544 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.173, 2.631), path_start=(0.000, 0.000), dist=4.933m
2026-01-12 18:50:47,544 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-12 18:50:47,606 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:47,618 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:47,618 - INFO - integration_test - Warmstart k=0: x0=4.172669643761716 , y0=2.631491164687185 , psi0=0.5225495564347065 , v0=3.000000029997979 , spline0=4.6454545833234855 , a0=0.0 , w0=0.0
2026-01-12 18:50:47,618 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:47,619 - INFO - integration_test - Dyn residual k=0: pred=[4.432634507336177, 2.781218488534873, 0.5225495564347065, 3.000000029997979, 4.945454586323283], ws=[4.432634504736703, 2.781218487037701, 0.5225495564347065, 3.0, 5.123519859144222], res=[2.5994735253220824e-09, 1.4971721640222313e-09, 0.0, 2.999797921177105e-08, -0.1780652728209393], res_norm=1.781e-01
2026-01-12 18:50:47,620 - INFO - integration_test - Dyn residual k=1: pred=[4.692599365711691, 2.930945809388217, 0.5225495564347065, 3.0, 5.423519859144222], ws=[4.692599365711691, 2.930945809388217, 0.5225495564347065, 3.0, 5.268289026529821], res=[0.0, 0.0, 0.0, 0.0, 0.15523083261440096], res_norm=1.552e-01
2026-01-12 18:50:47,621 - INFO - integration_test - Dyn residual k=2: pred=[4.952564226686678, 3.080673131738733, 0.5225495564347065, 3.0, 5.568289026529821], ws=[4.952564226686678, 3.080673131738733, 0.5225495564347065, 3.0, 5.7550440438587245], res=[0.0, 0.0, 0.0, 0.0, -0.18675501732890343], res_norm=1.868e-01
2026-01-12 18:50:47,813 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,891 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:47,907 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,919 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:47,936 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,948 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:47,964 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:47,977 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:47,993 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,004 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,020 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,032 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,046 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,057 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,071 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,083 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,098 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,110 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,125 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,136 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,151 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,163 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,328 - INFO - integration_test - Step 20: MPC solve successful
2026-01-12 18:50:48,412 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-12 18:50:48,413 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:48,413 - INFO - integration_test - === Applying control at step 20 ===
2026-01-12 18:50:48,413 - INFO - integration_test -   Control dict from planner: {'a': -1.0408538782589703e-10, 'w': -0.2533619102441541}
2026-01-12 18:50:48,413 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:48,413 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:48,414 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:48,414 - INFO - integration_test - Step 20 completed in 0.948s
2026-01-12 18:50:48,432 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-12 18:50:48,434 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.43450335 2.77790939 0.49721337 3.00000003 5.40000004]
2026-01-12 18:50:48,435 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.411m, drift=0.052m)
2026-01-12 18:50:48,435 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-12 18:50:48,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:48,538 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.435, 2.778), path_start=(0.000, 0.000), dist=5.233m
2026-01-12 18:50:48,538 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-12 18:50:48,600 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:48,612 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:48,612 - INFO - integration_test - Warmstart k=0: x0=4.434503353957094 , y0=2.7779093866209443 , psi0=0.49721336541029104 , v0=3.0000000299875706 , spline0=5.046464687332343 , a0=0.0 , w0=0.0
2026-01-12 18:50:48,612 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:48,613 - INFO - integration_test - Dyn residual k=0: pred=[4.698177897570485, 2.921002841570932, 0.49721336541029104, 3.0000000299875706, 5.3464646903311], ws=[4.698177894934832, 2.9210028401405905, 0.4972133654102908, 3.0, 5.260680522738655], res=[2.6356525850701473e-09, 1.4303416229211052e-09, 2.220446049250313e-16, 2.998757064887059e-08, 0.08578416759244512], res_norm=8.578e-02
2026-01-12 18:50:48,614 - INFO - integration_test - Dyn residual k=1: pred=[4.96185243591257, 3.0640962936602367, 0.4972133654102908, 3.0, 5.560680522738655], ws=[4.96185243591257, 3.0640962936602367, 0.4972133654102908, 3.0, 5.753850074564357], res=[0.0, 0.0, 0.0, 0.0, -0.1931695518257026], res_norm=1.932e-01
2026-01-12 18:50:48,615 - INFO - integration_test - Dyn residual k=2: pred=[5.2255269768903085, 3.207189747179883, 0.4972133654102908, 3.0, 6.053850074564357], ws=[5.2255269768903085, 3.207189747179883, 0.4972133654102908, 3.0, 5.915978123790467], res=[0.0, 0.0, 0.0, 0.0, 0.13787195077389036], res_norm=1.379e-01
2026-01-12 18:50:48,631 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,711 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:48,728 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,739 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:48,756 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,769 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:48,785 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,799 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:48,815 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,826 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,840 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,852 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,867 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,879 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,893 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,905 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,920 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,932 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,947 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,958 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:48,973 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:48,985 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,214 - INFO - integration_test - Step 21: MPC solve successful
2026-01-12 18:50:49,301 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-12 18:50:49,301 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:49,301 - INFO - integration_test - === Applying control at step 21 ===
2026-01-12 18:50:49,302 - INFO - integration_test -   Control dict from planner: {'a': 8.179096499879108e-11, 'w': -0.23222225705407637}
2026-01-12 18:50:49,302 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:49,302 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:49,303 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:49,303 - INFO - integration_test - Step 21 completed in 0.869s
2026-01-12 18:50:49,315 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-12 18:50:49,317 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.6998156  2.91792856 0.47399114 3.00000003 5.70000004]
2026-01-12 18:50:49,317 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.387m, drift=0.248m)
2026-01-12 18:50:49,317 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-12 18:50:49,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:49,396 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.700, 2.918), path_start=(0.000, 0.000), dist=5.532m
2026-01-12 18:50:49,396 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-12 18:50:49,456 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:49,467 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:49,467 - INFO - integration_test - Warmstart k=0: x0=4.699815599120207 , y0=2.9179285635880827 , psi0=0.4739911397048834 , v0=3.00000002999575 , spline0=5.54848489235212 , a0=0.0 , w0=0.0
2026-01-12 18:50:49,467 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:49,468 - INFO - integration_test - Dyn residual k=0: pred=[4.966741699664609, 3.0548608776994883, 0.4739911397048834, 3.00000002999575, 5.848484895351695], ws=[4.966741696995726, 3.054860876330359, 0.4739911397048835, 3.0, 5.716588680590827], res=[2.668882892464808e-09, 1.3691292544137923e-09, -1.1102230246251565e-16, 2.9995749883937606e-08, 0.131896214760868], res_norm=1.319e-01
2026-01-12 18:50:49,469 - INFO - integration_test - Dyn residual k=1: pred=[5.233667794871245, 3.1917931890726354, 0.4739911397048835, 3.0, 6.016588680590827], ws=[5.233667794871245, 3.1917931890726354, 0.4739911397048835, 3.0, 6.156081613141108], res=[0.0, 0.0, 0.0, 0.0, -0.13949293255028117], res_norm=1.395e-01
2026-01-12 18:50:49,470 - INFO - integration_test - Dyn residual k=2: pred=[5.500593892746764, 3.328725501814912, 0.4739911397048835, 3.0, 6.456081613141108], ws=[5.500593892746764, 3.328725501814912, 0.4739911397048835, 3.0, 6.332532819033498], res=[0.0, 0.0, 0.0, 0.0, 0.12354879410760944], res_norm=1.235e-01
2026-01-12 18:50:49,486 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,566 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:49,582 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,595 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:49,612 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,624 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:49,640 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,652 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:49,669 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,681 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,696 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,707 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,722 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,733 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,749 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,761 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,776 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,787 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,803 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,816 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:49,831 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:49,842 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,010 - INFO - integration_test - Step 22: MPC solve successful
2026-01-12 18:50:50,098 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-12 18:50:50,098 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:50,098 - INFO - integration_test - === Applying control at step 22 ===
2026-01-12 18:50:50,098 - INFO - integration_test -   Control dict from planner: {'a': 2.726920748683778e-11, 'w': -0.2590254042922226}
2026-01-12 18:50:50,098 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:50,098 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:50,099 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:50,100 - INFO - integration_test - Step 22 completed in 0.783s
2026-01-12 18:50:50,113 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-12 18:50:50,114 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.9684852  3.05138873 0.4480886  3.00000003 6.00000005]
2026-01-12 18:50:50,115 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.562m, drift=0.548m)
2026-01-12 18:50:50,115 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-12 18:50:50,116 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:50,193 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.968, 3.051), path_start=(0.000, 0.000), dist=5.831m
2026-01-12 18:50:50,193 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-12 18:50:50,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:50,264 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:50,264 - INFO - integration_test - Warmstart k=0: x0=4.968485200317268 , y0=3.0513887271988263 , psi0=0.44808859927566114 , v0=3.0000000299984766 , spline0=5.7474747943418665 , a0=0.0 , w0=0.0
2026-01-12 18:50:50,264 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:50,265 - INFO - integration_test - Dyn residual k=0: pred=[5.238868258144992, 3.181361816104331, 0.44808859927566114, 3.0000000299984766, 6.047474797341714], ws=[5.238868255441298, 3.1813618148046663, 0.44808859927566136, 3.0, 6.158792347370487], res=[2.703693269268115e-09, 1.2996648202090455e-09, -2.220446049250313e-16, 2.9998476591686085e-08, -0.1113175500287733], res_norm=1.113e-01
2026-01-12 18:50:50,266 - INFO - integration_test - Dyn residual k=1: pred=[5.509251310565329, 3.3113349024105063, 0.44808859927566136, 3.0, 6.458792347370487], ws=[5.509251310565329, 3.3113349024105063, 0.44808859927566136, 3.0, 6.34312806949064], res=[0.0, 0.0, 0.0, 0.0, 0.1156642778798469], res_norm=1.157e-01
2026-01-12 18:50:50,267 - INFO - integration_test - Dyn residual k=2: pred=[5.779634365689359, 3.4413079900163464, 0.44808859927566136, 3.0, 6.64312806949064], ws=[5.779634365689359, 3.4413079900163464, 0.44808859927566136, 3.0, 6.498417710254682], res=[0.0, 0.0, 0.0, 0.0, 0.1447103592359582], res_norm=1.447e-01
2026-01-12 18:50:50,283 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,362 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:50,378 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,390 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:50,407 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,420 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:50,436 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,449 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:50,465 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,477 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,492 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,503 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,518 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,530 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,544 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,556 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,570 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,583 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,598 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,609 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,623 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:50,635 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:50,785 - INFO - integration_test - Step 23: MPC solve successful
2026-01-12 18:50:50,876 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-12 18:50:50,877 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:50,877 - INFO - integration_test - === Applying control at step 23 ===
2026-01-12 18:50:50,877 - INFO - integration_test -   Control dict from planner: {'a': 9.171490068969124e-12, 'w': -0.2638116044970023}
2026-01-12 18:50:50,877 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:50,877 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:50,878 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:50,879 - INFO - integration_test - Step 23 completed in 0.764s
2026-01-12 18:50:50,890 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-12 18:50:50,892 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.24055122 3.17778044 0.42170744 3.00000003 6.30000005]
2026-01-12 18:50:50,893 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.465m, drift=0.242m)
2026-01-12 18:50:50,893 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-12 18:50:50,894 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:50,968 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.241, 3.178), path_start=(0.000, 0.000), dist=6.129m
2026-01-12 18:50:50,968 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-12 18:50:51,029 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:51,041 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:51,041 - INFO - integration_test - Warmstart k=0: x0=5.240551217423545 , y0=3.1777804379433254 , psi0=0.4217074388259609 , v0=3.0000000299993936 , spline0=6.148484898351907 , a0=0.0 , w0=0.0
2026-01-12 18:50:51,042 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:51,043 - INFO - integration_test - Dyn residual k=0: pred=[5.5142686352514545, 3.3005761095998842, 0.4217074388259609, 3.0000000299993936, 6.448484901351847], ws=[5.5142686325143355, 3.3005761083719527, 0.42170743882596096, 3.0, 6.3105037192567375], res=[2.7371189759151093e-09, 1.2279315342311747e-09, -5.551115123125783e-17, 2.9999393635904426e-08, 0.13798118209510957], res_norm=1.380e-01
2026-01-12 18:50:51,044 - INFO - integration_test - Dyn residual k=1: pred=[5.787986047605126, 3.42337177880058, 0.42170743882596096, 3.0, 6.610503719256737], ws=[5.787986047605126, 3.42337177880058, 0.42170743882596096, 3.0, 6.514382550914841], res=[0.0, 0.0, 0.0, 0.0, 0.0961211683418961], res_norm=9.612e-02
2026-01-12 18:50:51,045 - INFO - integration_test - Dyn residual k=2: pred=[6.061703462695917, 3.5461674492292072, 0.42170743882596096, 3.0, 6.814382550914841], ws=[6.061703462695917, 3.5461674492292072, 0.42170743882596096, 3.0, 6.895264647565258], res=[0.0, 0.0, 0.0, 0.0, -0.08088209665041735], res_norm=8.088e-02
2026-01-12 18:50:51,059 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,145 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:51,162 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,175 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:51,192 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,204 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:51,220 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,234 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:51,252 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,264 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,279 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,290 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,304 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,316 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,331 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,343 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,357 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,369 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,396 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,410 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,421 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:51,588 - INFO - integration_test - Step 24: MPC solve successful
2026-01-12 18:50:51,682 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-12 18:50:51,682 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:51,682 - INFO - integration_test - === Applying control at step 24 ===
2026-01-12 18:50:51,682 - INFO - integration_test -   Control dict from planner: {'a': 3.0709782083740208e-12, 'w': -0.2661959990087569}
2026-01-12 18:50:51,683 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:51,683 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:51,684 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:51,684 - INFO - integration_test - Step 24 completed in 0.792s
2026-01-12 18:50:51,697 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-12 18:50:51,699 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.5158706  3.2969187  0.39508784 3.00000003 6.60000005]
2026-01-12 18:50:51,699 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.421m, drift=0.542m)
2026-01-12 18:50:51,699 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-12 18:50:51,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:51,777 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.516, 3.297), path_start=(0.000, 0.000), dist=6.426m
2026-01-12 18:50:51,777 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-12 18:50:51,840 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:51,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:51,851 - INFO - integration_test - Warmstart k=0: x0=5.51587059959226 , y0=3.296918698950322 , psi0=0.3950878389250852 , v0=3.000000029999701 , spline0=6.347474800341776 , a0=0.0 , w0=0.0
2026-01-12 18:50:51,851 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:51,853 - INFO - integration_test - Dyn residual k=0: pred=[5.792759430260537, 3.4123854788098833, 0.3950878389250852, 3.000000029999701, 6.647474803341746], ws=[5.792759427491676, 3.412385477655227, 0.39508783892508514, 3.0, 6.754691280206254], res=[2.7688606962783524e-09, 1.1546563705167046e-09, 5.551115123125783e-17, 2.999970094563764e-08, -0.10721647686450808], res_norm=1.072e-01
2026-01-12 18:50:51,854 - INFO - integration_test - Dyn residual k=1: pred=[6.069648255391092, 3.527852256360132, 0.39508783892508514, 3.0, 7.054691280206254], ws=[6.069648255391092, 3.527852256360132, 0.39508783892508514, 3.0, 6.934170463263815], res=[0.0, 0.0, 0.0, 0.0, 0.12052081694243899], res_norm=1.205e-01
2026-01-12 18:50:51,855 - INFO - integration_test - Dyn residual k=2: pred=[6.346537083290508, 3.643319035065037, 0.39508783892508514, 3.0, 7.234170463263815], ws=[6.346537083290508, 3.643319035065037, 0.39508783892508514, 3.0, 7.386819407039798], res=[0.0, 0.0, 0.0, 0.0, -0.1526489437759837], res_norm=1.526e-01
2026-01-12 18:50:51,873 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,952 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:51,969 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:51,982 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:51,998 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,012 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:52,028 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,039 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:52,055 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,067 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,094 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,108 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,120 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,146 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,162 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,173 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,187 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,199 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,215 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,226 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,369 - INFO - integration_test - Step 25: MPC solve successful
2026-01-12 18:50:52,467 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-12 18:50:52,467 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:52,467 - INFO - integration_test - === Applying control at step 25 ===
2026-01-12 18:50:52,467 - INFO - integration_test -   Control dict from planner: {'a': 9.991586236278768e-13, 'w': -0.27702187587090854}
2026-01-12 18:50:52,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:52,467 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:52,468 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:52,469 - INFO - integration_test - Step 25 completed in 0.770s
2026-01-12 18:50:52,482 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-12 18:50:52,483 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.79432326 3.40853574 0.36738565 3.00000003 6.90000006]
2026-01-12 18:50:52,483 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.492m, drift=0.236m)
2026-01-12 18:50:52,483 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-12 18:50:52,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:52,559 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.794, 3.409), path_start=(0.000, 0.000), dist=6.723m
2026-01-12 18:50:52,559 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-12 18:50:52,620 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:52,631 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:52,631 - INFO - integration_test - Warmstart k=0: x0=5.794323255999295 , y0=3.4085357430779606 , psi0=0.36738565133799433 , v0=3.000000029999801 , spline0=6.748484904351858 , a0=0.0 , w0=0.0
2026-01-12 18:50:52,631 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:52,632 - INFO - integration_test - Dyn residual k=0: pred=[6.074304122961289, 3.5162887752171916, 0.36738565133799433, 3.000000029999801, 7.048484907351838], ws=[6.074304120161499, 3.5162887741396687, 0.3673856513379943, 3.0, 6.905383433449665], res=[2.79978973338757e-09, 1.077522959747057e-09, 5.551115123125783e-17, 2.999980086570986e-08, 0.1431014739021732], res_norm=1.431e-01
2026-01-12 18:50:52,633 - INFO - integration_test - Dyn residual k=1: pred=[6.354284984323703, 3.6240418052013768, 0.3673856513379943, 3.0, 7.205383433449665], ws=[6.354284984323703, 3.6240418052013768, 0.3673856513379943, 3.0, 7.105331934959521], res=[0.0, 0.0, 0.0, 0.0, 0.10005149849014394], res_norm=1.001e-01
2026-01-12 18:50:52,634 - INFO - integration_test - Dyn residual k=2: pred=[6.634265848485907, 3.731794836263085, 0.3673856513379943, 3.0, 7.405331934959521], ws=[6.634265848485907, 3.731794836263085, 0.3673856513379943, 3.0, 7.582615349619401], res=[0.0, 0.0, 0.0, 0.0, -0.17728341465987985], res_norm=1.773e-01
2026-01-12 18:50:52,650 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,729 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:52,746 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,758 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:52,774 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,786 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:52,802 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,816 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:52,833 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,845 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,861 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,872 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,887 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,899 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,914 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,925 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,951 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,966 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:52,978 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:52,993 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,004 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,147 - INFO - integration_test - Step 26: MPC solve successful
2026-01-12 18:50:53,257 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-12 18:50:53,257 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:53,257 - INFO - integration_test - === Applying control at step 26 ===
2026-01-12 18:50:53,257 - INFO - integration_test -   Control dict from planner: {'a': 3.112934582086532e-13, 'w': -0.27645856895188353}
2026-01-12 18:50:53,257 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:53,257 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:53,259 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:53,259 - INFO - integration_test - Step 26 completed in 0.777s
2026-01-12 18:50:53,270 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-12 18:50:53,272 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.07575783 3.51240514 0.33973979 3.00000003 7.20000006]
2026-01-12 18:50:53,273 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.457m, drift=0.536m)
2026-01-12 18:50:53,273 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-12 18:50:53,274 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:53,351 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.076, 3.512), path_start=(0.000, 0.000), dist=7.018m
2026-01-12 18:50:53,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-12 18:50:53,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:53,424 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:53,424 - INFO - integration_test - Warmstart k=0: x0=6.075757827383136 , y0=3.512405140938369 , psi0=0.339739794442806 , v0=3.000000029999832 , spline0=6.94747480634174 , a0=0.0 , w0=0.0
2026-01-12 18:50:53,424 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:53,425 - INFO - integration_test - Dyn residual k=0: pred=[6.358610252853588, 3.6123776731933432, 0.339739794442806, 3.000000029999832, 7.247474809341723], ws=[6.35861025002508, 3.6123776721936234, 0.339739794442806, 3.0, 7.351436025741206], res=[2.8285080944101537e-09, 9.997198624489556e-10, 0.0, 2.999983195195455e-08, -0.10396121639948319], res_norm=1.040e-01
2026-01-12 18:50:53,426 - INFO - integration_test - Dyn residual k=1: pred=[6.641462672667025, 3.7123502034488776, 0.339739794442806, 3.0, 7.651436025741206], ws=[6.641462672667025, 3.7123502034488776, 0.339739794442806, 3.0, 7.527061803169679], res=[0.0, 0.0, 0.0, 0.0, 0.12437422257152697], res_norm=1.244e-01
2026-01-12 18:50:53,427 - INFO - integration_test - Dyn residual k=2: pred=[6.92431509530897, 3.8123227347041317, 0.339739794442806, 3.0, 7.827061803169679], ws=[6.92431509530897, 3.8123227347041317, 0.339739794442806, 3.0, 7.975276520864509], res=[0.0, 0.0, 0.0, 0.0, -0.14821471769483008], res_norm=1.482e-01
2026-01-12 18:50:53,443 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,522 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:53,538 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,551 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:53,568 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,582 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:53,598 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,610 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:53,626 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,637 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,652 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,665 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,680 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,691 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,705 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,717 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,732 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,744 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,759 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,770 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,785 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:53,797 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:53,949 - INFO - integration_test - Step 27: MPC solve successful
2026-01-12 18:50:54,250 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-12 18:50:54,250 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:54,250 - INFO - integration_test - === Applying control at step 27 ===
2026-01-12 18:50:54,251 - INFO - integration_test -   Control dict from planner: {'a': 1.2753232165033452e-13, 'w': -0.2843009766069417}
2026-01-12 18:50:54,251 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:54,251 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:54,252 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:54,252 - INFO - integration_test - Step 27 completed in 0.980s
2026-01-12 18:50:54,265 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-12 18:50:54,266 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.35999317 3.60834372 0.3113097  3.00000003 7.50000006]
2026-01-12 18:50:54,266 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.524m, drift=0.230m)
2026-01-12 18:50:54,266 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-12 18:50:54,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:54,343 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.360, 3.608), path_start=(0.000, 0.000), dist=7.312m
2026-01-12 18:50:54,343 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-12 18:50:54,403 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:54,414 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:54,415 - INFO - integration_test - Warmstart k=0: x0=6.359993169624801 , y0=3.6083437160600966 , psi0=0.31130969678211184 , v0=3.000000029999845 , spline0=7.348484910351826 , a0=0.0 , w0=0.0
2026-01-12 18:50:54,415 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:54,416 - INFO - integration_test - Dyn residual k=0: pred=[6.6455731381547745, 3.7002354097783527, 0.31130969678211184, 3.000000029999845, 7.64848491335181], ws=[6.6455731352989895, 3.7002354088594407, 0.3113096967821116, 3.0, 7.501286775895938], res=[2.8557849418575643e-09, 9.189120575570087e-10, 2.220446049250313e-16, 2.999984483054163e-08, 0.14719813745587196], res_norm=1.472e-01
2026-01-12 18:50:54,417 - INFO - integration_test - Dyn residual k=1: pred=[6.931153100973178, 3.7921271016587847, 0.3113096967821116, 3.0, 7.801286775895938], ws=[6.931153100973178, 3.7921271016587847, 0.3113096967821116, 3.0, 8.001272592408577], res=[0.0, 0.0, 0.0, 0.0, -0.19998581651263958], res_norm=2.000e-01
2026-01-12 18:50:54,417 - INFO - integration_test - Dyn residual k=2: pred=[7.216733066647367, 3.884018794458129, 0.3113096967821116, 3.0, 8.301272592408578], ws=[7.216733066647367, 3.884018794458129, 0.3113096967821116, 3.0, 8.172028531905388], res=[0.0, 0.0, 0.0, 0.0, 0.12924406050318993], res_norm=1.292e-01
2026-01-12 18:50:54,433 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,515 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:54,531 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,544 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:54,561 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,573 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:54,589 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,602 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:54,619 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,631 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,646 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,657 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,672 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,684 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,699 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,711 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,726 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,737 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,752 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,764 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,780 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:54,791 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:54,936 - INFO - integration_test - Step 28: MPC solve successful
2026-01-12 18:50:55,037 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-12 18:50:55,037 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:55,037 - INFO - integration_test - === Applying control at step 28 ===
2026-01-12 18:50:55,038 - INFO - integration_test -   Control dict from planner: {'a': -2.574563242217543e-10, 'w': -0.2841576915927744}
2026-01-12 18:50:55,038 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:55,038 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:55,039 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:55,040 - INFO - integration_test - Step 28 completed in 0.774s
2026-01-12 18:50:55,051 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-12 18:50:55,052 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.64684021 3.69616583 0.28289393 3.00000003 7.80000006]
2026-01-12 18:50:55,052 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.495m, drift=0.530m)
2026-01-12 18:50:55,052 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-12 18:50:55,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:55,131 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.647, 3.696), path_start=(0.000, 0.000), dist=7.605m
2026-01-12 18:50:55,131 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-12 18:50:55,191 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:55,202 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:55,202 - INFO - integration_test - Warmstart k=0: x0=6.646840206293463 , y0=3.696165829663214 , psi0=0.2828939276228344 , v0=3.000000029974099 , spline0=7.547474812339135 , a0=0.0 , w0=0.0
2026-01-12 18:50:55,202 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:55,204 - INFO - integration_test - Dyn residual k=0: pred=[6.934915707727637, 3.7799065442045623, 0.2828939276228344, 3.000000029974099, 7.847474815336545], ws=[6.934915704849368, 3.779906543367878, 0.28289392762283416, 3.0, 7.747004178072691], res=[2.8782682903738532e-09, 8.366844994611711e-10, 2.220446049250313e-16, 2.9974099202689786e-08, 0.10047063726385375], res_norm=1.005e-01
2026-01-12 18:50:55,205 - INFO - integration_test - Dyn residual k=1: pred=[7.2229912034052735, 3.8636472570725418, 0.28289392762283416, 3.0, 8.047004178072692], ws=[7.2229912034052735, 3.8636472570725418, 0.28289392762283416, 3.0, 8.121804607166574], res=[0.0, 0.0, 0.0, 0.0, -0.07480042909388196], res_norm=7.480e-02
2026-01-12 18:50:55,206 - INFO - integration_test - Dyn residual k=2: pred=[7.5110667019611785, 3.9473879707772057, 0.28289392762283416, 3.0, 8.421804607166575], ws=[7.5110667019611785, 3.9473879707772057, 0.28289392762283416, 3.0, 8.56680905451265], res=[0.0, 0.0, 0.0, 0.0, -0.14500444734607498], res_norm=1.450e-01
2026-01-12 18:50:55,222 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,301 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:55,318 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,331 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:55,347 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,360 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:55,376 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,388 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:55,405 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,417 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,432 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,443 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,458 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,469 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,484 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,496 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,512 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,523 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,538 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,550 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,565 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:55,577 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:55,725 - INFO - integration_test - Step 29: MPC solve successful
2026-01-12 18:50:55,830 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-12 18:50:55,830 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:55,830 - INFO - integration_test - === Applying control at step 29 ===
2026-01-12 18:50:55,830 - INFO - integration_test -   Control dict from planner: {'a': 1.7171074712113475e-10, 'w': -0.28584629834900493}
2026-01-12 18:50:55,830 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:55,831 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:55,832 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:55,832 - INFO - integration_test - Step 29 completed in 0.781s
2026-01-12 18:50:55,845 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-12 18:50:55,846 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[6.93607325 3.77577816 0.2543093  3.00000003 8.10000007]
2026-01-12 18:50:55,847 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.535m, drift=0.225m)
2026-01-12 18:50:55,847 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-12 18:50:55,848 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:55,924 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(6.936, 3.776), path_start=(0.000, 0.000), dist=7.897m
2026-01-12 18:50:55,924 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-12 18:50:55,985 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:55,996 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:55,996 - INFO - integration_test - Warmstart k=0: x0=6.936073246397708 , y0=3.775778155414643 , psi0=0.2543092977879339 , v0=3.0000000299912704 , spline0=7.7464647143281615 , a0=0.0 , w0=0.0
2026-01-12 18:50:55,996 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:55,997 - INFO - integration_test - Dyn residual k=0: pred=[7.226424436694909, 3.8512512505709604, 0.2543092977879339, 3.0000000299912704, 8.04646471732729], ws=[7.226424433792243, 3.8512512498164493, 0.254309297787934, 3.0, 8.199218558475293], res=[2.9026665515630157e-09, 7.545111202489352e-10, -1.1102230246251565e-16, 2.999127035607785e-08, -0.1527538411480034], res_norm=1.528e-01
2026-01-12 18:50:55,998 - INFO - integration_test - Dyn residual k=1: pred=[7.516775621186777, 3.926724344218256, 0.254309297787934, 3.0, 8.499218558475294], ws=[7.516775621186778, 3.926724344218256, 0.254309297787934, 3.0, 8.596135524312288], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, -0.0969169658369946], res_norm=9.692e-02
2026-01-12 18:50:55,999 - INFO - integration_test - Dyn residual k=2: pred=[7.8071268085813115, 4.002197438620062, 0.254309297787934, 3.0, 8.896135524312289], ws=[7.807126808581312, 4.002197438620062, 0.254309297787934, 3.0, 8.764497052437598], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, 0.13163847187469102], res_norm=1.316e-01
2026-01-12 18:50:56,015 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,092 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,108 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,120 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,137 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,158 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,174 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,187 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,203 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,215 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,230 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,241 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,256 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,268 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,283 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,294 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,309 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,320 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,335 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,347 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,362 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,372 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:56,536 - INFO - integration_test - Step 30: MPC solve successful
2026-01-12 18:50:56,641 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-12 18:50:56,642 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:56,642 - INFO - integration_test - === Applying control at step 30 ===
2026-01-12 18:50:56,642 - INFO - integration_test -   Control dict from planner: {'a': 5.7102222910588896e-11, 'w': -0.28536416784028934}
2026-01-12 18:50:56,642 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:56,642 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:56,643 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:56,644 - INFO - integration_test - Step 30 completed in 0.798s
2026-01-12 18:50:56,656 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-12 18:50:56,658 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.22746182 3.8470985  0.22577288 3.00000003 8.40000007]
2026-01-12 18:50:56,659 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.546m, drift=0.081m)
2026-01-12 18:50:56,659 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-12 18:50:56,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:56,736 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.227, 3.847), path_start=(0.000, 0.000), dist=8.188m
2026-01-12 18:50:56,736 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-12 18:50:56,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:56,809 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:56,810 - INFO - integration_test - Warmstart k=0: x0=7.227461824335363 , y0=3.847098497541543 , psi0=0.22577288100390494 , v0=3.0000000299969805 , spline0=8.147474818337962 , a0=0.0 , w0=0.0
2026-01-12 18:50:56,810 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:56,811 - INFO - integration_test - Dyn residual k=0: pred=[7.519848241640764, 3.914256406793777, 0.22577288100390494, 3.0000000299969805, 8.44747482133766], ws=[7.519848238717194, 3.914256406122265, 0.22577288100390502, 3.0, 8.34541176738598], res=[2.923569830670658e-09, 6.715117351063782e-10, -8.326672684688674e-17, 2.99969804551381e-08, 0.10206305395168158], res_norm=1.021e-01
2026-01-12 18:50:56,812 - INFO - integration_test - Dyn residual k=1: pred=[7.812234653099024, 3.9814143147029872, 0.22577288100390502, 3.0, 8.64541176738598], ws=[7.812234653099025, 3.9814143147029872, 0.22577288100390502, 3.0, 8.718344888725948], res=[-8.881784197001252e-16, 0.0, 0.0, 0.0, -0.07293312133996821], res_norm=7.293e-02
2026-01-12 18:50:56,813 - INFO - integration_test - Dyn residual k=2: pred=[8.104621067480855, 4.04857222328371, 0.22577288100390502, 3.0, 9.018344888725949], ws=[8.104621067480855, 4.04857222328371, 0.22577288100390502, 3.0, 8.959281104977679], res=[0.0, 0.0, 0.0, 0.0, 0.05906378374826993], res_norm=5.906e-02
2026-01-12 18:50:56,828 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,908 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,924 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,936 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,953 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,966 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:56,982 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:56,995 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:57,011 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,022 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,037 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,049 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,075 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,090 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,102 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,117 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,129 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,144 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,155 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,170 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,182 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,358 - INFO - integration_test - Step 31: MPC solve successful
2026-01-12 18:50:57,466 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-12 18:50:57,466 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:57,466 - INFO - integration_test - === Applying control at step 31 ===
2026-01-12 18:50:57,466 - INFO - integration_test -   Control dict from planner: {'a': 1.9144309699455845e-11, 'w': -0.28312027089162534}
2026-01-12 18:50:57,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:57,467 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:57,468 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:57,468 - INFO - integration_test - Step 31 completed in 0.810s
2026-01-12 18:50:57,486 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-12 18:50:57,487 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.52075981 3.91010869 0.19746085 3.00000003 8.70000007]
2026-01-12 18:50:57,487 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.573m, drift=0.219m)
2026-01-12 18:50:57,487 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-12 18:50:57,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:57,570 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.521, 3.910), path_start=(0.000, 0.000), dist=8.476m
2026-01-12 18:50:57,570 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-12 18:50:57,631 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:57,642 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:57,642 - INFO - integration_test - Warmstart k=0: x0=7.5207598066366135 , y0=3.9101086855826015 , psi0=0.1974608539147424 , v0=3.000000029998895 , spline0=8.346464720327749 , a0=0.0 , w0=0.0
2026-01-12 18:50:57,642 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:57,643 - INFO - integration_test - Dyn residual k=0: pred=[7.814930170092515, 3.9689627344166185, 0.1974608539147424, 3.000000029998895, 8.646464723327638], ws=[7.814930167150919, 3.9689627338280995, 0.19746085391474244, 3.0, 8.797106818279584], res=[2.941595411698472e-09, 5.885190113019689e-10, -2.7755575615628914e-17, 2.9998894923721764e-08, -0.15064209495194625], res_norm=1.506e-01
2026-01-12 18:50:57,644 - INFO - integration_test - Dyn residual k=1: pred=[8.109100527665225, 4.0278167820735975, 0.19746085391474244, 3.0, 9.097106818279585], ws=[8.109100527665225, 4.0278167820735975, 0.19746085391474244, 3.0, 9.212674933561498], res=[0.0, 0.0, 0.0, 0.0, -0.11556811528191346], res_norm=1.156e-01
2026-01-12 18:50:57,645 - INFO - integration_test - Dyn residual k=2: pred=[8.40327088817953, 4.086670830319096, 0.19746085391474244, 3.0, 9.512674933561499], ws=[8.40327088817953, 4.086670830319096, 0.19746085391474244, 3.0, 9.369296271192948], res=[0.0, 0.0, 0.0, 0.0, 0.14337866236855135], res_norm=1.434e-01
2026-01-12 18:50:57,661 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,743 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:57,760 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,772 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:57,789 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,802 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:57,818 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,830 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:57,847 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,858 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,872 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,884 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,899 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,911 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,925 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,936 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,951 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,963 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:57,978 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:57,989 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,003 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,015 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,170 - INFO - integration_test - Step 32: MPC solve successful
2026-01-12 18:50:58,286 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-12 18:50:58,287 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:58,287 - INFO - integration_test - === Applying control at step 32 ===
2026-01-12 18:50:58,287 - INFO - integration_test -   Control dict from planner: {'a': 6.359603918384192e-12, 'w': -0.2989965205328193}
2026-01-12 18:50:58,287 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:58,287 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:58,288 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:58,288 - INFO - integration_test - Step 32 completed in 0.802s
2026-01-12 18:50:58,301 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-12 18:50:58,302 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.81576613 3.9645565  0.1675612  3.00000003 9.00000008]
2026-01-12 18:50:58,302 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.582m, drift=0.087m)
2026-01-12 18:50:58,302 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-12 18:50:58,303 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:58,379 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.816, 3.965), path_start=(0.000, 0.000), dist=8.764m
2026-01-12 18:50:58,379 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-12 18:50:58,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:58,449 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:58,449 - INFO - integration_test - Warmstart k=0: x0=7.81576613352366 , y0=3.964556497542633 , psi0=0.16756120186146048 , v0=3.000000029999531 , spline0=8.747474824337804 , a0=0.0 , w0=0.0
2026-01-12 18:50:58,449 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:58,451 - INFO - integration_test - Dyn residual k=0: pred=[8.111564467611839, 4.014589959851669, 0.16756120186146048, 3.000000029999531, 9.047474827337757], ws=[8.111564464653902, 4.014589959351343, 0.1675612018614605, 3.0, 8.944617282861216], res=[2.957936118264115e-09, 5.003260028502154e-10, -2.7755575615628914e-17, 2.999953085947027e-08, 0.1028575444765405], res_norm=1.029e-01
2026-01-12 18:50:58,451 - INFO - integration_test - Dyn residual k=1: pred=[8.407362795784145, 4.064623421160054, 0.1675612018614605, 3.0, 9.244617282861217], ws=[8.407362795784145, 4.064623421160054, 0.1675612018614605, 3.0, 9.619661280686241], res=[0.0, 0.0, 0.0, 0.0, -0.3750439978250242], res_norm=3.750e-01
2026-01-12 18:50:58,452 - INFO - integration_test - Dyn residual k=2: pred=[8.703161126914388, 4.114656882968764, 0.1675612018614605, 3.0, 9.919661280686242], ws=[8.703161126914388, 4.114656882968764, 0.1675612018614605, 3.0, 9.556614746728025], res=[0.0, 0.0, 0.0, 0.0, 0.36304653395821695], res_norm=3.630e-01
2026-01-12 18:50:58,468 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,548 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:58,564 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,577 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:58,594 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,606 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:58,622 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,635 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:58,650 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,662 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,677 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,687 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,702 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,717 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,735 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,749 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,769 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,784 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,803 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,816 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:58,833 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:58,846 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,026 - INFO - integration_test - Step 33: MPC solve successful
2026-01-12 18:50:59,163 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-12 18:50:59,163 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:50:59,163 - INFO - integration_test - === Applying control at step 33 ===
2026-01-12 18:50:59,163 - INFO - integration_test -   Control dict from planner: {'a': 2.117184621497386e-12, 'w': -0.24858857711150925}
2026-01-12 18:50:59,163 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:50:59,163 - INFO - integration_test -   Planner output success: True
2026-01-12 18:50:59,164 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:50:59,165 - INFO - integration_test - Step 33 completed in 0.863s
2026-01-12 18:50:59,179 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-12 18:50:59,181 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.11215586 4.01090839 0.14270234 3.00000003 9.30000008]
2026-01-12 18:50:59,181 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.607m, drift=0.213m)
2026-01-12 18:50:59,181 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-12 18:50:59,182 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:59,275 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.112, 4.011), path_start=(0.000, 0.000), dist=9.050m
2026-01-12 18:50:59,275 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-12 18:50:59,337 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:50:59,349 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:50:59,349 - INFO - integration_test - Warmstart k=0: x0=8.112155858533225 , y0=4.010908391861253 , psi0=0.14270234415030955 , v0=3.0000000299997427 , spline0=8.946464726327676 , a0=0.0 , w0=0.0
2026-01-12 18:50:59,349 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:50:59,350 - INFO - integration_test - Dyn residual k=0: pred=[8.409106447766781, 4.0535739441702106, 0.14270234415030955, 3.0000000299997427, 9.24646472932765], ws=[8.4091064447973, 4.053573943743559, 0.14270234415030947, 3.0, 9.59792319458513], res=[2.9694806613633773e-09, 4.2665160293609006e-10, 8.326672684688674e-17, 2.999974269002337e-08, -0.3514584652574797], res_norm=3.515e-01
2026-01-12 18:50:59,351 - INFO - integration_test - Dyn residual k=1: pred=[8.706057031061377, 4.0962394956258645, 0.14270234415030947, 3.0, 9.89792319458513], ws=[8.706057031061377, 4.0962394956258645, 0.14270234415030947, 3.0, 9.810190328856322], res=[0.0, 0.0, 0.0, 0.0, 0.08773286572880856], res_norm=8.773e-02
2026-01-12 18:50:59,352 - INFO - integration_test - Dyn residual k=2: pred=[9.003007617325453, 4.13890504750817, 0.14270234415030947, 3.0, 10.110190328856323], ws=[9.003007617325453, 4.13890504750817, 0.14270234415030947, 3.0, 9.966211699769485], res=[0.0, 0.0, 0.0, 0.0, 0.14397862908683834], res_norm=1.440e-01
2026-01-12 18:50:59,367 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,449 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:59,465 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,478 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:59,495 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,507 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:59,523 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,535 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:50:59,551 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,563 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,578 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,590 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,605 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,616 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,631 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,643 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,657 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,668 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,684 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,695 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,710 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:50:59,721 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:50:59,914 - INFO - integration_test - Step 34: MPC solve successful
2026-01-12 18:51:00,033 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-12 18:51:00,033 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:00,033 - INFO - integration_test - === Applying control at step 34 ===
2026-01-12 18:51:00,033 - INFO - integration_test -   Control dict from planner: {'a': 7.168972351782185e-13, 'w': -0.27709756629732735}
2026-01-12 18:51:00,033 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:00,033 - INFO - integration_test -   Planner output success: True
2026-01-12 18:51:00,034 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:00,035 - INFO - integration_test - Step 34 completed in 0.854s
2026-01-12 18:51:00,048 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-12 18:51:00,050 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.40965954 4.04945453 0.11499259 3.00000003 9.60000008]
2026-01-12 18:51:00,050 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.616m, drift=0.093m)
2026-01-12 18:51:00,050 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-12 18:51:00,051 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:00,127 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.410, 4.049), path_start=(0.000, 0.000), dist=9.334m
2026-01-12 18:51:00,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-12 18:51:00,188 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:00,199 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:00,199 - INFO - integration_test - Warmstart k=0: x0=8.409659536207178 , y0=4.049454533367064 , psi0=0.11499258752057681 , v0=3.000000029999814 , spline0=9.34747483033776 , a0=0.0 , w0=0.0
2026-01-12 18:51:00,199 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:00,201 - INFO - integration_test - Dyn residual k=0: pred=[8.707678229640663, 4.083876331172914, 0.11499258752057681, 3.000000029999814, 9.647474833337741], ws=[8.707678226660494, 4.083876330828699, 0.11499258752057662, 3.0, 9.542605237294442], res=[2.9801690004660486e-09, 3.4421532291162293e-10, 1.942890293094024e-16, 2.9999814188386154e-08, 0.10486959604329904], res_norm=1.049e-01
2026-01-12 18:51:00,202 - INFO - integration_test - Dyn residual k=1: pred=[9.005696917113811, 4.118298128290332, 0.11499258752057662, 3.0, 9.842605237294443], ws=[9.005696917113811, 4.118298128290332, 0.11499258752057662, 3.0, 9.98077642667279], res=[0.0, 0.0, 0.0, 0.0, -0.1381711893783475], res_norm=1.382e-01
2026-01-12 18:51:00,202 - INFO - integration_test - Dyn residual k=2: pred=[9.303715607567128, 4.152719925751966, 0.11499258752057662, 3.0, 10.28077642667279], ws=[9.303715607567128, 4.152719925751966, 0.11499258752057662, 3.0, 10.382702990113163], res=[0.0, 0.0, 0.0, 0.0, -0.10192656344037232], res_norm=1.019e-01
2026-01-12 18:51:00,218 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,301 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:00,318 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,331 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:00,348 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,361 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:00,377 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,389 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:00,405 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,417 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,432 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,443 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,458 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,469 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,484 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,496 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,512 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,523 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,538 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,550 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,564 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:00,576 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:00,724 - INFO - integration_test - Step 35: MPC solve successful
2026-01-12 18:51:01,075 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-12 18:51:01,076 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:01,076 - INFO - integration_test - === Applying control at step 35 ===
2026-01-12 18:51:01,076 - INFO - integration_test -   Control dict from planner: {'a': 2.2676996038724115e-13, 'w': -0.2608867663734147}
2026-01-12 18:51:01,076 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:01,076 - INFO - integration_test -   Planner output success: True
2026-01-12 18:51:01,077 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:01,078 - INFO - integration_test - Step 35 completed in 1.029s
2026-01-12 18:51:01,090 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-12 18:51:01,092 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.70809341 4.07998519 0.08890391 3.00000003 9.90000009]
2026-01-12 18:51:01,092 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.635m, drift=0.207m)
2026-01-12 18:51:01,092 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-12 18:51:01,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:01,180 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.708, 4.080), path_start=(0.000, 0.000), dist=9.617m
2026-01-12 18:51:01,180 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-12 18:51:01,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:01,253 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:01,253 - INFO - integration_test - Warmstart k=0: x0=8.708093408748827 , y0=4.079985190444475 , psi0=0.08890391088323535 , v0=3.000000029999837 , spline0=9.546464732327642 , a0=0.0 , w0=0.0
2026-01-12 18:51:01,253 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:01,254 - INFO - integration_test - Dyn residual k=0: pred=[9.006908606622204, 4.106621243453209, 0.08890391088323535, 3.000000029999837, 9.846464735327626], ws=[9.00690860363407, 4.10662124318685, 0.08890391088323524, 3.0, 10.19758959982143], res=[2.9881341845339193e-09, 2.6635937899754936e-10, 1.1102230246251565e-16, 2.9999836836935856e-08, -0.351124864493805], res_norm=3.511e-01
2026-01-12 18:51:01,256 - INFO - integration_test - Dyn residual k=1: pred=[9.305723798519313, 4.133257295929225, 0.08890391088323524, 3.0, 10.497589599821431], ws=[9.305723798519313, 4.133257295929225, 0.08890391088323524, 3.0, 10.409588842860718], res=[0.0, 0.0, 0.0, 0.0, 0.08800075696071374], res_norm=8.800e-02
2026-01-12 18:51:01,257 - INFO - integration_test - Dyn residual k=2: pred=[9.604538993404557, 4.159893348671599, 0.08890391088323524, 3.0, 10.709588842860718], ws=[9.604538993404557, 4.159893348671599, 0.08890391088323524, 3.0, 10.566078029664215], res=[0.0, 0.0, 0.0, 0.0, 0.14351081319650305], res_norm=1.435e-01
2026-01-12 18:51:01,272 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,351 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:01,368 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,381 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:01,398 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,410 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:01,426 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,438 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:01,453 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,466 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,481 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,492 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,507 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,519 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,534 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,546 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,560 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,572 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,587 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,599 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,614 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:01,626 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:01,818 - INFO - integration_test - Step 36: MPC solve successful
2026-01-12 18:51:01,945 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-12 18:51:01,945 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:01,945 - INFO - integration_test - === Applying control at step 36 ===
2026-01-12 18:51:01,945 - INFO - integration_test -   Control dict from planner: {'a': 7.91598887548689e-14, 'w': -0.24579940136060915}
2026-01-12 18:51:01,945 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:01,945 - INFO - integration_test -   Planner output success: True
2026-01-12 18:51:01,946 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:01,947 - INFO - integration_test - Step 36 completed in 0.855s
2026-01-12 18:51:01,958 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-12 18:51:01,960 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.00720586  4.10294632  0.06432397  3.00000003 10.20000009]
2026-01-12 18:51:01,961 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.646m, drift=0.099m)
2026-01-12 18:51:01,961 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-12 18:51:01,962 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:02,039 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.007, 4.103), path_start=(0.000, 0.000), dist=9.898m
2026-01-12 18:51:02,039 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-12 18:51:02,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:02,112 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:02,112 - INFO - integration_test - Warmstart k=0: x0=9.007205858013416 , y0=4.102946316461696 , psi0=0.06432397074717444 , v0=3.000000029999845 , spline0=9.947474836337728 , a0=0.0 , w0=0.0
2026-01-12 18:51:02,112 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:02,113 - INFO - integration_test - Dyn residual k=0: pred=[9.306585438989684, 4.122230203374488, 0.06432397074717444, 3.000000029999845, 10.247474839337713], ws=[9.306585435995903, 4.12223020318165, 0.06432397074717455, 3.0, 10.344294886558128], res=[2.9937812229263727e-09, 1.928377457716124e-10, -1.1102230246251565e-16, 2.999984483054163e-08, -0.09682004722041526], res_norm=9.682e-02
2026-01-12 18:51:02,114 - INFO - integration_test - Dyn residual k=1: pred=[9.60596501397839, 4.141514089901604, 0.06432397074717455, 3.0, 10.644294886558129], ws=[9.60596501397839, 4.141514089901604, 0.06432397074717455, 3.0, 10.580773903534624], res=[0.0, 0.0, 0.0, 0.0, 0.06352098302350484], res_norm=6.352e-02
2026-01-12 18:51:02,115 - INFO - integration_test - Dyn residual k=2: pred=[9.905344591960876, 4.160797976621558, 0.06432397074717455, 3.0, 10.880773903534624], ws=[9.905344591960876, 4.160797976621558, 0.06432397074717455, 3.0, 10.983173448480308], res=[0.0, 0.0, 0.0, 0.0, -0.10239954494568337], res_norm=1.024e-01
2026-01-12 18:51:02,131 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,212 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:02,230 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,242 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:02,259 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,272 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:02,289 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,302 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:02,318 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,330 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,345 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,356 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,370 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,383 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,398 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,409 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,424 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,436 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,451 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,463 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,479 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:02,490 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:02,641 - INFO - integration_test - Step 37: MPC solve successful
2026-01-12 18:51:02,767 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-12 18:51:02,767 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:02,767 - INFO - integration_test - === Applying control at step 37 ===
2026-01-12 18:51:02,767 - INFO - integration_test -   Control dict from planner: {'a': 1.5577857849339737e-14, 'w': -0.23997007376889357}
2026-01-12 18:51:02,767 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:02,767 - INFO - integration_test -   Planner output success: True
2026-01-12 18:51:02,769 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:02,769 - INFO - integration_test - Step 37 completed in 0.809s
2026-01-12 18:51:02,782 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-12 18:51:02,783 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.30678807  4.11863642  0.04032696  3.00000003 10.50000009]
2026-01-12 18:51:02,784 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.656m, drift=0.201m)
2026-01-12 18:51:02,784 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-12 18:51:02,785 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:02,861 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.307, 4.119), path_start=(0.000, 0.000), dist=10.177m
2026-01-12 18:51:02,861 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.177m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:02,861 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-12 18:51:02,922 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:02,933 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:02,933 - INFO - integration_test - Warmstart k=0: x0=9.3067880732638 , y0=4.118636418006329 , psi0=0.04032696337028508 , v0=3.0000000299998466 , spline0=10.348484940347813 , a0=0.0 , w0=0.0
2026-01-12 18:51:02,933 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:02,935 - INFO - integration_test - Dyn residual k=0: pred=[9.606544169722534, 4.1307312282906, 0.04032696337028508, 3.0000000299998466, 10.648484943347798], ws=[9.606544166724989, 4.130731228169652, 0.040326963370285185, 3.0, 10.79814614525527], res=[2.997545323069062e-09, 1.2094769630266455e-10, -1.0408340855860843e-16, 2.999984660689847e-08, -0.14966120190747212], res_norm=1.497e-01
2026-01-12 18:51:02,935 - INFO - integration_test - Dyn residual k=1: pred=[9.906300260186178, 4.142826038332975, 0.040326963370285185, 3.0, 11.09814614525527], ws=[9.906300260186178, 4.142826038332975, 0.040326963370285185, 3.0, 11.010905470721914], res=[0.0, 0.0, 0.0, 0.0, 0.08724067453335671], res_norm=8.724e-02
2026-01-12 18:51:02,936 - INFO - integration_test - Dyn residual k=2: pred=[10.206056353647368, 4.154920848496299, 0.040326963370285185, 3.0, 11.310905470721915], ws=[10.206056353647368, 4.154920848496299, 0.040326963370285185, 3.0, 11.16900229546275], res=[0.0, 0.0, 0.0, 0.0, 0.14190317525916463], res_norm=1.419e-01
2026-01-12 18:51:02,952 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,033 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,051 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,062 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,079 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,091 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,107 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,119 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,135 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,147 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,162 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,173 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,188 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,200 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,215 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,227 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,242 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,254 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,270 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,282 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,298 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,310 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:03,493 - INFO - integration_test - Step 38: MPC solve successful
2026-01-12 18:51:03,626 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-12 18:51:03,626 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:03,626 - INFO - integration_test - === Applying control at step 38 ===
2026-01-12 18:51:03,626 - INFO - integration_test -   Control dict from planner: {'a': 2.7206573091378534e-13, 'w': -0.22968791755714957}
2026-01-12 18:51:03,626 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:03,626 - INFO - integration_test -   Planner output success: True
2026-01-12 18:51:03,628 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:03,628 - INFO - integration_test - Step 38 completed in 0.845s
2026-01-12 18:51:03,641 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-12 18:51:03,643 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.60665671  4.1272878   0.01735817  3.00000003 10.80000009]
2026-01-12 18:51:03,643 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.670m, drift=0.104m)
2026-01-12 18:51:03,643 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-12 18:51:03,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:03,721 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.607, 4.127), path_start=(0.000, 0.000), dist=10.456m
2026-01-12 18:51:03,721 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.456m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:03,721 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-12 18:51:03,781 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:03,792 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:03,793 - INFO - integration_test - Warmstart k=0: x0=9.606656709105703 , y0=4.127287798517166 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=10.5474748423377 , a0=0.0 , w0=0.0
2026-01-12 18:51:03,793 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:03,794 - INFO - integration_test - Dyn residual k=0: pred=[9.906611517321775, 4.13249498855138, 0.017358171614570123, 3.0000000299998737, 10.847474845337686], ws=[9.90661151432224, 4.1324949884993085, 0.017358171614570317, 3.0, 11.247895611215421], res=[2.99953484272919e-09, 5.207123621175924e-11, -1.942890293094024e-16, 2.9999873696340273e-08, -0.400420765877735], res_norm=4.004e-01
2026-01-12 18:51:03,795 - INFO - integration_test - Dyn residual k=1: pred=[10.206566319538776, 4.137702178481451, 0.017358171614570317, 3.0, 11.547895611215422], ws=[10.206566319538776, 4.137702178481451, 0.017358171614570317, 3.0, 11.384749187225417], res=[0.0, 0.0, 0.0, 0.0, 0.16314642399000512], res_norm=1.631e-01
2026-01-12 18:51:03,796 - INFO - integration_test - Dyn residual k=2: pred=[10.506521124755313, 4.142909368463593, 0.017358171614570317, 3.0, 11.684749187225417], ws=[10.506521124755313, 4.142909368463593, 0.017358171614570317, 3.0, 11.586808439416128], res=[0.0, 0.0, 0.0, 0.0, 0.09794074780928952], res_norm=9.794e-02
2026-01-12 18:51:03,811 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,890 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,907 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,919 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,935 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,948 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,964 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:03,977 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:03,992 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,004 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:04,019 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,031 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:04,046 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,057 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:04,072 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,084 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:04,099 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,111 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:04,125 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,136 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:04,151 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:04,163 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:14,830 - WARNING - integration_test - Step 39: MPC solve failed
2026-01-12 18:51:14,830 - WARNING - integration_test -   Consecutive MPC failures: 1/5
2026-01-12 18:51:14,963 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-12 18:51:14,963 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:14,964 - INFO - integration_test - === Applying control at step 39 ===
2026-01-12 18:51:14,964 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:14,964 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:14,964 - INFO - integration_test -   Planner output success: False
2026-01-12 18:51:14,964 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:14,965 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:14,965 - INFO - integration_test - Step 39 completed in 11.323s
2026-01-12 18:51:14,979 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-12 18:51:14,980 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.90661152  4.13249499  0.01735817  3.00000003 11.1000001 ]
2026-01-12 18:51:14,981 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.668m, drift=0.196m)
2026-01-12 18:51:14,981 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-12 18:51:14,981 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:15,059 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.907, 4.132), path_start=(0.000, 0.000), dist=10.734m
2026-01-12 18:51:15,059 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.734m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:15,059 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-12 18:51:15,120 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:15,131 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:15,131 - INFO - integration_test - Warmstart k=0: x0=9.906611517321775 , y0=4.13249498855138 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=11.251515249378091 , a0=0.0 , w0=0.0
2026-01-12 18:51:15,131 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:15,133 - INFO - integration_test - Dyn residual k=0: pred=[10.206566325537846, 4.137702178585593, 0.017358171614570123, 3.0000000299998737, 11.551515252378078], ws=[10.206566322538311, 4.137702178533522, 0.017358171614570317, 3.0, 11.399644517113428], res=[2.99953484272919e-09, 5.207123621175924e-11, -1.942890293094024e-16, 2.9999873696340273e-08, 0.15187073526464978], res_norm=1.519e-01
2026-01-12 18:51:15,133 - INFO - integration_test - Dyn residual k=1: pred=[10.506521127754848, 4.142909368515665, 0.017358171614570317, 3.0, 11.699644517113429], ws=[10.506521127754848, 4.142909368515665, 0.017358171614570317, 3.0, 11.816307826840202], res=[0.0, 0.0, 0.0, 0.0, -0.11666330972677308], res_norm=1.167e-01
2026-01-12 18:51:15,134 - INFO - integration_test - Dyn residual k=2: pred=[10.806475932971384, 4.148116558497807, 0.017358171614570317, 3.0, 12.116307826840202], ws=[10.806475932971384, 4.148116558497807, 0.017358171614570317, 3.0, 11.977408482759703], res=[0.0, 0.0, 0.0, 0.0, 0.13889934408049953], res_norm=1.389e-01
2026-01-12 18:51:15,150 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,230 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:15,247 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,259 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:15,275 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,288 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:15,304 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,318 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:15,333 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,345 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:15,360 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,371 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:15,386 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,398 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:15,413 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,424 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:15,439 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,450 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:15,465 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,477 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:15,492 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:15,503 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:25,543 - WARNING - integration_test - Step 40: MPC solve failed
2026-01-12 18:51:25,543 - WARNING - integration_test -   Consecutive MPC failures: 2/5
2026-01-12 18:51:25,693 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-12 18:51:25,693 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:25,693 - INFO - integration_test - === Applying control at step 40 ===
2026-01-12 18:51:25,693 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:25,693 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:25,693 - INFO - integration_test -   Planner output success: False
2026-01-12 18:51:25,693 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:25,695 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:25,696 - INFO - integration_test - Step 40 completed in 10.716s
2026-01-12 18:51:25,723 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-12 18:51:25,728 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.20656633  4.13770218  0.01735817  3.00000003 11.4000001 ]
2026-01-12 18:51:25,728 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.678m, drift=0.110m)
2026-01-12 18:51:25,728 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-12 18:51:25,729 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:25,808 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.207, 4.138), path_start=(0.000, 0.000), dist=11.013m
2026-01-12 18:51:25,808 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.013m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:25,808 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-12 18:51:25,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:25,884 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:25,884 - INFO - integration_test - Warmstart k=0: x0=10.206566325537846 , y0=4.137702178585593 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=11.147474848337673 , a0=0.0 , w0=0.0
2026-01-12 18:51:25,884 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:25,886 - INFO - integration_test - Dyn residual k=0: pred=[10.506521133753917, 4.142909368619807, 0.017358171614570123, 3.0000000299998737, 11.44747485133766], ws=[10.05449830548068, 3.9710769825091727, 0.017358171614570317, 3.0, 11.041348857687323], res=[0.4520228282732379, 0.17183238611063434, -1.942890293094024e-16, 2.9999873696340273e-08, 0.4061259936503365], res_norm=6.315e-01
2026-01-12 18:51:25,887 - INFO - integration_test - Dyn residual k=1: pred=[10.354453110697214, 3.9762841724913147, 0.017358171614570317, 3.0, 11.341348857687324], ws=[10.636628908166491, 4.0081899585300516, 0.017358171614570317, 3.0, 11.887988954208067], res=[-0.2821757974692769, -0.03190578603873684, 0.0, 0.0, -0.5466400965207434], res_norm=6.160e-01
2026-01-12 18:51:25,888 - INFO - integration_test - Dyn residual k=2: pred=[10.936583713383026, 4.013397148512194, 0.017358171614570317, 3.0, 12.187988954208068], ws=[10.798326911979002, 3.877918141461946, 0.017358171614570317, 3.0, 11.992424400817422], res=[0.1382568014040242, 0.13547900705024807, 0.0, 0.0, 0.19556455339064627], res_norm=2.752e-01
2026-01-12 18:51:25,905 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:25,993 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:26,012 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,027 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:26,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,062 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:26,082 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,097 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:26,115 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,128 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:26,144 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,157 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:26,173 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,187 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:26,204 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,217 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:26,232 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,245 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:26,261 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,273 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:26,289 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:26,303 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:37,484 - WARNING - integration_test - Step 41: MPC solve failed
2026-01-12 18:51:37,484 - WARNING - integration_test -   Consecutive MPC failures: 3/5
2026-01-12 18:51:37,671 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-12 18:51:37,672 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:37,672 - INFO - integration_test - === Applying control at step 41 ===
2026-01-12 18:51:37,672 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:37,672 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:37,672 - INFO - integration_test -   Planner output success: False
2026-01-12 18:51:37,672 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:37,673 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:37,674 - INFO - integration_test - Step 41 completed in 11.947s
2026-01-12 18:51:37,686 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-12 18:51:37,687 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.50652113  4.14290937  0.01735817  3.00000003 11.7000001 ]
2026-01-12 18:51:37,687 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.654m, drift=0.190m)
2026-01-12 18:51:37,687 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-12 18:51:37,688 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:37,779 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.507, 4.143), path_start=(0.000, 0.000), dist=11.294m
2026-01-12 18:51:37,779 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.294m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:37,779 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-12 18:51:37,844 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:37,854 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:37,854 - INFO - integration_test - Warmstart k=0: x0=10.506521133753917 , y0=4.142909368619807 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=11.851515255378064 , a0=0.0 , w0=0.0
2026-01-12 18:51:37,854 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:37,856 - INFO - integration_test - Dyn residual k=0: pred=[10.806475941969989, 4.148116558654021, 0.017358171614570123, 3.0000000299998737, 12.151515258378051], ws=[10.901694029944062, 3.3099419601231332, 0.017358171614570317, 3.0, 12.103398510012644], res=[-0.09521808797407338, 0.8381745985308875, -1.942890293094024e-16, 2.9999873696340273e-08, 0.04811674836540725], res_norm=8.449e-01
2026-01-12 18:51:37,857 - INFO - integration_test - Dyn residual k=1: pred=[11.201648835160597, 3.315149150105275, 0.017358171614570317, 3.0, 12.403398510012645], ws=[10.912410139927232, 3.8359563367347604, 0.017358171614570317, 3.0, 12.018505717985288], res=[0.2892386952333652, -0.5208071866294852, 0.0, 0.0, 0.3848927920273564], res_norm=7.093e-01
2026-01-12 18:51:37,858 - INFO - integration_test - Dyn residual k=2: pred=[11.212364945143769, 3.8411635267169024, 0.017358171614570317, 3.0, 12.318505717985289], ws=[11.929106289649939, 4.9194798909548405, 0.017358171614570317, 3.0, 13.107353867996785], res=[-0.7167413445061701, -1.078316364237938, 0.0, 0.0, -0.7888481500114963], res_norm=1.516e+00
2026-01-12 18:51:37,874 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:37,953 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:37,970 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:37,984 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:38,000 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,013 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:38,030 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,043 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:38,059 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,070 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:38,085 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,097 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:38,112 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,123 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:38,138 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,150 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:38,165 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,177 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:38,191 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,203 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:38,217 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:38,230 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:48,380 - WARNING - integration_test - Step 42: MPC solve failed
2026-01-12 18:51:48,380 - WARNING - integration_test -   Consecutive MPC failures: 4/5
2026-01-12 18:51:48,521 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-12 18:51:48,521 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:48,521 - INFO - integration_test - === Applying control at step 42 ===
2026-01-12 18:51:48,521 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:48,521 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:48,521 - INFO - integration_test -   Planner output success: False
2026-01-12 18:51:48,522 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:48,523 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:48,524 - INFO - integration_test - Step 42 completed in 10.838s
2026-01-12 18:51:48,538 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-12 18:51:48,541 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.80647594  4.14811656  0.01735817  3.00000003 12.00000011]
2026-01-12 18:51:48,541 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.661m, drift=0.116m)
2026-01-12 18:51:48,541 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-12 18:51:48,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:48,619 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.806, 4.148), path_start=(0.000, 0.000), dist=11.575m
2026-01-12 18:51:48,619 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.575m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:48,619 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-12 18:51:48,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:48,692 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:51:48,692 - INFO - integration_test - Warmstart k=0: x0=10.613653200432317 , y0=3.835679350728821 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=11.646464753327546 , a0=0.0 , w0=0.0
2026-01-12 18:51:48,692 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:51:48,693 - INFO - integration_test - Dyn residual k=0: pred=[10.913608008648389, 3.8408865407630346, 0.017358171614570123, 3.0000000299998737, 11.946464756327533], ws=[10.641016292236763, 3.9338880329197767, 0.017358171614570317, 3.0, 11.64431482288375], res=[0.2725917164116254, -0.09300149215674214, -1.942890293094024e-16, 2.9999873696340273e-08, 0.3021499334437827], res_norm=4.174e-01
2026-01-12 18:51:48,694 - INFO - integration_test - Dyn residual k=1: pred=[10.9409710974533, 3.9390952229019187, 0.017358171614570317, 3.0, 11.94431482288375], ws=[11.881208981639489, 4.317457131780727, 0.017358171614570317, 3.0, 13.101605046061767], res=[-0.9402378841861889, -0.37836190887880816, 0.0, 0.0, -1.1572902231780162], res_norm=1.538e+00
2026-01-12 18:51:48,695 - INFO - integration_test - Dyn residual k=2: pred=[12.181163786856025, 4.322664321762869, 0.017358171614570317, 3.0, 13.401605046061768], ws=[12.093060338650583, 4.7574305145500775, 0.017358171614570317, 3.0, 13.211691544436285], res=[0.0881034482054428, -0.4347661927872082, 0.0, 0.0, 0.18991350162548315], res_norm=4.825e-01
2026-01-12 18:51:48,711 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,789 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:48,806 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,819 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:48,835 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,848 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:48,864 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,877 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:51:48,893 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,904 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:48,919 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,931 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:48,946 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,957 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:48,973 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:48,985 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:49,001 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:49,012 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:49,028 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:49,041 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:49,056 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:51:49,068 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:51:59,726 - WARNING - integration_test - Step 43: MPC solve failed
2026-01-12 18:51:59,726 - WARNING - integration_test -   Consecutive MPC failures: 5/5
2026-01-12 18:51:59,727 - WARNING - integration_test - Step 43: Checking if vehicle should continue despite 5 consecutive failures...
2026-01-12 18:51:59,727 - ERROR - integration_test - Max consecutive MPC failures (5) reached. No successful solve in last 5 attempts. Terminating test early at step 43.
2026-01-12 18:51:59,891 - INFO - integration_test - Step 200: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-12 18:51:59,892 - DEBUG - integration_test - Step 200: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:51:59,892 - INFO - integration_test - === Applying control at step 200 ===
2026-01-12 18:51:59,892 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:59,892 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:51:59,892 - INFO - integration_test -   Planner output success: False
2026-01-12 18:51:59,892 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:51:59,893 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:51:59,894 - INFO - integration_test - Step 200 completed in 11.354s
2026-01-12 18:51:59,905 - INFO - integration_test - Step 201 (contouring until path end)
2026-01-12 18:51:59,907 - DEBUG - integration_test - Syncing planner state at step 201: vehicle_state=[11.10643075  4.15332375  0.01735817  3.00000003 12.30000011]
2026-01-12 18:51:59,908 - DEBUG - integration_test - Step 201: Using propagated spline 12.3000 (close to path, dist=0.612m, drift=0.184m)
2026-01-12 18:51:59,908 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-12 18:51:59,909 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:51:59,986 - DEBUG - integration_test - Step 201: Checking path alignment: vehicle=(11.106, 4.153), path_start=(0.000, 0.000), dist=11.858m
2026-01-12 18:51:59,986 - WARNING - integration_test - Step 201: Vehicle is far from path start (dist=11.858m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:51:59,986 - INFO - integration_test - === Calling planner.solve_mpc() at step 201 ===
2026-01-12 18:52:00,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:00,061 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:00,061 - INFO - integration_test - Warmstart k=0: x0=10.71997553669057 , y0=3.72345502487588 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=11.946464756327533 , a0=0.0 , w0=0.0
2026-01-12 18:52:00,061 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:00,062 - INFO - integration_test - Dyn residual k=0: pred=[11.01993034490664, 3.7286622149100936, 0.017358171614570123, 3.0000000299998737, 12.24646475932752], ws=[12.246823688571864, 4.263594830470613, 0.017358171614570317, 3.0, 13.31390302883572], res=[-1.226893343665223, -0.534932615560519, -1.942890293094024e-16, 2.9999873696340273e-08, -1.0674382695081999], res_norm=1.712e+00
2026-01-12 18:52:00,063 - INFO - integration_test - Dyn residual k=1: pred=[12.546778493788398, 4.268802020452755, 0.017358171614570317, 3.0, 13.61390302883572], ws=[11.044938992367596, 4.240314564701879, 0.017358171614570317, 3.0, 12.123477186869014], res=[1.5018395014208021, 0.0284874557508763, 0.0, 0.0, 1.4904258419667062], res_norm=2.116e+00
2026-01-12 18:52:00,064 - INFO - integration_test - Dyn residual k=2: pred=[11.344893797584131, 4.245521754684021, 0.017358171614570317, 3.0, 12.423477186869015], ws=[12.44468468485396, 4.513025275245541, 0.017358171614570317, 3.0, 13.623177379236655], res=[-1.0997908872698297, -0.2675035205615197, 0.0, 0.0, -1.19970019236764], res_norm=1.649e+00
2026-01-12 18:52:00,080 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,160 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:00,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,189 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:00,205 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,218 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:00,235 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,248 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:00,266 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,278 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:00,292 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,304 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:00,318 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,330 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:00,345 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,356 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:00,371 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,384 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:00,399 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,411 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:00,425 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:00,436 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:11,701 - WARNING - integration_test - Step 201: MPC solve failed
2026-01-12 18:52:11,702 - WARNING - integration_test -   Consecutive MPC failures: 6/5
2026-01-12 18:52:11,702 - WARNING - integration_test - Step 201: Checking if vehicle should continue despite 6 consecutive failures...
2026-01-12 18:52:11,702 - ERROR - integration_test - Max consecutive MPC failures (5) reached. No successful solve in last 5 attempts. Terminating test early at step 201.
2026-01-12 18:52:12,141 - INFO - integration_test - Step 200: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-12 18:52:12,142 - DEBUG - integration_test - Step 200: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:12,142 - INFO - integration_test - === Applying control at step 200 ===
2026-01-12 18:52:12,142 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:52:12,142 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:12,142 - INFO - integration_test -   Planner output success: False
2026-01-12 18:52:12,142 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:52:12,143 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:12,144 - INFO - integration_test - Step 200 completed in 12.238s
2026-01-12 18:52:12,155 - INFO - integration_test - Step 201 (contouring until path end)
2026-01-12 18:52:12,158 - DEBUG - integration_test - Syncing planner state at step 201: vehicle_state=[11.40638556  4.15853094  0.01735817  3.00000003 12.60000011]
2026-01-12 18:52:12,158 - DEBUG - integration_test - Step 201: Using propagated spline 12.6000 (close to path, dist=0.626m, drift=0.122m)
2026-01-12 18:52:12,159 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-12 18:52:12,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:12,234 - DEBUG - integration_test - Step 201: Checking path alignment: vehicle=(11.406, 4.159), path_start=(0.000, 0.000), dist=12.141m
2026-01-12 18:52:12,234 - WARNING - integration_test - Step 201: Vehicle is far from path start (dist=12.141m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:12,234 - INFO - integration_test - === Calling planner.solve_mpc() at step 201 ===
2026-01-12 18:52:12,296 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:12,306 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:12,306 - INFO - integration_test - Warmstart k=0: x0=11.076268329925906 , y0=3.575229006487193 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=12.44848496134772 , a0=0.0 , w0=0.0
2026-01-12 18:52:12,307 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:12,308 - INFO - integration_test - Dyn residual k=0: pred=[11.376223138141977, 3.580436196521407, 0.017358171614570123, 3.0000000299998737, 12.748484964347707], ws=[12.14739934386841, 3.8175839442935566, 0.017358171614570317, 3.0, 13.25920747570442], res=[-0.771176205726432, -0.23714774777214975, -1.942890293094024e-16, 2.9999873696340273e-08, -0.5107225113567129], res_norm=9.549e-01
2026-01-12 18:52:12,309 - INFO - integration_test - Dyn residual k=1: pred=[12.447354149084944, 3.8227911342756986, 0.017358171614570317, 3.0, 13.55920747570442], ws=[12.396480188360012, 3.77760858350985, 0.017358171614570317, 3.0, 13.42362288165593], res=[0.05087396072493178, 0.04518255076584854, 0.0, 0.0, 0.1355845940484901], res_norm=1.517e-01
2026-01-12 18:52:12,310 - INFO - integration_test - Dyn residual k=2: pred=[12.696434993576549, 3.782815773491992, 0.017358171614570317, 3.0, 13.723622881655931], ws=[12.502476249865682, 3.631740181161031, 0.017358171614570317, 3.0, 13.730623112856385], res=[0.1939587437108674, 0.15107559233096124, 0.0, 0.0, -0.00700023120045401], res_norm=2.460e-01
2026-01-12 18:52:12,326 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,405 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:12,422 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,435 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:12,451 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,464 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:12,481 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,493 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:12,509 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,520 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:12,536 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,548 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:12,564 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,575 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:12,590 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,602 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:12,617 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,629 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:12,643 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,654 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:12,669 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:12,681 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:18,545 - WARNING - integration_test - Step 201: MPC solve failed
2026-01-12 18:52:18,545 - WARNING - integration_test -   Consecutive MPC failures: 7/5
2026-01-12 18:52:18,545 - WARNING - integration_test - Step 201: Checking if vehicle should continue despite 7 consecutive failures...
2026-01-12 18:52:18,545 - ERROR - integration_test - Max consecutive MPC failures (5) reached. No successful solve in last 5 attempts. Terminating test early at step 201.
2026-01-12 18:52:18,697 - INFO - integration_test - Step 200: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-12 18:52:18,698 - DEBUG - integration_test - Step 200: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:18,698 - INFO - integration_test - === Applying control at step 200 ===
2026-01-12 18:52:18,698 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:52:18,698 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:18,698 - INFO - integration_test -   Planner output success: False
2026-01-12 18:52:18,698 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:52:18,699 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:18,700 - INFO - integration_test - Step 200 completed in 6.542s
2026-01-12 18:52:18,715 - INFO - integration_test - Step 201 (contouring until path end)
2026-01-12 18:52:18,716 - DEBUG - integration_test - Syncing planner state at step 201: vehicle_state=[11.70634037  4.16373813  0.01735817  3.00000003 12.90000012]
2026-01-12 18:52:18,717 - DEBUG - integration_test - Step 201: Using propagated spline 12.9000 (close to path, dist=0.550m, drift=0.178m)
2026-01-12 18:52:18,717 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-12 18:52:18,718 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:18,794 - DEBUG - integration_test - Step 201: Checking path alignment: vehicle=(11.706, 4.164), path_start=(0.000, 0.000), dist=12.425m
2026-01-12 18:52:18,794 - WARNING - integration_test - Step 201: Vehicle is far from path start (dist=12.425m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:18,794 - INFO - integration_test - === Calling planner.solve_mpc() at step 201 ===
2026-01-12 18:52:18,854 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:18,865 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:18,865 - INFO - integration_test - Warmstart k=0: x0=12.150561349966754 , y0=3.6040214346419543 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=13.556565772428517 , a0=0.0 , w0=0.0
2026-01-12 18:52:18,865 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:18,867 - INFO - integration_test - Dyn residual k=0: pred=[12.450516158182825, 3.609228624676168, 0.017358171614570123, 3.0000000299998737, 13.856565775428503], ws=[12.45438142160368, 4.276650840316473, 0.017358171614570317, 3.0, 13.415142189523689], res=[-0.003865263420854248, -0.6674222156403053, -1.942890293094024e-16, 2.9999873696340273e-08, 0.4414235859048148], res_norm=8.002e-01
2026-01-12 18:52:18,867 - INFO - integration_test - Dyn residual k=1: pred=[12.754336226820215, 4.281858030298616, 0.017358171614570317, 3.0, 13.71514218952369], ws=[12.452938966964643, 3.8265015503304936, 0.017358171614570317, 3.0, 13.444600652446935], res=[0.3013972598555714, 0.45535647996812223, 0.0, 0.0, 0.2705415370767543], res_norm=6.094e-01
2026-01-12 18:52:18,868 - INFO - integration_test - Dyn residual k=2: pred=[12.752893772181178, 3.8317087403126355, 0.017358171614570317, 3.0, 13.744600652446936], ws=[12.712772409802266, 3.9082459161921954, 0.017358171614570317, 3.0, 13.842537348027543], res=[0.04012136237891184, -0.07653717587955988, 0.0, 0.0, -0.09793669558060714], res_norm=1.306e-01
2026-01-12 18:52:18,885 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:18,964 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:18,981 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:18,993 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:19,009 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,021 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:19,038 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,051 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:19,067 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,079 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:19,093 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,104 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:19,119 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,131 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:19,146 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,157 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:19,171 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,183 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:19,198 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,209 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:19,224 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:19,236 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:28,516 - WARNING - integration_test - Step 201: MPC solve failed
2026-01-12 18:52:28,516 - WARNING - integration_test -   Consecutive MPC failures: 8/5
2026-01-12 18:52:28,516 - WARNING - integration_test - Step 201: Checking if vehicle should continue despite 8 consecutive failures...
2026-01-12 18:52:28,516 - ERROR - integration_test - Max consecutive MPC failures (5) reached. No successful solve in last 5 attempts. Terminating test early at step 201.
2026-01-12 18:52:28,669 - INFO - integration_test - Step 200: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-12 18:52:28,669 - DEBUG - integration_test - Step 200: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:28,670 - INFO - integration_test - === Applying control at step 200 ===
2026-01-12 18:52:28,670 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:52:28,670 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:28,670 - INFO - integration_test -   Planner output success: False
2026-01-12 18:52:28,670 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:52:28,671 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:28,671 - INFO - integration_test - Step 200 completed in 9.955s
2026-01-12 18:52:28,685 - INFO - integration_test - Step 201 (contouring until path end)
2026-01-12 18:52:28,686 - DEBUG - integration_test - Syncing planner state at step 201: vehicle_state=[12.00629517  4.16894532  0.01735817  3.00000003 13.20000012]
2026-01-12 18:52:28,687 - DEBUG - integration_test - Step 201: Using propagated spline 13.2000 (close to path, dist=0.582m, drift=0.128m)
2026-01-12 18:52:28,687 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-12 18:52:28,688 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:28,766 - DEBUG - integration_test - Step 201: Checking path alignment: vehicle=(12.006, 4.169), path_start=(0.000, 0.000), dist=12.709m
2026-01-12 18:52:28,766 - WARNING - integration_test - Step 201: Vehicle is far from path start (dist=12.709m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:28,766 - INFO - integration_test - === Calling planner.solve_mpc() at step 201 ===
2026-01-12 18:52:28,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:28,837 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:28,837 - INFO - integration_test - Warmstart k=0: x0=12.435653224016754 , y0=3.872789713370493 , psi0=0.017358171614570123 , v0=3.0000000299998737 , spline0=13.452525371388099 , a0=0.0 , w0=0.0
2026-01-12 18:52:28,838 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:28,839 - INFO - integration_test - Dyn residual k=0: pred=[12.735608032232825, 3.8779969034047066, 0.017358171614570123, 3.0000000299998737, 13.752525374388085], ws=[12.43696796163032, 4.016185851227064, 0.017358171614570317, 3.0, 13.663873154633023], res=[0.29864007060250586, -0.13818894782235747, -1.942890293094024e-16, 2.9999873696340273e-08, 0.08865221975506188], res_norm=3.408e-01
2026-01-12 18:52:28,840 - INFO - integration_test - Dyn residual k=1: pred=[12.736922766846856, 4.0213930412092065, 0.017358171614570317, 3.0, 13.963873154633024], ws=[13.062496231842697, 4.226382610575975, 0.017358171614570317, 3.0, 14.240419663478946], res=[-0.3255734649958413, -0.20498956936676827, 0.0, 0.0, -0.2765465088459216], res_norm=4.738e-01
2026-01-12 18:52:28,841 - INFO - integration_test - Dyn residual k=2: pred=[13.362451037059234, 4.231589800558117, 0.017358171614570317, 3.0, 14.540419663478946], ws=[12.02728523335197, 4.04229131451456, 0.017358171614570317, 3.0, 13.143388044526336], res=[1.3351658037072642, 0.18929848604355737, 0.0, 0.0, 1.3970316189526102], res_norm=1.942e+00
2026-01-12 18:52:28,857 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:28,936 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:28,952 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:28,965 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:28,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:28,994 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:29,009 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,021 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:29,038 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,051 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,065 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,077 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,092 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,103 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,118 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,130 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,145 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,156 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,171 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,183 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,198 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,209 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,381 - INFO - integration_test - Step 201: MPC solve successful
2026-01-12 18:52:29,548 - INFO - integration_test - Step 201: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-12 18:52:29,548 - DEBUG - integration_test - Step 201: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:29,549 - INFO - integration_test - === Applying control at step 201 ===
2026-01-12 18:52:29,549 - INFO - integration_test -   Control dict from planner: {'a': -4.513957632220435e-11, 'w': -0.7999999977910912}
2026-01-12 18:52:29,549 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:29,549 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:29,550 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:29,550 - INFO - integration_test - Step 201 completed in 0.864s
2026-01-12 18:52:29,565 - INFO - integration_test - Step 202 (contouring until path end)
2026-01-12 18:52:29,567 - DEBUG - integration_test - Syncing planner state at step 202: vehicle_state=[12.30613831  4.16215516 -0.06264183  3.00000003 13.50000012]
2026-01-12 18:52:29,567 - DEBUG - integration_test - Step 202: Using propagated spline 13.5000 (close to path, dist=0.486m, drift=0.172m)
2026-01-12 18:52:29,567 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-12 18:52:29,568 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:29,645 - DEBUG - integration_test - Step 202: Checking path alignment: vehicle=(12.306, 4.162), path_start=(0.000, 0.000), dist=12.991m
2026-01-12 18:52:29,645 - WARNING - integration_test - Step 202: Vehicle is far from path start (dist=12.991m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:29,645 - INFO - integration_test - === Calling planner.solve_mpc() at step 202 ===
2026-01-12 18:52:29,707 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:29,718 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:29,718 - INFO - integration_test - Warmstart k=0: x0=12.306138314428448 , y0=4.162155161544988 , psi0=-0.062641828164539 , v0=3.0000000299953595 , spline0=13.34848497034723 , a0=0.0 , w0=0.0
2026-01-12 18:52:29,718 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:29,719 - INFO - integration_test - Dyn residual k=0: pred=[12.605549910073625, 4.143374900819131, -0.062641828164539, 3.0000000299953595, 13.648484973346765], ws=[12.605549907079972, 4.143374901006904, -0.06264182816453889, 3.0, 14.013630523025029], res=[2.993653325233936e-09, -1.8777335242248228e-10, -1.1102230246251565e-16, 2.999535952952215e-08, -0.36514554967826385], res_norm=3.651e-01
2026-01-12 18:52:29,720 - INFO - integration_test - Dyn residual k=1: pred=[12.904961499731495, 4.12459464046882, -0.06264182816453889, 3.0, 14.31363052302503], ws=[12.88028496011296, 3.6028123623939363, -0.06264182816453889, 3.0, 14.214563766752606], res=[0.024676539618535998, 0.521782278074884, 0.0, 0.0, 0.099066756272423], res_norm=5.317e-01
2026-01-12 18:52:29,721 - INFO - integration_test - Dyn residual k=2: pred=[13.179696552764483, 3.5840321018558527, -0.06264182816453889, 3.0, 14.514563766752607], ws=[13.204373092383019, 4.105814379930736, -0.06264182816453889, 3.0, 14.576918501401607], res=[-0.024676539618535998, -0.5217822780748835, 0.0, 0.0, -0.06235473464900032], res_norm=5.261e-01
2026-01-12 18:52:29,737 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,827 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:29,844 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,856 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:29,873 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,886 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:29,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,915 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:29,931 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,943 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,957 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,969 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:29,984 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:29,996 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:30,010 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:30,022 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:30,038 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:30,050 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:30,065 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:30,077 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:30,094 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:30,106 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,252 - INFO - integration_test - Step 202: MPC solve successful
2026-01-12 18:52:31,453 - INFO - integration_test - Step 202: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-12 18:52:31,453 - DEBUG - integration_test - Step 202: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:31,453 - INFO - integration_test - === Applying control at step 202 ===
2026-01-12 18:52:31,453 - INFO - integration_test -   Control dict from planner: {'a': -1.4024052969276283e-08, 'w': -0.37603792888221016}
2026-01-12 18:52:31,453 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:31,453 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:31,454 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:31,455 - INFO - integration_test - Step 202 completed in 1.889s
2026-01-12 18:52:31,468 - INFO - integration_test - Step 203 (contouring until path end)
2026-01-12 18:52:31,469 - DEBUG - integration_test - Syncing planner state at step 203: vehicle_state=[12.60512629  4.13775048 -0.10024562  3.00000003 13.80000012]
2026-01-12 18:52:31,470 - DEBUG - integration_test - Step 203: Using propagated spline 13.8000 (close to path, dist=0.571m, drift=0.133m)
2026-01-12 18:52:31,470 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-12 18:52:31,471 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:31,551 - DEBUG - integration_test - Step 203: Checking path alignment: vehicle=(12.605, 4.138), path_start=(0.000, 0.000), dist=13.267m
2026-01-12 18:52:31,551 - WARNING - integration_test - Step 203: Vehicle is far from path start (dist=13.267m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:31,551 - INFO - integration_test - === Calling planner.solve_mpc() at step 203 ===
2026-01-12 18:52:31,615 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:31,625 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:31,625 - INFO - integration_test - Warmstart k=0: x0=12.605126288699445 , y0=4.137750484036361 , psi0=-0.10024562105276003 , v0=3.0000000285929542 , spline0=13.749495074216627 , a0=0.0 , w0=0.0
2026-01-12 18:52:31,625 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:31,627 - INFO - integration_test - Dyn residual k=0: pred=[12.903620175766953, 4.107727141469162, -0.10024562105276003, 3.0000000285929542, 14.049495077075923], ws=[12.903620172922011, 4.107727141755315, -0.10024562105276003, 3.0, 14.170233856553887], res=[2.844942059709865e-09, -2.8615243508056665e-10, 0.0, 2.859295422652508e-08, -0.12073877947796419], res_norm=1.207e-01
2026-01-12 18:52:31,628 - INFO - integration_test - Dyn residual k=1: pred=[13.202114057144577, 4.077703799474269, -0.10024562105276003, 3.0, 14.470233856553888], ws=[13.202114057144577, 4.077703799474269, -0.10024562105276003, 3.0, 14.350981270501755], res=[0.0, 0.0, 0.0, 0.0, 0.11925258605213251], res_norm=1.193e-01
2026-01-12 18:52:31,629 - INFO - integration_test - Dyn residual k=2: pred=[13.500607941367143, 4.047680457193223, -0.10024562105276003, 3.0, 14.650981270501756], ws=[13.500607941367143, 4.047680457193223, -0.10024562105276003, 3.0, 14.778548512422908], res=[0.0, 0.0, 0.0, 0.0, -0.12756724192115243], res_norm=1.276e-01
2026-01-12 18:52:31,645 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,727 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:31,744 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,758 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:31,775 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,788 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:31,804 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,818 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:31,834 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,846 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,860 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,871 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,887 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,899 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,913 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,924 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,951 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,967 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:31,978 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:31,993 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,004 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,260 - INFO - integration_test - Step 203: MPC solve successful
2026-01-12 18:52:32,426 - INFO - integration_test - Step 203: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-12 18:52:32,426 - DEBUG - integration_test - Step 203: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:32,426 - INFO - integration_test - === Applying control at step 203 ===
2026-01-12 18:52:32,427 - INFO - integration_test -   Control dict from planner: {'a': 9.03501973770084e-09, 'w': 0.7999998287046705}
2026-01-12 18:52:32,427 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:32,427 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:32,428 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:32,429 - INFO - integration_test - Step 203 completed in 0.959s
2026-01-12 18:52:32,442 - INFO - integration_test - Step 204 (contouring until path end)
2026-01-12 18:52:32,445 - DEBUG - integration_test - Syncing planner state at step 204: vehicle_state=[12.90450218  4.11969254 -0.02024564  3.00000003 14.10000013]
2026-01-12 18:52:32,445 - DEBUG - integration_test - Step 204: Using propagated spline 14.1000 (close to path, dist=0.455m, drift=0.167m)
2026-01-12 18:52:32,446 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-12 18:52:32,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:32,523 - DEBUG - integration_test - Step 204: Checking path alignment: vehicle=(12.905, 4.120), path_start=(0.000, 0.000), dist=13.546m
2026-01-12 18:52:32,523 - WARNING - integration_test - Step 204: Vehicle is far from path start (dist=13.546m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:32,523 - INFO - integration_test - === Calling planner.solve_mpc() at step 204 ===
2026-01-12 18:52:32,585 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:32,597 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:32,597 - INFO - integration_test - Warmstart k=0: x0=12.904502181682385 , y0=4.11969254226779 , psi0=-0.020245638182292983 , v0=3.0000000294964564 , spline0=14.150505178176372 , a0=0.0 , w0=0.0
2026-01-12 18:52:32,597 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:32,598 - INFO - integration_test - Dyn residual k=0: pred=[13.204440703851667, 4.113619265664932, -0.020245638182292983, 3.0000000294964564, 14.450505181126019], ws=[13.204440700902627, 4.113619265724646, -0.020245638182292858, 3.0, 14.318035727648898], res=[2.9490401232123986e-09, -5.971401151327882e-11, -1.249000902703301e-16, 2.9496456388500292e-08, 0.13246945347712114], res_norm=1.325e-01
2026-01-12 18:52:32,599 - INFO - integration_test - Dyn residual k=1: pred=[13.504379220122868, 4.107545989181501, -0.020245638182292858, 3.0, 14.618035727648898], ws=[13.504379220122868, 4.107545989181501, -0.020245638182292858, 3.0, 14.730471048437103], res=[0.0, 0.0, 0.0, 0.0, -0.1124353207882045], res_norm=1.124e-01
2026-01-12 18:52:32,600 - INFO - integration_test - Dyn residual k=2: pred=[13.804317739343109, 4.1014727126383566, -0.020245638182292858, 3.0, 15.030471048437104], ws=[13.804317739343109, 4.1014727126383566, -0.020245638182292858, 3.0, 14.902202798772187], res=[0.0, 0.0, 0.0, 0.0, 0.12826824966491657], res_norm=1.283e-01
2026-01-12 18:52:32,615 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,697 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:32,714 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,726 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:32,743 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,755 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:32,772 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,785 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:32,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,813 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,827 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,839 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,854 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,866 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,881 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,892 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,907 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,919 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,934 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,946 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:32,961 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:32,973 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,183 - INFO - integration_test - Step 204: MPC solve successful
2026-01-12 18:52:33,353 - INFO - integration_test - Step 204: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-12 18:52:33,353 - DEBUG - integration_test - Step 204: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:33,353 - INFO - integration_test - === Applying control at step 204 ===
2026-01-12 18:52:33,354 - INFO - integration_test -   Control dict from planner: {'a': 3.3558954957218986e-09, 'w': 0.8000000092321617}
2026-01-12 18:52:33,354 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:33,354 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:33,355 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:33,355 - INFO - integration_test - Step 204 completed in 0.911s
2026-01-12 18:52:33,369 - INFO - integration_test - Step 205 (contouring until path end)
2026-01-12 18:52:33,371 - DEBUG - integration_test - Syncing planner state at step 205: vehicle_state=[13.20436368  4.12561689  0.05975436  3.00000003 14.40000013]
2026-01-12 18:52:33,371 - DEBUG - integration_test - Step 205: Using propagated spline 14.4000 (close to path, dist=0.496m, drift=0.467m)
2026-01-12 18:52:33,371 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-12 18:52:33,372 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:33,450 - DEBUG - integration_test - Step 205: Checking path alignment: vehicle=(13.204, 4.126), path_start=(0.000, 0.000), dist=13.834m
2026-01-12 18:52:33,451 - WARNING - integration_test - Step 205: Vehicle is far from path start (dist=13.834m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:33,451 - INFO - integration_test - === Calling planner.solve_mpc() at step 205 ===
2026-01-12 18:52:33,513 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:33,524 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:33,524 - INFO - integration_test - Warmstart k=0: x0=13.20436367759765 , y0=4.125616885540352 , psi0=0.05975436274092319 , v0=3.0000000298320457 , spline0=14.349495080149476 , a0=0.0 , w0=0.0
2026-01-12 18:52:33,524 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:33,526 - INFO - integration_test - Dyn residual k=0: pred=[13.503828252339943, 4.143532528546974, 0.05975436274092319, 3.0000000298320457, 14.649495083132681], ws=[13.503828249362062, 4.14353252836882, 0.059754362740923384, 3.0, 14.47630253436877], res=[2.977881052856901e-09, 1.7815349195871022e-10, -1.942890293094024e-16, 2.983204572259979e-08, 0.173192548763911], res_norm=1.732e-01
2026-01-12 18:52:33,527 - INFO - integration_test - Dyn residual k=1: pred=[13.803292821126474, 4.161448171197288, 0.059754362740923384, 3.0, 14.77630253436877], ws=[13.803292821126474, 4.161448171197288, 0.059754362740923384, 3.0, 15.17394164001227], res=[0.0, 0.0, 0.0, 0.0, -0.39763910564349914], res_norm=3.976e-01
2026-01-12 18:52:33,528 - INFO - integration_test - Dyn residual k=2: pred=[14.102757392890886, 4.1793638140257565, 0.059754362740923384, 3.0, 15.47394164001227], ws=[14.102757392890886, 4.1793638140257565, 0.059754362740923384, 3.0, 15.313744656877418], res=[0.0, 0.0, 0.0, 0.0, 0.16019698313485264], res_norm=1.602e-01
2026-01-12 18:52:33,545 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,625 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:33,642 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,654 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:33,671 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,685 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:33,701 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,714 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:33,730 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,741 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,756 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,768 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,783 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,794 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,809 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,820 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,835 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,847 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,874 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:33,888 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:33,900 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,069 - INFO - integration_test - Step 205: MPC solve successful
2026-01-12 18:52:34,243 - INFO - integration_test - Step 205: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-12 18:52:34,243 - DEBUG - integration_test - Step 205: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:34,243 - INFO - integration_test - === Applying control at step 205 ===
2026-01-12 18:52:34,243 - INFO - integration_test -   Control dict from planner: {'a': 1.1062907088019476e-09, 'w': -0.5928492322402261}
2026-01-12 18:52:34,243 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:34,243 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:34,245 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:34,245 - INFO - integration_test - Step 205 completed in 0.875s
2026-01-12 18:52:34,259 - INFO - integration_test - Step 206 (contouring until path end)
2026-01-12 18:52:34,261 - DEBUG - integration_test - Syncing planner state at step 206: vehicle_state=[1.35041838e+01 4.13464777e+00 4.69439517e-04 3.00000003e+00
 1.47000001e+01]
2026-01-12 18:52:34,262 - DEBUG - integration_test - Step 206: Using propagated spline 14.7000 (close to path, dist=0.368m, drift=0.161m)
2026-01-12 18:52:34,262 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-12 18:52:34,263 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:34,339 - DEBUG - integration_test - Step 206: Checking path alignment: vehicle=(13.504, 4.135), path_start=(0.000, 0.000), dist=14.123m
2026-01-12 18:52:34,339 - WARNING - integration_test - Step 206: Vehicle is far from path start (dist=14.123m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:34,339 - INFO - integration_test - === Calling planner.solve_mpc() at step 206 ===
2026-01-12 18:52:34,400 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:34,411 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:34,411 - INFO - integration_test - Warmstart k=0: x0=13.504183771228103 , y0=4.1346477682349905 , psi0=0.000469439516900573 , v0=3.000000029942675 , spline0=14.750505184153843 , a0=0.0 , w0=0.0
2026-01-12 18:52:34,411 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:34,412 - INFO - integration_test - Dyn residual k=0: pred=[13.804183741166351, 4.134788600086294, 0.000469439516900573, 3.000000029942675, 15.05050518714811], ws=[13.804183738172085, 4.134788600084888, 0.0004694395169004828, 3.0, 14.928148225038026], res=[2.994266168343529e-09, 1.4059864383852982e-12, 9.020562075079397e-17, 2.9942675006111585e-08, 0.12235696211008396], res_norm=1.224e-01
2026-01-12 18:52:34,413 - INFO - integration_test - Dyn residual k=1: pred=[14.104183705116068, 4.134929431934785, 0.0004694395169004828, 3.0, 15.228148225038026], ws=[14.104183705116068, 4.134929431934785, 0.0004694395169004828, 3.0, 15.050015971265019], res=[0.0, 0.0, 0.0, 0.0, 0.17813225377300768], res_norm=1.781e-01
2026-01-12 18:52:34,414 - INFO - integration_test - Dyn residual k=2: pred=[14.40418367206005, 4.135070263784683, 0.0004694395169004828, 3.0, 15.35001597126502], ws=[14.40418367206005, 4.135070263784683, 0.0004694395169004828, 3.0, 15.741534265596119], res=[0.0, 0.0, 0.0, 0.0, -0.3915182943310995], res_norm=3.915e-01
2026-01-12 18:52:34,430 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,510 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:34,527 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,541 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:34,558 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,571 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:34,587 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,600 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:34,616 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,628 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,642 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,654 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,669 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,681 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,696 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,707 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,722 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,734 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,750 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,762 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,777 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:34,797 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:34,986 - INFO - integration_test - Step 206: MPC solve successful
2026-01-12 18:52:35,167 - INFO - integration_test - Step 206: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-12 18:52:35,167 - DEBUG - integration_test - Step 206: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:35,167 - INFO - integration_test - === Applying control at step 206 ===
2026-01-12 18:52:35,167 - INFO - integration_test -   Control dict from planner: {'a': 3.8102637550592445e-10, 'w': -0.8000000096859031}
2026-01-12 18:52:35,167 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:35,167 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:35,168 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:35,169 - INFO - integration_test - Step 206 completed in 0.908s
2026-01-12 18:52:35,185 - INFO - integration_test - Step 207 (contouring until path end)
2026-01-12 18:52:35,186 - DEBUG - integration_test - Syncing planner state at step 207: vehicle_state=[13.80386948  4.12279485 -0.07953056  3.00000003 15.00000014]
2026-01-12 18:52:35,187 - DEBUG - integration_test - Step 207: Using propagated spline 15.0000 (close to path, dist=0.335m, drift=0.145m)
2026-01-12 18:52:35,187 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-12 18:52:35,188 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:35,266 - DEBUG - integration_test - Step 207: Checking path alignment: vehicle=(13.804, 4.123), path_start=(0.000, 0.000), dist=14.406m
2026-01-12 18:52:35,266 - WARNING - integration_test - Step 207: Vehicle is far from path start (dist=14.406m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:35,266 - INFO - integration_test - === Calling planner.solve_mpc() at step 207 ===
2026-01-12 18:52:35,328 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:35,338 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:35,338 - INFO - integration_test - Warmstart k=0: x0=13.80386947811032 , y0=4.1227948494366 , psi0=-0.07953056145168974 , v0=3.000000029980778 , spline0=15.15151528816202 , a0=0.0 , w0=0.0
2026-01-12 18:52:35,338 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:35,340 - INFO - integration_test - Dyn residual k=0: pred=[14.102921214550511, 4.098960824787944, -0.07953056145168974, 3.000000029980778, 15.451515291160097], ws=[14.10292121156191, 4.098960825026131, -0.07953056145168969, 3.0, 15.086668320149137], res=[2.9886013663826816e-09, -2.381872477030811e-10, -5.551115123125783e-17, 2.998077786031672e-08, 0.36484697101096053], res_norm=3.648e-01
2026-01-12 18:52:35,341 - INFO - integration_test - Dyn residual k=1: pred=[14.401972945013501, 4.075126800615662, -0.07953056145168969, 3.0, 15.386668320149138], ws=[14.401972945013501, 4.075126800615662, -0.07953056145168969, 3.0, 15.492511170820627], res=[0.0, 0.0, 0.0, 0.0, -0.10584285067148969], res_norm=1.058e-01
2026-01-12 18:52:35,342 - INFO - integration_test - Dyn residual k=2: pred=[14.701024678465092, 4.051292776205193, -0.07953056145168969, 3.0, 15.792511170820628], ws=[14.701024678465092, 4.051292776205193, -0.07953056145168969, 3.0, 15.644821370332417], res=[0.0, 0.0, 0.0, 0.0, 0.14768980048821057], res_norm=1.477e-01
2026-01-12 18:52:35,359 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,438 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:35,456 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,469 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:35,486 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,499 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:35,516 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,528 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:35,545 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,557 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,572 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,584 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,599 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,611 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,625 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,637 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,652 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,665 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,680 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,692 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,706 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:35,718 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:35,879 - INFO - integration_test - Step 207: MPC solve successful
2026-01-12 18:52:36,063 - INFO - integration_test - Step 207: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-12 18:52:36,063 - DEBUG - integration_test - Step 207: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:36,063 - INFO - integration_test - === Applying control at step 207 ===
2026-01-12 18:52:36,064 - INFO - integration_test -   Control dict from planner: {'a': -2.968485312247297e-09, 'w': -0.7999990373030714}
2026-01-12 18:52:36,064 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:36,064 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:36,065 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:36,065 - INFO - integration_test - Step 207 completed in 0.879s
2026-01-12 18:52:36,080 - INFO - integration_test - Step 208 (contouring until path end)
2026-01-12 18:52:36,082 - DEBUG - integration_test - Syncing planner state at step 208: vehicle_state=[14.10164948  4.08703056 -0.15953047  3.00000003 15.30000014]
2026-01-12 18:52:36,082 - DEBUG - integration_test - Step 208: Using propagated spline 15.3000 (close to path, dist=0.462m, drift=0.451m)
2026-01-12 18:52:36,082 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-12 18:52:36,083 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:36,160 - DEBUG - integration_test - Step 208: Checking path alignment: vehicle=(14.102, 4.087), path_start=(0.000, 0.000), dist=14.682m
2026-01-12 18:52:36,160 - WARNING - integration_test - Step 208: Vehicle is far from path start (dist=14.682m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:36,160 - INFO - integration_test - === Calling planner.solve_mpc() at step 208 ===
2026-01-12 18:52:36,220 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:36,231 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:36,231 - INFO - integration_test - Warmstart k=0: x0=14.101649481591016 , y0=4.087030562369231 , psi0=-0.15953046518199687 , v0=3.0000000296839295 , spline0=15.350505190120312 , a0=0.0 , w0=0.0
2026-01-12 18:52:36,231 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:36,232 - INFO - integration_test - Dyn residual k=0: pred=[14.397840078520069, 4.039374166451717, -0.15953046518199687, 3.0000000296839295, 15.650505193088705], ws=[14.39784007558937, 4.03937416692326, -0.1595304651819971, 3.0, 15.739768258835626], res=[2.930699238845591e-09, -4.715428048029935e-10, 2.220446049250313e-16, 2.9683929536616915e-08, -0.08926306574692155], res_norm=8.926e-02
2026-01-12 18:52:36,233 - INFO - integration_test - Dyn residual k=1: pred=[14.694030669587724, 3.9917177714772887, -0.1595304651819971, 3.0, 16.039768258835625], ws=[14.694030669587724, 3.9917177714772887, -0.1595304651819971, 3.0, 15.670886186476253], res=[0.0, 0.0, 0.0, 0.0, 0.36888207235937287], res_norm=3.689e-01
2026-01-12 18:52:36,234 - INFO - integration_test - Dyn residual k=2: pred=[14.990221263586077, 3.9440613760313177, -0.1595304651819971, 3.0, 15.970886186476253], ws=[14.990221263586077, 3.9440613760313177, -0.1595304651819971, 3.0, 16.07218752509558], res=[0.0, 0.0, 0.0, 0.0, -0.10130133861932578], res_norm=1.013e-01
2026-01-12 18:52:36,253 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,337 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:36,355 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,370 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:36,390 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,403 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:36,419 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,435 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:36,452 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,464 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,479 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,490 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,505 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,517 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,534 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,547 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,563 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,574 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,589 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,601 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,616 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:36,628 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:36,787 - INFO - integration_test - Step 208: MPC solve successful
2026-01-12 18:52:36,969 - INFO - integration_test - Step 208: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-12 18:52:36,970 - DEBUG - integration_test - Step 208: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:36,970 - INFO - integration_test - === Applying control at step 208 ===
2026-01-12 18:52:36,970 - INFO - integration_test -   Control dict from planner: {'a': 2.105927571805308e-09, 'w': -0.8000000093131028}
2026-01-12 18:52:36,970 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:36,970 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:36,971 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:36,971 - INFO - integration_test - Step 208 completed in 0.890s
2026-01-12 18:52:36,985 - INFO - integration_test - Step 209 (contouring until path end)
2026-01-12 18:52:36,986 - DEBUG - integration_test - Syncing planner state at step 209: vehicle_state=[14.39561901  4.02758368 -0.23953047  3.00000003 15.60000014]
2026-01-12 18:52:36,987 - DEBUG - integration_test - Step 209: Using propagated spline 15.6000 (close to path, dist=0.355m, drift=0.151m)
2026-01-12 18:52:36,987 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-12 18:52:36,988 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:37,067 - DEBUG - integration_test - Step 209: Checking path alignment: vehicle=(14.396, 4.028), path_start=(0.000, 0.000), dist=14.948m
2026-01-12 18:52:37,067 - WARNING - integration_test - Step 209: Vehicle is far from path start (dist=14.948m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:37,067 - INFO - integration_test - === Calling planner.solve_mpc() at step 209 ===
2026-01-12 18:52:37,130 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:37,140 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:37,140 - INFO - integration_test - Warmstart k=0: x0=14.395619007746358 , y0=4.027583676199816 , psi0=-0.23953046611330714 , v0=3.0000000298945224 , spline0=15.751515294119866 , a0=0.0 , w0=0.0
2026-01-12 18:52:37,140 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:37,142 - INFO - integration_test - Dyn residual k=0: pred=[14.687053853814781, 3.9564097182464604, -0.23953046611330714, 3.0000000298945224, 16.05151529710932], ws=[14.68705385091068, 3.9564097189556975, -0.2395304661133073, 3.0, 15.898991485608304], res=[2.904101847889251e-09, -7.09237113483141e-10, 1.6653345369377348e-16, 2.989452241308754e-08, 0.15252381150101435], res_norm=1.525e-01
2026-01-12 18:52:37,143 - INFO - integration_test - Dyn residual k=1: pred=[14.978488694075, 3.885235761711579, -0.2395304661133073, 3.0, 16.198991485608303], ws=[14.978488694075, 3.885235761711579, -0.2395304661133073, 3.0, 16.317558137443996], res=[0.0, 0.0, 0.0, 0.0, -0.11856665183569248], res_norm=1.186e-01
2026-01-12 18:52:37,144 - INFO - integration_test - Dyn residual k=2: pred=[15.269923537239322, 3.8140618044674603, -0.2395304661133073, 3.0, 16.617558137443996], ws=[15.269923537239322, 3.8140618044674603, -0.2395304661133073, 3.0, 16.496625806140933], res=[0.0, 0.0, 0.0, 0.0, 0.12093233130306302], res_norm=1.209e-01
2026-01-12 18:52:37,160 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,239 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:37,256 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,269 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:37,288 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,302 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:37,318 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,330 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:37,346 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,358 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,373 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,385 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,400 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,412 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,427 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,438 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,454 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,466 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,482 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,493 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,507 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:37,519 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:37,688 - INFO - integration_test - Step 209: MPC solve successful
2026-01-12 18:52:37,891 - INFO - integration_test - Step 209: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-12 18:52:37,891 - DEBUG - integration_test - Step 209: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:37,891 - INFO - integration_test - === Applying control at step 209 ===
2026-01-12 18:52:37,891 - INFO - integration_test -   Control dict from planner: {'a': 5.907554066712835e-10, 'w': -0.07781534874522178}
2026-01-12 18:52:37,891 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:37,891 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:37,892 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:37,893 - INFO - integration_test - Step 209 completed in 0.907s
2026-01-12 18:52:37,905 - INFO - integration_test - Step 210 (contouring until path end)
2026-01-12 18:52:37,908 - DEBUG - integration_test - Syncing planner state at step 210: vehicle_state=[14.68677399  3.95527654 -0.247312    3.00000003 15.90000015]
2026-01-12 18:52:37,909 - DEBUG - integration_test - Step 210: Using propagated spline 15.9000 (close to path, dist=0.478m, drift=0.149m)
2026-01-12 18:52:37,909 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-12 18:52:37,910 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:38,333 - DEBUG - integration_test - Step 210: Checking path alignment: vehicle=(14.687, 3.955), path_start=(0.000, 0.000), dist=15.210m
2026-01-12 18:52:38,334 - WARNING - integration_test - Step 210: Vehicle is far from path start (dist=15.210m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:38,334 - INFO - integration_test - === Calling planner.solve_mpc() at step 210 ===
2026-01-12 18:52:38,396 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:38,407 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:38,407 - INFO - integration_test - Warmstart k=0: x0=14.686773992731975 , y0=3.955276537046977 , psi0=-0.24731200098782932 , v0=3.000000029953598 , spline0=15.647474893074822 , a0=0.0 , w0=0.0
2026-01-12 18:52:38,407 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:38,408 - INFO - integration_test - Dyn residual k=0: pred=[14.977646178281137, 3.881836946422644, -0.24731200098782932, 3.000000029953598, 15.947474896070181], ws=[14.977646175376915, 3.8818369471559038, -0.24731200098782935, 3.0, 16.047891582400116], res=[2.9042226401543303e-09, -7.332596752007703e-10, 2.7755575615628914e-17, 2.995359782431706e-08, -0.10041668632993428], res_norm=1.004e-01
2026-01-12 18:52:38,410 - INFO - integration_test - Dyn residual k=1: pred=[15.268518358021854, 3.8083973572648304, -0.24731200098782935, 3.0, 16.347891582400116], ws=[15.268518358021854, 3.8083973572648304, -0.24731200098782935, 3.0, 16.49862272539778], res=[0.0, 0.0, 0.0, 0.0, -0.15073114299766388], res_norm=1.507e-01
2026-01-12 18:52:38,411 - INFO - integration_test - Dyn residual k=2: pred=[15.559390540666794, 3.734957767373757, -0.24731200098782935, 3.0, 16.79862272539778], ws=[15.559390540666794, 3.734957767373757, -0.24731200098782935, 3.0, 16.614687501880706], res=[0.0, 0.0, 0.0, 0.0, 0.18393522351707503], res_norm=1.839e-01
2026-01-12 18:52:38,427 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,509 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:38,526 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,539 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:38,557 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,570 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:38,586 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,600 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:38,616 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,627 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,642 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,654 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,669 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,681 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,696 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,707 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,722 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,734 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,750 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,762 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,776 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:38,788 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:38,969 - INFO - integration_test - Step 210: MPC solve successful
2026-01-12 18:52:39,166 - INFO - integration_test - Step 210: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-12 18:52:39,166 - DEBUG - integration_test - Step 210: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:39,166 - INFO - integration_test - === Applying control at step 210 ===
2026-01-12 18:52:39,166 - INFO - integration_test -   Control dict from planner: {'a': 2.895938607703631e-10, 'w': 0.4802445167790363}
2026-01-12 18:52:39,166 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:39,166 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:39,167 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:39,168 - INFO - integration_test - Step 210 completed in 1.260s
2026-01-12 18:52:39,183 - INFO - integration_test - Step 211 (contouring until path end)
2026-01-12 18:52:39,184 - DEBUG - integration_test - Syncing planner state at step 211: vehicle_state=[14.97929749  3.88884832 -0.19928755  3.00000003 16.20000015]
2026-01-12 18:52:39,184 - DEBUG - integration_test - Step 211: Using propagated spline 16.2000 (close to path, dist=0.435m, drift=0.156m)
2026-01-12 18:52:39,184 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-12 18:52:39,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:39,263 - DEBUG - integration_test - Step 211: Checking path alignment: vehicle=(14.979, 3.889), path_start=(0.000, 0.000), dist=15.476m
2026-01-12 18:52:39,263 - WARNING - integration_test - Step 211: Vehicle is far from path start (dist=15.476m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:39,263 - INFO - integration_test - === Calling planner.solve_mpc() at step 211 ===
2026-01-12 18:52:39,324 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:39,335 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:39,335 - INFO - integration_test - Warmstart k=0: x0=14.979297492104992 , y0=3.8888483189105663 , psi0=-0.1992875493099257 , v0=3.0000000299825573 , spline0=16.04848499708318 , a0=0.0 , w0=0.0
2026-01-12 18:52:39,335 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:39,336 - INFO - integration_test - Dyn residual k=0: pred=[15.273359856403028, 3.8294570089199342, -0.1992875493099257, 3.0000000299825573, 16.348485000081435], ws=[15.273359853464113, 3.829457009513502, -0.19928754930992554, 3.0, 16.208640262981454], res=[2.938914889227817e-09, -5.935678615287543e-10, -1.6653345369377348e-16, 2.998255732578059e-08, 0.13984473709998113], res_norm=1.398e-01
2026-01-12 18:52:39,337 - INFO - integration_test - Dyn residual k=1: pred=[15.567422214823234, 3.770065700116438, -0.19928754930992554, 3.0, 16.508640262981455], ws=[15.567422214823234, 3.770065700116438, -0.19928754930992554, 3.0, 16.64234716143598], res=[0.0, 0.0, 0.0, 0.0, -0.13370689845452333], res_norm=1.337e-01
2026-01-12 18:52:39,338 - INFO - integration_test - Dyn residual k=2: pred=[15.861484576182354, 3.7106743907193738, -0.19928754930992554, 3.0, 16.94234716143598], ws=[15.861484576182354, 3.7106743907193738, -0.19928754930992554, 3.0, 17.041281856894816], res=[0.0, 0.0, 0.0, 0.0, -0.09893469545883704], res_norm=9.893e-02
2026-01-12 18:52:39,355 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,436 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:39,452 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,465 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:39,482 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,495 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:39,511 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,523 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:39,541 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,553 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,568 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,580 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,595 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,606 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,621 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,633 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,649 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,660 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,675 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,687 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,702 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:39,714 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:39,893 - INFO - integration_test - Step 211: MPC solve successful
2026-01-12 18:52:40,100 - INFO - integration_test - Step 211: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-12 18:52:40,101 - DEBUG - integration_test - Step 211: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:40,101 - INFO - integration_test - === Applying control at step 211 ===
2026-01-12 18:52:40,101 - INFO - integration_test -   Control dict from planner: {'a': 1.1463386472197674e-10, 'w': 0.8000000095458646}
2026-01-12 18:52:40,101 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:40,101 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:40,102 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:40,102 - INFO - integration_test - Step 211 completed in 0.919s
2026-01-12 18:52:40,118 - INFO - integration_test - Step 212 (contouring until path end)
2026-01-12 18:52:40,119 - DEBUG - integration_test - Syncing planner state at step 212: vehicle_state=[15.27542068  3.84127656 -0.11928755  3.00000003 16.50000015]
2026-01-12 18:52:40,119 - DEBUG - integration_test - Step 212: Using propagated spline 16.5000 (close to path, dist=0.494m, drift=0.144m)
2026-01-12 18:52:40,120 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-12 18:52:40,121 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:40,198 - DEBUG - integration_test - Step 212: Checking path alignment: vehicle=(15.275, 3.841), path_start=(0.000, 0.000), dist=15.751m
2026-01-12 18:52:40,198 - WARNING - integration_test - Step 212: Vehicle is far from path start (dist=15.751m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:40,199 - INFO - integration_test - === Calling planner.solve_mpc() at step 212 ===
2026-01-12 18:52:40,259 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:40,270 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:40,270 - INFO - integration_test - Warmstart k=0: x0=15.2754206801281 , y0=3.8412765614259383 , psi0=-0.11928754835533925 , v0=3.0000000299940206 , spline0=16.44949510109268 , a0=0.0 , w0=0.0
2026-01-12 18:52:40,270 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:40,271 - INFO - integration_test - Dyn residual k=0: pred=[15.573288785017311, 3.8055751064226615, -0.11928754835533925, 3.0000000299940206, 16.74949510409208], ws=[15.573288782039224, 3.805575106779605, -0.11928754835533928, 3.0, 16.86245465189222], res=[2.9780871102502715e-09, -3.569433637551356e-10, 2.7755575615628914e-17, 2.999402060055445e-08, -0.11295954780014128], res_norm=1.130e-01
2026-01-12 18:52:40,273 - INFO - integration_test - Dyn residual k=1: pred=[15.871156883950349, 3.7698736521332714, -0.11928754835533928, 3.0, 17.162454651892222], ws=[15.871156883950349, 3.7698736521332714, -0.11928754835533928, 3.0, 17.034967624959158], res=[0.0, 0.0, 0.0, 0.0, 0.12748702693306413], res_norm=1.275e-01
2026-01-12 18:52:40,274 - INFO - integration_test - Dyn residual k=2: pred=[16.169024985861473, 3.734172197486938, -0.11928754835533928, 3.0, 17.33496762495916], ws=[16.169024985861473, 3.734172197486938, -0.11928754835533928, 3.0, 17.455759582218036], res=[0.0, 0.0, 0.0, 0.0, -0.12079195725887715], res_norm=1.208e-01
2026-01-12 18:52:40,289 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,370 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:40,387 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,400 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:40,416 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,429 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:40,445 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,458 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:40,474 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,487 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,502 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,514 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,529 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,541 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,556 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,568 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,583 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,595 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,621 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,637 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:40,649 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:40,836 - INFO - integration_test - Step 212: MPC solve successful
2026-01-12 18:52:41,043 - INFO - integration_test - Step 212: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-12 18:52:41,043 - DEBUG - integration_test - Step 212: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:41,043 - INFO - integration_test - === Applying control at step 212 ===
2026-01-12 18:52:41,043 - INFO - integration_test -   Control dict from planner: {'a': -4.1983664568696224e-10, 'w': 0.7999999580139608}
2026-01-12 18:52:41,043 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:41,043 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:41,045 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:41,045 - INFO - integration_test - Step 212 completed in 0.927s
2026-01-12 18:52:41,059 - INFO - integration_test - Step 213 (contouring until path end)
2026-01-12 18:52:41,061 - DEBUG - integration_test - Syncing planner state at step 213: vehicle_state=[15.57439846  3.81752155 -0.03928755  3.00000003 16.80000015]
2026-01-12 18:52:41,062 - DEBUG - integration_test - Step 213: Using propagated spline 16.8000 (close to path, dist=0.467m, drift=0.162m)
2026-01-12 18:52:41,062 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-12 18:52:41,063 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:41,139 - DEBUG - integration_test - Step 213: Checking path alignment: vehicle=(15.574, 3.818), path_start=(0.000, 0.000), dist=16.035m
2026-01-12 18:52:41,139 - WARNING - integration_test - Step 213: Vehicle is far from path start (dist=16.035m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:41,139 - INFO - integration_test - === Calling planner.solve_mpc() at step 213 ===
2026-01-12 18:52:41,200 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:41,211 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:41,212 - INFO - integration_test - Warmstart k=0: x0=15.574398461636482 , y0=3.817521545855814 , psi0=-0.03928755255394316 , v0=3.000000029952037 , spline0=16.648485003077784 , a0=0.0 , w0=0.0
2026-01-12 18:52:41,212 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:41,213 - INFO - integration_test - Dyn residual k=0: pred=[15.874166967640349, 3.805738311778016, -0.03928755255394316, 3.000000029952037, 16.94848500607299], ws=[15.929586986063399, 3.9218659679851227, -0.03928755255394334, 3.0, 17.11185984486135], res=[-0.055420018423049555, -0.11612765620710652, 1.8041124150158794e-16, 2.9952036850744435e-08, -0.16337483878836068], res_norm=2.080e-01
2026-01-12 18:52:41,214 - INFO - integration_test - Dyn residual k=1: pred=[16.229355489074372, 3.910082734024969, -0.03928755255394334, 3.0, 17.41185984486135], ws=[16.17393546765843, 3.7939550779355065, -0.03928755255394334, 3.0, 17.215758271305077], res=[0.05542002141594082, 0.1161276560894624, 0.0, 0.0, 0.19610157355627322], res_norm=2.345e-01
2026-01-12 18:52:41,215 - INFO - integration_test - Dyn residual k=2: pred=[16.473703970669405, 3.7821718439753527, -0.03928755255394334, 3.0, 17.515758271305078], ws=[16.473703970669405, 3.7821718439753527, -0.03928755255394334, 3.0, 17.583260333923548], res=[0.0, 0.0, 0.0, 0.0, -0.0675020626184697], res_norm=6.750e-02
2026-01-12 18:52:41,231 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,312 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:41,329 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,341 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:41,359 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,372 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:41,388 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,402 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:41,418 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,430 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,445 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,457 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,473 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,486 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,501 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,513 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,530 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,542 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,557 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,570 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,585 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:41,597 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:41,830 - INFO - integration_test - Step 213: MPC solve successful
2026-01-12 18:52:42,042 - INFO - integration_test - Step 213: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-12 18:52:42,042 - DEBUG - integration_test - Step 213: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:42,042 - INFO - integration_test - === Applying control at step 213 ===
2026-01-12 18:52:42,042 - INFO - integration_test -   Control dict from planner: {'a': 3.1870918586428687e-10, 'w': 0.5826748015405222}
2026-01-12 18:52:42,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:42,043 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:42,044 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:42,044 - INFO - integration_test - Step 213 completed in 0.984s
2026-01-12 18:52:42,059 - INFO - integration_test - Step 214 (contouring until path end)
2026-01-12 18:52:42,061 - DEBUG - integration_test - Syncing planner state at step 214: vehicle_state=[15.87434057  3.81447589  0.01897993  3.00000003 17.10000016]
2026-01-12 18:52:42,061 - DEBUG - integration_test - Step 214: Using propagated spline 17.1000 (close to path, dist=0.453m, drift=0.138m)
2026-01-12 18:52:42,062 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-12 18:52:42,062 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:42,137 - DEBUG - integration_test - Step 214: Checking path alignment: vehicle=(15.874, 3.814), path_start=(0.000, 0.000), dist=16.326m
2026-01-12 18:52:42,137 - WARNING - integration_test - Step 214: Vehicle is far from path start (dist=16.326m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:42,137 - INFO - integration_test - === Calling planner.solve_mpc() at step 214 ===
2026-01-12 18:52:42,199 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:42,209 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:42,210 - INFO - integration_test - Warmstart k=0: x0=15.860284589705138 , y0=3.9659745522424776 , psi0=0.018979927600109067 , v0=3.000000029983908 , spline0=17.04949510708628 , a0=0.0 , w0=0.0
2026-01-12 18:52:42,210 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:42,211 - INFO - integration_test - Dyn residual k=0: pred=[16.160230558677352, 3.9716681887213463, 0.018979927600109067, 3.000000029983908, 17.34949511008467], ws=[15.979195652825046, 3.929607612289356, 0.018979927600109026, 3.0, 17.071875497459892], res=[0.18103490585230553, 0.04206057643199035, 4.163336342344337e-17, 2.9983907801067744e-08, 0.27761961262477897], res_norm=3.341e-01
2026-01-12 18:52:42,212 - INFO - integration_test - Dyn residual k=1: pred=[16.27914161879941, 3.935301248711319, 0.018979927600109026, 3.0, 17.371875497459893], ws=[16.473038903908144, 3.9278499358892667, 0.018979927600109026, 3.0, 17.563443568244], res=[-0.19389728510873283, 0.007451312822052358, 0.0, 0.0, -0.19156807078410765], res_norm=2.727e-01
2026-01-12 18:52:42,213 - INFO - integration_test - Dyn residual k=2: pred=[16.772984869882507, 3.9335435723112298, 0.018979927600109026, 3.0, 17.863443568244], ws=[16.774178464151145, 3.831556794567937, 0.018979927600109026, 3.0, 18.00350933448299], res=[-0.0011935942686385204, 0.10198677774329257, 0.0, 0.0, -0.14006576623899036], res_norm=1.733e-01
2026-01-12 18:52:42,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,308 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:42,325 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,337 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:42,354 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,368 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:42,384 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,397 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:42,412 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,423 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,438 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,450 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,466 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,478 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,492 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,504 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,532 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,548 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,560 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,575 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:42,587 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:42,817 - INFO - integration_test - Step 214: MPC solve successful
2026-01-12 18:52:43,023 - INFO - integration_test - Step 214: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-12 18:52:43,024 - DEBUG - integration_test - Step 214: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:43,024 - INFO - integration_test - === Applying control at step 214 ===
2026-01-12 18:52:43,024 - INFO - integration_test -   Control dict from planner: {'a': 9.53700449277511e-11, 'w': 0.8000000011127619}
2026-01-12 18:52:43,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:43,024 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:43,025 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:43,026 - INFO - integration_test - Step 214 completed in 0.966s
2026-01-12 18:52:43,043 - INFO - integration_test - Step 215 (contouring until path end)
2026-01-12 18:52:43,045 - DEBUG - integration_test - Syncing planner state at step 215: vehicle_state=[16.17373908  3.83215489  0.09897993  3.00000003 17.40000016]
2026-01-12 18:52:43,046 - DEBUG - integration_test - Step 215: Using propagated spline 17.4000 (close to path, dist=0.446m, drift=0.168m)
2026-01-12 18:52:43,046 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-12 18:52:43,047 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:43,125 - DEBUG - integration_test - Step 215: Checking path alignment: vehicle=(16.174, 3.832), path_start=(0.000, 0.000), dist=16.622m
2026-01-12 18:52:43,125 - WARNING - integration_test - Step 215: Vehicle is far from path start (dist=16.622m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:43,125 - INFO - integration_test - === Calling planner.solve_mpc() at step 215 ===
2026-01-12 18:52:43,187 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:43,198 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:43,198 - INFO - integration_test - Warmstart k=0: x0=16.1737390754367 , y0=3.8321548920564483 , psi0=0.09897992771138525 , v0=3.0000000299934446 , spline0=17.450505211095724 , a0=0.0 , w0=0.0
2026-01-12 18:52:43,198 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:43,200 - INFO - integration_test - Dyn residual k=0: pred=[16.472270723887664, 3.8618004089646667, 0.09897992771138525, 3.0000000299934446, 17.750505214095067], ws=[16.308929892851697, 4.087063835051936, 0.09897992771138542, 3.0, 17.52389691787499], res=[0.16334083103596697, -0.22526342608726901, -1.6653345369377348e-16, 2.9993444616849274e-08, 0.2266082962200784], res_norm=3.589e-01
2026-01-12 18:52:43,200 - INFO - integration_test - Dyn residual k=1: pred=[16.607461538318, 4.116709351663764, 0.09897992771138542, 3.0, 17.82389691787499], ws=[16.770802366369303, 3.891445925280104, 0.09897992771138542, 3.0, 17.746106209665026], res=[-0.1633408280513038, 0.22526342638365993, 0.0, 0.0, 0.07779070820996381], res_norm=2.889e-01
2026-01-12 18:52:43,201 - INFO - integration_test - Dyn residual k=2: pred=[17.069334011835604, 3.921091441891932, 0.09897992771138542, 3.0, 18.046106209665027], ws=[16.914577300450347, 4.128904407521793, 0.09897992771138542, 3.0, 17.831282814165192], res=[0.15475671138525726, -0.20781296562986062, 0.0, 0.0, 0.21482339549983465], res_norm=3.366e-01
2026-01-12 18:52:43,217 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,299 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:43,315 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,328 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:43,345 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,357 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:43,373 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,386 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:43,402 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,414 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,429 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,440 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,455 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,467 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,493 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,510 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,521 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,538 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,550 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,565 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:43,576 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:43,800 - INFO - integration_test - Step 215: MPC solve successful
2026-01-12 18:52:44,017 - INFO - integration_test - Step 215: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-12 18:52:44,018 - DEBUG - integration_test - Step 215: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:44,018 - INFO - integration_test - === Applying control at step 215 ===
2026-01-12 18:52:44,018 - INFO - integration_test -   Control dict from planner: {'a': 4.0692577357061066e-11, 'w': 0.80000000922025}
2026-01-12 18:52:44,018 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:44,018 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:44,019 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:44,019 - INFO - integration_test - Step 215 completed in 0.975s
2026-01-12 18:52:44,036 - INFO - integration_test - Step 216 (contouring until path end)
2026-01-12 18:52:44,037 - DEBUG - integration_test - Syncing planner state at step 216: vehicle_state=[16.47076721  3.8737037   0.17897993  3.00000003 17.70000016]
2026-01-12 18:52:44,038 - DEBUG - integration_test - Step 216: Using propagated spline 17.7000 (close to path, dist=0.351m, drift=0.132m)
2026-01-12 18:52:44,038 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-12 18:52:44,039 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:44,117 - DEBUG - integration_test - Step 216: Checking path alignment: vehicle=(16.471, 3.874), path_start=(0.000, 0.000), dist=16.920m
2026-01-12 18:52:44,117 - WARNING - integration_test - Step 216: Vehicle is far from path start (dist=16.920m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:44,118 - INFO - integration_test - === Calling planner.solve_mpc() at step 216 ===
2026-01-12 18:52:44,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:44,192 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:44,192 - INFO - integration_test - Warmstart k=0: x0=16.47076720784348 , y0=3.873703696546531 , psi0=0.17897992863341025 , v0=3.000000029997514 , spline0=17.649495113085372 , a0=0.0 , w0=0.0
2026-01-12 18:52:44,192 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:44,193 - INFO - integration_test - Dyn residual k=0: pred=[16.765974951944614, 3.9271114639831994, 0.17897992863341025, 3.000000029997514, 17.949495116085124], ws=[16.76597494899278, 3.9271114634491657, 0.17897992863341017, 3.0, 17.7883458008042], res=[2.951832556163936e-09, 5.340337061454647e-10, 8.326672684688674e-17, 2.999751380627913e-08, 0.16114931528092313], res_norm=1.611e-01
2026-01-12 18:52:44,194 - INFO - integration_test - Dyn residual k=1: pred=[17.061182690142083, 3.9805192303518004, 0.17897992863341017, 3.0, 18.088345800804202], ws=[16.868434636972392, 4.343015909772811, 0.17897992863341017, 3.0, 18.096820728128524], res=[0.1927480531696908, -0.3624966794210107, 0.0, 0.0, -0.008474927324321868], res_norm=4.106e-01
2026-01-12 18:52:44,195 - INFO - integration_test - Dyn residual k=2: pred=[17.163642378121693, 4.396423676675446, 0.17897992863341017, 3.0, 18.396820728128525], ws=[17.356390431291384, 4.033926997254436, 0.17897992863341017, 3.0, 18.35730485218901], res=[-0.1927480531696908, 0.36249667942101027, 0.0, 0.0, 0.039515875939514444], res_norm=4.125e-01
2026-01-12 18:52:44,211 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,291 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:44,308 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,321 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:44,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,352 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:44,368 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,381 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:44,397 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,409 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,423 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,435 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,450 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,463 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,478 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,490 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,505 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,518 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,534 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,546 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,561 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:44,572 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:44,772 - INFO - integration_test - Step 216: MPC solve successful
2026-01-12 18:52:45,015 - INFO - integration_test - Step 216: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-12 18:52:45,016 - DEBUG - integration_test - Step 216: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:45,016 - INFO - integration_test - === Applying control at step 216 ===
2026-01-12 18:52:45,016 - INFO - integration_test -   Control dict from planner: {'a': -1.581067398229576e-07, 'w': 0.4113228315609875}
2026-01-12 18:52:45,016 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:45,016 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:45,017 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:45,018 - INFO - integration_test - Step 216 completed in 0.981s
2026-01-12 18:52:45,033 - INFO - integration_test - Step 217 (contouring until path end)
2026-01-12 18:52:45,036 - DEBUG - integration_test - Syncing planner state at step 217: vehicle_state=[16.76479348  3.93316683  0.22011221  3.00000001 18.00000017]
2026-01-12 18:52:45,036 - DEBUG - integration_test - Step 217: Using propagated spline 18.0000 (close to path, dist=0.399m, drift=0.174m)
2026-01-12 18:52:45,037 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-12 18:52:45,038 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:45,114 - DEBUG - integration_test - Step 217: Checking path alignment: vehicle=(16.765, 3.933), path_start=(0.000, 0.000), dist=17.220m
2026-01-12 18:52:45,114 - WARNING - integration_test - Step 217: Vehicle is far from path start (dist=17.220m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:45,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 217 ===
2026-01-12 18:52:45,175 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:45,186 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:45,186 - INFO - integration_test - Warmstart k=0: x0=16.89524716428488 , y0=4.12853025600667 , psi0=0.22011221178950902 , v0=3.0000000141868397 , spline0=17.848485013493956 , a0=0.0 , w0=0.0
2026-01-12 18:52:45,186 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:45,187 - INFO - integration_test - Dyn residual k=0: pred=[17.18800905224437, 4.19403199498819, 0.22011221178950902, 3.0000000141868397, 18.14848501491264], ws=[17.05755536629748, 3.9986685723654976, 0.2201122117895089, 3.0, 18.443476698976284], res=[0.13045368594689322, 0.1953634226226928, 1.1102230246251565e-16, 1.4186839703000942e-08, -0.2949916840636426], res_norm=3.771e-01
2026-01-12 18:52:45,189 - INFO - integration_test - Dyn residual k=1: pred=[17.350317252872518, 4.064170311037264, 0.2201122117895089, 3.0, 18.743476698976284], ws=[17.350317252872518, 4.064170311037264, 0.2201122117895089, 3.0, 18.58431731951577], res=[0.0, 0.0, 0.0, 0.0, 0.15915937946051528], res_norm=1.592e-01
2026-01-12 18:52:45,190 - INFO - integration_test - Dyn residual k=2: pred=[17.643079139447558, 4.129672049709031, 0.2201122117895089, 3.0, 18.88431731951577], ws=[17.643079139447558, 4.129672049709031, 0.2201122117895089, 3.0, 18.99574589626844], res=[0.0, 0.0, 0.0, 0.0, -0.11142857675266882], res_norm=1.114e-01
2026-01-12 18:52:45,206 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,287 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:45,304 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,318 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:45,335 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,349 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:45,365 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,378 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:45,394 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,405 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,420 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,432 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,447 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,460 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,487 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,517 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,535 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,548 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,563 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:45,574 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:45,781 - INFO - integration_test - Step 217: MPC solve successful
2026-01-12 18:52:46,018 - INFO - integration_test - Step 217: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-12 18:52:46,019 - DEBUG - integration_test - Step 217: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:46,019 - INFO - integration_test - === Applying control at step 217 ===
2026-01-12 18:52:46,019 - INFO - integration_test -   Control dict from planner: {'a': 1.0567456475646853e-07, 'w': -0.7999999392151006}
2026-01-12 18:52:46,019 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:46,019 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:46,020 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:46,020 - INFO - integration_test - Step 217 completed in 0.985s
2026-01-12 18:52:46,037 - INFO - integration_test - Step 218 (contouring until path end)
2026-01-12 18:52:46,039 - DEBUG - integration_test - Syncing planner state at step 218: vehicle_state=[17.05986187  3.9868945   0.14011222  3.00000002 18.30000017]
2026-01-12 18:52:46,040 - DEBUG - integration_test - Step 218: Using propagated spline 18.3000 (close to path, dist=0.226m, drift=0.126m)
2026-01-12 18:52:46,041 - DEBUG - integration_test -   Set spline state to 18.3000
2026-01-12 18:52:46,042 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:46,118 - DEBUG - integration_test - Step 218: Checking path alignment: vehicle=(17.060, 3.987), path_start=(0.000, 0.000), dist=17.520m
2026-01-12 18:52:46,118 - WARNING - integration_test - Step 218: Vehicle is far from path start (dist=17.520m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:46,118 - INFO - integration_test - === Calling planner.solve_mpc() at step 218 ===
2026-01-12 18:52:46,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:46,192 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:46,192 - INFO - integration_test - Warmstart k=0: x0=17.059861865302782 , y0=3.9868944969954483 , psi0=0.14011221786799893 , v0=3.0000000247542964 , spline0=18.45151531899969 , a0=0.0 , w0=0.0
2026-01-12 18:52:46,192 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:46,193 - INFO - integration_test - Dyn residual k=0: pred=[17.356921966978064, 4.028790767449153, 0.14011221786799893, 3.0000000247542964, 18.751515321475118], ws=[17.35692196452689, 4.028790767103448, 0.140112217867999, 3.0, 18.6063151394235], res=[2.451173486406333e-09, 3.4570479812146004e-10, -5.551115123125783e-17, 2.4754296390483432e-08, 0.14520018205161733], res_norm=1.452e-01
2026-01-12 18:52:46,195 - INFO - integration_test - Dyn residual k=1: pred=[17.653982063751, 4.0706870372114485, 0.140112217867999, 3.0, 18.9063151394235], ws=[17.653982063751, 4.0706870372114485, 0.140112217867999, 3.0, 18.730361936929675], res=[0.0, 0.0, 0.0, 0.0, 0.17595320249382596], res_norm=1.760e-01
2026-01-12 18:52:46,196 - INFO - integration_test - Dyn residual k=2: pred=[17.951042162975106, 4.112583307319449, 0.140112217867999, 3.0, 19.030361936929676], ws=[17.951042162975106, 4.112583307319449, 0.140112217867999, 3.0, 18.90912181208673], res=[0.0, 0.0, 0.0, 0.0, 0.12124012484294511], res_norm=1.212e-01
2026-01-12 18:52:46,211 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,290 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:46,306 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,319 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:46,336 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,350 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:46,366 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,379 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:46,394 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,405 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,420 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,432 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,449 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,461 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,476 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,487 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,503 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,515 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,530 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,542 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,557 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:46,569 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:46,771 - INFO - integration_test - Step 218: MPC solve successful
2026-01-12 18:52:47,000 - INFO - integration_test - Step 218: Computed 6 numeric contouring constraints for visualization (s=18.300)
2026-01-12 18:52:47,001 - DEBUG - integration_test - Step 218: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:47,001 - INFO - integration_test - === Applying control at step 218 ===
2026-01-12 18:52:47,001 - INFO - integration_test -   Control dict from planner: {'a': 3.494072500788237e-08, 'w': -0.7999999922068796}
2026-01-12 18:52:47,001 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:47,001 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:47,002 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:47,002 - INFO - integration_test - Step 218 completed in 0.964s
2026-01-12 18:52:47,018 - INFO - integration_test - Step 219 (contouring until path end)
2026-01-12 18:52:47,019 - DEBUG - integration_test - Syncing planner state at step 219: vehicle_state=[17.35828017  4.01687002  0.06011222  3.00000003 18.60000017]
2026-01-12 18:52:47,020 - DEBUG - integration_test - Step 219: Using propagated spline 18.6000 (close to path, dist=0.365m, drift=0.426m)
2026-01-12 18:52:47,020 - DEBUG - integration_test -   Set spline state to 18.6000
2026-01-12 18:52:47,021 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:47,101 - DEBUG - integration_test - Step 219: Checking path alignment: vehicle=(17.358, 4.017), path_start=(0.000, 0.000), dist=17.817m
2026-01-12 18:52:47,101 - WARNING - integration_test - Step 219: Vehicle is far from path start (dist=17.817m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:47,102 - INFO - integration_test - === Calling planner.solve_mpc() at step 219 ===
2026-01-12 18:52:47,164 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:47,175 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:47,175 - INFO - integration_test - Warmstart k=0: x0=17.358280165881236 , y0=4.016870024813751 , psi0=0.06011221864731098 , v0=3.000000028248369 , spline0=18.347474917784123 , a0=0.0 , w0=0.0
2026-01-12 18:52:47,175 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:47,177 - INFO - integration_test - Dyn residual k=0: pred=[17.657738310072073, 4.034892831828251, 0.06011221864731098, 3.000000028248369, 18.64747492060896], ws=[17.657738307252338, 4.034892831658546, 0.06011221864731109, 3.0, 18.75468080354492], res=[2.8197355561587756e-09, 1.6970513883052263e-10, -1.1102230246251565e-16, 2.8248368977301652e-08, -0.10720588293596123], res_norm=1.072e-01
2026-01-12 18:52:47,178 - INFO - integration_test - Dyn residual k=1: pred=[17.95719644862344, 4.0529156385033405, 0.06011221864731109, 3.0, 19.054680803544922], ws=[17.95719644862344, 4.0529156385033405, 0.06011221864731109, 3.0, 18.910664622968774], res=[0.0, 0.0, 0.0, 0.0, 0.1440161805761484], res_norm=1.440e-01
2026-01-12 18:52:47,179 - INFO - integration_test - Dyn residual k=2: pred=[18.25665458999454, 4.070938445348135, 0.06011221864731109, 3.0, 19.210664622968775], ws=[18.25665458999454, 4.070938445348135, 0.06011221864731109, 3.0, 19.338464341989763], res=[0.0, 0.0, 0.0, 0.0, -0.12779971902098808], res_norm=1.278e-01
2026-01-12 18:52:47,194 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,273 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:47,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,302 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:47,319 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,332 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:47,349 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,362 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:47,378 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,389 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,403 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,415 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,430 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,441 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,456 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,468 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,484 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,496 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,511 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,522 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,537 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:47,549 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:47,770 - INFO - integration_test - Step 219: MPC solve successful
2026-01-12 18:52:48,006 - INFO - integration_test - Step 219: Computed 6 numeric contouring constraints for visualization (s=18.600)
2026-01-12 18:52:48,006 - DEBUG - integration_test - Step 219: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:48,006 - INFO - integration_test - === Applying control at step 219 ===
2026-01-12 18:52:48,006 - INFO - integration_test -   Control dict from planner: {'a': 1.163835643822125e-08, 'w': 0.49531692470640903}
2026-01-12 18:52:48,006 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:48,007 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:48,008 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:48,009 - INFO - integration_test - Step 219 completed in 0.990s
2026-01-12 18:52:48,022 - INFO - integration_test - Step 220 (contouring until path end)
2026-01-12 18:52:48,025 - DEBUG - integration_test - Syncing planner state at step 220: vehicle_state=[17.65716962  4.04230028  0.10964391  3.00000003 18.90000017]
2026-01-12 18:52:48,025 - DEBUG - integration_test - Step 220: Using propagated spline 18.9000 (close to path, dist=0.204m, drift=0.120m)
2026-01-12 18:52:48,026 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-12 18:52:48,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:48,105 - DEBUG - integration_test - Step 220: Checking path alignment: vehicle=(17.657, 4.042), path_start=(0.000, 0.000), dist=18.114m
2026-01-12 18:52:48,105 - WARNING - integration_test - Step 220: Vehicle is far from path start (dist=18.114m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:48,105 - INFO - integration_test - === Calling planner.solve_mpc() at step 220 ===
2026-01-12 18:52:48,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:48,179 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:48,179 - INFO - integration_test - Warmstart k=0: x0=17.657169619091448 , y0=4.0423002815138025 , psi0=0.10964391111795188 , v0=3.0000000294122047 , spline0=18.748485021735444 , a0=0.0 , w0=0.0
2026-01-12 18:52:48,179 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:48,180 - INFO - integration_test - Dyn residual k=0: pred=[17.955368159746556, 4.0751275889863505, 0.10964391111795188, 3.0000000294122047, 19.048485024676665], ws=[17.955368156822995, 4.075127588664509, 0.10964391111795191, 3.0, 18.916078820778587], res=[2.9235600607080414e-09, 3.218412203409571e-10, -2.7755575615628914e-17, 2.9412204671785958e-08, 0.13240620389807845], res_norm=1.324e-01
2026-01-12 18:52:48,181 - INFO - integration_test - Dyn residual k=1: pred=[18.253566694554543, 4.107954895815216, 0.10964391111795191, 3.0, 19.216078820778588], ws=[18.253566694554543, 4.107954895815216, 0.10964391111795191, 3.0, 19.55957175068533], res=[0.0, 0.0, 0.0, 0.0, -0.3434929299067413], res_norm=3.435e-01
2026-01-12 18:52:48,182 - INFO - integration_test - Dyn residual k=2: pred=[18.55176523228609, 4.140782202965923, 0.10964391111795191, 3.0, 19.85957175068533], ws=[18.55176523228609, 4.140782202965923, 0.10964391111795191, 3.0, 19.46195565874811], res=[0.0, 0.0, 0.0, 0.0, 0.3976160919372198], res_norm=3.976e-01
2026-01-12 18:52:48,198 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,279 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:48,295 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,307 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:48,324 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,337 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:48,354 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,368 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:48,384 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,396 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,411 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,422 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,437 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,449 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,464 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,475 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,490 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,502 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,517 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,528 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,545 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:48,556 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:48,750 - INFO - integration_test - Step 220: MPC solve successful
2026-01-12 18:52:48,987 - INFO - integration_test - Step 220: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-12 18:52:48,988 - DEBUG - integration_test - Step 220: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:48,988 - INFO - integration_test - === Applying control at step 220 ===
2026-01-12 18:52:48,988 - INFO - integration_test -   Control dict from planner: {'a': 3.914363423338971e-09, 'w': 0.8000000070662355}
2026-01-12 18:52:48,988 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:48,988 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:48,989 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:48,990 - INFO - integration_test - Step 220 completed in 0.966s
2026-01-12 18:52:49,003 - INFO - integration_test - Step 221 (contouring until path end)
2026-01-12 18:52:49,005 - DEBUG - integration_test - Syncing planner state at step 221: vehicle_state=[17.9537378   4.08701417  0.18964391  3.00000003 19.20000018]
2026-01-12 18:52:49,005 - DEBUG - integration_test - Step 221: Using propagated spline 19.2000 (close to path, dist=0.298m, drift=0.420m)
2026-01-12 18:52:49,005 - DEBUG - integration_test -   Set spline state to 19.2000
2026-01-12 18:52:49,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:49,085 - DEBUG - integration_test - Step 221: Checking path alignment: vehicle=(17.954, 4.087), path_start=(0.000, 0.000), dist=18.413m
2026-01-12 18:52:49,085 - WARNING - integration_test - Step 221: Vehicle is far from path start (dist=18.413m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:49,085 - INFO - integration_test - === Calling planner.solve_mpc() at step 221 ===
2026-01-12 18:52:49,147 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:49,158 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:49,158 - INFO - integration_test - Warmstart k=0: x0=17.953737795161164 , y0=4.087014166553174 , psi0=0.18964391182457543 , v0=3.000000029803641 , spline0=19.149495125725913 , a0=0.0 , w0=0.0
2026-01-12 18:52:49,158 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:49,160 - INFO - integration_test - Dyn residual k=0: pred=[18.248359225071106, 4.143566927989203, 0.18964391182457543, 3.000000029803641, 19.44949512870628], ws=[18.248359222144174, 4.1435669274273765, 0.18964391182457563, 3.0, 19.569188128145903], res=[2.926931585989223e-09, 5.618261411655112e-10, -1.942890293094024e-16, 2.980364088855936e-08, -0.11969299943962497], res_norm=1.197e-01
2026-01-12 18:52:49,161 - INFO - integration_test - Dyn residual k=1: pred=[18.542980649127184, 4.200119688301579, 0.18964391182457563, 3.0, 19.869188128145904], ws=[18.542980649127184, 4.200119688301579, 0.18964391182457563, 3.0, 19.739192108305193], res=[0.0, 0.0, 0.0, 0.0, 0.12999601984071063], res_norm=1.300e-01
2026-01-12 18:52:49,162 - INFO - integration_test - Dyn residual k=2: pred=[18.837602076110194, 4.256672449175782, 0.18964391182457563, 3.0, 20.039192108305194], ws=[18.837602076110194, 4.256672449175782, 0.18964391182457563, 3.0, 19.879677785637345], res=[0.0, 0.0, 0.0, 0.0, 0.15951432266784948], res_norm=1.595e-01
2026-01-12 18:52:49,178 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,257 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:49,274 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,286 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:49,303 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,316 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:49,333 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,345 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:49,361 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,372 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,387 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,399 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,414 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,426 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,440 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,452 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,469 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,481 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,496 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,507 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,522 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:49,535 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:49,740 - INFO - integration_test - Step 221: MPC solve successful
2026-01-12 18:52:50,001 - INFO - integration_test - Step 221: Computed 6 numeric contouring constraints for visualization (s=19.200)
2026-01-12 18:52:50,002 - DEBUG - integration_test - Step 221: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:50,002 - INFO - integration_test - === Applying control at step 221 ===
2026-01-12 18:52:50,002 - INFO - integration_test -   Control dict from planner: {'a': 1.3080449780986398e-09, 'w': 0.8000000096813564}
2026-01-12 18:52:50,002 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:50,002 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:50,003 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:50,003 - INFO - integration_test - Step 221 completed in 0.999s
2026-01-12 18:52:50,018 - INFO - integration_test - Step 222 (contouring until path end)
2026-01-12 18:52:50,019 - DEBUG - integration_test - Syncing planner state at step 222: vehicle_state=[18.24578416  4.1552852   0.26964391  3.00000003 19.50000018]
2026-01-12 18:52:50,020 - DEBUG - integration_test - Step 222: Using propagated spline 19.5000 (close to path, dist=0.181m, drift=0.115m)
2026-01-12 18:52:50,020 - DEBUG - integration_test -   Set spline state to 19.5000
2026-01-12 18:52:50,021 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:50,100 - DEBUG - integration_test - Step 222: Checking path alignment: vehicle=(18.246, 4.155), path_start=(0.000, 0.000), dist=18.713m
2026-01-12 18:52:50,101 - WARNING - integration_test - Step 222: Vehicle is far from path start (dist=18.713m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:50,101 - INFO - integration_test - === Calling planner.solve_mpc() at step 222 ===
2026-01-12 18:52:50,163 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:50,173 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:50,174 - INFO - integration_test - Warmstart k=0: x0=18.2457841626312 , y0=4.155285198737654 , psi0=0.2696439127927111 , v0=3.0000000299344456 , spline0=19.55050522972946 , a0=0.0 , w0=0.0
2026-01-12 18:52:50,174 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:50,175 - INFO - integration_test - Dyn residual k=0: pred=[18.534943909990712, 4.235201669524656, 0.2696439127927111, 3.0000000299344456, 19.850505232722906], ws=[18.534943907105433, 4.235201668727237, 0.26964391279271105, 3.0, 19.730141637540694], res=[2.885279570818966e-09, 7.974190197046482e-10, 5.551115123125783e-17, 2.9934445588963854e-08, 0.12036359518221218], res_norm=1.204e-01
2026-01-12 18:52:50,176 - INFO - integration_test - Dyn residual k=1: pred=[18.824103651579666, 4.31511813871682, 0.26964391279271105, 3.0, 20.030141637540694], ws=[18.824103651579666, 4.31511813871682, 0.26964391279271105, 3.0, 19.8821671724707], res=[0.0, 0.0, 0.0, 0.0, 0.1479744650699928], res_norm=1.480e-01
2026-01-12 18:52:50,177 - INFO - integration_test - Dyn residual k=2: pred=[19.1132633960539, 4.395034608706403, 0.26964391279271105, 3.0, 20.182167172470702], ws=[19.1132633960539, 4.395034608706403, 0.26964391279271105, 3.0, 20.305082930251583], res=[0.0, 0.0, 0.0, 0.0, -0.1229157577808806], res_norm=1.229e-01
2026-01-12 18:52:50,193 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,273 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:50,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,303 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:50,320 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,333 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:50,351 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,364 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:50,380 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,391 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,406 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,418 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,433 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,445 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,461 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,472 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,488 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,500 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,515 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,527 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,543 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:50,554 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:50,733 - INFO - integration_test - Step 222: MPC solve successful
2026-01-12 18:52:50,999 - INFO - integration_test - Step 222: Computed 6 numeric contouring constraints for visualization (s=19.500)
2026-01-12 18:52:51,000 - DEBUG - integration_test - Step 222: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:51,000 - INFO - integration_test - === Applying control at step 222 ===
2026-01-12 18:52:51,000 - INFO - integration_test -   Control dict from planner: {'a': 4.359733770568997e-10, 'w': 0.8000000096620749}
2026-01-12 18:52:51,000 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:51,000 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:51,001 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:51,002 - INFO - integration_test - Step 222 completed in 0.983s
2026-01-12 18:52:51,017 - INFO - integration_test - Step 223 (contouring until path end)
2026-01-12 18:52:51,018 - DEBUG - integration_test - Syncing planner state at step 223: vehicle_state=[18.53144062  4.24667668  0.34964391  3.00000003 19.80000018]
2026-01-12 18:52:51,018 - DEBUG - integration_test - Step 223: Using propagated spline 19.8000 (close to path, dist=0.198m, drift=0.415m)
2026-01-12 18:52:51,018 - DEBUG - integration_test -   Set spline state to 19.8000
2026-01-12 18:52:51,020 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:51,098 - DEBUG - integration_test - Step 223: Checking path alignment: vehicle=(18.531, 4.247), path_start=(0.000, 0.000), dist=19.012m
2026-01-12 18:52:51,098 - WARNING - integration_test - Step 223: Vehicle is far from path start (dist=19.012m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:51,098 - INFO - integration_test - === Calling planner.solve_mpc() at step 223 ===
2026-01-12 18:52:51,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:51,171 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:51,171 - INFO - integration_test - Warmstart k=0: x0=18.531440621320765 , y0=4.246676676470242 , psi0=0.34964391375891857 , v0=3.0000000299780427 , spline0=19.74949513171716 , a0=0.0 , w0=0.0
2026-01-12 18:52:51,171 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:51,172 - INFO - integration_test - Dyn residual k=0: pred=[18.813289050481522, 4.349445663904666, 0.34964391375891857, 3.0000000299780427, 20.049495134714967], ws=[18.8132890476651, 4.349445662877728, 0.3496439137589187, 3.0, 19.878419361282003], res=[2.8164208742964547e-09, 1.026937646031456e-09, -1.1102230246251565e-16, 2.9978042714873254e-08, 0.17107577343296398], res_norm=1.711e-01
2026-01-12 18:52:51,173 - INFO - integration_test - Dyn residual k=1: pred=[19.095137474009437, 4.452214649285214, 0.3496439137589187, 3.0, 20.178419361282003], ws=[19.095137474009437, 4.452214649285214, 0.3496439137589187, 3.0, 20.07345011456036], res=[0.0, 0.0, 0.0, 0.0, 0.10496924672164454], res_norm=1.050e-01
2026-01-12 18:52:51,175 - INFO - integration_test - Dyn residual k=2: pred=[19.376985900353773, 4.554983635692699, 0.3496439137589187, 3.0, 20.37345011456036], ws=[19.376985900353773, 4.554983635692699, 0.3496439137589187, 3.0, 20.719485128602727], res=[0.0, 0.0, 0.0, 0.0, -0.3460350140423678], res_norm=3.460e-01
2026-01-12 18:52:51,190 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,270 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:51,287 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,300 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:51,316 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,329 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:51,345 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,357 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:51,374 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,386 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,412 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,427 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,438 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,453 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,465 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,481 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,493 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,509 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,520 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,536 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:51,549 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:51,725 - INFO - integration_test - Step 223: MPC solve successful
2026-01-12 18:52:52,389 - INFO - integration_test - Step 223: Computed 6 numeric contouring constraints for visualization (s=19.800)
2026-01-12 18:52:52,390 - DEBUG - integration_test - Step 223: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:52,390 - INFO - integration_test - === Applying control at step 223 ===
2026-01-12 18:52:52,390 - INFO - integration_test -   Control dict from planner: {'a': 1.4528217267454964e-10, 'w': 0.8000000096309087}
2026-01-12 18:52:52,390 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:52,390 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:52,392 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:52,392 - INFO - integration_test - Step 223 completed in 1.374s
2026-01-12 18:52:52,405 - INFO - integration_test - Step 224 (contouring until path end)
2026-01-12 18:52:52,407 - DEBUG - integration_test - Syncing planner state at step 224: vehicle_state=[18.80887994  4.36060401  0.42964391  3.00000003 20.10000019]
2026-01-12 18:52:52,408 - DEBUG - integration_test - Step 224: Using propagated spline 20.1000 (close to path, dist=0.177m, drift=0.109m)
2026-01-12 18:52:52,408 - DEBUG - integration_test -   Set spline state to 20.1000
2026-01-12 18:52:52,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:52,486 - DEBUG - integration_test - Step 224: Checking path alignment: vehicle=(18.809, 4.361), path_start=(0.000, 0.000), dist=19.308m
2026-01-12 18:52:52,486 - WARNING - integration_test - Step 224: Vehicle is far from path start (dist=19.308m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:52,486 - INFO - integration_test - === Calling planner.solve_mpc() at step 224 ===
2026-01-12 18:52:52,548 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:52,559 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:52,559 - INFO - integration_test - Warmstart k=0: x0=18.808879944677297 , y0=4.360604006160818 , psi0=0.4296439147220094 , v0=3.000000029992571 , spline0=20.15050523572652 , a0=0.0 , w0=0.0
2026-01-12 18:52:52,560 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:52,561 - INFO - integration_test - Dyn residual k=0: pred=[19.081614187484078, 4.48556813941579, 0.4296439147220094, 3.000000029992571, 20.45050523872578], ws=[19.08161418475741, 4.4855681381664585, 0.42964391472200925, 3.0, 20.038326155905224], res=[2.7266686686289177e-09, 1.2493313050754296e-09, 1.6653345369377348e-16, 2.99925710933735e-08, 0.41217908282055404], res_norm=4.122e-01
2026-01-12 18:52:52,562 - INFO - integration_test - Dyn residual k=1: pred=[19.35434842483752, 4.610532270172099, 0.42964391472200925, 3.0, 20.338326155905225], ws=[19.35434842483752, 4.610532270172099, 0.42964391472200925, 3.0, 20.707940130371867], res=[0.0, 0.0, 0.0, 0.0, -0.3696139744666418], res_norm=3.696e-01
2026-01-12 18:52:52,563 - INFO - integration_test - Dyn residual k=2: pred=[19.627082664917634, 4.7354964021777395, 0.42964391472200925, 3.0, 21.007940130371868], ws=[19.627082664917634, 4.7354964021777395, 0.42964391472200925, 3.0, 20.63996826402522], res=[0.0, 0.0, 0.0, 0.0, 0.3679718663466467], res_norm=3.680e-01
2026-01-12 18:52:52,579 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,658 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:52,675 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,687 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:52,704 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,718 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:52,734 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,747 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:52,763 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,774 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:52,789 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,801 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:52,817 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,829 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:52,844 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,855 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:52,870 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,882 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:52,898 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,909 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:52,925 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:52,937 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,152 - INFO - integration_test - Step 224: MPC solve successful
2026-01-12 18:52:53,432 - INFO - integration_test - Step 224: Computed 6 numeric contouring constraints for visualization (s=20.100)
2026-01-12 18:52:53,433 - DEBUG - integration_test - Step 224: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:52:53,433 - INFO - integration_test - === Applying control at step 224 ===
2026-01-12 18:52:53,433 - INFO - integration_test -   Control dict from planner: {'a': 4.833659290014054e-11, 'w': 0.8000000091705501}
2026-01-12 18:52:53,433 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:52:53,433 - INFO - integration_test -   Planner output success: True
2026-01-12 18:52:53,434 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:52:53,434 - INFO - integration_test - Step 224 completed in 1.028s
2026-01-12 18:52:53,450 - INFO - integration_test - Step 225 (contouring until path end)
2026-01-12 18:52:53,451 - DEBUG - integration_test - Syncing planner state at step 225: vehicle_state=[19.07632747  4.49633844  0.50964392  3.00000003 20.40000019]
2026-01-12 18:52:53,451 - DEBUG - integration_test - Step 225: Using propagated spline 20.4000 (close to path, dist=0.129m, drift=0.409m)
2026-01-12 18:52:53,451 - DEBUG - integration_test -   Set spline state to 20.4000
2026-01-12 18:52:53,452 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:53,532 - DEBUG - integration_test - Step 225: Checking path alignment: vehicle=(19.076, 4.496), path_start=(0.000, 0.000), dist=19.599m
2026-01-12 18:52:53,532 - WARNING - integration_test - Step 225: Vehicle is far from path start (dist=19.599m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:52:53,532 - INFO - integration_test - === Calling planner.solve_mpc() at step 225 ===
2026-01-12 18:52:53,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:52:53,605 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:52:53,605 - INFO - integration_test - Warmstart k=0: x0=19.076327467780935 , y0=4.496338441663831 , psi0=0.5096439156390644 , v0=3.0000000299974046 , spline0=20.04646483468586 , a0=0.0 , w0=0.0
2026-01-12 18:52:53,606 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:52:53,607 - INFO - integration_test - Dyn residual k=0: pred=[19.338202955777895, 4.642698376708223, 0.5096439156390644, 3.0000000299974046, 20.346464837685602], ws=[19.338202953159367, 4.64269837524475, 0.5096439156390646, 3.0, 20.69232057076656], res=[2.6185276169599092e-09, 1.4634728984219691e-09, -2.220446049250313e-16, 2.999740456033351e-08, -0.34585573308095974], res_norm=3.459e-01
2026-01-12 18:52:53,609 - INFO - integration_test - Dyn residual k=1: pred=[19.6000784385378, 4.78905830882567, 0.5096439156390646, 3.0, 20.992320570766562], ws=[19.6000784385378, 4.78905830882567, 0.5096439156390646, 3.0, 20.901571743600407], res=[0.0, 0.0, 0.0, 0.0, 0.09074882716615562], res_norm=9.075e-02
2026-01-12 18:52:53,610 - INFO - integration_test - Dyn residual k=2: pred=[19.861953923916232, 4.935418242406589, 0.5096439156390646, 3.0, 21.201571743600407], ws=[19.861953923916232, 4.935418242406589, 0.5096439156390646, 3.0, 21.056963038292416], res=[0.0, 0.0, 0.0, 0.0, 0.14460870530799141], res_norm=1.446e-01
2026-01-12 18:52:53,627 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,707 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:53,724 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,737 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:53,754 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,767 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:53,783 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,796 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:52:53,813 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,824 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,839 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,851 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,866 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,877 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,892 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,904 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,919 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,931 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,946 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,958 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:52:53,973 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:52:53,985 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:03,526 - WARNING - integration_test - Step 225: MPC solve failed
2026-01-12 18:53:03,527 - WARNING - integration_test -   Consecutive MPC failures: 1/5
2026-01-12 18:53:03,792 - INFO - integration_test - Step 225: Computed 6 numeric contouring constraints for visualization (s=20.400)
2026-01-12 18:53:03,793 - DEBUG - integration_test - Step 225: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:03,793 - INFO - integration_test - === Applying control at step 225 ===
2026-01-12 18:53:03,793 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:03,793 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:03,793 - INFO - integration_test -   Planner output success: False
2026-01-12 18:53:03,793 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:03,795 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:03,795 - INFO - integration_test - Step 225 completed in 10.345s
2026-01-12 18:53:03,809 - INFO - integration_test - Step 226 (contouring until path end)
2026-01-12 18:53:03,811 - DEBUG - integration_test - Syncing planner state at step 226: vehicle_state=[19.33820296  4.64269838  0.50964392  3.00000003 20.70000019]
2026-01-12 18:53:03,811 - DEBUG - integration_test - Step 226: Using propagated spline 20.7000 (close to path, dist=0.274m, drift=0.103m)
2026-01-12 18:53:03,811 - DEBUG - integration_test -   Set spline state to 20.7000
2026-01-12 18:53:03,813 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:03,890 - DEBUG - integration_test - Step 226: Checking path alignment: vehicle=(19.338, 4.643), path_start=(0.000, 0.000), dist=19.888m
2026-01-12 18:53:03,890 - WARNING - integration_test - Step 226: Vehicle is far from path start (dist=19.888m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:03,890 - INFO - integration_test - === Calling planner.solve_mpc() at step 226 ===
2026-01-12 18:53:03,951 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:03,963 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:03,963 - INFO - integration_test - Warmstart k=0: x0=19.338202955777895 , y0=4.642698376708223 , psi0=0.5096439156390644 , v0=3.0000000299974046 , spline0=20.447474938695702 , a0=0.0 , w0=0.0
2026-01-12 18:53:03,963 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:03,964 - INFO - integration_test - Dyn residual k=0: pred=[19.600078443774855, 4.7890583117526155, 0.5096439156390644, 3.0000000299974046, 20.747474941695444], ws=[19.600078441156327, 4.789058310289143, 0.5096439156390646, 3.0, 20.640751264486944], res=[2.6185276169599092e-09, 1.4634728984219691e-09, -2.220446049250313e-16, 2.999740456033351e-08, 0.10672367720849962], res_norm=1.067e-01
2026-01-12 18:53:03,965 - INFO - integration_test - Dyn residual k=1: pred=[19.86195392653476, 4.935418243870062, 0.5096439156390646, 3.0, 20.940751264486945], ws=[19.86195392653476, 4.935418243870062, 0.5096439156390646, 3.0, 21.28265386734124], res=[0.0, 0.0, 0.0, 0.0, -0.34190260285429375], res_norm=3.419e-01
2026-01-12 18:53:03,966 - INFO - integration_test - Dyn residual k=2: pred=[20.123829411913192, 5.081778177450982, 0.5096439156390646, 3.0, 21.58265386734124], ws=[20.123829411913192, 5.081778177450982, 0.5096439156390646, 3.0, 21.48589908613987], res=[0.0, 0.0, 0.0, 0.0, 0.09675478120136916], res_norm=9.675e-02
2026-01-12 18:53:03,982 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,064 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:04,080 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,093 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:04,110 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,122 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:04,139 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,152 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:04,168 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,181 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,195 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,207 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,221 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,234 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,249 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,260 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,275 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,287 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,302 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,314 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,329 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:04,340 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:04,517 - INFO - integration_test - Step 226: MPC solve successful
2026-01-12 18:53:04,830 - INFO - integration_test - Step 226: Computed 6 numeric contouring constraints for visualization (s=20.700)
2026-01-12 18:53:04,830 - DEBUG - integration_test - Step 226: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:04,830 - INFO - integration_test - === Applying control at step 226 ===
2026-01-12 18:53:04,830 - INFO - integration_test -   Control dict from planner: {'a': -1.0721770267550042e-08, 'w': -0.799996355713067}
2026-01-12 18:53:04,830 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:04,831 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:04,832 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:04,832 - INFO - integration_test - Step 226 completed in 1.022s
2026-01-12 18:53:04,848 - INFO - integration_test - Step 227 (contouring until path end)
2026-01-12 18:53:04,849 - DEBUG - integration_test - Syncing planner state at step 227: vehicle_state=[19.60565045  4.77843286  0.42964428  3.00000003 21.00000019]
2026-01-12 18:53:04,849 - DEBUG - integration_test - Step 227: Using propagated spline 21.0000 (close to path, dist=0.223m, drift=0.403m)
2026-01-12 18:53:04,849 - DEBUG - integration_test -   Set spline state to 21.0000
2026-01-12 18:53:04,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:04,929 - DEBUG - integration_test - Step 227: Checking path alignment: vehicle=(19.606, 4.778), path_start=(0.000, 0.000), dist=20.180m
2026-01-12 18:53:04,929 - WARNING - integration_test - Step 227: Vehicle is far from path start (dist=20.180m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:04,929 - INFO - integration_test - === Calling planner.solve_mpc() at step 227 ===
2026-01-12 18:53:04,992 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:05,003 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:05,003 - INFO - integration_test - Warmstart k=0: x0=19.605650454690032 , y0=4.778432861373729 , psi0=0.42964428006775773 , v0=3.0000000289252275 , spline0=20.646464840578126 , a0=0.0 , w0=0.0
2026-01-12 18:53:05,003 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:05,004 - INFO - integration_test - Dyn residual k=0: pred=[19.878384651744646, 4.903397094226529, 0.42964428006775773, 3.0000000289252275, 20.94646484347065], ws=[19.878384649115013, 4.903397093021656, 0.42964428006775757, 3.0, 21.299945675891628], res=[2.6296333999198396e-09, 1.20487264609892e-09, 1.6653345369377348e-16, 2.8925227546494625e-08, -0.3534808324209777], res_norm=3.535e-01
2026-01-12 18:53:05,006 - INFO - integration_test - Dyn residual k=1: pred=[20.151118843539994, 5.028361324669583, 0.42964428006775757, 3.0, 21.59994567589163], ws=[20.151118843539994, 5.028361324669583, 0.42964428006775757, 3.0, 21.212342862820023], res=[0.0, 0.0, 0.0, 0.0, 0.3876028130716058], res_norm=3.876e-01
2026-01-12 18:53:05,007 - INFO - integration_test - Dyn residual k=2: pred=[20.423853037964975, 5.15332555631751, 0.42964428006775757, 3.0, 21.512342862820024], ws=[20.423853037964975, 5.15332555631751, 0.42964428006775757, 3.0, 21.674032326571034], res=[0.0, 0.0, 0.0, 0.0, -0.16168946375101], res_norm=1.617e-01
2026-01-12 18:53:05,023 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,105 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:05,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,135 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:05,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,165 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:05,182 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,194 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:05,211 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,222 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:05,237 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,250 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:05,265 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,276 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:05,291 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,303 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:05,318 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,330 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:05,345 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,357 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:05,372 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:05,384 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:11,685 - INFO - integration_test - Step 227: MPC solve successful
2026-01-12 18:53:11,980 - INFO - integration_test - Step 227: Computed 6 numeric contouring constraints for visualization (s=21.000)
2026-01-12 18:53:11,980 - DEBUG - integration_test - Step 227: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:11,980 - INFO - integration_test - === Applying control at step 227 ===
2026-01-12 18:53:11,980 - INFO - integration_test -   Control dict from planner: {'a': -1.3917601919496534e-06, 'w': -0.7988668068539837}
2026-01-12 18:53:11,980 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:11,980 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:11,982 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:11,982 - INFO - integration_test - Step 227 completed in 7.134s
2026-01-12 18:53:11,997 - INFO - integration_test - Step 228 (contouring until path end)
2026-01-12 18:53:11,998 - DEBUG - integration_test - Syncing planner state at step 228: vehicle_state=[19.88308348  4.8923761   0.3497576   2.99999989 21.30000018]
2026-01-12 18:53:11,999 - DEBUG - integration_test - Step 228: Using propagated spline 21.3000 (close to path, dist=0.355m, drift=0.097m)
2026-01-12 18:53:11,999 - DEBUG - integration_test -   Set spline state to 21.3000
2026-01-12 18:53:12,000 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:12,080 - DEBUG - integration_test - Step 228: Checking path alignment: vehicle=(19.883, 4.892), path_start=(0.000, 0.000), dist=20.476m
2026-01-12 18:53:12,080 - WARNING - integration_test - Step 228: Vehicle is far from path start (dist=20.476m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:12,080 - INFO - integration_test - === Calling planner.solve_mpc() at step 228 ===
2026-01-12 18:53:12,142 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:12,153 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:12,153 - INFO - integration_test - Warmstart k=0: x0=19.883083483709125 , y0=4.892376095412828 , psi0=0.3497575993823594 , v0=2.9999998897492084 , spline0=21.047474930563148 , a0=0.0 , w0=0.0
2026-01-12 18:53:12,153 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:12,154 - INFO - integration_test - Dyn residual k=0: pred=[20.164920214518258, 4.995177119492229, 0.3497575993823594, 2.9999998897492084, 21.34747491953807], ws=[20.164920214518258, 4.995177119492229, 0.3497575993823592, 2.9999998897492084, 21.447421371540543], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.09994645200247376], res_norm=9.995e-02
2026-01-12 18:53:12,155 - INFO - integration_test - Dyn residual k=1: pred=[20.44675694532739, 5.0979781435716305, 0.3497575993823592, 2.9999998897492084, 21.747421360515464], ws=[20.44675694532739, 5.0979781435716305, 0.3497575993823592, 2.9999998897492084, 21.888576749050216], res=[0.0, 0.0, 0.0, 0.0, -0.1411553885347523], res_norm=1.412e-01
2026-01-12 18:53:12,156 - INFO - integration_test - Dyn residual k=2: pred=[20.728593676136523, 5.2007791676510315, 0.3497575993823592, 2.9999998897492084, 22.188576738025137], ws=[20.728593676136523, 5.2007791676510315, 0.3497575993823592, 2.9999998897492084, 22.09155214634492], res=[0.0, 0.0, 0.0, 0.0, 0.09702459168021704], res_norm=9.702e-02
2026-01-12 18:53:12,172 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,253 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:12,270 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,283 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:12,300 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,313 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:12,329 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,341 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:12,357 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,369 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:12,384 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,396 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:12,411 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,422 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:12,437 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,450 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:12,465 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,476 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:12,491 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,503 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:12,519 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:12,531 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:14,955 - WARNING - integration_test - Step 228: MPC solve failed
2026-01-12 18:53:14,955 - WARNING - integration_test -   Consecutive MPC failures: 1/5
2026-01-12 18:53:15,256 - INFO - integration_test - Step 228: Computed 6 numeric contouring constraints for visualization (s=21.300)
2026-01-12 18:53:15,256 - DEBUG - integration_test - Step 228: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:15,257 - INFO - integration_test - === Applying control at step 228 ===
2026-01-12 18:53:15,257 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:15,257 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:15,257 - INFO - integration_test -   Planner output success: False
2026-01-12 18:53:15,257 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:15,258 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:15,259 - INFO - integration_test - Step 228 completed in 3.261s
2026-01-12 18:53:15,271 - INFO - integration_test - Step 229 (contouring until path end)
2026-01-12 18:53:15,273 - DEBUG - integration_test - Syncing planner state at step 229: vehicle_state=[20.16492021  4.99517712  0.3497576   2.99999989 21.60000017]
2026-01-12 18:53:15,274 - DEBUG - integration_test - Step 229: Using propagated spline 21.6000 (close to path, dist=0.264m, drift=0.397m)
2026-01-12 18:53:15,274 - DEBUG - integration_test -   Set spline state to 21.6000
2026-01-12 18:53:15,276 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:15,352 - DEBUG - integration_test - Step 229: Checking path alignment: vehicle=(20.165, 4.995), path_start=(0.000, 0.000), dist=20.774m
2026-01-12 18:53:15,352 - WARNING - integration_test - Step 229: Vehicle is far from path start (dist=20.774m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:15,352 - INFO - integration_test - === Calling planner.solve_mpc() at step 229 ===
2026-01-12 18:53:15,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:15,425 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:15,425 - INFO - integration_test - Warmstart k=0: x0=20.164920214518258 , y0=4.995177119492229 , psi0=0.3497575993823594 , v0=2.9999998897492084 , spline0=21.44848502054817 , a0=0.0 , w0=0.0
2026-01-12 18:53:15,425 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:15,427 - INFO - integration_test - Dyn residual k=0: pred=[20.44675694532739, 5.0979781435716305, 0.3497575993823594, 2.9999998897492084, 21.74848500952309], ws=[20.44675694532739, 5.0979781435716305, 0.3497575993823592, 2.9999998897492084, 21.90012567406268], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.15164066453958824], res_norm=1.516e-01
2026-01-12 18:53:15,428 - INFO - integration_test - Dyn residual k=1: pred=[20.728593676136523, 5.2007791676510315, 0.3497575993823592, 2.9999998897492084, 22.2001256630376], ws=[20.728593676136523, 5.2007791676510315, 0.3497575993823592, 2.9999998897492084, 22.114805200828542], res=[0.0, 0.0, 0.0, 0.0, 0.08532046220905798], res_norm=8.532e-02
2026-01-12 18:53:15,429 - INFO - integration_test - Dyn residual k=2: pred=[21.010430406945655, 5.303580191730433, 0.3497575993823592, 2.9999998897492084, 22.414805189803463], ws=[21.010430406945655, 5.303580191730433, 0.3497575993823592, 2.9999998897492084, 22.270578763580193], res=[0.0, 0.0, 0.0, 0.0, 0.14422642622326975], res_norm=1.442e-01
2026-01-12 18:53:15,445 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,525 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:15,544 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,557 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:15,574 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,587 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:15,604 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,617 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:15,635 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,648 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:15,663 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,675 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:15,690 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,702 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:15,717 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,729 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:15,744 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,755 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:15,771 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,783 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:15,798 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:15,809 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:27,296 - WARNING - integration_test - Step 229: MPC solve failed
2026-01-12 18:53:27,296 - WARNING - integration_test -   Consecutive MPC failures: 2/5
2026-01-12 18:53:27,617 - INFO - integration_test - Step 229: Computed 6 numeric contouring constraints for visualization (s=21.600)
2026-01-12 18:53:27,617 - DEBUG - integration_test - Step 229: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:27,617 - INFO - integration_test - === Applying control at step 229 ===
2026-01-12 18:53:27,617 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:27,617 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:27,617 - INFO - integration_test -   Planner output success: False
2026-01-12 18:53:27,618 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:27,619 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:27,619 - INFO - integration_test - Step 229 completed in 12.346s
2026-01-12 18:53:27,634 - INFO - integration_test - Step 230 (contouring until path end)
2026-01-12 18:53:27,636 - DEBUG - integration_test - Syncing planner state at step 230: vehicle_state=[20.44675695  5.09797814  0.3497576   2.99999989 21.90000016]
2026-01-12 18:53:27,636 - DEBUG - integration_test - Step 230: Using propagated spline 21.9000 (close to path, dist=0.369m, drift=0.091m)
2026-01-12 18:53:27,636 - DEBUG - integration_test -   Set spline state to 21.9000
2026-01-12 18:53:27,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:27,714 - DEBUG - integration_test - Step 230: Checking path alignment: vehicle=(20.447, 5.098), path_start=(0.000, 0.000), dist=21.073m
2026-01-12 18:53:27,714 - WARNING - integration_test - Step 230: Vehicle is far from path start (dist=21.073m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:27,715 - INFO - integration_test - === Calling planner.solve_mpc() at step 230 ===
2026-01-12 18:53:27,776 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:27,787 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:27,787 - INFO - integration_test - Warmstart k=0: x0=20.44675694532739 , y0=5.0979781435716305 , psi0=0.3497575993823594 , v0=2.9999998897492084 , spline0=21.64747490851299 , a0=0.0 , w0=0.0
2026-01-12 18:53:27,787 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:27,788 - INFO - integration_test - Dyn residual k=0: pred=[20.728593676136523, 5.2007791676510315, 0.3497575993823594, 2.9999998897492084, 21.94747489748791], ws=[20.728593676136523, 5.2007791676510315, 0.3497575993823592, 2.9999998897492084, 22.047113062986654], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.09963816549874238], res_norm=9.964e-02
2026-01-12 18:53:27,789 - INFO - integration_test - Dyn residual k=1: pred=[21.010430406945655, 5.303580191730433, 0.3497575993823592, 2.9999998897492084, 22.347113051961575], ws=[21.010430406945655, 5.303580191730433, 0.3497575993823592, 2.9999998897492084, 22.284105866926332], res=[0.0, 0.0, 0.0, 0.0, 0.06300718503524294], res_norm=6.301e-02
2026-01-12 18:53:27,790 - INFO - integration_test - Dyn residual k=2: pred=[21.292267137754788, 5.406381215809834, 0.3497575993823592, 2.9999998897492084, 22.584105855901253], ws=[21.292267137754788, 5.406381215809834, 0.3497575993823592, 2.9999998897492084, 22.686642195054873], res=[0.0, 0.0, 0.0, 0.0, -0.1025363391536196], res_norm=1.025e-01
2026-01-12 18:53:27,806 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:27,887 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:27,904 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:27,917 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:27,934 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:27,947 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:27,964 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:27,976 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:27,992 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,004 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:28,019 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,032 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:28,048 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,060 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:28,074 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,086 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:28,102 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,114 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:28,129 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,140 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:28,156 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:28,168 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:29,898 - WARNING - integration_test - Step 230: MPC solve failed
2026-01-12 18:53:29,898 - WARNING - integration_test -   Consecutive MPC failures: 3/5
2026-01-12 18:53:30,208 - INFO - integration_test - Step 230: Computed 6 numeric contouring constraints for visualization (s=21.900)
2026-01-12 18:53:30,208 - DEBUG - integration_test - Step 230: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:30,208 - INFO - integration_test - === Applying control at step 230 ===
2026-01-12 18:53:30,208 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:30,208 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:30,208 - INFO - integration_test -   Planner output success: False
2026-01-12 18:53:30,208 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:53:30,210 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:30,210 - INFO - integration_test - Step 230 completed in 2.575s
2026-01-12 18:53:30,224 - INFO - integration_test - Step 231 (contouring until path end)
2026-01-12 18:53:30,226 - DEBUG - integration_test - Syncing planner state at step 231: vehicle_state=[20.72859368  5.20077917  0.3497576   2.99999989 22.20000015]
2026-01-12 18:53:30,227 - DEBUG - integration_test - Step 231: Using propagated spline 22.2000 (close to path, dist=0.264m, drift=0.391m)
2026-01-12 18:53:30,227 - DEBUG - integration_test -   Set spline state to 22.2000
2026-01-12 18:53:30,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:30,305 - DEBUG - integration_test - Step 231: Checking path alignment: vehicle=(20.729, 5.201), path_start=(0.000, 0.000), dist=21.371m
2026-01-12 18:53:30,305 - WARNING - integration_test - Step 231: Vehicle is far from path start (dist=21.371m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:30,305 - INFO - integration_test - === Calling planner.solve_mpc() at step 231 ===
2026-01-12 18:53:30,367 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:30,378 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:30,379 - INFO - integration_test - Warmstart k=0: x0=20.728593676136523 , y0=5.2007791676510315 , psi0=0.3497575993823594 , v0=2.9999998897492084 , spline0=22.04848499849801 , a0=0.0 , w0=0.0
2026-01-12 18:53:30,379 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:30,380 - INFO - integration_test - Dyn residual k=0: pred=[21.010430406945655, 5.303580191730433, 0.3497575993823594, 2.9999998897492084, 22.348484987472933], ws=[21.010430406945655, 5.303580191730433, 0.3497575993823592, 2.9999998897492084, 22.497568209393464], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.14908322192053092], res_norm=1.491e-01
2026-01-12 18:53:30,381 - INFO - integration_test - Dyn residual k=1: pred=[21.292267137754788, 5.406381215809834, 0.3497575993823592, 2.9999998897492084, 22.797568198368385], ws=[21.292267137754788, 5.406381215809834, 0.3497575993823592, 2.9999998897492084, 22.70931969576427], res=[0.0, 0.0, 0.0, 0.0, 0.08824850260411665], res_norm=8.825e-02
2026-01-12 18:53:30,382 - INFO - integration_test - Dyn residual k=2: pred=[21.57410386856392, 5.509182239889235, 0.3497575993823592, 2.9999998897492084, 23.00931968473919], ws=[21.57410386856392, 5.509182239889235, 0.3497575993823592, 2.9999998897492084, 22.860090319931675], res=[0.0, 0.0, 0.0, 0.0, 0.14922936480751403], res_norm=1.492e-01
2026-01-12 18:53:30,398 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,478 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:30,495 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,507 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:30,523 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,537 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:30,554 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,567 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:30,583 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,595 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,609 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,621 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,636 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,648 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,663 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,675 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,690 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,703 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,718 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,730 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,745 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:30,757 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:30,927 - INFO - integration_test - Step 231: MPC solve successful
2026-01-12 18:53:31,253 - INFO - integration_test - Step 231: Computed 6 numeric contouring constraints for visualization (s=22.200)
2026-01-12 18:53:31,253 - DEBUG - integration_test - Step 231: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:31,254 - INFO - integration_test - === Applying control at step 231 ===
2026-01-12 18:53:31,254 - INFO - integration_test -   Control dict from planner: {'a': -2.00000001457027, 'w': 0.7999999862891043}
2026-01-12 18:53:31,254 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:31,254 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:31,255 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:31,255 - INFO - integration_test - Step 231 completed in 1.029s
2026-01-12 18:53:31,270 - INFO - integration_test - Step 232 (contouring until path end)
2026-01-12 18:53:31,271 - DEBUG - integration_test - Syncing planner state at step 232: vehicle_state=[20.99682314  5.3108161   0.4297576   2.79999989 22.48000014]
2026-01-12 18:53:31,271 - DEBUG - integration_test - Step 232: Using propagated spline 22.4800 (close to path, dist=0.298m, drift=0.066m)
2026-01-12 18:53:31,271 - DEBUG - integration_test -   Set spline state to 22.4800
2026-01-12 18:53:31,273 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:31,351 - DEBUG - integration_test - Step 232: Checking path alignment: vehicle=(20.997, 5.311), path_start=(0.000, 0.000), dist=21.658m
2026-01-12 18:53:31,351 - WARNING - integration_test - Step 232: Vehicle is far from path start (dist=21.658m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:31,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 232 ===
2026-01-12 18:53:31,413 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:31,424 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:31,424 - INFO - integration_test - Warmstart k=0: x0=20.99682313571936 , y0=5.3108161022412315 , psi0=0.42975759801126984 , v0=2.7999998882921813 , spline0=22.53050518934743 , a0=0.0 , w0=0.0
2026-01-12 18:53:31,424 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:31,425 - INFO - integration_test - Dyn residual k=0: pred=[21.251361822082945, 5.427478225008917, 0.42975759801126984, 2.7999998882921813, 22.810505178176648], ws=[21.251361822082945, 5.427478225008917, 0.4297575980112698, 2.7999998882921813, 22.70015488068219], res=[0.0, 0.0, 5.551115123125783e-17, 0.0, 0.11035029749445613], res_norm=1.104e-01
2026-01-12 18:53:31,427 - INFO - integration_test - Dyn residual k=1: pred=[21.50590050844653, 5.544140347776603, 0.4297575980112698, 2.7999998882921813, 22.98015486951141], ws=[21.50590050844653, 5.544140347776603, 0.4297575980112698, 2.7999998882921813, 23.105830990429034], res=[0.0, 0.0, 0.0, 0.0, -0.1256761209176247], res_norm=1.257e-01
2026-01-12 18:53:31,428 - INFO - integration_test - Dyn residual k=2: pred=[21.760439194810115, 5.660802470544288, 0.4297575980112698, 2.7999998882921813, 23.38583097925825], ws=[21.760439194810115, 5.660802470544288, 0.4297575980112698, 2.7999998882921813, 23.26940968833015], res=[0.0, 0.0, 0.0, 0.0, 0.11642129092810194], res_norm=1.164e-01
2026-01-12 18:53:31,444 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,524 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:31,542 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,555 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:31,571 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,585 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:31,601 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,614 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:31,630 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,641 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,656 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,668 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,683 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,695 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,710 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,721 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,736 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,749 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,765 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,777 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,791 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:31,803 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:31,977 - INFO - integration_test - Step 232: MPC solve successful
2026-01-12 18:53:32,291 - INFO - integration_test - Step 232: Computed 6 numeric contouring constraints for visualization (s=22.480)
2026-01-12 18:53:32,291 - DEBUG - integration_test - Step 232: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:32,291 - INFO - integration_test - === Applying control at step 232 ===
2026-01-12 18:53:32,292 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000187899283, 'w': 0.7999998612035334}
2026-01-12 18:53:32,292 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:32,292 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:32,293 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:32,294 - INFO - integration_test - Step 232 completed in 1.023s
2026-01-12 18:53:32,306 - INFO - integration_test - Step 233 (contouring until path end)
2026-01-12 18:53:32,309 - DEBUG - integration_test - Syncing planner state at step 233: vehicle_state=[21.23757235  5.43288559  0.50975758  2.59999989 22.74000013]
2026-01-12 18:53:32,310 - DEBUG - integration_test - Step 233: Using propagated spline 22.7400 (close to path, dist=0.331m, drift=0.280m)
2026-01-12 18:53:32,310 - DEBUG - integration_test -   Set spline state to 22.7400
2026-01-12 18:53:32,312 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:32,391 - DEBUG - integration_test - Step 233: Checking path alignment: vehicle=(21.238, 5.433), path_start=(0.000, 0.000), dist=21.921m
2026-01-12 18:53:32,391 - WARNING - integration_test - Step 233: Vehicle is far from path start (dist=21.921m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:32,391 - INFO - integration_test - === Calling planner.solve_mpc() at step 233 ===
2026-01-12 18:53:32,453 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:32,464 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:32,464 - INFO - integration_test - Warmstart k=0: x0=21.237572345689465 , y0=5.432885590514002 , psi0=0.5097575841316232 , v0=2.5999998864131886 , spline0=22.689495076978652 , a0=0.0 , w0=0.0
2026-01-12 18:53:32,464 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:32,466 - INFO - integration_test - Dyn residual k=0: pred=[21.46451666999207, 5.559756657981416, 0.5097575841316232, 2.5999998864131886, 22.94949506561997], ws=[21.46451666999207, 5.559756657981416, 0.5097575841316231, 2.5999998864131886, 23.079557968172658], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, -0.13006290255268738], res_norm=1.301e-01
2026-01-12 18:53:32,467 - INFO - integration_test - Dyn residual k=1: pred=[21.691460994294673, 5.68662772544883, 0.5097575841316231, 2.5999998864131886, 23.339557956813977], ws=[21.691460994294673, 5.68662772544883, 0.5097575841316231, 2.5999998864131886, 23.225770282073704], res=[0.0, 0.0, 0.0, 0.0, 0.11378767474027285], res_norm=1.138e-01
2026-01-12 18:53:32,468 - INFO - integration_test - Dyn residual k=2: pred=[21.918405318597276, 5.813498792916245, 0.5097575841316231, 2.5999998864131886, 23.485770270715022], ws=[21.918405318597276, 5.813498792916245, 0.5097575841316231, 2.5999998864131886, 23.401632976007857], res=[0.0, 0.0, 0.0, 0.0, 0.08413729470716547], res_norm=8.414e-02
2026-01-12 18:53:32,483 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,567 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:32,583 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,596 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:32,612 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,625 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:32,641 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,653 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:32,670 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,682 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:32,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,708 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:32,723 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,735 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:32,750 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,761 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:32,776 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,788 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:32,803 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,815 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:32,830 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:32,841 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,010 - INFO - integration_test - Step 233: MPC solve successful
2026-01-12 18:53:33,345 - INFO - integration_test - Step 233: Computed 6 numeric contouring constraints for visualization (s=22.740)
2026-01-12 18:53:33,346 - DEBUG - integration_test - Step 233: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:33,346 - INFO - integration_test - === Applying control at step 233 ===
2026-01-12 18:53:33,346 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199970054, 'w': 0.8000000092726949}
2026-01-12 18:53:33,346 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:33,346 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:33,347 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:33,348 - INFO - integration_test - Step 233 completed in 1.039s
2026-01-12 18:53:33,363 - INFO - integration_test - Step 234 (contouring until path end)
2026-01-12 18:53:33,364 - DEBUG - integration_test - Syncing planner state at step 234: vehicle_state=[21.45074795  5.56335724  0.58975759  2.39999988 22.98000012]
2026-01-12 18:53:33,365 - DEBUG - integration_test - Step 234: Using propagated spline 22.9800 (close to path, dist=0.311m, drift=0.040m)
2026-01-12 18:53:33,365 - DEBUG - integration_test -   Set spline state to 22.9800
2026-01-12 18:53:33,366 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:33,443 - DEBUG - integration_test - Step 234: Checking path alignment: vehicle=(21.451, 5.563), path_start=(0.000, 0.000), dist=22.160m
2026-01-12 18:53:33,443 - WARNING - integration_test - Step 234: Vehicle is far from path start (dist=22.160m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:33,443 - INFO - integration_test - === Calling planner.solve_mpc() at step 234 ===
2026-01-12 18:53:33,504 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:33,515 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:33,515 - INFO - integration_test - Warmstart k=0: x0=21.450747946695888 , y0=5.563357237744093 , psi0=0.5897575850588928 , v0=2.399999884413488 , spline0=22.828484964409895 , a0=0.0 , w0=0.0
2026-01-12 18:53:33,515 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:33,517 - INFO - integration_test - Dyn residual k=0: pred=[21.650206063067774, 5.6968355291072434, 0.5897575850588928, 2.399999884413488, 23.068484952851243], ws=[21.650206063067774, 5.6968355291072434, 0.5897575850588925, 2.399999884413488, 23.233983451827825], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.1654984989765822], res_norm=1.655e-01
2026-01-12 18:53:33,517 - INFO - integration_test - Dyn residual k=1: pred=[21.84966417943966, 5.830313820470394, 0.5897575850588925, 2.399999884413488, 23.473983440269173], ws=[21.84966417943966, 5.830313820470394, 0.5897575850588925, 2.399999884413488, 23.395980809861893], res=[0.0, 0.0, 0.0, 0.0, 0.07800263040727984], res_norm=7.800e-02
2026-01-12 18:53:33,518 - INFO - integration_test - Dyn residual k=2: pred=[22.049122295811546, 5.963792111833545, 0.5897575850588925, 2.399999884413488, 23.63598079830324], ws=[22.049122295811546, 5.963792111833545, 0.5897575850588925, 2.399999884413488, 23.488538551639156], res=[0.0, 0.0, 0.0, 0.0, 0.14744224666408456], res_norm=1.474e-01
2026-01-12 18:53:33,535 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,617 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:33,633 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,646 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:33,663 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,675 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:33,692 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,704 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:33,721 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,733 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,748 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,759 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,774 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,786 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,801 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,813 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,828 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,839 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,854 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,866 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:33,881 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:33,893 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,050 - INFO - integration_test - Step 234: MPC solve successful
2026-01-12 18:53:34,402 - INFO - integration_test - Step 234: Computed 6 numeric contouring constraints for visualization (s=22.980)
2026-01-12 18:53:34,402 - DEBUG - integration_test - Step 234: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:34,402 - INFO - integration_test - === Applying control at step 234 ===
2026-01-12 18:53:34,402 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019999497, 'w': 0.8000000096110815}
2026-01-12 18:53:34,402 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:34,402 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:34,403 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:34,404 - INFO - integration_test - Step 234 completed in 1.040s
2026-01-12 18:53:34,418 - INFO - integration_test - Step 235 (contouring until path end)
2026-01-12 18:53:34,420 - DEBUG - integration_test - Syncing planner state at step 235: vehicle_state=[21.63665605  5.69867162  0.66975759  2.19999988 23.2000001 ]
2026-01-12 18:53:34,420 - DEBUG - integration_test - Step 235: Using propagated spline 23.2000 (close to path, dist=0.454m, drift=0.426m)
2026-01-12 18:53:34,420 - DEBUG - integration_test -   Set spline state to 23.2000
2026-01-12 18:53:34,421 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:34,501 - DEBUG - integration_test - Step 235: Checking path alignment: vehicle=(21.637, 5.699), path_start=(0.000, 0.000), dist=22.375m
2026-01-12 18:53:34,501 - WARNING - integration_test - Step 235: Vehicle is far from path start (dist=22.375m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:34,501 - INFO - integration_test - === Calling planner.solve_mpc() at step 235 ===
2026-01-12 18:53:34,565 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:34,576 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:34,576 - INFO - integration_test - Warmstart k=0: x0=21.63665605109215 , y0=5.698671624696515 , psi0=0.6697575860200009 , v0=2.1999998824135383 , spline0=22.94747485164115 , a0=0.0 , w0=0.0
2026-01-12 18:53:34,576 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:34,578 - INFO - integration_test - Dyn residual k=0: pred=[21.80912992115108, 5.835246728478612, 0.6697575860200009, 2.1999998824135383, 23.167474839882505], ws=[21.80912992115108, 5.835246728478612, 0.6697575860200011, 2.1999998824135383, 23.367547810032363], res=[0.0, 0.0, -2.220446049250313e-16, 0.0, -0.2000729701498578], res_norm=2.001e-01
2026-01-12 18:53:34,579 - INFO - integration_test - Dyn residual k=1: pred=[21.98160379121001, 5.97182183226071, 0.6697575860200011, 2.1999998824135383, 23.587547798273718], ws=[21.98160379121001, 5.97182183226071, 0.6697575860200011, 2.1999998824135383, 23.712981350277865], res=[0.0, 0.0, 0.0, 0.0, -0.12543355200414652], res_norm=1.254e-01
2026-01-12 18:53:34,580 - INFO - integration_test - Dyn residual k=2: pred=[22.15407766126894, 6.1083969360428085, 0.6697575860200011, 2.1999998824135383, 23.93298133851922], ws=[22.15407766126894, 6.1083969360428085, 0.6697575860200011, 2.1999998824135383, 23.608184381481642], res=[0.0, 0.0, 0.0, 0.0, 0.32479695703757727], res_norm=3.248e-01
2026-01-12 18:53:34,598 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,683 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:34,700 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,713 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:34,730 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,742 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:34,759 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,773 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:34,792 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,803 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,818 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,830 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,845 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,856 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,883 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,898 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,909 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,924 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,936 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:34,951 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:34,963 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,116 - INFO - integration_test - Step 235: MPC solve successful
2026-01-12 18:53:35,449 - INFO - integration_test - Step 235: Computed 6 numeric contouring constraints for visualization (s=23.200)
2026-01-12 18:53:35,449 - DEBUG - integration_test - Step 235: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:35,449 - INFO - integration_test - === Applying control at step 235 ===
2026-01-12 18:53:35,449 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199995838, 'w': 0.022336327588269027}
2026-01-12 18:53:35,449 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:35,449 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:35,450 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:35,451 - INFO - integration_test - Step 235 completed in 1.031s
2026-01-12 18:53:35,467 - INFO - integration_test - Step 236 (contouring until path end)
2026-01-12 18:53:35,469 - DEBUG - integration_test - Syncing planner state at step 236: vehicle_state=[21.80114678  5.82921961  0.67199122  1.99999988 23.40000009]
2026-01-12 18:53:35,469 - DEBUG - integration_test - Step 236: Using propagated spline 23.4000 (close to path, dist=0.396m, drift=0.226m)
2026-01-12 18:53:35,469 - DEBUG - integration_test -   Set spline state to 23.4000
2026-01-12 18:53:35,470 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:35,550 - DEBUG - integration_test - Step 236: Checking path alignment: vehicle=(21.801, 5.829), path_start=(0.000, 0.000), dist=22.567m
2026-01-12 18:53:35,550 - WARNING - integration_test - Step 236: Vehicle is far from path start (dist=22.567m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:35,550 - INFO - integration_test - === Calling planner.solve_mpc() at step 236 ===
2026-01-12 18:53:35,612 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:35,624 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:35,624 - INFO - integration_test - Warmstart k=0: x0=21.801146780597424 , y0=5.8292196105295355 , psi0=0.6719912187788278 , v0=1.99999988041358 , spline0=23.34949504170271 , a0=0.0 , w0=0.0
2026-01-12 18:53:35,624 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:35,626 - INFO - integration_test - Dyn residual k=0: pred=[21.95766349000518, 5.953728706151946, 0.6719912187788278, 1.99999988041358, 23.54949502974407], ws=[21.95766349000518, 5.953728706151946, 0.6719912187788277, 1.99999988041358, 23.47433271046598], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.07516231927808903], res_norm=7.516e-02
2026-01-12 18:53:35,627 - INFO - integration_test - Dyn residual k=1: pred=[22.11418019941294, 6.078237801774356, 0.6719912187788277, 1.99999988041358, 23.67433269850734], ws=[22.114180199412942, 6.078237801774356, 0.6719912187788277, 1.99999988041358, 23.85418132080789], res=[-3.552713678800501e-15, 0.0, 0.0, 0.0, -0.17984862230055043], res_norm=1.798e-01
2026-01-12 18:53:35,628 - INFO - integration_test - Dyn residual k=2: pred=[22.2706969088207, 6.202746897396766, 0.6719912187788277, 1.99999988041358, 24.054181308849248], ws=[22.270696908820703, 6.202746897396766, 0.6719912187788277, 1.99999988041358, 23.951213460957142], res=[-3.552713678800501e-15, 0.0, 0.0, 0.0, 0.10296784789210633], res_norm=1.030e-01
2026-01-12 18:53:35,647 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,729 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:35,746 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,758 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:35,774 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,787 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:35,803 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,816 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:35,832 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,844 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,858 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,870 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,885 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,897 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,911 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,922 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,937 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,950 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,965 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:35,976 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:35,991 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,003 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:36,189 - INFO - integration_test - Step 236: MPC solve successful
2026-01-12 18:53:36,571 - INFO - integration_test - Step 236: Computed 6 numeric contouring constraints for visualization (s=23.400)
2026-01-12 18:53:36,571 - DEBUG - integration_test - Step 236: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:36,571 - INFO - integration_test - === Applying control at step 236 ===
2026-01-12 18:53:36,571 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199996544, 'w': 0.8000000095091372}
2026-01-12 18:53:36,571 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:36,571 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:36,572 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:36,573 - INFO - integration_test - Step 236 completed in 1.105s
2026-01-12 18:53:36,588 - INFO - integration_test - Step 237 (contouring until path end)
2026-01-12 18:53:36,589 - DEBUG - integration_test - Syncing planner state at step 237: vehicle_state=[21.94503737  5.95322067  0.75199122  1.79999988 23.58000008]
2026-01-12 18:53:36,589 - DEBUG - integration_test - Step 237: Using propagated spline 23.5800 (close to path, dist=0.441m, drift=0.046m)
2026-01-12 18:53:36,590 - DEBUG - integration_test -   Set spline state to 23.5800
2026-01-12 18:53:36,592 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:36,670 - DEBUG - integration_test - Step 237: Checking path alignment: vehicle=(21.945, 5.953), path_start=(0.000, 0.000), dist=22.738m
2026-01-12 18:53:36,670 - WARNING - integration_test - Step 237: Vehicle is far from path start (dist=22.738m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:36,670 - INFO - integration_test - === Calling planner.solve_mpc() at step 237 ===
2026-01-12 18:53:36,735 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:36,746 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:36,746 - INFO - integration_test - Warmstart k=0: x0=21.94503736946403 , y0=5.953220672717289 , psi0=0.7519912197297416 , v0=1.7999998784136144 , spline0=23.428484928533972 , a0=0.0 , w0=0.0
2026-01-12 18:53:36,747 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:36,748 - INFO - integration_test - Dyn residual k=0: pred=[22.0764967833842, 6.0761776493987885, 0.7519912197297416, 1.7999998784136144, 23.608484916375335], ws=[22.0764967833842, 6.0761776493987885, 0.7519912197297414, 1.7999998784136144, 23.558190391620577], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, 0.05029452475475793], res_norm=5.029e-02
2026-01-12 18:53:36,749 - INFO - integration_test - Dyn residual k=1: pred=[22.207956197304373, 6.199134626080288, 0.7519912197297414, 1.7999998784136144, 23.73819037946194], ws=[22.207956197304373, 6.199134626080288, 0.7519912197297414, 1.7999998784136144, 23.94259308684031], res=[0.0, 0.0, 0.0, 0.0, -0.20440270737837096], res_norm=2.044e-01
2026-01-12 18:53:36,750 - INFO - integration_test - Dyn residual k=2: pred=[22.339415611224545, 6.3220916027617875, 0.7519912197297414, 1.7999998784136144, 24.122593074681674], ws=[22.339415611224545, 6.3220916027617875, 0.7519912197297414, 1.7999998784136144, 24.044905003056495], res=[0.0, 0.0, 0.0, 0.0, 0.07768807162517888], res_norm=7.769e-02
2026-01-12 18:53:36,766 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,849 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:36,866 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,879 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:36,895 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,908 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:36,924 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,937 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:36,953 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,965 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:36,980 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:36,991 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:37,006 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:37,018 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:37,034 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:37,046 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:37,061 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:37,072 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:37,088 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:37,100 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:37,116 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:37,128 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:37,403 - INFO - integration_test - Step 237: MPC solve successful
2026-01-12 18:53:37,797 - INFO - integration_test - Step 237: Computed 6 numeric contouring constraints for visualization (s=23.580)
2026-01-12 18:53:37,797 - DEBUG - integration_test - Step 237: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:37,797 - INFO - integration_test - === Applying control at step 237 ===
2026-01-12 18:53:37,797 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199963823, 'w': -0.8000000096932965}
2026-01-12 18:53:37,797 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:37,797 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:37,799 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:37,799 - INFO - integration_test - Step 237 completed in 1.211s
2026-01-12 18:53:37,817 - INFO - integration_test - Step 238 (contouring until path end)
2026-01-12 18:53:37,818 - DEBUG - integration_test - Syncing planner state at step 238: vehicle_state=[22.08892796  6.07722173  0.67199122  1.99999988 23.78000007]
2026-01-12 18:53:37,818 - DEBUG - integration_test - Step 238: Using propagated spline 23.7800 (close to path, dist=0.552m, drift=0.154m)
2026-01-12 18:53:37,818 - DEBUG - integration_test -   Set spline state to 23.7800
2026-01-12 18:53:37,820 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:37,897 - DEBUG - integration_test - Step 238: Checking path alignment: vehicle=(22.089, 6.077), path_start=(0.000, 0.000), dist=22.910m
2026-01-12 18:53:37,897 - WARNING - integration_test - Step 238: Vehicle is far from path start (dist=22.910m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:37,897 - INFO - integration_test - === Calling planner.solve_mpc() at step 238 ===
2026-01-12 18:53:37,958 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:37,969 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:37,969 - INFO - integration_test - Warmstart k=0: x0=22.088927958331766 , y0=6.077221734903668 , psi0=0.6719912187604119 , v0=1.9999998804132526 , spline0=23.830505118595504 , a0=0.0 , w0=0.0
2026-01-12 18:53:37,969 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:37,970 - INFO - integration_test - Dyn residual k=0: pred=[22.245444667741793, 6.201730830523176, 0.6719912187604119, 1.9999998804132526, 24.03050510663683], ws=[22.245444667741793, 6.201730830523176, 0.6719912187604118, 1.9999998804132526, 23.917777209930016], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.11272789670681505], res_norm=1.127e-01
2026-01-12 18:53:37,971 - INFO - integration_test - Dyn residual k=1: pred=[22.40196137715182, 6.326239926142684, 0.6719912187604118, 1.9999998804132526, 24.117777197971343], ws=[22.40196137715182, 6.326239926142684, 0.6719912187604118, 1.9999998804132526, 24.329035925543412], res=[0.0, 0.0, 0.0, 0.0, -0.2112587275720692], res_norm=2.113e-01
2026-01-12 18:53:37,972 - INFO - integration_test - Dyn residual k=2: pred=[22.55847808656185, 6.450749021762191, 0.6719912187604118, 1.9999998804132526, 24.52903591358474], ws=[22.55847808656185, 6.450749021762191, 0.6719912187604118, 1.9999998804132526, 24.460679936934547], res=[0.0, 0.0, 0.0, 0.0, 0.06835597665019222], res_norm=6.836e-02
2026-01-12 18:53:37,988 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,070 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:38,087 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,100 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:38,117 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,130 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:38,146 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,158 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:38,174 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,186 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,200 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,212 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,227 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,238 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,254 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,266 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,284 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,297 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,313 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,324 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,339 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:38,351 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:38,612 - INFO - integration_test - Step 238: MPC solve successful
2026-01-12 18:53:39,003 - INFO - integration_test - Step 238: Computed 6 numeric contouring constraints for visualization (s=23.780)
2026-01-12 18:53:39,003 - DEBUG - integration_test - Step 238: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:39,003 - INFO - integration_test - === Applying control at step 238 ===
2026-01-12 18:53:39,003 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998651, 'w': 0.017784382690368316}
2026-01-12 18:53:39,003 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:39,003 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:39,004 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:39,005 - INFO - integration_test - Step 238 completed in 1.187s
2026-01-12 18:53:39,019 - INFO - integration_test - Step 239 (contouring until path end)
2026-01-12 18:53:39,021 - DEBUG - integration_test - Syncing planner state at step 239: vehicle_state=[22.25315232  6.20810467  0.67376966  2.19999988 24.00000006]
2026-01-12 18:53:39,021 - DEBUG - integration_test - Step 239: Using propagated spline 24.0000 (close to path, dist=0.676m, drift=0.232m)
2026-01-12 18:53:39,021 - DEBUG - integration_test -   Set spline state to 24.0000
2026-01-12 18:53:39,023 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:39,103 - DEBUG - integration_test - Step 239: Checking path alignment: vehicle=(22.253, 6.208), path_start=(0.000, 0.000), dist=23.103m
2026-01-12 18:53:39,103 - WARNING - integration_test - Step 239: Vehicle is far from path start (dist=23.103m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:39,103 - INFO - integration_test - === Calling planner.solve_mpc() at step 239 ===
2026-01-12 18:53:39,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:39,177 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:39,177 - INFO - integration_test - Warmstart k=0: x0=22.25315231816707 , y0=6.208104671306319 , psi0=0.6737696570294487 , v0=2.1999998824131177 , spline0=23.949495005826712 , a0=0.0 , w0=0.0
2026-01-12 18:53:39,177 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:39,179 - INFO - integration_test - Dyn residual k=0: pred=[22.425076852552102, 6.345370651442212, 0.6737696570294487, 2.1999998824131177, 24.169494994068025], ws=[22.425076852552102, 6.345370651442212, 0.6737696570294487, 2.1999998824131177, 24.089800298254747], res=[0.0, 0.0, 0.0, 0.0, 0.07969469581327715], res_norm=7.969e-02
2026-01-12 18:53:39,180 - INFO - integration_test - Dyn residual k=1: pred=[22.597001386937134, 6.482636631578106, 0.6737696570294487, 2.1999998824131177, 24.30980028649606], ws=[22.597001386937134, 6.482636631578106, 0.6737696570294487, 2.1999998824131177, 24.45877992331622], res=[0.0, 0.0, 0.0, 0.0, -0.1489796368201617], res_norm=1.490e-01
2026-01-12 18:53:39,181 - INFO - integration_test - Dyn residual k=2: pred=[22.768925921322165, 6.619902611713999, 0.6737696570294487, 2.1999998824131177, 24.678779911557534], ws=[22.768925921322165, 6.619902611713999, 0.6737696570294487, 2.1999998824131177, 24.65816389299821], res=[0.0, 0.0, 0.0, 0.0, 0.02061601855932338], res_norm=2.062e-02
2026-01-12 18:53:39,197 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,277 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:39,294 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,307 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:39,323 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,337 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:39,353 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,374 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:39,392 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,404 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:39,417 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,429 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:39,443 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,455 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:39,470 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,482 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:39,496 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:39,507 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:40,011 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:40,022 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:40,039 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:40,051 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:40,235 - INFO - integration_test - Step 239: MPC solve successful
2026-01-12 18:53:40,625 - INFO - integration_test - Step 239: Computed 6 numeric contouring constraints for visualization (s=24.000)
2026-01-12 18:53:40,625 - DEBUG - integration_test - Step 239: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:40,625 - INFO - integration_test - === Applying control at step 239 ===
2026-01-12 18:53:40,625 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199990584, 'w': -0.011193357624331777}
2026-01-12 18:53:40,625 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:40,625 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:40,627 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:40,627 - INFO - integration_test - Step 239 completed in 1.607s
2026-01-12 18:53:40,645 - INFO - integration_test - Step 240 (contouring until path end)
2026-01-12 18:53:40,646 - DEBUG - integration_test - Syncing planner state at step 240: vehicle_state=[22.43297305  6.35150793  0.67265032  2.39999988 24.24000004]
2026-01-12 18:53:40,647 - DEBUG - integration_test - Step 240: Using propagated spline 24.2400 (close to path, dist=0.582m, drift=0.008m)
2026-01-12 18:53:40,647 - DEBUG - integration_test -   Set spline state to 24.2400
2026-01-12 18:53:40,648 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:40,728 - DEBUG - integration_test - Step 240: Checking path alignment: vehicle=(22.433, 6.352), path_start=(0.000, 0.000), dist=23.315m
2026-01-12 18:53:40,728 - WARNING - integration_test - Step 240: Vehicle is far from path start (dist=23.315m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:40,728 - INFO - integration_test - === Calling planner.solve_mpc() at step 240 ===
2026-01-12 18:53:40,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:40,803 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:40,803 - INFO - integration_test - Warmstart k=0: x0=22.432973045575185 , y0=6.3515079317701 , psi0=0.6726503212670155 , v0=2.3999998844130235 , spline0=24.088484893257913 , a0=0.0 , w0=0.0
2026-01-12 18:53:40,803 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:40,805 - INFO - integration_test - Dyn residual k=0: pred=[22.6206945811535, 6.501042608457297, 0.6726503212670155, 2.3999998844130235, 24.328484881699215], ws=[22.6206945811535, 6.501042608457297, 0.6726503212670156, 2.3999998844130235, 24.486466470320515], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.15798158862130052], res_norm=1.580e-01
2026-01-12 18:53:40,806 - INFO - integration_test - Dyn residual k=1: pred=[22.808416116731816, 6.650577285144494, 0.6726503212670156, 2.3999998844130235, 24.726466458761816], ws=[22.808416116731816, 6.650577285144494, 0.6726503212670156, 2.3999998844130235, 24.888155285248658], res=[0.0, 0.0, 0.0, 0.0, -0.16168882648684146], res_norm=1.617e-01
2026-01-12 18:53:40,807 - INFO - integration_test - Dyn residual k=2: pred=[22.996137652310132, 6.800111961831691, 0.6726503212670156, 2.3999998844130235, 25.12815527368996], ws=[22.996137652310132, 6.800111961831691, 0.6726503212670156, 2.3999998844130235, 25.025037072648523], res=[0.0, 0.0, 0.0, 0.0, 0.10311820104143621], res_norm=1.031e-01
2026-01-12 18:53:40,825 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:40,908 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:40,925 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:40,938 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:40,954 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:40,968 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:40,984 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:40,997 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:41,013 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,024 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,040 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,053 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,068 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,080 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,095 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,107 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,122 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,134 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,150 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,161 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:41,187 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:41,691 - INFO - integration_test - Step 240: MPC solve successful
2026-01-12 18:53:42,091 - INFO - integration_test - Step 240: Computed 6 numeric contouring constraints for visualization (s=24.240)
2026-01-12 18:53:42,091 - DEBUG - integration_test - Step 240: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:42,091 - INFO - integration_test - === Applying control at step 240 ===
2026-01-12 18:53:42,091 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199930943, 'w': -0.023849218601541745}
2026-01-12 18:53:42,092 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:42,092 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:42,093 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:42,094 - INFO - integration_test - Step 240 completed in 1.447s
2026-01-12 18:53:42,108 - INFO - integration_test - Step 241 (contouring until path end)
2026-01-12 18:53:42,110 - DEBUG - integration_test - Syncing planner state at step 241: vehicle_state=[22.62870434  6.50703678  0.6702654   2.59999989 24.50000003]
2026-01-12 18:53:42,111 - DEBUG - integration_test - Step 241: Using propagated spline 24.5000 (close to path, dist=0.574m, drift=0.268m)
2026-01-12 18:53:42,111 - DEBUG - integration_test -   Set spline state to 24.5000
2026-01-12 18:53:42,113 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:42,189 - DEBUG - integration_test - Step 241: Checking path alignment: vehicle=(22.629, 6.507), path_start=(0.000, 0.000), dist=23.546m
2026-01-12 18:53:42,189 - WARNING - integration_test - Step 241: Vehicle is far from path start (dist=23.546m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:42,189 - INFO - integration_test - === Calling planner.solve_mpc() at step 241 ===
2026-01-12 18:53:42,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:42,263 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:42,263 - INFO - integration_test - Warmstart k=0: x0=22.628704343697528 , y0=6.507036783105005 , psi0=0.6702653994068614 , v0=2.599999886412333 , spline0=24.44949498290925 , a0=0.0 , w0=0.0
2026-01-12 18:53:42,263 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:42,264 - INFO - integration_test - Dyn residual k=0: pred=[22.832455110327103, 6.668547213700994, 0.6702653994068614, 2.599999886412333, 24.709494971550484], ws=[22.832455110327103, 6.668547213700995, 0.6702653994068615, 2.599999886412333, 24.673426593642837], res=[0.0, -8.881784197001252e-16, -1.1102230246251565e-16, 0.0, 0.03606837790764672], res_norm=3.607e-02
2026-01-12 18:53:42,265 - INFO - integration_test - Dyn residual k=1: pred=[23.03620587695668, 6.830057644296984, 0.6702653994068615, 2.599999886412333, 24.93342658228407], ws=[23.03620587695668, 6.830057644296984, 0.6702653994068615, 2.599999886412333, 24.819972214991978], res=[0.0, 0.0, 0.0, 0.0, 0.11345436729209268], res_norm=1.135e-01
2026-01-12 18:53:42,266 - INFO - integration_test - Dyn residual k=2: pred=[23.239956643586254, 6.991568074892973, 0.6702653994068615, 2.599999886412333, 25.07997220363321], ws=[23.239956643586254, 6.991568074892973, 0.6702653994068615, 2.599999886412333, 25.230316711935927], res=[0.0, 0.0, 0.0, 0.0, -0.15034450830271595], res_norm=1.503e-01
2026-01-12 18:53:42,282 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,362 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:42,378 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,391 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:42,407 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,421 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:42,437 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,450 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:42,466 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,478 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,492 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,504 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,519 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,531 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,547 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,558 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,574 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,586 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,601 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,613 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,628 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:42,639 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:42,892 - INFO - integration_test - Step 241: MPC solve successful
2026-01-12 18:53:43,309 - INFO - integration_test - Step 241: Computed 6 numeric contouring constraints for visualization (s=24.500)
2026-01-12 18:53:43,309 - DEBUG - integration_test - Step 241: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:43,309 - INFO - integration_test - === Applying control at step 241 ===
2026-01-12 18:53:43,309 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199993435, 'w': -0.03551215127393903}
2026-01-12 18:53:43,309 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:43,309 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:43,311 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:43,311 - INFO - integration_test - Step 241 completed in 1.201s
2026-01-12 18:53:43,327 - INFO - integration_test - Step 242 (contouring until path end)
2026-01-12 18:53:43,328 - DEBUG - integration_test - Syncing planner state at step 242: vehicle_state=[22.84059271  6.67437846  0.66671418  2.79999989 24.78000002]
2026-01-12 18:53:43,329 - DEBUG - integration_test - Step 242: Using propagated spline 24.7800 (close to path, dist=0.657m, drift=0.058m)
2026-01-12 18:53:43,329 - DEBUG - integration_test -   Set spline state to 24.7800
2026-01-12 18:53:43,331 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:43,407 - DEBUG - integration_test - Step 242: Checking path alignment: vehicle=(22.841, 6.674), path_start=(0.000, 0.000), dist=23.796m
2026-01-12 18:53:43,407 - WARNING - integration_test - Step 242: Vehicle is far from path start (dist=23.796m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:43,407 - INFO - integration_test - === Calling planner.solve_mpc() at step 242 ===
2026-01-12 18:53:43,468 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:43,480 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:43,480 - INFO - integration_test - Warmstart k=0: x0=22.84059271117884 , y0=6.67437846072549 , psi0=0.6667141842794675 , v0=2.799999888412267 , spline0=24.681987997955687 , a0=0.0 , w0=0.0
2026-01-12 18:53:43,480 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:43,481 - INFO - integration_test - Dyn residual k=0: pred=[23.060632907810827, 6.847532454665112, 0.6667141842794675, 2.799999888412267, 24.961987986796913], ws=[23.060632907810827, 6.847532454665112, 0.6667141842794675, 2.799999888412267, 24.844413001295138], res=[0.0, 0.0, 0.0, 0.0, 0.11757498550177559], res_norm=1.176e-01
2026-01-12 18:53:43,482 - INFO - integration_test - Dyn residual k=1: pred=[23.280673104442815, 7.020686448604734, 0.6667141842794675, 2.799999888412267, 25.124412990136364], ws=[23.280673104442815, 7.020686448604734, 0.6667141842794675, 2.799999888412267, 25.26958990160366], res=[0.0, 0.0, 0.0, 0.0, -0.1451769114672956], res_norm=1.452e-01
2026-01-12 18:53:43,483 - INFO - integration_test - Dyn residual k=2: pred=[23.500713301074803, 7.1938404425443565, 0.6667141842794675, 2.799999888412267, 25.549589890444885], ws=[23.500713301074803, 7.1938404425443565, 0.6667141842794675, 2.799999888412267, 25.689955923258243], res=[0.0, 0.0, 0.0, 0.0, -0.14036603281335758], res_norm=1.404e-01
2026-01-12 18:53:43,499 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,581 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:43,598 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,611 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:43,627 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,640 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:43,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,670 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:43,686 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,698 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:43,713 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,725 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:43,740 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,752 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:43,767 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,779 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:43,794 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,805 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:43,821 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,834 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:43,849 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:43,860 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:44,083 - INFO - integration_test - Step 242: MPC solve successful
2026-01-12 18:53:44,518 - INFO - integration_test - Step 242: Computed 6 numeric contouring constraints for visualization (s=24.780)
2026-01-12 18:53:44,519 - DEBUG - integration_test - Step 242: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:44,519 - INFO - integration_test - === Applying control at step 242 ===
2026-01-12 18:53:44,519 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019998912, 'w': -0.045005871937343754}
2026-01-12 18:53:44,519 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:44,519 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:44,520 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:44,520 - INFO - integration_test - Step 242 completed in 1.192s
2026-01-12 18:53:44,538 - INFO - integration_test - Step 243 (contouring until path end)
2026-01-12 18:53:44,540 - DEBUG - integration_test - Syncing planner state at step 243: vehicle_state=[23.06889891  6.85319718  0.6622136   2.99999989 25.08000001]
2026-01-12 18:53:44,541 - DEBUG - integration_test - Step 243: Using propagated spline 25.0800 (close to path, dist=0.634m, drift=0.242m)
2026-01-12 18:53:44,541 - DEBUG - integration_test -   Set spline state to 25.0800
2026-01-12 18:53:44,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:44,624 - DEBUG - integration_test - Step 243: Checking path alignment: vehicle=(23.069, 6.853), path_start=(0.000, 0.000), dist=24.065m
2026-01-12 18:53:44,624 - WARNING - integration_test - Step 243: Vehicle is far from path start (dist=24.065m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:44,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 243 ===
2026-01-12 18:53:44,688 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:44,700 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:44,700 - INFO - integration_test - Warmstart k=0: x0=23.068898905293025 , y0=6.853197177351042 , psi0=0.6622135970857331 , v0=2.999999890412158 , spline0=24.8335031439361 , a0=0.0 , w0=0.0
2026-01-12 18:53:44,700 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:44,701 - INFO - integration_test - Dyn residual k=0: pred=[23.305488827683785, 7.037656392485078, 0.6622135970857331, 2.999999890412158, 25.133503132977314], ws=[23.305488827683785, 7.037656392485078, 0.6622135970857332, 2.999999890412158, 25.546426520847582], res=[0.0, 0.0, -1.1102230246251565e-16, 0.0, -0.4129233878702685], res_norm=4.129e-01
2026-01-12 18:53:44,702 - INFO - integration_test - Dyn residual k=1: pred=[23.542078750074545, 7.222115607619115, 0.6622135970857332, 2.999999890412158, 25.846426509888797], ws=[23.542078750074545, 7.222115607619115, 0.6622135970857332, 2.999999890412158, 25.508390754753822], res=[0.0, 0.0, 0.0, 0.0, 0.33803575513497464], res_norm=3.380e-01
2026-01-12 18:53:44,703 - INFO - integration_test - Dyn residual k=2: pred=[23.778668672465304, 7.406574822753151, 0.6622135970857332, 2.999999890412158, 25.808390743795037], ws=[23.778668672465304, 7.406574822753151, 0.6622135970857332, 2.999999890412158, 25.905154116460483], res=[0.0, 0.0, 0.0, 0.0, -0.09676337266544621], res_norm=9.676e-02
2026-01-12 18:53:44,719 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,802 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:44,818 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,832 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:44,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,862 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:44,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,890 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:44,906 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,918 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:44,934 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,946 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:44,961 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:44,972 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:44,988 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:45,001 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:45,016 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:45,028 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:45,046 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:45,057 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:45,071 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:45,083 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:45,282 - INFO - integration_test - Step 243: MPC solve successful
2026-01-12 18:53:45,727 - INFO - integration_test - Step 243: Computed 6 numeric contouring constraints for visualization (s=25.080)
2026-01-12 18:53:45,727 - DEBUG - integration_test - Step 243: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:45,727 - INFO - integration_test - === Applying control at step 243 ===
2026-01-12 18:53:45,727 - INFO - integration_test -   Control dict from planner: {'a': 1.3958774621417446e-06, 'w': -0.05132177643524691}
2026-01-12 18:53:45,727 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:45,727 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:45,729 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:45,729 - INFO - integration_test - Step 243 completed in 1.190s
2026-01-12 18:53:45,746 - INFO - integration_test - Step 244 (contouring until path end)
2026-01-12 18:53:45,747 - DEBUG - integration_test - Syncing planner state at step 244: vehicle_state=[23.30596113  7.03704848  0.65708142  3.00000003 25.38000001]
2026-01-12 18:53:45,748 - DEBUG - integration_test - Step 244: Using propagated spline 25.3800 (close to path, dist=0.692m, drift=0.063m)
2026-01-12 18:53:45,748 - DEBUG - integration_test -   Set spline state to 25.3800
2026-01-12 18:53:45,749 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:45,826 - DEBUG - integration_test - Step 244: Checking path alignment: vehicle=(23.306, 7.037), path_start=(0.000, 0.000), dist=24.345m
2026-01-12 18:53:45,826 - WARNING - integration_test - Step 244: Vehicle is far from path start (dist=24.345m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:45,826 - INFO - integration_test - === Calling planner.solve_mpc() at step 244 ===
2026-01-12 18:53:45,888 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:45,899 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:45,899 - INFO - integration_test - Warmstart k=0: x0=23.305961132295028 , y0=7.037048477583268 , psi0=0.6570814194422084 , v0=3.0000000299999043 , spline0=25.54889808668105 , a0=0.0 , w0=0.0
2026-01-12 18:53:45,899 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:45,901 - INFO - integration_test - Dyn residual k=0: pred=[23.543494623248897, 7.220291055810224, 0.6570814194422084, 3.0000000299999043, 25.84889808968104], ws=[23.54349462087357, 7.220291053977803, 0.6570814194422083, 3.0, 25.51458673782387], res=[2.375326602077621e-09, 1.8324204376085618e-09, 1.1102230246251565e-16, 2.999990433849575e-08, 0.33431135185717054], res_norm=3.343e-01
2026-01-12 18:53:45,901 - INFO - integration_test - Dyn residual k=1: pred=[23.781028109452112, 7.403533630372339, 0.6570814194422083, 3.0, 25.81458673782387], ws=[23.781028109452112, 7.403533630372339, 0.6570814194422083, 3.0, 25.914569500189934], res=[0.0, 0.0, 0.0, 0.0, -0.09998276236606429], res_norm=9.998e-02
2026-01-12 18:53:45,902 - INFO - integration_test - Dyn residual k=2: pred=[24.018561598030654, 7.586776206766874, 0.6570814194422083, 3.0, 26.214569500189935], ws=[24.018561598030654, 7.586776206766874, 0.6570814194422083, 3.0, 26.138956209130097], res=[0.0, 0.0, 0.0, 0.0, 0.07561329105983816], res_norm=7.561e-02
2026-01-12 18:53:45,918 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:45,999 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:46,016 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,028 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:46,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,059 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:46,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,088 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:46,104 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,116 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,132 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,143 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,158 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,170 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,185 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,197 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,212 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,223 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,238 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,251 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,266 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:46,277 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:46,554 - INFO - integration_test - Step 244: MPC solve successful
2026-01-12 18:53:47,003 - INFO - integration_test - Step 244: Computed 6 numeric contouring constraints for visualization (s=25.380)
2026-01-12 18:53:47,003 - DEBUG - integration_test - Step 244: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:47,003 - INFO - integration_test - === Applying control at step 244 ===
2026-01-12 18:53:47,003 - INFO - integration_test -   Control dict from planner: {'a': 1.4360263415283633e-12, 'w': -0.054127571645061864}
2026-01-12 18:53:47,003 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:47,003 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:47,005 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:47,005 - INFO - integration_test - Step 244 completed in 1.258s
2026-01-12 18:53:47,021 - INFO - integration_test - Step 245 (contouring until path end)
2026-01-12 18:53:47,022 - DEBUG - integration_test - Syncing planner state at step 245: vehicle_state=[23.54398939  7.21964731  0.65166866  3.00000003 25.68000002]
2026-01-12 18:53:47,023 - DEBUG - integration_test - Step 245: Using propagated spline 25.6800 (close to path, dist=0.680m, drift=0.237m)
2026-01-12 18:53:47,023 - DEBUG - integration_test -   Set spline state to 25.6800
2026-01-12 18:53:47,025 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:47,107 - DEBUG - integration_test - Step 245: Checking path alignment: vehicle=(23.544, 7.220), path_start=(0.000, 0.000), dist=24.626m
2026-01-12 18:53:47,107 - WARNING - integration_test - Step 245: Vehicle is far from path start (dist=24.626m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:47,108 - INFO - integration_test - === Calling planner.solve_mpc() at step 245 ===
2026-01-12 18:53:47,170 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:47,182 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:47,182 - INFO - integration_test - Warmstart k=0: x0=23.543989385955285 , y0=7.219647307056953 , psi0=0.6516686622777023 , v0=3.000000030000048 , spline0=25.500332097564048 , a0=0.0 , w0=0.0
2026-01-12 18:53:47,182 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:47,183 - INFO - integration_test - Dyn residual k=0: pred=[23.78251124003163, 7.401601496148563, 0.6516686622777023, 3.000000030000048, 25.800332100564052], ws=[23.782511237646407, 7.401601494329019, 0.6516686622777024, 3.0, 25.895833931630374], res=[2.385224462386759e-09, 1.819544515058169e-09, -1.1102230246251565e-16, 3.0000047779310535e-08, -0.09550183106632204], res_norm=9.550e-02
2026-01-12 18:53:47,184 - INFO - integration_test - Dyn residual k=1: pred=[24.02103308933753, 7.5835556816010845, 0.6516686622777024, 3.0, 26.195833931630375], ws=[24.02103308933753, 7.5835556816010845, 0.6516686622777024, 3.0, 26.369648576471324], res=[0.0, 0.0, 0.0, 0.0, -0.17381464484094877], res_norm=1.738e-01
2026-01-12 18:53:47,185 - INFO - integration_test - Dyn residual k=2: pred=[24.25955494102865, 7.76550986887315, 0.6516686622777024, 3.0, 26.669648576471324], ws=[24.25955494102865, 7.76550986887315, 0.6516686622777024, 3.0, 26.55893118843488], res=[0.0, 0.0, 0.0, 0.0, 0.11071738803644493], res_norm=1.107e-01
2026-01-12 18:53:47,201 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,281 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:47,298 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,310 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:47,326 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,339 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:47,355 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,368 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:47,385 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,397 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,412 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,423 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,438 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,450 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,465 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,476 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,490 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,502 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,517 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,529 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,545 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:47,556 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:47,819 - INFO - integration_test - Step 245: MPC solve successful
2026-01-12 18:53:48,271 - INFO - integration_test - Step 245: Computed 6 numeric contouring constraints for visualization (s=25.680)
2026-01-12 18:53:48,271 - DEBUG - integration_test - Step 245: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:48,271 - INFO - integration_test - === Applying control at step 245 ===
2026-01-12 18:53:48,271 - INFO - integration_test -   Control dict from planner: {'a': 6.973727632353942e-13, 'w': -0.05391764982210242}
2026-01-12 18:53:48,272 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:48,272 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:48,273 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:48,274 - INFO - integration_test - Step 245 completed in 1.252s
2026-01-12 18:53:48,288 - INFO - integration_test - Step 246 (contouring until path end)
2026-01-12 18:53:48,289 - DEBUG - integration_test - Syncing planner state at step 246: vehicle_state=[23.78300061  7.40095759  0.6462769   3.00000003 25.98000002]
2026-01-12 18:53:48,290 - DEBUG - integration_test - Step 246: Using propagated spline 25.9800 (close to path, dist=0.708m, drift=0.069m)
2026-01-12 18:53:48,290 - DEBUG - integration_test -   Set spline state to 25.9800
2026-01-12 18:53:48,292 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:48,372 - DEBUG - integration_test - Step 246: Checking path alignment: vehicle=(23.783, 7.401), path_start=(0.000, 0.000), dist=24.908m
2026-01-12 18:53:48,372 - WARNING - integration_test - Step 246: Vehicle is far from path start (dist=24.908m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:48,372 - INFO - integration_test - === Calling planner.solve_mpc() at step 246 ===
2026-01-12 18:53:48,434 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:48,445 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:48,445 - INFO - integration_test - Warmstart k=0: x0=23.783000610274303 , y0=7.400957589215239 , psi0=0.646276897295492 , v0=3.0000000300001175 , spline0=25.90348411484562 , a0=0.0 , w0=0.0
2026-01-12 18:53:48,445 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:48,446 - INFO - integration_test - Dyn residual k=0: pred=[24.02250004678091, 7.581623085957216, 0.646276897295492, 3.0000000300001175, 26.203484117845633], ws=[24.022500044385907, 7.581623084150554, 0.646276897295492, 3.0, 26.125765092239998], res=[2.395001530430818e-09, 1.8066623752588384e-09, 0.0, 3.000011750131648e-08, 0.07771902560563504], res_norm=7.772e-02
2026-01-12 18:53:48,447 - INFO - integration_test - Dyn residual k=1: pred=[24.26199947849751, 7.762288579085868, 0.646276897295492, 3.0, 26.42576509224], ws=[24.26199947849751, 7.762288579085868, 0.646276897295492, 3.0, 26.57241091679846], res=[0.0, 0.0, 0.0, 0.0, -0.14664582455846187], res_norm=1.466e-01
2026-01-12 18:53:48,448 - INFO - integration_test - Dyn residual k=2: pred=[24.501498912609115, 7.942954074021182, 0.646276897295492, 3.0, 26.87241091679846], ws=[24.501498912609115, 7.942954074021182, 0.646276897295492, 3.0, 27.004947822453055], res=[0.0, 0.0, 0.0, 0.0, -0.13253690565459308], res_norm=1.325e-01
2026-01-12 18:53:48,464 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,548 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:48,565 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,577 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:48,594 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,607 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:48,624 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,636 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:48,653 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,665 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:48,680 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,691 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:48,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,718 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:48,733 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,745 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:48,759 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,771 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:48,786 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,798 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:48,813 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:48,824 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:49,073 - INFO - integration_test - Step 246: MPC solve successful
2026-01-12 18:53:49,523 - INFO - integration_test - Step 246: Computed 6 numeric contouring constraints for visualization (s=25.980)
2026-01-12 18:53:49,524 - DEBUG - integration_test - Step 246: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:49,524 - INFO - integration_test - === Applying control at step 246 ===
2026-01-12 18:53:49,524 - INFO - integration_test -   Control dict from planner: {'a': 2.5587547167035316e-12, 'w': -0.048704723323531825}
2026-01-12 18:53:49,524 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:49,524 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:49,526 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:49,526 - INFO - integration_test - Step 246 completed in 1.238s
2026-01-12 18:53:49,544 - INFO - integration_test - Step 247 (contouring until path end)
2026-01-12 18:53:49,545 - DEBUG - integration_test - Syncing planner state at step 247: vehicle_state=[24.02293906  7.58103914  0.64140642  3.00000003 26.28000002]
2026-01-12 18:53:49,546 - DEBUG - integration_test - Step 247: Using propagated spline 26.2800 (close to path, dist=0.708m, drift=0.231m)
2026-01-12 18:53:49,546 - DEBUG - integration_test -   Set spline state to 26.2800
2026-01-12 18:53:49,547 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:49,624 - DEBUG - integration_test - Step 247: Checking path alignment: vehicle=(24.023, 7.581), path_start=(0.000, 0.000), dist=25.191m
2026-01-12 18:53:49,624 - WARNING - integration_test - Step 247: Vehicle is far from path start (dist=25.191m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:49,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 247 ===
2026-01-12 18:53:49,688 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:49,699 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:49,699 - INFO - integration_test - Warmstart k=0: x0=24.02293906218301 , y0=7.581039135145366 , psi0=0.6414064249631388 , v0=3.0000000300003733 , spline0=26.373343369534194 , a0=0.0 , w0=0.0
2026-01-12 18:53:49,699 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:49,700 - INFO - integration_test - Dyn residual k=0: pred=[24.263315580876657, 7.760536018295869, 0.6414064249631388, 3.0000000300003733, 26.67334337253423], ws=[24.263315578472863, 7.760536016500877, 0.6414064249631388, 3.0, 26.561846345429643], res=[2.4037944967858493e-09, 1.7949917108239788e-09, 0.0, 3.0000373296701355e-08, 0.11149702710458698], res_norm=1.115e-01
2026-01-12 18:53:49,701 - INFO - integration_test - Dyn residual k=1: pred=[24.503692094762716, 7.940032897856389, 0.6414064249631388, 3.0, 26.861846345429644], ws=[24.503692094762716, 7.940032897856389, 0.6414064249631388, 3.0, 26.99132556627138], res=[0.0, 0.0, 0.0, 0.0, -0.12947922084173769], res_norm=1.295e-01
2026-01-12 18:53:49,702 - INFO - integration_test - Dyn residual k=2: pred=[24.74406861105257, 8.1195297792119, 0.6414064249631388, 3.0, 27.291325566271382], ws=[24.74406861105257, 8.1195297792119, 0.6414064249631388, 3.0, 27.17716469335557], res=[0.0, 0.0, 0.0, 0.0, 0.11416087291581078], res_norm=1.142e-01
2026-01-12 18:53:49,718 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,802 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:49,818 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,831 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:49,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,861 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:49,877 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,889 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:49,905 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,917 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:49,932 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,943 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:49,958 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,969 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:49,984 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:49,996 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:50,011 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:50,022 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:50,038 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:50,051 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:50,066 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:50,077 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:52,084 - INFO - integration_test - Step 247: MPC solve successful
2026-01-12 18:53:52,539 - INFO - integration_test - Step 247: Computed 6 numeric contouring constraints for visualization (s=26.280)
2026-01-12 18:53:52,540 - DEBUG - integration_test - Step 247: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:52,540 - INFO - integration_test - === Applying control at step 247 ===
2026-01-12 18:53:52,540 - INFO - integration_test -   Control dict from planner: {'a': -0.000484743362644676, 'w': -0.05958796348913786}
2026-01-12 18:53:52,540 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:52,540 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:52,542 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:52,542 - INFO - integration_test - Step 247 completed in 2.997s
2026-01-12 18:53:52,556 - INFO - integration_test - Step 248 (contouring until path end)
2026-01-12 18:53:52,559 - DEBUG - integration_test - Syncing planner state at step 248: vehicle_state=[24.263847    7.75981734  0.63544763  2.99995156 26.57999518]
2026-01-12 18:53:52,560 - DEBUG - integration_test - Step 248: Using propagated spline 26.5800 (close to path, dist=0.709m, drift=0.075m)
2026-01-12 18:53:52,560 - DEBUG - integration_test -   Set spline state to 26.5800
2026-01-12 18:53:52,562 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:52,640 - DEBUG - integration_test - Step 248: Checking path alignment: vehicle=(24.264, 7.760), path_start=(0.000, 0.000), dist=25.474m
2026-01-12 18:53:52,640 - WARNING - integration_test - Step 248: Vehicle is far from path start (dist=25.474m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:52,640 - INFO - integration_test - === Calling planner.solve_mpc() at step 248 ===
2026-01-12 18:53:52,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:52,715 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:52,715 - INFO - integration_test - Warmstart k=0: x0=24.26384700170559 , y0=7.759817338377937 , psi0=0.635447628614225 , v0=2.9999515556641088 , spline0=26.57338208097677 , a0=0.0 , w0=0.0
2026-01-12 18:53:52,715 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:52,716 - INFO - integration_test - Dyn residual k=0: pred=[24.505284930654998, 7.937875811436465, 0.635447628614225, 2.9999515556641088, 26.87337723654318], ws=[24.505284930654998, 7.937875811436465, 0.6354476286142248, 2.9999515556641088, 27.004811595805325], res=[0.0, 0.0, 2.220446049250313e-16, 0.0, -0.13143435926214408], res_norm=1.314e-01
2026-01-12 18:53:52,717 - INFO - integration_test - Dyn residual k=1: pred=[24.746722859604407, 8.115934284494992, 0.6354476286142248, 2.9999515556641088, 27.304806751371736], ws=[24.746722859604407, 8.115934284494992, 0.6354476286142248, 2.9999515556641088, 27.19349503445643], res=[0.0, 0.0, 0.0, 0.0, 0.11131171691530639], res_norm=1.113e-01
2026-01-12 18:53:52,718 - INFO - integration_test - Dyn residual k=2: pred=[24.988160788553817, 8.29399275755352, 0.6354476286142248, 2.9999515556641088, 27.49349019002284], ws=[24.988160788553817, 8.29399275755352, 0.6354476286142248, 2.9999515556641088, 27.436803401097656], res=[0.0, 0.0, 0.0, 0.0, 0.05668678892518386], res_norm=5.669e-02
2026-01-12 18:53:52,733 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,815 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:52,831 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,843 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:52,859 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,872 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:52,888 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,901 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:52,917 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,928 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:52,943 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,954 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:52,969 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:52,982 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:52,997 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:53,008 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:53,023 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:53,035 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:53,051 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:53,062 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:53,077 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:53,088 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:53,418 - INFO - integration_test - Step 248: MPC solve successful
2026-01-12 18:53:53,895 - INFO - integration_test - Step 248: Computed 6 numeric contouring constraints for visualization (s=26.580)
2026-01-12 18:53:53,895 - DEBUG - integration_test - Step 248: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:53,895 - INFO - integration_test - === Applying control at step 248 ===
2026-01-12 18:53:53,895 - INFO - integration_test -   Control dict from planner: {'a': 0.00048474335803094, 'w': -0.018044191706353255}
2026-01-12 18:53:53,895 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:53,895 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:53,897 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:53,897 - INFO - integration_test - Step 248 completed in 1.338s
2026-01-12 18:53:53,913 - INFO - integration_test - Step 249 (contouring until path end)
2026-01-12 18:53:53,914 - DEBUG - integration_test - Syncing planner state at step 249: vehicle_state=[24.5054474   7.93765932  0.63364321  3.00000003 26.87999518]
2026-01-12 18:53:53,915 - DEBUG - integration_test - Step 249: Using propagated spline 26.8800 (close to path, dist=0.722m, drift=0.225m)
2026-01-12 18:53:53,915 - DEBUG - integration_test -   Set spline state to 26.8800
2026-01-12 18:53:53,916 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:53,992 - DEBUG - integration_test - Step 249: Checking path alignment: vehicle=(24.505, 7.938), path_start=(0.000, 0.000), dist=25.759m
2026-01-12 18:53:53,992 - WARNING - integration_test - Step 249: Vehicle is far from path start (dist=25.759m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:53,992 - INFO - integration_test - === Calling planner.solve_mpc() at step 249 ===
2026-01-12 18:53:54,055 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:54,066 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:54,066 - INFO - integration_test - Warmstart k=0: x0=24.505447398006105 , y0=7.937659323477485 , psi0=0.6336432094435897 , v0=3.000000029999912 , spline0=27.003847591733347 , a0=0.0 , w0=0.0
2026-01-12 18:53:54,066 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:54,068 - INFO - integration_test - Dyn residual k=0: pred=[24.747210132280514, 8.115284721763192, 0.6336432094435897, 3.000000029999912, 27.303847594733337], ws=[24.747210129862893, 8.115284719986944, 0.6336432094435898, 3.0, 27.19469405806896], res=[2.417621658423741e-09, 1.776248481633047e-09, -1.1102230246251565e-16, 2.999991188801232e-08, 0.1091535366643761], res_norm=1.092e-01
2026-01-12 18:53:54,068 - INFO - integration_test - Dyn residual k=1: pred=[24.98897286171968, 8.292910116496403, 0.6336432094435898, 3.0, 27.494694058068962], ws=[24.98897286171968, 8.292910116496403, 0.6336432094435898, 3.0, 27.440066979069208], res=[0.0, 0.0, 0.0, 0.0, 0.054627078999754275], res_norm=5.463e-02
2026-01-12 18:53:54,069 - INFO - integration_test - Dyn residual k=2: pred=[25.23073559357647, 8.470535513005862, 0.6336432094435898, 3.0, 27.74006697906921], ws=[25.23073559357647, 8.470535513005862, 0.6336432094435898, 3.0, 27.819078810322765], res=[0.0, 0.0, 0.0, 0.0, -0.07901183125355615], res_norm=7.901e-02
2026-01-12 18:53:54,085 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,168 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:54,184 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,197 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:54,214 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,226 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:54,242 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,255 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:54,271 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,283 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,298 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,310 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,324 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,336 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,351 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,363 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,378 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,389 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,405 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,417 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,433 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:54,445 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:54,713 - INFO - integration_test - Step 249: MPC solve successful
2026-01-12 18:53:55,201 - INFO - integration_test - Step 249: Computed 6 numeric contouring constraints for visualization (s=26.880)
2026-01-12 18:53:55,201 - DEBUG - integration_test - Step 249: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:55,201 - INFO - integration_test - === Applying control at step 249 ===
2026-01-12 18:53:55,202 - INFO - integration_test -   Control dict from planner: {'a': -4.4712919312239244e-13, 'w': -0.014149181883663316}
2026-01-12 18:53:55,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:55,202 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:55,203 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:55,203 - INFO - integration_test - Step 249 completed in 1.289s
2026-01-12 18:53:55,220 - INFO - integration_test - Step 250 (contouring until path end)
2026-01-12 18:53:55,221 - DEBUG - integration_test - Syncing planner state at step 250: vehicle_state=[24.74733571  8.11511363  0.63222829  3.00000003 27.17999518]
2026-01-12 18:53:55,222 - DEBUG - integration_test - Step 250: Using propagated spline 27.1800 (close to path, dist=0.699m, drift=0.081m)
2026-01-12 18:53:55,222 - DEBUG - integration_test -   Set spline state to 27.1800
2026-01-12 18:53:55,223 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:55,301 - DEBUG - integration_test - Step 250: Checking path alignment: vehicle=(24.747, 8.115), path_start=(0.000, 0.000), dist=26.044m
2026-01-12 18:53:55,301 - WARNING - integration_test - Step 250: Vehicle is far from path start (dist=26.044m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:55,301 - INFO - integration_test - === Calling planner.solve_mpc() at step 250 ===
2026-01-12 18:53:55,364 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:55,375 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:55,375 - INFO - integration_test - Warmstart k=0: x0=24.747335714295026 , y0=8.115113625279253 , psi0=0.6322282912552233 , v0=3.000000029999867 , spline0=27.18267609134673 , a0=0.0 , w0=0.0
2026-01-12 18:53:55,375 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:55,376 - INFO - integration_test - Dyn residual k=0: pred=[24.989349531888653, 8.292396771386688, 0.6322282912552233, 3.000000029999867, 27.482676094346715], ws=[24.989349529468527, 8.292396769613864, 0.6322282912552231, 3.0, 27.424891050119765], res=[2.4201263215672952e-09, 1.7728236656466834e-09, 2.220446049250313e-16, 2.9999867035002126e-08, 0.05778504422695008], res_norm=5.779e-02
2026-01-12 18:53:55,378 - INFO - integration_test - Dyn residual k=1: pred=[25.231363344642027, 8.469679913948475, 0.6322282912552231, 3.0, 27.724891050119766], ws=[25.231363344642027, 8.469679913948475, 0.6322282912552231, 3.0, 27.87179527059471], res=[0.0, 0.0, 0.0, 0.0, -0.14690422047494422], res_norm=1.469e-01
2026-01-12 18:53:55,379 - INFO - integration_test - Dyn residual k=2: pred=[25.473377159815527, 8.646963058283086, 0.6322282912552231, 3.0, 28.17179527059471], ws=[25.473377159815527, 8.646963058283086, 0.6322282912552231, 3.0, 28.279609977969876], res=[0.0, 0.0, 0.0, 0.0, -0.10781470737516585], res_norm=1.078e-01
2026-01-12 18:53:55,395 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,477 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:55,494 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,507 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:55,524 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,538 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:55,554 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,568 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:55,584 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,597 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,612 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,623 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,638 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,650 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,665 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,676 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,692 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,704 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,719 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,731 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,746 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:55,758 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:55,964 - INFO - integration_test - Step 250: MPC solve successful
2026-01-12 18:53:56,458 - INFO - integration_test - Step 250: Computed 6 numeric contouring constraints for visualization (s=27.180)
2026-01-12 18:53:56,458 - DEBUG - integration_test - Step 250: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:53:56,458 - INFO - integration_test - === Applying control at step 250 ===
2026-01-12 18:53:56,459 - INFO - integration_test -   Control dict from planner: {'a': -3.5933702174801653e-13, 'w': 0.013960194991304714}
2026-01-12 18:53:56,459 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:53:56,459 - INFO - integration_test -   Planner output success: True
2026-01-12 18:53:56,460 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:53:56,461 - INFO - integration_test - Step 250 completed in 1.240s
2026-01-12 18:53:56,476 - INFO - integration_test - Step 251 (contouring until path end)
2026-01-12 18:53:56,478 - DEBUG - integration_test - Syncing planner state at step 251: vehicle_state=[24.98922571  8.29256564  0.63362431  3.00000003 27.47999519]
2026-01-12 18:53:56,478 - DEBUG - integration_test - Step 251: Using propagated spline 27.4800 (close to path, dist=0.726m, drift=0.219m)
2026-01-12 18:53:56,479 - DEBUG - integration_test -   Set spline state to 27.4800
2026-01-12 18:53:56,480 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:56,558 - DEBUG - integration_test - Step 251: Checking path alignment: vehicle=(24.989, 8.293), path_start=(0.000, 0.000), dist=26.329m
2026-01-12 18:53:56,558 - WARNING - integration_test - Step 251: Vehicle is far from path start (dist=26.329m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:53:56,558 - INFO - integration_test - === Calling planner.solve_mpc() at step 251 ===
2026-01-12 18:53:56,622 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:53:56,634 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:53:56,634 - INFO - integration_test - Warmstart k=0: x0=24.98922570793541 , y0=8.29256564177982 , psi0=0.6336243107543538 , v0=3.000000029999831 , spline0=27.428211877331073 , a0=0.0 , w0=0.0
2026-01-12 18:53:56,634 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:53:56,635 - INFO - integration_test - Dyn residual k=0: pred=[25.230991799053843, 8.470186471035019, 0.6336243107543538, 3.000000029999831, 27.728211880331056], ws=[25.230991796636193, 8.470186469258822, 0.633624310754354, 3.0, 27.8765122541458], res=[2.4176500801331713e-09, 1.7761969672847044e-09, -2.220446049250313e-16, 2.999983106377613e-08, -0.14830037381474526], res_norm=1.483e-01
2026-01-12 18:53:56,636 - INFO - integration_test - Dyn residual k=1: pred=[25.472757885336975, 8.647807296737824, 0.633624310754354, 3.0, 28.176512254145802], ws=[25.472757885336975, 8.647807296737824, 0.633624310754354, 3.0, 28.285077546558483], res=[0.0, 0.0, 0.0, 0.0, -0.1085652924126812], res_norm=1.086e-01
2026-01-12 18:53:56,637 - INFO - integration_test - Dyn residual k=2: pred=[25.714523974037757, 8.825428124216826, 0.633624310754354, 3.0, 28.585077546558484], ws=[25.714523974037757, 8.825428124216826, 0.633624310754354, 3.0, 28.478153803842336], res=[0.0, 0.0, 0.0, 0.0, 0.10692374271614824], res_norm=1.069e-01
2026-01-12 18:53:56,653 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,739 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:56,757 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,770 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:56,788 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,801 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:56,818 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,831 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:53:56,847 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,858 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:56,873 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,885 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:56,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,912 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:56,927 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,938 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:56,953 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,966 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:56,981 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:56,993 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:53:57,007 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:53:57,019 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:08,356 - WARNING - integration_test - Step 251: MPC solve failed
2026-01-12 18:54:08,356 - WARNING - integration_test -   Consecutive MPC failures: 1/5
2026-01-12 18:54:08,848 - INFO - integration_test - Step 251: Computed 6 numeric contouring constraints for visualization (s=27.480)
2026-01-12 18:54:08,849 - DEBUG - integration_test - Step 251: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:54:08,849 - INFO - integration_test - === Applying control at step 251 ===
2026-01-12 18:54:08,849 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-12 18:54:08,849 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:54:08,849 - INFO - integration_test -   Planner output success: False
2026-01-12 18:54:08,849 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-12 18:54:08,850 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:54:08,851 - INFO - integration_test - Step 251 completed in 12.373s
2026-01-12 18:54:08,867 - INFO - integration_test - Step 252 (contouring until path end)
2026-01-12 18:54:08,868 - DEBUG - integration_test - Syncing planner state at step 252: vehicle_state=[25.2309918   8.47018647  0.63362431  3.00000003 27.77999519]
2026-01-12 18:54:08,869 - DEBUG - integration_test - Step 252: Using propagated spline 27.7800 (close to path, dist=0.683m, drift=0.087m)
2026-01-12 18:54:08,869 - DEBUG - integration_test -   Set spline state to 27.7800
2026-01-12 18:54:08,870 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:08,950 - DEBUG - integration_test - Step 252: Checking path alignment: vehicle=(25.231, 8.470), path_start=(0.000, 0.000), dist=26.615m
2026-01-12 18:54:08,950 - WARNING - integration_test - Step 252: Vehicle is far from path start (dist=26.615m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:54:08,950 - INFO - integration_test - === Calling planner.solve_mpc() at step 252 ===
2026-01-12 18:54:09,014 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:09,026 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:54:09,026 - INFO - integration_test - Warmstart k=0: x0=25.230991799053843 , y0=8.470186471035019 , psi0=0.6336243107543538 , v0=3.000000029999831 , spline0=27.870839219367703 , a0=0.0 , w0=0.0
2026-01-12 18:54:09,026 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:54:09,027 - INFO - integration_test - Dyn residual k=0: pred=[25.472757890172275, 8.647807300290218, 0.6336243107543538, 3.000000029999831, 28.170839222367686], ws=[25.472757887754625, 8.64780729851402, 0.633624310754354, 3.0, 28.27820447379764], res=[2.4176500801331713e-09, 1.7761969672847044e-09, -2.220446049250313e-16, 2.999983106377613e-08, -0.1073652514299539], res_norm=1.074e-01
2026-01-12 18:54:09,029 - INFO - integration_test - Dyn residual k=1: pred=[25.714523976455407, 8.825428125993023, 0.633624310754354, 3.0, 28.57820447379764], ws=[25.714523976455407, 8.825428125993023, 0.633624310754354, 3.0, 28.469639765241443], res=[0.0, 0.0, 0.0, 0.0, 0.10856470855619804], res_norm=1.086e-01
2026-01-12 18:54:09,030 - INFO - integration_test - Dyn residual k=2: pred=[25.95629006515619, 9.003048953472025, 0.633624310754354, 3.0, 28.769639765241443], ws=[25.95629006515619, 9.003048953472025, 0.633624310754354, 3.0, 28.70422526270393], res=[0.0, 0.0, 0.0, 0.0, 0.06541450253751435], res_norm=6.541e-02
2026-01-12 18:54:09,047 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,127 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:09,144 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,156 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:09,174 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,188 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:09,204 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,217 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:09,233 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,245 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,259 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,270 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,297 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,312 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,323 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,339 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,351 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,367 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,378 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,393 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:09,404 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:09,663 - INFO - integration_test - Step 252: MPC solve successful
2026-01-12 18:54:10,182 - INFO - integration_test - Step 252: Computed 6 numeric contouring constraints for visualization (s=27.780)
2026-01-12 18:54:10,182 - DEBUG - integration_test - Step 252: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:54:10,182 - INFO - integration_test - === Applying control at step 252 ===
2026-01-12 18:54:10,182 - INFO - integration_test -   Control dict from planner: {'a': -1.0721749070007244e-12, 'w': -0.042096118441983875}
2026-01-12 18:54:10,182 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:54:10,182 - INFO - integration_test -   Planner output success: True
2026-01-12 18:54:10,183 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:54:10,184 - INFO - integration_test - Step 252 completed in 1.316s
2026-01-12 18:54:10,201 - INFO - integration_test - Step 253 (contouring until path end)
2026-01-12 18:54:10,203 - DEBUG - integration_test - Syncing planner state at step 253: vehicle_state=[25.47313103  8.64729791  0.6294147   3.00000003 28.07999519]
2026-01-12 18:54:10,203 - DEBUG - integration_test - Step 253: Using propagated spline 28.0800 (close to path, dist=0.726m, drift=0.213m)
2026-01-12 18:54:10,203 - DEBUG - integration_test -   Set spline state to 28.0800
2026-01-12 18:54:10,204 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:10,282 - DEBUG - integration_test - Step 253: Checking path alignment: vehicle=(25.473, 8.647), path_start=(0.000, 0.000), dist=26.901m
2026-01-12 18:54:10,282 - WARNING - integration_test - Step 253: Vehicle is far from path start (dist=26.901m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:54:10,282 - INFO - integration_test - === Calling planner.solve_mpc() at step 253 ===
2026-01-12 18:54:10,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:10,353 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:54:10,353 - INFO - integration_test - Warmstart k=0: x0=25.473131032944767 , y0=8.647297905743676 , psi0=0.6294146989101553 , v0=3.000000029999724 , spline0=28.283163530798273 , a0=0.0 , w0=0.0
2026-01-12 18:54:10,353 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:54:10,354 - INFO - integration_test - Dyn residual k=0: pred=[25.71564269445648, 8.823899422811936, 0.6294146989101553, 3.000000029999724, 28.583163533798245], ws=[25.715642692031388, 8.823899421045937, 0.6294146989101552, 3.0, 28.475715453298815], res=[2.4250930152902583e-09, 1.7659989026697076e-09, 1.1102230246251565e-16, 2.9999724038276554e-08, 0.10744808049943089], res_norm=1.074e-01
2026-01-12 18:54:10,355 - INFO - integration_test - Dyn residual k=1: pred=[25.958154351118008, 9.000500936348198, 0.6294146989101552, 3.0, 28.775715453298815], ws=[25.958154351118008, 9.000500936348198, 0.6294146989101552, 3.0, 28.710767557967635], res=[0.0, 0.0, 0.0, 0.0, 0.06494789533117995], res_norm=6.495e-02
2026-01-12 18:54:10,356 - INFO - integration_test - Dyn residual k=2: pred=[26.20066601020463, 9.177102451650459, 0.6294146989101552, 3.0, 29.010767557967636], ws=[26.20066601020463, 9.177102451650459, 0.6294146989101552, 3.0, 29.105721330154285], res=[0.0, 0.0, 0.0, 0.0, -0.09495377218664913], res_norm=9.495e-02
2026-01-12 18:54:10,372 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,453 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:10,469 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,482 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:10,499 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,513 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:10,530 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,544 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:10,560 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,572 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,587 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,599 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,614 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,625 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,640 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,653 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,668 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,681 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,696 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,708 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,723 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:10,735 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:10,913 - INFO - integration_test - Step 253: MPC solve successful
2026-01-12 18:54:11,437 - INFO - integration_test - Step 253: Computed 6 numeric contouring constraints for visualization (s=28.080)
2026-01-12 18:54:11,437 - DEBUG - integration_test - Step 253: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:54:11,437 - INFO - integration_test - === Applying control at step 253 ===
2026-01-12 18:54:11,437 - INFO - integration_test -   Control dict from planner: {'a': -0.4329067097412494, 'w': 0.7999999947461041}
2026-01-12 18:54:11,438 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:54:11,438 - INFO - integration_test -   Planner output success: True
2026-01-12 18:54:11,439 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:54:11,439 - INFO - integration_test - Step 253 completed in 1.237s
2026-01-12 18:54:11,454 - INFO - integration_test - Step 254 (contouring until path end)
2026-01-12 18:54:11,455 - DEBUG - integration_test - Syncing planner state at step 254: vehicle_state=[25.70664477  8.83204099  0.7094147   2.95670936 28.37566613]
2026-01-12 18:54:11,456 - DEBUG - integration_test - Step 254: Using propagated spline 28.3757 (close to path, dist=0.674m, drift=0.097m)
2026-01-12 18:54:11,456 - DEBUG - integration_test -   Set spline state to 28.3757
2026-01-12 18:54:11,458 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:11,537 - DEBUG - integration_test - Step 254: Checking path alignment: vehicle=(25.707, 8.832), path_start=(0.000, 0.000), dist=27.182m
2026-01-12 18:54:11,537 - WARNING - integration_test - Step 254: Vehicle is far from path start (dist=27.182m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:54:11,537 - INFO - integration_test - === Calling planner.solve_mpc() at step 254 ===
2026-01-12 18:54:11,600 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:11,611 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:54:11,611 - INFO - integration_test - Warmstart k=0: x0=25.706644769285095 , y0=8.832040985185602 , psi0=0.7094146983847658 , v0=2.956709359025599 , spline0=28.47332303063261 , a0=0.0 , w0=0.0
2026-01-12 18:54:11,611 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:54:11,612 - INFO - integration_test - Dyn residual k=0: pred=[25.930983100684173, 9.024638013725955, 0.7094146983847658, 2.956709359025599, 28.76899396653517], ws=[25.930983100684173, 9.024638013725955, 0.7094146983847658, 2.956709359025599, 28.70636975240661], res=[0.0, 0.0, 0.0, 0.0, 0.06262421412856156], res_norm=6.262e-02
2026-01-12 18:54:11,613 - INFO - integration_test - Dyn residual k=1: pred=[26.15532143208325, 9.217235042266308, 0.7094146983847658, 2.956709359025599, 29.00204068830917], ws=[26.15532143208325, 9.217235042266308, 0.7094146983847658, 2.956709359025599, 29.10133892002247], res=[0.0, 0.0, 0.0, 0.0, -0.09929823171330199], res_norm=9.930e-02
2026-01-12 18:54:11,614 - INFO - integration_test - Dyn residual k=2: pred=[26.37965976348233, 9.409832070806662, 0.7094146983847658, 2.956709359025599, 29.39700985592503], ws=[26.37965976348233, 9.409832070806662, 0.7094146983847658, 2.956709359025599, 29.29765163446861], res=[0.0, 0.0, 0.0, 0.0, 0.09935822145641993], res_norm=9.936e-02
2026-01-12 18:54:11,630 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,711 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:11,728 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,741 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:11,758 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,771 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:11,787 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,800 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:11,817 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,828 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:11,843 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,854 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:11,869 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,881 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:11,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,908 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:11,925 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,937 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:11,952 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,964 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:11,979 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:11,990 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:12,140 - INFO - integration_test - Step 254: MPC solve successful
2026-01-12 18:54:12,677 - INFO - integration_test - Step 254: Computed 6 numeric contouring constraints for visualization (s=28.376)
2026-01-12 18:54:12,677 - DEBUG - integration_test - Step 254: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:54:12,677 - INFO - integration_test - === Applying control at step 254 ===
2026-01-12 18:54:12,678 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019548828, 'w': -0.0026140388235106893}
2026-01-12 18:54:12,678 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:54:12,678 - INFO - integration_test -   Planner output success: True
2026-01-12 18:54:12,679 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:54:12,680 - INFO - integration_test - Step 254 completed in 1.224s
2026-01-12 18:54:12,696 - INFO - integration_test - Step 255 (contouring until path end)
2026-01-12 18:54:12,698 - DEBUG - integration_test - Syncing planner state at step 255: vehicle_state=[25.9234197   9.01809611  0.70915329  2.75670936 28.65133707]
2026-01-12 18:54:12,698 - DEBUG - integration_test - Step 255: Using propagated spline 28.6513 (close to path, dist=0.735m, drift=0.427m)
2026-01-12 18:54:12,699 - DEBUG - integration_test -   Set spline state to 28.6513
2026-01-12 18:54:12,699 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:12,776 - DEBUG - integration_test - Step 255: Checking path alignment: vehicle=(25.923, 9.018), path_start=(0.000, 0.000), dist=27.447m
2026-01-12 18:54:12,776 - WARNING - integration_test - Step 255: Vehicle is far from path start (dist=27.447m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-12 18:54:12,776 - INFO - integration_test - === Calling planner.solve_mpc() at step 255 ===
2026-01-12 18:54:12,837 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-12 18:54:12,848 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-12 18:54:12,848 - INFO - integration_test - Warmstart k=0: x0=25.923419703163642 , y0=9.018096114491511 , psi0=0.7091532945024147 , v0=2.7567093570707164 , spline0=28.709038042913235 , a0=0.0 , w0=0.0
2026-01-12 18:54:12,848 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-12 18:54:12,850 - INFO - integration_test - Dyn residual k=0: pred=[26.132630102053568, 9.197610664848662, 0.7091532945024147, 2.7567093570707164, 28.984708978620308], ws=[26.132630102053568, 9.197610664848662, 0.7091532945024146, 2.7567093570707164, 28.86842410310755], res=[0.0, 0.0, 1.1102230246251565e-16, 0.0, 0.11628487551275768], res_norm=1.163e-01
2026-01-12 18:54:12,850 - INFO - integration_test - Dyn residual k=1: pred=[26.341840500943494, 9.377125215205814, 0.7091532945024146, 2.7567093570707164, 29.144095038814623], ws=[26.341840500943494, 9.377125215205814, 0.7091532945024146, 2.7567093570707164, 29.296547334550546], res=[0.0, 0.0, 0.0, 0.0, -0.15245229573592312], res_norm=1.525e-01
2026-01-12 18:54:12,851 - INFO - integration_test - Dyn residual k=2: pred=[26.55105089983342, 9.556639765562965, 0.7091532945024146, 2.7567093570707164, 29.57221827025762], ws=[26.55105089983342, 9.556639765562965, 0.7091532945024146, 2.7567093570707164, 29.472788017138587], res=[0.0, 0.0, 0.0, 0.0, 0.09943025311903142], res_norm=9.943e-02
2026-01-12 18:54:12,867 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:12,956 - INFO - integration_test - Stage 0: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:12,974 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:12,987 - INFO - integration_test - Stage 1: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:13,004 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,017 - INFO - integration_test - Stage 2: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:13,034 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,048 - INFO - integration_test - Stage 3: constraints count=3 (linearized=0, contouring=0, other=3)
2026-01-12 18:54:13,065 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,077 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,092 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,104 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,119 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,131 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,146 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,158 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,173 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,185 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,201 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,213 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,228 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-12 18:54:13,239 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-12 18:54:13,397 - INFO - integration_test - Step 255: MPC solve successful
2026-01-12 18:54:13,930 - INFO - integration_test - Step 255: Computed 6 numeric contouring constraints for visualization (s=28.651)
2026-01-12 18:54:13,931 - DEBUG - integration_test - Step 255: Captured 6 contouring constraint halfspaces for visualization
2026-01-12 18:54:13,931 - INFO - integration_test - === Applying control at step 255 ===
2026-01-12 18:54:13,931 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019974974, 'w': -0.6982891651836532}
2026-01-12 18:54:13,931 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-12 18:54:13,931 - INFO - integration_test -   Planner output success: True
2026-01-12 18:54:13,932 - WARNING - integration_test -   Error using dynamics model discrete_dynamics: .../casadi/core/matrix_impl.hpp:1386: Dimension mismatch for (x+y), x is 5x1, while y is 4x1, attempting symbolic_dynamics fallback
2026-01-12 18:54:13,933 - INFO - integration_test - Goal reached at step 255!
2026-01-12 18:54:13,933 - INFO - integration_test - Step 255 completed in 1.235s
2026-01-12 18:54:13,950 - INFO - integration_test - Goal reached at step 255, added 3 extra frames for visualization
2026-01-12 18:54:13,951 - INFO - integration_test - Saving test results...
2026-01-12 18:54:13,951 - INFO - integration_test - Saved 106 vehicle states to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-12 18:54:13,952 - INFO - integration_test - Saved obstacle summary to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-12 18:54:13,952 - INFO - integration_test - Saved 113 states for obstacle 0 to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-12 18:54:13,952 - INFO - integration_test - Saved 113 states for obstacle 1 to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-12 18:54:13,953 - INFO - integration_test - Saved 113 states for obstacle 2 to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-12 18:54:14,978 - INFO - integration_test - Saved Safe Horizon diagnostic output to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle
2026-01-12 18:54:14,978 - INFO - integration_test - Saved state history: 106 vehicle states, 3 obstacles
2026-01-12 18:54:14,978 - INFO - integration_test - Creating animation...
2026-01-12 18:54:15,029 - DEBUG - integration_test - Creating animation with 106 frames (range: 0 to 105)
2026-01-12 18:54:15,030 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-12 18:54:15,092 - INFO - integration_test - Frame 0: Safe Horizon module has 139 scenarios after update
2026-01-12 18:54:15,092 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-12 18:54:15,092 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 30 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-12 18:54:15,121 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-12 18:54:15,121 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-12 18:54:15,185 - INFO - integration_test - Frame 0: Safe Horizon module has 135 scenarios after update
2026-01-12 18:54:15,185 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-12 18:54:15,185 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 30 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-12 18:54:15,212 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-12 18:54:15,325 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-12 18:54:15,392 - INFO - integration_test - Frame 1: Safe Horizon module has 134 scenarios after update
2026-01-12 18:54:15,392 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-12 18:54:15,392 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 30 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-12 18:54:15,419 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-12 18:54:16,053 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-12 18:54:16,119 - INFO - integration_test - Frame 2: Safe Horizon module has 134 scenarios after update
2026-01-12 18:54:16,119 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-12 18:54:16,119 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 30 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-12 18:54:16,148 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-12 18:54:40,150 - INFO - integration_test - Saved animation with 106 frames at 10.00 fps to test_outputs/20260112_185029_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 10.60s, size: 2293635 bytes)
2026-01-12 18:54:40,188 - INFO - integration_test - Animation created successfully
2026-01-12 18:54:40,189 - WARNING - integration_test - Test exited early due to solver failures, but files were saved
