2026-01-17 17:13:52,886 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-17 17:13:52,886 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-17 17:13:52,886 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-17 17:13:52,886 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-17 17:13:52,886 - INFO - integration_test - Creating objective module: contouring
2026-01-17 17:13:52,892 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-17 17:13:52,892 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-17 17:13:52,892 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-17 17:13:52,897 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-17 17:13:52,897 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-17 17:13:52,903 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-17 17:13:52,903 - INFO - integration_test - Created 2 constraint module(s)
2026-01-17 17:13:52,917 - INFO - integration_test - Setting solver on all modules...
2026-01-17 17:13:52,917 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-17 17:13:52,917 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-17 17:13:52,917 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-17 17:13:52,917 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-17 17:13:52,917 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-17 17:13:52,917 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-17 17:13:52,918 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-17 17:13:52,918 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-17 17:13:52,918 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-17 17:13:52,918 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-17 17:13:52,918 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-17 17:13:52,918 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-17 17:13:52,918 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-17 17:13:52,919 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-17 17:13:52,919 - INFO - integration_test - Added spline variable: 0.0000
2026-01-17 17:13:52,919 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-17 17:13:52,919 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-17 17:13:52,919 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-17 17:13:52,920 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-17 17:13:52,920 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-17 17:13:52,921 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:13:52,935 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-17 17:13:52,935 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-17 17:13:53,687 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:13:53,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:13:53,716 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-17 17:13:53,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:13:53,718 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-17 17:13:53,719 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:13:53,720 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:13:53,735 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,456 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,469 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,480 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,494 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,505 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,518 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,528 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,542 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,553 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,566 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,577 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,591 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,602 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,615 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,626 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,640 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,651 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,664 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,675 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:54,688 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:54,699 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:55,134 - INFO - integration_test - Step 0: MPC solve successful
2026-01-17 17:13:55,344 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-17 17:13:55,344 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:13:55,344 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-17 17:13:55,344 - INFO - integration_test - === Applying control at step 0 ===
2026-01-17 17:13:55,344 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999988899613, 'w': 0.799999786350203}
2026-01-17 17:13:55,344 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:13:55,344 - INFO - integration_test -   Planner output success: True
2026-01-17 17:13:55,345 - INFO - integration_test - Step 0 completed in 2.426s
2026-01-17 17:13:55,359 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-17 17:13:55,360 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.07999998 1.2        0.12      ]
2026-01-17 17:13:55,360 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-17 17:13:55,360 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-17 17:13:55,361 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:13:56,134 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-17 17:13:56,134 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-17 17:13:56,817 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:13:56,841 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:13:56,841 - INFO - integration_test - Warmstart k=0: x0=0.10987737534112392 , y0=0.004530843844085214 , psi0=0.0799999786350203 , v0=1.199999999888996 , spline0=0.11999999998889961 , a0=0.0 , w0=0.0
2026-01-17 17:13:56,841 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:13:56,842 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358029125844, 0.014120604563901063, 0.0799999786350203, 1.199999999888996, 0.23999999997779922], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358029125844, 0.014120604563901063, 0.0799999786350203, 1.199999999888996, 0.23999999997779922], res_norm=1.248e+00
2026-01-17 17:13:56,843 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:13:56,844 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:13:56,858 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,578 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,593 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,604 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,619 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,629 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,643 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,653 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,667 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,677 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,691 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,701 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,715 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,726 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,740 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,750 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,764 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,775 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,789 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,800 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,814 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:13:57,826 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:13:57,961 - INFO - integration_test - Step 1: MPC solve successful
2026-01-17 17:13:58,001 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-17 17:13:58,001 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:13:58,001 - INFO - integration_test - === Applying control at step 1 ===
2026-01-17 17:13:58,001 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193908716, 'w': 0.800000005107886}
2026-01-17 17:13:58,001 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:13:58,001 - INFO - integration_test -   Planner output success: True
2026-01-17 17:13:58,003 - INFO - integration_test - Step 1 completed in 2.643s
2026-01-17 17:13:58,013 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-17 17:13:58,014 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999998 1.4        0.26      ]
2026-01-17 17:13:58,015 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-17 17:13:58,015 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-17 17:13:58,015 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:13:58,773 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-17 17:13:58,773 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-17 17:13:59,454 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:13:59,477 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:13:59,477 - INFO - integration_test - Warmstart k=0: x0=0.23889212826901968 , y0=0.020221617798409124 , psi0=0.1599999791458089 , v0=1.4000000018280834 , spline0=0.26000000017170793 , a0=0.0 , w0=0.0
2026-01-17 17:13:59,477 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:13:59,478 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039485872241, 0.04252616387123255, 0.1599999791458089, 1.4000000018280834, 0.40000000035451627], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039485872241, 0.04252616387123255, 0.1599999791458089, 1.4000000018280834, 0.40000000035451627], res_norm=1.513e+00
2026-01-17 17:13:59,479 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:13:59,480 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:13:59,494 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,216 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,229 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,239 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,264 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,277 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,288 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,302 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,312 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,326 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,336 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,350 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,361 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,375 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,385 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,399 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,409 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,423 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,434 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,448 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:00,458 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:00,580 - INFO - integration_test - Step 2: MPC solve successful
2026-01-17 17:14:00,621 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-17 17:14:00,621 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:00,621 - INFO - integration_test - === Applying control at step 2 ===
2026-01-17 17:14:00,621 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999735443186, 'w': 0.7999996669909162}
2026-01-17 17:14:00,621 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:00,621 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:00,623 - INFO - integration_test - Step 2 completed in 2.609s
2026-01-17 17:14:00,635 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-17 17:14:00,635 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999995 1.6        0.42      ]
2026-01-17 17:14:00,636 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.261m, drift=0.010m)
2026-01-17 17:14:00,636 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-17 17:14:00,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:01,388 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-17 17:14:01,388 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-17 17:14:02,086 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:02,108 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:02,108 - INFO - integration_test - Warmstart k=0: x0=0.38583643654372335 , y0=0.05014470685311419 , psi0=0.23999994584490053 , v0=1.5999999991825153 , spline0=0.42000000008995947 , a0=0.0 , w0=0.0
2026-01-17 17:14:02,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:02,109 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505145002919, 0.0881771186455591, 0.23999994584490053, 1.5999999991825153, 0.5800000000082111], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505145002919, 0.0881771186455591, 0.23999994584490053, 1.5999999991825153, 0.5800000000082111], res_norm=1.804e+00
2026-01-17 17:14:02,110 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:02,111 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:02,125 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:02,913 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:02,927 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:02,939 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:02,954 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:02,965 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:02,980 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:02,991 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,006 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,017 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,031 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,043 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,057 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,069 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,096 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,111 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,123 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,138 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,152 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,166 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:03,178 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:03,311 - INFO - integration_test - Step 3: MPC solve successful
2026-01-17 17:14:03,354 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-17 17:14:03,355 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:03,355 - INFO - integration_test - === Applying control at step 3 ===
2026-01-17 17:14:03,355 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000175709363, 'w': 0.7999999916656917}
2026-01-17 17:14:03,355 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:03,355 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:03,356 - INFO - integration_test - Step 3 completed in 2.721s
2026-01-17 17:14:03,370 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-17 17:14:03,371 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724074 0.31999995 1.8        0.6       ]
2026-01-17 17:14:03,371 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.325m, drift=0.190m)
2026-01-17 17:14:03,371 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-17 17:14:03,372 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:04,199 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-17 17:14:04,199 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-17 17:14:04,941 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:04,964 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:04,964 - INFO - integration_test - Warmstart k=0: x0=0.5491354640010886 , y0=0.09724073830380289 , psi0=0.3199999450114697 , v0=1.8000000009396089 , spline0=0.6000000001839203 , a0=0.0 , w0=0.0
2026-01-17 17:14:04,965 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:04,966 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978424586782, 0.15386270984879005, 0.3199999450114697, 1.8000000009396089, 0.7800000002778812], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978424586782, 0.15386270984879005, 0.3199999450114697, 1.8000000009396089, 0.7800000002778812], res_norm=2.120e+00
2026-01-17 17:14:04,967 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:04,968 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:04,983 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,770 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,785 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,796 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,811 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,822 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,837 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,848 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,863 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,874 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,890 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,902 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,916 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,927 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,942 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,953 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,966 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:05,977 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:05,991 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:06,002 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:06,016 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:06,027 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:06,163 - INFO - integration_test - Step 4: MPC solve successful
2026-01-17 17:14:06,210 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-17 17:14:06,210 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:06,210 - INFO - integration_test - === Applying control at step 4 ===
2026-01-17 17:14:06,210 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000181059496, 'w': 0.7999999888625329}
2026-01-17 17:14:06,210 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:06,210 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:06,211 - INFO - integration_test - Step 4 completed in 2.841s
2026-01-17 17:14:06,225 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-17 17:14:06,226 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427974 0.39999994 2.         0.8       ]
2026-01-17 17:14:06,227 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.443m, drift=0.019m)
2026-01-17 17:14:06,227 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-17 17:14:06,227 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:07,054 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-17 17:14:07,054 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-17 17:14:07,755 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:07,778 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:07,778 - INFO - integration_test - Warmstart k=0: x0=0.7268614945740715 , y0=0.1642797396070865 , psi0=0.399999943897723 , v0=2.000000002750204 , spline0=0.8000000004589407 , a0=0.0 , w0=0.0
2026-01-17 17:14:07,778 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:07,779 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736979974099, 0.24216339784119065, 0.399999943897723, 2.000000002750204, 1.0000000007339611], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736979974099, 0.24216339784119065, 0.399999943897723, 2.000000002750204, 1.0000000007339611], res_norm=2.459e+00
2026-01-17 17:14:07,779 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:07,780 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:07,795 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,540 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,554 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,566 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,581 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,592 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,607 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,618 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,633 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,644 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,659 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,670 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,685 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,696 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,710 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,722 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,736 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,747 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,762 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,774 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,789 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:08,801 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:08,934 - INFO - integration_test - Step 5: MPC solve successful
2026-01-17 17:14:08,980 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-17 17:14:08,980 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:08,980 - INFO - integration_test - === Applying control at step 5 ===
2026-01-17 17:14:08,980 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016389004, 'w': 0.7999999709579965}
2026-01-17 17:14:08,980 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:08,981 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:08,982 - INFO - integration_test - Step 5 completed in 2.756s
2026-01-17 17:14:08,995 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-17 17:14:08,996 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382377 0.47999994 2.2        1.02      ]
2026-01-17 17:14:08,996 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.471m, drift=0.201m)
2026-01-17 17:14:08,996 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-17 17:14:08,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:09,776 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-17 17:14:09,776 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-17 17:14:10,492 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:10,517 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:10,517 - INFO - integration_test - Warmstart k=0: x0=0.9167519132086721 , y0=0.2538237684511268 , psi0=0.4799999409935226 , v0=2.2000000043891044 , spline0=1.0200000008978511 , a0=0.0 , w0=0.0
2026-01-17 17:14:10,517 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:10,519 - INFO - integration_test - Dyn residual k=0: pred=[1.1118908026039773, 0.3554151757584744, 0.4799999409935226, 2.2000000043891044, 1.2400000013367616], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118908026039773, 0.3554151757584744, 0.4799999409935226, 2.2000000043891044, 1.2400000013367616], res_norm=2.823e+00
2026-01-17 17:14:10,520 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:10,520 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:10,535 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,346 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,361 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,372 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,388 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,400 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,416 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,428 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,442 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,453 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,477 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,490 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,500 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,513 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,524 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,538 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,549 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,576 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,590 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:11,601 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:11,744 - INFO - integration_test - Step 6: MPC solve successful
2026-01-17 17:14:11,793 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-17 17:14:11,794 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:11,794 - INFO - integration_test - === Applying control at step 6 ===
2026-01-17 17:14:11,794 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016983724, 'w': 0.7999999561116927}
2026-01-17 17:14:11,794 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:11,794 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:11,795 - INFO - integration_test - Step 6 completed in 2.799s
2026-01-17 17:14:11,809 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-17 17:14:11,810 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.3681914  0.55999994 2.40000001 1.26      ]
2026-01-17 17:14:11,811 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.559m, drift=0.031m)
2026-01-17 17:14:11,811 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-17 17:14:11,811 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:12,614 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-17 17:14:12,614 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-17 17:14:13,314 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:13,337 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:13,337 - INFO - integration_test - Warmstart k=0: x0=1.116230879831132 , y0=0.3681913953237588 , psi0=0.5599999366046919 , v0=2.4000000060874767 , spline0=1.2600000015065989 , a0=0.0 , w0=0.0
2026-01-17 17:14:13,337 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:13,338 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721150720472, 0.49567607025724914, 0.5599999366046919, 2.4000000060874767, 1.5000000021153466], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721150720472, 0.49567607025724914, 0.5599999366046919, 2.4000000060874767, 1.5000000021153466], res_norm=3.211e+00
2026-01-17 17:14:13,339 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:13,340 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:13,354 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,111 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,125 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,136 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,150 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,161 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,176 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,187 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,202 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,213 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,227 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,238 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,253 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,263 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,278 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,290 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,316 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,342 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,357 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:14,368 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:14,525 - INFO - integration_test - Step 7: MPC solve successful
2026-01-17 17:14:14,580 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-17 17:14:14,580 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:14,580 - INFO - integration_test - === Applying control at step 7 ===
2026-01-17 17:14:14,580 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000166220655, 'w': 0.7999999305784972}
2026-01-17 17:14:14,580 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:14,580 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:14,582 - INFO - integration_test - Step 7 completed in 2.772s
2026-01-17 17:14:14,595 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-17 17:14:14,596 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243451 0.50942438 0.63999993 2.60000001 1.52      ]
2026-01-17 17:14:14,597 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.577m, drift=0.291m)
2026-01-17 17:14:14,597 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-17 17:14:14,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:15,475 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-17 17:14:15,475 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-17 17:14:16,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:16,214 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:16,214 - INFO - integration_test - Warmstart k=0: x0=1.3224345129616522 , y0=0.5094243778658317 , psi0=0.6399999296625416 , v0=2.600000007749683 , spline0=1.5200000022815672 , a0=0.0 , w0=0.0
2026-01-17 17:14:16,214 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:16,215 - INFO - integration_test - Dyn residual k=0: pred=[1.530979421554521, 0.6646951784143428, 0.6399999296625416, 2.600000007749683, 1.7800000030565355], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.530979421554521, 0.6646951784143428, 0.6399999296625416, 2.600000007749683, 1.7800000030565355], res_norm=3.623e+00
2026-01-17 17:14:16,216 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:16,217 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:16,233 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,007 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,021 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,034 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,048 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,060 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,075 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,087 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,102 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,112 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,126 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,138 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,154 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,165 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,181 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,194 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,212 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,225 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,241 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,253 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,267 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:17,279 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:17,427 - INFO - integration_test - Step 8: MPC solve successful
2026-01-17 17:14:17,478 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-17 17:14:17,478 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:17,478 - INFO - integration_test - === Applying control at step 8 ===
2026-01-17 17:14:17,478 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198716847, 'w': 0.7999999675709472}
2026-01-17 17:14:17,478 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:17,478 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:17,479 - INFO - integration_test - Step 8 completed in 2.883s
2026-01-17 17:14:17,493 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-17 17:14:17,494 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223937 0.67925686 0.71999993 2.80000001 1.8       ]
2026-01-17 17:14:17,495 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.161m)
2026-01-17 17:14:17,495 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-17 17:14:17,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:18,351 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-17 17:14:18,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-17 17:14:19,065 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:19,087 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:19,087 - INFO - integration_test - Warmstart k=0: x0=1.5322393654461135 , y0=0.6792568614596575 , psi0=0.7199999264196363 , v0=2.8000000097368516 , spline0=1.8000000032552523 , a0=0.0 , w0=0.0
2026-01-17 17:14:19,087 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:19,088 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449839225595, 0.8638845547646236, 0.7199999264196363, 2.8000000097368516, 2.0800000042289373], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.7427449839225595, 0.8638845547646236, 0.7199999264196363, 2.8000000097368516, 2.0800000042289373], res_norm=4.058e+00
2026-01-17 17:14:19,089 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:19,090 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:19,104 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:19,863 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:19,878 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:19,889 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:19,904 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:19,915 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:19,929 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:19,941 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:19,956 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:19,968 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:19,982 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:19,994 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:20,009 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:20,020 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:20,035 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:20,046 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:20,061 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:20,073 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:20,087 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:20,099 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:20,113 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:20,125 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:20,283 - INFO - integration_test - Step 9: MPC solve successful
2026-01-17 17:14:20,334 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-17 17:14:20,335 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:20,335 - INFO - integration_test - === Applying control at step 9 ===
2026-01-17 17:14:20,335 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197886294, 'w': 0.800000002281693}
2026-01-17 17:14:20,335 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:20,335 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:20,336 - INFO - integration_test - Step 9 completed in 2.842s
2026-01-17 17:14:20,349 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-17 17:14:20,351 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229395 0.87908742 0.79999993 3.00000001 2.1       ]
2026-01-17 17:14:20,352 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.628m, drift=0.052m)
2026-01-17 17:14:20,352 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-17 17:14:20,352 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:21,136 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-17 17:14:21,136 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-17 17:14:21,824 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:21,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:21,846 - INFO - integration_test - Warmstart k=0: x0=1.7422939458065452 , y0=0.8790874153924348 , psi0=0.7999999266478056 , v0=3.0000000117157146 , spline0=2.100000004426824 , a0=0.0 , w0=0.0
2026-01-17 17:14:21,846 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:21,847 - INFO - integration_test - Dyn residual k=0: pred=[1.951305975212829, 1.0942942281712351, 0.7999999266478056, 3.0000000117157146, 2.4000000055983954], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.951305975212829, 1.0942942281712351, 0.7999999266478056, 3.0000000117157146, 2.4000000055983954], res_norm=4.517e+00
2026-01-17 17:14:21,848 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:21,849 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:21,863 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,589 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,603 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,613 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,627 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,637 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,650 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,661 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,674 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,684 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,708 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,721 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,731 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,744 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,754 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,768 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,778 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,791 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,801 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,814 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:22,825 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:22,953 - INFO - integration_test - Step 10: MPC solve successful
2026-01-17 17:14:23,079 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-17 17:14:23,079 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:23,079 - INFO - integration_test - === Applying control at step 10 ===
2026-01-17 17:14:23,079 - INFO - integration_test -   Control dict from planner: {'a': 1.6110274581524702e-07, 'w': 0.7999975803216917}
2026-01-17 17:14:23,079 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:23,079 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:23,081 - INFO - integration_test - Step 10 completed in 2.730s
2026-01-17 17:14:23,094 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-17 17:14:23,095 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247945 1.10242075 0.87999968 3.00000003 2.40000001]
2026-01-17 17:14:23,095 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.588m, drift=0.352m)
2026-01-17 17:14:23,096 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-17 17:14:23,096 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:23,784 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-17 17:14:23,785 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-17 17:14:24,477 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:24,499 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:24,499 - INFO - integration_test - Warmstart k=0: x0=1.9424794486880355 , y0=1.1024207508125234 , psi0=0.8799996846799748 , v0=3.000000027825989 , spline0=2.4000000072094227 , a0=0.0 , w0=0.0
2026-01-17 17:14:24,499 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:24,500 - INFO - integration_test - Dyn residual k=0: pred=[2.133624866629358, 1.333642356354905, 0.8799996846799748, 3.000000027825989, 2.7000000099920216], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.133624866629358, 1.333642356354905, 0.8799996846799748, 3.000000027825989, 2.7000000099920216], res_norm=4.837e+00
2026-01-17 17:14:24,501 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:24,502 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:24,515 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,236 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,250 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,261 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,274 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,285 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,298 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,309 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,322 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,332 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,346 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,357 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,371 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,381 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,395 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,405 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,419 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,429 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,442 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,453 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,466 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:25,476 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:25,647 - INFO - integration_test - Step 11: MPC solve successful
2026-01-17 17:14:25,775 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-17 17:14:25,775 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:25,775 - INFO - integration_test - === Applying control at step 11 ===
2026-01-17 17:14:25,775 - INFO - integration_test -   Control dict from planner: {'a': 2.1724094479161132e-08, 'w': 0.06320073881851197}
2026-01-17 17:14:25,775 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:25,775 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:25,776 - INFO - integration_test - Step 11 completed in 2.681s
2026-01-17 17:14:25,789 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-17 17:14:25,790 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13289293 1.33424484 0.88631976 3.00000003 2.70000001]
2026-01-17 17:14:25,790 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.540m, drift=0.242m)
2026-01-17 17:14:25,790 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-17 17:14:25,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:26,486 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.133, 1.334), path_start=(0.000, 0.000), dist=2.516m
2026-01-17 17:14:26,486 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-17 17:14:27,182 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:27,205 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:27,205 - INFO - integration_test - Warmstart k=0: x0=2.1328929278203725 , y0=1.3342448417197013 , psi0=0.886319758561826 , v0=3.0000000299983984 , spline0=2.7000000102092625 , a0=0.0 , w0=0.0
2026-01-17 17:14:27,205 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:27,206 - INFO - integration_test - Dyn residual k=0: pred=[2.3225732005174544, 1.566669874686171, 0.886319758561826, 3.0000000299983984, 3.0000000132091023], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3225732005174544, 1.566669874686171, 0.886319758561826, 3.0000000299983984, 3.0000000132091023], res_norm=5.161e+00
2026-01-17 17:14:27,206 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:27,207 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:27,221 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,001 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,017 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,029 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,045 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,056 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,070 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,081 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,094 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,105 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,118 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,129 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,142 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,152 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,166 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,177 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,190 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,201 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,215 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,226 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,239 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:28,250 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:28,471 - INFO - integration_test - Step 12: MPC solve successful
2026-01-17 17:14:28,603 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-17 17:14:28,603 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:28,603 - INFO - integration_test - === Applying control at step 12 ===
2026-01-17 17:14:28,603 - INFO - integration_test -   Control dict from planner: {'a': -6.658520669343723e-06, 'w': -0.23112732832307298}
2026-01-17 17:14:28,603 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:28,603 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:28,604 - INFO - integration_test - Step 12 completed in 2.815s
2026-01-17 17:14:28,617 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-17 17:14:28,619 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.32524216 1.56445724 0.86320703 2.99999936 2.99999995]
2026-01-17 17:14:28,620 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.515m, drift=0.132m)
2026-01-17 17:14:28,620 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-17 17:14:28,620 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:29,348 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.325, 1.564), path_start=(0.000, 0.000), dist=2.803m
2026-01-17 17:14:29,349 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-17 17:14:30,056 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:30,079 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:30,079 - INFO - integration_test - Warmstart k=0: x0=2.3252421610026377 , y0=1.5644572391277913 , psi0=0.8632070257295187 , v0=2.9999993641463316 , spline0=2.9999999466238956 , a0=0.0 , w0=0.0
2026-01-17 17:14:30,079 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:30,080 - INFO - integration_test - Dyn residual k=0: pred=[2.5202432286431216, 1.7924365045618553, 0.8632070257295187, 2.9999993641463316, 3.2999998830385286], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5202432286431216, 1.7924365045618553, 0.8632070257295187, 2.9999993641463316, 3.2999998830385286], res_norm=5.495e+00
2026-01-17 17:14:30,080 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:30,081 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:30,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,812 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,836 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,859 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,873 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,883 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,896 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,907 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,920 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,930 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,943 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,954 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,967 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:30,978 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:30,991 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:31,001 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:31,015 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:31,026 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:31,039 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:31,049 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:31,176 - INFO - integration_test - Step 13: MPC solve successful
2026-01-17 17:14:31,227 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-17 17:14:31,227 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:31,227 - INFO - integration_test - === Applying control at step 13 ===
2026-01-17 17:14:31,227 - INFO - integration_test -   Control dict from planner: {'a': 6.6584761143217195e-06, 'w': -0.1379711675973596}
2026-01-17 17:14:31,228 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:31,228 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:31,229 - INFO - integration_test - Step 13 completed in 2.610s
2026-01-17 17:14:31,242 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-17 17:14:31,243 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.52180977 1.79108409 0.84940991 3.00000003 3.29999995]
2026-01-17 17:14:31,243 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.510m, drift=0.432m)
2026-01-17 17:14:31,244 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-17 17:14:31,244 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:32,014 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.522, 1.791), path_start=(0.000, 0.000), dist=3.093m
2026-01-17 17:14:32,014 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-17 17:14:32,701 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:32,723 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:32,723 - INFO - integration_test - Warmstart k=0: x0=2.5218097671518356 , y0=1.7910840917851139 , psi0=0.8494099089697827 , v0=3.000000029993943 , spline0=3.29999994962329 , a0=0.0 , w0=0.0
2026-01-17 17:14:32,724 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:32,724 - INFO - integration_test - Dyn residual k=0: pred=[2.7199376755673126, 2.0163513413056444, 0.8494099089697827, 3.000000029993943, 3.5999999526226842], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.7199376755673126, 2.0163513413056444, 0.8494099089697827, 3.000000029993943, 3.5999999526226842], res_norm=5.843e+00
2026-01-17 17:14:32,725 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:32,726 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:32,740 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,456 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,470 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,480 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,493 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,503 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,516 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,526 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,540 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,550 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,563 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,573 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,586 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,597 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,609 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,620 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,633 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,643 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,657 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,667 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,680 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:33,690 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:33,809 - INFO - integration_test - Step 14: MPC solve successful
2026-01-17 17:14:33,946 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-17 17:14:33,946 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:33,946 - INFO - integration_test - === Applying control at step 14 ===
2026-01-17 17:14:33,946 - INFO - integration_test -   Control dict from planner: {'a': -2.8150925548738586e-09, 'w': -0.15612987908078144}
2026-01-17 17:14:33,946 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:33,946 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:33,947 - INFO - integration_test - Step 14 completed in 2.705s
2026-01-17 17:14:33,960 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-17 17:14:33,961 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.72168814 2.01479554 0.83379692 3.00000003 3.59999995]
2026-01-17 17:14:33,961 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.451m, drift=0.322m)
2026-01-17 17:14:33,961 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-17 17:14:33,962 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:34,650 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.722, 2.015), path_start=(0.000, 0.000), dist=3.386m
2026-01-17 17:14:34,650 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-17 17:14:35,357 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:35,380 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:35,380 - INFO - integration_test - Warmstart k=0: x0=2.7216881379045805 , y0=2.0147955364510417 , psi0=0.8337969210617046 , v0=3.000000029712434 , spline0=3.5999999525945334 , a0=0.0 , w0=0.0
2026-01-17 17:14:35,380 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:35,381 - INFO - integration_test - Dyn residual k=0: pred=[2.9233088503816975, 2.2369420873649952, 0.8337969210617046, 3.000000029712434, 3.899999955565777], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.9233088503816975, 2.2369420873649952, 0.8337969210617046, 3.000000029712434, 3.899999955565777], res_norm=6.201e+00
2026-01-17 17:14:35,382 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:35,383 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:35,397 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,114 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,128 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,138 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,152 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,162 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,175 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,185 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,198 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,209 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,222 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,232 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,246 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,257 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,271 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,281 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,294 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,305 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,319 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,329 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,342 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:36,352 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:36,478 - INFO - integration_test - Step 15: MPC solve successful
2026-01-17 17:14:36,621 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-17 17:14:36,622 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:36,622 - INFO - integration_test - === Applying control at step 15 ===
2026-01-17 17:14:36,622 - INFO - integration_test -   Control dict from planner: {'a': 2.510583731173691e-09, 'w': -0.12500115490644612}
2026-01-17 17:14:36,622 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:36,622 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:36,623 - INFO - integration_test - Step 15 completed in 2.662s
2026-01-17 17:14:36,637 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-17 17:14:36,638 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.92469201 2.23567618 0.82129681 3.00000003 3.89999996]
2026-01-17 17:14:36,648 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.417m, drift=0.213m)
2026-01-17 17:14:36,648 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-17 17:14:36,649 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:37,340 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.925, 2.236), path_start=(0.000, 0.000), dist=3.681m
2026-01-17 17:14:37,340 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-17 17:14:38,019 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:38,041 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:38,041 - INFO - integration_test - Warmstart k=0: x0=2.92469201048894 , y0=2.23567617756063 , psi0=0.82129680557106 , v0=3.000000029963492 , spline0=3.8999999555908826 , a0=0.0 , w0=0.0
2026-01-17 17:14:38,041 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:38,042 - INFO - integration_test - Dyn residual k=0: pred=[3.129073756506539, 2.455285156640737, 0.82129680557106, 3.000000029963492, 4.199999958587232], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.129073756506539, 2.455285156640737, 0.82129680557106, 3.000000029963492, 4.199999958587232], res_norm=6.568e+00
2026-01-17 17:14:38,043 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:38,043 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:38,056 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,770 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,784 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,794 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,807 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,817 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,830 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,841 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,854 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,864 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,877 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,887 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,900 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,910 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,924 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,934 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,948 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,958 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,972 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:38,983 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:38,996 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:39,006 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:39,136 - INFO - integration_test - Step 16: MPC solve successful
2026-01-17 17:14:39,280 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-17 17:14:39,280 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:39,280 - INFO - integration_test - === Applying control at step 16 ===
2026-01-17 17:14:39,280 - INFO - integration_test -   Control dict from planner: {'a': -6.944473643993217e-07, 'w': -0.1816395555052068}
2026-01-17 17:14:39,280 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:39,281 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:39,282 - INFO - integration_test - Step 16 completed in 2.644s
2026-01-17 17:14:39,294 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-17 17:14:39,295 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.13105694 2.45341694 0.80313285 2.99999996 4.19999995]
2026-01-17 17:14:39,296 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.416m, drift=0.103m)
2026-01-17 17:14:39,296 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-17 17:14:39,296 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:39,981 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.131, 2.453), path_start=(0.000, 0.000), dist=3.978m
2026-01-17 17:14:39,981 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-17 17:14:40,667 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:40,689 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:40,689 - INFO - integration_test - Warmstart k=0: x0=3.1310569447478223 , y0=2.4534169389885476 , psi0=0.8031328500205394 , v0=2.9999999605187555 , spline0=4.199999951642758 , a0=0.0 , w0=0.0
2026-01-17 17:14:40,689 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:40,690 - INFO - integration_test - Dyn residual k=0: pred=[3.339393719500399, 2.6692775095354153, 0.8031328500205394, 2.9999999605187555, 4.499999947694634], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.339393719500399, 2.6692775095354153, 0.8031328500205394, 2.9999999605187555, 4.499999947694634], res_norm=6.941e+00
2026-01-17 17:14:40,691 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:40,691 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:40,705 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,418 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,432 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,443 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,456 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,467 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,480 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,490 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,503 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,514 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,527 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,538 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,551 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,562 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,575 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,585 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,599 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,609 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,623 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,633 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,652 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:41,663 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:41,794 - INFO - integration_test - Step 17: MPC solve successful
2026-01-17 17:14:41,943 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-17 17:14:41,943 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:41,943 - INFO - integration_test - === Applying control at step 17 ===
2026-01-17 17:14:41,943 - INFO - integration_test -   Control dict from planner: {'a': 6.930110805459319e-07, 'w': -0.042150796623536116}
2026-01-17 17:14:41,943 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:41,943 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:41,944 - INFO - integration_test - Step 17 completed in 2.649s
2026-01-17 17:14:41,958 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-17 17:14:41,959 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.33984804 2.6688378  0.79891777 3.00000003 4.49999995]
2026-01-17 17:14:41,959 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.409m, drift=0.403m)
2026-01-17 17:14:41,959 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-17 17:14:41,960 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:42,687 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.340, 2.669), path_start=(0.000, 0.000), dist=4.275m
2026-01-17 17:14:42,687 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-17 17:14:43,372 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:43,394 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:43,394 - INFO - integration_test - Warmstart k=0: x0=3.339848039074816 , y0=2.668837795426056 , psi0=0.7989177703581858 , v0=3.0000000298198635 , spline0=4.4999999546247444 , a0=0.0 , w0=0.0
2026-01-17 17:14:43,394 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:43,395 - INFO - integration_test - Dyn residual k=0: pred=[3.5490928347213613, 2.883818299853847, 0.7989177703581858, 3.0000000298198635, 4.7999999576067305], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.5490928347213613, 2.883818299853847, 0.7989177703581858, 3.0000000298198635, 4.7999999576067305], res_norm=7.321e+00
2026-01-17 17:14:43,395 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:43,396 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:43,410 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,128 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,141 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,152 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,165 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,176 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,190 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,200 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,214 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,224 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,238 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,248 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,262 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,273 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,286 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,296 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,310 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,321 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,334 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,345 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,358 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:44,369 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:44,498 - INFO - integration_test - Step 18: MPC solve successful
2026-01-17 17:14:44,653 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-17 17:14:44,653 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:44,653 - INFO - integration_test - === Applying control at step 18 ===
2026-01-17 17:14:44,653 - INFO - integration_test -   Control dict from planner: {'a': 1.7024262087387718e-09, 'w': -0.1296497398489802}
2026-01-17 17:14:44,653 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:44,653 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:44,654 - INFO - integration_test - Step 18 completed in 2.695s
2026-01-17 17:14:44,667 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-17 17:14:44,668 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.55048056 2.88245587 0.7859528  3.00000003 4.79999996]
2026-01-17 17:14:44,669 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.358m, drift=0.293m)
2026-01-17 17:14:44,669 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-17 17:14:44,670 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:45,358 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.550, 2.882), path_start=(0.000, 0.000), dist=4.573m
2026-01-17 17:14:45,358 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-17 17:14:46,039 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:46,063 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:46,063 - INFO - integration_test - Warmstart k=0: x0=3.5504805615691986 , y0=2.8824558695481413 , psi0=0.7859527963732877 , v0=3.000000029990106 , spline0=4.799999957623755 , a0=0.0 , w0=0.0
2026-01-17 17:14:46,063 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:46,064 - INFO - integration_test - Dyn residual k=0: pred=[3.762494910001366, 3.0947055288135683, 0.7859527963732877, 3.000000029990106, 5.099999960622766], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.762494910001366, 3.0947055288135683, 0.7859527963732877, 3.000000029990106, 5.099999960622766], res_norm=7.705e+00
2026-01-17 17:14:46,065 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:46,066 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:46,081 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,809 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,823 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,834 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,848 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,858 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,872 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,882 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,896 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,906 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,921 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,933 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,947 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,958 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,972 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:46,983 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:46,996 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:47,007 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:47,020 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:47,031 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:47,045 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:47,056 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:47,174 - INFO - integration_test - Step 19: MPC solve successful
2026-01-17 17:14:47,231 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-17 17:14:47,231 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:47,231 - INFO - integration_test - === Applying control at step 19 ===
2026-01-17 17:14:47,231 - INFO - integration_test -   Control dict from planner: {'a': -9.299711703719227e-07, 'w': -0.0882345642040773}
2026-01-17 17:14:47,231 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:47,232 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:47,233 - INFO - integration_test - Step 19 completed in 2.565s
2026-01-17 17:14:47,246 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-17 17:14:47,247 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.76342854 3.09376743 0.77712934 2.99999994 5.09999995]
2026-01-17 17:14:47,248 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.339m, drift=0.184m)
2026-01-17 17:14:47,248 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-17 17:14:47,249 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:48,023 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.763, 3.094), path_start=(0.000, 0.000), dist=4.872m
2026-01-17 17:14:48,023 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-17 17:14:48,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:48,738 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:48,738 - INFO - integration_test - Warmstart k=0: x0=3.7634285374357197 , y0=3.093767427881733 , psi0=0.77712933995288 , v0=2.999999936992989 , spline0=5.099999951323054 , a0=0.0 , w0=0.0
2026-01-17 17:14:48,738 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:48,739 - INFO - integration_test - Dyn residual k=0: pred=[3.9773073775927856, 3.304138143411836, 0.77712933995288, 2.999999936992989, 5.399999945022352], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9773073775927856, 3.304138143411836, 0.77712933995288, 2.999999936992989, 5.399999945022352], res_norm=8.093e+00
2026-01-17 17:14:48,740 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:48,741 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:48,754 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,470 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,484 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,494 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,507 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,518 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,531 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,541 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,554 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,565 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,578 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,589 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,602 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,613 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,627 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,638 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,653 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,664 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,678 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,689 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,702 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:49,713 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:49,840 - INFO - integration_test - Step 20: MPC solve successful
2026-01-17 17:14:50,007 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-17 17:14:50,008 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:50,008 - INFO - integration_test - === Applying control at step 20 ===
2026-01-17 17:14:50,008 - INFO - integration_test -   Control dict from planner: {'a': 9.29720211230793e-07, 'w': -0.10202663414713513}
2026-01-17 17:14:50,008 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:50,008 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:50,010 - INFO - integration_test - Step 20 completed in 2.762s
2026-01-17 17:14:50,030 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-17 17:14:50,036 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.97837683 3.30304344 0.76692668 3.00000003 5.39999995]
2026-01-17 17:14:50,037 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.356m, drift=0.074m)
2026-01-17 17:14:50,037 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-17 17:14:50,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:50,746 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.978, 3.303), path_start=(0.000, 0.000), dist=5.171m
2026-01-17 17:14:50,746 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-17 17:14:51,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:51,460 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:51,461 - INFO - integration_test - Warmstart k=0: x0=3.9783768318451873 , y0=3.303043439490899 , psi0=0.7669266765381665 , v0=3.00000002996501 , spline0=5.399999954319554 , a0=0.0 , w0=0.0
2026-01-17 17:14:51,461 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:51,461 - INFO - integration_test - Dyn residual k=0: pred=[4.194390851370859, 3.5112211164071887, 0.7669266765381665, 3.00000002996501, 5.699999957316055], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.194390851370859, 3.5112211164071887, 0.7669266765381665, 3.00000002996501, 5.699999957316055], res_norm=8.485e+00
2026-01-17 17:14:51,462 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:51,463 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:51,477 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,198 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,213 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,224 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,237 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,247 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,261 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,271 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,285 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,295 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,308 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,319 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,332 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,343 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,356 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,366 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,380 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,390 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,403 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,414 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,428 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:52,439 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:52,561 - INFO - integration_test - Step 21: MPC solve successful
2026-01-17 17:14:52,620 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-17 17:14:52,620 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:52,620 - INFO - integration_test - === Applying control at step 21 ===
2026-01-17 17:14:52,620 - INFO - integration_test -   Control dict from planner: {'a': -1.1665978952998944e-06, 'w': 0.01094495163812862}
2026-01-17 17:14:52,620 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:52,620 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:52,621 - INFO - integration_test - Step 21 completed in 2.585s
2026-01-17 17:14:52,634 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-17 17:14:52,636 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.19427688 3.51133928 0.76802117 2.99999991 5.69999995]
2026-01-17 17:14:52,636 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.335m, drift=0.374m)
2026-01-17 17:14:52,636 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-17 17:14:52,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:53,441 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.194, 3.511), path_start=(0.000, 0.000), dist=5.470m
2026-01-17 17:14:53,441 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-17 17:14:54,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:54,147 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:54,147 - INFO - integration_test - Warmstart k=0: x0=4.194276879326958 , y0=3.511339283931154 , psi0=0.7680211717019794 , v0=2.9999999133052206 , spline0=5.6999999456500765 , a0=0.0 , w0=0.0
2026-01-17 17:14:54,147 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:54,148 - INFO - integration_test - Dyn residual k=0: pred=[4.41006291166263, 3.7197532543053633, 0.7680211717019794, 2.9999999133052206, 5.999999936980599], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.41006291166263, 3.7197532543053633, 0.7680211717019794, 2.9999999133052206, 5.999999936980599], res_norm=8.881e+00
2026-01-17 17:14:54,149 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:54,150 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:54,163 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:54,889 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:54,903 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:54,914 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:54,927 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:54,938 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:54,951 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:54,962 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:54,975 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:54,985 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:54,999 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:55,010 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:55,023 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:55,033 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:55,047 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:55,058 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:55,071 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:55,081 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:55,095 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:55,106 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:55,120 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:55,131 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:55,276 - INFO - integration_test - Step 22: MPC solve successful
2026-01-17 17:14:55,335 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-17 17:14:55,335 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:55,335 - INFO - integration_test - === Applying control at step 22 ===
2026-01-17 17:14:55,335 - INFO - integration_test -   Control dict from planner: {'a': 1.1669441547976118e-06, 'w': -0.21255550860062836}
2026-01-17 17:14:55,335 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:55,335 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:55,336 - INFO - integration_test - Step 22 completed in 2.701s
2026-01-17 17:14:55,349 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-17 17:14:55,352 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.41226156 3.71744433 0.74676562 3.00000003 5.99999995]
2026-01-17 17:14:55,353 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.291m, drift=0.264m)
2026-01-17 17:14:55,353 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-17 17:14:55,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:56,146 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.412, 3.717), path_start=(0.000, 0.000), dist=5.770m
2026-01-17 17:14:56,146 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-17 17:14:56,826 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:56,849 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:56,849 - INFO - integration_test - Warmstart k=0: x0=4.412261561147998 , y0=3.717444325999657 , psi0=0.7467656208419166 , v0=3.000000029999636 , spline0=5.99999994865004 , a0=0.0 , w0=0.0
2026-01-17 17:14:56,849 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:56,850 - INFO - integration_test - Dyn residual k=0: pred=[4.63242847816676, 3.921224919900135, 0.7467656208419166, 3.000000029999636, 6.299999951650004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.63242847816676, 3.921224919900135, 0.7467656208419166, 3.000000029999636, 6.299999951650004], res_norm=9.278e+00
2026-01-17 17:14:56,851 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:56,852 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:56,865 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,583 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,597 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,607 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,621 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,631 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,644 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,654 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,668 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,678 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,691 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,702 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,716 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,727 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,740 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,750 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,764 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,777 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,796 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,812 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:57,832 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:14:57,850 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:14:58,016 - INFO - integration_test - Step 23: MPC solve successful
2026-01-17 17:14:58,076 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-17 17:14:58,076 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:14:58,076 - INFO - integration_test - === Applying control at step 23 ===
2026-01-17 17:14:58,076 - INFO - integration_test -   Control dict from planner: {'a': -4.9818832053575314e-08, 'w': -0.024316331191277706}
2026-01-17 17:14:58,076 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:14:58,076 - INFO - integration_test -   Planner output success: True
2026-01-17 17:14:58,077 - INFO - integration_test - Step 23 completed in 2.725s
2026-01-17 17:14:58,091 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-17 17:14:58,092 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.63267602 3.92095704 0.74433399 3.00000003 6.29999995]
2026-01-17 17:14:58,093 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.286m, drift=0.155m)
2026-01-17 17:14:58,093 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-17 17:14:58,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:58,883 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.633, 3.921), path_start=(0.000, 0.000), dist=6.069m
2026-01-17 17:14:58,883 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-17 17:14:59,566 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:14:59,588 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:14:59,588 - INFO - integration_test - Warmstart k=0: x0=4.632676020713635 , y0=3.9209570364592805 , psi0=0.7443339877227888 , v0=3.0000000250177528 , spline0=6.299999951151816 , a0=0.0 , w0=0.0
2026-01-17 17:14:59,588 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:14:59,589 - INFO - integration_test - Dyn residual k=0: pred=[4.853337805613288, 4.124201662921985, 0.7443339877227888, 3.0000000250177528, 6.599999953653591], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.853337805613288, 4.124201662921985, 0.7443339877227888, 3.0000000250177528, 6.599999953653591], res_norm=9.679e+00
2026-01-17 17:14:59,590 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:59,591 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:14:59,604 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,324 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,338 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,349 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,373 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,387 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,398 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,411 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,422 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,436 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,447 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,461 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,473 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,487 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,498 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,511 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,522 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,536 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,547 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,560 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:00,571 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:00,705 - INFO - integration_test - Step 24: MPC solve successful
2026-01-17 17:15:00,765 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-17 17:15:00,765 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:00,765 - INFO - integration_test - === Applying control at step 24 ===
2026-01-17 17:15:00,765 - INFO - integration_test -   Control dict from planner: {'a': 4.981738598523368e-08, 'w': -0.11086570461892434}
2026-01-17 17:15:00,765 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:00,765 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:00,767 - INFO - integration_test - Step 24 completed in 2.675s
2026-01-17 17:15:00,779 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-17 17:15:00,780 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.85445992 4.12297432 0.73324742 3.00000003 6.59999995]
2026-01-17 17:15:00,781 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.321m, drift=0.045m)
2026-01-17 17:15:00,781 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-17 17:15:00,782 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:01,584 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.854, 4.123), path_start=(0.000, 0.000), dist=6.369m
2026-01-17 17:15:01,584 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-17 17:15:02,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:02,297 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:02,297 - INFO - integration_test - Warmstart k=0: x0=4.854459916891184 , y0=4.1229743208960175 , psi0=0.7332474172608964 , v0=3.0000000299994913 , spline0=6.599999954151765 , a0=0.0 , w0=0.0
2026-01-17 17:15:02,297 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:02,297 - INFO - integration_test - Dyn residual k=0: pred=[5.077361381017543, 4.3237601249019155, 0.7332474172608964, 3.0000000299994913, 6.8999999571517145], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.077361381017543, 4.3237601249019155, 0.7332474172608964, 3.0000000299994913, 6.8999999571517145], res_norm=1.008e+01
2026-01-17 17:15:02,298 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:02,299 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:02,313 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,044 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,058 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,068 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,082 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,094 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,107 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,118 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,132 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,143 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,156 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,167 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,180 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,191 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,204 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,214 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,228 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,239 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,253 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,263 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,277 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:03,287 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:03,490 - INFO - integration_test - Step 25: MPC solve successful
2026-01-17 17:15:03,551 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-17 17:15:03,552 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:03,552 - INFO - integration_test - === Applying control at step 25 ===
2026-01-17 17:15:03,552 - INFO - integration_test -   Control dict from planner: {'a': -2.735918682403947e-07, 'w': -0.05359083595572482}
2026-01-17 17:15:03,552 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:03,552 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:03,553 - INFO - integration_test - Step 25 completed in 2.773s
2026-01-17 17:15:03,565 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-17 17:15:03,568 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.07789833 4.32316189 0.72788833 3.         6.89999995]
2026-01-17 17:15:03,569 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.281m, drift=0.345m)
2026-01-17 17:15:03,569 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-17 17:15:03,570 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:04,381 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.078, 4.323), path_start=(0.000, 0.000), dist=6.669m
2026-01-17 17:15:04,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-17 17:15:05,074 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:05,097 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:05,097 - INFO - integration_test - Warmstart k=0: x0=5.077898325719352 , y0=4.323161890543731 , psi0=0.7278883336653239 , v0=3.0000000026403044 , spline0=6.8999999544157955 , a0=0.0 , w0=0.0
2026-01-17 17:15:05,097 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:05,098 - INFO - integration_test - Dyn residual k=0: pred=[5.30187260972855, 4.522750267612602, 0.7278883336653239, 3.0000000026403044, 7.199999954679826], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.30187260972855, 4.522750267612602, 0.7278883336653239, 3.0000000026403044, 7.199999954679826], res_norm=1.048e+01
2026-01-17 17:15:05,098 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:05,099 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:05,113 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:05,878 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:05,893 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:05,904 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:05,917 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:05,928 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:05,943 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:05,954 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:05,968 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:05,978 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:05,992 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:06,003 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:06,018 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:06,029 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:06,043 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:06,054 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:06,068 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:06,078 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:06,092 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:06,104 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:06,118 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:06,128 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:06,257 - INFO - integration_test - Step 26: MPC solve successful
2026-01-17 17:15:06,320 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-17 17:15:06,320 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:06,320 - INFO - integration_test - === Applying control at step 26 ===
2026-01-17 17:15:06,320 - INFO - integration_test -   Control dict from planner: {'a': 2.735952562152534e-07, 'w': -0.06651683851256783}
2026-01-17 17:15:06,320 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:06,320 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:06,321 - INFO - integration_test - Step 26 completed in 2.753s
2026-01-17 17:15:06,336 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-17 17:15:06,338 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.30253476 4.5220039  0.72123665 3.00000003 7.19999996]
2026-01-17 17:15:06,338 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.245m, drift=0.235m)
2026-01-17 17:15:06,338 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-17 17:15:06,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:07,140 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.303, 4.522), path_start=(0.000, 0.000), dist=6.969m
2026-01-17 17:15:07,140 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-17 17:15:07,828 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:07,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:07,851 - INFO - integration_test - Warmstart k=0: x0=5.3025347560826415 , y0=4.522003896409483 , psi0=0.7212366498140671 , v0=3.00000002999983 , spline0=7.199999957415779 , a0=0.0 , w0=0.0
2026-01-17 17:15:07,851 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:07,852 - INFO - integration_test - Dyn residual k=0: pred=[5.527831676299856, 4.72009806477551, 0.7212366498140671, 3.00000002999983, 7.499999960415762], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.527831676299856, 4.72009806477551, 0.7212366498140671, 3.00000002999983, 7.499999960415762], res_norm=1.089e+01
2026-01-17 17:15:07,852 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:07,853 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:07,867 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,581 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,594 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,605 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,618 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,628 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,641 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,652 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,665 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,676 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,689 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,699 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,712 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,723 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,736 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,746 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,759 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,770 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,784 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,794 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:08,807 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:08,818 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:09,009 - INFO - integration_test - Step 27: MPC solve successful
2026-01-17 17:15:09,075 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-17 17:15:09,076 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:09,076 - INFO - integration_test - === Applying control at step 27 ===
2026-01-17 17:15:09,076 - INFO - integration_test -   Control dict from planner: {'a': -2.3171277117238833e-07, 'w': -0.036302048621800316}
2026-01-17 17:15:09,076 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:09,076 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:09,077 - INFO - integration_test - Step 27 completed in 2.740s
2026-01-17 17:15:09,093 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-17 17:15:09,094 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.52819074 4.71968869 0.71760644 3.00000001 7.49999996]
2026-01-17 17:15:09,095 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.254m, drift=0.126m)
2026-01-17 17:15:09,095 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-17 17:15:09,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:09,912 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.528, 4.720), path_start=(0.000, 0.000), dist=7.269m
2026-01-17 17:15:09,912 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-17 17:15:10,602 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:10,624 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:10,624 - INFO - integration_test - Warmstart k=0: x0=5.528190741398314 , y0=4.719688692380779 , psi0=0.7176064449518871 , v0=3.0000000068285533 , spline0=7.499999958098634 , a0=0.0 , w0=0.0
2026-01-17 17:15:10,624 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:10,625 - INFO - integration_test - Dyn residual k=0: pred=[5.75420529618013, 4.916963681764864, 0.7176064449518871, 3.0000000068285533, 7.799999958781489], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.75420529618013, 4.916963681764864, 0.7176064449518871, 3.0000000068285533, 7.799999958781489], res_norm=1.130e+01
2026-01-17 17:15:10,626 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:10,626 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:10,640 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,357 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,370 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,380 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,393 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,403 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,416 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,427 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,440 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,450 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,463 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,473 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,486 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,497 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,510 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,521 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,534 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,545 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,558 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,568 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,582 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:11,592 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:11,725 - INFO - integration_test - Step 28: MPC solve successful
2026-01-17 17:15:11,793 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-17 17:15:11,793 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:11,793 - INFO - integration_test - === Applying control at step 28 ===
2026-01-17 17:15:11,793 - INFO - integration_test -   Control dict from planner: {'a': 2.224987227025091e-07, 'w': -0.10053959035106731}
2026-01-17 17:15:11,793 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:11,793 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:11,794 - INFO - integration_test - Step 28 completed in 2.700s
2026-01-17 17:15:11,810 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-17 17:15:11,812 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.75519318 4.9158242  0.70755249 3.00000003 7.79999996]
2026-01-17 17:15:11,812 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.304m, drift=0.426m)
2026-01-17 17:15:11,812 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-17 17:15:11,813 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:12,516 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.755, 4.916), path_start=(0.000, 0.000), dist=7.569m
2026-01-17 17:15:12,516 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-17 17:15:13,344 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:13,367 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:13,367 - INFO - integration_test - Warmstart k=0: x0=5.755193178349931 , y0=4.915824198046449 , psi0=0.7075524859167803 , v0=3.0000000290784254 , spline0=7.799999961006477 , a0=0.0 , w0=0.0
2026-01-17 17:15:13,367 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:13,368 - INFO - integration_test - Dyn residual k=0: pred=[5.983179673154623, 5.110816915683224, 0.7075524859167803, 3.0000000290784254, 8.09999996391432], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.983179673154623, 5.110816915683224, 0.7075524859167803, 3.0000000290784254, 8.09999996391432], res_norm=1.171e+01
2026-01-17 17:15:13,369 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:13,369 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:13,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,110 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,124 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,135 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,148 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,159 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,173 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,183 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,197 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,208 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,222 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,233 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,246 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,257 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,271 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,284 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,298 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,310 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,324 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,336 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,349 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:14,360 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:14,554 - INFO - integration_test - Step 29: MPC solve successful
2026-01-17 17:15:14,621 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-17 17:15:14,621 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:14,621 - INFO - integration_test - === Applying control at step 29 ===
2026-01-17 17:15:14,621 - INFO - integration_test -   Control dict from planner: {'a': 9.172510384829635e-09, 'w': -0.05174576239721202}
2026-01-17 17:15:14,621 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:14,621 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:14,622 - INFO - integration_test - Step 29 completed in 2.811s
2026-01-17 17:15:14,637 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-17 17:15:14,639 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.98368316 5.11022618 0.70237791 3.00000003 8.09999996]
2026-01-17 17:15:14,640 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.238m, drift=0.316m)
2026-01-17 17:15:14,640 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-17 17:15:14,641 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:15,372 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.984, 5.110), path_start=(0.000, 0.000), dist=7.869m
2026-01-17 17:15:15,372 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-17 17:15:16,057 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:16,079 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:16,079 - INFO - integration_test - Warmstart k=0: x0=5.9836831569702555 , y0=5.1102261800855535 , psi0=0.7023779096770592 , v0=3.0000000299956766 , spline0=8.099999964006045 , a0=0.0 , w0=0.0
2026-01-17 17:15:16,079 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:16,080 - INFO - integration_test - Dyn residual k=0: pred=[6.212675599722024, 5.304036558967384, 0.7023779096770592, 3.0000000299956766, 8.399999967005613], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.212675599722024, 5.304036558967384, 0.7023779096770592, 3.0000000299956766, 8.399999967005613], res_norm=1.212e+01
2026-01-17 17:15:16,081 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:16,081 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:16,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:16,933 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:16,946 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:16,957 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:16,970 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:16,980 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:16,993 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,003 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,016 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,026 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,039 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,050 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,063 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,073 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,086 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,096 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,110 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,120 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,133 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,143 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,157 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:17,167 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:17,278 - INFO - integration_test - Step 30: MPC solve successful
2026-01-17 17:15:17,345 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-17 17:15:17,345 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:17,345 - INFO - integration_test - === Applying control at step 30 ===
2026-01-17 17:15:17,345 - INFO - integration_test -   Control dict from planner: {'a': -4.4201264384104737e-08, 'w': -0.04509664720913617}
2026-01-17 17:15:17,345 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:17,345 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:17,346 - INFO - integration_test - Step 30 completed in 2.707s
2026-01-17 17:15:17,367 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-17 17:15:17,369 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.21311183 5.30351956 0.69786824 3.00000003 8.39999997]
2026-01-17 17:15:17,370 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.210m, drift=0.206m)
2026-01-17 17:15:17,370 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-17 17:15:17,371 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:18,067 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.213, 5.304), path_start=(0.000, 0.000), dist=8.169m
2026-01-17 17:15:18,067 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-17 17:15:18,757 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:18,779 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:18,779 - INFO - integration_test - Warmstart k=0: x0=6.213111832554411 , y0=5.3035195632079315 , psi0=0.6978682449561455 , v0=3.00000002557555 , spline0=8.3999999665636 , a0=0.0 , w0=0.0
2026-01-17 17:15:18,779 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:18,780 - INFO - integration_test - Dyn residual k=0: pred=[6.442975963318797, 5.496295295400721, 0.6978682449561455, 3.00000002557555, 8.699999969121155], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.442975963318797, 5.496295295400721, 0.6978682449561455, 3.00000002557555, 8.699999969121155], res_norm=1.253e+01
2026-01-17 17:15:18,781 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:18,781 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:18,795 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,634 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,648 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,658 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,672 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,682 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,695 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,706 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,719 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,729 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,743 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,753 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,767 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,777 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,791 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,801 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,826 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,840 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,851 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:19,864 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:19,875 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:20,000 - INFO - integration_test - Step 31: MPC solve successful
2026-01-17 17:15:20,069 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-17 17:15:20,070 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:20,070 - INFO - integration_test - === Applying control at step 31 ===
2026-01-17 17:15:20,070 - INFO - integration_test -   Control dict from planner: {'a': 4.4175912723427265e-08, 'w': -0.07679572672840063}
2026-01-17 17:15:20,070 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:20,070 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:20,071 - INFO - integration_test - Step 31 completed in 2.702s
2026-01-17 17:15:20,085 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-17 17:15:20,087 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.44371392 5.49541078 0.69018867 3.00000003 8.69999997]
2026-01-17 17:15:20,087 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.236m, drift=0.096m)
2026-01-17 17:15:20,087 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-17 17:15:20,088 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:20,801 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.444, 5.495), path_start=(0.000, 0.000), dist=8.469m
2026-01-17 17:15:20,801 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-17 17:15:21,507 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:21,529 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:21,529 - INFO - integration_test - Warmstart k=0: x0=6.443713918075368 , y0=5.495410775885196 , psi0=0.6901886722833055 , v0=3.0000000299931413 , spline0=8.699999969562914 , a0=0.0 , w0=0.0
2026-01-17 17:15:21,529 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:21,530 - INFO - integration_test - Dyn residual k=0: pred=[6.675051691692356, 5.686415582886286, 0.6901886722833055, 3.0000000299931413, 8.999999972562227], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.675051691692356, 5.686415582886286, 0.6901886722833055, 3.0000000299931413, 8.999999972562227], res_norm=1.294e+01
2026-01-17 17:15:21,531 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:21,532 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:21,547 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,255 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,270 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,280 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,295 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,306 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,319 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,330 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,343 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,354 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,368 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,378 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,392 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,402 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,415 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,426 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,439 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,450 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,464 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,475 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,489 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:22,500 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:22,656 - INFO - integration_test - Step 32: MPC solve successful
2026-01-17 17:15:22,847 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-17 17:15:22,847 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:22,847 - INFO - integration_test - === Applying control at step 32 ===
2026-01-17 17:15:22,847 - INFO - integration_test -   Control dict from planner: {'a': -6.991163258520148e-07, 'w': -0.05848256177758484}
2026-01-17 17:15:22,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:22,847 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:22,848 - INFO - integration_test - Step 32 completed in 2.762s
2026-01-17 17:15:22,862 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-17 17:15:22,864 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.67560889 5.68573803 0.68434042 2.99999996 8.99999997]
2026-01-17 17:15:22,864 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.265m, drift=0.396m)
2026-01-17 17:15:22,864 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-17 17:15:22,865 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:23,561 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.676, 5.686), path_start=(0.000, 0.000), dist=8.769m
2026-01-17 17:15:23,561 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-17 17:15:24,248 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:24,271 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:24,271 - INFO - integration_test - Warmstart k=0: x0=6.675608891213606 , y0=5.685738032525094 , psi0=0.684340416105547 , v0=2.999999960081509 , spline0=8.999999965571064 , a0=0.0 , w0=0.0
2026-01-17 17:15:24,271 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:24,272 - INFO - integration_test - Dyn residual k=0: pred=[6.90805974198098, 5.875386653881575, 0.684340416105547, 2.999999960081509, 9.299999961579214], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.90805974198098, 5.875386653881575, 0.684340416105547, 2.999999960081509, 9.299999961579214], res_norm=1.335e+01
2026-01-17 17:15:24,273 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:24,273 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:24,287 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,006 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,019 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,029 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,043 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,054 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,067 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,078 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,091 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,101 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,114 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,125 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,138 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,149 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,163 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,174 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,187 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,197 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,211 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,222 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,235 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:25,246 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:25,383 - INFO - integration_test - Step 33: MPC solve successful
2026-01-17 17:15:25,576 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-17 17:15:25,576 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:25,576 - INFO - integration_test - === Applying control at step 33 ===
2026-01-17 17:15:25,576 - INFO - integration_test -   Control dict from planner: {'a': 6.991828327831472e-07, 'w': -0.04557571810687966}
2026-01-17 17:15:25,576 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:25,576 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:25,577 - INFO - integration_test - Step 33 completed in 2.714s
2026-01-17 17:15:25,592 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-17 17:15:25,593 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.90849111 5.87485629 0.67978284 3.00000003 9.29999997]
2026-01-17 17:15:25,593 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.202m, drift=0.287m)
2026-01-17 17:15:25,594 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-17 17:15:25,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:26,285 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.908, 5.875), path_start=(0.000, 0.000), dist=9.069m
2026-01-17 17:15:26,285 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-17 17:15:26,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:27,006 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:27,006 - INFO - integration_test - Warmstart k=0: x0=6.908491107830608 , y0=5.874856294732027 , psi0=0.679782844294859 , v0=3.000000029999792 , spline0=9.299999968571043 , a0=0.0 , w0=0.0
2026-01-17 17:15:27,007 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:27,007 - INFO - integration_test - Dyn residual k=0: pred=[7.141803884086279, 6.063443543070452, 0.679782844294859, 3.000000029999792, 9.599999971571023], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.141803884086279, 6.063443543070452, 0.679782844294859, 3.000000029999792, 9.599999971571023], res_norm=1.376e+01
2026-01-17 17:15:27,008 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:27,009 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:27,023 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,750 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,764 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,775 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,789 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,800 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,813 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,824 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,843 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,854 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,867 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,877 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,891 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,901 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,915 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,926 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,939 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,950 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:27,968 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:27,983 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:28,003 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:28,018 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:28,316 - INFO - integration_test - Step 34: MPC solve successful
2026-01-17 17:15:28,516 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-17 17:15:28,516 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:28,517 - INFO - integration_test - === Applying control at step 34 ===
2026-01-17 17:15:28,517 - INFO - integration_test -   Control dict from planner: {'a': -5.015458283550143e-07, 'w': -0.03773680522154438}
2026-01-17 17:15:28,517 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:28,517 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:28,518 - INFO - integration_test - Step 34 completed in 2.925s
2026-01-17 17:15:28,532 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-17 17:15:28,535 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.14215916 6.06300287 0.67600916 2.99999998 9.59999997]
2026-01-17 17:15:28,535 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.185m, drift=0.177m)
2026-01-17 17:15:28,535 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-17 17:15:28,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:29,229 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.142, 6.063), path_start=(0.000, 0.000), dist=9.369m
2026-01-17 17:15:29,229 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-17 17:15:29,917 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:29,939 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:29,939 - INFO - integration_test - Warmstart k=0: x0=7.142159161968226 , y0=6.063002870480743 , psi0=0.6760091637727046 , v0=2.9999999798452093 , spline0=9.599999966555565 , a0=0.0 , w0=0.0
2026-01-17 17:15:29,939 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:29,940 - INFO - integration_test - Dyn residual k=0: pred=[7.376181939385601, 6.250708327089148, 0.6760091637727046, 2.9999999798452093, 9.899999964540086], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.376181939385601, 6.250708327089148, 0.6760091637727046, 2.9999999798452093, 9.899999964540086], res_norm=1.418e+01
2026-01-17 17:15:29,941 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:29,941 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:29,955 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,674 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,688 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,699 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,713 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,723 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,736 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,747 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,760 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,771 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,784 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,795 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,808 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,819 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,832 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,842 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,856 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,867 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,880 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,891 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:30,905 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:30,915 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:31,123 - INFO - integration_test - Step 35: MPC solve successful
2026-01-17 17:15:31,193 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-17 17:15:31,193 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:31,194 - INFO - integration_test - === Applying control at step 35 ===
2026-01-17 17:15:31,194 - INFO - integration_test -   Control dict from planner: {'a': 3.4911997602922487e-07, 'w': -0.0817402237530079}
2026-01-17 17:15:31,194 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:31,194 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:31,195 - INFO - integration_test - Step 35 completed in 2.660s
2026-01-17 17:15:31,211 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-17 17:15:31,212 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.37694648 6.24974979 0.66783514 3.00000001 9.89999997]
2026-01-17 17:15:31,213 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.228m, drift=0.067m)
2026-01-17 17:15:31,213 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-17 17:15:31,214 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:32,042 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.377, 6.250), path_start=(0.000, 0.000), dist=9.668m
2026-01-17 17:15:32,042 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-17 17:15:32,740 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:32,763 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:32,763 - INFO - integration_test - Warmstart k=0: x0=7.37694648476735 , y0=6.249749789551648 , psi0=0.6678351413974039 , v0=3.000000014757207 , spline0=9.899999968031285 , a0=0.0 , w0=0.0
2026-01-17 17:15:32,763 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:32,764 - INFO - integration_test - Dyn residual k=0: pred=[7.612495738412026, 6.4355360915032955, 0.6678351413974039, 3.000000014757207, 10.199999969507004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.612495738412026, 6.4355360915032955, 0.6678351413974039, 3.000000014757207, 10.199999969507004], res_norm=1.459e+01
2026-01-17 17:15:32,765 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:32,766 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:32,780 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,510 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,524 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,535 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,549 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,560 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,573 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,584 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,597 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,608 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,622 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,632 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,646 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,657 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,671 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,681 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,695 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,706 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,720 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,731 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,744 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:33,755 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:33,920 - INFO - integration_test - Step 36: MPC solve successful
2026-01-17 17:15:33,993 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-17 17:15:33,993 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:33,993 - INFO - integration_test - === Applying control at step 36 ===
2026-01-17 17:15:33,993 - INFO - integration_test -   Control dict from planner: {'a': 1.524256299680063e-07, 'w': -0.04422896124310499}
2026-01-17 17:15:33,993 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:33,993 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:33,994 - INFO - integration_test - Step 36 completed in 2.782s
2026-01-17 17:15:34,009 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-17 17:15:34,010 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.61290583  6.43501458  0.66341225  3.00000003 10.19999997]
2026-01-17 17:15:34,010 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.230m, drift=0.367m)
2026-01-17 17:15:34,010 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-17 17:15:34,011 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:34,712 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.613, 6.435), path_start=(0.000, 0.000), dist=9.968m
2026-01-17 17:15:34,712 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-17 17:15:35,541 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:35,562 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:35,562 - INFO - integration_test - Warmstart k=0: x0=7.612905827130772 , y0=6.435014582157183 , psi0=0.6634122452730934 , v0=3.0000000299997702 , spline0=10.199999971031263 , a0=0.0 , w0=0.0
2026-01-17 17:15:35,562 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:35,563 - INFO - integration_test - Dyn residual k=0: pred=[7.8492744889075095, 6.619757261389299, 0.6634122452730934, 3.0000000299997702, 10.49999997403124], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.8492744889075095, 6.619757261389299, 0.6634122452730934, 3.0000000299997702, 10.49999997403124], res_norm=1.500e+01
2026-01-17 17:15:35,564 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:35,564 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:35,578 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,343 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,357 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,369 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,384 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,394 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,408 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,420 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,434 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,445 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,459 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,470 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,484 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,495 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,509 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,520 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,535 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,546 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,560 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,571 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,585 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:36,595 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:36,808 - INFO - integration_test - Step 37: MPC solve successful
2026-01-17 17:15:36,937 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-17 17:15:36,937 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:36,937 - INFO - integration_test - === Applying control at step 37 ===
2026-01-17 17:15:36,937 - INFO - integration_test -   Control dict from planner: {'a': -4.878683523204457e-07, 'w': -0.005106968129060162}
2026-01-17 17:15:36,937 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:36,937 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:36,939 - INFO - integration_test - Step 37 completed in 2.929s
2026-01-17 17:15:36,954 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-17 17:15:36,956 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.84932165  6.6196969   0.66290155  2.99999998 10.49999997]
2026-01-17 17:15:36,956 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.484m, drift=0.667m)
2026-01-17 17:15:36,956 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-17 17:15:36,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:37,671 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.849, 6.620), path_start=(0.000, 0.000), dist=10.268m
2026-01-17 17:15:37,671 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.268m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:37,671 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-17 17:15:38,369 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:38,392 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:38,392 - INFO - integration_test - Warmstart k=0: x0=7.8493216504581715 , y0=6.6196968954974835 , psi0=0.6629015484601873 , v0=2.999999981212935 , spline0=10.499999969152556 , a0=0.0 , w0=0.0
2026-01-17 17:15:38,392 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:38,393 - INFO - integration_test - Dyn residual k=0: pred=[8.085784625059071, 6.804318834918751, 0.6629015484601873, 2.999999981212935, 10.79999996727385], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.085784625059071, 6.804318834918751, 0.6629015484601873, 2.999999981212935, 10.79999996727385], res_norm=1.542e+01
2026-01-17 17:15:38,394 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:38,395 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:38,409 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,133 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,147 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,157 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,171 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,181 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,195 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,205 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,218 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,229 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,242 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,253 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,266 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,277 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,290 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,301 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,314 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,324 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,338 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,349 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,362 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:39,374 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:39,519 - INFO - integration_test - Step 38: MPC solve successful
2026-01-17 17:15:39,732 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-17 17:15:39,733 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:39,733 - INFO - integration_test - === Applying control at step 38 ===
2026-01-17 17:15:39,733 - INFO - integration_test -   Control dict from planner: {'a': 4.878681735179779e-07, 'w': -0.1262831646600971}
2026-01-17 17:15:39,733 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:39,733 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:39,734 - INFO - integration_test - Step 38 completed in 2.778s
2026-01-17 17:15:39,746 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-17 17:15:39,749 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 8.08694406  6.80282088  0.65027323  3.00000003 10.79999997]
2026-01-17 17:15:39,750 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.288m, drift=0.558m)
2026-01-17 17:15:39,750 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-17 17:15:39,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:40,445 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(8.087, 6.803), path_start=(0.000, 0.000), dist=10.568m
2026-01-17 17:15:40,445 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.568m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:40,445 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-17 17:15:41,137 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:41,159 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:41,159 - INFO - integration_test - Warmstart k=0: x0=8.086944058729147 , y0=6.802820884570461 , psi0=0.6502732319941776 , v0=3.0000000299997525 , spline0=10.799999972152532 , a0=0.0 , w0=0.0
2026-01-17 17:15:41,159 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:41,160 - INFO - integration_test - Dyn residual k=0: pred=[8.325719584880838, 6.984442055998707, 0.6502732319941776, 3.0000000299997525, 11.099999975152508], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.325719584880838, 6.984442055998707, 0.6502732319941776, 3.0000000299997525, 11.099999975152508], res_norm=1.583e+01
2026-01-17 17:15:41,160 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:41,161 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:41,174 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:41,912 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:41,926 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:41,936 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:41,949 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:41,960 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:41,972 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:41,983 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:41,995 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,005 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,018 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,028 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,041 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,051 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,064 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,074 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,087 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,097 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,111 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,121 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,134 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:42,144 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:42,425 - INFO - integration_test - Step 39: MPC solve successful
2026-01-17 17:15:42,641 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-17 17:15:42,642 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:42,642 - INFO - integration_test - === Applying control at step 39 ===
2026-01-17 17:15:42,642 - INFO - integration_test -   Control dict from planner: {'a': -7.960728656209152e-07, 'w': 0.018266012099344094}
2026-01-17 17:15:42,642 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:42,642 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:42,643 - INFO - integration_test - Step 39 completed in 2.894s
2026-01-17 17:15:42,658 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-17 17:15:42,659 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 8.32555357  6.98466003  0.65209983  2.99999995 11.09999997]
2026-01-17 17:15:42,660 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.163m, drift=0.858m)
2026-01-17 17:15:42,660 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-17 17:15:42,660 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:43,361 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.326, 6.985), path_start=(0.000, 0.000), dist=10.867m
2026-01-17 17:15:43,361 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.867m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:43,361 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-17 17:15:44,062 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:44,085 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:44,085 - INFO - integration_test - Warmstart k=0: x0=8.325553574258157 , y0=6.984660026361334 , psi0=0.652099833204112 , v0=2.999999950392466 , spline0=11.09999996719178 , a0=0.0 , w0=0.0
2026-01-17 17:15:44,085 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:44,086 - INFO - integration_test - Dyn residual k=0: pred=[8.563996946481755, 7.166717037394107, 0.652099833204112, 2.999999950392466, 11.399999962231027], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.563996946481755, 7.166717037394107, 0.652099833204112, 2.999999950392466, 11.399999962231027], res_norm=1.625e+01
2026-01-17 17:15:44,086 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:44,087 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:44,101 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:44,857 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:44,871 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:44,883 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:44,897 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:44,909 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:44,923 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:44,934 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:44,948 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:44,958 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:44,972 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:44,983 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:44,996 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:45,007 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:45,022 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:45,033 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:45,047 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:45,058 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:45,072 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:45,083 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:45,096 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:45,107 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:45,241 - INFO - integration_test - Step 40: MPC solve successful
2026-01-17 17:15:45,318 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-17 17:15:45,318 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:45,318 - INFO - integration_test - === Applying control at step 40 ===
2026-01-17 17:15:45,318 - INFO - integration_test -   Control dict from planner: {'a': 7.960627578353174e-07, 'w': -0.12228615812719845}
2026-01-17 17:15:45,318 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:45,318 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:45,320 - INFO - integration_test - Step 40 completed in 2.661s
2026-01-17 17:15:45,338 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-17 17:15:45,339 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 8.56510415  7.1652546   0.63987122  3.00000003 11.39999997]
2026-01-17 17:15:45,340 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.155m, drift=0.748m)
2026-01-17 17:15:45,340 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-17 17:15:45,341 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:46,035 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.565, 7.165), path_start=(0.000, 0.000), dist=11.167m
2026-01-17 17:15:46,035 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.167m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:46,035 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-17 17:15:46,877 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:46,899 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:46,899 - INFO - integration_test - Warmstart k=0: x0=8.565104145695923 , y0=7.165254604352302 , psi0=0.6398712173913922 , v0=3.0000000299987417 , spline0=11.399999970191654 , a0=0.0 , w0=0.0
2026-01-17 17:15:46,899 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:46,900 - INFO - integration_test - Dyn residual k=0: pred=[8.80575594598819, 7.344382248271422, 0.6398712173913922, 3.0000000299987417, 11.69999997319153], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.80575594598819, 7.344382248271422, 0.6398712173913922, 3.0000000299987417, 11.69999997319153], res_norm=1.667e+01
2026-01-17 17:15:46,901 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:46,901 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:46,915 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,636 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,650 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,660 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,674 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,685 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,698 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,708 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,722 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,733 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,745 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,756 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,770 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,781 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,795 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,806 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,829 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,843 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,854 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,867 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:47,878 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:47,984 - INFO - integration_test - Step 41: MPC solve successful
2026-01-17 17:15:48,061 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-17 17:15:48,062 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:48,062 - INFO - integration_test - === Applying control at step 41 ===
2026-01-17 17:15:48,062 - INFO - integration_test -   Control dict from planner: {'a': -1.928335884717398e-06, 'w': -0.007308915102883645}
2026-01-17 17:15:48,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:48,062 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:48,063 - INFO - integration_test - Step 41 completed in 2.724s
2026-01-17 17:15:48,077 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-17 17:15:48,078 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.80582138  7.34429428  0.63914033  2.99999984 11.69999995]
2026-01-17 17:15:48,079 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.212m, drift=0.638m)
2026-01-17 17:15:48,079 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-17 17:15:48,080 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:48,779 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.806, 7.344), path_start=(0.000, 0.000), dist=11.467m
2026-01-17 17:15:48,779 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.467m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:48,779 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-17 17:15:49,469 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:49,492 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:49,492 - INFO - integration_test - Warmstart k=0: x0=8.805821378259152 , y0=7.3442942813948475 , psi0=0.6391403258811038 , v0=2.999999837165153 , spline0=11.69999995390817 , a0=0.0 , w0=0.0
2026-01-17 17:15:49,492 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:49,493 - INFO - integration_test - Dyn residual k=0: pred=[9.046604021658586, 7.523245975624018, 0.6391403258811038, 2.999999837165153, 11.999999937624686], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.046604021658586, 7.523245975624018, 0.6391403258811038, 2.999999837165153, 11.999999937624686], res_norm=1.708e+01
2026-01-17 17:15:49,494 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:49,494 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:49,509 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,238 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,252 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,263 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,277 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,288 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,302 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,312 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,326 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,337 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,351 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,361 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,385 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,399 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,409 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,423 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,434 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,448 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,459 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,472 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:50,483 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:50,605 - INFO - integration_test - Step 42: MPC solve successful
2026-01-17 17:15:50,831 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-17 17:15:50,831 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:50,831 - INFO - integration_test - === Applying control at step 42 ===
2026-01-17 17:15:50,831 - INFO - integration_test -   Control dict from planner: {'a': 1.9275162806497072e-06, 'w': -0.08781557695772513}
2026-01-17 17:15:50,831 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:50,831 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:50,833 - INFO - integration_test - Step 42 completed in 2.755s
2026-01-17 17:15:50,847 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-17 17:15:50,849 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 9.04738667  7.52218646  0.63035877  3.00000003 11.99999996]
2026-01-17 17:15:50,850 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.198m, drift=0.938m)
2026-01-17 17:15:50,850 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-17 17:15:50,851 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:51,546 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(9.047, 7.522), path_start=(0.000, 0.000), dist=11.766m
2026-01-17 17:15:51,546 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.766m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:51,546 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-17 17:15:52,273 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:52,296 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:52,296 - INFO - integration_test - Warmstart k=0: x0=9.047386667014921 , y0=7.522186464793999 , psi0=0.6303587681853313 , v0=3.000000029916781 , spline0=11.999999956899849 , a0=0.0 , w0=0.0
2026-01-17 17:15:52,296 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:52,297 - INFO - integration_test - Dyn residual k=0: pred=[9.2897314964072, 7.699016850932339, 0.6303587681853313, 3.000000029916781, 12.299999959891528], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.2897314964072, 7.699016850932339, 0.6303587681853313, 3.000000029916781, 12.299999959891528], res_norm=1.750e+01
2026-01-17 17:15:52,298 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:52,299 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:52,313 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,033 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,047 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,058 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,072 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,082 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,096 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,106 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,120 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,130 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,143 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,154 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,167 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,178 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,192 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,202 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,216 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,226 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,240 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,251 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,264 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:53,275 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:53,524 - INFO - integration_test - Step 43: MPC solve successful
2026-01-17 17:15:53,758 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-17 17:15:53,759 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:53,759 - INFO - integration_test - === Applying control at step 43 ===
2026-01-17 17:15:53,759 - INFO - integration_test -   Control dict from planner: {'a': 8.291312467595302e-10, 'w': -0.03338491343455176}
2026-01-17 17:15:53,759 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:53,759 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:53,760 - INFO - integration_test - Step 43 completed in 2.912s
2026-01-17 17:15:53,775 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-17 17:15:53,776 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.29002622  7.69861199  0.62702028  3.00000003 12.29999996]
2026-01-17 17:15:53,777 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.138m, drift=0.829m)
2026-01-17 17:15:53,777 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-17 17:15:53,778 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:54,475 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.290, 7.699), path_start=(0.000, 0.000), dist=12.065m
2026-01-17 17:15:54,475 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.065m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:54,476 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-17 17:15:55,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:55,189 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:55,189 - INFO - integration_test - Warmstart k=0: x0=9.290026219316648 , y0=7.698611989775266 , psi0=0.6270202768418761 , v0=3.0000000299996943 , spline0=12.299999959899818 , a0=0.0 , w0=0.0
2026-01-17 17:15:55,189 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:55,190 - INFO - integration_test - Dyn residual k=0: pred=[9.532960043803547, 7.8746323258735424, 0.6270202768418761, 3.0000000299996943, 12.599999962899787], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.532960043803547, 7.8746323258735424, 0.6270202768418761, 3.0000000299996943, 12.599999962899787], res_norm=1.792e+01
2026-01-17 17:15:55,191 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:55,191 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:55,206 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:55,923 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:55,937 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:55,947 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:55,962 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:55,973 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:55,986 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:55,996 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,009 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,020 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,033 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,043 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,056 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,067 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,080 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,091 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,105 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,116 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,130 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,142 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:56,166 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:56,339 - INFO - integration_test - Step 44: MPC solve successful
2026-01-17 17:15:56,422 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-17 17:15:56,423 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:56,423 - INFO - integration_test - === Applying control at step 44 ===
2026-01-17 17:15:56,423 - INFO - integration_test -   Control dict from planner: {'a': -8.29924604171012e-05, 'w': -0.04690699119038771}
2026-01-17 17:15:56,423 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:56,423 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:56,424 - INFO - integration_test - Step 44 completed in 2.648s
2026-01-17 17:15:56,441 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-17 17:15:56,442 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.53337164  7.87406167  0.62232958  2.99999173 12.59999913]
2026-01-17 17:15:56,443 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.149m, drift=0.719m)
2026-01-17 17:15:56,443 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-17 17:15:56,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:57,132 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.533, 7.874), path_start=(0.000, 0.000), dist=12.365m
2026-01-17 17:15:57,132 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.365m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:57,132 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-17 17:15:57,831 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:57,855 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:15:57,855 - INFO - integration_test - Warmstart k=0: x0=9.533371644612924 , y0=7.874061674274304 , psi0=0.6223295777228374 , v0=2.9999917307536528 , spline0=12.599999132975183 , a0=0.0 , w0=0.0
2026-01-17 17:15:57,855 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:15:57,856 - INFO - integration_test - Dyn residual k=0: pred=[9.777127777584894, 8.048940064833156, 0.6223295777228374, 2.9999917307536528, 12.899998306050549], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.777127777584894, 8.048940064833156, 0.6223295777228374, 2.9999917307536528, 12.899998306050549], res_norm=1.834e+01
2026-01-17 17:15:57,857 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:57,857 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:15:57,872 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,596 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,609 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,619 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,633 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,644 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,668 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,681 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,692 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,707 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,719 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,733 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,744 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,757 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,768 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,781 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,792 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,806 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,816 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,830 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:15:58,841 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:15:58,969 - INFO - integration_test - Step 45: MPC solve successful
2026-01-17 17:15:59,215 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-17 17:15:59,216 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:15:59,216 - INFO - integration_test - === Applying control at step 45 ===
2026-01-17 17:15:59,216 - INFO - integration_test -   Control dict from planner: {'a': 8.299246009428886e-05, 'w': -0.05994424859920695}
2026-01-17 17:15:59,216 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:15:59,216 - INFO - integration_test -   Planner output success: True
2026-01-17 17:15:59,217 - INFO - integration_test - Step 45 completed in 2.775s
2026-01-17 17:15:59,230 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-17 17:15:59,233 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 9.7776508   8.04820867  0.61633515  3.00000003 12.89999914]
2026-01-17 17:15:59,234 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.222m, drift=0.609m)
2026-01-17 17:15:59,234 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-17 17:15:59,235 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:15:59,927 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(9.778, 8.048), path_start=(0.000, 0.000), dist=12.664m
2026-01-17 17:15:59,927 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.664m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:15:59,927 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-17 17:16:00,612 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:00,635 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:00,635 - INFO - integration_test - Warmstart k=0: x0=9.777650802013834 , y0=8.048208671334097 , psi0=0.6163351528629166 , v0=3.0000000299996623 , spline0=12.899999135975149 , a0=0.0 , w0=0.0
2026-01-17 17:16:00,636 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:00,636 - INFO - integration_test - Dyn residual k=0: pred=[10.022451521852794, 8.22162323060265, 0.6163351528629166, 3.0000000299996623, 13.199999138975114], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.022451521852794, 8.22162323060265, 0.6163351528629166, 3.0000000299996623, 13.199999138975114], res_norm=1.875e+01
2026-01-17 17:16:00,637 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:00,638 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:00,652 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,372 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,386 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,397 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,410 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,421 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,434 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,445 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,458 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,469 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,483 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,494 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,508 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,519 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,532 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,543 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,556 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,567 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,581 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,592 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,605 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:01,616 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:01,829 - INFO - integration_test - Step 46: MPC solve successful
2026-01-17 17:16:02,070 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-17 17:16:02,070 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:02,070 - INFO - integration_test - === Applying control at step 46 ===
2026-01-17 17:16:02,070 - INFO - integration_test -   Control dict from planner: {'a': -8.27597022228947e-07, 'w': -0.04392692554496033}
2026-01-17 17:16:02,070 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:02,070 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:02,072 - INFO - integration_test - Step 46 completed in 2.839s
2026-01-17 17:16:02,087 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-17 17:16:02,089 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[10.02283161  8.221085    0.61194246  2.99999995 13.19999913]
2026-01-17 17:16:02,089 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.170m, drift=0.909m)
2026-01-17 17:16:02,089 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-17 17:16:02,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:02,784 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(10.023, 8.221), path_start=(0.000, 0.000), dist=12.963m
2026-01-17 17:16:02,784 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.963m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:02,784 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-17 17:16:03,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:03,492 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:03,492 - INFO - integration_test - Warmstart k=0: x0=10.022831609010389 , y0=8.22108500424209 , psi0=0.6119424603084206 , v0=2.99999994723996 , spline0=13.199999130699144 , a0=0.0 , w0=0.0
2026-01-17 17:16:03,492 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:03,492 - INFO - integration_test - Dyn residual k=0: pred=[10.268391714666066, 8.39342255483618, 0.6119424603084206, 2.99999994723996, 13.49999912542314], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.268391714666066, 8.39342255483618, 0.6119424603084206, 2.99999994723996, 13.49999912542314], res_norm=1.917e+01
2026-01-17 17:16:03,493 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:03,494 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:03,508 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,235 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,249 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,259 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,273 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,284 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,297 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,307 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,320 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,331 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,344 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,355 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,369 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,380 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,394 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,405 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,419 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,429 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,443 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,454 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,467 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:04,478 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:04,898 - INFO - integration_test - Step 47: MPC solve successful
2026-01-17 17:16:04,980 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-17 17:16:04,980 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:04,980 - INFO - integration_test - === Applying control at step 47 ===
2026-01-17 17:16:04,981 - INFO - integration_test -   Control dict from planner: {'a': -0.0002731942107640911, 'w': -0.03565124095541556}
2026-01-17 17:16:04,981 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:04,981 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:04,983 - INFO - integration_test - Step 47 completed in 2.894s
2026-01-17 17:16:04,997 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-17 17:16:04,999 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.26869728  8.39298368  0.60837734  2.99997263 13.49999639]
2026-01-17 17:16:05,000 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.119m, drift=0.799m)
2026-01-17 17:16:05,000 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-17 17:16:05,001 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:05,694 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.269, 8.393), path_start=(0.000, 0.000), dist=13.262m
2026-01-17 17:16:05,694 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.262m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:05,694 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-17 17:16:06,384 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:06,406 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:06,406 - INFO - integration_test - Warmstart k=0: x0=10.268697276580665 , y0=8.392983682069948 , psi0=0.608377336212879 , v0=2.9999726278188836 , spline0=13.499996393481032 , a0=0.0 , w0=0.0
2026-01-17 17:16:06,406 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:06,407 - INFO - integration_test - Dyn residual k=0: pred=[10.514867983375186, 8.564443125650381, 0.608377336212879, 2.9999726278188836, 13.79999365626292], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.514867983375186, 8.564443125650381, 0.608377336212879, 2.9999726278188836, 13.79999365626292], res_norm=1.959e+01
2026-01-17 17:16:06,408 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:06,409 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:06,423 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,339 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,353 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,364 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,377 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,387 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,401 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,411 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,424 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,435 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,448 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,459 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,472 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,482 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,495 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,506 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,529 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,544 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,555 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:07,569 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:07,579 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:15,346 - WARNING - integration_test - Step 48: MPC solve failed
2026-01-17 17:16:15,346 - WARNING - integration_test -   Consecutive MPC failures: 1/5
2026-01-17 17:16:15,440 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-17 17:16:15,440 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:15,440 - INFO - integration_test - === Applying control at step 48 ===
2026-01-17 17:16:15,440 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-17 17:16:15,440 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:15,440 - INFO - integration_test -   Planner output success: False
2026-01-17 17:16:15,440 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-17 17:16:15,441 - INFO - integration_test - Step 48 completed in 10.442s
2026-01-17 17:16:15,458 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-17 17:16:15,460 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[10.51486798  8.56444313  0.60837734  2.99997263 13.79999366]
2026-01-17 17:16:15,460 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.151m, drift=0.690m)
2026-01-17 17:16:15,460 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-17 17:16:15,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:16,160 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(10.515, 8.564), path_start=(0.000, 0.000), dist=13.561m
2026-01-17 17:16:16,160 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.561m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:16,160 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-17 17:16:16,855 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:16,878 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:16,878 - INFO - integration_test - Warmstart k=0: x0=10.514867983375186 , y0=8.564443125650381 , psi0=0.608377336212879 , v0=2.9999726278188836 , spline0=13.79999365626292 , a0=0.0 , w0=0.0
2026-01-17 17:16:16,878 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:16,879 - INFO - integration_test - Dyn residual k=0: pred=[10.761038690169707, 8.735902569230815, 0.608377336212879, 2.9999726278188836, 14.099990919044808], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.761038690169707, 8.735902569230815, 0.608377336212879, 2.9999726278188836, 14.099990919044808], res_norm=2.001e+01
2026-01-17 17:16:16,880 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:16,881 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:16,895 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,615 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,629 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,639 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,652 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,663 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,676 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,687 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,700 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,711 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,724 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,735 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,749 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,759 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,773 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,784 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,798 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,809 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,822 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,832 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:17,845 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:17,856 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:18,021 - INFO - integration_test - Step 49: MPC solve successful
2026-01-17 17:16:18,283 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-17 17:16:18,284 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:18,284 - INFO - integration_test - === Applying control at step 49 ===
2026-01-17 17:16:18,284 - INFO - integration_test -   Control dict from planner: {'a': 0.0002740218048893888, 'w': -0.10156719296691526}
2026-01-17 17:16:18,284 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:18,284 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:18,285 - INFO - integration_test - Step 49 completed in 2.826s
2026-01-17 17:16:18,300 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-17 17:16:18,303 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[10.76190631  8.73465026  0.59822062  3.00000003 14.09999366]
2026-01-17 17:16:18,303 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.229m, drift=0.990m)
2026-01-17 17:16:18,303 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-17 17:16:18,304 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:18,996 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(10.762, 8.735), path_start=(0.000, 0.000), dist=13.860m
2026-01-17 17:16:18,997 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.860m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:18,997 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-17 17:16:19,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:19,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:19,716 - INFO - integration_test - Warmstart k=0: x0=10.761906312527444 , y0=8.734650264115114 , psi0=0.5982206169161876 , v0=3.0000000299993728 , spline0=14.099993659262857 , a0=0.0 , w0=0.0
2026-01-17 17:16:19,717 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:19,717 - INFO - integration_test - Dyn residual k=0: pred=[11.009808021922868, 8.903602163420178, 0.5982206169161876, 3.0000000299993728, 14.399993662262794], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.009808021922868, 8.903602163420178, 0.5982206169161876, 3.0000000299993728, 14.399993662262794], res_norm=2.043e+01
2026-01-17 17:16:19,718 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:19,719 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:19,733 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,465 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,479 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,489 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,503 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,513 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,527 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,537 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,551 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,561 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,585 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,598 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,609 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,622 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,633 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,646 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,656 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,670 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,681 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:20,694 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:20,704 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:21,064 - INFO - integration_test - Step 50: MPC solve successful
2026-01-17 17:16:21,149 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-17 17:16:21,149 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:21,149 - INFO - integration_test - === Applying control at step 50 ===
2026-01-17 17:16:21,149 - INFO - integration_test -   Control dict from planner: {'a': -1.0156580909321412e-07, 'w': -0.005468909413789864}
2026-01-17 17:16:21,149 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:21,149 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:21,150 - INFO - integration_test - Step 50 completed in 2.848s
2026-01-17 17:16:21,164 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-17 17:16:21,166 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[11.00985421  8.90353437  0.59767373  3.00000002 14.39999366]
2026-01-17 17:16:21,167 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.140m, drift=0.880m)
2026-01-17 17:16:21,167 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-17 17:16:21,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:22,033 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(11.010, 8.904), path_start=(0.000, 0.000), dist=14.159m
2026-01-17 17:16:22,033 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.159m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:22,033 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-17 17:16:22,726 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:22,749 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:22,749 - INFO - integration_test - Warmstart k=0: x0=11.00985420827613 , y0=8.903534367114453 , psi0=0.5976737259748086 , v0=3.000000019842792 , spline0=14.399993661247137 , a0=0.0 , w0=0.0
2026-01-17 17:16:22,749 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:22,750 - INFO - integration_test - Dyn residual k=0: pred=[11.257848278018194, 9.072350665389637, 0.5976737259748086, 3.000000019842792, 14.699993663231417], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.257848278018194, 9.072350665389637, 0.5976737259748086, 3.000000019842792, 14.699993663231417], res_norm=2.084e+01
2026-01-17 17:16:22,751 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:22,751 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:22,765 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,488 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,501 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,512 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,536 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,549 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,560 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,574 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,584 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,597 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,608 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,621 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,632 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,645 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,655 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,669 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,679 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,692 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,702 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:23,715 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:23,726 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:32,601 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-17 17:16:32,601 - WARNING - integration_test -   Consecutive MPC failures: 1/5
2026-01-17 17:16:32,683 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-17 17:16:32,683 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:32,683 - INFO - integration_test - === Applying control at step 51 ===
2026-01-17 17:16:32,683 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-17 17:16:32,683 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:32,683 - INFO - integration_test -   Planner output success: False
2026-01-17 17:16:32,683 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-17 17:16:32,684 - INFO - integration_test - Step 51 completed in 11.518s
2026-01-17 17:16:32,697 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-17 17:16:32,701 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.25784828  9.07235067  0.59767373  3.00000002 14.69999366]
2026-01-17 17:16:32,701 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.101m, drift=0.770m)
2026-01-17 17:16:32,701 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-17 17:16:32,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:33,411 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.258, 9.072), path_start=(0.000, 0.000), dist=14.458m
2026-01-17 17:16:33,411 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.458m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:33,411 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-17 17:16:34,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:34,128 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:34,128 - INFO - integration_test - Warmstart k=0: x0=11.257848278018194 , y0=9.072350665389637 , psi0=0.5976737259748086 , v0=3.000000019842792 , spline0=14.699993663231417 , a0=0.0 , w0=0.0
2026-01-17 17:16:34,128 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:34,129 - INFO - integration_test - Dyn residual k=0: pred=[11.50584234776026, 9.24116696366482, 0.5976737259748086, 3.000000019842792, 14.999993665215698], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.50584234776026, 9.24116696366482, 0.5976737259748086, 3.000000019842792, 14.999993665215698], res_norm=2.126e+01
2026-01-17 17:16:34,129 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:34,130 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:34,144 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:34,864 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:34,878 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:34,888 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:34,901 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:34,911 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:34,924 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:34,935 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:34,948 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:34,958 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:34,971 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:34,982 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:34,995 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:35,006 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:35,019 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:35,029 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:35,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:35,054 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:35,068 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:35,078 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:35,092 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:35,103 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:35,558 - INFO - integration_test - Step 52: MPC solve successful
2026-01-17 17:16:35,815 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-17 17:16:35,815 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:35,816 - INFO - integration_test - === Applying control at step 52 ===
2026-01-17 17:16:35,816 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019997287, 'w': -0.08712946137411855}
2026-01-17 17:16:35,816 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:35,816 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:35,817 - INFO - integration_test - Step 52 completed in 3.117s
2026-01-17 17:16:35,831 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-17 17:16:35,833 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[11.49827565  9.23450537  0.58896078  2.80000002 14.97999367]
2026-01-17 17:16:35,834 - DEBUG - integration_test - Step 53: Using propagated spline 14.9800 (close to path, dist=0.165m, drift=0.641m)
2026-01-17 17:16:35,834 - DEBUG - integration_test -   Set spline state to 14.9800
2026-01-17 17:16:35,835 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:36,532 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(11.498, 9.235), path_start=(0.000, 0.000), dist=14.747m
2026-01-17 17:16:36,532 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.747m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:36,532 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-17 17:16:37,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:37,256 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:37,256 - INFO - integration_test - Warmstart k=0: x0=11.498275650755916 , y0=9.23450536838414 , psi0=0.5889607798373968 , v0=2.8000000178430633 , spline0=14.979993665015725 , a0=0.0 , w0=0.0
2026-01-17 17:16:37,256 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:37,257 - INFO - integration_test - Dyn residual k=0: pred=[11.731100807568737, 9.390044583228168, 0.5889607798373968, 2.8000000178430633, 15.259993666800032], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.731100807568737, 9.390044583228168, 0.5889607798373968, 2.8000000178430633, 15.259993666800032], res_norm=2.161e+01
2026-01-17 17:16:37,258 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:37,258 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:37,273 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:37,994 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,008 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,018 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,032 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,042 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,055 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,066 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,080 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,090 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,104 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,114 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,127 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,138 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,151 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,162 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,175 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,186 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,199 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,209 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,222 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:38,233 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:38,378 - INFO - integration_test - Step 53: MPC solve successful
2026-01-17 17:16:38,464 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=14.980)
2026-01-17 17:16:38,464 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:38,464 - INFO - integration_test - === Applying control at step 53 ===
2026-01-17 17:16:38,465 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199975867, 'w': -0.012013016560953285}
2026-01-17 17:16:38,465 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:38,465 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:38,466 - INFO - integration_test - Step 53 completed in 2.633s
2026-01-17 17:16:38,479 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-17 17:16:38,482 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[11.72287455  9.38435639  0.58775948  2.60000002 15.23999367]
2026-01-17 17:16:38,482 - DEBUG - integration_test - Step 54: Using propagated spline 15.2400 (close to path, dist=0.161m, drift=0.901m)
2026-01-17 17:16:38,482 - DEBUG - integration_test -   Set spline state to 15.2400
2026-01-17 17:16:38,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:39,382 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(11.723, 9.384), path_start=(0.000, 0.000), dist=15.016m
2026-01-17 17:16:39,382 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.016m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:39,382 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-17 17:16:40,073 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:40,096 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:40,096 - INFO - integration_test - Warmstart k=0: x0=11.722874546316937 , y0=9.384356388598626 , psi0=0.5877594781813015 , v0=2.6000000158433045 , spline0=15.239993666600055 , a0=0.0 , w0=0.0
2026-01-17 17:16:40,096 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:40,097 - INFO - integration_test - Dyn residual k=0: pred=[11.939242681808148, 9.528525840175266, 0.5877594781813015, 2.6000000158433045, 15.499993668184386], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.939242681808148, 9.528525840175266, 0.5877594781813015, 2.6000000158433045, 15.499993668184386], res_norm=2.192e+01
2026-01-17 17:16:40,098 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:40,098 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:40,112 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,837 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,850 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,860 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,873 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,883 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,896 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,906 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,930 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,943 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,954 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,967 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:40,977 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:40,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:41,001 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:41,014 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:41,025 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:41,038 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:41,049 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:41,062 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:41,072 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:41,220 - INFO - integration_test - Step 54: MPC solve successful
2026-01-17 17:16:41,309 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.240)
2026-01-17 17:16:41,309 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:41,309 - INFO - integration_test - === Applying control at step 54 ===
2026-01-17 17:16:41,309 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019862911, 'w': -0.1115603450632622}
2026-01-17 17:16:41,309 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:41,309 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:41,310 - INFO - integration_test - Step 54 completed in 2.829s
2026-01-17 17:16:41,326 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-17 17:16:41,327 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[11.93167953  9.52183304  0.57660344  2.40000001 15.47999367]
2026-01-17 17:16:41,328 - DEBUG - integration_test - Step 55: Using propagated spline 15.4800 (close to path, dist=0.089m, drift=0.731m)
2026-01-17 17:16:41,328 - DEBUG - integration_test -   Set spline state to 15.4800
2026-01-17 17:16:41,329 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:42,034 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(11.932, 9.522), path_start=(0.000, 0.000), dist=15.265m
2026-01-17 17:16:42,034 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.265m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:42,034 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-17 17:16:42,726 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:42,749 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:42,749 - INFO - integration_test - Warmstart k=0: x0=11.931679533172929 , y0=9.521833042404094 , psi0=0.5766034436749753 , v0=2.4000000138570137 , spline0=15.479993667985756 , a0=0.0 , w0=0.0
2026-01-17 17:16:42,749 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:42,750 - INFO - integration_test - Dyn residual k=0: pred=[12.132876146065202, 9.652676168420761, 0.5766034436749753, 2.4000000138570137, 15.719993669371457], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.132876146065202, 9.652676168420761, 0.5766034436749753, 2.4000000138570137, 15.719993669371457], res_norm=2.222e+01
2026-01-17 17:16:42,751 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:42,751 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:42,765 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,490 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,504 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,515 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,528 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,539 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,552 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,562 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,575 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,586 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,599 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,609 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,622 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,633 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,646 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,656 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,669 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,679 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,693 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,704 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,717 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:43,727 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:43,889 - INFO - integration_test - Step 55: MPC solve successful
2026-01-17 17:16:44,157 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.480)
2026-01-17 17:16:44,157 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:44,157 - INFO - integration_test - === Applying control at step 55 ===
2026-01-17 17:16:44,157 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019986224, 'w': -0.14878916820856483}
2026-01-17 17:16:44,157 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:44,157 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:44,158 - INFO - integration_test - Step 55 completed in 2.831s
2026-01-17 17:16:44,174 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-17 17:16:44,176 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[12.14227891  9.65654292  0.56172453  2.60000002 15.73999367]
2026-01-17 17:16:44,176 - DEBUG - integration_test - Step 56: Using propagated spline 15.7400 (close to path, dist=0.202m, drift=0.581m)
2026-01-17 17:16:44,176 - DEBUG - integration_test -   Set spline state to 15.7400
2026-01-17 17:16:44,177 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:44,878 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(12.142, 9.657), path_start=(0.000, 0.000), dist=15.514m
2026-01-17 17:16:44,878 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.514m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:44,878 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-17 17:16:45,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:45,593 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:45,593 - INFO - integration_test - Warmstart k=0: x0=12.142278911545496 , y0=9.656542916449585 , psi0=0.5617245268541188 , v0=2.600000015855636 , spline0=15.73999366957132 , a0=0.0 , w0=0.0
2026-01-17 17:16:45,594 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:45,594 - INFO - integration_test - Dyn residual k=0: pred=[12.362326742639715, 9.795031012888316, 0.5617245268541188, 2.600000015855636, 15.999993671156883], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.362326742639715, 9.795031012888316, 0.5617245268541188, 2.600000015855636, 15.999993671156883], res_norm=2.262e+01
2026-01-17 17:16:45,595 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:45,596 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:45,609 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,359 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,372 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,383 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,397 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,408 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,422 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,433 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,447 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,458 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,472 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,483 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,496 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,508 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,522 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,534 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,548 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,560 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,574 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,584 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,597 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:46,608 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:46,742 - INFO - integration_test - Step 56: MPC solve successful
2026-01-17 17:16:46,832 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.740)
2026-01-17 17:16:46,832 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:46,832 - INFO - integration_test - === Applying control at step 56 ===
2026-01-17 17:16:46,832 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019993946, 'w': -0.016901365570288977}
2026-01-17 17:16:46,832 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:46,832 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:46,833 - INFO - integration_test - Step 56 completed in 2.658s
2026-01-17 17:16:46,847 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-17 17:16:46,850 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[12.37091304  9.80016192  0.56003439  2.80000002 16.01999367]
2026-01-17 17:16:46,851 - DEBUG - integration_test - Step 57: Using propagated spline 16.0200 (close to path, dist=0.120m, drift=0.861m)
2026-01-17 17:16:46,851 - DEBUG - integration_test -   Set spline state to 16.0200
2026-01-17 17:16:46,852 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:47,550 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(12.371, 9.800), path_start=(0.000, 0.000), dist=15.782m
2026-01-17 17:16:47,550 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.782m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:47,550 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-17 17:16:48,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:48,261 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:48,261 - INFO - integration_test - Warmstart k=0: x0=12.370913043487718 , y0=9.800161916848346 , psi0=0.5600343902970899 , v0=2.8000000178550306 , spline0=16.019993671356822 , a0=0.0 , w0=0.0
2026-01-17 17:16:48,261 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:48,262 - INFO - integration_test - Dyn residual k=0: pred=[12.60813936100161, 9.94890221158612, 0.5600343902970899, 2.8000000178550306, 16.299993673142325], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.60813936100161, 9.94890221158612, 0.5600343902970899, 2.8000000178550306, 16.299993673142325], res_norm=2.306e+01
2026-01-17 17:16:48,263 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:48,264 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:48,277 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,187 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,200 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,211 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,224 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,235 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,248 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,258 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,271 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,282 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,295 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,305 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,318 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,329 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,342 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,352 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,365 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,376 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,389 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,399 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,412 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:49,423 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:49,558 - INFO - integration_test - Step 57: MPC solve successful
2026-01-17 17:16:49,652 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.020)
2026-01-17 17:16:49,652 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:49,652 - INFO - integration_test - === Applying control at step 57 ===
2026-01-17 17:16:49,652 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019989608, 'w': -0.06199553561047584}
2026-01-17 17:16:49,652 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:49,652 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:49,653 - INFO - integration_test - Step 57 completed in 2.803s
2026-01-17 17:16:49,670 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-17 17:16:49,672 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[12.61709314  9.953443    0.55383484  3.00000002 16.31999367]
2026-01-17 17:16:49,673 - DEBUG - integration_test - Step 58: Using propagated spline 16.3200 (close to path, dist=0.089m, drift=0.752m)
2026-01-17 17:16:49,673 - DEBUG - integration_test -   Set spline state to 16.3200
2026-01-17 17:16:49,674 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:50,381 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(12.617, 9.953), path_start=(0.000, 0.000), dist=16.071m
2026-01-17 17:16:50,381 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.071m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:50,381 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-17 17:16:51,072 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:51,094 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:51,094 - INFO - integration_test - Warmstart k=0: x0=12.617093143966363 , y0=9.953442998419225 , psi0=0.5538348367360423 , v0=3.0000000198539913 , spline0=16.31999367334222 , a0=0.0 , w0=0.0
2026-01-17 17:16:51,094 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:51,095 - INFO - integration_test - Dyn residual k=0: pred=[12.872247297112523, 10.111228800453203, 0.5538348367360423, 3.0000000198539913, 16.61999367532762], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.872247297112523, 10.111228800453203, 0.5538348367360423, 3.0000000198539913, 16.61999367532762], res_norm=2.353e+01
2026-01-17 17:16:51,095 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:51,096 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:51,110 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,834 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,848 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,858 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,872 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,882 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,896 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,906 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,930 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,943 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,954 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,967 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:51,978 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:51,991 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:52,001 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:52,014 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:52,025 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:52,038 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:52,049 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:52,063 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:52,079 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:52,233 - INFO - integration_test - Step 58: MPC solve successful
2026-01-17 17:16:52,512 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.320)
2026-01-17 17:16:52,512 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:52,512 - INFO - integration_test - === Applying control at step 58 ===
2026-01-17 17:16:52,512 - INFO - integration_test -   Control dict from planner: {'a': 2.7998643172783538e-08, 'w': -0.04205788094139892}
2026-01-17 17:16:52,512 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:52,512 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:52,513 - INFO - integration_test - Step 58 completed in 2.842s
2026-01-17 17:16:52,528 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-17 17:16:52,529 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[12.87257835 10.11069177  0.54962905  3.00000002 16.61999368]
2026-01-17 17:16:52,530 - DEBUG - integration_test - Step 59: Using propagated spline 16.6200 (close to path, dist=0.164m, drift=0.642m)
2026-01-17 17:16:52,530 - DEBUG - integration_test -   Set spline state to 16.6200
2026-01-17 17:16:52,531 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:53,229 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(12.873, 10.111), path_start=(0.000, 0.000), dist=16.369m
2026-01-17 17:16:53,230 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.369m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:53,230 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-17 17:16:53,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:53,943 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:53,943 - INFO - integration_test - Warmstart k=0: x0=12.872578351344963 , y0=10.110691773998383 , psi0=0.5496290486419024 , v0=3.0000000226538557 , spline0=16.619993675607606 , a0=0.0 , w0=0.0
2026-01-17 17:16:53,943 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:53,944 - INFO - integration_test - Dyn residual k=0: pred=[13.128393859757711, 10.267403059535697, 0.5496290486419024, 3.0000000226538557, 16.91999367787299], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.128393859757711, 10.267403059535697, 0.5496290486419024, 3.0000000226538557, 16.91999367787299], res_norm=2.394e+01
2026-01-17 17:16:53,944 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:53,945 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:53,959 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,679 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,704 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,718 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,728 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,741 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,752 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,766 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,777 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,791 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,801 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,815 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,825 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,838 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,849 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,862 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,873 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,887 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,897 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:54,911 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:54,921 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:55,048 - INFO - integration_test - Step 59: MPC solve successful
2026-01-17 17:16:55,142 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.620)
2026-01-17 17:16:55,142 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:55,142 - INFO - integration_test - === Applying control at step 59 ===
2026-01-17 17:16:55,142 - INFO - integration_test -   Control dict from planner: {'a': 7.345437227390122e-08, 'w': -0.03853669339450828}
2026-01-17 17:16:55,142 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:55,143 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:55,144 - INFO - integration_test - Step 59 completed in 2.615s
2026-01-17 17:16:55,163 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-17 17:16:55,166 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[13.12869518 10.26690976  0.54577538  3.00000003 16.91999368]
2026-01-17 17:16:55,166 - DEBUG - integration_test - Step 60: Using propagated spline 16.9200 (close to path, dist=0.178m, drift=0.942m)
2026-01-17 17:16:55,167 - DEBUG - integration_test -   Set spline state to 16.9200
2026-01-17 17:16:55,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:55,868 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(13.129, 10.267), path_start=(0.000, 0.000), dist=16.666m
2026-01-17 17:16:55,868 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.666m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:55,868 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-17 17:16:56,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:56,590 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:56,590 - INFO - integration_test - Warmstart k=0: x0=13.128695183260191 , y0=10.26690975826592 , psi0=0.5457753793024516 , v0=3.000000029999293 , spline0=16.919993678607536 , a0=0.0 , w0=0.0
2026-01-17 17:16:56,590 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:56,591 - INFO - integration_test - Dyn residual k=0: pred=[13.38511270475628, 10.422634054603263, 0.5457753793024516, 3.000000029999293, 17.219993681607466], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.38511270475628, 10.422634054603263, 0.5457753793024516, 3.000000029999293, 17.219993681607466], res_norm=2.436e+01
2026-01-17 17:16:56,592 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:56,592 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:56,606 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,328 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,341 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,352 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,365 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,375 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,389 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,399 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,412 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,422 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,435 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,445 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,459 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,469 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,493 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,506 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,517 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,530 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,541 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,554 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:16:57,564 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:16:57,688 - INFO - integration_test - Step 60: MPC solve successful
2026-01-17 17:16:57,970 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=16.920)
2026-01-17 17:16:57,970 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:16:57,970 - INFO - integration_test - === Applying control at step 60 ===
2026-01-17 17:16:57,970 - INFO - integration_test -   Control dict from planner: {'a': -3.292132453007643e-07, 'w': -0.04566944809648456}
2026-01-17 17:16:57,970 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:16:57,970 - INFO - integration_test -   Planner output success: True
2026-01-17 17:16:57,972 - INFO - integration_test - Step 60 completed in 2.806s
2026-01-17 17:16:57,986 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-17 17:16:57,988 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[13.3854674  10.42204799  0.54120843  3.         17.21999368]
2026-01-17 17:16:57,988 - DEBUG - integration_test - Step 61: Using propagated spline 17.2200 (close to path, dist=0.095m, drift=0.832m)
2026-01-17 17:16:57,988 - DEBUG - integration_test -   Set spline state to 17.2200
2026-01-17 17:16:57,989 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:58,688 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(13.385, 10.422), path_start=(0.000, 0.000), dist=16.964m
2026-01-17 17:16:58,688 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=16.964m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:16:58,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-17 17:16:59,376 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:16:59,398 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:16:59,399 - INFO - integration_test - Warmstart k=0: x0=13.385467403513724 , y0=10.422047991113716 , psi0=0.5412084344928031 , v0=2.9999999970779685 , spline0=17.219993678315333 , a0=0.0 , w0=0.0
2026-01-17 17:16:59,399 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:16:59,399 - INFO - integration_test - Dyn residual k=0: pred=[13.642593429939334, 10.57659962119006, 0.5412084344928031, 2.9999999970779685, 17.51999367802313], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.642593429939334, 10.57659962119006, 0.5412084344928031, 2.9999999970779685, 17.51999367802313], res_norm=2.478e+01
2026-01-17 17:16:59,400 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:59,401 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:16:59,415 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,163 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,189 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,203 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,215 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,229 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,240 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,254 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,264 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,278 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,289 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,303 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,314 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,327 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,338 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,351 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,362 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,376 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,388 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:00,412 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:00,537 - INFO - integration_test - Step 61: MPC solve successful
2026-01-17 17:17:00,636 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.220)
2026-01-17 17:17:00,636 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:00,636 - INFO - integration_test - === Applying control at step 61 ===
2026-01-17 17:17:00,636 - INFO - integration_test -   Control dict from planner: {'a': 1.2169447916147923e-07, 'w': 0.00202803151921454}
2026-01-17 17:17:00,636 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:00,636 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:00,637 - INFO - integration_test - Step 61 completed in 2.650s
2026-01-17 17:17:00,654 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-17 17:17:00,655 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[13.64257776 10.57662569  0.54141124  3.00000001 17.51999368]
2026-01-17 17:17:00,656 - DEBUG - integration_test - Step 62: Using propagated spline 17.5200 (close to path, dist=0.101m, drift=0.723m)
2026-01-17 17:17:00,656 - DEBUG - integration_test -   Set spline state to 17.5200
2026-01-17 17:17:00,657 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:01,351 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(13.643, 10.577), path_start=(0.000, 0.000), dist=17.262m
2026-01-17 17:17:01,351 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.262m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:17:01,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-17 17:17:02,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:02,055 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:17:02,055 - INFO - integration_test - Warmstart k=0: x0=13.64257775691944 , y0=10.57662569342838 , psi0=0.5414112376447245 , v0=3.0000000092474166 , spline0=17.519993679240073 , a0=0.0 , w0=0.0
2026-01-17 17:17:02,055 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:17:02,056 - INFO - integration_test - Dyn residual k=0: pred=[13.899672435542769, 10.731229466921826, 0.5414112376447245, 3.0000000092474166, 17.819993680164814], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.899672435542769, 10.731229466921826, 0.5414112376447245, 3.0000000092474166, 17.819993680164814], res_norm=2.520e+01
2026-01-17 17:17:02,057 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:02,057 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:02,071 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,793 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,807 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,818 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,832 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,842 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,856 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,866 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,880 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,891 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,904 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,914 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,928 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,938 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,951 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,962 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,975 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:02,986 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:02,999 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:03,010 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:03,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:03,033 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:03,169 - INFO - integration_test - Step 62: MPC solve successful
2026-01-17 17:17:03,458 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.520)
2026-01-17 17:17:03,459 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:03,459 - INFO - integration_test - === Applying control at step 62 ===
2026-01-17 17:17:03,459 - INFO - integration_test -   Control dict from planner: {'a': 2.0750448904946615e-07, 'w': -0.02493984371099051}
2026-01-17 17:17:03,459 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:03,459 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:03,460 - INFO - integration_test - Step 62 completed in 2.805s
2026-01-17 17:17:03,475 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-17 17:17:03,476 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[13.89986496 10.73090871  0.53891725  3.00000003 17.81999368]
2026-01-17 17:17:03,477 - DEBUG - integration_test - Step 63: Using propagated spline 17.8200 (close to path, dist=0.188m, drift=0.613m)
2026-01-17 17:17:03,477 - DEBUG - integration_test -   Set spline state to 17.8200
2026-01-17 17:17:03,478 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:04,177 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(13.900, 10.731), path_start=(0.000, 0.000), dist=17.560m
2026-01-17 17:17:04,177 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.560m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:17:04,177 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-17 17:17:04,871 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:04,893 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:17:04,893 - INFO - integration_test - Warmstart k=0: x0=13.89986495951067 , y0=10.730908712294568 , psi0=0.5389172532736255 , v0=3.0000000299978655 , spline0=17.81999368223986 , a0=0.0 , w0=0.0
2026-01-17 17:17:04,893 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:17:04,894 - INFO - integration_test - Dyn residual k=0: pred=[14.157344419351384, 10.884870816593015, 0.5389172532736255, 3.0000000299978655, 18.11999368523965], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.157344419351384, 10.884870816593015, 0.5389172532736255, 3.0000000299978655, 18.11999368523965], res_norm=2.562e+01
2026-01-17 17:17:04,895 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:04,896 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:04,909 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,624 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,637 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,648 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,661 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,672 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,685 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,695 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,708 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,719 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,732 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,742 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,756 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,766 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,779 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,790 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,803 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,814 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,827 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,837 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:05,851 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:05,861 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:06,217 - INFO - integration_test - Step 63: MPC solve successful
2026-01-17 17:17:06,314 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.820)
2026-01-17 17:17:06,315 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:06,315 - INFO - integration_test - === Applying control at step 63 ===
2026-01-17 17:17:06,315 - INFO - integration_test -   Control dict from planner: {'a': -9.14073866962558e-10, 'w': -0.020655979248060702}
2026-01-17 17:17:06,315 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:06,315 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:06,316 - INFO - integration_test - Step 63 completed in 2.840s
2026-01-17 17:17:06,335 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-17 17:17:06,337 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[14.15750325 10.88460478  0.53685166  3.00000003 18.11999369]
2026-01-17 17:17:06,338 - DEBUG - integration_test - Step 64: Using propagated spline 18.1200 (close to path, dist=0.150m, drift=0.913m)
2026-01-17 17:17:06,338 - DEBUG - integration_test -   Set spline state to 18.1200
2026-01-17 17:17:06,338 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:07,061 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(14.158, 10.885), path_start=(0.000, 0.000), dist=17.858m
2026-01-17 17:17:07,061 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.858m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:17:07,061 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-17 17:17:07,955 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:07,978 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:17:07,978 - INFO - integration_test - Warmstart k=0: x0=14.157503248094818 , y0=10.884604782681402 , psi0=0.5368516553488194 , v0=3.000000029906458 , spline0=18.119993685230508 , a0=0.0 , w0=0.0
2026-01-17 17:17:07,978 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:17:07,979 - INFO - integration_test - Dyn residual k=0: pred=[14.415300182211723, 11.038034709860916, 0.5368516553488194, 3.000000029906458, 18.419993688221155], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.415300182211723, 11.038034709860916, 0.5368516553488194, 3.000000029906458, 18.419993688221155], res_norm=2.604e+01
2026-01-17 17:17:07,980 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:07,980 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:07,994 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,712 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,726 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,736 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,749 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,759 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,773 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,783 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,796 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,807 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,820 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,830 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,844 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,854 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,868 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,878 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,891 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,902 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,915 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,926 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:08,939 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:08,949 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:09,408 - INFO - integration_test - Step 64: MPC solve successful
2026-01-17 17:17:09,507 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.120)
2026-01-17 17:17:09,507 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:09,507 - INFO - integration_test - === Applying control at step 64 ===
2026-01-17 17:17:09,507 - INFO - integration_test -   Control dict from planner: {'a': 5.502993190001566e-10, 'w': -0.032396422992753665}
2026-01-17 17:17:09,507 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:09,507 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:09,508 - INFO - integration_test - Step 64 completed in 3.171s
2026-01-17 17:17:09,524 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-17 17:17:09,526 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[14.41554826 11.03761686  0.53361201  3.00000003 18.41999369]
2026-01-17 17:17:09,526 - DEBUG - integration_test - Step 65: Using propagated spline 18.4200 (close to path, dist=0.074m, drift=0.803m)
2026-01-17 17:17:09,526 - DEBUG - integration_test -   Set spline state to 18.4200
2026-01-17 17:17:09,527 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:10,221 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(14.416, 11.038), path_start=(0.000, 0.000), dist=18.156m
2026-01-17 17:17:10,221 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.156m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:17:10,221 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-17 17:17:10,904 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:10,927 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:17:10,927 - INFO - integration_test - Warmstart k=0: x0=14.415548260096076 , y0=11.037616856919762 , psi0=0.5336120130495441 , v0=3.000000029961488 , spline0=18.419993688226658 , a0=0.0 , w0=0.0
2026-01-17 17:17:10,927 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:17:10,928 - INFO - integration_test - Dyn residual k=0: pred=[14.673840898605718, 11.190210810566086, 0.5336120130495441, 3.000000029961488, 18.719993691222808], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.673840898605718, 11.190210810566086, 0.5336120130495441, 3.000000029961488, 18.719993691222808], res_norm=2.646e+01
2026-01-17 17:17:10,928 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:10,929 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:10,944 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,664 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,678 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,689 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,702 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,713 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,726 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,737 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,751 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,761 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,774 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,785 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,798 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,808 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,821 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,831 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,845 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,856 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,869 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,880 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:11,893 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:11,912 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:12,033 - INFO - integration_test - Step 65: MPC solve successful
2026-01-17 17:17:12,338 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.420)
2026-01-17 17:17:12,338 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:12,338 - INFO - integration_test - === Applying control at step 65 ===
2026-01-17 17:17:12,338 - INFO - integration_test -   Control dict from planner: {'a': -1.0029732931001265e-05, 'w': -0.09086433089512903}
2026-01-17 17:17:12,338 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:12,338 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:12,339 - INFO - integration_test - Step 65 completed in 2.814s
2026-01-17 17:17:12,354 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-17 17:17:12,356 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[14.67453056 11.18903521  0.52452558  2.99999903 18.71999359]
2026-01-17 17:17:12,356 - DEBUG - integration_test - Step 66: Using propagated spline 18.7200 (close to path, dist=0.113m, drift=0.693m)
2026-01-17 17:17:12,356 - DEBUG - integration_test -   Set spline state to 18.7200
2026-01-17 17:17:12,357 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:13,050 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(14.675, 11.189), path_start=(0.000, 0.000), dist=18.454m
2026-01-17 17:17:13,050 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.454m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:17:13,050 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-17 17:17:13,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:13,751 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:17:13,751 - INFO - integration_test - Warmstart k=0: x0=14.674530563648274 , y0=11.18903521423854 , psi0=0.5245255799600311 , v0=2.9999990269881947 , spline0=18.719993590925476 , a0=0.0 , w0=0.0
2026-01-17 17:17:13,751 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:17:13,752 - INFO - integration_test - Dyn residual k=0: pred=[14.934198968346088, 11.339275891889411, 0.5245255799600311, 2.9999990269881947, 19.019993493624295], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.934198968346088, 11.339275891889411, 0.5245255799600311, 2.9999990269881947, 19.019993493624295], res_norm=2.688e+01
2026-01-17 17:17:13,752 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:13,753 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:13,766 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,489 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,502 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,512 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,537 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,550 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,560 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,573 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,584 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,597 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,608 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,621 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,632 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,645 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,656 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,669 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,680 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,701 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,717 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,739 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:14,757 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:14,904 - INFO - integration_test - Step 66: MPC solve successful
2026-01-17 17:17:15,007 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.720)
2026-01-17 17:17:15,007 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:15,007 - INFO - integration_test - === Applying control at step 66 ===
2026-01-17 17:17:15,007 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000148460817, 'w': -0.1015304711337971}
2026-01-17 17:17:15,007 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:15,007 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:15,008 - INFO - integration_test - Step 66 completed in 2.653s
2026-01-17 17:17:15,024 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-17 17:17:15,026 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[14.92626791 11.3330058   0.51437253  2.79999903 18.99999349]
2026-01-17 17:17:15,026 - DEBUG - integration_test - Step 67: Using propagated spline 19.0000 (close to path, dist=0.211m, drift=0.973m)
2026-01-17 17:17:15,027 - DEBUG - integration_test -   Set spline state to 19.0000
2026-01-17 17:17:15,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:15,763 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(14.926, 11.333), path_start=(0.000, 0.000), dist=18.741m
2026-01-17 17:17:15,763 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.741m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-17 17:17:15,763 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-17 17:17:16,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-17 17:17:16,489 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-17 17:17:16,490 - INFO - integration_test - Warmstart k=0: x0=14.926267910126946 , y0=11.333005800645916 , psi0=0.5143725328466514 , v0=2.7999990255035865 , spline0=18.999993493475834 , a0=0.0 , w0=0.0
2026-01-17 17:17:16,490 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-17 17:17:16,490 - INFO - integration_test - Dyn residual k=0: pred=[15.17003627339739, 11.470762580866197, 0.5143725328466514, 2.7999990255035865, 19.279993396026192], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.17003627339739, 11.470762580866197, 0.5143725328466514, 2.7999990255035865, 19.279993396026192], res_norm=2.723e+01
2026-01-17 17:17:16,491 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:16,492 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-17 17:17:16,506 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,235 - INFO - integration_test - Stage 0: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,248 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,259 - INFO - integration_test - Stage 1: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,272 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,283 - INFO - integration_test - Stage 2: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,296 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,307 - INFO - integration_test - Stage 3: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,320 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,331 - INFO - integration_test - Stage 4: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,344 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,355 - INFO - integration_test - Stage 5: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,368 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,379 - INFO - integration_test - Stage 6: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,393 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,403 - INFO - integration_test - Stage 7: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,416 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,427 - INFO - integration_test - Stage 8: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,440 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,451 - INFO - integration_test - Stage 9: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,465 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-17 17:17:17,476 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-17 17:17:17,616 - INFO - integration_test - Step 67: MPC solve successful
2026-01-17 17:17:17,924 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.000)
2026-01-17 17:17:17,925 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-17 17:17:17,925 - INFO - integration_test - === Applying control at step 67 ===
2026-01-17 17:17:17,925 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019995946, 'w': -0.8000000097275181}
2026-01-17 17:17:17,925 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-17 17:17:17,925 - INFO - integration_test -   Planner output success: True
2026-01-17 17:17:17,926 - INFO - integration_test - Goal reached at step 67!
2026-01-17 17:17:17,926 - INFO - integration_test - Step 67 completed in 2.900s
2026-01-17 17:17:17,941 - INFO - integration_test - Goal reached at step 67, added 3 extra frames for visualization
2026-01-17 17:17:17,942 - INFO - integration_test - Saving test results...
2026-01-17 17:17:17,943 - INFO - integration_test - Saved 72 vehicle states to test_outputs/20260117_171352_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-17 17:17:17,943 - INFO - integration_test - Saved obstacle summary to test_outputs/20260117_171352_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-17 17:17:17,943 - INFO - integration_test - Saved 79 states for obstacle 0 to test_outputs/20260117_171352_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-17 17:17:17,944 - INFO - integration_test - Saved state history: 72 vehicle states, 1 obstacles
2026-01-17 17:17:17,944 - INFO - integration_test - Creating animation...
2026-01-17 17:17:17,983 - DEBUG - integration_test - Creating animation with 72 frames (range: 0 to 71)
2026-01-17 17:17:17,983 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-17 17:17:18,672 - INFO - integration_test - Frame 0: Safe Horizon module has 1650 scenarios after update
2026-01-17 17:17:18,672 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-17 17:17:18,672 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-17 17:17:18,703 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-17 17:17:18,703 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-17 17:17:19,401 - INFO - integration_test - Frame 0: Safe Horizon module has 1680 scenarios after update
2026-01-17 17:17:19,401 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-17 17:17:19,401 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-17 17:17:19,645 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-17 17:17:19,715 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-17 17:17:20,415 - INFO - integration_test - Frame 1: Safe Horizon module has 1671 scenarios after update
2026-01-17 17:17:20,415 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-17 17:17:20,415 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-17 17:17:20,459 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-17 17:17:20,504 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-17 17:17:21,194 - INFO - integration_test - Frame 2: Safe Horizon module has 1674 scenarios after update
2026-01-17 17:17:21,194 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-17 17:17:21,194 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-17 17:17:21,225 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-17 17:18:23,961 - INFO - integration_test - Saved animation with 72 frames at 10.00 fps to test_outputs/20260117_171352_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 7.20s, size: 897400 bytes)
2026-01-17 17:18:23,996 - INFO - integration_test - Animation created successfully
2026-01-17 17:18:23,997 - INFO - integration_test - Test completed successfully
