2026-01-19 12:43:51,686 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-19 12:43:51,686 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-19 12:43:51,686 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-19 12:43:51,686 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-19 12:43:51,686 - INFO - integration_test - Creating objective module: contouring
2026-01-19 12:43:51,705 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-19 12:43:51,705 - INFO - integration_test - Creating 2 constraint module(s): ['linear', 'contouring']
2026-01-19 12:43:51,705 - DEBUG - integration_test - Creating constraint module: linear
2026-01-19 12:43:51,710 - INFO - integration_test - Constraint module 'linear' created: linearized_constraints
2026-01-19 12:43:51,710 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-19 12:43:51,716 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-19 12:43:51,716 - INFO - integration_test - Created 2 constraint module(s)
2026-01-19 12:43:51,732 - INFO - integration_test - Setting solver on all modules...
2026-01-19 12:43:51,732 - DEBUG - integration_test -   Set solver on module: linearized_constraints
2026-01-19 12:43:51,732 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-19 12:43:51,732 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-19 12:43:51,732 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-19 12:43:51,732 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-19 12:43:51,732 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-19 12:43:51,732 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-19 12:43:51,732 - INFO - integration_test - Obstacle 0: s=10.04, pos=(6.62, 8.24), lateral_offset=1.71m, vel=(0.47, 0.37)
2026-01-19 12:43:51,732 - INFO - integration_test - Obstacle 1: s=15.68, pos=(13.20, 8.84), lateral_offset=-1.71m, vel=(-0.66, -0.45)
2026-01-19 12:43:51,732 - INFO - integration_test - Obstacle 2: s=21.33, pos=(16.62, 13.93), lateral_offset=0.73m, vel=(0.43, 0.25)
2026-01-19 12:43:51,733 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-19 12:43:51,733 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-19 12:43:51,733 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-19 12:43:51,733 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-19 12:43:51,733 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-19 12:43:51,733 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-19 12:43:51,733 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-19 12:43:51,734 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-19 12:43:51,734 - INFO - integration_test - Added spline variable: 0.0000
2026-01-19 12:43:51,734 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-19 12:43:51,734 - INFO - integration_test - Auto-calculated timeout: 480s for 300 steps
2026-01-19 12:43:51,734 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-19 12:43:51,734 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-19 12:43:51,734 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-19 12:43:51,734 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-19 12:43:51,735 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:51,752 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-19 12:43:51,752 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-19 12:43:51,756 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:51,785 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:51,785 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-19 12:43:51,785 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:51,786 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-19 12:43:51,787 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:51,788 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:51,804 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:51,846 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:51,862 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:51,877 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:51,893 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:51,909 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:51,925 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:51,940 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:51,955 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:51,970 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:51,985 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,000 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,016 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,030 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,045 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,060 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,075 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,090 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,106 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,121 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,136 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,147 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:52,626 - INFO - integration_test - Step 0: MPC solve successful
2026-01-19 12:43:52,807 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-19 12:43:52,807 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:52,807 - DEBUG - integration_test - Captured 3 linearized constraint halfspaces at step 0
2026-01-19 12:43:52,807 - INFO - integration_test - === Applying control at step 0 ===
2026-01-19 12:43:52,807 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000191250162, 'w': 0.7999999951973514}
2026-01-19 12:43:52,807 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:52,807 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:52,810 - INFO - integration_test - Step 0 completed in 1.077s
2026-01-19 12:43:52,822 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-19 12:43:52,823 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-19 12:43:52,824 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-19 12:43:52,824 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-19 12:43:52,825 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:52,825 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:52,842 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-19 12:43:52,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-19 12:43:52,846 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:52,870 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:52,870 - INFO - integration_test - Warmstart k=0: x0=0.1098773753781347 , y0=0.004530845030996362 , psi0=0.07999999951973515 , v0=1.2000000019125017 , spline0=0.12000000019125018 , a0=0.0 , w0=0.0
2026-01-19 12:43:52,870 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:52,871 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358032969314, 0.014120608265133325, 0.07999999951973515, 1.2000000019125017, 0.24000000038250036], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358032969314, 0.014120608265133325, 0.07999999951973515, 1.2000000019125017, 0.24000000038250036], res_norm=1.248e+00
2026-01-19 12:43:52,872 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:52,873 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:52,891 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,932 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,947 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,961 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:52,977 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:52,994 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,010 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,026 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,041 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,056 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,073 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,089 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,107 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,123 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,139 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,155 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,223 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,237 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,253 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,267 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,282 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,294 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:53,436 - INFO - integration_test - Step 1: MPC solve successful
2026-01-19 12:43:53,442 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-19 12:43:53,442 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:53,442 - INFO - integration_test - === Applying control at step 1 ===
2026-01-19 12:43:53,442 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001926619, 'w': 0.8000000003884424}
2026-01-19 12:43:53,442 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:53,442 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:53,444 - INFO - integration_test - Step 1 completed in 0.621s
2026-01-19 12:43:53,456 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-19 12:43:53,456 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-19 12:43:53,457 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-19 12:43:53,457 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-19 12:43:53,458 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:53,458 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:53,472 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-19 12:43:53,473 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-19 12:43:53,477 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:53,503 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:53,503 - INFO - integration_test - Warmstart k=0: x0=0.2388921281827598 , y0=0.020221621672715878 , psi0=0.15999999955857935 , v0=1.4000000038391207 , spline0=0.26000000057516226 , a0=0.0 , w0=0.0
2026-01-19 12:43:53,503 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:53,504 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394824420174, 0.042526170598864946, 0.15999999955857935, 1.4000000038391207, 0.40000000095907434], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394824420174, 0.042526170598864946, 0.15999999955857935, 1.4000000038391207, 0.40000000095907434], res_norm=1.513e+00
2026-01-19 12:43:53,505 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:53,506 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:53,522 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,562 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,578 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,593 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,610 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,625 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,640 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,655 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,670 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,684 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,701 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,716 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,733 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,750 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,767 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,783 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,802 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,819 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,837 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,853 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:53,870 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:53,882 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:54,043 - INFO - integration_test - Step 2: MPC solve successful
2026-01-19 12:43:54,049 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-19 12:43:54,050 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:54,050 - INFO - integration_test - === Applying control at step 2 ===
2026-01-19 12:43:54,050 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018582353, 'w': 0.7999999968233074}
2026-01-19 12:43:54,050 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:54,050 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:54,051 - INFO - integration_test - Step 2 completed in 0.596s
2026-01-19 12:43:54,069 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-19 12:43:54,070 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-19 12:43:54,070 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.316m, drift=0.092m)
2026-01-19 12:43:54,071 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-19 12:43:54,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:54,072 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:54,094 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-19 12:43:54,094 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-19 12:43:54,100 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:54,136 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:54,136 - INFO - integration_test - Warmstart k=0: x0=0.38583643572702897 , y0=0.050144716285204 , psi0=0.2399999992409101 , v0=1.600000005697356 , spline0=0.4200000011448979 , a0=0.0 , w0=0.0
2026-01-19 12:43:54,136 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:54,138 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505122856296, 0.08817713653099993, 0.2399999992409101, 1.600000005697356, 0.5800000017146335], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505122856296, 0.08817713653099993, 0.2399999992409101, 1.600000005697356, 0.5800000017146335], res_norm=1.804e+00
2026-01-19 12:43:54,139 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:54,140 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:54,165 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,220 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,242 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,262 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,284 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,307 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,330 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,350 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,372 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,390 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,410 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,428 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,446 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,463 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,480 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,496 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,532 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,553 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,568 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,588 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,603 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:54,771 - INFO - integration_test - Step 3: MPC solve successful
2026-01-19 12:43:54,777 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-19 12:43:54,778 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:54,778 - INFO - integration_test - === Applying control at step 3 ===
2026-01-19 12:43:54,778 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999356582847, 'w': 0.7999992443593726}
2026-01-19 12:43:54,778 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:54,778 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:54,780 - INFO - integration_test - Step 3 completed in 0.711s
2026-01-19 12:43:54,797 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-19 12:43:54,798 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999992 1.8        0.6       ]
2026-01-19 12:43:54,798 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.327m, drift=0.088m)
2026-01-19 12:43:54,798 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-19 12:43:54,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:54,799 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:54,816 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-19 12:43:54,816 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-19 12:43:54,820 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:54,849 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:54,849 - INFO - integration_test - Warmstart k=0: x0=0.5491354627791256 , y0=0.09724075031907584 , psi0=0.3199999236768474 , v0=1.7999999992631845 , spline0=0.6000000010712163 , a0=0.0 , w0=0.0
2026-01-19 12:43:54,850 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:54,851 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978422855915, 0.15386271816604397, 0.3199999236768474, 1.7999999992631845, 0.7800000009975347], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978422855915, 0.15386271816604397, 0.3199999236768474, 1.7999999992631845, 0.7800000009975347], res_norm=2.120e+00
2026-01-19 12:43:54,852 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:54,853 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:54,874 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,932 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,954 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:54,973 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:54,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,012 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,031 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,049 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,068 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,086 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,109 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,128 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,147 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,165 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,184 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,202 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,220 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,239 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,257 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,272 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,287 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,299 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:55,445 - INFO - integration_test - Step 4: MPC solve successful
2026-01-19 12:43:55,449 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-19 12:43:55,450 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:55,450 - INFO - integration_test - === Applying control at step 4 ===
2026-01-19 12:43:55,450 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000185546845, 'w': 0.7999999872742872}
2026-01-19 12:43:55,450 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:55,450 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:55,451 - INFO - integration_test - Step 4 completed in 0.654s
2026-01-19 12:43:55,464 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-19 12:43:55,465 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427975 0.39999992 2.         0.8       ]
2026-01-19 12:43:55,465 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.417m, drift=0.288m)
2026-01-19 12:43:55,465 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-19 12:43:55,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:55,466 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:55,480 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-19 12:43:55,480 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-19 12:43:55,483 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:55,509 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:55,509 - INFO - integration_test - Warmstart k=0: x0=0.7268614946331999 , y0=0.16427974775812917 , psi0=0.39999992240427606 , v0=2.000000001118653 , spline0=0.8000000011830817 , a0=0.0 , w0=0.0
2026-01-19 12:43:55,509 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:55,510 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736995802509, 0.2421634019693425, 0.39999992240427606, 2.000000001118653, 1.000000001294947], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736995802509, 0.2421634019693425, 0.39999992240427606, 2.000000001118653, 1.000000001294947], res_norm=2.459e+00
2026-01-19 12:43:55,511 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:55,512 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:55,527 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,566 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,581 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,596 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,612 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,626 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,642 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,657 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,673 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,689 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,705 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,719 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,734 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,749 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,764 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,778 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,794 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,808 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,824 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,838 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:55,853 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:55,864 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:56,019 - INFO - integration_test - Step 5: MPC solve successful
2026-01-19 12:43:56,023 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-19 12:43:56,023 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:56,024 - INFO - integration_test - === Applying control at step 5 ===
2026-01-19 12:43:56,024 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000105542965, 'w': 0.7999999033434708}
2026-01-19 12:43:56,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:56,024 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:56,025 - INFO - integration_test - Step 5 completed in 0.560s
2026-01-19 12:43:56,038 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-19 12:43:56,038 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675192 0.25382377 0.47999991 2.2        1.02      ]
2026-01-19 12:43:56,039 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.511m, drift=0.004m)
2026-01-19 12:43:56,039 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-19 12:43:56,040 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:56,040 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:56,054 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-19 12:43:56,054 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-19 12:43:56,058 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:56,084 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:56,084 - INFO - integration_test - Warmstart k=0: x0=0.9167519153346948 , y0=0.2538237717903953 , psi0=0.47999991273862314 , v0=2.200000002174083 , spline0=1.02000000140049 , a0=0.0 , w0=0.0
2026-01-19 12:43:56,084 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:56,085 - INFO - integration_test - Dyn residual k=0: pred=[1.1118908074039837, 0.3554151734818281, 0.47999991273862314, 2.200000002174083, 1.2400000016178983], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118908074039837, 0.3554151734818281, 0.47999991273862314, 2.200000002174083, 1.2400000016178983], res_norm=2.823e+00
2026-01-19 12:43:56,086 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:56,086 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:56,102 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,142 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,158 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,174 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,190 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,205 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,221 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,236 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,251 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,266 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,281 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,296 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,313 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,327 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,343 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,357 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,372 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,386 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,402 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,417 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,432 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,443 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:56,609 - INFO - integration_test - Step 6: MPC solve successful
2026-01-19 12:43:56,613 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-19 12:43:56,614 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:56,614 - INFO - integration_test - === Applying control at step 6 ===
2026-01-19 12:43:56,614 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000189362965, 'w': 0.7999999842061974}
2026-01-19 12:43:56,614 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:56,614 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:56,615 - INFO - integration_test - Step 6 completed in 0.577s
2026-01-19 12:43:56,628 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-19 12:43:56,628 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819139 0.55999991 2.4        1.26      ]
2026-01-19 12:43:56,629 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.532m, drift=0.236m)
2026-01-19 12:43:56,629 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-19 12:43:56,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:56,630 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:56,644 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-19 12:43:56,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-19 12:43:56,648 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:56,673 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:56,673 - INFO - integration_test - Warmstart k=0: x0=1.1162308848381162 , y0=0.36819139320383454 , psi0=0.5599999111592429 , v0=2.4000000040677123 , spline0=1.2600000018072612 , a0=0.0 , w0=0.0
2026-01-19 12:43:56,673 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:56,674 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721231518105, 0.49567606285592875, 0.5599999111592429, 2.4000000040677123, 1.5000000022140325], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721231518105, 0.49567606285592875, 0.5599999111592429, 2.4000000040677123, 1.5000000022140325], res_norm=3.211e+00
2026-01-19 12:43:56,675 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:56,676 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:56,691 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,732 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,747 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,761 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,777 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,791 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,807 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,822 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,837 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,851 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,866 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,880 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,895 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,910 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,926 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,940 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,956 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:56,970 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:56,985 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,001 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,018 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,031 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:57,196 - INFO - integration_test - Step 7: MPC solve successful
2026-01-19 12:43:57,201 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-19 12:43:57,201 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:57,201 - INFO - integration_test - === Applying control at step 7 ===
2026-01-19 12:43:57,201 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193437044, 'w': 0.799999980710769}
2026-01-19 12:43:57,201 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:57,201 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:57,202 - INFO - integration_test - Step 7 completed in 0.574s
2026-01-19 12:43:57,215 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-19 12:43:57,216 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32243452 0.50942437 0.63999991 2.60000001 1.52      ]
2026-01-19 12:43:57,216 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.623m, drift=0.016m)
2026-01-19 12:43:57,216 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-19 12:43:57,217 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:57,217 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:57,231 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-19 12:43:57,231 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-19 12:43:57,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:57,258 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:57,258 - INFO - integration_test - Warmstart k=0: x0=1.3224345210412203 , y0=0.5094243709118275 , psi0=0.6399999092303198 , v0=2.600000006002083 , spline0=1.5200000024074696 , a0=0.0 , w0=0.0
2026-01-19 12:43:57,258 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:57,259 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794326664423, 0.6646951670949368, 0.6399999092303198, 2.600000006002083, 1.780000003007678], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5309794326664423, 0.6646951670949368, 0.6399999092303198, 2.600000006002083, 1.780000003007678], res_norm=3.623e+00
2026-01-19 12:43:57,260 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:57,261 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:57,276 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,316 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,332 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,346 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,361 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,375 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,390 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,405 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,421 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,435 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,450 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,464 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,479 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,493 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,509 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,524 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,554 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,569 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,583 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,598 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,610 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:57,789 - INFO - integration_test - Step 8: MPC solve successful
2026-01-19 12:43:57,794 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-19 12:43:57,794 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:57,794 - INFO - integration_test - === Applying control at step 8 ===
2026-01-19 12:43:57,795 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198517616, 'w': 0.8000000033108026}
2026-01-19 12:43:57,795 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:57,795 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:57,796 - INFO - integration_test - Step 8 completed in 0.580s
2026-01-19 12:43:57,810 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-19 12:43:57,811 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223938 0.67925685 0.71999991 2.80000001 1.8       ]
2026-01-19 12:43:57,811 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.264m)
2026-01-19 12:43:57,811 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-19 12:43:57,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:57,812 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:57,827 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-19 12:43:57,827 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-19 12:43:57,830 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:57,857 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:57,857 - INFO - integration_test - Warmstart k=0: x0=1.5322393765475746 , y0=0.6792568504844554 , psi0=0.7199999095614 , v0=2.800000007987259 , spline0=1.8000000032061956 , a0=0.0 , w0=0.0
2026-01-19 12:43:57,857 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:57,858 - INFO - integration_test - Dyn residual k=0: pred=[1.7427449980049825, 0.8638845401253026, 0.7199999095614, 2.800000007987259, 2.0800000040049214], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.7427449980049825, 0.8638845401253026, 0.7199999095614, 2.800000007987259, 2.0800000040049214], res_norm=4.058e+00
2026-01-19 12:43:57,859 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:57,860 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:57,876 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,917 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,932 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,946 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,962 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:57,977 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:57,993 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,008 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,023 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,038 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,053 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,067 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,082 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,096 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,111 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,126 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,141 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,156 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,171 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,186 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,202 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,213 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:58,383 - INFO - integration_test - Step 9: MPC solve successful
2026-01-19 12:43:58,388 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-19 12:43:58,388 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:58,388 - INFO - integration_test - === Applying control at step 9 ===
2026-01-19 12:43:58,388 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199018975, 'w': 0.8000000063994124}
2026-01-19 12:43:58,389 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:58,389 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:58,390 - INFO - integration_test - Step 9 completed in 0.579s
2026-01-19 12:43:58,402 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-19 12:43:58,403 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229396 0.8790874  0.79999991 3.00000001 2.1       ]
2026-01-19 12:43:58,403 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.634m, drift=0.052m)
2026-01-19 12:43:58,403 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-19 12:43:58,404 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:58,404 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:58,419 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-19 12:43:58,419 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-19 12:43:58,423 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:58,448 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:58,448 - INFO - integration_test - Warmstart k=0: x0=1.7422939601082277 , y0=0.8790874007991736 , psi0=0.7999999102013413 , v0=3.000000009977449 , spline0=2.1000000042039404 , a0=0.0 , w0=0.0
2026-01-19 12:43:58,448 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:58,449 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059929327965, 1.0942942100157695, 0.7999999102013413, 3.000000009977449, 2.400000005201685], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.9513059929327965, 1.0942942100157695, 0.7999999102013413, 3.000000009977449, 2.400000005201685], res_norm=4.517e+00
2026-01-19 12:43:58,450 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:58,450 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:58,465 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,505 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,521 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,535 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,551 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,565 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,580 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,595 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,611 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,626 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,641 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,655 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,670 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,685 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,700 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,714 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,730 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,745 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,760 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,774 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:58,789 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:58,801 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:58,958 - INFO - integration_test - Step 10: MPC solve successful
2026-01-19 12:43:58,963 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-19 12:43:58,963 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:58,964 - INFO - integration_test - === Applying control at step 10 ===
2026-01-19 12:43:58,964 - INFO - integration_test -   Control dict from planner: {'a': 1.999522419509406e-07, 'w': 0.7999999801545402}
2026-01-19 12:43:58,964 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:58,964 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:58,965 - INFO - integration_test - Step 10 completed in 0.562s
2026-01-19 12:43:58,977 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-19 12:43:58,978 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247944 1.10242076 0.87999991 3.00000003 2.40000001]
2026-01-19 12:43:58,978 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.594m, drift=0.352m)
2026-01-19 12:43:58,978 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-19 12:43:58,979 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:58,979 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:58,993 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-19 12:43:58,993 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-19 12:43:58,998 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:59,023 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:59,023 - INFO - integration_test - Warmstart k=0: x0=1.9424794395560514 , y0=1.1024207566071271 , psi0=0.8799999082167953 , v0=3.0000000299726732 , spline0=2.400000007201208 , a0=0.0 , w0=0.0
2026-01-19 12:43:59,023 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:59,024 - INFO - integration_test - Dyn residual k=0: pred=[2.1336248059476026, 1.3336424050429951, 0.8799999082167953, 3.0000000299726732, 2.700000010198475], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.1336248059476026, 1.3336424050429951, 0.8799999082167953, 3.0000000299726732, 2.700000010198475], res_norm=4.837e+00
2026-01-19 12:43:59,025 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:59,026 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:59,041 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,081 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,097 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,112 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,127 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,141 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,156 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,170 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,185 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,199 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,214 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,228 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,244 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,257 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,272 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,286 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,302 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,316 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,345 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,360 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,372 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:43:59,658 - INFO - integration_test - Step 11: MPC solve successful
2026-01-19 12:43:59,663 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-19 12:43:59,663 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:43:59,663 - INFO - integration_test - === Applying control at step 11 ===
2026-01-19 12:43:59,663 - INFO - integration_test -   Control dict from planner: {'a': -1.8713551622336312e-10, 'w': 0.2849964037129653}
2026-01-19 12:43:59,663 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:43:59,664 - INFO - integration_test -   Planner output success: True
2026-01-19 12:43:59,665 - INFO - integration_test - Step 11 completed in 0.687s
2026-01-19 12:43:59,678 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-19 12:43:59,679 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13030429 1.33633471 0.90849955 3.00000003 2.70000001]
2026-01-19 12:43:59,679 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.555m, drift=0.139m)
2026-01-19 12:43:59,679 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-19 12:43:59,680 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:59,680 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:43:59,695 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.130, 1.336), path_start=(0.000, 0.000), dist=2.515m
2026-01-19 12:43:59,695 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-19 12:43:59,698 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:43:59,723 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:43:59,723 - INFO - integration_test - Warmstart k=0: x0=2.130304287486335 , y0=1.33633470827 , psi0=0.9084995485880918 , v0=3.0000000299539598 , spline0=2.7000000101966037 , a0=0.0 , w0=0.0
2026-01-19 12:43:59,723 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:43:59,724 - INFO - integration_test - Dyn residual k=0: pred=[2.3147831903780207, 1.572909297321989, 0.9084995485880918, 3.0000000299539598, 3.0000000131919995], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3147831903780207, 1.572909297321989, 0.9084995485880918, 3.0000000299539598, 3.0000000131919995], res_norm=5.163e+00
2026-01-19 12:43:59,725 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:59,725 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:43:59,740 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,781 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,796 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,810 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,826 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,840 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,855 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,869 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,884 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,899 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,914 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,929 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,944 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,958 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:43:59,973 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:43:59,987 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,003 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,017 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,033 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,047 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,062 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,074 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:00,220 - INFO - integration_test - Step 12: MPC solve successful
2026-01-19 12:44:00,225 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-19 12:44:00,226 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:00,226 - INFO - integration_test - === Applying control at step 12 ===
2026-01-19 12:44:00,226 - INFO - integration_test -   Control dict from planner: {'a': -3.088879612313022e-07, 'w': -0.3050055197368101}
2026-01-19 12:44:00,226 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:00,226 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:00,227 - INFO - integration_test - Step 12 completed in 0.549s
2026-01-19 12:44:00,239 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-19 12:44:00,239 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.31836214 1.57005948 0.877999   3.         3.00000001]
2026-01-19 12:44:00,240 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.543m, drift=0.439m)
2026-01-19 12:44:00,240 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-19 12:44:00,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:00,241 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:00,255 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.318, 1.570), path_start=(0.000, 0.000), dist=2.800m
2026-01-19 12:44:00,255 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-19 12:44:00,258 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:00,282 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:00,282 - INFO - integration_test - Warmstart k=0: x0=2.3183621359301085 , y0=1.5700594815656745 , psi0=0.8779989966144108 , v0=2.999999999065164 , spline0=3.00000001010312 , a0=0.0 , w0=0.0
2026-01-19 12:44:00,282 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:00,283 - INFO - integration_test - Dyn residual k=0: pred=[2.5099697714788003, 1.800898200032377, 0.8779989966144108, 2.999999999065164, 3.3000000100096365], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5099697714788003, 1.800898200032377, 0.8779989966144108, 2.999999999065164, 3.3000000100096365], res_norm=5.496e+00
2026-01-19 12:44:00,284 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:00,285 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:00,300 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,341 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,356 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,371 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,401 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,416 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,430 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,446 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,460 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,475 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,489 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,505 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,520 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,535 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,549 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,565 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,579 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,594 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,609 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,625 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,636 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:00,794 - INFO - integration_test - Step 13: MPC solve successful
2026-01-19 12:44:00,799 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-19 12:44:00,799 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:00,799 - INFO - integration_test - === Applying control at step 13 ===
2026-01-19 12:44:00,799 - INFO - integration_test -   Control dict from planner: {'a': 3.07243694270361e-07, 'w': -0.1074323188337168}
2026-01-19 12:44:00,799 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:00,799 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:00,800 - INFO - integration_test - Step 13 completed in 0.562s
2026-01-19 12:44:00,814 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-19 12:44:00,815 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.51120605 1.79986453 0.86725576 3.00000003 3.30000001]
2026-01-19 12:44:00,815 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.472m, drift=0.227m)
2026-01-19 12:44:00,815 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-19 12:44:00,816 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:00,816 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:00,830 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.511, 1.800), path_start=(0.000, 0.000), dist=3.090m
2026-01-19 12:44:00,830 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-19 12:44:00,833 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:00,857 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:00,858 - INFO - integration_test - Warmstart k=0: x0=2.5112060517070742 , y0=1.7998645280504444 , psi0=0.8672557647310392 , v0=3.000000029789533 , spline0=3.3000000130820735 , a0=0.0 , w0=0.0
2026-01-19 12:44:00,858 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:00,859 - INFO - integration_test - Dyn residual k=0: pred=[2.705282538133112, 2.0286314819662055, 0.8672557647310392, 3.000000029789533, 3.600000016061027], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.705282538133112, 2.0286314819662055, 0.8672557647310392, 3.000000029789533, 3.600000016061027], res_norm=5.843e+00
2026-01-19 12:44:00,860 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:00,861 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:00,877 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,919 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,934 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,949 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,965 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:00,980 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:00,996 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,012 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,029 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,043 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,059 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,074 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,089 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,105 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,121 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,135 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,151 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,166 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,182 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,197 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,213 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,224 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:01,574 - INFO - integration_test - Step 14: MPC solve successful
2026-01-19 12:44:01,579 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-19 12:44:01,579 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:01,579 - INFO - integration_test - === Applying control at step 14 ===
2026-01-19 12:44:01,579 - INFO - integration_test -   Control dict from planner: {'a': -6.114332165195966e-06, 'w': -0.15752263023062135}
2026-01-19 12:44:01,579 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:01,579 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:01,581 - INFO - integration_test - Step 14 completed in 0.766s
2026-01-19 12:44:01,593 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-19 12:44:01,594 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.70707625 2.02709346 0.8515035  2.99999942 3.59999995]
2026-01-19 12:44:01,594 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.496m, drift=0.015m)
2026-01-19 12:44:01,595 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-19 12:44:01,595 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:01,596 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:01,610 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.707, 2.027), path_start=(0.000, 0.000), dist=3.382m
2026-01-19 12:44:01,610 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-19 12:44:01,614 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:01,639 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:01,639 - INFO - integration_test - Warmstart k=0: x0=2.707076253417706 , y0=2.027093457859938 , psi0=0.8515035017079771 , v0=2.9999994183563166 , spline0=3.5999999549177053 , a0=0.0 , w0=0.0
2026-01-19 12:44:01,639 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:01,640 - INFO - integration_test - Dyn residual k=0: pred=[2.904732069791956, 2.2527749665282633, 0.8515035017079771, 2.9999994183563166, 3.899999896753337], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.904732069791956, 2.2527749665282633, 0.8515035017079771, 2.9999994183563166, 3.899999896753337], res_norm=6.201e+00
2026-01-19 12:44:01,640 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:01,641 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:01,657 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,698 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,730 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,746 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,761 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,776 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,790 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,806 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,821 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,836 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,851 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,868 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,883 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,899 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,914 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,932 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,947 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:01,978 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:01,993 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,005 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:02,175 - INFO - integration_test - Step 15: MPC solve successful
2026-01-19 12:44:02,180 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-19 12:44:02,180 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:02,180 - INFO - integration_test - === Applying control at step 15 ===
2026-01-19 12:44:02,180 - INFO - integration_test -   Control dict from planner: {'a': 6.116432125845944e-06, 'w': -0.12170158990932461}
2026-01-19 12:44:02,181 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:02,181 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:02,182 - INFO - integration_test - Step 15 completed in 0.588s
2026-01-19 12:44:02,194 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-19 12:44:02,195 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.90610048 2.25156668 0.83933334 3.00000003 3.89999996]
2026-01-19 12:44:02,195 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.419m, drift=0.315m)
2026-01-19 12:44:02,195 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-19 12:44:02,196 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:02,196 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:02,211 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.906, 2.252), path_start=(0.000, 0.000), dist=3.676m
2026-01-19 12:44:02,211 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-19 12:44:02,214 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:02,239 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:02,239 - INFO - integration_test - Warmstart k=0: x0=2.9061004839104245 , y0=2.2515666818505586 , psi0=0.8393333427170446 , v0=3.000000029999529 , spline0=3.8999999579176583 , a0=0.0 , w0=0.0
2026-01-19 12:44:02,239 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:02,240 - INFO - integration_test - Dyn residual k=0: pred=[3.1064882156871034, 2.4748260797566033, 0.8393333427170446, 3.000000029999529, 4.199999960917611], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.1064882156871034, 2.4748260797566033, 0.8393333427170446, 3.000000029999529, 4.199999960917611], res_norm=6.567e+00
2026-01-19 12:44:02,241 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:02,241 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:02,256 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,296 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,312 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,327 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,344 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,358 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,374 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,388 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,404 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,418 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,434 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,448 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,463 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,479 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,494 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,509 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,525 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,539 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,554 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,569 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:02,584 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:02,595 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:02,834 - INFO - integration_test - Step 16: MPC solve successful
2026-01-19 12:44:02,842 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-19 12:44:02,842 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:02,843 - INFO - integration_test - === Applying control at step 16 ===
2026-01-19 12:44:02,843 - INFO - integration_test -   Control dict from planner: {'a': -1.7828539512267313e-10, 'w': -0.12022155820126852}
2026-01-19 12:44:02,843 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:02,843 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:02,845 - INFO - integration_test - Step 16 completed in 0.651s
2026-01-19 12:44:02,864 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-19 12:44:02,865 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.1078254  2.47361617 0.82731119 3.00000003 4.19999996]
2026-01-19 12:44:02,865 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.411m, drift=0.103m)
2026-01-19 12:44:02,865 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-19 12:44:02,866 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:02,866 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:02,894 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.108, 2.474), path_start=(0.000, 0.000), dist=3.972m
2026-01-19 12:44:02,894 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-19 12:44:02,900 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:02,940 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:02,941 - INFO - integration_test - Warmstart k=0: x0=3.1078254021130407 , y0=2.473616170006604 , psi0=0.8273111868969177 , v0=3.0000000299817007 , spline0=4.199999960915829 , a0=0.0 , w0=0.0
2026-01-19 12:44:02,941 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:02,942 - INFO - integration_test - Dyn residual k=0: pred=[3.3108826474348927, 2.6944503995119127, 0.8273111868969177, 3.0000000299817007, 4.499999963913999], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3108826474348927, 2.6944503995119127, 0.8273111868969177, 3.0000000299817007, 4.499999963913999], res_norm=6.939e+00
2026-01-19 12:44:02,944 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:02,945 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:02,961 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,007 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,026 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,042 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,061 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,079 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,098 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,115 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,131 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,145 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,160 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,174 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,190 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,204 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,220 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,234 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,249 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,263 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,279 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,293 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,308 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,319 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:03,460 - INFO - integration_test - Step 17: MPC solve successful
2026-01-19 12:44:03,465 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-19 12:44:03,465 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:03,465 - INFO - integration_test - === Applying control at step 17 ===
2026-01-19 12:44:03,465 - INFO - integration_test -   Control dict from planner: {'a': -5.894276737773335e-09, 'w': -0.12175644999955652}
2026-01-19 12:44:03,465 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:03,465 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:03,466 - INFO - integration_test - Step 17 completed in 0.602s
2026-01-19 12:44:03,479 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-19 12:44:03,479 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.31222201 2.69320878 0.81513554 3.00000003 4.49999996]
2026-01-19 12:44:03,480 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.398m, drift=0.403m)
2026-01-19 12:44:03,480 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-19 12:44:03,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:03,481 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:03,496 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.312, 2.693), path_start=(0.000, 0.000), dist=4.269m
2026-01-19 12:44:03,496 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-19 12:44:03,500 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:03,524 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:03,525 - INFO - integration_test - Warmstart k=0: x0=3.3122220133542823 , y0=2.693208782026403 , psi0=0.8151355418969621 , v0=3.000000029392273 , spline0=4.499999963855056 , a0=0.0 , w0=0.0
2026-01-19 12:44:03,525 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:03,526 - INFO - integration_test - Dyn residual k=0: pred=[3.517952940324521, 2.9115543509109183, 0.8151355418969621, 3.000000029392273, 4.799999966794283], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.517952940324521, 2.9115543509109183, 0.8151355418969621, 3.000000029392273, 4.799999966794283], res_norm=7.318e+00
2026-01-19 12:44:03,527 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:03,528 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:03,543 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,582 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,598 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,613 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,629 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,645 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,662 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,677 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,692 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,707 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,722 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,737 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,752 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,766 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,782 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,796 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,812 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,826 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,842 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,856 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:03,871 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:03,882 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:04,057 - INFO - integration_test - Step 18: MPC solve successful
2026-01-19 12:44:04,062 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-19 12:44:04,062 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:04,062 - INFO - integration_test - === Applying control at step 18 ===
2026-01-19 12:44:04,062 - INFO - integration_test -   Control dict from planner: {'a': 5.630914206722676e-09, 'w': -0.1217570077366131}
2026-01-19 12:44:04,062 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:04,062 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:04,063 - INFO - integration_test - Step 18 completed in 0.584s
2026-01-19 12:44:04,076 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-19 12:44:04,077 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.5192771  2.91029651 0.80295984 3.00000003 4.79999997]
2026-01-19 12:44:04,077 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.347m, drift=0.191m)
2026-01-19 12:44:04,077 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-19 12:44:04,078 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:04,078 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:04,092 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.519, 2.910), path_start=(0.000, 0.000), dist=4.567m
2026-01-19 12:44:04,092 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-19 12:44:04,096 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:04,121 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:04,121 - INFO - integration_test - Warmstart k=0: x0=3.5192770959286555 , y0=2.9102965124713194 , psi0=0.8029598411233009 , v0=3.0000000299553644 , spline0=4.799999966850592 , a0=0.0 , w0=0.0
2026-01-19 12:44:04,121 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:04,122 - INFO - integration_test - Dyn residual k=0: pred=[3.7276512181852683, 3.1261210406675097, 0.8029598411233009, 3.0000000299553644, 5.099999969846128], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.7276512181852683, 3.1261210406675097, 0.8029598411233009, 3.0000000299553644, 5.099999969846128], res_norm=7.702e+00
2026-01-19 12:44:04,123 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:04,123 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:04,138 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,178 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,194 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,208 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,224 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,238 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,254 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,268 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,283 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,297 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,313 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,327 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,342 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,356 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,371 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,385 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,401 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,415 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,431 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,446 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,461 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,472 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:04,663 - INFO - integration_test - Step 19: MPC solve successful
2026-01-19 12:44:04,667 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-19 12:44:04,667 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:04,667 - INFO - integration_test - === Applying control at step 19 ===
2026-01-19 12:44:04,668 - INFO - integration_test -   Control dict from planner: {'a': -5.667640900888874e-07, 'w': -0.1044255140838953}
2026-01-19 12:44:04,668 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:04,668 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:04,669 - INFO - integration_test - Step 19 completed in 0.592s
2026-01-19 12:44:04,683 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-19 12:44:04,684 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.7287743  3.12502915 0.79251729 2.99999997 5.09999996]
2026-01-19 12:44:04,685 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.410m, drift=0.491m)
2026-01-19 12:44:04,685 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-19 12:44:04,685 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:04,685 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:04,699 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.729, 3.125), path_start=(0.000, 0.000), dist=4.865m
2026-01-19 12:44:04,699 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-19 12:44:04,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:04,727 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:04,727 - INFO - integration_test - Warmstart k=0: x0=3.728774298258266 , y0=3.1250291473110465 , psi0=0.7925172897149113 , v0=2.9999999732789555 , spline0=5.099999964178488 , a0=0.0 , w0=0.0
2026-01-19 12:44:04,727 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:04,728 - INFO - integration_test - Dyn residual k=0: pred=[3.9393907731353925, 3.3386659861452466, 0.7925172897149113, 2.9999999732789555, 5.399999961506383], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9393907731353925, 3.3386659861452466, 0.7925172897149113, 2.9999999732789555, 5.399999961506383], res_norm=8.090e+00
2026-01-19 12:44:04,728 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:04,729 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:04,744 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,784 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,799 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,813 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,828 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,842 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,858 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,872 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,903 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,918 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,933 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,949 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,963 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:04,979 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:04,993 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,024 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,039 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,054 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,069 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,080 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:05,322 - INFO - integration_test - Step 20: MPC solve successful
2026-01-19 12:44:05,327 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-19 12:44:05,327 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:05,328 - INFO - integration_test - === Applying control at step 20 ===
2026-01-19 12:44:05,328 - INFO - integration_test -   Control dict from planner: {'a': 5.670304187548969e-07, 'w': -0.09155715722055367}
2026-01-19 12:44:05,328 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:05,328 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:05,329 - INFO - integration_test - Step 20 completed in 0.645s
2026-01-19 12:44:05,343 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-19 12:44:05,343 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.94036582 3.33769884 0.78336157 3.00000003 5.39999997]
2026-01-19 12:44:05,344 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.311m, drift=0.279m)
2026-01-19 12:44:05,344 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-19 12:44:05,345 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:05,345 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:05,359 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.940, 3.338), path_start=(0.000, 0.000), dist=5.164m
2026-01-19 12:44:05,360 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-19 12:44:05,363 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:05,389 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:05,389 - INFO - integration_test - Warmstart k=0: x0=3.940365824838683 , y0=3.3376988378546564 , psi0=0.783361573992856 , v0=3.0000000299819973 , spline0=5.399999967176687 , a0=0.0 , w0=0.0
2026-01-19 12:44:05,389 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:05,390 - INFO - integration_test - Dyn residual k=0: pred=[4.152929446944414, 3.549398408841968, 0.783361573992856, 3.0000000299819973, 5.699999970174887], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.152929446944414, 3.549398408841968, 0.783361573992856, 3.0000000299819973, 5.699999970174887], res_norm=8.482e+00
2026-01-19 12:44:05,391 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:05,392 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:05,408 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,448 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,465 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,481 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,498 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,515 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,532 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,548 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,566 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,581 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,597 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,613 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,628 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,643 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,658 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,672 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,687 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,702 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,718 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,732 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:05,747 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:05,758 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:05,953 - INFO - integration_test - Step 21: MPC solve successful
2026-01-19 12:44:05,958 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-19 12:44:05,958 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:05,958 - INFO - integration_test - === Applying control at step 21 ===
2026-01-19 12:44:05,958 - INFO - integration_test -   Control dict from planner: {'a': -7.833775660396085e-07, 'w': -0.08062790857602765}
2026-01-19 12:44:05,958 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:05,958 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:05,960 - INFO - integration_test - Step 21 completed in 0.617s
2026-01-19 12:44:05,972 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-19 12:44:05,972 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.15378058 3.54853919 0.77529878 2.99999995 5.69999996]
2026-01-19 12:44:05,973 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.341m, drift=0.067m)
2026-01-19 12:44:05,973 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-19 12:44:05,973 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:05,974 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:05,987 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.154, 3.549), path_start=(0.000, 0.000), dist=5.463m
2026-01-19 12:44:05,988 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-19 12:44:05,991 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:06,016 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:06,016 - INFO - integration_test - Warmstart k=0: x0=4.153780581144319 , y0=3.5485391890131663 , psi0=0.7752987831352532 , v0=2.9999999516442406 , spline0=5.699999962341112 , a0=0.0 , w0=0.0
2026-01-19 12:44:06,016 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:06,017 - INFO - integration_test - Dyn residual k=0: pred=[4.368044159332971, 3.758518035948875, 0.7752987831352532, 2.9999999516442406, 5.999999957505536], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.368044159332971, 3.758518035948875, 0.7752987831352532, 2.9999999516442406, 5.999999957505536], res_norm=8.877e+00
2026-01-19 12:44:06,017 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:06,018 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:06,033 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,073 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,088 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,102 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,118 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,132 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,146 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,161 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,176 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,189 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,205 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,219 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,234 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,248 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,263 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,276 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,292 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,307 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,322 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,337 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,352 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,362 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:06,568 - INFO - integration_test - Step 22: MPC solve successful
2026-01-19 12:44:06,573 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-19 12:44:06,573 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:06,573 - INFO - integration_test - === Applying control at step 22 ===
2026-01-19 12:44:06,573 - INFO - integration_test -   Control dict from planner: {'a': 7.835562088519932e-07, 'w': -0.09321236626983222}
2026-01-19 12:44:06,573 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:06,573 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:06,575 - INFO - integration_test - Step 22 completed in 0.603s
2026-01-19 12:44:06,587 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-19 12:44:06,587 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.36901968 3.7575164  0.76597755 3.00000003 5.99999997]
2026-01-19 12:44:06,588 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.308m, drift=0.367m)
2026-01-19 12:44:06,588 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-19 12:44:06,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:06,589 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:06,603 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.369, 3.758), path_start=(0.000, 0.000), dist=5.763m
2026-01-19 12:44:06,603 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-19 12:44:06,607 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:06,633 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:06,633 - INFO - integration_test - Warmstart k=0: x0=4.369019683604564 , y0=3.7575164044767244 , psi0=0.76597754650827 , v0=3.0000000299998617 , spline0=5.999999965341098 , a0=0.0 , w0=0.0
2026-01-19 12:44:06,633 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:06,634 - INFO - integration_test - Dyn residual k=0: pred=[4.585231193489926, 3.9654889622652068, 0.76597754650827, 3.0000000299998617, 6.2999999683410834], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.585231193489926, 3.9654889622652068, 0.76597754650827, 3.0000000299998617, 6.2999999683410834], res_norm=9.275e+00
2026-01-19 12:44:06,635 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:06,636 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:06,651 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,693 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,710 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,726 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,743 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,757 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,773 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,787 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,802 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,817 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,833 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,847 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,862 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,877 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,893 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,907 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,923 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,938 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,954 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,968 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:06,983 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:06,996 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:07,145 - INFO - integration_test - Step 23: MPC solve successful
2026-01-19 12:44:07,150 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-19 12:44:07,150 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:07,150 - INFO - integration_test - === Applying control at step 23 ===
2026-01-19 12:44:07,150 - INFO - integration_test -   Control dict from planner: {'a': -2.1090361007433677e-06, 'w': -0.08539332691508658}
2026-01-19 12:44:07,150 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:07,150 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:07,152 - INFO - integration_test - Step 23 completed in 0.565s
2026-01-19 12:44:07,165 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-19 12:44:07,166 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.58611653 3.96456328 0.75743821 2.99999982 6.29999995]
2026-01-19 12:44:07,166 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.281m, drift=0.155m)
2026-01-19 12:44:07,166 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-19 12:44:07,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:07,167 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:07,181 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.586, 3.965), path_start=(0.000, 0.000), dist=6.062m
2026-01-19 12:44:07,181 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-19 12:44:07,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:07,210 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:07,210 - INFO - integration_test - Warmstart k=0: x0=4.586116526195515 , y0=3.9645632820433545 , psi0=0.7574382138167614 , v0=2.9999998190962516 , spline0=6.299999947250723 , a0=0.0 , w0=0.0
2026-01-19 12:44:07,210 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:07,211 - INFO - integration_test - Dyn residual k=0: pred=[4.804096062988984, 4.1706819631110355, 0.7574382138167614, 2.9999998190962516, 6.599999929160348], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.804096062988984, 4.1706819631110355, 0.7574382138167614, 2.9999998190962516, 6.599999929160348], res_norm=9.675e+00
2026-01-19 12:44:07,212 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:07,213 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:07,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,270 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,318 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,345 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,376 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,404 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,430 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,450 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,472 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,494 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,516 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,536 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,554 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,572 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,588 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,605 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,620 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,637 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,652 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,668 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,680 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:07,848 - INFO - integration_test - Step 24: MPC solve successful
2026-01-19 12:44:07,852 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-19 12:44:07,852 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:07,852 - INFO - integration_test - === Applying control at step 24 ===
2026-01-19 12:44:07,852 - INFO - integration_test -   Control dict from planner: {'a': 2.0766941240708774e-06, 'w': -0.0582144771519485}
2026-01-19 12:44:07,852 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:07,852 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:07,854 - INFO - integration_test - Step 24 completed in 0.688s
2026-01-19 12:44:07,867 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-19 12:44:07,868 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.80469479 4.17004633 0.75161677 3.00000003 6.59999995]
2026-01-19 12:44:07,868 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.337m, drift=0.455m)
2026-01-19 12:44:07,868 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-19 12:44:07,869 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:07,869 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:07,883 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.805, 4.170), path_start=(0.000, 0.000), dist=6.362m
2026-01-19 12:44:07,883 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-19 12:44:07,886 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:07,912 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:07,912 - INFO - integration_test - Warmstart k=0: x0=4.804694792237579 , y0=4.170046329570086 , psi0=0.7516167661015665 , v0=3.000000026765664 , spline0=6.599999949927289 , a0=0.0 , w0=0.0
2026-01-19 12:44:07,912 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:07,913 - INFO - integration_test - Dyn residual k=0: pred=[5.023870552979257, 4.374892582914507, 0.7516167661015665, 3.000000026765664, 6.899999952603856], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.023870552979257, 4.374892582914507, 0.7516167661015665, 3.000000026765664, 6.899999952603856], res_norm=1.008e+01
2026-01-19 12:44:07,913 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:07,914 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:07,930 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:07,969 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:07,984 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,000 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,016 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,031 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,046 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,061 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,076 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,091 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,106 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,121 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,150 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,165 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,180 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,197 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,212 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,228 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,242 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,257 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,269 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:08,468 - INFO - integration_test - Step 25: MPC solve successful
2026-01-19 12:44:08,472 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-19 12:44:08,472 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:08,472 - INFO - integration_test - === Applying control at step 25 ===
2026-01-19 12:44:08,472 - INFO - integration_test -   Control dict from planner: {'a': 3.234190015106424e-08, 'w': -0.07030734953233339}
2026-01-19 12:44:08,472 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:08,472 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:08,474 - INFO - integration_test - Step 25 completed in 0.606s
2026-01-19 12:44:08,486 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-19 12:44:08,487 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.02458885 4.37412042 0.74458603 3.00000003 6.89999995]
2026-01-19 12:44:08,488 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.248m, drift=0.242m)
2026-01-19 12:44:08,488 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-19 12:44:08,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:08,489 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:08,504 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.025, 4.374), path_start=(0.000, 0.000), dist=6.662m
2026-01-19 12:44:08,504 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-19 12:44:08,507 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:08,532 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:08,532 - INFO - integration_test - Warmstart k=0: x0=5.024588854304905 , y0=4.3741204152277176 , psi0=0.7445860311483331 , v0=3.0000000299998537 , spline0=6.899999952927274 , a0=0.0 , w0=0.0
2026-01-19 12:44:08,532 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:08,533 - INFO - integration_test - Dyn residual k=0: pred=[5.245199406090723, 4.577420651923959, 0.7445860311483331, 3.0000000299998537, 7.199999955927259], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245199406090723, 4.577420651923959, 0.7445860311483331, 3.0000000299998537, 7.199999955927259], res_norm=1.048e+01
2026-01-19 12:44:08,534 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:08,535 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:08,550 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,590 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,608 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,623 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,641 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,655 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,671 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,688 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,706 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,722 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,739 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,755 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,770 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,785 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,800 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,816 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,831 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,847 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,878 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:08,894 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:08,905 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:09,083 - INFO - integration_test - Step 26: MPC solve successful
2026-01-19 12:44:09,087 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-19 12:44:09,087 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:09,088 - INFO - integration_test - === Applying control at step 26 ===
2026-01-19 12:44:09,088 - INFO - integration_test -   Control dict from planner: {'a': -1.2380312004799476e-09, 'w': -0.06178665387486029}
2026-01-19 12:44:09,088 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:09,088 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:09,089 - INFO - integration_test - Step 26 completed in 0.602s
2026-01-19 12:44:09,103 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-19 12:44:09,104 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.24582606 4.57673782 0.73840737 3.00000003 7.19999996]
2026-01-19 12:44:09,104 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.315m, drift=0.030m)
2026-01-19 12:44:09,104 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-19 12:44:09,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:09,105 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:09,119 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.246, 4.577), path_start=(0.000, 0.000), dist=6.962m
2026-01-19 12:44:09,119 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-19 12:44:09,123 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:09,148 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:09,148 - INFO - integration_test - Warmstart k=0: x0=5.245826062490802 , y0=4.576737821171881 , psi0=0.7384073657608471 , v0=3.0000000298760505 , spline0=7.19999995591488 , a0=0.0 , w0=0.0
2026-01-19 12:44:09,148 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:09,149 - INFO - integration_test - Dyn residual k=0: pred=[5.467688519420499, 4.77867110717912, 0.7384073657608471, 3.0000000298760505, 7.499999958902485], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.467688519420499, 4.77867110717912, 0.7384073657608471, 3.0000000298760505, 7.499999958902485], res_norm=1.089e+01
2026-01-19 12:44:09,149 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:09,150 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:09,165 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,206 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,222 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,237 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,267 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,298 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,313 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,328 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,343 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,357 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,372 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,387 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,403 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,418 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,434 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,448 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,464 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,482 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,517 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,542 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:09,754 - INFO - integration_test - Step 27: MPC solve successful
2026-01-19 12:44:09,760 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-19 12:44:09,760 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:09,760 - INFO - integration_test - === Applying control at step 27 ===
2026-01-19 12:44:09,760 - INFO - integration_test -   Control dict from planner: {'a': -2.802939026627243e-07, 'w': -0.06541688165239222}
2026-01-19 12:44:09,760 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:09,760 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:09,762 - INFO - integration_test - Step 27 completed in 0.658s
2026-01-19 12:44:09,773 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-19 12:44:09,773 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.46834743 4.77794399 0.73186568 3.         7.49999996]
2026-01-19 12:44:09,774 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.250m, drift=0.330m)
2026-01-19 12:44:09,774 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-19 12:44:09,775 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:09,775 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:09,790 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.468, 4.778), path_start=(0.000, 0.000), dist=7.262m
2026-01-19 12:44:09,790 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-19 12:44:09,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:09,819 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:09,819 - INFO - integration_test - Warmstart k=0: x0=5.46834742593638 , y0=4.777943991082102 , psi0=0.7318656775956078 , v0=3.00000000184666 , spline0=7.499999956099546 , a0=0.0 , w0=0.0
2026-01-19 12:44:09,819 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:09,820 - INFO - integration_test - Dyn residual k=0: pred=[5.691526108807505, 4.978421609839682, 0.7318656775956078, 3.00000000184666, 7.799999956284212], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.691526108807505, 4.978421609839682, 0.7318656775956078, 3.00000000184666, 7.799999956284212], res_norm=1.129e+01
2026-01-19 12:44:09,821 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:09,822 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:09,837 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,878 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,894 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,910 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,926 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,940 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,956 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:09,971 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:09,987 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,002 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,019 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,033 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,049 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,063 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,078 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,093 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,109 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,124 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,139 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,153 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,168 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,180 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:10,442 - INFO - integration_test - Step 28: MPC solve successful
2026-01-19 12:44:10,447 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-19 12:44:10,448 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:10,448 - INFO - integration_test - === Applying control at step 28 ===
2026-01-19 12:44:10,448 - INFO - integration_test -   Control dict from planner: {'a': 2.746478199611591e-07, 'w': -0.049336194781873025}
2026-01-19 12:44:10,448 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:10,448 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:10,449 - INFO - integration_test - Step 28 completed in 0.676s
2026-01-19 12:44:10,462 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-19 12:44:10,463 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.69201974 4.97787026 0.72693206 3.00000003 7.79999996]
2026-01-19 12:44:10,463 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.252m, drift=0.118m)
2026-01-19 12:44:10,463 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-19 12:44:10,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:10,464 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:10,480 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.692, 4.978), path_start=(0.000, 0.000), dist=7.562m
2026-01-19 12:44:10,480 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-19 12:44:10,484 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:10,511 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:10,512 - INFO - integration_test - Warmstart k=0: x0=5.692019743588678 , y0=4.977870259232305 , psi0=0.7269320581174206 , v0=3.000000029311442 , spline0=7.79999995903069 , a0=0.0 , w0=0.0
2026-01-19 12:44:10,512 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:10,513 - INFO - integration_test - Dyn residual k=0: pred=[5.916184788638254, 5.177244365717095, 0.7269320581174206, 3.000000029311442, 8.099999961961835], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.916184788638254, 5.177244365717095, 0.7269320581174206, 3.000000029311442, 8.099999961961835], res_norm=1.170e+01
2026-01-19 12:44:10,514 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:10,514 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:10,532 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,572 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,588 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,603 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,618 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,633 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,648 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,662 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,677 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,691 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,706 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,721 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,736 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,750 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,765 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,780 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,810 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,826 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,840 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:10,856 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:10,867 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:11,041 - INFO - integration_test - Step 29: MPC solve successful
2026-01-19 12:44:11,046 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-19 12:44:11,046 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:11,046 - INFO - integration_test - === Applying control at step 29 ===
2026-01-19 12:44:11,046 - INFO - integration_test -   Control dict from planner: {'a': 6.8767539280008e-09, 'w': -0.056499301352696596}
2026-01-19 12:44:11,046 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:11,046 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:11,047 - INFO - integration_test - Step 29 completed in 0.585s
2026-01-19 12:44:11,060 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-19 12:44:11,061 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.91674682 5.17661005 0.72128213 3.00000003 8.09999996]
2026-01-19 12:44:11,061 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.285m, drift=0.418m)
2026-01-19 12:44:11,061 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-19 12:44:11,062 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:11,062 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:11,077 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.917, 5.177), path_start=(0.000, 0.000), dist=7.862m
2026-01-19 12:44:11,077 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-19 12:44:11,081 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:11,107 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:11,107 - INFO - integration_test - Warmstart k=0: x0=5.916746819432022 , y0=5.176610048277432 , psi0=0.7212821279821509 , v0=3.0000000299991174 , spline0=8.099999962030601 , a0=0.0 , w0=0.0
2026-01-19 12:44:11,107 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:11,108 - INFO - integration_test - Dyn residual k=0: pred=[6.142034730456313, 5.374714462529759, 0.7212821279821509, 3.0000000299991174, 8.399999965030513], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.142034730456313, 5.374714462529759, 0.7212821279821509, 3.0000000299991174, 8.399999965030513], res_norm=1.211e+01
2026-01-19 12:44:11,109 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:11,110 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:11,125 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,165 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,180 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,194 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,211 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,225 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,240 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,255 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,270 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,284 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,300 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,314 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,329 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,344 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,359 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,373 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,388 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,403 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,419 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,433 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,448 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,459 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:11,814 - INFO - integration_test - Step 30: MPC solve successful
2026-01-19 12:44:11,819 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-19 12:44:11,819 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:11,819 - INFO - integration_test - === Applying control at step 30 ===
2026-01-19 12:44:11,819 - INFO - integration_test -   Control dict from planner: {'a': -2.974928853921511e-07, 'w': -0.028194366110202262}
2026-01-19 12:44:11,819 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:11,819 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:11,821 - INFO - integration_test - Step 30 completed in 0.760s
2026-01-19 12:44:11,835 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-19 12:44:11,836 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.1423137  5.37439661 0.71846269 3.         8.39999996]
2026-01-19 12:44:11,836 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.212m, drift=0.206m)
2026-01-19 12:44:11,836 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-19 12:44:11,837 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:11,837 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:11,851 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.142, 5.374), path_start=(0.000, 0.000), dist=8.162m
2026-01-19 12:44:11,851 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-19 12:44:11,854 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:11,878 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:11,878 - INFO - integration_test - Warmstart k=0: x0=6.142313702094442 , y0=5.374396606805242 , psi0=0.7184626913711306 , v0=3.000000000249829 , spline0=8.399999962055585 , a0=0.0 , w0=0.0
2026-01-19 12:44:11,878 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:11,879 - INFO - integration_test - Dyn residual k=0: pred=[6.368159257546196, 5.571865047569021, 0.7184626913711306, 3.000000000249829, 8.699999962080568], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.368159257546196, 5.571865047569021, 0.7184626913711306, 3.000000000249829, 8.699999962080568], res_norm=1.252e+01
2026-01-19 12:44:11,880 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:11,881 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:11,897 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,937 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,952 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,966 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:11,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:11,996 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,012 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,026 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,041 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,056 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,071 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,086 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,102 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,117 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,132 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,147 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,163 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,178 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,194 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,211 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,229 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,243 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:12,443 - INFO - integration_test - Step 31: MPC solve successful
2026-01-19 12:44:12,448 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-19 12:44:12,448 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:12,448 - INFO - integration_test - === Applying control at step 31 ===
2026-01-19 12:44:12,448 - INFO - integration_test -   Control dict from planner: {'a': 2.9750007357690896e-07, 'w': -0.0767747887111536}
2026-01-19 12:44:12,449 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:12,449 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:12,450 - INFO - integration_test - Step 31 completed in 0.614s
2026-01-19 12:44:12,465 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-19 12:44:12,465 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.36891507 5.57099615 0.71078521 3.00000003 8.69999997]
2026-01-19 12:44:12,466 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.312m, drift=0.006m)
2026-01-19 12:44:12,466 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-19 12:44:12,467 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:12,467 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:12,483 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.369, 5.571), path_start=(0.000, 0.000), dist=8.462m
2026-01-19 12:44:12,483 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-19 12:44:12,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:12,513 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:12,513 - INFO - integration_test - Warmstart k=0: x0=6.368915066150484 , y0=5.570996150647282 , psi0=0.7107852125000153 , v0=3.0000000299998364 , spline0=8.699999965055568 , a0=0.0 , w0=0.0
2026-01-19 12:44:12,513 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:12,514 - INFO - integration_test - Dyn residual k=0: pred=[6.596270012693285, 5.76672486617597, 0.7107852125000153, 3.0000000299998364, 8.999999968055551], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.596270012693285, 5.76672486617597, 0.7107852125000153, 3.0000000299998364, 8.999999968055551], res_norm=1.293e+01
2026-01-19 12:44:12,515 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:12,516 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:12,532 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,575 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,593 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,609 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,626 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,642 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,658 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,674 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,691 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,706 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,723 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,738 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,755 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,771 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,787 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,803 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,820 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,836 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,852 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,868 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:12,885 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:12,897 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:13,273 - INFO - integration_test - Step 32: MPC solve successful
2026-01-19 12:44:13,278 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-19 12:44:13,278 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:13,278 - INFO - integration_test - === Applying control at step 32 ===
2026-01-19 12:44:13,278 - INFO - integration_test -   Control dict from planner: {'a': -2.0601217205279548e-07, 'w': -0.038407092270067694}
2026-01-19 12:44:13,278 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:13,278 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:13,280 - INFO - integration_test - Step 32 completed in 0.815s
2026-01-19 12:44:13,292 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-19 12:44:13,293 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.59664532 5.76628778 0.7069445  3.00000001 8.99999997]
2026-01-19 12:44:13,294 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.208m, drift=0.294m)
2026-01-19 12:44:13,294 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-19 12:44:13,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:13,295 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:13,310 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.597, 5.766), path_start=(0.000, 0.000), dist=8.762m
2026-01-19 12:44:13,310 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-19 12:44:13,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:13,338 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:13,338 - INFO - integration_test - Warmstart k=0: x0=6.596645321037258 , y0=5.766287782721905 , psi0=0.7069445032730085 , v0=3.000000009398619 , spline0=8.99999996599543 , a0=0.0 , w0=0.0
2026-01-19 12:44:13,338 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:13,339 - INFO - integration_test - Dyn residual k=0: pred=[6.824750324389486, 5.961141851218299, 0.7069445032730085, 3.000000009398619, 9.299999966935292], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.824750324389486, 5.961141851218299, 0.7069445032730085, 3.000000009398619, 9.299999966935292], res_norm=1.335e+01
2026-01-19 12:44:13,340 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:13,341 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:13,356 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,396 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,411 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,425 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,441 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,455 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,470 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,485 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,501 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,528 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,550 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,573 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,598 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,619 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,637 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,657 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,677 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,694 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,711 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,727 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:13,743 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:13,755 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:13,917 - INFO - integration_test - Step 33: MPC solve successful
2026-01-19 12:44:13,921 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-19 12:44:13,921 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:13,921 - INFO - integration_test - === Applying control at step 33 ===
2026-01-19 12:44:13,921 - INFO - integration_test -   Control dict from planner: {'a': 2.0394055129824363e-07, 'w': -0.05269700926970621}
2026-01-19 12:44:13,921 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:13,921 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:13,923 - INFO - integration_test - Step 33 completed in 0.630s
2026-01-19 12:44:13,935 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-19 12:44:13,936 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.82526268 5.96053993 0.7016748  3.00000003 9.29999997]
2026-01-19 12:44:13,936 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.242m, drift=0.082m)
2026-01-19 12:44:13,937 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-19 12:44:13,937 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:13,937 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:13,951 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.825, 5.961), path_start=(0.000, 0.000), dist=9.062m
2026-01-19 12:44:13,952 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-19 12:44:13,955 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:13,979 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:13,979 - INFO - integration_test - Warmstart k=0: x0=6.825262679576842 , y0=5.96053992885484 , psi0=0.7016748023460379 , v0=3.0000000297926745 , spline0=9.299999968974697 , a0=0.0 , w0=0.0
2026-01-19 12:44:13,980 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:13,980 - INFO - integration_test - Dyn residual k=0: pred=[7.054391335197757, 6.154189253565546, 0.7016748023460379, 3.0000000297926745, 9.599999971953965], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.054391335197757, 6.154189253565546, 0.7016748023460379, 3.0000000297926745, 9.599999971953965], res_norm=1.376e+01
2026-01-19 12:44:13,981 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:13,982 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:13,997 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,037 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,053 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,067 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,083 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,098 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,127 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,142 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,156 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,172 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,187 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,202 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,216 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,232 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,246 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,261 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,275 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,291 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,306 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,321 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,332 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:14,540 - INFO - integration_test - Step 34: MPC solve successful
2026-01-19 12:44:14,544 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-19 12:44:14,545 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:14,545 - INFO - integration_test - === Applying control at step 34 ===
2026-01-19 12:44:14,545 - INFO - integration_test -   Control dict from planner: {'a': 2.0715140061232583e-09, 'w': -0.036251850209091094}
2026-01-19 12:44:14,545 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:14,545 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:14,546 - INFO - integration_test - Step 34 completed in 0.610s
2026-01-19 12:44:14,560 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-19 12:44:14,561 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.05474184 6.15377351 0.69804962 3.00000003 9.59999997]
2026-01-19 12:44:14,561 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.242m, drift=0.382m)
2026-01-19 12:44:14,561 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-19 12:44:14,562 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:14,562 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:14,576 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.055, 6.154), path_start=(0.000, 0.000), dist=9.362m
2026-01-19 12:44:14,576 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-19 12:44:14,580 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:14,605 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:14,605 - INFO - integration_test - Warmstart k=0: x0=7.054741840270393 , y0=6.153773512986747 , psi0=0.6980496173251287 , v0=3.0000000299998257 , spline0=9.59999997197468 , a0=0.0 , w0=0.0
2026-01-19 12:44:14,605 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:14,606 - INFO - integration_test - Dyn residual k=0: pred=[7.284571003401886, 6.346590933294839, 0.6980496173251287, 3.0000000299998257, 9.899999974974664], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.284571003401886, 6.346590933294839, 0.6980496173251287, 3.0000000299998257, 9.899999974974664], res_norm=1.417e+01
2026-01-19 12:44:14,607 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:14,608 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:14,624 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,664 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,679 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,694 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,710 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,725 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,740 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,754 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,769 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,783 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,799 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,813 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,828 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,843 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,859 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,873 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,889 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,904 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,920 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,935 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:14,950 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:14,961 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:15,153 - INFO - integration_test - Step 35: MPC solve successful
2026-01-19 12:44:15,158 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-19 12:44:15,158 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:15,158 - INFO - integration_test - === Applying control at step 35 ===
2026-01-19 12:44:15,158 - INFO - integration_test -   Control dict from planner: {'a': -3.554092344832004e-07, 'w': -0.04550198112133103}
2026-01-19 12:44:15,158 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:15,158 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:15,159 - INFO - integration_test - Step 35 completed in 0.599s
2026-01-19 12:44:15,172 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-19 12:44:15,172 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.28500889 6.34606738 0.69349942 2.99999999 9.89999997]
2026-01-19 12:44:15,173 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.192m, drift=0.170m)
2026-01-19 12:44:15,173 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-19 12:44:15,174 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:15,174 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:15,188 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.285, 6.346), path_start=(0.000, 0.000), dist=9.661m
2026-01-19 12:44:15,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-19 12:44:15,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:15,217 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:15,217 - INFO - integration_test - Warmstart k=0: x0=7.285008886936518 , y0=6.346067383589228 , psi0=0.6934994192129956 , v0=2.999999994458902 , spline0=9.899999971420572 , a0=0.0 , w0=0.0
2026-01-19 12:44:15,217 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:15,218 - INFO - integration_test - Dyn residual k=0: pred=[7.515713022547033, 6.537837040938192, 0.6934994192129956, 2.999999994458902, 10.199999970866463], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.515713022547033, 6.537837040938192, 0.6934994192129956, 2.999999994458902, 10.199999970866463], res_norm=1.459e+01
2026-01-19 12:44:15,218 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:15,219 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:15,235 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,274 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,304 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,320 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,334 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,350 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,364 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,380 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,394 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,410 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,424 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,439 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,453 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,468 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,482 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,498 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,513 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,528 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,542 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,557 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,569 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:15,729 - INFO - integration_test - Step 36: MPC solve successful
2026-01-19 12:44:15,734 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-19 12:44:15,734 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:15,734 - INFO - integration_test - === Applying control at step 36 ===
2026-01-19 12:44:15,734 - INFO - integration_test -   Control dict from planner: {'a': 3.553483786719738e-07, 'w': -0.04082080590374358}
2026-01-19 12:44:15,734 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:15,734 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:15,735 - INFO - integration_test - Step 36 completed in 0.563s
2026-01-19 12:44:15,750 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-19 12:44:15,750 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.51610379  6.53736563  0.68941734  3.00000003 10.19999997]
2026-01-19 12:44:15,751 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.301m, drift=0.470m)
2026-01-19 12:44:15,751 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-19 12:44:15,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:15,752 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:15,766 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.516, 6.537), path_start=(0.000, 0.000), dist=9.961m
2026-01-19 12:44:15,766 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-19 12:44:15,770 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:15,795 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:15,795 - INFO - integration_test - Warmstart k=0: x0=7.516103792253018 , y0=6.537365633698993 , psi0=0.6894173386226212 , v0=3.00000002999374 , spline0=10.199999974419946 , a0=0.0 , w0=0.0
2026-01-19 12:44:15,795 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:15,796 - INFO - integration_test - Dyn residual k=0: pred=[7.747588825474585, 6.728191945286349, 0.6894173386226212, 3.00000002999374, 10.49999997741932], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.747588825474585, 6.728191945286349, 0.6894173386226212, 3.00000002999374, 10.49999997741932], res_norm=1.500e+01
2026-01-19 12:44:15,797 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:15,798 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:15,814 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,854 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,870 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,885 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,902 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,917 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,932 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,947 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,963 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:15,978 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:15,994 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,010 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,026 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,041 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,057 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,072 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,089 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,104 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,120 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,135 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,151 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,163 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:16,309 - INFO - integration_test - Step 37: MPC solve successful
2026-01-19 12:44:16,314 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-19 12:44:16,314 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:16,314 - INFO - integration_test - === Applying control at step 37 ===
2026-01-19 12:44:16,314 - INFO - integration_test -   Control dict from planner: {'a': -4.596299375314292e-08, 'w': -0.043204804563357076}
2026-01-19 12:44:16,314 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:16,314 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:16,315 - INFO - integration_test - Step 37 completed in 0.565s
2026-01-19 12:44:16,329 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-19 12:44:16,329 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.74800034  6.72769129  0.68509686  3.00000003 10.49999998]
2026-01-19 12:44:16,330 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.177m, drift=0.258m)
2026-01-19 12:44:16,330 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-19 12:44:16,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:16,331 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:16,345 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.748, 6.728), path_start=(0.000, 0.000), dist=10.261m
2026-01-19 12:44:16,345 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.261m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:16,345 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-19 12:44:16,348 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:16,374 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:16,374 - INFO - integration_test - Warmstart k=0: x0=7.748000335159966 , y0=6.72769128895995 , psi0=0.6850968581662855 , v0=3.0000000253974406 , spline0=10.499999976959689 , a0=0.0 , w0=0.0
2026-01-19 12:44:16,374 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:16,376 - INFO - integration_test - Dyn residual k=0: pred=[7.980307666300138, 6.917515695774187, 0.6850968581662855, 3.0000000253974406, 10.799999979499432], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.980307666300138, 6.917515695774187, 0.6850968581662855, 3.0000000253974406, 10.799999979499432], res_norm=1.542e+01
2026-01-19 12:44:16,377 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:16,378 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:16,395 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,436 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,452 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,467 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,483 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,498 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,514 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,529 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,545 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,560 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,575 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,590 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,606 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,621 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,636 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,651 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,666 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,681 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,698 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,713 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:16,729 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:16,740 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:16,929 - INFO - integration_test - Step 38: MPC solve successful
2026-01-19 12:44:16,934 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-19 12:44:16,934 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:16,934 - INFO - integration_test - === Applying control at step 38 ===
2026-01-19 12:44:16,934 - INFO - integration_test -   Control dict from planner: {'a': 4.5946415485143954e-08, 'w': -0.03878407003895383}
2026-01-19 12:44:16,934 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:16,934 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:16,936 - INFO - integration_test - Step 38 completed in 0.607s
2026-01-19 12:44:16,949 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-19 12:44:16,950 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 7.98067519  6.91706473  0.68121845  3.00000003 10.79999998]
2026-01-19 12:44:16,951 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.246m, drift=0.046m)
2026-01-19 12:44:16,951 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-19 12:44:16,951 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:16,951 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:16,965 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(7.981, 6.917), path_start=(0.000, 0.000), dist=10.561m
2026-01-19 12:44:16,965 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.561m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:16,965 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-19 12:44:16,969 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:16,993 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:16,994 - INFO - integration_test - Warmstart k=0: x0=7.980675191775827 , y0=6.9170647294029965 , psi0=0.6812184511623901 , v0=3.000000029992082 , spline0=10.799999979958898 , a0=0.0 , w0=0.0
2026-01-19 12:44:16,994 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:16,995 - INFO - integration_test - Dyn residual k=0: pred=[8.213716990550118, 7.105986728713738, 0.6812184511623901, 3.000000029992082, 11.099999982958106], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.213716990550118, 7.105986728713738, 0.6812184511623901, 3.000000029992082, 11.099999982958106], res_norm=1.583e+01
2026-01-19 12:44:16,996 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:16,996 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:17,012 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,052 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,068 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,082 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,098 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,112 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,128 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,141 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,157 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,171 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,186 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,201 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,216 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,231 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,247 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,261 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,277 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,291 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,307 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,322 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,338 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,350 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:17,496 - INFO - integration_test - Step 39: MPC solve successful
2026-01-19 12:44:17,501 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-19 12:44:17,501 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:17,501 - INFO - integration_test - === Applying control at step 39 ===
2026-01-19 12:44:17,501 - INFO - integration_test -   Control dict from planner: {'a': -1.5942146038318351e-06, 'w': -0.04263783546358005}
2026-01-19 12:44:17,501 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:17,501 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:17,503 - INFO - integration_test - Step 39 completed in 0.553s
2026-01-19 12:44:17,517 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-19 12:44:17,517 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 8.21411904  7.10548933  0.67695467  2.99999987 11.09999997]
2026-01-19 12:44:17,518 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.205m, drift=0.346m)
2026-01-19 12:44:17,518 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-19 12:44:17,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:17,518 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:17,532 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.214, 7.105), path_start=(0.000, 0.000), dist=10.861m
2026-01-19 12:44:17,532 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.861m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:17,532 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-19 12:44:17,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:17,560 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:17,560 - INFO - integration_test - Warmstart k=0: x0=8.214119038879664 , y0=7.105489332142323 , psi0=0.6769546676160321 , v0=2.9999998705706217 , spline0=11.09999996701596 , a0=0.0 , w0=0.0
2026-01-19 12:44:17,560 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:17,561 - INFO - integration_test - Dyn residual k=0: pred=[8.447964226969525, 7.293415967405809, 0.6769546676160321, 2.9999998705706217, 11.39999995407302], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.447964226969525, 7.293415967405809, 0.6769546676160321, 2.9999998705706217, 11.39999995407302], res_norm=1.625e+01
2026-01-19 12:44:17,562 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:17,563 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:17,578 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,618 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,633 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,648 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,663 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,678 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,693 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,709 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,725 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,740 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,756 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,770 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,786 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,801 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,816 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,831 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,847 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,863 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,880 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,894 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:17,911 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:17,922 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:18,191 - INFO - integration_test - Step 40: MPC solve successful
2026-01-19 12:44:18,195 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-19 12:44:18,196 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:18,196 - INFO - integration_test - === Applying control at step 40 ===
2026-01-19 12:44:18,196 - INFO - integration_test -   Control dict from planner: {'a': 1.5837033592931289e-06, 'w': -0.03484258136690057}
2026-01-19 12:44:18,196 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:18,196 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:18,197 - INFO - integration_test - Step 40 completed in 0.680s
2026-01-19 12:44:18,210 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-19 12:44:18,211 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 8.44829115  7.2930082   0.67347041  3.00000003 11.39999997]
2026-01-19 12:44:18,211 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.184m, drift=0.133m)
2026-01-19 12:44:18,212 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-19 12:44:18,213 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:18,213 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:18,228 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.448, 7.293), path_start=(0.000, 0.000), dist=11.161m
2026-01-19 12:44:18,228 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.161m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:18,228 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-19 12:44:18,232 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:18,260 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:18,260 - INFO - integration_test - Warmstart k=0: x0=8.448291152127581 , y0=7.29300820402457 , psi0=0.673470409479342 , v0=3.0000000289409576 , spline0=11.399999969910056 , a0=0.0 , w0=0.0
2026-01-19 12:44:18,260 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:18,261 - INFO - integration_test - Dyn residual k=0: pred=[8.682789716734552, 7.480118933096229, 0.673470409479342, 3.0000000289409576, 11.699999972804152], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.682789716734552, 7.480118933096229, 0.673470409479342, 3.0000000289409576, 11.699999972804152], res_norm=1.666e+01
2026-01-19 12:44:18,262 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:18,263 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:18,279 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,322 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,339 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,354 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,371 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,385 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,402 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,418 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,434 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,448 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,464 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,479 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,494 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,509 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,525 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,540 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,571 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,597 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,621 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,643 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:18,664 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:18,677 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:18,959 - INFO - integration_test - Step 41: MPC solve successful
2026-01-19 12:44:18,963 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-19 12:44:18,964 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:18,964 - INFO - integration_test - === Applying control at step 41 ===
2026-01-19 12:44:18,964 - INFO - integration_test -   Control dict from planner: {'a': -3.635368982771553e-08, 'w': -0.04698901002222067}
2026-01-19 12:44:18,964 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:18,964 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:18,965 - INFO - integration_test - Step 41 completed in 0.754s
2026-01-19 12:44:18,978 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-19 12:44:18,979 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.68322846  7.4795673   0.66877151  3.00000003 11.69999997]
2026-01-19 12:44:18,979 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.263m, drift=0.433m)
2026-01-19 12:44:18,979 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-19 12:44:18,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:18,980 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:18,994 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.683, 7.480), path_start=(0.000, 0.000), dist=11.460m
2026-01-19 12:44:18,994 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.460m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:18,994 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-19 12:44:18,998 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:19,023 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:19,023 - INFO - integration_test - Warmstart k=0: x0=8.68322846023858 , y0=7.479567302670478 , psi0=0.66877150847712 , v0=3.0000000253055887 , spline0=11.699999972440615 , a0=0.0 , w0=0.0
2026-01-19 12:44:19,023 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:19,024 - INFO - integration_test - Dyn residual k=0: pred=[8.918603647296456, 7.665574084363525, 0.66877150847712, 3.0000000253055887, 11.999999974971175], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.918603647296456, 7.665574084363525, 0.66877150847712, 3.0000000253055887, 11.999999974971175], res_norm=1.708e+01
2026-01-19 12:44:19,025 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:19,026 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:19,041 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,081 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,097 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,112 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,127 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,142 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,157 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,172 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,187 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,202 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,217 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,232 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,247 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,261 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,277 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,291 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,307 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,322 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,337 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,351 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:19,366 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:19,378 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:19,954 - INFO - integration_test - Step 42: MPC solve successful
2026-01-19 12:44:19,960 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-19 12:44:19,960 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:19,960 - INFO - integration_test - === Applying control at step 42 ===
2026-01-19 12:44:19,960 - INFO - integration_test -   Control dict from planner: {'a': 4.2341064510495345e-08, 'w': -0.028824652849007724}
2026-01-19 12:44:19,960 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:19,960 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:19,961 - INFO - integration_test - Step 42 completed in 0.983s
2026-01-19 12:44:19,973 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-19 12:44:19,973 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 8.9188714   7.6652346   0.66588904  3.00000003 11.99999998]
2026-01-19 12:44:19,974 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.153m, drift=0.221m)
2026-01-19 12:44:19,974 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-19 12:44:19,975 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:19,975 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:19,990 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(8.919, 7.665), path_start=(0.000, 0.000), dist=11.760m
2026-01-19 12:44:19,990 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.760m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:19,990 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-19 12:44:19,994 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:20,019 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:20,019 - INFO - integration_test - Warmstart k=0: x0=8.918871400382876 , y0=7.665234596750465 , psi0=0.6658890431922192 , v0=3.000000029539695 , spline0=11.999999975394585 , a0=0.0 , w0=0.0
2026-01-19 12:44:20,019 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:20,020 - INFO - integration_test - Dyn residual k=0: pred=[9.15478176730306, 7.850562146110959, 0.6658890431922192, 3.000000029539695, 12.299999978348556], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.15478176730306, 7.850562146110959, 0.6658890431922192, 3.000000029539695, 12.299999978348556], res_norm=1.750e+01
2026-01-19 12:44:20,021 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:20,022 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:20,037 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,078 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,094 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,109 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,140 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,156 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,171 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,186 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,201 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,218 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,233 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,249 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,263 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,279 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,294 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,311 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,325 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,356 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,371 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,382 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:20,821 - INFO - integration_test - Step 43: MPC solve successful
2026-01-19 12:44:20,827 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-19 12:44:20,827 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:20,827 - INFO - integration_test - === Applying control at step 43 ===
2026-01-19 12:44:20,827 - INFO - integration_test -   Control dict from planner: {'a': 4.51022446351852e-09, 'w': -0.04716970532517533}
2026-01-19 12:44:20,827 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:20,827 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:20,829 - INFO - integration_test - Step 43 completed in 0.855s
2026-01-19 12:44:20,840 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-19 12:44:20,841 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.15521798  7.85000507  0.66117207  3.00000003 12.29999998]
2026-01-19 12:44:20,842 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.258m, drift=0.009m)
2026-01-19 12:44:20,842 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-19 12:44:20,843 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:20,843 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:20,857 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.155, 7.850), path_start=(0.000, 0.000), dist=12.060m
2026-01-19 12:44:20,857 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.060m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:20,857 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-19 12:44:20,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:20,887 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:20,887 - INFO - integration_test - Warmstart k=0: x0=9.155217983979169 , y0=7.850005068782233 , psi0=0.6611720726597017 , v0=3.0000000299907175 , spline0=12.299999978393657 , a0=0.0 , w0=0.0
2026-01-19 12:44:20,887 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:20,888 - INFO - integration_test - Dyn residual k=0: pred=[9.391999907806737, 8.03421777830022, 0.6611720726597017, 3.0000000299907175, 12.59999998139273], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.391999907806737, 8.03421777830022, 0.6611720726597017, 3.0000000299907175, 12.59999998139273], res_norm=1.792e+01
2026-01-19 12:44:20,888 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:20,889 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:20,905 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,946 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,962 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:20,976 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:20,994 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,008 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,024 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,038 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,053 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,068 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,083 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,099 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,116 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,130 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,146 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,160 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,176 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,190 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,206 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,221 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,236 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,247 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:21,432 - INFO - integration_test - Step 44: MPC solve successful
2026-01-19 12:44:21,437 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-19 12:44:21,437 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:21,437 - INFO - integration_test - === Applying control at step 44 ===
2026-01-19 12:44:21,437 - INFO - integration_test -   Control dict from planner: {'a': -1.151025577725883e-06, 'w': -0.19379762047341328}
2026-01-19 12:44:21,437 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:21,437 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:21,438 - INFO - integration_test - Step 44 completed in 0.597s
2026-01-19 12:44:21,452 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-19 12:44:21,452 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.39377003  8.03191193  0.64179231  2.99999991 12.59999997]
2026-01-19 12:44:21,453 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.173m, drift=0.309m)
2026-01-19 12:44:21,453 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-19 12:44:21,454 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:21,454 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:21,468 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.394, 8.032), path_start=(0.000, 0.000), dist=12.359m
2026-01-19 12:44:21,468 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.359m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:21,468 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-19 12:44:21,471 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:21,497 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:21,497 - INFO - integration_test - Warmstart k=0: x0=9.39377002531252 , y0=8.031911927235567 , psi0=0.6417923106123603 , v0=2.9999999148881598 , spline0=12.599999969882473 , a0=0.0 , w0=0.0
2026-01-19 12:44:21,497 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:21,498 - INFO - integration_test - Dyn residual k=0: pred=[9.634077251618871, 8.21150154797752, 0.6417923106123603, 2.9999999148881598, 12.89999996137129], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.634077251618871, 8.21150154797752, 0.6417923106123603, 2.9999999148881598, 12.89999996137129], res_norm=1.833e+01
2026-01-19 12:44:21,499 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:21,499 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:21,515 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,555 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,571 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,586 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,602 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,617 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,634 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,649 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,666 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,680 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,697 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,712 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,730 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,746 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,763 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,779 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,796 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,812 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,828 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,842 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:21,858 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:21,870 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:22,062 - INFO - integration_test - Step 45: MPC solve successful
2026-01-19 12:44:22,066 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-19 12:44:22,066 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:22,067 - INFO - integration_test - === Applying control at step 45 ===
2026-01-19 12:44:22,067 - INFO - integration_test -   Control dict from planner: {'a': 1.149407067521556e-06, 'w': -0.48250737657235}
2026-01-19 12:44:22,067 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:22,067 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:22,068 - INFO - integration_test - Step 45 completed in 0.616s
2026-01-19 12:44:22,082 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-19 12:44:22,083 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 9.63831585  8.2056355   0.59354157  3.00000003 12.89999997]
2026-01-19 12:44:22,083 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.420m, drift=0.609m)
2026-01-19 12:44:22,083 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-19 12:44:22,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:22,084 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:22,099 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(9.638, 8.206), path_start=(0.000, 0.000), dist=12.658m
2026-01-19 12:44:22,099 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.658m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:22,099 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-19 12:44:22,103 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:22,128 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:22,128 - INFO - integration_test - Warmstart k=0: x0=9.638315848404256 , y0=8.20563549915746 , psi0=0.5935415729551253 , v0=3.0000000298288665 , spline0=12.89999997286536 , a0=0.0 , w0=0.0
2026-01-19 12:44:22,128 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:22,129 - INFO - integration_test - Dyn residual k=0: pred=[9.887005374557933, 8.373425610222418, 0.5935415729551253, 3.0000000298288665, 13.199999975848247], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.887005374557933, 8.373425610222418, 0.5935415729551253, 3.0000000298288665, 13.199999975848247], res_norm=1.875e+01
2026-01-19 12:44:22,130 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:22,131 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:22,147 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,186 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,204 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,219 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,235 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,250 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,266 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,280 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,297 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,313 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,328 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,343 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,359 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,373 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,388 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,403 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,419 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,434 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,449 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,464 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,480 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,492 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:22,671 - INFO - integration_test - Step 46: MPC solve successful
2026-01-19 12:44:22,676 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-19 12:44:22,676 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:22,676 - INFO - integration_test - === Applying control at step 46 ===
2026-01-19 12:44:22,676 - INFO - integration_test -   Control dict from planner: {'a': -4.4084366914381814e-07, 'w': -0.37932039517106103}
2026-01-19 12:44:22,676 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:22,676 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:22,678 - INFO - integration_test - Step 46 completed in 0.596s
2026-01-19 12:44:22,690 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-19 12:44:22,691 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[ 9.89012767  8.36866929  0.55560953  2.99999999 13.19999997]
2026-01-19 12:44:22,692 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.355m, drift=0.397m)
2026-01-19 12:44:22,692 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-19 12:44:22,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:22,693 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:22,707 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(9.890, 8.369), path_start=(0.000, 0.000), dist=12.956m
2026-01-19 12:44:22,707 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.956m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:22,707 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-19 12:44:22,711 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:22,735 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:22,736 - INFO - integration_test - Warmstart k=0: x0=9.89012766879138 , y0=8.368669289919488 , psi0=0.5556095334380192 , v0=2.9999999857444997 , spline0=13.199999971439809 , a0=0.0 , w0=0.0
2026-01-19 12:44:22,736 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:22,736 - INFO - integration_test - Dyn residual k=0: pred=[10.1450013954341, 8.526907662673766, 0.5556095334380192, 2.9999999857444997, 13.499999970014258], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.1450013954341, 8.526907662673766, 0.5556095334380192, 2.9999999857444997, 13.499999970014258], res_norm=1.916e+01
2026-01-19 12:44:22,737 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:22,738 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:22,753 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,793 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,810 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,824 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,840 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,856 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,871 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,886 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,902 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,917 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,932 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,946 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,961 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:22,975 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:22,991 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,006 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,022 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,036 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,051 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,066 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,081 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,093 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:23,244 - INFO - integration_test - Step 47: MPC solve successful
2026-01-19 12:44:23,248 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-19 12:44:23,249 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:23,249 - INFO - integration_test - === Applying control at step 47 ===
2026-01-19 12:44:23,249 - INFO - integration_test -   Control dict from planner: {'a': 3.946792159826225e-07, 'w': -0.6069935857543235}
2026-01-19 12:44:23,249 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:23,249 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:23,250 - INFO - integration_test - Step 47 completed in 0.559s
2026-01-19 12:44:23,264 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-19 12:44:23,265 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.14964593  8.51907755  0.49491017  3.00000003 13.49999997]
2026-01-19 12:44:23,265 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.209m, drift=0.697m)
2026-01-19 12:44:23,265 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-19 12:44:23,266 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:23,266 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:23,280 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.150, 8.519), path_start=(0.000, 0.000), dist=13.251m
2026-01-19 12:44:23,280 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.251m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:23,280 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-19 12:44:23,283 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:23,309 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:23,309 - INFO - integration_test - Warmstart k=0: x0=10.14964592674705 , y0=8.519077551883509 , psi0=0.49491017486258687 , v0=3.0000000252124215 , spline0=13.499999973961051 , a0=0.0 , w0=0.0
2026-01-19 12:44:23,309 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:23,310 - INFO - integration_test - Dyn residual k=0: pred=[10.41364934178661, 8.66156333489429, 0.49491017486258687, 3.0000000252124215, 13.799999976482294], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.41364934178661, 8.66156333489429, 0.49491017486258687, 3.0000000252124215, 13.799999976482294], res_norm=1.957e+01
2026-01-19 12:44:23,311 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:23,312 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:23,327 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,367 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,382 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,397 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,413 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,428 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,443 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,457 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,473 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,487 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,503 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,517 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,533 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,547 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,562 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,577 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,593 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,608 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,624 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,639 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,654 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,666 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:23,835 - INFO - integration_test - Step 48: MPC solve successful
2026-01-19 12:44:23,840 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-19 12:44:23,840 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:23,840 - INFO - integration_test - === Applying control at step 48 ===
2026-01-19 12:44:23,840 - INFO - integration_test -   Control dict from planner: {'a': -1.5766565459225107e-07, 'w': -0.7999999088481575}
2026-01-19 12:44:23,841 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:23,841 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:23,842 - INFO - integration_test - Step 48 completed in 0.578s
2026-01-19 12:44:23,855 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-19 12:44:23,856 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[10.41906422  8.6508569   0.41491018  3.00000001 13.79999997]
2026-01-19 12:44:23,856 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.345m, drift=0.485m)
2026-01-19 12:44:23,856 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-19 12:44:23,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:23,857 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:23,872 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(10.419, 8.651), path_start=(0.000, 0.000), dist=13.542m
2026-01-19 12:44:23,872 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.542m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:23,872 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-19 12:44:23,876 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:23,902 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:23,902 - INFO - integration_test - Warmstart k=0: x0=10.419064223051107 , y0=8.650856895730328 , psi0=0.41491018397777113 , v0=3.000000009445856 , spline0=13.799999974905637 , a0=0.0 , w0=0.0
2026-01-19 12:44:23,902 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:23,903 - INFO - integration_test - Dyn residual k=0: pred=[10.693609982831322, 8.771789217106608, 0.41491018397777113, 3.000000009445856, 14.099999975850222], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.693609982831322, 8.771789217106608, 0.41491018397777113, 3.000000009445856, 14.099999975850222], res_norm=1.998e+01
2026-01-19 12:44:23,903 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:23,904 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:23,919 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,959 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:23,975 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:23,992 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,011 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,028 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,044 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,059 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,075 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,090 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,106 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,120 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,135 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,149 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,164 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,179 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,196 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,210 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,226 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,240 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,256 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,267 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:24,473 - INFO - integration_test - Step 49: MPC solve successful
2026-01-19 12:44:24,480 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-19 12:44:24,480 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:24,480 - INFO - integration_test - === Applying control at step 49 ===
2026-01-19 12:44:24,480 - INFO - integration_test -   Control dict from planner: {'a': 1.981323194534327e-07, 'w': -0.7999992410057584}
2026-01-19 12:44:24,481 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:24,481 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:24,482 - INFO - integration_test - Step 49 completed in 0.627s
2026-01-19 12:44:24,500 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-19 12:44:24,501 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[10.69815194  8.7606843   0.33491026  3.00000003 14.09999998]
2026-01-19 12:44:24,502 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.344m, drift=0.785m)
2026-01-19 12:44:24,502 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-19 12:44:24,503 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:24,503 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:24,520 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(10.698, 8.761), path_start=(0.000, 0.000), dist=13.828m
2026-01-19 12:44:24,520 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.828m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:24,520 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-19 12:44:24,527 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:24,557 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:24,557 - INFO - integration_test - Warmstart k=0: x0=10.698151942103815 , y0=8.760684301797614 , psi0=0.3349102598771953 , v0=3.000000029259088 , spline0=14.099999977831546 , a0=0.0 , w0=0.0
2026-01-19 12:44:24,557 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:24,558 - INFO - integration_test - Dyn residual k=0: pred=[10.981483887751804, 8.859289627875219, 0.3349102598771953, 3.000000029259088, 14.399999980757455], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.981483887751804, 8.859289627875219, 0.3349102598771953, 3.000000029259088, 14.399999980757455], res_norm=2.039e+01
2026-01-19 12:44:24,559 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:24,560 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:24,576 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,618 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,636 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,651 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,668 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,683 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,699 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,713 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,729 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,743 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,758 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,773 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,788 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,803 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,819 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,833 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,849 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,863 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,878 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,893 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:24,909 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:24,920 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:25,140 - INFO - integration_test - Step 50: MPC solve successful
2026-01-19 12:44:25,145 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-19 12:44:25,145 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:25,145 - INFO - integration_test - === Applying control at step 50 ===
2026-01-19 12:44:25,145 - INFO - integration_test -   Control dict from planner: {'a': -2.150669466179336e-06, 'w': -0.7999902288850411}
2026-01-19 12:44:25,145 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:25,145 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:25,147 - INFO - integration_test - Step 50 completed in 0.646s
2026-01-19 12:44:25,160 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-19 12:44:25,161 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[10.98512383  8.84785739  0.25491124  2.99999981 14.39999996]
2026-01-19 12:44:25,162 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.464m, drift=0.573m)
2026-01-19 12:44:25,162 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-19 12:44:25,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:25,163 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:25,177 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(10.985, 8.848), path_start=(0.000, 0.000), dist=14.105m
2026-01-19 12:44:25,177 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.105m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:25,177 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-19 12:44:25,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:25,207 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:25,207 - INFO - integration_test - Warmstart k=0: x0=10.985123826651806 , y0=8.847857386834617 , psi0=0.25491123698869117 , v0=2.9999998141921416 , spline0=14.39999995925076 , a0=0.0 , w0=0.0
2026-01-19 12:44:25,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:25,209 - INFO - integration_test - Dyn residual k=0: pred=[11.275429513253012, 8.923505236629113, 0.25491123698869117, 2.9999998141921416, 14.699999940669974], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.275429513253012, 8.923505236629113, 0.25491123698869117, 2.9999998141921416, 14.699999940669974], res_norm=2.078e+01
2026-01-19 12:44:25,210 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:25,211 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:25,226 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,266 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,296 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,311 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,326 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,341 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,355 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,371 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,385 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,415 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,430 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,444 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,459 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,473 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,504 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,519 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,533 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,548 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,559 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:25,710 - INFO - integration_test - Step 51: MPC solve successful
2026-01-19 12:44:25,714 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-19 12:44:25,715 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:25,715 - INFO - integration_test - === Applying control at step 51 ===
2026-01-19 12:44:25,715 - INFO - integration_test -   Control dict from planner: {'a': 1.8591140623102395e-06, 'w': -0.7999996420946304}
2026-01-19 12:44:25,715 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:25,715 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:25,716 - INFO - integration_test - Step 51 completed in 0.555s
2026-01-19 12:44:25,730 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-19 12:44:25,731 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.27814427  8.91181854  0.17491127  3.         14.69999996]
2026-01-19 12:44:25,732 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.566m, drift=0.873m)
2026-01-19 12:44:25,732 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-19 12:44:25,733 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:25,733 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:25,747 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.278, 8.912), path_start=(0.000, 0.000), dist=14.374m
2026-01-19 12:44:25,747 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.374m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:25,747 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-19 12:44:25,751 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:25,775 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:25,775 - INFO - integration_test - Warmstart k=0: x0=11.278144265644348 , y0=8.91181854383898 , psi0=0.17491127277922813 , v0=3.000000000103548 , spline0=14.699999959261115 , a0=0.0 , w0=0.0
2026-01-19 12:44:25,775 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:25,776 - INFO - integration_test - Dyn residual k=0: pred=[11.573566860602526, 8.964024773298588, 0.17491127277922813, 3.000000000103548, 14.99999995927147], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.573566860602526, 8.964024773298588, 0.17491127277922813, 3.000000000103548, 14.99999995927147], res_norm=2.117e+01
2026-01-19 12:44:25,777 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:25,778 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:25,793 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,835 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,852 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,866 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,883 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,898 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,914 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,928 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,944 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,959 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:25,974 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:25,990 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,006 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,020 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,036 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,050 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,067 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,082 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,097 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,112 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,127 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,138 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:26,299 - INFO - integration_test - Step 52: MPC solve successful
2026-01-19 12:44:26,304 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-19 12:44:26,304 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:26,304 - INFO - integration_test - === Applying control at step 52 ===
2026-01-19 12:44:26,304 - INFO - integration_test -   Control dict from planner: {'a': 2.979321081463826e-07, 'w': -0.41317035767294796}
2026-01-19 12:44:26,304 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:26,304 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:26,305 - INFO - integration_test - Step 52 completed in 0.574s
2026-01-19 12:44:26,318 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-19 12:44:26,319 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[11.57456117  8.9579078   0.13359424  3.00000003 14.99999996]
2026-01-19 12:44:26,320 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.700m, drift=0.661m)
2026-01-19 12:44:26,320 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-19 12:44:26,320 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:26,321 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:26,335 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(11.575, 8.958), path_start=(0.000, 0.000), dist=14.636m
2026-01-19 12:44:26,335 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.636m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:26,335 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-19 12:44:26,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:26,363 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:26,363 - INFO - integration_test - Warmstart k=0: x0=11.57456116693157 , y0=8.957907796501297 , psi0=0.13359423701193332 , v0=3.000000029896759 , spline0=14.99999996225079 , a0=0.0 , w0=0.0
2026-01-19 12:44:26,363 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:26,364 - INFO - integration_test - Dyn residual k=0: pred=[11.871888036132294, 8.9978669587185, 0.13359423701193332, 3.000000029896759, 15.299999965240467], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.871888036132294, 8.9978669587185, 0.13359423701193332, 3.000000029896759, 15.299999965240467], res_norm=2.156e+01
2026-01-19 12:44:26,365 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:26,366 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:26,381 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,421 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,436 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,450 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,466 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,481 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,496 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,511 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,527 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,541 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,556 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,570 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,586 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,601 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,616 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,630 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,646 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,661 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,681 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,697 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:26,713 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:26,725 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:26,876 - INFO - integration_test - Step 53: MPC solve successful
2026-01-19 12:44:26,880 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-19 12:44:26,881 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:26,881 - INFO - integration_test - === Applying control at step 53 ===
2026-01-19 12:44:26,881 - INFO - integration_test -   Control dict from planner: {'a': -2.5869504130828428e-08, 'w': 0.8000000024190468}
2026-01-19 12:44:26,881 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:26,881 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:26,882 - INFO - integration_test - Step 53 completed in 0.563s
2026-01-19 12:44:26,897 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-19 12:44:26,898 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[11.86997348  9.00971108  0.21359424  3.00000003 15.29999996]
2026-01-19 12:44:26,898 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.830m, drift=0.961m)
2026-01-19 12:44:26,898 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-19 12:44:26,899 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:26,899 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:26,913 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(11.870, 9.010), path_start=(0.000, 0.000), dist=14.902m
2026-01-19 12:44:26,913 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=14.902m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:26,913 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-19 12:44:26,918 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:26,942 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:26,942 - INFO - integration_test - Warmstart k=0: x0=11.86997347880393 , y0=9.009711083145795 , psi0=0.21359423725383797 , v0=3.0000000273098086 , spline0=15.29999996498177 , a0=0.0 , w0=0.0
2026-01-19 12:44:26,942 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:26,943 - INFO - integration_test - Dyn residual k=0: pred=[12.163156084864776, 9.0733032300034, 0.21359423725383797, 3.0000000273098086, 15.599999967712751], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.163156084864776, 9.0733032300034, 0.21359423725383797, 3.0000000273098086, 15.599999967712751], res_norm=2.197e+01
2026-01-19 12:44:26,944 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:26,945 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:26,960 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,000 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,016 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,031 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,061 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,077 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,091 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,109 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,136 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,161 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,182 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,206 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,227 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,246 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,266 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,286 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,304 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,321 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,336 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,353 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,366 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:27,536 - INFO - integration_test - Step 54: MPC solve successful
2026-01-19 12:44:27,542 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-19 12:44:27,542 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:27,543 - INFO - integration_test - === Applying control at step 54 ===
2026-01-19 12:44:27,543 - INFO - integration_test -   Control dict from planner: {'a': -5.319251118883352e-08, 'w': 0.7999999835321462}
2026-01-19 12:44:27,543 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:27,543 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:27,544 - INFO - integration_test - Step 54 completed in 0.646s
2026-01-19 12:44:27,559 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-19 12:44:27,560 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[12.16030113  9.08495647  0.29359424  3.00000002 15.59999997]
2026-01-19 12:44:27,561 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.926m, drift=0.749m)
2026-01-19 12:44:27,561 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-19 12:44:27,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:27,561 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:27,576 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(12.160, 9.085), path_start=(0.000, 0.000), dist=15.179m
2026-01-19 12:44:27,576 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.179m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:27,576 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-19 12:44:27,580 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:27,606 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:27,606 - INFO - integration_test - Warmstart k=0: x0=12.160301131216709 , y0=9.084956471859217 , psi0=0.2935942356070526 , v0=3.0000000219905574 , spline0=15.599999967180826 , a0=0.0 , w0=0.0
2026-01-19 12:44:27,606 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:27,607 - INFO - integration_test - Dyn residual k=0: pred=[12.447464105875248, 9.17177482996793, 0.2935942356070526, 3.0000000219905574, 15.899999969379882], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.447464105875248, 9.17177482996793, 0.2935942356070526, 3.0000000219905574, 15.899999969379882], res_norm=2.238e+01
2026-01-19 12:44:27,608 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:27,609 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:27,624 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,667 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,687 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,707 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,730 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,749 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,767 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,782 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,800 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,815 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,831 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,847 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,864 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,880 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,911 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,926 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,941 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,957 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:27,972 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:27,988 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,001 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:28,171 - INFO - integration_test - Step 55: MPC solve successful
2026-01-19 12:44:28,176 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-19 12:44:28,176 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:28,176 - INFO - integration_test - === Applying control at step 55 ===
2026-01-19 12:44:28,176 - INFO - integration_test -   Control dict from planner: {'a': 7.974466405390992e-08, 'w': 0.8000000096133983}
2026-01-19 12:44:28,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:28,176 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:28,178 - INFO - integration_test - Step 55 completed in 0.618s
2026-01-19 12:44:28,189 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-19 12:44:28,190 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[12.44368702  9.18316265  0.37359424  3.00000003 15.89999997]
2026-01-19 12:44:28,191 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=1.026m, drift=1.049m)
2026-01-19 12:44:28,191 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-19 12:44:28,192 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:28,192 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:28,207 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(12.444, 9.183), path_start=(0.000, 0.000), dist=15.465m
2026-01-19 12:44:28,208 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.465m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:28,208 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-19 12:44:28,212 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:28,236 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:28,236 - INFO - integration_test - Warmstart k=0: x0=12.443687018468214 , y0=9.183162649166515 , psi0=0.37359423656839247 , v0=3.000000029965024 , spline0=15.89999997017733 , a0=0.0 , w0=0.0
2026-01-19 12:44:28,237 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:28,237 - INFO - integration_test - Dyn residual k=0: pred=[12.722993499712802, 9.292651878466334, 0.37359423656839247, 3.000000029965024, 16.19999997317383], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.722993499712802, 9.292651878466334, 0.37359423656839247, 3.000000029965024, 16.19999997317383], res_norm=2.280e+01
2026-01-19 12:44:28,238 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:28,239 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:28,254 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,295 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,312 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,328 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,349 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,369 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,392 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,409 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,425 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,439 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,454 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,468 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,483 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,498 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,513 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,528 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,544 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,558 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,574 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,590 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:28,606 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:28,619 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:28,891 - INFO - integration_test - Step 56: MPC solve successful
2026-01-19 12:44:28,897 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-19 12:44:28,897 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:28,897 - INFO - integration_test - === Applying control at step 56 ===
2026-01-19 12:44:28,897 - INFO - integration_test -   Control dict from planner: {'a': -2.657019548537778e-07, 'w': 0.7999998166307198}
2026-01-19 12:44:28,897 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:28,897 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:28,899 - INFO - integration_test - Step 56 completed in 0.709s
2026-01-19 12:44:28,911 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-19 12:44:28,912 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[12.71831844  9.30370143  0.45359422  3.         16.19999997]
2026-01-19 12:44:28,913 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=1.062m, drift=0.836m)
2026-01-19 12:44:28,913 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-19 12:44:28,913 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:28,914 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:28,928 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(12.718, 9.304), path_start=(0.000, 0.000), dist=15.758m
2026-01-19 12:44:28,928 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.758m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:28,928 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-19 12:44:28,932 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:28,957 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:28,957 - INFO - integration_test - Warmstart k=0: x0=12.718318438057842 , y0=9.303701427965674 , psi0=0.45359421823146445 , v0=3.0000000033948284 , spline0=16.199999970516814 , a0=0.0 , w0=0.0
2026-01-19 12:44:28,957 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:28,958 - INFO - integration_test - Dyn residual k=0: pred=[12.987981816913644, 9.435161164416659, 0.45359421823146445, 3.0000000033948284, 16.499999970856297], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.987981816913644, 9.435161164416659, 0.45359421823146445, 3.0000000033948284, 16.499999970856297], res_norm=2.322e+01
2026-01-19 12:44:28,959 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:28,960 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:28,976 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,025 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,047 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,063 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,080 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,096 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,112 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,126 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,142 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,157 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,172 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,187 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,203 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,217 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,232 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,247 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,262 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,278 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,294 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,309 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,324 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,336 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:29,500 - INFO - integration_test - Step 57: MPC solve successful
2026-01-19 12:44:29,505 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-19 12:44:29,505 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:29,505 - INFO - integration_test - === Applying control at step 57 ===
2026-01-19 12:44:29,505 - INFO - integration_test -   Control dict from planner: {'a': 2.1405064266509227e-07, 'w': 0.7999999388000618}
2026-01-19 12:44:29,505 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:29,505 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:29,506 - INFO - integration_test - Step 57 completed in 0.595s
2026-01-19 12:44:29,520 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-19 12:44:29,521 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[12.98243869  9.44580177  0.53359421  3.00000002 16.49999997]
2026-01-19 12:44:29,521 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=1.114m, drift=0.624m)
2026-01-19 12:44:29,521 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-19 12:44:29,522 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:29,522 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:29,536 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(12.982, 9.446), path_start=(0.000, 0.000), dist=16.055m
2026-01-19 12:44:29,536 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.055m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:29,536 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-19 12:44:29,540 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:29,564 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:29,564 - INFO - integration_test - Warmstart k=0: x0=12.98243868756358 , y0=9.445801770863607 , psi0=0.5335942121114706 , v0=3.000000024799893 , spline0=16.499999972996804 , a0=0.0 , w0=0.0
2026-01-19 12:44:29,564 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:29,565 - INFO - integration_test - Dyn residual k=0: pred=[13.240734041903412, 9.598391126371958, 0.5335942121114706, 3.000000024799893, 16.799999975476794], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.240734041903412, 9.598391126371958, 0.5335942121114706, 3.000000024799893, 16.799999975476794], res_norm=2.364e+01
2026-01-19 12:44:29,566 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:29,567 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:29,582 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,623 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,640 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,655 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,671 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,686 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,703 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,719 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,734 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,750 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,778 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,799 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,823 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,846 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,870 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,888 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,927 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,946 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,963 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:29,981 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:29,993 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:30,171 - INFO - integration_test - Step 58: MPC solve successful
2026-01-19 12:44:30,175 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-19 12:44:30,176 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:30,176 - INFO - integration_test - === Applying control at step 58 ===
2026-01-19 12:44:30,176 - INFO - integration_test -   Control dict from planner: {'a': 4.2739228301531966e-08, 'w': 0.7999999746073296}
2026-01-19 12:44:30,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:30,176 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:30,177 - INFO - integration_test - Step 58 completed in 0.657s
2026-01-19 12:44:30,189 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-19 12:44:30,189 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[13.2343583   9.60855472  0.61359421  3.00000003 16.79999998]
2026-01-19 12:44:30,190 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=1.106m, drift=0.924m)
2026-01-19 12:44:30,190 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-19 12:44:30,191 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:30,191 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:30,206 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(13.234, 9.609), path_start=(0.000, 0.000), dist=16.355m
2026-01-19 12:44:30,206 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.355m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:30,206 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-19 12:44:30,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:30,235 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:30,235 - INFO - integration_test - Warmstart k=0: x0=13.234358299307384 , y0=9.608554723633128 , psi0=0.6135942095722036 , v0=3.000000029073816 , spline0=16.799999975904186 , a0=0.0 , w0=0.0
2026-01-19 12:44:30,235 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:30,236 - INFO - integration_test - Dyn residual k=0: pred=[13.479633418383036, 9.781297647386474, 0.6135942095722036, 3.000000029073816, 17.099999978811567], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.479633418383036, 9.781297647386474, 0.6135942095722036, 3.000000029073816, 17.099999978811567], res_norm=2.407e+01
2026-01-19 12:44:30,237 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:30,237 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:30,252 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,292 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,308 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,323 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,353 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,368 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,382 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,398 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,412 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,427 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,441 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,457 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,471 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,486 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,501 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,516 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,530 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,545 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,559 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,574 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,585 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:30,774 - INFO - integration_test - Step 59: MPC solve successful
2026-01-19 12:44:30,780 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-19 12:44:30,780 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:30,780 - INFO - integration_test - === Applying control at step 59 ===
2026-01-19 12:44:30,780 - INFO - integration_test -   Control dict from planner: {'a': -6.140198421641785e-08, 'w': 0.7999993667131172}
2026-01-19 12:44:30,780 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:30,780 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:30,781 - INFO - integration_test - Step 59 completed in 0.592s
2026-01-19 12:44:30,796 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-19 12:44:30,797 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[13.47246585  9.79091922  0.69359415  3.00000002 17.09999998]
2026-01-19 12:44:30,798 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=1.090m, drift=0.712m)
2026-01-19 12:44:30,798 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-19 12:44:30,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:30,799 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:30,814 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(13.472, 9.791), path_start=(0.000, 0.000), dist=16.654m
2026-01-19 12:44:30,814 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.654m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:30,814 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-19 12:44:30,818 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:30,844 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:30,844 - INFO - integration_test - Warmstart k=0: x0=13.47246585176419 , y0=9.790919215506758 , psi0=0.6935941462435153 , v0=3.0000000229336172 , spline0=17.09999997819755 , a0=0.0 , w0=0.0
2026-01-19 12:44:30,844 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:30,845 - INFO - integration_test - Dyn residual k=0: pred=[13.703151822759041, 9.982710727733393, 0.6935941462435153, 3.0000000229336172, 17.39999998049091], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.703151822759041, 9.982710727733393, 0.6935941462435153, 3.0000000229336172, 17.39999998049091], res_norm=2.449e+01
2026-01-19 12:44:30,846 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:30,846 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:30,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,902 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,931 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,946 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,961 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:30,976 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:30,991 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,006 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,020 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,035 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,049 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,078 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,093 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,108 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,123 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,138 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,153 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,167 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:31,181 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:31,193 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:36,202 - INFO - integration_test - Step 60: MPC solve successful
2026-01-19 12:44:36,206 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-19 12:44:36,207 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:36,207 - INFO - integration_test - === Applying control at step 60 ===
2026-01-19 12:44:36,207 - INFO - integration_test -   Control dict from planner: {'a': -0.0007809965861194121, 'w': 0.7919965922781407}
2026-01-19 12:44:36,207 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:36,207 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:36,208 - INFO - integration_test - Step 60 completed in 5.411s
2026-01-19 12:44:36,221 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-19 12:44:36,222 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[13.69531693  9.99163799  0.77279381  2.99992192 17.39999217]
2026-01-19 12:44:36,222 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=1.058m, drift=1.012m)
2026-01-19 12:44:36,222 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-19 12:44:36,223 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:36,223 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:36,237 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(13.695, 9.992), path_start=(0.000, 0.000), dist=16.953m
2026-01-19 12:44:36,237 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=16.953m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:36,237 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-19 12:44:36,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:36,268 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:36,268 - INFO - integration_test - Warmstart k=0: x0=13.695316926790642 , y0=9.991637988627366 , psi0=0.7727938054713295 , v0=2.9999219232750054 , spline0=17.39999217052505 , a0=0.0 , w0=0.0
2026-01-19 12:44:36,268 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:36,269 - INFO - integration_test - Dyn residual k=0: pred=[13.910100237965795, 10.201074004388976, 0.7727938054713295, 2.9999219232750054, 17.69998436285255], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.910100237965795, 10.201074004388976, 0.7727938054713295, 2.9999219232750054, 17.69998436285255], res_norm=2.491e+01
2026-01-19 12:44:36,270 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:36,271 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:36,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,329 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,345 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,359 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,374 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,389 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,405 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,420 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,436 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,450 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,490 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,524 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,556 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,583 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,601 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,620 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,644 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,678 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:36,695 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:36,709 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:36,924 - INFO - integration_test - Step 61: MPC solve successful
2026-01-19 12:44:36,929 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-19 12:44:36,929 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:36,929 - INFO - integration_test - === Applying control at step 61 ===
2026-01-19 12:44:36,929 - INFO - integration_test -   Control dict from planner: {'a': 0.0007810669948227826, 'w': 0.7999996385339281}
2026-01-19 12:44:36,929 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:36,929 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:36,930 - INFO - integration_test - Step 61 completed in 0.709s
2026-01-19 12:44:36,943 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-19 12:44:36,944 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[13.90150089 10.2094403   0.85279377  3.00000003 17.69999217]
2026-01-19 12:44:36,944 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.976m, drift=0.800m)
2026-01-19 12:44:36,945 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-19 12:44:36,945 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:36,945 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:36,959 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(13.902, 10.209), path_start=(0.000, 0.000), dist=17.248m
2026-01-19 12:44:36,959 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.248m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:36,959 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-19 12:44:36,962 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:36,986 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:36,986 - INFO - integration_test - Warmstart k=0: x0=13.90150088866153 , y0=10.209440299381065 , psi0=0.8527937693247223 , v0=3.000000029974488 , spline0=17.6999921735225 , a0=0.0 , w0=0.0
2026-01-19 12:44:36,987 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:36,987 - INFO - integration_test - Dyn residual k=0: pred=[14.098865391283738, 10.435376695083832, 0.8527937693247223, 3.000000029974488, 17.99999217651995], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.098865391283738, 10.435376695083832, 0.8527937693247223, 3.000000029974488, 17.99999217651995], res_norm=2.533e+01
2026-01-19 12:44:36,988 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:36,989 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:37,004 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,044 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,059 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,073 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,089 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,103 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,119 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,133 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,148 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,162 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,177 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,191 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,207 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,221 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,236 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,251 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,266 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,279 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,295 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,310 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:37,325 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:37,336 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:38,452 - INFO - integration_test - Step 62: MPC solve successful
2026-01-19 12:44:38,457 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-19 12:44:38,457 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:38,457 - INFO - integration_test - === Applying control at step 62 ===
2026-01-19 12:44:38,457 - INFO - integration_test -   Control dict from planner: {'a': -1.6971525274716035e-07, 'w': -0.2955284654830148}
2026-01-19 12:44:38,457 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:38,457 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:38,459 - INFO - integration_test - Step 62 completed in 1.515s
2026-01-19 12:44:38,472 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-19 12:44:38,472 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[14.10217495 10.43242768  0.82324092  3.00000001 17.99999217]
2026-01-19 12:44:38,473 - DEBUG - integration_test - Step 63: Using propagated spline 18.0000 (close to path, dist=0.933m, drift=0.588m)
2026-01-19 12:44:38,473 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-19 12:44:38,473 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:38,474 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:38,488 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(14.102, 10.432), path_start=(0.000, 0.000), dist=17.542m
2026-01-19 12:44:38,488 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.542m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:38,488 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-19 12:44:38,491 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:38,516 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:38,516 - INFO - integration_test - Warmstart k=0: x0=14.1021749521321 , y0=10.432427679062648 , psi0=0.8232409227764208 , v0=3.0000000130029627 , spline0=17.999992174822797 , a0=0.0 , w0=0.0
2026-01-19 12:44:38,516 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:38,517 - INFO - integration_test - Dyn residual k=0: pred=[14.306129365431252, 10.652433583701539, 0.8232409227764208, 3.0000000130029627, 18.299992176123094], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.306129365431252, 10.652433583701539, 0.8232409227764208, 3.0000000130029627, 18.299992176123094], res_norm=2.574e+01
2026-01-19 12:44:38,518 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:38,518 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:38,534 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,573 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,589 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,604 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,619 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,634 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,649 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,663 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,679 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,693 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,709 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,723 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,739 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,753 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,768 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,782 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,798 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,813 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,828 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,843 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:38,858 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:38,870 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:48,440 - WARNING - integration_test - Step 63: MPC solve failed
2026-01-19 12:44:48,440 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-19 12:44:48,445 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-19 12:44:48,445 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:48,445 - INFO - integration_test - === Applying control at step 63 ===
2026-01-19 12:44:48,445 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-19 12:44:48,445 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:48,445 - INFO - integration_test -   Planner output success: False
2026-01-19 12:44:48,445 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-19 12:44:48,446 - INFO - integration_test - Step 63 completed in 9.974s
2026-01-19 12:44:48,457 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-19 12:44:48,457 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[14.30612937 10.65243358  0.82324092  3.00000001 18.29999218]
2026-01-19 12:44:48,458 - DEBUG - integration_test - Step 64: Using propagated spline 18.3000 (close to path, dist=0.829m, drift=0.888m)
2026-01-19 12:44:48,458 - DEBUG - integration_test -   Set spline state to 18.3000
2026-01-19 12:44:48,459 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:48,459 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:48,472 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(14.306, 10.652), path_start=(0.000, 0.000), dist=17.836m
2026-01-19 12:44:48,472 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=17.836m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:48,472 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-19 12:44:48,475 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:48,500 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:48,500 - INFO - integration_test - Warmstart k=0: x0=14.306129365431252 , y0=10.652433583701539 , psi0=0.8232409227764208 , v0=3.0000000130029627 , spline0=18.299992176123094 , a0=0.0 , w0=0.0
2026-01-19 12:44:48,500 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:48,501 - INFO - integration_test - Dyn residual k=0: pred=[14.510083778730404, 10.87243948834043, 0.8232409227764208, 3.0000000130029627, 18.599992177423392], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.510083778730404, 10.87243948834043, 0.8232409227764208, 3.0000000130029627, 18.599992177423392], res_norm=2.616e+01
2026-01-19 12:44:48,502 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:48,502 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:48,518 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,555 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,569 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,585 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,603 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,621 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,637 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,650 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,664 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,677 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,690 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,704 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,718 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,730 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,744 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,756 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,770 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,783 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,797 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,811 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:48,825 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:48,835 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:57,128 - WARNING - integration_test - Step 64: MPC solve failed
2026-01-19 12:44:57,128 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-19 12:44:57,132 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.300)
2026-01-19 12:44:57,133 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:57,133 - INFO - integration_test - === Applying control at step 64 ===
2026-01-19 12:44:57,133 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-19 12:44:57,133 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:57,133 - INFO - integration_test -   Planner output success: False
2026-01-19 12:44:57,133 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-19 12:44:57,134 - INFO - integration_test - Step 64 completed in 8.677s
2026-01-19 12:44:57,146 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-19 12:44:57,146 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[14.51008378 10.87243949  0.82324092  3.00000001 18.59999218]
2026-01-19 12:44:57,147 - DEBUG - integration_test - Step 65: Using propagated spline 18.6000 (close to path, dist=0.774m, drift=0.676m)
2026-01-19 12:44:57,147 - DEBUG - integration_test -   Set spline state to 18.6000
2026-01-19 12:44:57,148 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:57,148 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:57,161 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(14.510, 10.872), path_start=(0.000, 0.000), dist=18.132m
2026-01-19 12:44:57,161 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.132m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:57,161 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-19 12:44:57,164 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:57,187 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:57,187 - INFO - integration_test - Warmstart k=0: x0=14.510083778730404 , y0=10.87243948834043 , psi0=0.8232409227764208 , v0=3.0000000130029627 , spline0=18.599992177423392 , a0=0.0 , w0=0.0
2026-01-19 12:44:57,187 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:57,188 - INFO - integration_test - Dyn residual k=0: pred=[14.714038192029557, 11.09244539297932, 0.8232409227764208, 3.0000000130029627, 18.89999217872369], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.714038192029557, 11.09244539297932, 0.8232409227764208, 3.0000000130029627, 18.89999217872369], res_norm=2.658e+01
2026-01-19 12:44:57,189 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:57,190 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:57,204 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,242 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,256 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,269 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,283 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,297 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,311 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,325 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,340 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,353 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,367 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,380 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,394 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,407 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,435 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,449 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,462 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,476 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,489 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,503 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,514 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:57,676 - INFO - integration_test - Step 65: MPC solve successful
2026-01-19 12:44:57,680 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.600)
2026-01-19 12:44:57,681 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:57,681 - INFO - integration_test - === Applying control at step 65 ===
2026-01-19 12:44:57,681 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999103379045, 'w': -0.4579971203145873}
2026-01-19 12:44:57,681 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:57,681 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:57,682 - INFO - integration_test - Step 65 completed in 0.536s
2026-01-19 12:44:57,694 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-19 12:44:57,695 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[14.71198534 11.08057663  0.77744121  2.80000002 18.87999218]
2026-01-19 12:44:57,696 - DEBUG - integration_test - Step 66: Using propagated spline 18.8800 (close to path, dist=0.699m, drift=0.956m)
2026-01-19 12:44:57,696 - DEBUG - integration_test -   Set spline state to 18.8800
2026-01-19 12:44:57,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:57,697 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:57,710 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(14.712, 11.081), path_start=(0.000, 0.000), dist=18.418m
2026-01-19 12:44:57,710 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.418m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:57,711 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-19 12:44:57,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:57,736 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:57,736 - INFO - integration_test - Warmstart k=0: x0=14.711985337624354 , y0=11.080576625500555 , psi0=0.7774412107449621 , v0=2.800000021969172 , spline0=18.87999217962031 , a0=0.0 , w0=0.0
2026-01-19 12:44:57,736 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:57,737 - INFO - integration_test - Dyn residual k=0: pred=[14.911544349904805, 11.276984878504152, 0.7774412107449621, 2.800000021969172, 19.159992181817227], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.911544349904805, 11.276984878504152, 0.7774412107449621, 2.800000021969172, 19.159992181817227], res_norm=2.693e+01
2026-01-19 12:44:57,738 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:57,738 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:57,752 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,790 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,805 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,818 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,833 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,845 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,859 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,872 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,887 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,900 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,914 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,927 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,940 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,953 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,967 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:57,980 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:57,994 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,007 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,022 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,035 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,048 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,058 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:58,241 - INFO - integration_test - Step 66: MPC solve successful
2026-01-19 12:44:58,246 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.880)
2026-01-19 12:44:58,246 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:58,246 - INFO - integration_test - === Applying control at step 66 ===
2026-01-19 12:44:58,246 - INFO - integration_test -   Control dict from planner: {'a': -2.000000018219698, 'w': -0.00813568576696303}
2026-01-19 12:44:58,246 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:58,246 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:58,247 - INFO - integration_test - Step 66 completed in 0.552s
2026-01-19 12:44:58,258 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-19 12:44:58,259 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[14.90449331 11.26989297  0.77662764  2.60000002 19.13999218]
2026-01-19 12:44:58,260 - DEBUG - integration_test - Step 67: Using propagated spline 19.1400 (close to path, dist=0.648m, drift=0.704m)
2026-01-19 12:44:58,260 - DEBUG - integration_test -   Set spline state to 19.1400
2026-01-19 12:44:58,261 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:58,261 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:58,273 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(14.904, 11.270), path_start=(0.000, 0.000), dist=18.686m
2026-01-19 12:44:58,273 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.686m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:58,273 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-19 12:44:58,277 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:58,300 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:58,300 - INFO - integration_test - Warmstart k=0: x0=14.904493312704998 , y0=11.269892965651968 , psi0=0.7766276421682657 , v0=2.600000020147202 , spline0=19.13999218163503 , a0=0.0 , w0=0.0
2026-01-19 12:44:58,300 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:58,301 - INFO - integration_test - Dyn residual k=0: pred=[15.089946426360475, 11.452121239207813, 0.7766276421682657, 2.600000020147202, 19.39999218364975], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.089946426360475, 11.452121239207813, 0.7766276421682657, 2.600000020147202, 19.39999218364975], res_norm=2.725e+01
2026-01-19 12:44:58,301 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:58,302 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:58,316 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,353 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,367 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,380 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,394 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,407 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,422 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,435 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,449 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,462 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,476 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,491 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,504 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,517 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,531 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,544 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,557 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,570 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,584 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,598 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,612 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,622 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:44:58,803 - INFO - integration_test - Step 67: MPC solve successful
2026-01-19 12:44:58,807 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.140)
2026-01-19 12:44:58,807 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:44:58,807 - INFO - integration_test - === Applying control at step 67 ===
2026-01-19 12:44:58,807 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199453134, 'w': -0.12462679992263032}
2026-01-19 12:44:58,807 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:44:58,807 - INFO - integration_test -   Planner output success: True
2026-01-19 12:44:58,809 - INFO - integration_test - Step 67 completed in 0.550s
2026-01-19 12:44:58,820 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-19 12:44:58,821 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[15.08388637 11.44401167  0.76416496  2.40000002 19.37999218]
2026-01-19 12:44:58,821 - DEBUG - integration_test - Step 68: Using propagated spline 19.3800 (close to path, dist=0.595m, drift=0.944m)
2026-01-19 12:44:58,821 - DEBUG - integration_test -   Set spline state to 19.3800
2026-01-19 12:44:58,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:58,822 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:44:58,836 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(15.084, 11.444), path_start=(0.000, 0.000), dist=18.934m
2026-01-19 12:44:58,836 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=18.934m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:44:58,836 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-19 12:44:58,839 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:44:58,863 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:44:58,863 - INFO - integration_test - Warmstart k=0: x0=15.083886371022782 , y0=11.444011669620224 , psi0=0.7641649621760027 , v0=2.400000018152671 , spline0=19.379992183450298 , a0=0.0 , w0=0.0
2026-01-19 12:44:58,863 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:44:58,864 - INFO - integration_test - Dyn residual k=0: pred=[15.257156868441824, 11.610075921027581, 0.7641649621760027, 2.400000018152671, 19.619992185265566], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.257156868441824, 11.610075921027581, 0.7641649621760027, 2.400000018152671, 19.619992185265566], res_norm=2.755e+01
2026-01-19 12:44:58,865 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:58,865 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:44:58,880 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,918 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,932 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,945 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,960 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:58,972 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:58,986 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,000 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,014 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,028 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,042 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,056 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,070 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,083 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,105 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,118 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,132 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,145 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,159 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,172 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:44:59,186 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:44:59,197 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:02,928 - WARNING - integration_test - Step 68: MPC solve failed
2026-01-19 12:45:02,929 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-19 12:45:02,933 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.380)
2026-01-19 12:45:02,933 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:02,933 - INFO - integration_test - === Applying control at step 68 ===
2026-01-19 12:45:02,933 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-19 12:45:02,933 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:02,933 - INFO - integration_test -   Planner output success: False
2026-01-19 12:45:02,933 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-19 12:45:02,935 - INFO - integration_test - Step 68 completed in 4.114s
2026-01-19 12:45:02,947 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-19 12:45:02,948 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[15.25715687 11.61007592  0.76416496  2.40000002 19.61999219]
2026-01-19 12:45:02,948 - DEBUG - integration_test - Step 69: Using propagated spline 19.6200 (close to path, dist=0.561m, drift=0.672m)
2026-01-19 12:45:02,948 - DEBUG - integration_test -   Set spline state to 19.6200
2026-01-19 12:45:02,949 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:02,949 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:02,962 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(15.257, 11.610), path_start=(0.000, 0.000), dist=19.172m
2026-01-19 12:45:02,962 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.172m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:02,962 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-19 12:45:02,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:02,990 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:02,990 - INFO - integration_test - Warmstart k=0: x0=15.257156868441824 , y0=11.610075921027581 , psi0=0.7641649621760027 , v0=2.400000018152671 , spline0=19.619992185265566 , a0=0.0 , w0=0.0
2026-01-19 12:45:02,990 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:02,991 - INFO - integration_test - Dyn residual k=0: pred=[15.430427365860865, 11.776140172434939, 0.7641649621760027, 2.400000018152671, 19.859992187080834], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.430427365860865, 11.776140172434939, 0.7641649621760027, 2.400000018152671, 19.859992187080834], res_norm=2.788e+01
2026-01-19 12:45:02,992 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:02,993 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:03,007 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,045 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,059 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,072 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,086 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,099 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,114 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,127 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,141 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,154 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,168 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,181 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,196 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,209 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,223 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,237 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,251 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,264 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,277 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,290 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,304 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,315 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:03,518 - INFO - integration_test - Step 69: MPC solve successful
2026-01-19 12:45:03,522 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.620)
2026-01-19 12:45:03,522 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:03,522 - INFO - integration_test - === Applying control at step 69 ===
2026-01-19 12:45:03,522 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199078136, 'w': -0.800000009446338}
2026-01-19 12:45:03,522 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:03,522 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:03,523 - INFO - integration_test - Step 69 completed in 0.576s
2026-01-19 12:45:03,535 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-19 12:45:03,536 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[15.44445848 11.77555946  0.68416496  2.60000002 19.87999219]
2026-01-19 12:45:03,536 - DEBUG - integration_test - Step 70: Using propagated spline 19.8800 (close to path, dist=0.504m, drift=0.932m)
2026-01-19 12:45:03,536 - DEBUG - integration_test -   Set spline state to 19.8800
2026-01-19 12:45:03,537 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:03,537 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:03,550 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(15.444, 11.776), path_start=(0.000, 0.000), dist=19.422m
2026-01-19 12:45:03,550 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.422m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:03,550 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-19 12:45:03,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:03,577 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:03,577 - INFO - integration_test - Warmstart k=0: x0=15.444458476919461 , y0=11.775559460209664 , psi0=0.6841649612313689 , v0=2.6000000201434523 , spline0=19.87999218727991 , a0=0.0 , w0=0.0
2026-01-19 12:45:03,578 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:03,579 - INFO - integration_test - Dyn residual k=0: pred=[15.645944720197182, 11.939886252965106, 0.6841649612313689, 2.6000000201434523, 20.139992189294254], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.645944720197182, 11.939886252965106, 0.6841649612313689, 2.6000000201434523, 20.139992189294254], res_norm=2.829e+01
2026-01-19 12:45:03,579 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:03,580 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:03,594 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,632 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,646 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,659 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,674 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,687 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,701 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,714 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,728 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,741 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,755 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,768 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,781 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,794 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,809 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,822 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,836 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,849 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,876 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:03,891 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:03,901 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:04,098 - INFO - integration_test - Step 70: MPC solve successful
2026-01-19 12:45:04,103 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.880)
2026-01-19 12:45:04,103 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:04,103 - INFO - integration_test - === Applying control at step 70 ===
2026-01-19 12:45:04,103 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199866603, 'w': -0.23558056830982507}
2026-01-19 12:45:04,103 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:04,103 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:04,104 - INFO - integration_test - Step 70 completed in 0.569s
2026-01-19 12:45:04,117 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-19 12:45:04,118 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[15.65570926 11.94369553  0.6606069   2.80000002 20.15999219]
2026-01-19 12:45:04,118 - DEBUG - integration_test - Step 71: Using propagated spline 20.1600 (close to path, dist=0.491m, drift=0.700m)
2026-01-19 12:45:04,118 - DEBUG - integration_test -   Set spline state to 20.1600
2026-01-19 12:45:04,119 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:04,119 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:04,132 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(15.656, 11.944), path_start=(0.000, 0.000), dist=19.691m
2026-01-19 12:45:04,132 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.691m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:04,132 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-19 12:45:04,136 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:04,158 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:04,158 - INFO - integration_test - Warmstart k=0: x0=15.65570925636248 , y0=11.943695534357897 , psi0=0.6606069044003864 , v0=2.800000022142118 , spline0=20.159992189494123 , a0=0.0 , w0=0.0
2026-01-19 12:45:04,158 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:04,160 - INFO - integration_test - Dyn residual k=0: pred=[15.876802853270986, 12.115502468577729, 0.6606069044003864, 2.800000022142118, 20.439992191708335], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.876802853270986, 12.115502468577729, 0.6606069044003864, 2.800000022142118, 20.439992191708335], res_norm=2.872e+01
2026-01-19 12:45:04,161 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:04,161 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:04,175 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,214 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,228 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,241 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,255 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,269 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,296 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,310 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,323 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,337 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,350 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,364 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,377 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,392 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,405 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,419 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,432 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,446 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,459 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,473 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,484 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:04,662 - INFO - integration_test - Step 71: MPC solve successful
2026-01-19 12:45:04,666 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.160)
2026-01-19 12:45:04,667 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:04,667 - INFO - integration_test - === Applying control at step 71 ===
2026-01-19 12:45:04,667 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000156178688, 'w': -0.11506420160848373}
2026-01-19 12:45:04,667 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:04,667 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:04,668 - INFO - integration_test - Step 71 completed in 0.550s
2026-01-19 12:45:04,680 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-19 12:45:04,680 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[15.88572941 12.12030188  0.64910048  3.00000002 20.45999219]
2026-01-19 12:45:04,681 - DEBUG - integration_test - Step 72: Using propagated spline 20.4600 (close to path, dist=0.457m, drift=1.000m)
2026-01-19 12:45:04,681 - DEBUG - integration_test -   Set spline state to 20.4600
2026-01-19 12:45:04,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:04,682 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:04,695 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(15.886, 12.120), path_start=(0.000, 0.000), dist=19.981m
2026-01-19 12:45:04,695 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=19.981m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:04,695 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-19 12:45:04,699 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:04,722 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:04,722 - INFO - integration_test - Warmstart k=0: x0=15.885729411590335 , y0=12.120301881933829 , psi0=0.649100484239538 , v0=3.000000023703905 , spline0=20.45999219186451 , a0=0.0 , w0=0.0
2026-01-19 12:45:04,722 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:04,723 - INFO - integration_test - Dyn residual k=0: pred=[16.12471776881422, 12.301642904688368, 0.649100484239538, 3.000000023703905, 20.7599921942349], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.12471776881422, 12.301642904688368, 0.649100484239538, 3.000000023703905, 20.7599921942349], res_norm=2.918e+01
2026-01-19 12:45:04,724 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:04,724 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:04,738 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,776 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,790 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,804 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,818 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,831 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,844 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,857 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,871 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,885 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,899 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,912 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,926 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,939 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,952 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,965 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:04,979 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:04,992 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,007 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,020 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,034 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,044 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:05,232 - INFO - integration_test - Step 72: MPC solve successful
2026-01-19 12:45:05,237 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.460)
2026-01-19 12:45:05,237 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:05,237 - INFO - integration_test - === Applying control at step 72 ===
2026-01-19 12:45:05,237 - INFO - integration_test -   Control dict from planner: {'a': 6.295219842876846e-08, 'w': -0.12491150247784032}
2026-01-19 12:45:05,237 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:05,237 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:05,238 - INFO - integration_test - Step 72 completed in 0.558s
2026-01-19 12:45:05,250 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-19 12:45:05,251 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[16.12584412 12.30014559  0.63660933  3.00000003 20.75999219]
2026-01-19 12:45:05,252 - DEBUG - integration_test - Step 73: Using propagated spline 20.7600 (close to path, dist=0.417m, drift=0.787m)
2026-01-19 12:45:05,252 - DEBUG - integration_test -   Set spline state to 20.7600
2026-01-19 12:45:05,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:05,252 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:05,265 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(16.126, 12.300), path_start=(0.000, 0.000), dist=20.281m
2026-01-19 12:45:05,265 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.281m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:05,265 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-19 12:45:05,269 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:05,291 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:05,291 - INFO - integration_test - Warmstart k=0: x0=16.125844118525738 , y0=12.30014558884554 , psi0=0.636609333991754 , v0=3.000000029999125 , spline0=20.759992194864424 , a0=0.0 , w0=0.0
2026-01-19 12:45:05,291 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:05,292 - INFO - integration_test - Dyn residual k=0: pred=[16.367078931017616, 12.478487303096458, 0.636609333991754, 3.000000029999125, 21.059992197864336], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.367078931017616, 12.478487303096458, 0.636609333991754, 3.000000029999125, 21.059992197864336], res_norm=2.961e+01
2026-01-19 12:45:05,293 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:05,294 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:05,308 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,345 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,359 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,372 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,386 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,406 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,432 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,453 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,476 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,499 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,518 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,538 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,557 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,573 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,588 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,602 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,618 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,632 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,647 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,661 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:05,676 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:05,688 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:06,125 - INFO - integration_test - Step 73: MPC solve successful
2026-01-19 12:45:06,129 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.760)
2026-01-19 12:45:06,130 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:06,130 - INFO - integration_test - === Applying control at step 73 ===
2026-01-19 12:45:06,130 - INFO - integration_test -   Control dict from planner: {'a': -3.0013465893075745e-06, 'w': -0.08466586152056113}
2026-01-19 12:45:06,130 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:06,130 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:06,131 - INFO - integration_test - Step 73 completed in 0.880s
2026-01-19 12:45:06,145 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-19 12:45:06,145 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[16.36783101 12.47746395  0.62814275  2.99999973 21.05999217]
2026-01-19 12:45:06,146 - DEBUG - integration_test - Step 74: Using propagated spline 21.0600 (close to path, dist=0.444m, drift=1.087m)
2026-01-19 12:45:06,146 - DEBUG - integration_test -   Set spline state to 21.0600
2026-01-19 12:45:06,146 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:06,147 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:06,159 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(16.368, 12.477), path_start=(0.000, 0.000), dist=20.581m
2026-01-19 12:45:06,159 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.581m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:06,159 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-19 12:45:06,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:06,185 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:06,185 - INFO - integration_test - Warmstart k=0: x0=16.367831005069533 , y0=12.477463952009902 , psi0=0.6281427478396979 , v0=2.999999729864466 , spline0=21.05999216785087 , a0=0.0 , w0=0.0
2026-01-19 12:45:06,185 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:06,186 - INFO - integration_test - Dyn residual k=0: pred=[16.61056707454993, 12.653756845698437, 0.6281427478396979, 2.999999729864466, 21.359992140837313], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.61056707454993, 12.653756845698437, 0.6281427478396979, 2.999999729864466, 21.359992140837313], res_norm=3.003e+01
2026-01-19 12:45:06,186 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:06,187 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:06,201 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,239 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,253 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,265 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,279 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,292 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,307 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,320 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,334 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,347 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,360 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,373 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,387 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,400 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,415 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,428 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,442 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,455 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,469 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,482 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,496 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,507 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:06,669 - INFO - integration_test - Step 74: MPC solve successful
2026-01-19 12:45:06,673 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=21.060)
2026-01-19 12:45:06,674 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:06,674 - INFO - integration_test - === Applying control at step 74 ===
2026-01-19 12:45:06,674 - INFO - integration_test -   Control dict from planner: {'a': 2.919426832465488e-06, 'w': -0.11289561870777957}
2026-01-19 12:45:06,674 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:06,674 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:06,675 - INFO - integration_test - Step 74 completed in 0.530s
2026-01-19 12:45:06,687 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-19 12:45:06,688 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[16.61155705 12.65238293  0.61685319  3.00000002 21.35999217]
2026-01-19 12:45:06,688 - DEBUG - integration_test - Step 75: Using propagated spline 21.3600 (close to path, dist=0.362m, drift=0.875m)
2026-01-19 12:45:06,688 - DEBUG - integration_test -   Set spline state to 21.3600
2026-01-19 12:45:06,689 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:06,689 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:06,703 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(16.612, 12.652), path_start=(0.000, 0.000), dist=20.881m
2026-01-19 12:45:06,703 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.881m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:06,703 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-19 12:45:06,707 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:06,730 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:06,730 - INFO - integration_test - Warmstart k=0: x0=16.611557054366173 , y0=12.652382931949191 , psi0=0.6168531859689199 , v0=3.0000000218071494 , spline0=21.359992170031582 , a0=0.0 , w0=0.0
2026-01-19 12:45:06,730 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:06,731 - INFO - integration_test - Dyn residual k=0: pred=[16.85626790621097, 12.825924282346792, 0.6168531859689199, 3.0000000218071494, 21.6599921722123], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.85626790621097, 12.825924282346792, 0.6168531859689199, 3.0000000218071494, 21.6599921722123], res_norm=3.045e+01
2026-01-19 12:45:06,731 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:06,732 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:06,746 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,784 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,798 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,812 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,826 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,839 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,853 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,865 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,879 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,892 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,907 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,921 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,935 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,948 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,963 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:06,976 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:06,990 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,004 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,019 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,032 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,045 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,056 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:07,222 - INFO - integration_test - Step 75: MPC solve successful
2026-01-19 12:45:07,227 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.360)
2026-01-19 12:45:07,227 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:07,227 - INFO - integration_test - === Applying control at step 75 ===
2026-01-19 12:45:07,227 - INFO - integration_test -   Control dict from planner: {'a': 8.192309373580876e-08, 'w': -0.061607094299830516}
2026-01-19 12:45:07,227 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:07,227 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:07,228 - INFO - integration_test - Step 75 completed in 0.541s
2026-01-19 12:45:07,238 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-19 12:45:07,239 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[16.85680093 12.82516939  0.61069248  3.00000003 21.65999217]
2026-01-19 12:45:07,240 - DEBUG - integration_test - Step 76: Using propagated spline 21.6600 (close to path, dist=0.395m, drift=0.663m)
2026-01-19 12:45:07,240 - DEBUG - integration_test -   Set spline state to 21.6600
2026-01-19 12:45:07,240 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:07,241 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:07,254 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(16.857, 12.825), path_start=(0.000, 0.000), dist=21.181m
2026-01-19 12:45:07,254 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.181m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:07,254 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-19 12:45:07,257 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:07,279 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:07,279 - INFO - integration_test - Warmstart k=0: x0=16.85680092580213 , y0=12.82516939096781 , psi0=0.6106924765389369 , v0=3.000000029999459 , spline0=21.659992173031526 , a0=0.0 , w0=0.0
2026-01-19 12:45:07,279 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:07,280 - INFO - integration_test - Dyn residual k=0: pred=[17.10257626548408, 12.99719986560585, 0.6106924765389369, 3.000000029999459, 21.95999217603147], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.10257626548408, 12.99719986560585, 0.6106924765389369, 3.000000029999459, 21.95999217603147], res_norm=3.087e+01
2026-01-19 12:45:07,280 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:07,281 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:07,295 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,333 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,347 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,360 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,374 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,387 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,401 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,414 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,428 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,441 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,455 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,468 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,481 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,494 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,509 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,522 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,536 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,548 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,562 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,575 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:07,590 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:07,600 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:08,031 - INFO - integration_test - Step 76: MPC solve successful
2026-01-19 12:45:08,035 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.660)
2026-01-19 12:45:08,035 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:08,035 - INFO - integration_test - === Applying control at step 76 ===
2026-01-19 12:45:08,035 - INFO - integration_test -   Control dict from planner: {'a': -1.4415820114293144e-06, 'w': -0.05642596424088456}
2026-01-19 12:45:08,035 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:08,035 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:08,036 - INFO - integration_test - Step 76 completed in 0.797s
2026-01-19 12:45:08,049 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-19 12:45:08,050 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[17.1030603  12.99650554  0.60504988  2.99999989 21.95999216]
2026-01-19 12:45:08,050 - DEBUG - integration_test - Step 77: Using propagated spline 21.9600 (close to path, dist=0.334m, drift=0.963m)
2026-01-19 12:45:08,050 - DEBUG - integration_test -   Set spline state to 21.9600
2026-01-19 12:45:08,051 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:08,051 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:08,063 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(17.103, 12.997), path_start=(0.000, 0.000), dist=21.481m
2026-01-19 12:45:08,063 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.481m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:08,063 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-19 12:45:08,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:08,089 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:08,089 - INFO - integration_test - Warmstart k=0: x0=17.103060303345906 , y0=12.996505544933019 , psi0=0.6050498801148484 , v0=2.999999885841258 , spline0=21.959992161615652 , a0=0.0 , w0=0.0
2026-01-19 12:45:08,089 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:08,090 - INFO - integration_test - Dyn residual k=0: pred=[17.3498024119641, 13.167146469054762, 0.6050498801148484, 2.999999885841258, 22.25999215019978], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.3498024119641, 13.167146469054762, 0.6050498801148484, 2.999999885841258, 22.25999215019978], res_norm=3.129e+01
2026-01-19 12:45:08,090 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:08,091 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:08,106 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,144 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,158 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,172 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,186 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,200 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,214 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,227 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,241 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,254 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,267 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,281 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,295 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,308 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,322 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,335 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,349 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,361 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,375 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,388 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,413 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:08,575 - INFO - integration_test - Step 77: MPC solve successful
2026-01-19 12:45:08,580 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=21.960)
2026-01-19 12:45:08,580 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:08,580 - INFO - integration_test - === Applying control at step 77 ===
2026-01-19 12:45:08,580 - INFO - integration_test -   Control dict from planner: {'a': 1.4393113994471126e-06, 'w': -0.04127462117255098}
2026-01-19 12:45:08,580 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:08,580 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:08,581 - INFO - integration_test - Step 77 completed in 0.532s
2026-01-19 12:45:08,592 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-19 12:45:08,593 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[17.35015387 13.16663678  0.60092242  3.00000003 22.25999216]
2026-01-19 12:45:08,594 - DEBUG - integration_test - Step 78: Using propagated spline 22.2600 (close to path, dist=0.319m, drift=0.751m)
2026-01-19 12:45:08,594 - DEBUG - integration_test -   Set spline state to 22.2600
2026-01-19 12:45:08,595 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:08,595 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:08,609 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(17.350, 13.167), path_start=(0.000, 0.000), dist=21.780m
2026-01-19 12:45:08,609 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=21.780m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:08,609 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-19 12:45:08,612 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:08,635 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:08,635 - INFO - integration_test - Warmstart k=0: x0=17.350153873789207 , y0=13.166636779997333 , psi0=0.6009224179975933 , v0=3.000000029772398 , spline0=22.25999216459289 , a0=0.0 , w0=0.0
2026-01-19 12:45:08,635 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:08,636 - INFO - integration_test - Dyn residual k=0: pred=[17.597598204489913, 13.33625784293005, 0.6009224179975933, 3.000000029772398, 22.55999216757013], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.597598204489913, 13.33625784293005, 0.6009224179975933, 3.000000029772398, 22.55999216757013], res_norm=3.172e+01
2026-01-19 12:45:08,636 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:08,637 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:08,651 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,688 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,703 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,716 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,730 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,743 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,757 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,770 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,784 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,797 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,811 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,824 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,839 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,851 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,865 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,878 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,891 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,905 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,919 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,932 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:08,945 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:08,955 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:09,125 - INFO - integration_test - Step 78: MPC solve successful
2026-01-19 12:45:09,130 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.260)
2026-01-19 12:45:09,130 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:09,130 - INFO - integration_test - === Applying control at step 78 ===
2026-01-19 12:45:09,130 - INFO - integration_test -   Control dict from planner: {'a': -2.2561772355688455e-06, 'w': -0.03322618864086815}
2026-01-19 12:45:09,130 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:09,130 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:09,131 - INFO - integration_test - Step 78 completed in 0.538s
2026-01-19 12:45:09,142 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-19 12:45:09,144 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[17.59787953 13.33584644  0.5975998   2.9999998  22.55999215]
2026-01-19 12:45:09,144 - DEBUG - integration_test - Step 79: Using propagated spline 22.5600 (close to path, dist=0.335m, drift=1.051m)
2026-01-19 12:45:09,144 - DEBUG - integration_test -   Set spline state to 22.5600
2026-01-19 12:45:09,145 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:09,145 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:09,158 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(17.598, 13.336), path_start=(0.000, 0.000), dist=22.080m
2026-01-19 12:45:09,158 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.080m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:09,158 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-19 12:45:09,162 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:09,187 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:09,187 - INFO - integration_test - Warmstart k=0: x0=17.59787953269475 , y0=13.3358464432533 , psi0=0.5975997991335065 , v0=2.9999998041546743 , spline0=22.55999214500836 , a0=0.0 , w0=0.0
2026-01-19 12:45:09,187 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:09,188 - INFO - integration_test - Dyn residual k=0: pred=[17.845886063984143, 13.504644395513052, 0.5975997991335065, 2.9999998041546743, 22.859992125423826], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.845886063984143, 13.504644395513052, 0.5975997991335065, 2.9999998041546743, 22.859992125423826], res_norm=3.214e+01
2026-01-19 12:45:09,188 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:09,189 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:09,204 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,243 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,257 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,270 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,285 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,299 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,313 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,326 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,339 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,353 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,366 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,379 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,393 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,407 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,421 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,434 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,448 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,461 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,488 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,502 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,512 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:09,755 - INFO - integration_test - Step 79: MPC solve successful
2026-01-19 12:45:09,759 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.560)
2026-01-19 12:45:09,760 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:09,760 - INFO - integration_test - === Applying control at step 79 ===
2026-01-19 12:45:09,760 - INFO - integration_test -   Control dict from planner: {'a': 2.258447194877708e-06, 'w': -0.015759688712217366}
2026-01-19 12:45:09,760 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:09,760 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:09,761 - INFO - integration_test - Step 79 completed in 0.618s
2026-01-19 12:45:09,772 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-19 12:45:09,772 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[17.84601898 13.50444891  0.59602383  3.00000003 22.85999215]
2026-01-19 12:45:09,773 - DEBUG - integration_test - Step 80: Using propagated spline 22.8600 (close to path, dist=0.258m, drift=0.839m)
2026-01-19 12:45:09,773 - DEBUG - integration_test -   Set spline state to 22.8600
2026-01-19 12:45:09,774 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:09,774 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:09,787 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(17.846, 13.504), path_start=(0.000, 0.000), dist=22.380m
2026-01-19 12:45:09,787 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=22.380m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:09,787 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-19 12:45:09,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:09,813 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:09,813 - INFO - integration_test - Warmstart k=0: x0=17.84601898079621 , y0=13.50444890673751 , psi0=0.5960238302622848 , v0=3.0000000299993936 , spline0=22.8599921480083 , a0=0.0 , w0=0.0
2026-01-19 12:45:09,813 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:09,814 - INFO - integration_test - Dyn residual k=0: pred=[18.09429124299999, 13.672855811643991, 0.5960238302622848, 3.0000000299993936, 23.15999215100824], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.09429124299999, 13.672855811643991, 0.5960238302622848, 3.0000000299993936, 23.15999215100824], res_norm=3.256e+01
2026-01-19 12:45:09,815 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:09,816 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:09,829 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,866 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,880 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,893 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,908 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,921 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,935 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,948 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,962 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:09,975 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:09,989 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,002 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,016 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,029 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,043 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,055 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,069 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,082 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,096 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,109 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,123 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,134 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:10,413 - INFO - integration_test - Step 80: MPC solve successful
2026-01-19 12:45:10,417 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.860)
2026-01-19 12:45:10,417 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:10,417 - INFO - integration_test - === Applying control at step 80 ===
2026-01-19 12:45:10,417 - INFO - integration_test -   Control dict from planner: {'a': -3.109052308936477e-08, 'w': 0.017043238356009443}
2026-01-19 12:45:10,417 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:10,417 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:10,418 - INFO - integration_test - Step 80 completed in 0.646s
2026-01-19 12:45:10,431 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-19 12:45:10,432 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[18.09414761 13.6730673   0.59772815  3.00000003 23.15999215]
2026-01-19 12:45:10,433 - DEBUG - integration_test - Step 81: Using propagated spline 23.1600 (close to path, dist=0.333m, drift=0.627m)
2026-01-19 12:45:10,433 - DEBUG - integration_test -   Set spline state to 23.1600
2026-01-19 12:45:10,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:10,434 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:10,446 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(18.094, 13.673), path_start=(0.000, 0.000), dist=22.679m
2026-01-19 12:45:10,446 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=22.679m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:10,446 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-19 12:45:10,449 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:10,473 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:10,473 - INFO - integration_test - Warmstart k=0: x0=18.094147612761585 , y0=13.673067298143334 , psi0=0.5977281540978857 , v0=3.0000000268903415 , spline0=23.159992150697335 , a0=0.0 , w0=0.0
2026-01-19 12:45:10,473 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:10,474 - INFO - integration_test - Dyn residual k=0: pred=[18.342132494364623, 13.84189709441682, 0.5977281540978857, 3.0000000268903415, 23.45999215338637], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.342132494364623, 13.84189709441682, 0.5977281540978857, 3.0000000268903415, 23.45999215338637], res_norm=3.298e+01
2026-01-19 12:45:10,475 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:10,475 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:10,489 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,528 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,542 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,554 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,568 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,581 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,595 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,608 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,622 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,635 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,649 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,662 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,675 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,689 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,703 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,716 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,730 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,743 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,757 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,770 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:10,784 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:10,794 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:11,150 - INFO - integration_test - Step 81: MPC solve successful
2026-01-19 12:45:11,154 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=23.160)
2026-01-19 12:45:11,154 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:11,154 - INFO - integration_test - === Applying control at step 81 ===
2026-01-19 12:45:11,155 - INFO - integration_test -   Control dict from planner: {'a': 3.054968824066599e-08, 'w': -0.0939202925532361}
2026-01-19 12:45:11,155 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:11,155 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:11,156 - INFO - integration_test - Step 81 completed in 0.724s
2026-01-19 12:45:11,167 - INFO - integration_test - Step 82 (contouring until path end)
2026-01-19 12:45:11,168 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[18.34292167 13.84073008  0.58833612  3.00000003 23.45999215]
2026-01-19 12:45:11,169 - DEBUG - integration_test - Step 82: Using propagated spline 23.4600 (close to path, dist=0.221m, drift=0.927m)
2026-01-19 12:45:11,169 - DEBUG - integration_test -   Set spline state to 23.4600
2026-01-19 12:45:11,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:11,170 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:11,182 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(18.343, 13.841), path_start=(0.000, 0.000), dist=22.979m
2026-01-19 12:45:11,182 - WARNING - integration_test - Step 82: Vehicle is far from path start (dist=22.979m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:11,183 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2026-01-19 12:45:11,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:11,209 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:11,209 - INFO - integration_test - Warmstart k=0: x0=18.34292167007323 , y0=13.840730080356886 , psi0=0.5883361248425621 , v0=3.0000000299453102 , spline0=23.459992153691864 , a0=0.0 , w0=0.0
2026-01-19 12:45:11,209 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:11,210 - INFO - integration_test - Dyn residual k=0: pred=[18.59248124568518, 14.007223383576877, 0.5883361248425621, 3.0000000299453102, 23.759992156686394], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.59248124568518, 14.007223383576877, 0.5883361248425621, 3.0000000299453102, 23.759992156686394], res_norm=3.340e+01
2026-01-19 12:45:11,211 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:11,212 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:11,225 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,263 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,277 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,290 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,305 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,318 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,332 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,344 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,358 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,371 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,398 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,412 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,425 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,439 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,452 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,466 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,479 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,493 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,506 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,520 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,530 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:11,679 - INFO - integration_test - Step 82: MPC solve successful
2026-01-19 12:45:11,683 - INFO - integration_test - Step 82: Computed 6 numeric contouring constraints for visualization (s=23.460)
2026-01-19 12:45:11,683 - DEBUG - integration_test - Step 82: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:11,683 - INFO - integration_test - === Applying control at step 82 ===
2026-01-19 12:45:11,683 - INFO - integration_test -   Control dict from planner: {'a': -0.0017996768800349824, 'w': -0.07586721912731664}
2026-01-19 12:45:11,684 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:11,684 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:11,685 - INFO - integration_test - Step 82 completed in 0.517s
2026-01-19 12:45:11,699 - INFO - integration_test - Step 83 (contouring until path end)
2026-01-19 12:45:11,700 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[18.59310291 14.00627017  0.5807494   2.99982006 23.75997416]
2026-01-19 12:45:11,700 - DEBUG - integration_test - Step 83: Using propagated spline 23.7600 (close to path, dist=0.243m, drift=0.715m)
2026-01-19 12:45:11,700 - DEBUG - integration_test -   Set spline state to 23.7600
2026-01-19 12:45:11,701 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:11,701 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:11,714 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(18.593, 14.006), path_start=(0.000, 0.000), dist=23.278m
2026-01-19 12:45:11,714 - WARNING - integration_test - Step 83: Vehicle is far from path start (dist=23.278m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:11,714 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2026-01-19 12:45:11,718 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:11,741 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:11,741 - INFO - integration_test - Warmstart k=0: x0=18.59310290722581 , y0=14.00627016542121 , psi0=0.5807494029298305 , v0=2.9998200622573066 , spline0=23.759974159917594 , a0=0.0 , w0=0.0
2026-01-19 12:45:11,741 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:11,742 - INFO - integration_test - Dyn residual k=0: pred=[18.84390338079853, 14.170855482247811, 0.5807494029298305, 2.9998200622573066, 24.059956166143323], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.84390338079853, 14.170855482247811, 0.5807494029298305, 2.9998200622573066, 24.059956166143323], res_norm=3.382e+01
2026-01-19 12:45:11,743 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:11,744 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:11,757 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,795 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,809 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,822 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,836 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,849 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,863 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,875 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,889 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,903 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,917 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,930 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,943 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,957 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,970 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:11,983 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:11,998 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,011 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,025 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,038 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,052 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,062 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:12,511 - INFO - integration_test - Step 83: MPC solve successful
2026-01-19 12:45:12,516 - INFO - integration_test - Step 83: Computed 6 numeric contouring constraints for visualization (s=23.760)
2026-01-19 12:45:12,516 - DEBUG - integration_test - Step 83: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:12,516 - INFO - integration_test - === Applying control at step 83 ===
2026-01-19 12:45:12,516 - INFO - integration_test -   Control dict from planner: {'a': -0.3494441025995525, 'w': -0.0310468300859666}
2026-01-19 12:45:12,516 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:12,516 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:12,518 - INFO - integration_test - Step 83 completed in 0.818s
2026-01-19 12:45:12,530 - INFO - integration_test - Step 84 (contouring until path end)
2026-01-19 12:45:12,531 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[18.84269572 14.1695103   0.57764472  2.96487565 24.05646173]
2026-01-19 12:45:12,532 - DEBUG - integration_test - Step 84: Using propagated spline 24.0565 (close to path, dist=0.227m, drift=1.011m)
2026-01-19 12:45:12,532 - DEBUG - integration_test -   Set spline state to 24.0565
2026-01-19 12:45:12,533 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:12,533 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:12,546 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(18.843, 14.170), path_start=(0.000, 0.000), dist=23.576m
2026-01-19 12:45:12,546 - WARNING - integration_test - Step 84: Vehicle is far from path start (dist=23.576m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:12,546 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2026-01-19 12:45:12,550 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:12,574 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:12,574 - INFO - integration_test - Warmstart k=0: x0=18.842695722970262 , y0=14.16951030231788 , psi0=0.5776447199212338 , v0=2.9648756519973514 , spline0=24.05646172511733 , a0=0.0 , w0=0.0
2026-01-19 12:45:12,574 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:12,575 - INFO - integration_test - Dyn residual k=0: pred=[19.09107850048137, 14.33140802359256, 0.5776447199212338, 2.9648756519973514, 24.352949290317067], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.09107850048137, 14.33140802359256, 0.5776447199212338, 2.9648756519973514, 24.352949290317067], res_norm=3.424e+01
2026-01-19 12:45:12,576 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:12,577 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:12,592 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,638 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,665 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,686 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,712 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,735 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,755 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,778 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,797 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,813 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,828 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,842 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,857 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,870 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,885 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,899 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,915 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,929 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,943 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,956 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:12,970 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:12,981 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:13,163 - INFO - integration_test - Step 84: MPC solve successful
2026-01-19 12:45:13,168 - INFO - integration_test - Step 84: Computed 6 numeric contouring constraints for visualization (s=24.056)
2026-01-19 12:45:13,168 - DEBUG - integration_test - Step 84: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:13,168 - INFO - integration_test - === Applying control at step 84 ===
2026-01-19 12:45:13,168 - INFO - integration_test -   Control dict from planner: {'a': -2.000000018994853, 'w': -0.6669074930140958}
2026-01-19 12:45:13,168 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:13,168 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:13,169 - INFO - integration_test - Step 84 completed in 0.638s
2026-01-19 12:45:13,181 - INFO - integration_test - Step 85 (contouring until path end)
2026-01-19 12:45:13,182 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[19.0876801  14.31792654  0.51095397  2.76487565 24.33294929]
2026-01-19 12:45:13,182 - DEBUG - integration_test - Step 85: Using propagated spline 24.3329 (close to path, dist=0.179m, drift=0.776m)
2026-01-19 12:45:13,182 - DEBUG - integration_test -   Set spline state to 24.3329
2026-01-19 12:45:13,183 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:13,183 - DEBUG - integration_test - Error updating modules: 'x'
2026-01-19 12:45:13,196 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(19.088, 14.318), path_start=(0.000, 0.000), dist=23.861m
2026-01-19 12:45:13,196 - WARNING - integration_test - Step 85: Vehicle is far from path start (dist=23.861m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-19 12:45:13,196 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2026-01-19 12:45:13,200 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-19 12:45:13,222 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['linearized_constraints', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-19 12:45:13,222 - INFO - integration_test - Warmstart k=0: x0=19.087680099020034 , y0=14.317926535518742 , psi0=0.5109539706198242 , v0=2.764875650097866 , spline0=24.332949290127118 , a0=0.0 , w0=0.0
2026-01-19 12:45:13,222 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-19 12:45:13,223 - INFO - integration_test - Dyn residual k=0: pred=[19.328854230908576, 14.453131608326121, 0.5109539706198242, 2.764875650097866, 24.609436855136906], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.328854230908576, 14.453131608326121, 0.5109539706198242, 2.764875650097866, 24.609436855136906], res_norm=3.458e+01
2026-01-19 12:45:13,224 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:13,225 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-19 12:45:13,238 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,276 - INFO - integration_test - Stage 0: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,290 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,303 - INFO - integration_test - Stage 1: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,318 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,331 - INFO - integration_test - Stage 2: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,344 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,357 - INFO - integration_test - Stage 3: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,371 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,383 - INFO - integration_test - Stage 4: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,398 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,411 - INFO - integration_test - Stage 5: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,424 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,437 - INFO - integration_test - Stage 6: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,451 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,463 - INFO - integration_test - Stage 7: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,478 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,491 - INFO - integration_test - Stage 8: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,505 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,518 - INFO - integration_test - Stage 9: constraints count=3 (linearized=3, contouring=0, other=0)
2026-01-19 12:45:13,532 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-19 12:45:13,542 - INFO - integration_test - Stage 10: constraints count=0 (linearized=0, contouring=0, other=0)
2026-01-19 12:45:13,730 - INFO - integration_test - Step 85: MPC solve successful
2026-01-19 12:45:13,735 - INFO - integration_test - Step 85: Computed 6 numeric contouring constraints for visualization (s=24.333)
2026-01-19 12:45:13,735 - DEBUG - integration_test - Step 85: Captured 6 contouring constraint halfspaces for visualization
2026-01-19 12:45:13,735 - INFO - integration_test - === Applying control at step 85 ===
2026-01-19 12:45:13,735 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019937459, 'w': -0.5796970792769488}
2026-01-19 12:45:13,735 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-19 12:45:13,735 - INFO - integration_test -   Planner output success: True
2026-01-19 12:45:13,736 - INFO - integration_test - Goal reached at step 85!
2026-01-19 12:45:13,736 - INFO - integration_test - Step 85 completed in 0.555s
2026-01-19 12:45:13,748 - INFO - integration_test - Goal reached at step 85, added 3 extra frames for visualization
2026-01-19 12:45:13,749 - INFO - integration_test - Saving test results...
2026-01-19 12:45:13,749 - INFO - integration_test - Saved 90 vehicle states to test_outputs/20260119_124351_contouring_linear_contouring_unicycle/vehicle_states.csv
2026-01-19 12:45:13,749 - INFO - integration_test - Saved obstacle summary to test_outputs/20260119_124351_contouring_linear_contouring_unicycle/obstacle_summary.csv
2026-01-19 12:45:13,750 - INFO - integration_test - Saved 97 states for obstacle 0 to test_outputs/20260119_124351_contouring_linear_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-19 12:45:13,750 - INFO - integration_test - Saved 97 states for obstacle 1 to test_outputs/20260119_124351_contouring_linear_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-19 12:45:13,750 - INFO - integration_test - Saved 97 states for obstacle 2 to test_outputs/20260119_124351_contouring_linear_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-19 12:45:13,750 - INFO - integration_test - Saved state history: 90 vehicle states, 3 obstacles
2026-01-19 12:45:13,750 - INFO - integration_test - Creating animation...
2026-01-19 12:45:13,797 - DEBUG - integration_test - Creating animation with 90 frames (range: 0 to 89)
2026-01-19 12:45:13,798 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-19 12:45:13,803 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-19 12:45:13,885 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-19 12:45:13,922 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-19 12:45:22,396 - INFO - integration_test - Saved animation with 90 frames at 10.00 fps to test_outputs/20260119_124351_contouring_linear_contouring_unicycle/animation.gif (duration: 9.00s, size: 919828 bytes)
2026-01-19 12:45:22,444 - INFO - integration_test - Animation created successfully
2026-01-19 12:45:22,444 - INFO - integration_test - Test completed successfully
