2026-01-20 16:18:03,192 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-20 16:18:03,192 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-20 16:18:03,192 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-20 16:18:03,192 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-20 16:18:03,192 - INFO - integration_test - Creating objective module: contouring
2026-01-20 16:18:03,198 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-20 16:18:03,198 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-20 16:18:03,198 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-20 16:18:03,206 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-20 16:18:03,206 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-20 16:18:03,211 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-20 16:18:03,211 - INFO - integration_test - Created 2 constraint module(s)
2026-01-20 16:18:03,227 - INFO - integration_test - Setting solver on all modules...
2026-01-20 16:18:03,227 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-20 16:18:03,227 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-20 16:18:03,227 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-20 16:18:03,227 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-20 16:18:03,227 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-20 16:18:03,227 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-20 16:18:03,228 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-20 16:18:03,228 - INFO - integration_test - Obstacle 0: s=10.04, pos=(6.02, 9.00), lateral_offset=2.68m, vel=(0.47, 0.37)
2026-01-20 16:18:03,228 - INFO - integration_test - Obstacle 1: s=21.33, pos=(18.36, 11.00), lateral_offset=-2.68m, vel=(-0.69, -0.41)
2026-01-20 16:18:03,228 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-20 16:18:03,228 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-20 16:18:03,229 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-20 16:18:03,229 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-20 16:18:03,229 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-20 16:18:03,229 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-20 16:18:03,229 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-20 16:18:03,229 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-20 16:18:03,229 - INFO - integration_test - Added spline variable: 0.0000
2026-01-20 16:18:03,229 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-20 16:18:03,229 - INFO - integration_test - Auto-calculated timeout: 255s for 150 steps
2026-01-20 16:18:03,229 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-20 16:18:03,229 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-20 16:18:03,230 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-20 16:18:03,230 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-20 16:18:03,231 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:03,245 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-20 16:18:03,245 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-20 16:18:03,379 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:03,404 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:03,404 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-20 16:18:03,404 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:03,405 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-20 16:18:03,406 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:03,407 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:03,422 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:03,619 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:03,640 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:03,680 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:03,699 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:03,742 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:03,760 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:03,799 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:03,820 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:03,868 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:03,892 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:03,945 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:03,973 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:04,029 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:04,059 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:04,111 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:04,131 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:04,180 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:04,206 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:04,258 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:04,289 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:04,338 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:05,340 - INFO - integration_test - Step 0: MPC solve successful
2026-01-20 16:18:05,606 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-20 16:18:05,607 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:05,607 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-20 16:18:05,607 - INFO - integration_test - === Applying control at step 0 ===
2026-01-20 16:18:05,607 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000093752104, 'w': 0.7999998973216994}
2026-01-20 16:18:05,607 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:05,607 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:05,608 - INFO - integration_test - Step 0 completed in 2.379s
2026-01-20 16:18:05,665 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-20 16:18:05,670 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.07999999 1.2        0.12      ]
2026-01-20 16:18:05,670 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-20 16:18:05,670 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-20 16:18:05,671 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:05,821 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-20 16:18:05,821 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-20 16:18:05,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:05,986 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:05,986 - INFO - integration_test - Warmstart k=0: x0=0.10987737535945834 , y0=0.004530844474682586 , psi0=0.07999998973216994 , v0=1.2000000009375211 , spline0=0.12000000009375211 , a0=0.0 , w0=0.0
2026-01-20 16:18:05,986 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:05,987 - INFO - integration_test - Dyn residual k=0: pred=[0.229493580307691, 0.014120606530276615, 0.07999998973216994, 1.2000000009375211, 0.24000000018750423], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.229493580307691, 0.014120606530276615, 0.07999998973216994, 1.2000000009375211, 0.24000000018750423], res_norm=1.248e+00
2026-01-20 16:18:05,988 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:05,988 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:06,002 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,207 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,226 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,266 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,285 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,325 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,344 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,383 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,401 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,442 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,460 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,500 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,522 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,573 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,594 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,635 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,654 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,693 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,712 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,754 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:06,773 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:06,816 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:07,359 - INFO - integration_test - Step 1: MPC solve successful
2026-01-20 16:18:07,388 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-20 16:18:07,388 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:07,388 - INFO - integration_test - === Applying control at step 1 ===
2026-01-20 16:18:07,388 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195593217, 'w': 0.8000000044313063}
2026-01-20 16:18:07,388 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:07,388 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:07,390 - INFO - integration_test - Step 1 completed in 1.720s
2026-01-20 16:18:07,444 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-20 16:18:07,445 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-20 16:18:07,445 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-20 16:18:07,445 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-20 16:18:07,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:07,600 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-20 16:18:07,600 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-20 16:18:07,747 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:07,771 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:07,771 - INFO - integration_test - Warmstart k=0: x0=0.23889212821873906 , y0=0.02022161986889396 , psi0=0.15999999017530053 , v0=1.4000000028934534 , spline0=0.26000000038309745 , a0=0.0 , w0=0.0
2026-01-20 16:18:07,771 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:07,772 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394839611194, 0.04252616748309678, 0.15999999017530053, 1.4000000028934534, 0.4000000006724428], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394839611194, 0.04252616748309678, 0.15999999017530053, 1.4000000028934534, 0.4000000006724428], res_norm=1.513e+00
2026-01-20 16:18:07,772 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:07,773 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:07,788 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:07,996 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,057 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,075 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,117 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,137 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,178 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,196 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,238 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,256 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,297 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,316 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,357 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,375 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,415 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,436 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,483 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,505 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,547 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:08,565 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:08,606 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:09,139 - INFO - integration_test - Step 2: MPC solve successful
2026-01-20 16:18:09,170 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-20 16:18:09,170 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:09,170 - INFO - integration_test - === Applying control at step 2 ===
2026-01-20 16:18:09,170 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999942856423, 'w': 0.7999997761300337}
2026-01-20 16:18:09,170 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:09,171 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:09,172 - INFO - integration_test - Step 2 completed in 1.727s
2026-01-20 16:18:09,229 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-20 16:18:09,230 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999997 1.6        0.42      ]
2026-01-20 16:18:09,231 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.316m, drift=0.092m)
2026-01-20 16:18:09,231 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-20 16:18:09,231 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:09,416 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-20 16:18:09,416 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-20 16:18:09,617 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:09,642 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:09,642 - INFO - integration_test - Warmstart k=0: x0=0.38583643619153607 , y0=0.05014471140494661 , psi0=0.2399999677883039 , v0=1.6000000023220176 , spline0=0.4200000006152992 , a0=0.0 , w0=0.0
2026-01-20 16:18:09,642 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:09,643 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505136184959, 0.0881771266823321, 0.2399999677883039, 1.6000000023220176, 0.5800000008475009], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505136184959, 0.0881771266823321, 0.2399999677883039, 1.6000000023220176, 0.5800000008475009], res_norm=1.804e+00
2026-01-20 16:18:09,644 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:09,645 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:09,661 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:09,872 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:09,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:09,932 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:09,952 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:09,993 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,012 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,054 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,073 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,113 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,132 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,173 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,191 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,232 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,251 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,291 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,310 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,351 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,371 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,410 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:10,429 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:10,470 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,008 - INFO - integration_test - Step 3: MPC solve successful
2026-01-20 16:18:11,041 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-20 16:18:11,041 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:11,041 - INFO - integration_test - === Applying control at step 3 ===
2026-01-20 16:18:11,041 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000191741916, 'w': 0.8000000019230755}
2026-01-20 16:18:11,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:11,041 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:11,043 - INFO - integration_test - Step 3 completed in 1.813s
2026-01-20 16:18:11,096 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-20 16:18:11,097 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999997 1.8        0.6       ]
2026-01-20 16:18:11,097 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.327m, drift=0.088m)
2026-01-20 16:18:11,097 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-20 16:18:11,098 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:11,256 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-20 16:18:11,256 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-20 16:18:11,401 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:11,427 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:11,427 - INFO - integration_test - Warmstart k=0: x0=0.5491354628990265 , y0=0.0972407466130995 , psi0=0.3199999679806115 , v0=1.8000000042394366 , spline0=0.6000000010392429 , a0=0.0 , w0=0.0
2026-01-20 16:18:11,427 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:11,428 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978403692893, 0.1538627221864504, 0.3199999679806115, 1.8000000042394366, 0.7800000014631866], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978403692893, 0.1538627221864504, 0.3199999679806115, 1.8000000042394366, 0.7800000014631866], res_norm=2.120e+00
2026-01-20 16:18:11,429 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:11,430 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:11,445 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:11,656 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,676 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:11,718 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:11,780 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,799 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:11,842 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,861 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:11,903 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,923 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:11,965 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:11,984 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:12,027 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:12,046 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:12,087 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:12,106 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:12,148 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:12,167 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:12,209 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:12,228 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:12,269 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:12,844 - INFO - integration_test - Step 4: MPC solve successful
2026-01-20 16:18:12,877 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-20 16:18:12,877 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:12,877 - INFO - integration_test - === Applying control at step 4 ===
2026-01-20 16:18:12,877 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000184332167, 'w': 0.7999999906594829}
2026-01-20 16:18:12,877 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:12,877 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:12,879 - INFO - integration_test - Step 4 completed in 1.782s
2026-01-20 16:18:12,932 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-20 16:18:12,932 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427975 0.39999997 2.00000001 0.8       ]
2026-01-20 16:18:12,933 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.417m, drift=0.288m)
2026-01-20 16:18:12,933 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-20 16:18:12,934 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:13,094 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-20 16:18:13,094 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-20 16:18:13,243 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:13,268 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:13,268 - INFO - integration_test - Warmstart k=0: x0=0.7268614922361102 , y0=0.16427975213157575 , psi0=0.39999996704655977 , v0=2.0000000060827583 , spline0=0.8000000016475187 , a0=0.0 , w0=0.0
2026-01-20 16:18:13,268 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:13,270 - INFO - integration_test - Dyn residual k=0: pred=[0.911073694163481, 0.24216341475975386, 0.39999996704655977, 2.0000000060827583, 1.0000000022557947], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.911073694163481, 0.24216341475975386, 0.39999996704655977, 2.0000000060827583, 1.0000000022557947], res_norm=2.459e+00
2026-01-20 16:18:13,271 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:13,271 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:13,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,498 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,517 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,559 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,579 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,620 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,641 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,682 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,701 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,742 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,761 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,803 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,823 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,865 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,884 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,926 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:13,945 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:13,986 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:14,005 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:14,047 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:14,068 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:14,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:14,767 - INFO - integration_test - Step 5: MPC solve successful
2026-01-20 16:18:14,804 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-20 16:18:14,805 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:14,805 - INFO - integration_test - === Applying control at step 5 ===
2026-01-20 16:18:14,805 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197136063, 'w': 0.8000000050736775}
2026-01-20 16:18:14,805 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:14,805 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:14,806 - INFO - integration_test - Step 5 completed in 1.874s
2026-01-20 16:18:14,862 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-20 16:18:14,864 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382379 0.47999997 2.20000001 1.02      ]
2026-01-20 16:18:14,864 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.511m, drift=0.004m)
2026-01-20 16:18:14,864 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-20 16:18:14,865 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:15,019 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-20 16:18:15,020 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-20 16:18:15,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:15,191 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:15,191 - INFO - integration_test - Warmstart k=0: x0=0.9167519089547622 , y0=0.2538237858475646 , psi0=0.47999996755392754 , v0=2.200000008054119 , spline0=1.0200000024529305 , a0=0.0 , w0=0.0
2026-01-20 16:18:15,191 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:15,192 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907959768434, 0.3554151985071229, 0.47999996755392754, 2.200000008054119, 1.2400000032583425], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907959768434, 0.3554151985071229, 0.47999996755392754, 2.200000008054119, 1.2400000032583425], res_norm=2.823e+00
2026-01-20 16:18:15,193 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:15,193 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:15,208 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,417 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,439 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,479 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,498 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,540 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,559 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,599 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,618 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,659 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,678 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,719 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,739 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,780 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,798 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,840 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,858 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,899 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,918 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:15,959 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:15,978 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:16,019 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:16,661 - INFO - integration_test - Step 6: MPC solve successful
2026-01-20 16:18:16,696 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-20 16:18:16,696 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:16,696 - INFO - integration_test - === Applying control at step 6 ===
2026-01-20 16:18:16,696 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019002488, 'w': 0.7999999867599975}
2026-01-20 16:18:16,696 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:16,696 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:16,697 - INFO - integration_test - Step 6 completed in 1.834s
2026-01-20 16:18:16,754 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-20 16:18:16,755 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819142 0.55999997 2.40000001 1.26      ]
2026-01-20 16:18:16,755 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.532m, drift=0.236m)
2026-01-20 16:18:16,756 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-20 16:18:16,756 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:16,920 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-20 16:18:16,921 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-20 16:18:17,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:17,093 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:17,093 - INFO - integration_test - Warmstart k=0: x0=1.1162308726843624 , y0=0.36819141851340775 , psi0=0.5599999662299273 , v0=2.4000000099543675 , spline0=1.2600000034483674 , a0=0.0 , w0=0.0
2026-01-20 16:18:17,093 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:17,094 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721044761382, 0.4956760996763339, 0.5599999662299273, 2.4000000099543675, 1.5000000044438042], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721044761382, 0.4956760996763339, 0.5599999662299273, 2.4000000099543675, 1.5000000044438042], res_norm=3.211e+00
2026-01-20 16:18:17,095 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:17,095 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:17,110 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,369 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,396 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,446 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,466 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,509 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,528 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,570 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,589 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,631 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,650 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,691 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,710 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,751 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,771 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,812 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,832 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,882 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,902 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:17,944 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:17,963 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:18,004 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:18,627 - INFO - integration_test - Step 7: MPC solve successful
2026-01-20 16:18:18,664 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-20 16:18:18,664 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:18,664 - INFO - integration_test - === Applying control at step 7 ===
2026-01-20 16:18:18,664 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017327111, 'w': 0.799999949697839}
2026-01-20 16:18:18,664 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:18,664 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:18,665 - INFO - integration_test - Step 7 completed in 1.911s
2026-01-20 16:18:18,724 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-20 16:18:18,724 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.3224345  0.50942441 0.63999996 2.60000001 1.52      ]
2026-01-20 16:18:18,725 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.623m, drift=0.016m)
2026-01-20 16:18:18,725 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-20 16:18:18,726 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:18,956 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-20 16:18:18,956 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-20 16:18:19,099 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:19,125 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:19,125 - INFO - integration_test - Warmstart k=0: x0=1.3224345018133263 , y0=0.5094244075825763 , psi0=0.6399999611997113 , v0=2.6000000116870785 , spline0=1.5200000046170752 , a0=0.0 , w0=0.0
2026-01-20 16:18:19,125 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:19,126 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794058252104, 0.6646952149431429, 0.6399999611997113, 2.6000000116870785, 1.780000005785783], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5309794058252104, 0.6646952149431429, 0.6399999611997113, 2.6000000116870785, 1.780000005785783], res_norm=3.623e+00
2026-01-20 16:18:19,127 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:19,129 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:19,144 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,356 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,377 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,418 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,440 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,480 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,499 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,541 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,560 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,601 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,620 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,662 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,680 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,721 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,740 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,780 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,799 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,843 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,905 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:19,924 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:19,965 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:20,692 - INFO - integration_test - Step 8: MPC solve successful
2026-01-20 16:18:20,729 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-20 16:18:20,730 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:20,730 - INFO - integration_test - === Applying control at step 8 ===
2026-01-20 16:18:20,730 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019775666, 'w': 0.8000000022903726}
2026-01-20 16:18:20,730 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:20,730 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:20,731 - INFO - integration_test - Step 8 completed in 2.007s
2026-01-20 16:18:20,788 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-20 16:18:20,793 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223935 0.6792569  0.71999996 2.80000001 1.80000001]
2026-01-20 16:18:20,793 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.264m)
2026-01-20 16:18:20,794 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-20 16:18:20,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:20,962 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-20 16:18:20,963 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-20 16:18:21,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:21,133 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:21,133 - INFO - integration_test - Warmstart k=0: x0=1.532239348944144 , y0=0.6792568984050436 , psi0=0.7199999614287486 , v0=2.8000000136646452 , spline0=1.8000000059835397 , a0=0.0 , w0=0.0
2026-01-20 16:18:21,133 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:21,134 - INFO - integration_test - Dyn residual k=0: pred=[1.742744961252232, 0.863884599338617, 0.7199999614287486, 2.8000000136646452, 2.0800000073500042], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.742744961252232, 0.863884599338617, 0.7199999614287486, 2.8000000136646452, 2.0800000073500042], res_norm=4.058e+00
2026-01-20 16:18:21,135 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:21,136 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:21,151 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,363 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,383 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,425 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,447 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,499 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,519 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,563 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,583 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,626 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,690 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,711 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,757 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,776 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,819 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,839 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,880 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,899 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:21,940 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:21,959 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:22,000 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:22,655 - INFO - integration_test - Step 9: MPC solve successful
2026-01-20 16:18:22,693 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-20 16:18:22,693 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:22,693 - INFO - integration_test - === Applying control at step 9 ===
2026-01-20 16:18:22,693 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001996639, 'w': 0.800000008516126}
2026-01-20 16:18:22,693 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:22,693 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:22,695 - INFO - integration_test - Step 9 completed in 1.902s
2026-01-20 16:18:22,748 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-20 16:18:22,751 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229392 0.87908746 0.79999996 3.00000002 2.10000001]
2026-01-20 16:18:22,751 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.634m, drift=0.052m)
2026-01-20 16:18:22,751 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-20 16:18:22,753 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:22,909 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-20 16:18:22,909 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-20 16:18:23,055 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:23,079 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:23,080 - INFO - integration_test - Warmstart k=0: x0=1.7422939225300658 , y0=0.8790874600281889 , psi0=0.7999999622803612 , v0=3.0000000156612843 , spline0=2.100000007549668 , a0=0.0 , w0=0.0
2026-01-20 16:18:23,080 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:23,080 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059445428713, 1.0942942805376596, 0.7999999622803612, 3.0000000156612843, 2.4000000091157965], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.9513059445428713, 1.0942942805376596, 0.7999999622803612, 3.0000000156612843, 2.4000000091157965], res_norm=4.517e+00
2026-01-20 16:18:23,081 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:23,082 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:23,097 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,378 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,400 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,446 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,467 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,507 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,526 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,567 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,633 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,654 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,699 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,720 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,762 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,781 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,823 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,842 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,882 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,901 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:23,943 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:23,961 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:24,004 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:24,633 - INFO - integration_test - Step 10: MPC solve successful
2026-01-20 16:18:24,673 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-20 16:18:24,673 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:24,674 - INFO - integration_test - === Applying control at step 10 ===
2026-01-20 16:18:24,674 - INFO - integration_test -   Control dict from planner: {'a': 1.4338386648305333e-07, 'w': 0.8000000098378199}
2026-01-20 16:18:24,674 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:24,674 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:24,675 - INFO - integration_test - Step 10 completed in 1.924s
2026-01-20 16:18:24,732 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-20 16:18:24,732 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247939 1.10242083 0.87999996 3.00000003 2.40000001]
2026-01-20 16:18:24,733 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.594m, drift=0.352m)
2026-01-20 16:18:24,733 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-20 16:18:24,733 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:24,892 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-20 16:18:24,892 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-20 16:18:25,041 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:25,066 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:25,066 - INFO - integration_test - Warmstart k=0: x0=1.9424793902048272 , y0=1.1024208267643478 , psi0=0.8799999632641432 , v0=3.0000000299996707 , spline0=2.4000000105496353 , a0=0.0 , w0=0.0
2026-01-20 16:18:25,066 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:25,067 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247438699596, 1.3336424857243416, 0.8799999632641432, 3.0000000299996707, 2.7000000135496025], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.1336247438699596, 1.3336424857243416, 0.8799999632641432, 3.0000000299996707, 2.7000000135496025], res_norm=4.837e+00
2026-01-20 16:18:25,068 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:25,068 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:25,084 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,297 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,317 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,360 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,380 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,423 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,443 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,484 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,504 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,546 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,565 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,606 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,625 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,667 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,686 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,728 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,747 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,788 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,807 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,849 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:25,867 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:25,909 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:27,168 - INFO - integration_test - Step 11: MPC solve successful
2026-01-20 16:18:27,215 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-20 16:18:27,215 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:27,215 - INFO - integration_test - === Applying control at step 11 ===
2026-01-20 16:18:27,215 - INFO - integration_test -   Control dict from planner: {'a': -1.3297035424556424e-07, 'w': 0.2469151864141327}
2026-01-20 16:18:27,215 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:27,215 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:27,217 - INFO - integration_test - Step 11 completed in 2.485s
2026-01-20 16:18:27,279 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-20 16:18:27,280 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13075086 1.33597871 0.90469148 3.00000002 2.70000001]
2026-01-20 16:18:27,280 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.555m, drift=0.139m)
2026-01-20 16:18:27,280 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-20 16:18:27,281 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:27,438 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.131, 1.336), path_start=(0.000, 0.000), dist=2.515m
2026-01-20 16:18:27,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-20 16:18:27,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:27,611 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:27,611 - INFO - integration_test - Warmstart k=0: x0=2.130750859515176 , y0=1.335978705731593 , psi0=0.9046914819055565 , v0=3.0000000167026353 , spline0=2.700000012219899 , a0=0.0 , w0=0.0
2026-01-20 16:18:27,611 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:27,612 - INFO - integration_test - Dyn residual k=0: pred=[2.3161293136241996, 1.5718490721499006, 0.9046914819055565, 3.0000000167026353, 3.000000013890163], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3161293136241996, 1.5718490721499006, 0.9046914819055565, 3.0000000167026353, 3.000000013890163], res_norm=5.163e+00
2026-01-20 16:18:27,613 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:27,614 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:27,629 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:27,838 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:27,857 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:27,898 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:27,918 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:27,960 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:27,979 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,019 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,040 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,082 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,101 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,142 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,161 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,201 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,221 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,262 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,280 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,321 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,341 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,381 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:28,400 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:28,441 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:29,296 - INFO - integration_test - Step 12: MPC solve successful
2026-01-20 16:18:29,342 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-20 16:18:29,343 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:29,343 - INFO - integration_test - === Applying control at step 12 ===
2026-01-20 16:18:29,343 - INFO - integration_test -   Control dict from planner: {'a': 1.3290351564514026e-07, 'w': -0.2449482200010458}
2026-01-20 16:18:29,343 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:29,343 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:29,344 - INFO - integration_test - Step 12 completed in 2.065s
2026-01-20 16:18:29,405 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-20 16:18:29,405 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.31899943 1.56955519 0.88019666 3.00000003 3.00000002]
2026-01-20 16:18:29,406 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.544m, drift=0.439m)
2026-01-20 16:18:29,406 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-20 16:18:29,406 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:29,564 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.319, 1.570), path_start=(0.000, 0.000), dist=2.800m
2026-01-20 16:18:29,564 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-20 16:18:29,722 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:29,748 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:29,748 - INFO - integration_test - Warmstart k=0: x0=2.3189994337756725 , y0=1.5695551939103045 , psi0=0.8801966599054519 , v0=3.0000000299929868 , spline0=3.000000015219198 , a0=0.0 , w0=0.0
2026-01-20 16:18:29,748 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:29,749 - INFO - integration_test - Dyn residual k=0: pred=[2.5100993032192913, 1.8008144460456754, 0.8801966599054519, 3.0000000299929868, 3.3000000182184968], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5100993032192913, 1.8008144460456754, 0.8801966599054519, 3.0000000299929868, 3.3000000182184968], res_norm=5.496e+00
2026-01-20 16:18:29,750 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:29,751 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:29,766 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:29,983 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,006 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,051 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,071 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,112 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,133 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,175 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,194 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,236 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,256 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,297 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,316 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,359 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,378 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,419 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,439 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,480 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,499 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,541 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:30,560 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:30,603 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:31,320 - INFO - integration_test - Step 13: MPC solve successful
2026-01-20 16:18:31,362 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-20 16:18:31,362 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:31,362 - INFO - integration_test - === Applying control at step 13 ===
2026-01-20 16:18:31,362 - INFO - integration_test -   Control dict from planner: {'a': -1.0810318283859859e-07, 'w': -0.13333965726605032}
2026-01-20 16:18:31,363 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:31,363 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:31,364 - INFO - integration_test - Step 13 completed in 1.959s
2026-01-20 16:18:31,424 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-20 16:18:31,424 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.51163542 1.79953355 0.86686269 3.00000002 3.30000002]
2026-01-20 16:18:31,425 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.473m, drift=0.227m)
2026-01-20 16:18:31,425 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-20 16:18:31,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:31,582 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.512, 1.800), path_start=(0.000, 0.000), dist=3.090m
2026-01-20 16:18:31,582 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-20 16:18:31,731 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:31,755 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:31,755 - INFO - integration_test - Warmstart k=0: x0=2.511635418795702 , y0=1.7995335522414182 , psi0=0.8668626941788469 , v0=3.0000000191826683 , spline0=3.3000000171374646 , a0=0.0 , w0=0.0
2026-01-20 16:18:31,755 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:31,756 - INFO - integration_test - Dyn residual k=0: pred=[2.705801811092983, 2.028224201926136, 0.8668626941788469, 3.0000000191826683, 3.6000000190557313], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.705801811092983, 2.028224201926136, 0.8668626941788469, 3.0000000191826683, 3.6000000190557313], res_norm=5.844e+00
2026-01-20 16:18:31,757 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:31,757 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:31,772 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,003 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,033 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,093 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,119 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,168 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,189 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,231 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,250 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,291 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,310 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,350 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,370 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,410 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,429 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,470 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,529 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,549 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,589 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:32,608 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:32,649 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:33,314 - INFO - integration_test - Step 14: MPC solve successful
2026-01-20 16:18:33,359 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-20 16:18:33,360 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:33,360 - INFO - integration_test - === Applying control at step 14 ===
2026-01-20 16:18:33,360 - INFO - integration_test -   Control dict from planner: {'a': 1.0812890595631744e-07, 'w': -0.14744052203022134}
2026-01-20 16:18:33,360 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:33,360 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:33,361 - INFO - integration_test - Step 14 completed in 1.937s
2026-01-20 16:18:33,421 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-20 16:18:33,422 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.70748066 2.02678454 0.85211864 3.00000003 3.60000002]
2026-01-20 16:18:33,423 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.496m, drift=0.015m)
2026-01-20 16:18:33,423 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-20 16:18:33,424 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:33,581 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.707, 2.027), path_start=(0.000, 0.000), dist=3.382m
2026-01-20 16:18:33,581 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-20 16:18:33,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:33,753 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:33,753 - INFO - integration_test - Warmstart k=0: x0=2.707480659546803 , y0=2.0267845429150917 , psi0=0.8521186419758248 , v0=3.000000029995559 , spline0=3.6000000201370206 , a0=0.0 , w0=0.0
2026-01-20 16:18:33,753 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:33,754 - INFO - integration_test - Dyn residual k=0: pred=[2.9049976530195947, 2.252587640965589, 0.8521186419758248, 3.000000029995559, 3.9000000231365766], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.9049976530195947, 2.252587640965589, 0.8521186419758248, 3.000000029995559, 3.9000000231365766], res_norm=6.201e+00
2026-01-20 16:18:33,755 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:33,756 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:33,771 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:33,998 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,028 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,088 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,112 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,169 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,191 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,239 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,261 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,307 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,327 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,369 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,388 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,429 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,448 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,489 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,550 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,569 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,610 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:34,629 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:34,670 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:35,272 - INFO - integration_test - Step 15: MPC solve successful
2026-01-20 16:18:35,314 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-20 16:18:35,315 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:35,315 - INFO - integration_test - === Applying control at step 15 ===
2026-01-20 16:18:35,315 - INFO - integration_test -   Control dict from planner: {'a': -2.3339859757611264e-07, 'w': -0.13914030582956213}
2026-01-20 16:18:35,315 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:35,315 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:35,316 - INFO - integration_test - Step 15 completed in 1.894s
2026-01-20 16:18:35,376 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-20 16:18:35,377 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.90656217 2.25120625 0.83820461 3.00000001 3.90000002]
2026-01-20 16:18:35,377 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.420m, drift=0.315m)
2026-01-20 16:18:35,377 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-20 16:18:35,378 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:35,534 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.907, 2.251), path_start=(0.000, 0.000), dist=3.676m
2026-01-20 16:18:35,534 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-20 16:18:35,775 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:35,799 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:35,799 - INFO - integration_test - Warmstart k=0: x0=2.9065621693463353 , y0=2.2512062476704884 , psi0=0.8382046113928685 , v0=3.000000006655699 , spline0=3.9000000208025907 , a0=0.0 , w0=0.0
2026-01-20 16:18:35,799 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:35,800 - INFO - integration_test - Dyn residual k=0: pred=[3.107201771733687, 2.47423931775918, 0.8382046113928685, 3.000000006655699, 4.200000021468161], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.107201771733687, 2.47423931775918, 0.8382046113928685, 3.000000006655699, 4.200000021468161], res_norm=6.567e+00
2026-01-20 16:18:35,801 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:35,802 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:35,818 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,100 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,120 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,164 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,184 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,226 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,246 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,286 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,305 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,347 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,366 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,407 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,426 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,467 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,486 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,527 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,546 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,587 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,606 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,648 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:36,666 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:36,708 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:37,337 - INFO - integration_test - Step 16: MPC solve successful
2026-01-20 16:18:37,381 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-20 16:18:37,381 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:37,381 - INFO - integration_test - === Applying control at step 16 ===
2026-01-20 16:18:37,382 - INFO - integration_test -   Control dict from planner: {'a': 2.3342144933207524e-07, 'w': -0.12052260371589497}
2026-01-20 16:18:37,382 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:37,382 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:37,383 - INFO - integration_test - Step 16 completed in 2.006s
2026-01-20 16:18:37,442 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-20 16:18:37,443 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.10854093 2.47302485 0.82615235 3.00000003 4.20000002]
2026-01-20 16:18:37,443 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.412m, drift=0.103m)
2026-01-20 16:18:37,444 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-20 16:18:37,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:37,600 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.109, 2.473), path_start=(0.000, 0.000), dist=3.972m
2026-01-20 16:18:37,600 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-20 16:18:37,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:37,803 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:37,803 - INFO - integration_test - Warmstart k=0: x0=3.1085409252212313 , y0=2.4730248534141572 , psi0=0.826152351021279 , v0=3.000000029997844 , spline0=4.200000023802375 , a0=0.0 , w0=0.0
2026-01-20 16:18:37,804 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:37,805 - INFO - integration_test - Dyn residual k=0: pred=[3.3118539447717885, 2.69362362467344, 0.826152351021279, 3.000000029997844, 4.50000002680216], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3118539447717885, 2.69362362467344, 0.826152351021279, 3.000000029997844, 4.50000002680216], res_norm=6.939e+00
2026-01-20 16:18:37,807 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:37,808 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:37,829 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,091 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,111 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,154 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,173 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,215 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,234 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,276 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,295 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,337 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,356 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,397 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,417 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,459 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,478 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,521 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,581 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,611 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,666 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:38,688 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:38,731 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:39,398 - INFO - integration_test - Step 17: MPC solve successful
2026-01-20 16:18:39,448 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-20 16:18:39,448 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:39,448 - INFO - integration_test - === Applying control at step 17 ===
2026-01-20 16:18:39,448 - INFO - integration_test -   Control dict from planner: {'a': -3.3497363670122586e-11, 'w': -0.1262774414599875}
2026-01-20 16:18:39,448 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:39,448 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:39,450 - INFO - integration_test - Step 17 completed in 2.007s
2026-01-20 16:18:39,510 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-20 16:18:39,511 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.31324136 2.69233409 0.81352461 3.00000003 4.50000003]
2026-01-20 16:18:39,512 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.399m, drift=0.403m)
2026-01-20 16:18:39,512 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-20 16:18:39,513 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:39,694 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.313, 2.692), path_start=(0.000, 0.000), dist=4.269m
2026-01-20 16:18:39,694 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-20 16:18:39,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:39,940 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:39,940 - INFO - integration_test - Warmstart k=0: x0=3.313241355349726 , y0=2.692334086606663 , psi0=0.8135246068752803 , v0=3.0000000299944944 , spline0=4.500000026801825 , a0=0.0 , w0=0.0
2026-01-20 16:18:39,940 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:39,941 - INFO - integration_test - Dyn residual k=0: pred=[3.5193237557856407, 2.910347953207485, 0.8135246068752803, 3.0000000299944944, 4.800000029801274], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.5193237557856407, 2.910347953207485, 0.8135246068752803, 3.0000000299944944, 4.800000029801274], res_norm=7.318e+00
2026-01-20 16:18:39,942 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:39,943 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:39,960 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,184 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,205 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,250 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,271 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,312 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,331 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,373 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,392 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,434 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,453 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,496 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,514 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,556 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,575 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,616 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,636 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,686 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,706 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,747 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:40,766 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:40,806 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:41,376 - INFO - integration_test - Step 18: MPC solve successful
2026-01-20 16:18:41,427 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-20 16:18:41,428 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:41,428 - INFO - integration_test - === Applying control at step 18 ===
2026-01-20 16:18:41,428 - INFO - integration_test -   Control dict from planner: {'a': -1.4919310479326287e-06, 'w': -0.0841128738422191}
2026-01-20 16:18:41,428 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:41,428 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:41,429 - INFO - integration_test - Step 18 completed in 1.918s
2026-01-20 16:18:41,484 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-20 16:18:41,485 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.5202382  2.90947867 0.80511332 2.99999988 4.80000001]
2026-01-20 16:18:41,486 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.348m, drift=0.191m)
2026-01-20 16:18:41,486 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-20 16:18:41,487 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:41,688 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.520, 2.909), path_start=(0.000, 0.000), dist=4.567m
2026-01-20 16:18:41,689 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-20 16:18:41,856 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:41,881 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:41,881 - INFO - integration_test - Warmstart k=0: x0=3.5202382038304423 , y0=2.909478673049296 , psi0=0.8051133194910584 , v0=2.9999998808013895 , spline0=4.800000014881964 , a0=0.0 , w0=0.0
2026-01-20 16:18:41,881 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:41,882 - INFO - integration_test - Dyn residual k=0: pred=[3.7281470594926827, 3.125751418871096, 0.8051133194910584, 2.9999998808013895, 5.100000002962103], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.7281470594926827, 3.125751418871096, 0.8051133194910584, 2.9999998808013895, 5.100000002962103], res_norm=7.702e+00
2026-01-20 16:18:41,883 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:41,884 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:41,898 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,109 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,129 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,170 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,189 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,230 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,249 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,290 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,309 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,351 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,370 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,411 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,431 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,471 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,490 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,531 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,550 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,592 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,612 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,655 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:42,674 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:42,714 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:43,423 - INFO - integration_test - Step 19: MPC solve successful
2026-01-20 16:18:43,471 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-20 16:18:43,472 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:43,472 - INFO - integration_test - === Applying control at step 19 ===
2026-01-20 16:18:43,472 - INFO - integration_test -   Control dict from planner: {'a': 1.4919847858006598e-06, 'w': -0.1242994006735611}
2026-01-20 16:18:43,472 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:43,472 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:43,473 - INFO - integration_test - Step 19 completed in 1.989s
2026-01-20 16:18:43,531 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-20 16:18:43,532 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.72948582 3.12445372 0.79268338 3.00000003 5.10000002]
2026-01-20 16:18:43,533 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.411m, drift=0.491m)
2026-01-20 16:18:43,533 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-20 16:18:43,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:43,692 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.729, 3.124), path_start=(0.000, 0.000), dist=4.865m
2026-01-20 16:18:43,692 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-20 16:18:43,838 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:43,862 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:43,862 - INFO - integration_test - Warmstart k=0: x0=3.7294858223073253 , y0=3.1244537244336583 , psi0=0.7926833794237023 , v0=3.000000029999868 , spline0=5.100000017881951 , a0=0.0 , w0=0.0
2026-01-20 16:18:43,863 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:43,863 - INFO - integration_test - Dyn residual k=0: pred=[3.9400668153807037, 3.3381255455898926, 0.7926833794237023, 3.000000029999868, 5.400000020881937], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9400668153807037, 3.3381255455898926, 0.7926833794237023, 3.000000029999868, 5.400000020881937], res_norm=8.090e+00
2026-01-20 16:18:43,864 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:43,865 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:43,880 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,116 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,144 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,199 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,225 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,273 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,294 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,337 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,356 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,398 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,417 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,459 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,478 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,520 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,540 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,580 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,599 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,641 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,660 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,700 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:44,720 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:44,762 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:45,305 - INFO - integration_test - Step 20: MPC solve successful
2026-01-20 16:18:45,355 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-20 16:18:45,356 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:45,356 - INFO - integration_test - === Applying control at step 20 ===
2026-01-20 16:18:45,356 - INFO - integration_test -   Control dict from planner: {'a': -2.0292981875235728e-07, 'w': -0.034968581898228615}
2026-01-20 16:18:45,356 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:45,356 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:45,357 - INFO - integration_test - Step 20 completed in 1.825s
2026-01-20 16:18:45,413 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-20 16:18:45,416 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.94043998 3.33775692 0.78918652 3.00000001 5.40000002]
2026-01-20 16:18:45,416 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.311m, drift=0.279m)
2026-01-20 16:18:45,416 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-20 16:18:45,417 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:45,574 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.940, 3.338), path_start=(0.000, 0.000), dist=5.164m
2026-01-20 16:18:45,574 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-20 16:18:45,731 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:45,756 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:45,756 - INFO - integration_test - Warmstart k=0: x0=3.940439975150591 , y0=3.3377569238454328 , psi0=0.7891865212338794 , v0=3.000000009706886 , spline0=5.400000018852639 , a0=0.0 , w0=0.0
2026-01-20 16:18:45,756 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:45,757 - INFO - integration_test - Dyn residual k=0: pred=[4.151766857836785, 3.5506910668017673, 0.7891865212338794, 3.000000009706886, 5.700000019823327], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.151766857836785, 3.5506910668017673, 0.7891865212338794, 3.000000009706886, 5.700000019823327], res_norm=8.483e+00
2026-01-20 16:18:45,757 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:45,758 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:45,773 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:45,982 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,001 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,043 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,062 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,103 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,122 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,163 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,182 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,223 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,242 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,285 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,304 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,345 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,364 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,404 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,423 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,464 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,484 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,525 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:46,544 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:46,584 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:47,227 - INFO - integration_test - Step 21: MPC solve successful
2026-01-20 16:18:47,319 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-20 16:18:47,319 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:47,320 - INFO - integration_test - === Applying control at step 21 ===
2026-01-20 16:18:47,320 - INFO - integration_test -   Control dict from planner: {'a': 1.189292244196745e-07, 'w': -0.16787380770433172}
2026-01-20 16:18:47,320 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:47,320 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:47,322 - INFO - integration_test - Step 21 completed in 1.906s
2026-01-20 16:18:47,395 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-20 16:18:47,396 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.15354419 3.5489073  0.77239914 3.00000002 5.70000002]
2026-01-20 16:18:47,397 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.340m, drift=0.067m)
2026-01-20 16:18:47,397 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-20 16:18:47,397 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:47,557 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.154, 3.549), path_start=(0.000, 0.000), dist=5.463m
2026-01-20 16:18:47,557 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-20 16:18:47,704 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:47,729 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:47,729 - INFO - integration_test - Warmstart k=0: x0=4.153544193812479 , y0=3.5489072952193785 , psi0=0.7723991404634463 , v0=3.0000000215998086 , spline0=5.70000002101262 , a0=0.0 , w0=0.0
2026-01-20 16:18:47,729 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:47,730 - INFO - integration_test - Dyn residual k=0: pred=[4.3684157390274585, 3.7582639773504143, 0.7723991404634463, 3.0000000215998086, 6.000000023172602], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.3684157390274585, 3.7582639773504143, 0.7723991404634463, 3.0000000215998086, 6.000000023172602], res_norm=8.877e+00
2026-01-20 16:18:47,731 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:47,731 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:47,748 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:47,959 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:47,979 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,022 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,042 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,085 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,104 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,146 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,165 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,208 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,227 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,269 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,287 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,330 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,350 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,392 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,410 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,452 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,471 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,512 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:48,531 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:48,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:49,236 - INFO - integration_test - Step 22: MPC solve successful
2026-01-20 16:18:49,324 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-20 16:18:49,324 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:49,324 - INFO - integration_test - === Applying control at step 22 ===
2026-01-20 16:18:49,324 - INFO - integration_test -   Control dict from planner: {'a': 8.373854679222149e-08, 'w': -0.06041991226016767}
2026-01-20 16:18:49,324 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:49,325 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:49,326 - INFO - integration_test - Step 22 completed in 1.930s
2026-01-20 16:18:49,406 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-20 16:18:49,406 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.3690469  3.75761358 0.76635715 3.00000003 6.00000002]
2026-01-20 16:18:49,407 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.308m, drift=0.367m)
2026-01-20 16:18:49,407 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-20 16:18:49,408 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:49,565 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.369, 3.758), path_start=(0.000, 0.000), dist=5.763m
2026-01-20 16:18:49,565 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-20 16:18:49,715 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:49,740 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:49,740 - INFO - integration_test - Warmstart k=0: x0=4.369046895687372 , y0=3.7576135798391808 , psi0=0.7663571492374295 , v0=3.000000029973663 , spline0=6.000000024009987 , a0=0.0 , w0=0.0
2026-01-20 16:18:49,740 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:49,741 - INFO - integration_test - Dyn residual k=0: pred=[4.585179443044368, 3.9656681971188648, 0.7663571492374295, 3.000000029973663, 6.3000000270073535], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.585179443044368, 3.9656681971188648, 0.7663571492374295, 3.000000029973663, 6.3000000270073535], res_norm=9.275e+00
2026-01-20 16:18:49,742 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:49,742 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:49,758 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:49,967 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:49,988 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,031 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,052 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,096 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,115 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,157 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,176 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,217 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,238 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,279 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,298 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,340 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,359 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,400 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,421 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,462 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,481 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,522 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:50,541 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:50,582 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:51,562 - INFO - integration_test - Step 23: MPC solve successful
2026-01-20 16:18:51,617 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-20 16:18:51,617 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:51,617 - INFO - integration_test - === Applying control at step 23 ===
2026-01-20 16:18:51,617 - INFO - integration_test -   Control dict from planner: {'a': -1.8842859990223731e-07, 'w': -0.06694091730953844}
2026-01-20 16:18:51,617 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:51,617 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:51,619 - INFO - integration_test - Step 23 completed in 2.213s
2026-01-20 16:18:51,678 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-20 16:18:51,679 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.58587419 3.96494324 0.75966306 3.00000001 6.30000003]
2026-01-20 16:18:51,679 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.281m, drift=0.155m)
2026-01-20 16:18:51,679 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-20 16:18:51,680 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:51,838 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.586, 3.965), path_start=(0.000, 0.000), dist=6.062m
2026-01-20 16:18:51,838 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-20 16:18:52,092 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:52,126 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:52,126 - INFO - integration_test - Warmstart k=0: x0=4.585874193931591 , y0=3.9649432397732784 , psi0=0.7596630575064757 , v0=3.000000011130803 , spline0=6.300000025123067 , a0=0.0 , w0=0.0
2026-01-20 16:18:52,126 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:52,128 - INFO - integration_test - Dyn residual k=0: pred=[4.803394623688851, 4.171546393926514, 0.7596630575064757, 3.000000011130803, 6.600000026236147], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.803394623688851, 4.171546393926514, 0.7596630575064757, 3.000000011130803, 6.600000026236147], res_norm=9.675e+00
2026-01-20 16:18:52,130 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:52,132 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:52,159 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,437 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,458 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,499 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,519 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,562 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,581 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,623 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,642 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,683 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,702 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,744 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,763 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,804 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,823 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,864 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,883 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,925 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:52,944 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:52,986 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:53,006 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:53,047 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:53,827 - INFO - integration_test - Step 24: MPC solve successful
2026-01-20 16:18:53,880 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-20 16:18:53,881 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:53,881 - INFO - integration_test - === Applying control at step 24 ===
2026-01-20 16:18:53,881 - INFO - integration_test -   Control dict from planner: {'a': 1.4365268323949434e-07, 'w': -0.08521013953597444}
2026-01-20 16:18:53,881 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:53,881 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:53,882 - INFO - integration_test - Step 24 completed in 2.204s
2026-01-20 16:18:53,943 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-20 16:18:53,944 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.80427222 4.17061715 0.75114204 3.00000003 6.60000003]
2026-01-20 16:18:53,944 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.337m, drift=0.455m)
2026-01-20 16:18:53,944 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-20 16:18:53,945 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:54,102 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.804, 4.171), path_start=(0.000, 0.000), dist=6.362m
2026-01-20 16:18:54,102 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-20 16:18:54,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:54,277 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:54,277 - INFO - integration_test - Warmstart k=0: x0=4.804272220800545 , y0=4.170617152563898 , psi0=0.7511420435528783 , v0=3.0000000254960715 , spline0=6.6000000276726745 , a0=0.0 , w0=0.0
2026-01-20 16:18:54,277 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:54,278 - INFO - integration_test - Dyn residual k=0: pred=[5.023545201884363, 4.3753593350676026, 0.7511420435528783, 3.0000000254960715, 6.900000030222282], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.023545201884363, 4.3753593350676026, 0.7511420435528783, 3.0000000254960715, 6.900000030222282], res_norm=1.008e+01
2026-01-20 16:18:54,279 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:54,280 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:54,305 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,568 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,588 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,630 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,649 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,691 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,710 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,751 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,770 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,811 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,830 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,872 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,890 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,931 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:54,950 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:54,991 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:55,010 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:55,051 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:55,071 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:55,111 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:55,130 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:55,174 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:55,911 - INFO - integration_test - Step 25: MPC solve successful
2026-01-20 16:18:55,967 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-20 16:18:55,967 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:55,967 - INFO - integration_test - === Applying control at step 25 ===
2026-01-20 16:18:55,968 - INFO - integration_test -   Control dict from planner: {'a': 4.49637687108906e-08, 'w': -0.06780693825788699}
2026-01-20 16:18:55,968 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:55,968 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:55,970 - INFO - integration_test - Step 25 completed in 2.026s
2026-01-20 16:18:56,029 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-20 16:18:56,031 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.02423767 4.37461436 0.74436135 3.00000003 6.90000003]
2026-01-20 16:18:56,032 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.248m, drift=0.242m)
2026-01-20 16:18:56,032 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-20 16:18:56,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:56,189 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.024, 4.375), path_start=(0.000, 0.000), dist=6.662m
2026-01-20 16:18:56,190 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-20 16:18:56,339 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:56,364 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:56,364 - INFO - integration_test - Warmstart k=0: x0=5.024237666138317 , y0=4.374614357665095 , psi0=0.7443613497270896 , v0=3.0000000299924485 , spline0=6.90000003067192 , a0=0.0 , w0=0.0
2026-01-20 16:18:56,364 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:56,365 - INFO - integration_test - Dyn residual k=0: pred=[5.244893890140924, 4.577865022137461, 0.7443613497270896, 3.0000000299924485, 7.200000033671165], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.244893890140924, 4.577865022137461, 0.7443613497270896, 3.0000000299924485, 7.200000033671165], res_norm=1.048e+01
2026-01-20 16:18:56,365 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:56,366 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:56,381 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:56,653 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:56,674 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:56,718 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:56,739 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:56,782 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:56,804 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:56,850 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:56,872 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:56,913 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:56,933 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:56,976 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:56,995 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:57,037 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:57,056 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:57,097 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:57,117 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:57,158 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:57,177 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:57,218 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:57,238 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:57,279 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:58,031 - INFO - integration_test - Step 26: MPC solve successful
2026-01-20 16:18:58,088 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-20 16:18:58,088 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:18:58,088 - INFO - integration_test - === Applying control at step 26 ===
2026-01-20 16:18:58,088 - INFO - integration_test -   Control dict from planner: {'a': -3.195204364045428e-09, 'w': -0.05864407017819572}
2026-01-20 16:18:58,088 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:18:58,088 - INFO - integration_test -   Planner output success: True
2026-01-20 16:18:58,090 - INFO - integration_test - Step 26 completed in 2.059s
2026-01-20 16:18:58,151 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-20 16:18:58,152 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.2454886  4.57721685 0.73849694 3.00000003 7.20000003]
2026-01-20 16:18:58,153 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.315m, drift=0.030m)
2026-01-20 16:18:58,153 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-20 16:18:58,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:58,307 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.245, 4.577), path_start=(0.000, 0.000), dist=6.962m
2026-01-20 16:18:58,307 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-20 16:18:58,460 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:18:58,485 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:18:58,485 - INFO - integration_test - Warmstart k=0: x0=5.245488595960316 , y0=4.5772168500207036 , psi0=0.73849694270927 , v0=3.000000029672928 , spline0=7.2000000336392125 , a0=0.0 , w0=0.0
2026-01-20 16:18:58,485 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:18:58,486 - INFO - integration_test - Dyn residual k=0: pred=[5.4673329634173555, 4.779170008965944, 0.73849694270927, 3.000000029672928, 7.500000036606505], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.4673329634173555, 4.779170008965944, 0.73849694270927, 3.000000029672928, 7.500000036606505], res_norm=1.089e+01
2026-01-20 16:18:58,487 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:58,488 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:18:58,503 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:58,715 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:58,736 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:58,780 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:58,799 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:58,842 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:58,861 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:58,904 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:58,925 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:58,969 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:58,994 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:59,058 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:59,093 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:59,144 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:59,168 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:59,216 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:59,237 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:59,280 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:59,299 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:59,341 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:18:59,360 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:18:59,402 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:00,114 - INFO - integration_test - Step 27: MPC solve successful
2026-01-20 16:19:00,174 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-20 16:19:00,174 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:00,175 - INFO - integration_test - === Applying control at step 27 ===
2026-01-20 16:19:00,175 - INFO - integration_test -   Control dict from planner: {'a': 3.2692049212950462e-09, 'w': -0.06596043963136662}
2026-01-20 16:19:00,175 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:00,175 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:00,176 - INFO - integration_test - Step 27 completed in 2.024s
2026-01-20 16:19:00,238 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-20 16:19:00,241 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.4679974  4.7784369  0.7319009  3.00000003 7.50000004]
2026-01-20 16:19:00,241 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.250m, drift=0.330m)
2026-01-20 16:19:00,241 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-20 16:19:00,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:00,398 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.468, 4.778), path_start=(0.000, 0.000), dist=7.262m
2026-01-20 16:19:00,398 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-20 16:19:00,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:00,567 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:00,567 - INFO - integration_test - Warmstart k=0: x0=5.467997398315827 , y0=4.778436899609741 , psi0=0.7319008987461334 , v0=3.000000029999849 , spline0=7.5000000366391975 , a0=0.0 , w0=0.0
2026-01-20 16:19:00,567 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:00,568 - INFO - integration_test - Dyn residual k=0: pred=[5.691169022090468, 4.978922380734388, 0.7319008987461334, 3.000000029999849, 7.800000039639182], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.691169022090468, 4.978922380734388, 0.7319008987461334, 3.000000029999849, 7.800000039639182], res_norm=1.129e+01
2026-01-20 16:19:00,569 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:00,570 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:00,585 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:00,795 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:00,815 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:00,857 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:00,877 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:00,918 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:00,939 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:00,995 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,024 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,084 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,110 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,162 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,183 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,227 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,247 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,290 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,309 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,351 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,371 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,412 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:01,431 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:01,474 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:02,444 - INFO - integration_test - Step 28: MPC solve successful
2026-01-20 16:19:02,503 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-20 16:19:02,504 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:02,504 - INFO - integration_test - === Applying control at step 28 ===
2026-01-20 16:19:02,504 - INFO - integration_test -   Control dict from planner: {'a': -2.2934120015724926e-08, 'w': -0.06690902438744521}
2026-01-20 16:19:02,504 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:02,504 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:02,505 - INFO - integration_test - Step 28 completed in 2.265s
2026-01-20 16:19:02,569 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-20 16:19:02,570 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.69183807 4.97817428 0.72521    3.00000003 7.80000004]
2026-01-20 16:19:02,570 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.251m, drift=0.118m)
2026-01-20 16:19:02,570 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-20 16:19:02,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:02,730 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.692, 4.978), path_start=(0.000, 0.000), dist=7.562m
2026-01-20 16:19:02,730 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-20 16:19:02,880 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:02,905 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:02,905 - INFO - integration_test - Warmstart k=0: x0=5.691838068739381 , y0=4.978174277771231 , psi0=0.7252099963073889 , v0=3.0000000277064367 , spline0=7.800000039409841 , a0=0.0 , w0=0.0
2026-01-20 16:19:02,905 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:02,906 - INFO - integration_test - Dyn residual k=0: pred=[5.91634611565355, 5.177162062655559, 0.7252099963073889, 3.0000000277064367, 8.100000042180485], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.91634611565355, 5.177162062655559, 0.7252099963073889, 3.0000000277064367, 8.100000042180485], res_norm=1.170e+01
2026-01-20 16:19:02,907 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:02,907 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:02,923 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,208 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,230 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,273 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,293 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,334 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,355 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,395 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,415 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,457 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,475 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,516 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,536 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,578 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,597 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,638 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,657 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,698 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,718 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,760 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:03,778 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:03,820 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:04,457 - INFO - integration_test - Step 29: MPC solve successful
2026-01-20 16:19:04,528 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-20 16:19:04,528 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:04,528 - INFO - integration_test - === Applying control at step 29 ===
2026-01-20 16:19:04,528 - INFO - integration_test -   Control dict from planner: {'a': 1.9408717022975283e-08, 'w': -0.02871979155814877}
2026-01-20 16:19:04,528 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:04,528 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:04,530 - INFO - integration_test - Step 29 completed in 1.960s
2026-01-20 16:19:04,592 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-20 16:19:04,596 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.91663155 5.1768394  0.72233802 3.00000003 8.10000004]
2026-01-20 16:19:04,597 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.285m, drift=0.418m)
2026-01-20 16:19:04,597 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-20 16:19:04,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:04,768 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.917, 5.177), path_start=(0.000, 0.000), dist=7.862m
2026-01-20 16:19:04,768 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-20 16:19:04,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:04,956 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:04,956 - INFO - integration_test - Warmstart k=0: x0=5.916631551281629 , y0=5.176839398175338 , psi0=0.7223380171515741 , v0=3.0000000296473086 , spline0=8.100000042374573 , a0=0.0 , w0=0.0
2026-01-20 16:19:04,957 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:04,957 - INFO - integration_test - Dyn residual k=0: pred=[6.141710160426018, 5.37518158099197, 0.7223380171515741, 3.0000000296473086, 8.400000045339304], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.141710160426018, 5.37518158099197, 0.7223380171515741, 3.0000000296473086, 8.400000045339304], res_norm=1.211e+01
2026-01-20 16:19:04,958 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:04,959 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:04,976 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,199 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,222 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,266 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,287 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,332 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,352 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,396 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,416 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,461 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,481 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,525 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,546 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,590 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,610 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,656 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,676 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,721 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,743 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,788 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:05,807 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:05,849 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:06,577 - INFO - integration_test - Step 30: MPC solve successful
2026-01-20 16:19:06,642 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-20 16:19:06,642 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:06,642 - INFO - integration_test - === Applying control at step 30 ===
2026-01-20 16:19:06,642 - INFO - integration_test -   Control dict from planner: {'a': 3.5153094679256993e-09, 'w': -0.06240465367882509}
2026-01-20 16:19:06,642 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:06,642 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:06,643 - INFO - integration_test - Step 30 completed in 2.047s
2026-01-20 16:19:06,725 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-20 16:19:06,726 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.14232757 5.374478   0.71609755 3.00000003 8.40000005]
2026-01-20 16:19:06,727 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.211m, drift=0.206m)
2026-01-20 16:19:06,727 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-20 16:19:06,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:06,936 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.142, 5.374), path_start=(0.000, 0.000), dist=8.162m
2026-01-20 16:19:06,936 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-20 16:19:07,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:07,109 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:07,109 - INFO - integration_test - Warmstart k=0: x0=6.1423275713072085 , y0=5.374477998299165 , psi0=0.7160975517836916 , v0=3.0000000299988394 , spline0=8.400000045374457 , a0=0.0 , w0=0.0
2026-01-20 16:19:07,109 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:07,110 - INFO - integration_test - Dyn residual k=0: pred=[6.368639537317472, 5.571411732942317, 0.7160975517836916, 3.0000000299988394, 8.70000004837434], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.368639537317472, 5.571411732942317, 0.7160975517836916, 3.0000000299988394, 8.70000004837434], res_norm=1.252e+01
2026-01-20 16:19:07,111 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:07,112 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:07,128 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,344 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,364 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,406 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,426 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,468 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,488 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,530 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,549 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,591 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,653 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,672 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,714 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,734 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,776 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,837 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,898 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:07,918 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:07,959 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:08,806 - INFO - integration_test - Step 31: MPC solve successful
2026-01-20 16:19:08,870 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-20 16:19:08,870 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:08,870 - INFO - integration_test - === Applying control at step 31 ===
2026-01-20 16:19:08,870 - INFO - integration_test -   Control dict from planner: {'a': -3.033142344618065e-07, 'w': -0.045292374012254985}
2026-01-20 16:19:08,870 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:08,870 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:08,872 - INFO - integration_test - Step 31 completed in 2.146s
2026-01-20 16:19:08,933 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-20 16:19:08,933 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.36908474 5.57089855 0.71156831 3.         8.70000005]
2026-01-20 16:19:08,934 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.312m, drift=0.006m)
2026-01-20 16:19:08,934 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-20 16:19:08,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:09,093 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.369, 5.571), path_start=(0.000, 0.000), dist=8.462m
2026-01-20 16:19:09,093 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-20 16:19:09,243 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:09,268 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:09,268 - INFO - integration_test - Warmstart k=0: x0=6.369084741466803 , y0=5.570898549200527 , psi0=0.7115683143824661 , v0=2.999999999667416 , spline0=8.700000045341199 , a0=0.0 , w0=0.0
2026-01-20 16:19:09,268 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:09,269 - INFO - integration_test - Dyn residual k=0: pred=[6.596286340489955, 5.7668052448016915, 0.7115683143824661, 2.999999999667416, 9.00000004530794], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.596286340489955, 5.7668052448016915, 0.7115683143824661, 2.999999999667416, 9.00000004530794], res_norm=1.293e+01
2026-01-20 16:19:09,270 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:09,271 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:09,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:09,632 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:09,652 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:09,694 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:09,714 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:09,765 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:09,785 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:09,829 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:09,851 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:09,898 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:09,921 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:09,969 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:09,991 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:10,035 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:10,057 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:10,101 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:10,122 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:10,166 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:10,188 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:10,232 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:10,254 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:10,300 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:11,078 - INFO - integration_test - Step 32: MPC solve successful
2026-01-20 16:19:11,148 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-20 16:19:11,148 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:11,148 - INFO - integration_test - === Applying control at step 32 ===
2026-01-20 16:19:11,148 - INFO - integration_test -   Control dict from planner: {'a': 3.029395117416196e-07, 'w': -0.04979613436314024}
2026-01-20 16:19:11,148 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:11,149 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:11,150 - INFO - integration_test - Step 32 completed in 2.217s
2026-01-20 16:19:11,213 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-20 16:19:11,216 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.59677317 5.76623875 0.7065887  3.00000003 9.00000005]
2026-01-20 16:19:11,217 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.208m, drift=0.294m)
2026-01-20 16:19:11,217 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-20 16:19:11,219 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:11,383 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.597, 5.766), path_start=(0.000, 0.000), dist=8.762m
2026-01-20 16:19:11,383 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-20 16:19:11,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:11,559 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:11,559 - INFO - integration_test - Warmstart k=0: x0=6.596773171471207 , y0=5.7662387492543274 , psi0=0.7065887009461521 , v0=3.000000029961367 , spline0=9.000000048337336 , a0=0.0 , w0=0.0
2026-01-20 16:19:11,559 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:11,560 - INFO - integration_test - Dyn residual k=0: pred=[6.824947491478394, 5.961011646462691, 0.7065887009461521, 3.000000029961367, 9.300000051333473], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.824947491478394, 5.961011646462691, 0.7065887009461521, 3.000000029961367, 9.300000051333473], res_norm=1.335e+01
2026-01-20 16:19:11,561 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:11,561 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:11,575 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:11,780 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:11,799 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:11,839 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:11,858 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:11,897 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:11,916 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:11,955 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:11,972 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,011 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,031 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,069 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,086 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,125 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,143 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,182 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,199 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,239 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,257 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,296 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,314 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:12,353 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:12,946 - INFO - integration_test - Step 33: MPC solve successful
2026-01-20 16:19:13,004 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-20 16:19:13,004 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:13,004 - INFO - integration_test - === Applying control at step 33 ===
2026-01-20 16:19:13,004 - INFO - integration_test -   Control dict from planner: {'a': 3.846250735370862e-10, 'w': -0.044898515895327895}
2026-01-20 16:19:13,004 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:13,004 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:13,006 - INFO - integration_test - Step 33 completed in 1.790s
2026-01-20 16:19:13,060 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-20 16:19:13,063 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.82538397 5.96049876 0.70209885 3.00000003 9.30000005]
2026-01-20 16:19:13,064 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.243m, drift=0.082m)
2026-01-20 16:19:13,064 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-20 16:19:13,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:13,210 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.825, 5.960), path_start=(0.000, 0.000), dist=9.062m
2026-01-20 16:19:13,210 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-20 16:19:13,348 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:13,370 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:13,370 - INFO - integration_test - Warmstart k=0: x0=6.825383974828357 , y0=5.960498758511517 , psi0=0.7020988493566194 , v0=3.0000000299998297 , spline0=9.300000051337319 , a0=0.0 , w0=0.0
2026-01-20 16:19:13,370 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:13,371 - INFO - integration_test - Dyn residual k=0: pred=[7.054430493449821, 6.154245227143534, 0.7020988493566194, 3.0000000299998297, 9.600000054337302], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.054430493449821, 6.154245227143534, 0.7020988493566194, 3.0000000299998297, 9.600000054337302], res_norm=1.376e+01
2026-01-20 16:19:13,372 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:13,373 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:13,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,585 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,604 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,643 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,662 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,701 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,721 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,760 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,777 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,816 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,834 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,873 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,892 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,931 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:13,948 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:13,988 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:14,007 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:14,047 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:14,064 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:14,103 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:14,123 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:14,162 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:14,743 - INFO - integration_test - Step 34: MPC solve successful
2026-01-20 16:19:14,804 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-20 16:19:14,804 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:14,804 - INFO - integration_test - === Applying control at step 34 ===
2026-01-20 16:19:14,804 - INFO - integration_test -   Control dict from planner: {'a': -2.8258394244498215e-11, 'w': -0.05677397270949268}
2026-01-20 16:19:14,804 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:14,804 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:14,805 - INFO - integration_test - Step 34 completed in 1.743s
2026-01-20 16:19:14,863 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-20 16:19:14,864 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.05497925 6.15359399 0.69642145 3.00000003 9.60000005]
2026-01-20 16:19:14,864 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.243m, drift=0.382m)
2026-01-20 16:19:14,864 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-20 16:19:14,865 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:15,014 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.055, 6.154), path_start=(0.000, 0.000), dist=9.362m
2026-01-20 16:19:15,014 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-20 16:19:15,152 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:15,176 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:15,176 - INFO - integration_test - Warmstart k=0: x0=7.0549792493406525 , y0=6.153593994018637 , psi0=0.6964214520856701 , v0=3.000000029997004 , spline0=9.60000005433702 , a0=0.0 , w0=0.0
2026-01-20 16:19:15,176 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:15,177 - INFO - integration_test - Dyn residual k=0: pred=[7.285122046325001, 6.3460369590655334, 0.6964214520856701, 3.000000029997004, 9.90000005733672], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.285122046325001, 6.3460369590655334, 0.6964214520856701, 3.000000029997004, 9.90000005733672], res_norm=1.417e+01
2026-01-20 16:19:15,177 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:15,178 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:15,192 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,393 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,412 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,453 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,471 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,510 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,528 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,566 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,584 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,624 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,643 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,681 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,699 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,738 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,756 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,795 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,813 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,853 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,871 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:15,931 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:15,959 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:16,015 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:16,594 - INFO - integration_test - Step 35: MPC solve successful
2026-01-20 16:19:16,658 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-20 16:19:16,658 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:16,658 - INFO - integration_test - === Applying control at step 35 ===
2026-01-20 16:19:16,658 - INFO - integration_test -   Control dict from planner: {'a': -3.988702704629133e-07, 'w': -0.009417695299829037}
2026-01-20 16:19:16,658 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:16,658 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:16,660 - INFO - integration_test - Step 35 completed in 1.796s
2026-01-20 16:19:16,712 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-20 16:19:16,713 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.28521263 6.34592856 0.69547968 2.99999999 9.90000005]
2026-01-20 16:19:16,714 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.192m, drift=0.170m)
2026-01-20 16:19:16,714 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-20 16:19:16,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:16,865 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.285, 6.346), path_start=(0.000, 0.000), dist=9.662m
2026-01-20 16:19:16,865 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-20 16:19:17,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:17,032 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:17,032 - INFO - integration_test - Warmstart k=0: x0=7.285212629227835 , y0=6.345928558611068 , psi0=0.6954796825556872 , v0=2.999999990109977 , spline0=9.900000053348018 , a0=0.0 , w0=0.0
2026-01-20 16:19:17,032 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:17,033 - INFO - integration_test - Dyn residual k=0: pred=[7.5155365579835705, 6.538154694318784, 0.6954796825556872, 2.999999990109977, 10.200000052359016], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.5155365579835705, 6.538154694318784, 0.6954796825556872, 2.999999990109977, 10.200000052359016], res_norm=1.459e+01
2026-01-20 16:19:17,034 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:17,035 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:17,049 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,250 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,273 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,314 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,377 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,396 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,435 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,454 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,492 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,510 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,548 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,566 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,604 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,622 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,661 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,680 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,718 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,738 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,777 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:17,794 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:17,833 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:18,440 - INFO - integration_test - Step 36: MPC solve successful
2026-01-20 16:19:18,500 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-20 16:19:18,500 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:18,500 - INFO - integration_test - === Applying control at step 36 ===
2026-01-20 16:19:18,500 - INFO - integration_test -   Control dict from planner: {'a': 3.9889841291210256e-07, 'w': -0.05125782066132821}
2026-01-20 16:19:18,501 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:18,501 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:18,502 - INFO - integration_test - Step 36 completed in 1.789s
2026-01-20 16:19:18,557 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-20 16:19:18,561 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.5160282   6.53756356  0.6903539   3.00000003 10.20000006]
2026-01-20 16:19:18,561 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.301m, drift=0.470m)
2026-01-20 16:19:18,561 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-20 16:19:18,562 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:18,709 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.516, 6.538), path_start=(0.000, 0.000), dist=9.961m
2026-01-20 16:19:18,709 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-20 16:19:18,851 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:18,873 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:18,874 - INFO - integration_test - Warmstart k=0: x0=7.516028204506713 , y0=6.537563560006625 , psi0=0.6903539004895544 , v0=3.000000029999818 , spline0=10.200000056348 , a0=0.0 , w0=0.0
2026-01-20 16:19:18,874 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:18,874 - INFO - integration_test - Dyn residual k=0: pred=[7.747334415584912, 6.728606587926089, 0.6903539004895544, 3.000000029999818, 10.50000005934798], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.747334415584912, 6.728606587926089, 0.6903539004895544, 3.000000029999818, 10.50000005934798], res_norm=1.500e+01
2026-01-20 16:19:18,875 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:18,876 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:18,890 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,091 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,109 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,148 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,167 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,206 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,225 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,264 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,282 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,322 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,340 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,379 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,396 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,435 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,454 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,492 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,509 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,548 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,566 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,605 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:19,623 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:19,662 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:21,965 - WARNING - integration_test - Step 37: MPC solve failed
2026-01-20 16:19:21,965 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-20 16:19:22,039 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-20 16:19:22,039 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:22,039 - INFO - integration_test - === Applying control at step 37 ===
2026-01-20 16:19:22,039 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-20 16:19:22,039 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:22,039 - INFO - integration_test -   Planner output success: False
2026-01-20 16:19:22,039 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-20 16:19:22,041 - INFO - integration_test - Step 37 completed in 3.480s
2026-01-20 16:19:22,093 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-20 16:19:22,096 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.74733442  6.72860659  0.6903539   3.00000003 10.50000006]
2026-01-20 16:19:22,096 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.175m, drift=0.258m)
2026-01-20 16:19:22,096 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-20 16:19:22,097 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:22,246 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.747, 6.729), path_start=(0.000, 0.000), dist=10.261m
2026-01-20 16:19:22,246 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.261m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:22,246 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-20 16:19:22,388 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:22,412 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:22,412 - INFO - integration_test - Warmstart k=0: x0=7.747334415584912 , y0=6.728606587926089 , psi0=0.6903539004895544 , v0=3.000000029999818 , spline0=10.50000005934798 , a0=0.0 , w0=0.0
2026-01-20 16:19:22,412 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:22,413 - INFO - integration_test - Dyn residual k=0: pred=[7.97864062666311, 6.919649615845554, 0.6903539004895544, 3.000000029999818, 10.800000062347962], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.97864062666311, 6.919649615845554, 0.6903539004895544, 3.000000029999818, 10.800000062347962], res_norm=1.542e+01
2026-01-20 16:19:22,414 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:22,414 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:22,429 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,629 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:22,648 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,688 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:22,708 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,747 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:22,765 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,805 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:22,823 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,863 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:22,882 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,921 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:22,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:22,977 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:23,000 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:23,040 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:23,058 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:23,097 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:23,115 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:23,154 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:23,171 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:23,209 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:23,946 - INFO - integration_test - Step 38: MPC solve successful
2026-01-20 16:19:24,009 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-20 16:19:24,009 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:24,009 - INFO - integration_test - === Applying control at step 38 ===
2026-01-20 16:19:24,009 - INFO - integration_test -   Control dict from planner: {'a': -9.610571290763547e-11, 'w': -0.08805538265024915}
2026-01-20 16:19:24,009 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:24,009 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:24,010 - INFO - integration_test - Step 38 completed in 1.915s
2026-01-20 16:19:24,064 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-20 16:19:24,066 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 7.97947875  6.91862877  0.68154836  3.00000003 10.80000006]
2026-01-20 16:19:24,066 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.245m, drift=0.046m)
2026-01-20 16:19:24,066 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-20 16:19:24,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:24,259 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(7.979, 6.919), path_start=(0.000, 0.000), dist=10.561m
2026-01-20 16:19:24,260 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.561m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:24,260 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-20 16:19:24,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:24,448 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:24,449 - INFO - integration_test - Warmstart k=0: x0=7.979478750435229 , y0=6.9186287657559165 , psi0=0.6815483622245294 , v0=3.0000000299902077 , spline0=10.800000062347001 , a0=0.0 , w0=0.0
2026-01-20 16:19:24,449 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:24,449 - INFO - integration_test - Dyn residual k=0: pred=[8.212458209070764, 7.107627637851243, 0.6815483622245294, 3.0000000299902077, 11.100000065346022], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.212458209070764, 7.107627637851243, 0.6815483622245294, 3.0000000299902077, 11.100000065346022], res_norm=1.583e+01
2026-01-20 16:19:24,450 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:24,451 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:24,467 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:24,674 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:24,693 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:24,733 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:24,753 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:24,793 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:24,811 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:24,853 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:24,873 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:24,912 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:24,930 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:24,975 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:25,013 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:25,079 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:25,106 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:25,163 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:25,184 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:25,225 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:25,243 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:25,281 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:25,299 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:25,338 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:26,029 - INFO - integration_test - Step 39: MPC solve successful
2026-01-20 16:19:26,240 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-20 16:19:26,240 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:26,240 - INFO - integration_test - === Applying control at step 39 ===
2026-01-20 16:19:26,240 - INFO - integration_test -   Control dict from planner: {'a': 9.597698846173577e-11, 'w': -0.050020124135436134}
2026-01-20 16:19:26,240 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:26,240 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:26,241 - INFO - integration_test - Step 39 completed in 2.176s
2026-01-20 16:19:26,296 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-20 16:19:26,299 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 8.21292992  7.10704417  0.67654635  3.00000003 11.10000007]
2026-01-20 16:19:26,299 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.203m, drift=0.346m)
2026-01-20 16:19:26,299 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-20 16:19:26,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:26,447 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.213, 7.107), path_start=(0.000, 0.000), dist=10.861m
2026-01-20 16:19:26,447 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.861m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:26,447 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-20 16:19:26,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:26,612 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:26,612 - INFO - integration_test - Warmstart k=0: x0=8.212929923909709 , y0=7.107044167866038 , psi0=0.6765463498109858 , v0=3.0000000299998053 , spline0=11.100000065346983 , a0=0.0 , w0=0.0
2026-01-20 16:19:26,612 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:26,613 - INFO - integration_test - Dyn residual k=0: pred=[8.446851838726248, 7.294875314294291, 0.6765463498109858, 3.0000000299998053, 11.400000068346962], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.446851838726248, 7.294875314294291, 0.6765463498109858, 3.0000000299998053, 11.400000068346962], res_norm=1.625e+01
2026-01-20 16:19:26,614 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:26,615 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:26,630 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:26,833 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:26,852 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:26,891 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:26,910 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:26,949 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:26,968 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,008 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,026 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,065 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,083 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,123 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,141 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,179 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,197 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,237 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,256 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,294 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,312 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,355 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:27,374 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:27,413 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:28,046 - INFO - integration_test - Step 40: MPC solve successful
2026-01-20 16:19:28,114 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-20 16:19:28,114 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:28,114 - INFO - integration_test - === Applying control at step 40 ===
2026-01-20 16:19:28,114 - INFO - integration_test -   Control dict from planner: {'a': -3.400873124743741e-08, 'w': -0.038839757203242994}
2026-01-20 16:19:28,114 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:28,114 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:28,115 - INFO - integration_test - Step 40 completed in 1.817s
2026-01-20 16:19:28,177 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-20 16:19:28,177 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 8.44721602  7.29442057  0.67266237  3.00000003 11.40000007]
2026-01-20 16:19:28,178 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.183m, drift=0.133m)
2026-01-20 16:19:28,178 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-20 16:19:28,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:28,328 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.447, 7.294), path_start=(0.000, 0.000), dist=11.161m
2026-01-20 16:19:28,328 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.161m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:28,329 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-20 16:19:28,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:28,491 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:28,491 - INFO - integration_test - Warmstart k=0: x0=8.447216015812314 , y0=7.294420568993633 , psi0=0.6726623740906615 , v0=3.0000000265989324 , spline0=11.400000068006875 , a0=0.0 , w0=0.0
2026-01-20 16:19:28,491 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:28,492 - INFO - integration_test - Dyn residual k=0: pred=[8.681865695755802, 7.481341753716913, 0.6726623740906615, 3.0000000265989324, 11.700000070666768], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.681865695755802, 7.481341753716913, 0.6726623740906615, 3.0000000265989324, 11.700000070666768], res_norm=1.666e+01
2026-01-20 16:19:28,493 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:28,493 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:28,507 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:28,710 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:28,729 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:28,769 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:28,789 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:28,829 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:28,847 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:28,886 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:28,906 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:28,945 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:28,963 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:29,002 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:29,021 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:29,060 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:29,078 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:29,117 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:29,136 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:29,176 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:29,194 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:29,236 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:29,254 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:29,294 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:29,975 - INFO - integration_test - Step 41: MPC solve successful
2026-01-20 16:19:30,086 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-20 16:19:30,086 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:30,086 - INFO - integration_test - === Applying control at step 41 ===
2026-01-20 16:19:30,086 - INFO - integration_test -   Control dict from planner: {'a': 3.400863268197528e-08, 'w': -0.032378552191861754}
2026-01-20 16:19:30,086 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:30,086 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:30,088 - INFO - integration_test - Step 41 completed in 1.910s
2026-01-20 16:19:30,149 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-20 16:19:30,150 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.6821679   7.48096155  0.66942452  3.00000003 11.70000007]
2026-01-20 16:19:30,151 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.262m, drift=0.433m)
2026-01-20 16:19:30,151 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-20 16:19:30,152 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:30,306 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.682, 7.481), path_start=(0.000, 0.000), dist=11.461m
2026-01-20 16:19:30,306 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.461m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:30,306 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-20 16:19:30,457 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:30,483 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:30,483 - INFO - integration_test - Warmstart k=0: x0=8.682167897491922 , y0=7.4809615467047195 , psi0=0.6694245188714754 , v0=3.0000000299997955 , spline0=11.700000071006855 , a0=0.0 , w0=0.0
2026-01-20 16:19:30,483 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:30,484 - INFO - integration_test - Dyn residual k=0: pred=[8.91742157038003, 7.667121991463112, 0.6694245188714754, 3.0000000299997955, 12.000000074006834], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.91742157038003, 7.667121991463112, 0.6694245188714754, 3.0000000299997955, 12.000000074006834], res_norm=1.708e+01
2026-01-20 16:19:30,485 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:30,486 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:30,501 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:30,724 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:30,744 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:30,787 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:30,807 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:30,854 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:30,875 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:30,921 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:30,941 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:30,985 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:31,005 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:31,047 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:31,068 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:31,111 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:31,134 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:31,176 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:31,196 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:31,242 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:31,264 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:31,306 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:31,326 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:31,369 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:32,375 - INFO - integration_test - Step 42: MPC solve successful
2026-01-20 16:19:32,440 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-20 16:19:32,440 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:32,440 - INFO - integration_test - === Applying control at step 42 ===
2026-01-20 16:19:32,440 - INFO - integration_test -   Control dict from planner: {'a': -3.5947945018275816e-07, 'w': -0.019816161380199204}
2026-01-20 16:19:32,440 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:32,440 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:32,441 - INFO - integration_test - Step 42 completed in 2.291s
2026-01-20 16:19:32,494 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-20 16:19:32,497 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 8.91760586  7.66688878  0.6674429   2.99999999 12.00000007]
2026-01-20 16:19:32,498 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.151m, drift=0.221m)
2026-01-20 16:19:32,498 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-20 16:19:32,498 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:32,648 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(8.918, 7.667), path_start=(0.000, 0.000), dist=11.760m
2026-01-20 16:19:32,648 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.760m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:32,649 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-20 16:19:32,787 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:32,809 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:32,809 - INFO - integration_test - Warmstart k=0: x0=8.917605864213762 , y0=7.666888777352683 , psi0=0.6674429027334554 , v0=2.9999999940518505 , spline0=12.00000007041204 , a0=0.0 , w0=0.0
2026-01-20 16:19:32,809 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:32,810 - INFO - integration_test - Dyn residual k=0: pred=[9.15322797068145, 7.852582672208817, 0.6674429027334554, 2.9999999940518505, 12.300000069817226], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.15322797068145, 7.852582672208817, 0.6674429027334554, 2.9999999940518505, 12.300000069817226], res_norm=1.750e+01
2026-01-20 16:19:32,811 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:32,812 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:32,826 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,030 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,049 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,088 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,106 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,146 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,164 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,202 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,221 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,264 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,282 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,321 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,339 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,378 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,395 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,435 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,455 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,494 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,512 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,551 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:33,569 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:33,607 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:34,210 - INFO - integration_test - Step 43: MPC solve successful
2026-01-20 16:19:34,283 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-20 16:19:34,283 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:34,283 - INFO - integration_test - === Applying control at step 43 ===
2026-01-20 16:19:34,283 - INFO - integration_test -   Control dict from planner: {'a': 3.594767451040534e-07, 'w': -0.06754762600974622}
2026-01-20 16:19:34,283 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:34,283 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:34,285 - INFO - integration_test - Step 43 completed in 1.788s
2026-01-20 16:19:34,342 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-20 16:19:34,342 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.15385334  7.85178548  0.66068814  3.00000003 12.30000007]
2026-01-20 16:19:34,343 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.257m, drift=0.009m)
2026-01-20 16:19:34,343 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-20 16:19:34,344 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:34,494 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.154, 7.852), path_start=(0.000, 0.000), dist=12.060m
2026-01-20 16:19:34,494 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.060m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:34,494 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-20 16:19:34,633 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:34,657 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:34,657 - INFO - integration_test - Warmstart k=0: x0=9.153853337024724 , y0=7.851785478544156 , psi0=0.6606881401324808 , v0=3.000000029999525 , spline0=12.300000073411994 , a0=0.0 , w0=0.0
2026-01-20 16:19:34,657 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:34,658 - INFO - integration_test - Dyn residual k=0: pred=[9.390724379645512, 8.035883580021908, 0.6606881401324808, 3.000000029999525, 12.600000076411947], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.390724379645512, 8.035883580021908, 0.6606881401324808, 3.000000029999525, 12.600000076411947], res_norm=1.792e+01
2026-01-20 16:19:34,659 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:34,659 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:34,674 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:34,876 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:34,895 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:34,936 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:34,955 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:34,995 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,014 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,053 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,072 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,112 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,130 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,170 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,188 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,227 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,245 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,284 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,304 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,344 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,362 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,400 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,419 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:35,458 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:35,968 - INFO - integration_test - Step 44: MPC solve successful
2026-01-20 16:19:36,041 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-20 16:19:36,041 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:36,041 - INFO - integration_test - === Applying control at step 44 ===
2026-01-20 16:19:36,041 - INFO - integration_test -   Control dict from planner: {'a': -3.993552931417301e-07, 'w': -0.021343824404893564}
2026-01-20 16:19:36,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:36,041 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:36,042 - INFO - integration_test - Step 44 completed in 1.700s
2026-01-20 16:19:36,098 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-20 16:19:36,102 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.39092067  8.03563065  0.65855376  2.99999999 12.60000007]
2026-01-20 16:19:36,103 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.169m, drift=0.309m)
2026-01-20 16:19:36,103 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-20 16:19:36,104 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:36,253 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.391, 8.036), path_start=(0.000, 0.000), dist=12.360m
2026-01-20 16:19:36,253 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.360m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:36,253 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-20 16:19:36,395 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:36,418 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:36,418 - INFO - integration_test - Warmstart k=0: x0=9.390920666022364 , y0=8.035630652418599 , psi0=0.6585537576919914 , v0=2.999999990063996 , spline0=12.600000072418393 , a0=0.0 , w0=0.0
2026-01-20 16:19:36,418 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:36,419 - INFO - integration_test - Dyn residual k=0: pred=[9.628184101398235, 8.219222759104806, 0.6585537576919914, 2.999999990063996, 12.900000071424792], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.628184101398235, 8.219222759104806, 0.6585537576919914, 2.999999990063996, 12.900000071424792], res_norm=1.833e+01
2026-01-20 16:19:36,420 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:36,421 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:36,436 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,637 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:36,656 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,695 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:36,714 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,754 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:36,772 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,810 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:36,829 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,869 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:36,887 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,927 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:36,945 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:36,983 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:37,002 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:37,041 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:37,058 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:37,097 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:37,115 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:37,155 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:37,173 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:37,211 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:37,807 - INFO - integration_test - Step 45: MPC solve successful
2026-01-20 16:19:37,881 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-20 16:19:37,881 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:37,881 - INFO - integration_test - === Applying control at step 45 ===
2026-01-20 16:19:37,881 - INFO - integration_test -   Control dict from planner: {'a': 3.9935776642916485e-07, 'w': -0.06239025720097372}
2026-01-20 16:19:37,881 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:37,881 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:37,883 - INFO - integration_test - Step 45 completed in 1.781s
2026-01-20 16:19:37,942 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-20 16:19:37,944 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 9.62875528  8.21848143  0.65231473  3.00000003 12.90000008]
2026-01-20 16:19:37,945 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.414m, drift=0.609m)
2026-01-20 16:19:37,945 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-20 16:19:37,946 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:38,092 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(9.629, 8.218), path_start=(0.000, 0.000), dist=12.659m
2026-01-20 16:19:38,092 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.659m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:38,092 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-20 16:19:38,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:38,258 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:38,258 - INFO - integration_test - Warmstart k=0: x0=9.628755279801664 , y0=8.218481425318307 , psi0=0.652314731971894 , v0=3.0000000299997724 , spline0=12.90000007541837 , a0=0.0 , w0=0.0
2026-01-20 16:19:38,258 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:38,259 - INFO - integration_test - Dyn residual k=0: pred=[9.867159529018632, 8.400589678166114, 0.652314731971894, 3.0000000299997724, 13.200000078418348], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.867159529018632, 8.400589678166114, 0.652314731971894, 3.0000000299997724, 13.200000078418348], res_norm=1.875e+01
2026-01-20 16:19:38,259 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:38,260 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:38,274 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,475 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,498 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,538 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,557 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,597 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,615 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,657 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,676 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,715 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,733 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,781 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,801 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,840 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,859 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,898 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,917 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:38,956 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:38,974 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:39,012 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:39,031 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:39,070 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:39,706 - INFO - integration_test - Step 46: MPC solve successful
2026-01-20 16:19:39,779 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-20 16:19:39,779 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:39,779 - INFO - integration_test - === Applying control at step 46 ===
2026-01-20 16:19:39,779 - INFO - integration_test -   Control dict from planner: {'a': -2.89282713884021e-12, 'w': -0.026233430734516353}
2026-01-20 16:19:39,779 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:39,779 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:39,780 - INFO - integration_test - Step 46 completed in 1.836s
2026-01-20 16:19:39,839 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-20 16:19:39,843 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[ 9.86739812  8.40027676  0.64969139  3.00000003 13.20000008]
2026-01-20 16:19:39,843 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.337m, drift=0.397m)
2026-01-20 16:19:39,843 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-20 16:19:39,844 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:40,006 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(9.867, 8.400), path_start=(0.000, 0.000), dist=12.959m
2026-01-20 16:19:40,006 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.959m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:40,006 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-20 16:19:40,151 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:40,175 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:40,175 - INFO - integration_test - Warmstart k=0: x0=9.867398121646746 , y0=8.400276761401576 , psi0=0.6496913888984424 , v0=3.0000000299994833 , spline0=13.200000078418318 , a0=0.0 , w0=0.0
2026-01-20 16:19:40,176 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:40,176 - INFO - integration_test - Dyn residual k=0: pred=[10.10627928239939, 8.58175897220318, 0.6496913888984424, 3.0000000299994833, 13.500000081418266], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.10627928239939, 8.58175897220318, 0.6496913888984424, 3.0000000299994833, 13.500000081418266], res_norm=1.917e+01
2026-01-20 16:19:40,177 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:40,178 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:40,193 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,408 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,429 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,471 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,493 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,536 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,555 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,595 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,613 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,653 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,671 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,709 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,728 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,767 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,785 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,824 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,842 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,881 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,899 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,939 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:40,956 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:40,995 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:41,598 - INFO - integration_test - Step 47: MPC solve successful
2026-01-20 16:19:41,774 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-20 16:19:41,774 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:41,774 - INFO - integration_test - === Applying control at step 47 ===
2026-01-20 16:19:41,774 - INFO - integration_test -   Control dict from planner: {'a': 1.587480783773765e-12, 'w': -0.06186173614115953}
2026-01-20 16:19:41,774 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:41,774 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:41,776 - INFO - integration_test - Step 47 completed in 1.933s
2026-01-20 16:19:41,832 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-20 16:19:41,838 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.1068391   8.58101894  0.64350522  3.00000003 13.50000008]
2026-01-20 16:19:41,839 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.134m, drift=0.697m)
2026-01-20 16:19:41,839 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-20 16:19:41,839 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:41,988 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.107, 8.581), path_start=(0.000, 0.000), dist=13.258m
2026-01-20 16:19:41,988 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.258m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:41,988 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-20 16:19:42,129 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:42,152 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:42,152 - INFO - integration_test - Warmstart k=0: x0=10.10683909723057 , y0=8.581018936879003 , psi0=0.6435052152843264 , v0=3.000000029999642 , spline0=13.500000081418282 , a0=0.0 , w0=0.0
2026-01-20 16:19:42,152 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:42,153 - INFO - integration_test - Dyn residual k=0: pred=[10.346838360460122, 8.761019924235324, 0.6435052152843264, 3.000000029999642, 13.800000084418246], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.346838360460122, 8.761019924235324, 0.6435052152843264, 3.000000029999642, 13.800000084418246], res_norm=1.959e+01
2026-01-20 16:19:42,154 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:42,154 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:42,169 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,371 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,392 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,431 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,450 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,488 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,505 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,544 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,564 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,605 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,624 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,663 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,684 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,724 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,742 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,782 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,801 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,841 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,858 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,897 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:42,915 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:42,954 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:43,696 - INFO - integration_test - Step 48: MPC solve successful
2026-01-20 16:19:43,931 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-20 16:19:43,931 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:43,931 - INFO - integration_test - === Applying control at step 48 ===
2026-01-20 16:19:43,931 - INFO - integration_test -   Control dict from planner: {'a': -1.2642721265938348e-09, 'w': -0.01161160755661838}
2026-01-20 16:19:43,931 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:43,931 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:43,932 - INFO - integration_test - Step 48 completed in 2.094s
2026-01-20 16:19:43,988 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-20 16:19:43,995 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[10.34694281  8.76088054  0.64234405  3.00000003 13.80000008]
2026-01-20 16:19:43,995 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.255m, drift=0.485m)
2026-01-20 16:19:43,996 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-20 16:19:43,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:44,145 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(10.347, 8.761), path_start=(0.000, 0.000), dist=13.558m
2026-01-20 16:19:44,145 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.558m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:44,145 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-20 16:19:44,282 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:44,305 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:44,305 - INFO - integration_test - Warmstart k=0: x0=10.346942811552967 , y0=8.760880544935217 , psi0=0.6423440545286645 , v0=3.0000000298732146 , spline0=13.800000084405603 , a0=0.0 , w0=0.0
2026-01-20 16:19:44,305 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:44,306 - INFO - integration_test - Dyn residual k=0: pred=[10.587150923013127, 8.940602733273598, 0.6423440545286645, 3.0000000298732146, 14.100000087392925], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.587150923013127, 8.940602733273598, 0.6423440545286645, 3.0000000298732146, 14.100000087392925], res_norm=2.001e+01
2026-01-20 16:19:44,307 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:44,308 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:44,322 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,522 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,540 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,580 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,600 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,642 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,660 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,701 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,721 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,760 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,778 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,818 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,838 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,878 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,896 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,936 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:44,954 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:44,993 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:45,011 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:45,052 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:45,071 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:45,110 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:45,718 - INFO - integration_test - Step 49: MPC solve successful
2026-01-20 16:19:45,799 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-20 16:19:45,799 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:45,799 - INFO - integration_test - === Applying control at step 49 ===
2026-01-20 16:19:45,799 - INFO - integration_test -   Control dict from planner: {'a': 1.265296423151721e-09, 'w': -0.05240575062064706}
2026-01-20 16:19:45,799 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:45,799 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:45,801 - INFO - integration_test - Step 49 completed in 1.806s
2026-01-20 16:19:45,858 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-20 16:19:45,859 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[10.58762075  8.9399725   0.63710348  3.00000003 14.10000009]
2026-01-20 16:19:45,860 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.151m, drift=0.785m)
2026-01-20 16:19:45,860 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-20 16:19:45,860 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:46,008 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(10.588, 8.940), path_start=(0.000, 0.000), dist=13.857m
2026-01-20 16:19:46,008 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.857m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:46,008 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-20 16:19:46,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:46,173 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:46,173 - INFO - integration_test - Warmstart k=0: x0=10.587620746253497 , y0=8.939972497762543 , psi0=0.6371034794665998 , v0=3.000000029999744 , spline0=14.100000087405578 , a0=0.0 , w0=0.0
2026-01-20 16:19:46,173 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:46,173 - INFO - integration_test - Dyn residual k=0: pred=[10.82876740254561, 9.118433395325898, 0.6371034794665998, 3.000000029999744, 14.400000090405552], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.82876740254561, 9.118433395325898, 0.6371034794665998, 3.000000029999744, 14.400000090405552], res_norm=2.042e+01
2026-01-20 16:19:46,174 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:46,175 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:46,189 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,396 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,415 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,455 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,473 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,512 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,530 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,569 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,626 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,644 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,682 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,700 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,739 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,756 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,795 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,812 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,852 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,870 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,909 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:46,927 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:46,966 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:47,697 - INFO - integration_test - Step 50: MPC solve successful
2026-01-20 16:19:47,774 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-20 16:19:47,774 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:47,774 - INFO - integration_test - === Applying control at step 50 ===
2026-01-20 16:19:47,774 - INFO - integration_test -   Control dict from planner: {'a': -4.849891236480971e-07, 'w': -0.023418413763293094}
2026-01-20 16:19:47,774 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:47,774 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:47,775 - INFO - integration_test - Step 50 completed in 1.917s
2026-01-20 16:19:47,831 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-20 16:19:47,836 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[10.82897614  9.11815087  0.63476164  2.99999998 14.40000009]
2026-01-20 16:19:47,837 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.180m, drift=0.573m)
2026-01-20 16:19:47,837 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-20 16:19:47,838 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:47,985 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(10.829, 9.118), path_start=(0.000, 0.000), dist=14.157m
2026-01-20 16:19:47,985 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.157m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:47,985 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-20 16:19:48,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:48,149 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:48,149 - INFO - integration_test - Warmstart k=0: x0=10.828976143638757 , y0=9.11815086728694 , psi0=0.6347616380902705 , v0=2.9999999815008316 , spline0=14.40000008555566 , a0=0.0 , w0=0.0
2026-01-20 16:19:48,149 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:48,149 - INFO - integration_test - Dyn residual k=0: pred=[11.070540061507165, 9.29604654591381, 0.6347616380902705, 2.9999999815008316, 14.700000083705744], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.070540061507165, 9.29604654591381, 0.6347616380902705, 2.9999999815008316, 14.700000083705744], res_norm=2.084e+01
2026-01-20 16:19:48,150 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:48,151 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:48,165 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,374 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,394 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,435 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,454 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,494 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,513 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,554 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,571 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,611 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,629 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,668 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,687 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,726 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,743 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,781 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,799 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,838 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,855 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,895 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:48,914 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:48,953 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:49,563 - INFO - integration_test - Step 51: MPC solve successful
2026-01-20 16:19:49,638 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-20 16:19:49,638 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:49,638 - INFO - integration_test - === Applying control at step 51 ===
2026-01-20 16:19:49,638 - INFO - integration_test -   Control dict from planner: {'a': 4.849889573090043e-07, 'w': -0.04552509406958607}
2026-01-20 16:19:49,638 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:49,638 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:49,640 - INFO - integration_test - Step 51 completed in 1.804s
2026-01-20 16:19:49,695 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-20 16:19:49,696 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.07094416  9.29549607  0.63020913  3.00000003 14.70000009]
2026-01-20 16:19:49,697 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.210m, drift=0.873m)
2026-01-20 16:19:49,697 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-20 16:19:49,697 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:49,847 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.071, 9.295), path_start=(0.000, 0.000), dist=14.456m
2026-01-20 16:19:49,847 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.456m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:49,847 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-20 16:19:49,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:50,010 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:50,010 - INFO - integration_test - Warmstart k=0: x0=11.070944164225052 , y0=9.29549607280047 , psi0=0.6302091286833119 , v0=3.000000029999727 , spline0=14.700000088555633 , a0=0.0 , w0=0.0
2026-01-20 16:19:50,010 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:50,011 - INFO - integration_test - Dyn residual k=0: pred=[11.313315451721566, 9.472290192604454, 0.6302091286833119, 3.000000029999727, 15.000000091555606], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.313315451721566, 9.472290192604454, 0.6302091286833119, 3.000000029999727, 15.000000091555606], res_norm=2.126e+01
2026-01-20 16:19:50,012 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:50,013 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:50,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,229 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,249 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,289 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,307 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,348 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,366 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,406 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,424 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,462 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,480 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,519 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,537 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,576 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,594 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,633 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,653 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,692 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,710 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,749 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:50,766 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:50,806 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:51,470 - INFO - integration_test - Step 52: MPC solve successful
2026-01-20 16:19:51,547 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-20 16:19:51,547 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:51,547 - INFO - integration_test - === Applying control at step 52 ===
2026-01-20 16:19:51,547 - INFO - integration_test -   Control dict from planner: {'a': -6.971487792473762e-05, 'w': -0.03966408313421984}
2026-01-20 16:19:51,547 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:51,547 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:51,548 - INFO - integration_test - Step 52 completed in 1.853s
2026-01-20 16:19:51,607 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-20 16:19:51,613 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[11.31366515  9.47180885  0.62624272  2.99999306 14.99999939]
2026-01-20 16:19:51,613 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.125m, drift=0.661m)
2026-01-20 16:19:51,613 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-20 16:19:51,614 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:51,760 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(11.314, 9.472), path_start=(0.000, 0.000), dist=14.755m
2026-01-20 16:19:51,760 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.755m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:51,760 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-20 16:19:51,900 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:51,925 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:51,926 - INFO - integration_test - Warmstart k=0: x0=11.313665152425404 , y0=9.471808853250161 , psi0=0.6262427203698899 , v0=2.9999930585119348 , spline0=14.999999394406826 , a0=0.0 , w0=0.0
2026-01-20 16:19:51,926 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:51,927 - INFO - integration_test - Dyn residual k=0: pred=[11.55673520435727, 9.647639832787435, 0.6262427203698899, 2.9999930585119348, 15.29999870025802], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.55673520435727, 9.647639832787435, 0.6262427203698899, 2.9999930585119348, 15.29999870025802], res_norm=2.168e+01
2026-01-20 16:19:51,927 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:51,928 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:51,942 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,145 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,163 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,202 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,221 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,262 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,283 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,323 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,341 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,381 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,440 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,458 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,497 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,515 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,554 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,572 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,613 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,631 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,670 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:52,688 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:52,727 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:53,389 - INFO - integration_test - Step 53: MPC solve successful
2026-01-20 16:19:53,474 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-20 16:19:53,474 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:53,475 - INFO - integration_test - === Applying control at step 53 ===
2026-01-20 16:19:53,475 - INFO - integration_test -   Control dict from planner: {'a': 6.971487772912865e-05, 'w': -0.03168091472559745}
2026-01-20 16:19:53,475 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:53,475 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:53,476 - INFO - integration_test - Step 53 completed in 1.863s
2026-01-20 16:19:53,541 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-20 16:19:53,541 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[11.5570136   9.64725471  0.62307463  3.00000003 15.2999994 ]
2026-01-20 16:19:53,542 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.277m, drift=0.449m)
2026-01-20 16:19:53,542 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-20 16:19:53,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:53,689 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(11.557, 9.647), path_start=(0.000, 0.000), dist=15.054m
2026-01-20 16:19:53,689 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.054m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:53,689 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-20 16:19:53,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:53,852 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:53,853 - INFO - integration_test - Warmstart k=0: x0=11.55701360468833 , y0=9.647254708604128 , psi0=0.6230746288973302 , v0=3.0000000299997076 , spline0=15.299999397406797 , a0=0.0 , w0=0.0
2026-01-20 16:19:53,853 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:53,853 - INFO - integration_test - Dyn residual k=0: pred=[11.800640050639343, 9.82231514569161, 0.6230746288973302, 3.0000000299997076, 15.599999400406768], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.800640050639343, 9.82231514569161, 0.6230746288973302, 3.0000000299997076, 15.599999400406768], res_norm=2.210e+01
2026-01-20 16:19:53,854 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:53,855 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:53,869 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,076 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,095 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,136 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,155 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,195 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,213 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,254 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,273 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,313 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,332 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,371 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,389 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,429 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,447 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,487 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,505 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,546 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,604 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:54,623 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:54,662 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:55,188 - INFO - integration_test - Step 54: MPC solve successful
2026-01-20 16:19:55,271 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-20 16:19:55,271 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:55,271 - INFO - integration_test - === Applying control at step 54 ===
2026-01-20 16:19:55,271 - INFO - integration_test -   Control dict from planner: {'a': -3.811778071955599e-08, 'w': -0.01850769773086074}
2026-01-20 16:19:55,271 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:55,271 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:55,273 - INFO - integration_test - Step 54 completed in 1.731s
2026-01-20 16:19:55,329 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-20 16:19:55,334 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[11.80080191  9.8220896   0.62122386  3.00000003 15.5999994 ]
2026-01-20 16:19:55,334 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.123m, drift=0.749m)
2026-01-20 16:19:55,335 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-20 16:19:55,336 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:55,485 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(11.801, 9.822), path_start=(0.000, 0.000), dist=15.354m
2026-01-20 16:19:55,485 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.354m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:55,485 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-20 16:19:55,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:55,649 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:55,649 - INFO - integration_test - Warmstart k=0: x0=11.80080190963667 , y0=9.822089597473404 , psi0=0.6212238591242442 , v0=3.0000000261879296 , spline0=15.59999940002559 , a0=0.0 , w0=0.0
2026-01-20 16:19:55,649 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:55,650 - INFO - integration_test - Dyn residual k=0: pred=[12.044751934405529, 9.996698838312911, 0.6212238591242442, 3.0000000261879296, 15.899999402644383], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.044751934405529, 9.996698838312911, 0.6212238591242442, 3.0000000261879296, 15.899999402644383], res_norm=2.252e+01
2026-01-20 16:19:55,651 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:55,652 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:55,666 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:55,870 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:55,888 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:55,928 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:55,948 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:55,988 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,007 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,047 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,066 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,142 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,169 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,226 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,249 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,290 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,307 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,347 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,365 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,404 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,421 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,460 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:56,478 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:56,516 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:57,090 - INFO - integration_test - Step 55: MPC solve successful
2026-01-20 16:19:57,179 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-20 16:19:57,179 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:57,179 - INFO - integration_test - === Applying control at step 55 ===
2026-01-20 16:19:57,179 - INFO - integration_test -   Control dict from planner: {'a': 3.81175561988399e-08, 'w': -0.06645091280267339}
2026-01-20 16:19:57,179 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:57,179 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:57,181 - INFO - integration_test - Step 55 completed in 1.847s
2026-01-20 16:19:57,241 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-20 16:19:57,244 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[12.04533028  9.99588702  0.61457877  3.00000003 15.8999994 ]
2026-01-20 16:19:57,244 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.196m, drift=0.536m)
2026-01-20 16:19:57,244 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-20 16:19:57,245 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:57,394 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(12.045, 9.996), path_start=(0.000, 0.000), dist=15.653m
2026-01-20 16:19:57,394 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.653m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:57,395 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-20 16:19:57,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:57,559 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:57,559 - INFO - integration_test - Warmstart k=0: x0=12.045330284242311 , y0=9.995887021273841 , psi0=0.6145787678439768 , v0=3.0000000299996854 , spline0=15.899999403025559 , a0=0.0 , w0=0.0
2026-01-20 16:19:57,559 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:57,560 - INFO - integration_test - Dyn residual k=0: pred=[12.290435209067292, 10.168871348964304, 0.6145787678439768, 3.0000000299996854, 16.199999406025526], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.290435209067292, 10.168871348964304, 0.6145787678439768, 3.0000000299996854, 16.199999406025526], res_norm=2.294e+01
2026-01-20 16:19:57,561 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:57,561 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:57,576 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:57,774 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:57,793 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:57,833 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:57,851 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:57,890 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:57,908 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:57,947 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:57,966 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,005 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:58,023 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,062 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:58,080 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,119 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:58,138 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,177 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:58,195 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,235 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:58,256 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,295 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:58,313 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:58,353 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:59,016 - INFO - integration_test - Step 56: MPC solve successful
2026-01-20 16:19:59,276 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-20 16:19:59,276 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:19:59,276 - INFO - integration_test - === Applying control at step 56 ===
2026-01-20 16:19:59,276 - INFO - integration_test -   Control dict from planner: {'a': -3.878685887922605e-07, 'w': -0.03134173139530004}
2026-01-20 16:19:59,276 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:19:59,276 - INFO - integration_test -   Planner output success: True
2026-01-20 16:19:59,277 - INFO - integration_test - Step 56 completed in 2.034s
2026-01-20 16:19:59,333 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-20 16:19:59,341 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[12.29070589 10.16848696  0.61144459  2.99999999 16.1999994 ]
2026-01-20 16:19:59,342 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.175m, drift=0.836m)
2026-01-20 16:19:59,342 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-20 16:19:59,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:59,491 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(12.291, 10.168), path_start=(0.000, 0.000), dist=15.952m
2026-01-20 16:19:59,491 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.952m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:19:59,491 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-20 16:19:59,631 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:19:59,654 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:19:59,654 - INFO - integration_test - Warmstart k=0: x0=12.290705887396191 , y0=10.168486964322687 , psi0=0.6114445947044468 , v0=2.9999999912128263 , spline0=16.19999940214684 , a0=0.0 , w0=0.0
2026-01-20 16:19:59,654 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:19:59,655 - INFO - integration_test - Dyn residual k=0: pred=[12.53635176715411, 10.340702240157112, 0.6114445947044468, 2.9999999912128263, 16.499999401268123], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.53635176715411, 10.340702240157112, 0.6114445947044468, 2.9999999912128263, 16.499999401268123], res_norm=2.336e+01
2026-01-20 16:19:59,656 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:59,657 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:19:59,672 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:59,877 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:59,896 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:59,936 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:19:59,955 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:19:59,995 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,014 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,054 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,073 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,112 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,131 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,171 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,189 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,229 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,248 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,287 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,306 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,345 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,364 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,403 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:00,421 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:00,460 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:01,064 - INFO - integration_test - Step 57: MPC solve successful
2026-01-20 16:20:01,163 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-20 16:20:01,163 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:01,163 - INFO - integration_test - === Applying control at step 57 ===
2026-01-20 16:20:01,163 - INFO - integration_test -   Control dict from planner: {'a': 3.878683245324217e-07, 'w': -0.04398330059140462}
2026-01-20 16:20:01,163 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:01,163 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:01,164 - INFO - integration_test - Step 57 completed in 1.823s
2026-01-20 16:20:01,226 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-20 16:20:01,227 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[12.53672971 10.34016147  0.60704626  3.00000003 16.49999941]
2026-01-20 16:20:01,227 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.127m, drift=0.624m)
2026-01-20 16:20:01,227 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-20 16:20:01,228 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:01,374 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(12.537, 10.340), path_start=(0.000, 0.000), dist=16.251m
2026-01-20 16:20:01,374 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.251m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:01,374 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-20 16:20:01,516 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:01,541 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:01,541 - INFO - integration_test - Warmstart k=0: x0=12.536729705931917 , y0=10.340161471049184 , psi0=0.6070462646453063 , v0=3.0000000299996588 , spline0=16.499999405146806 , a0=0.0 , w0=0.0
2026-01-20 16:20:01,541 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:01,542 - INFO - integration_test - Dyn residual k=0: pred=[12.783130670013987, 10.51129465514685, 0.6070462646453063, 3.0000000299996588, 16.79999940814677], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.783130670013987, 10.51129465514685, 0.6070462646453063, 3.0000000299996588, 16.79999940814677], res_norm=2.378e+01
2026-01-20 16:20:01,542 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:01,543 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:01,557 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:01,759 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:01,777 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:01,817 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:01,837 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:01,876 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:01,894 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:01,933 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:01,953 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:01,992 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:02,009 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:02,049 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:02,067 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:02,106 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:02,125 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:02,164 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:02,182 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:02,221 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:02,240 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:02,280 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:02,298 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:02,339 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:03,049 - INFO - integration_test - Step 58: MPC solve successful
2026-01-20 16:20:03,126 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-20 16:20:03,126 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:03,126 - INFO - integration_test - === Applying control at step 58 ===
2026-01-20 16:20:03,126 - INFO - integration_test -   Control dict from planner: {'a': -3.932487214417752e-06, 'w': 0.002998141567645697}
2026-01-20 16:20:03,126 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:03,127 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:03,128 - INFO - integration_test - Step 58 completed in 1.901s
2026-01-20 16:20:03,182 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-20 16:20:03,188 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[12.783105   10.51133158  0.60734608  2.99999964 16.79999937]
2026-01-20 16:20:03,188 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.249m, drift=0.924m)
2026-01-20 16:20:03,189 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-20 16:20:03,189 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:03,341 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(12.783, 10.511), path_start=(0.000, 0.000), dist=16.550m
2026-01-20 16:20:03,341 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.550m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:03,341 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-20 16:20:03,483 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:03,508 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:03,508 - INFO - integration_test - Warmstart k=0: x0=12.783104996099866 , y0=10.511331578611845 , psi0=0.6073460788020709 , v0=2.999999636750937 , spline0=16.7999993688219 , a0=0.0 , w0=0.0
2026-01-20 16:20:03,508 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:03,509 - INFO - integration_test - Dyn residual k=0: pred=[13.029454608664883, 10.682538607071903, 0.6073460788020709, 2.999999636750937, 17.099999332496996], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.029454608664883, 10.682538607071903, 0.6073460788020709, 2.999999636750937, 17.099999332496996], res_norm=2.420e+01
2026-01-20 16:20:03,510 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:03,510 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:03,525 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:03,731 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:03,753 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:03,793 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:03,812 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:03,853 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:03,872 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:03,912 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:03,931 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:03,970 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:03,989 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:04,029 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:04,047 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:04,088 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:04,106 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:04,145 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:04,164 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:04,203 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:04,221 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:04,263 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:04,281 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:04,321 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:04,860 - INFO - integration_test - Step 59: MPC solve successful
2026-01-20 16:20:04,948 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-20 16:20:04,949 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:04,949 - INFO - integration_test - === Applying control at step 59 ===
2026-01-20 16:20:04,949 - INFO - integration_test -   Control dict from planner: {'a': 3.932305725738117e-06, 'w': -0.08102292008477027}
2026-01-20 16:20:04,949 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:04,949 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:04,950 - INFO - integration_test - Step 59 completed in 1.762s
2026-01-20 16:20:05,013 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-20 16:20:05,014 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[13.03014551 10.68153875  0.59924379  3.00000003 17.09999937]
2026-01-20 16:20:05,015 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.100m, drift=0.712m)
2026-01-20 16:20:05,015 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-20 16:20:05,016 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:05,174 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(13.030, 10.682), path_start=(0.000, 0.000), dist=16.849m
2026-01-20 16:20:05,174 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.849m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:05,174 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-20 16:20:05,316 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:05,340 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:05,341 - INFO - integration_test - Warmstart k=0: x0=13.030145510396999 , y0=10.68153875221409 , psi0=0.5992437867935939 , v0=3.0000000299815097 , spline0=17.09999937182005 , a0=0.0 , w0=0.0
2026-01-20 16:20:05,341 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:05,341 - INFO - integration_test - Dyn residual k=0: pred=[13.277874223565773, 10.850744208599615, 0.5992437867935939, 3.0000000299815097, 17.3999993748182], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.277874223565773, 10.850744208599615, 0.5992437867935939, 3.0000000299815097, 17.3999993748182], res_norm=2.462e+01
2026-01-20 16:20:05,342 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:05,343 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:05,357 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,560 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,578 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,619 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,639 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,678 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,695 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,735 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,755 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,795 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,813 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,854 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,871 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,912 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,932 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:05,972 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:05,990 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:06,032 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:06,051 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:06,093 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:06,111 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:06,151 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:07,310 - INFO - integration_test - Step 60: MPC solve successful
2026-01-20 16:20:07,417 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-20 16:20:07,417 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:07,417 - INFO - integration_test - === Applying control at step 60 ===
2026-01-20 16:20:07,417 - INFO - integration_test -   Control dict from planner: {'a': -3.4590482557106505e-09, 'w': -0.015793050915739352}
2026-01-20 16:20:07,417 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:07,417 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:07,419 - INFO - integration_test - Step 60 completed in 2.405s
2026-01-20 16:20:07,479 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-20 16:20:07,482 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[13.27800773 10.85054852  0.59766448  3.00000003 17.39999937]
2026-01-20 16:20:07,483 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.218m, drift=0.500m)
2026-01-20 16:20:07,483 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-20 16:20:07,483 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:07,632 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(13.278, 10.851), path_start=(0.000, 0.000), dist=17.148m
2026-01-20 16:20:07,632 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.148m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:07,632 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-20 16:20:07,777 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:07,826 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:07,826 - INFO - integration_test - Warmstart k=0: x0=13.278007734062104 , y0=10.850548518682688 , psi0=0.59766448170202 , v0=3.000000029635605 , spline0=17.39999937478361 , a0=0.0 , w0=0.0
2026-01-20 16:20:07,826 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:07,828 - INFO - integration_test - Dyn residual k=0: pred=[13.526003365187009, 11.019362524976883, 0.59766448170202, 3.000000029635605, 17.699999377747172], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.526003365187009, 11.019362524976883, 0.59766448170202, 3.000000029635605, 17.699999377747172], res_norm=2.504e+01
2026-01-20 16:20:07,829 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:07,830 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:07,853 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,088 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,106 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,146 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,164 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,203 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,221 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,262 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,280 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,319 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,338 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,377 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,394 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,434 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,452 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,491 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,548 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,566 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,604 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:08,623 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:08,662 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:09,317 - INFO - integration_test - Step 61: MPC solve successful
2026-01-20 16:20:09,402 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-20 16:20:09,402 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:09,402 - INFO - integration_test - === Applying control at step 61 ===
2026-01-20 16:20:09,402 - INFO - integration_test -   Control dict from planner: {'a': 3.1704071672320957e-09, 'w': -0.05218369104415484}
2026-01-20 16:20:09,402 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:09,402 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:09,404 - INFO - integration_test - Step 61 completed in 1.922s
2026-01-20 16:20:09,463 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-20 16:20:09,464 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[13.52644271 11.01871469  0.59244611  3.00000003 17.69999938]
2026-01-20 16:20:09,464 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.140m, drift=0.800m)
2026-01-20 16:20:09,465 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-20 16:20:09,465 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:09,616 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(13.526, 11.019), path_start=(0.000, 0.000), dist=17.446m
2026-01-20 16:20:09,616 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.446m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:09,616 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-20 16:20:09,759 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:09,783 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:09,783 - INFO - integration_test - Warmstart k=0: x0=13.5264427055559 , y0=11.018714693912521 , psi0=0.5924461125976045 , v0=3.0000000299526457 , spline0=17.699999377778877 , a0=0.0 , w0=0.0
2026-01-20 16:20:09,783 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:09,784 - INFO - integration_test - Dyn residual k=0: pred=[13.775315889880286, 11.186232274844787, 0.5924461125976045, 3.0000000299526457, 17.999999380774142], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.775315889880286, 11.186232274844787, 0.5924461125976045, 3.0000000299526457, 17.999999380774142], res_norm=2.546e+01
2026-01-20 16:20:09,785 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:09,786 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:09,800 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,009 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,029 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,068 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,087 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,127 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,145 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,184 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,247 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,265 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,305 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,324 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,364 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,382 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,423 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,442 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,482 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,500 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,540 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:10,558 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:10,596 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:11,762 - INFO - integration_test - Step 62: MPC solve successful
2026-01-20 16:20:11,864 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-20 16:20:11,864 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:11,864 - INFO - integration_test - === Applying control at step 62 ===
2026-01-20 16:20:11,864 - INFO - integration_test -   Control dict from planner: {'a': -0.00023146409629282215, 'w': 0.0007304237964862244}
2026-01-20 16:20:11,864 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:11,864 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:11,866 - INFO - integration_test - Step 62 completed in 2.402s
2026-01-20 16:20:11,928 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-20 16:20:11,929 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[13.77530881 11.18624072  0.59251915  2.99997688 17.99999707]
2026-01-20 16:20:11,929 - DEBUG - integration_test - Step 63: Using propagated spline 18.0000 (close to path, dist=0.140m, drift=0.588m)
2026-01-20 16:20:11,929 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-20 16:20:11,930 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:12,079 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(13.775, 11.186), path_start=(0.000, 0.000), dist=17.745m
2026-01-20 16:20:12,079 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.745m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:12,079 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-20 16:20:12,220 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:12,245 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:12,245 - INFO - integration_test - Warmstart k=0: x0=13.77530881166232 , y0=11.186240717555465 , psi0=0.5925191549772532 , v0=2.9999768835430163 , spline0=17.99999706613318 , a0=0.0 , w0=0.0
2026-01-20 16:20:12,245 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:12,246 - INFO - integration_test - Dyn residual k=0: pred=[14.024167839360954, 11.353775183713374, 0.5925191549772532, 2.9999768835430163, 18.299994754487482], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.024167839360954, 11.353775183713374, 0.5925191549772532, 2.9999768835430163, 18.299994754487482], res_norm=2.588e+01
2026-01-20 16:20:12,247 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:12,247 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:12,261 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,472 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,492 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,533 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,552 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,592 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,610 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,649 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,668 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,708 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,726 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,767 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,785 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,833 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,852 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,891 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,909 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:12,949 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:12,968 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:13,007 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:13,025 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:13,064 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:19,983 - WARNING - integration_test - Step 63: MPC solve failed
2026-01-20 16:20:19,983 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-20 16:20:20,081 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-20 16:20:20,081 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:20,081 - INFO - integration_test - === Applying control at step 63 ===
2026-01-20 16:20:20,081 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-20 16:20:20,081 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:20,081 - INFO - integration_test -   Planner output success: False
2026-01-20 16:20:20,081 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-20 16:20:20,082 - INFO - integration_test - Step 63 completed in 8.154s
2026-01-20 16:20:20,146 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-20 16:20:20,147 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[14.02416784 11.35377518  0.59251915  2.99997688 18.29999475]
2026-01-20 16:20:20,148 - DEBUG - integration_test - Step 64: Using propagated spline 18.3000 (close to path, dist=0.212m, drift=0.888m)
2026-01-20 16:20:20,148 - DEBUG - integration_test -   Set spline state to 18.3000
2026-01-20 16:20:20,148 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:20,298 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(14.024, 11.354), path_start=(0.000, 0.000), dist=18.044m
2026-01-20 16:20:20,298 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.044m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:20,298 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-20 16:20:20,440 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:20,465 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:20,465 - INFO - integration_test - Warmstart k=0: x0=14.024167839360954 , y0=11.353775183713374 , psi0=0.5925191549772532 , v0=2.9999768835430163 , spline0=18.299994754487482 , a0=0.0 , w0=0.0
2026-01-20 16:20:20,465 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:20,466 - INFO - integration_test - Dyn residual k=0: pred=[14.273026867059588, 11.521309649871283, 0.5925191549772532, 2.9999768835430163, 18.599992442841785], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.273026867059588, 11.521309649871283, 0.5925191549772532, 2.9999768835430163, 18.599992442841785], res_norm=2.630e+01
2026-01-20 16:20:20,467 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:20,468 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:20,482 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:20,686 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:20,704 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:20,745 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:20,763 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:20,802 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:20,820 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:20,860 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:20,880 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:20,920 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:20,938 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:20,978 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:20,996 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:21,035 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:21,054 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:21,094 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:21,114 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:21,157 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:21,177 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:21,217 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:21,236 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:21,276 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:42,900 - WARNING - integration_test - Step 64: MPC solve failed
2026-01-20 16:20:42,900 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-20 16:20:43,002 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.300)
2026-01-20 16:20:43,002 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:43,002 - INFO - integration_test - === Applying control at step 64 ===
2026-01-20 16:20:43,002 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-20 16:20:43,002 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:43,002 - INFO - integration_test -   Planner output success: False
2026-01-20 16:20:43,002 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-20 16:20:43,004 - INFO - integration_test - Step 64 completed in 22.857s
2026-01-20 16:20:43,068 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-20 16:20:43,069 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[14.27302687 11.52130965  0.59251915  2.99997688 18.59999244]
2026-01-20 16:20:43,070 - DEBUG - integration_test - Step 65: Using propagated spline 18.6000 (close to path, dist=0.084m, drift=0.676m)
2026-01-20 16:20:43,070 - DEBUG - integration_test -   Set spline state to 18.6000
2026-01-20 16:20:43,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:43,420 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(14.273, 11.521), path_start=(0.000, 0.000), dist=18.343m
2026-01-20 16:20:43,421 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.343m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:43,421 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-20 16:20:43,563 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:43,605 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:43,606 - INFO - integration_test - Warmstart k=0: x0=14.273026867059588 , y0=11.521309649871283 , psi0=0.5925191549772532 , v0=2.9999768835430163 , spline0=18.599992442841785 , a0=0.0 , w0=0.0
2026-01-20 16:20:43,606 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:43,607 - INFO - integration_test - Dyn residual k=0: pred=[14.521885894758222, 11.688844116029191, 0.5925191549772532, 2.9999768835430163, 18.899990131196088], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.521885894758222, 11.688844116029191, 0.5925191549772532, 2.9999768835430163, 18.899990131196088], res_norm=2.672e+01
2026-01-20 16:20:43,608 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:43,609 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:43,633 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:43,879 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:43,899 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:43,939 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:43,958 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:43,998 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,018 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,058 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,076 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,117 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,135 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,175 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,194 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,235 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,254 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,295 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,316 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,357 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,376 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,416 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:44,436 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:44,475 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:45,211 - INFO - integration_test - Step 65: MPC solve successful
2026-01-20 16:20:45,309 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.600)
2026-01-20 16:20:45,310 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:45,310 - INFO - integration_test - === Applying control at step 65 ===
2026-01-20 16:20:45,310 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199964867, 'w': -0.11741223191437211}
2026-01-20 16:20:45,310 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:45,310 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:45,311 - INFO - integration_test - Step 65 completed in 2.242s
2026-01-20 16:20:45,374 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-20 16:20:45,374 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[14.5145249  11.68185993  0.58077793  2.79997688 18.87999013]
2026-01-20 16:20:45,375 - DEBUG - integration_test - Step 66: Using propagated spline 18.8800 (close to path, dist=0.252m, drift=0.444m)
2026-01-20 16:20:45,375 - DEBUG - integration_test -   Set spline state to 18.8800
2026-01-20 16:20:45,376 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:45,528 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(14.515, 11.682), path_start=(0.000, 0.000), dist=18.632m
2026-01-20 16:20:45,528 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.632m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:45,528 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-20 16:20:45,669 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:45,692 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:45,692 - INFO - integration_test - Warmstart k=0: x0=14.514524904301263 , y0=11.681859926925211 , psi0=0.5807779317858159 , v0=2.7999768815433677 , spline0=18.87999013099612 , a0=0.0 , w0=0.0
2026-01-20 16:20:45,692 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:45,693 - INFO - integration_test - Dyn residual k=0: pred=[14.748613071566828, 11.835487513373812, 0.5807779317858159, 2.7999768815433677, 19.159987819150455], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.748613071566828, 11.835487513373812, 0.5807779317858159, 2.7999768815433677, 19.159987819150455], res_norm=2.707e+01
2026-01-20 16:20:45,694 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:45,695 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:45,709 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:45,914 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:45,935 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:45,975 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:45,993 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,033 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,052 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,092 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,111 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,151 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,170 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,210 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,228 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,278 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,296 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,336 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,355 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,394 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,412 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,454 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:46,472 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:46,510 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:47,115 - INFO - integration_test - Step 66: MPC solve successful
2026-01-20 16:20:47,220 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.880)
2026-01-20 16:20:47,220 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:47,220 - INFO - integration_test - === Applying control at step 66 ===
2026-01-20 16:20:47,221 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000192333323, 'w': 0.01020443170572511}
2026-01-20 16:20:47,221 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:47,221 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:47,222 - INFO - integration_test - Step 66 completed in 1.848s
2026-01-20 16:20:47,280 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-20 16:20:47,284 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[14.74017802 11.83011449  0.58179837  2.59997688 19.13998782]
2026-01-20 16:20:47,286 - DEBUG - integration_test - Step 67: Using propagated spline 19.1400 (close to path, dist=0.080m, drift=0.704m)
2026-01-20 16:20:47,286 - DEBUG - integration_test -   Set spline state to 19.1400
2026-01-20 16:20:47,287 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:47,439 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(14.740, 11.830), path_start=(0.000, 0.000), dist=18.900m
2026-01-20 16:20:47,439 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.900m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:47,439 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-20 16:20:47,582 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:47,606 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:47,606 - INFO - integration_test - Warmstart k=0: x0=14.740178020823793 , y0=11.830114492580048 , psi0=0.5817983749563884 , v0=2.5999768796200344 , spline0=19.139987818958122 , a0=0.0 , w0=0.0
2026-01-20 16:20:47,606 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:47,607 - INFO - integration_test - Dyn residual k=0: pred=[14.95739978294999, 11.972990326101247, 0.5817983749563884, 2.5999768796200344, 19.399985506920125], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.95739978294999, 11.972990326101247, 0.5817983749563884, 2.5999768796200344, 19.399985506920125], res_norm=2.740e+01
2026-01-20 16:20:47,608 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:47,608 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:47,623 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:47,827 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:47,847 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:47,887 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:47,906 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:47,947 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:47,966 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,006 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,024 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,064 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,082 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,121 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,141 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,181 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,199 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,240 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,258 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,298 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,316 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,357 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:48,375 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:48,416 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:49,036 - INFO - integration_test - Step 67: MPC solve successful
2026-01-20 16:20:49,147 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.140)
2026-01-20 16:20:49,147 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:49,147 - INFO - integration_test - === Applying control at step 67 ===
2026-01-20 16:20:49,147 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199161168, 'w': -0.022479452257729283}
2026-01-20 16:20:49,147 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:49,147 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:49,148 - INFO - integration_test - Step 67 completed in 1.864s
2026-01-20 16:20:49,205 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-20 16:20:49,210 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[14.94919721 11.96726331  0.57955043  2.39997688 19.37998551]
2026-01-20 16:20:49,211 - DEBUG - integration_test - Step 68: Using propagated spline 19.3800 (close to path, dist=0.242m, drift=0.432m)
2026-01-20 16:20:49,211 - DEBUG - integration_test -   Set spline state to 19.3800
2026-01-20 16:20:49,212 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:49,365 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(14.949, 11.967), path_start=(0.000, 0.000), dist=19.149m
2026-01-20 16:20:49,365 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=19.149m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:49,365 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-20 16:20:49,511 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:49,535 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:49,535 - INFO - integration_test - Warmstart k=0: x0=14.949197206100667 , y0=11.967263308900959 , psi0=0.5795504297306155 , v0=2.399976877628423 , spline0=19.379985506720963 , a0=0.0 , w0=0.0
2026-01-20 16:20:49,535 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:49,536 - INFO - integration_test - Dyn residual k=0: pred=[15.150005417186112, 12.098697522453497, 0.5795504297306155, 2.399976877628423, 19.619983194483805], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.150005417186112, 12.098697522453497, 0.5795504297306155, 2.399976877628423, 19.619983194483805], res_norm=2.769e+01
2026-01-20 16:20:49,537 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:49,537 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:49,552 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:49,761 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:49,780 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:49,820 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:49,841 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:49,880 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:49,898 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:49,940 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:49,958 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:49,998 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,016 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:50,058 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,075 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:50,115 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,135 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:50,176 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,195 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:50,237 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,256 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:50,295 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,314 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:50,355 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:50,930 - INFO - integration_test - Step 68: MPC solve successful
2026-01-20 16:20:51,042 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.380)
2026-01-20 16:20:51,042 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:51,042 - INFO - integration_test - === Applying control at step 68 ===
2026-01-20 16:20:51,042 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999408558065, 'w': -0.02393426071865522}
2026-01-20 16:20:51,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:51,042 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:51,044 - INFO - integration_test - Step 68 completed in 1.834s
2026-01-20 16:20:51,103 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-20 16:20:51,104 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[15.1417867  12.09299397  0.577157    2.19997688 19.5999832 ]
2026-01-20 16:20:51,105 - DEBUG - integration_test - Step 69: Using propagated spline 19.6000 (close to path, dist=0.067m, drift=0.652m)
2026-01-20 16:20:51,106 - DEBUG - integration_test -   Set spline state to 19.6000
2026-01-20 16:20:51,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:51,260 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(15.142, 12.093), path_start=(0.000, 0.000), dist=19.378m
2026-01-20 16:20:51,260 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.378m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:51,260 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-20 16:20:51,404 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:51,429 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:51,429 - INFO - integration_test - Warmstart k=0: x0=15.141786698891691 , y0=12.092993967620782 , psi0=0.57715700365875 , v0=2.1999768835428424 , spline0=19.599983195075247 , a0=0.0 , w0=0.0
2026-01-20 16:20:51,429 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:51,430 - INFO - integration_test - Dyn residual k=0: pred=[15.326148567133258, 12.213034312587414, 0.57715700365875, 2.1999768835428424, 19.81998088342953], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.326148567133258, 12.213034312587414, 0.57715700365875, 2.1999768835428424, 19.81998088342953], res_norm=2.797e+01
2026-01-20 16:20:51,431 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:51,431 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:51,446 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:51,651 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:51,671 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:51,710 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:51,729 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:51,768 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:51,788 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:51,828 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:51,846 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:51,886 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:51,905 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:51,946 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:51,966 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:52,005 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:52,024 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:52,064 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:52,083 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:52,123 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:52,142 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:52,181 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:52,199 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:52,240 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:52,877 - INFO - integration_test - Step 69: MPC solve successful
2026-01-20 16:20:52,980 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.600)
2026-01-20 16:20:52,981 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:52,981 - INFO - integration_test - === Applying control at step 69 ===
2026-01-20 16:20:52,981 - INFO - integration_test -   Control dict from planner: {'a': -2.000000018809532, 'w': -0.0022573792579423588}
2026-01-20 16:20:52,981 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:52,981 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:52,982 - INFO - integration_test - Step 69 completed in 1.878s
2026-01-20 16:20:53,046 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-20 16:20:53,047 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[15.31778112 12.20755833  0.57693127  1.99997688 19.79998088]
2026-01-20 16:20:53,047 - DEBUG - integration_test - Step 70: Using propagated spline 19.8000 (close to path, dist=0.218m, drift=0.852m)
2026-01-20 16:20:53,048 - DEBUG - integration_test -   Set spline state to 19.8000
2026-01-20 16:20:53,049 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:53,200 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(15.318, 12.208), path_start=(0.000, 0.000), dist=19.587m
2026-01-20 16:20:53,200 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.587m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:53,200 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-20 16:20:53,344 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:53,367 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:53,367 - INFO - integration_test - Warmstart k=0: x0=15.31778112030024 , y0=12.207558327351851 , psi0=0.5769312657329557 , v0=1.9999768816618892 , spline0=19.799980883241435 , a0=0.0 , w0=0.0
2026-01-20 16:20:53,367 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:53,369 - INFO - integration_test - Dyn residual k=0: pred=[15.485407272373608, 12.316647962115635, 0.5769312657329557, 1.9999768816618892, 19.999978571407624], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.485407272373608, 12.316647962115635, 0.5769312657329557, 1.9999768816618892, 19.999978571407624], res_norm=2.821e+01
2026-01-20 16:20:53,369 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:53,370 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:53,384 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,589 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,608 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,649 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,668 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,708 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,727 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,766 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,785 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,825 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,844 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,883 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,903 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:53,943 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:53,961 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:54,001 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:54,020 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:54,061 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:54,079 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:54,119 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:54,139 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:54,178 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:54,989 - INFO - integration_test - Step 70: MPC solve successful
2026-01-20 16:20:55,098 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.800)
2026-01-20 16:20:55,098 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:55,098 - INFO - integration_test - === Applying control at step 70 ===
2026-01-20 16:20:55,098 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195908836, 'w': -0.21739330424029205}
2026-01-20 16:20:55,098 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:55,098 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:55,099 - INFO - integration_test - Step 70 completed in 2.053s
2026-01-20 16:20:55,159 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-20 16:20:55,163 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[15.49503925 12.32014984  0.55519194  2.19997688 20.01997857]
2026-01-20 16:20:55,164 - DEBUG - integration_test - Step 71: Using propagated spline 20.0200 (close to path, dist=0.112m, drift=0.560m)
2026-01-20 16:20:55,164 - DEBUG - integration_test -   Set spline state to 20.0200
2026-01-20 16:20:55,165 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:55,316 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(15.495, 12.320), path_start=(0.000, 0.000), dist=19.796m
2026-01-20 16:20:55,316 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.796m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:55,316 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-20 16:20:55,462 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:55,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:55,486 - INFO - integration_test - Warmstart k=0: x0=15.495039253044567 , y0=12.320149836969572 , psi0=0.5551919353089265 , v0=2.1999768836209777 , spline0=20.019978571603534 , a0=0.0 , w0=0.0
2026-01-20 16:20:55,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:55,487 - INFO - integration_test - Dyn residual k=0: pred=[15.681993131446246, 12.436112030098354, 0.5551919353089265, 2.1999768836209777, 20.239976259965633], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.681993131446246, 12.436112030098354, 0.5551919353089265, 2.1999768836209777, 20.239976259965633], res_norm=2.855e+01
2026-01-20 16:20:55,488 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:55,489 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:55,503 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:55,712 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:55,731 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:55,772 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:55,793 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:55,832 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:55,851 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:55,891 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:55,909 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:55,950 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:55,969 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:56,010 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:56,028 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:56,068 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:56,087 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:56,127 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:56,146 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:56,186 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:56,204 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:56,244 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:56,262 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:56,301 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:56,966 - INFO - integration_test - Step 71: MPC solve successful
2026-01-20 16:20:57,080 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.020)
2026-01-20 16:20:57,080 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:57,080 - INFO - integration_test - === Applying control at step 71 ===
2026-01-20 16:20:57,080 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199960155, 'w': 0.002006133403450048}
2026-01-20 16:20:57,080 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:57,080 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:57,081 - INFO - integration_test - Step 71 completed in 1.919s
2026-01-20 16:20:57,141 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-20 16:20:57,145 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[15.69047879 12.44140298  0.55539255  2.39997689 20.25997626]
2026-01-20 16:20:57,146 - DEBUG - integration_test - Step 72: Using propagated spline 20.2600 (close to path, dist=0.150m, drift=0.800m)
2026-01-20 16:20:57,146 - DEBUG - integration_test -   Set spline state to 20.2600
2026-01-20 16:20:57,147 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:57,299 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(15.690, 12.441), path_start=(0.000, 0.000), dist=20.024m
2026-01-20 16:20:57,299 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.024m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:57,299 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-20 16:20:57,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:57,467 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:57,468 - INFO - integration_test - Warmstart k=0: x0=15.690478786302315 , y0=12.441402982745638 , psi0=0.5553925486492716 , v0=2.399976885620579 , spline0=20.259976260165594 , a0=0.0 , w0=0.0
2026-01-20 16:20:57,468 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:57,469 - INFO - integration_test - Dyn residual k=0: pred=[15.89440326802733, 12.56794821682545, 0.5553925486492716, 2.399976885620579, 20.499973948727654], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.89440326802733, 12.56794821682545, 0.5553925486492716, 2.399976885620579, 20.499973948727654], res_norm=2.893e+01
2026-01-20 16:20:57,469 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:57,470 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:57,484 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:57,693 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:57,713 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:57,754 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:57,772 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:57,813 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:57,833 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:57,873 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:57,891 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:57,931 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:57,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:57,990 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:58,008 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:58,049 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:58,067 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:58,106 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:58,125 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:58,166 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:58,185 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:58,224 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:58,243 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:58,282 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:58,875 - INFO - integration_test - Step 72: MPC solve successful
2026-01-20 16:20:58,981 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.260)
2026-01-20 16:20:58,981 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:20:58,982 - INFO - integration_test - === Applying control at step 72 ===
2026-01-20 16:20:58,982 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194995518, 'w': -0.056585377435153954}
2026-01-20 16:20:58,982 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:20:58,982 - INFO - integration_test -   Planner output success: True
2026-01-20 16:20:58,984 - INFO - integration_test - Step 72 completed in 1.839s
2026-01-20 16:20:59,077 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-20 16:20:59,089 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[15.90327697 12.57261126  0.54973401  2.59997689 20.51997395]
2026-01-20 16:20:59,090 - DEBUG - integration_test - Step 73: Using propagated spline 20.5200 (close to path, dist=0.139m, drift=0.547m)
2026-01-20 16:20:59,090 - DEBUG - integration_test -   Set spline state to 20.5200
2026-01-20 16:20:59,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:59,280 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(15.903, 12.573), path_start=(0.000, 0.000), dist=20.273m
2026-01-20 16:20:59,280 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.273m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:20:59,280 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-20 16:20:59,423 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:20:59,447 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:20:59,447 - INFO - integration_test - Warmstart k=0: x0=15.903276967335245 , y0=12.572611259201667 , psi0=0.5497340109057561 , v0=2.5999768875705342 , spline0=20.519973948922647 , a0=0.0 , w0=0.0
2026-01-20 16:20:59,447 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:20:59,448 - INFO - integration_test - Dyn residual k=0: pred=[16.124967512083302, 12.708449768205263, 0.5497340109057561, 2.5999768875705342, 20.7799716376797], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.124967512083302, 12.708449768205263, 0.5497340109057561, 2.5999768875705342, 20.7799716376797], res_norm=2.933e+01
2026-01-20 16:20:59,449 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:59,449 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:20:59,464 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:59,675 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:59,694 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:59,735 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:59,754 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:59,794 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:59,812 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:59,853 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:59,872 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:59,911 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:59,930 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:20:59,970 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:20:59,989 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:00,029 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:00,048 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:00,087 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:00,105 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:00,145 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:00,164 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:00,203 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:00,222 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:00,262 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:00,912 - INFO - integration_test - Step 73: MPC solve successful
2026-01-20 16:21:01,020 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.520)
2026-01-20 16:21:01,021 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:01,021 - INFO - integration_test - === Applying control at step 73 ===
2026-01-20 16:21:01,021 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199960635, 'w': -0.04449854637514103}
2026-01-20 16:21:01,021 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:01,021 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:01,022 - INFO - integration_test - Step 73 completed in 1.933s
2026-01-20 16:21:01,082 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-20 16:21:01,082 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[16.1338111  12.71315536  0.54528416  2.79997689 20.79997164]
2026-01-20 16:21:01,083 - DEBUG - integration_test - Step 74: Using propagated spline 20.8000 (close to path, dist=0.158m, drift=0.827m)
2026-01-20 16:21:01,083 - DEBUG - integration_test -   Set spline state to 20.8000
2026-01-20 16:21:01,084 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:01,240 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(16.134, 12.713), path_start=(0.000, 0.000), dist=20.541m
2026-01-20 16:21:01,240 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.541m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:01,240 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-20 16:21:01,382 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:01,406 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:01,406 - INFO - integration_test - Warmstart k=0: x0=16.133811102979347 , y0=12.713155359240762 , psi0=0.545284156268242 , v0=2.7999768895701407 , spline0=20.79997163787966 , a0=0.0 , w0=0.0
2026-01-20 16:21:01,406 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:01,407 - INFO - integration_test - Dyn residual k=0: pred=[16.37320351154646, 12.85837925721112, 0.545284156268242, 2.7999768895701407, 21.079969326836675], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.37320351154646, 12.85837925721112, 0.545284156268242, 2.7999768895701407, 21.079969326836675], res_norm=2.976e+01
2026-01-20 16:21:01,408 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:01,409 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:01,424 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,629 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,648 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,688 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,707 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,747 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,766 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,806 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,824 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,864 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,883 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,923 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,942 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:01,981 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:01,999 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:02,040 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:02,058 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:02,097 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:02,116 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:02,157 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:02,177 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:02,225 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:02,844 - INFO - integration_test - Step 74: MPC solve successful
2026-01-20 16:21:03,164 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=20.800)
2026-01-20 16:21:03,164 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:03,164 - INFO - integration_test - === Applying control at step 74 ===
2026-01-20 16:21:03,165 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199935966, 'w': -0.04823118155611851}
2026-01-20 16:21:03,165 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:03,165 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:03,166 - INFO - integration_test - Step 74 completed in 2.084s
2026-01-20 16:21:03,227 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-20 16:21:03,231 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[16.38211923 12.86296048  0.54046104  2.99997689 21.09996933]
2026-01-20 16:21:03,232 - DEBUG - integration_test - Step 75: Using propagated spline 21.1000 (close to path, dist=0.099m, drift=0.615m)
2026-01-20 16:21:03,232 - DEBUG - integration_test -   Set spline state to 21.1000
2026-01-20 16:21:03,234 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:03,389 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(16.382, 12.863), path_start=(0.000, 0.000), dist=20.829m
2026-01-20 16:21:03,389 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.829m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:03,389 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-20 16:21:03,532 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:03,556 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:03,556 - INFO - integration_test - Warmstart k=0: x0=16.38211922559358 , y0=12.862960475770286 , psi0=0.5404610381126301 , v0=2.9999768915695 , spline0=21.09996932703661 , a0=0.0 , w0=0.0
2026-01-20 16:21:03,556 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:03,557 - INFO - integration_test - Dyn residual k=0: pred=[16.63935871029021, 13.017318698785848, 0.5404610381126301, 2.9999768915695, 21.39996701619356], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.63935871029021, 13.017318698785848, 0.5404610381126301, 2.9999768915695, 21.39996701619356], res_norm=3.023e+01
2026-01-20 16:21:03,558 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:03,559 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:03,573 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:03,784 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:03,804 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:03,846 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:03,867 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:03,909 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:03,928 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:03,968 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:03,987 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,027 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,045 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,085 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,103 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,143 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,161 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,201 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,219 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,260 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,280 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,320 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,339 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:04,378 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:04,968 - INFO - integration_test - Step 75: MPC solve successful
2026-01-20 16:21:05,079 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.100)
2026-01-20 16:21:05,079 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:05,079 - INFO - integration_test - === Applying control at step 75 ===
2026-01-20 16:21:05,079 - INFO - integration_test -   Control dict from planner: {'a': 0.0002313809348300534, 'w': -0.020455718806549998}
2026-01-20 16:21:05,079 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:05,079 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:05,081 - INFO - integration_test - Step 75 completed in 1.850s
2026-01-20 16:21:05,144 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-20 16:21:05,145 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[16.6395174  13.01705608  0.53841547  3.00000003 21.39996933]
2026-01-20 16:21:05,146 - DEBUG - integration_test - Step 76: Using propagated spline 21.4000 (close to path, dist=0.232m, drift=0.915m)
2026-01-20 16:21:05,146 - DEBUG - integration_test -   Set spline state to 21.4000
2026-01-20 16:21:05,147 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:05,301 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(16.640, 13.017), path_start=(0.000, 0.000), dist=21.126m
2026-01-20 16:21:05,301 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.126m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:05,301 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-20 16:21:05,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:05,471 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:05,471 - INFO - integration_test - Warmstart k=0: x0=16.639517399081768 , y0=13.01705608421117 , psi0=0.5384154662319751 , v0=3.000000029662983 , spline0=21.39996933000291 , a0=0.0 , w0=0.0
2026-01-20 16:21:05,471 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:05,472 - INFO - integration_test - Dyn residual k=0: pred=[16.897074082663927, 13.170888969258352, 0.5384154662319751, 3.000000029662983, 21.69996933296921], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.897074082663927, 13.170888969258352, 0.5384154662319751, 3.000000029662983, 21.69996933296921], res_norm=3.065e+01
2026-01-20 16:21:05,472 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:05,473 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:05,487 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:05,693 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:05,713 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:05,755 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:05,774 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:05,814 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:05,833 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:05,873 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:05,891 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:05,931 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:05,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:05,990 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:06,009 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:06,050 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:06,070 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:06,114 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:06,134 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:06,180 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:06,201 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:06,246 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:06,266 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:06,309 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:06,929 - INFO - integration_test - Step 76: MPC solve successful
2026-01-20 16:21:07,090 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.400)
2026-01-20 16:21:07,091 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:07,091 - INFO - integration_test - === Applying control at step 76 ===
2026-01-20 16:21:07,091 - INFO - integration_test -   Control dict from planner: {'a': -1.1377042709318724e-06, 'w': -0.07809644493090677}
2026-01-20 16:21:07,091 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:07,091 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:07,092 - INFO - integration_test - Step 76 completed in 1.947s
2026-01-20 16:21:07,166 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-20 16:21:07,167 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[16.89767215 13.16988169  0.53060582  2.99999992 21.69996932]
2026-01-20 16:21:07,168 - DEBUG - integration_test - Step 77: Using propagated spline 21.7000 (close to path, dist=0.066m, drift=0.703m)
2026-01-20 16:21:07,168 - DEBUG - integration_test -   Set spline state to 21.7000
2026-01-20 16:21:07,170 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:07,346 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(16.898, 13.170), path_start=(0.000, 0.000), dist=21.424m
2026-01-20 16:21:07,346 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.424m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:07,346 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-20 16:21:07,489 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:07,512 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:07,513 - INFO - integration_test - Warmstart k=0: x0=16.897672146704988 , y0=13.16988169469032 , psi0=0.5306058217388845 , v0=2.999999915892556 , spline0=21.699969321592167 , a0=0.0 , w0=0.0
2026-01-20 16:21:07,513 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:07,513 - INFO - integration_test - Dyn residual k=0: pred=[17.1564223341843, 13.321698477138684, 0.5306058217388845, 2.999999915892556, 21.999969313181424], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.1564223341843, 13.321698477138684, 0.5306058217388845, 2.999999915892556, 21.999969313181424], res_norm=3.107e+01
2026-01-20 16:21:07,514 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:07,515 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:07,530 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:07,736 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:07,755 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:07,795 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:07,814 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:07,855 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:07,873 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:07,913 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:07,932 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:07,972 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:07,990 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:08,030 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:08,049 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:08,089 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:08,107 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:08,147 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:08,167 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:08,207 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:08,226 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:08,266 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:08,285 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:08,325 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:08,897 - INFO - integration_test - Step 77: MPC solve successful
2026-01-20 16:21:09,019 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=21.700)
2026-01-20 16:21:09,019 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:09,019 - INFO - integration_test - === Applying control at step 77 ===
2026-01-20 16:21:09,019 - INFO - integration_test -   Control dict from planner: {'a': 1.115558986238214e-06, 'w': 0.030726382607374758}
2026-01-20 16:21:09,019 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:09,019 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:09,021 - INFO - integration_test - Step 77 completed in 1.854s
2026-01-20 16:21:09,084 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-20 16:21:09,089 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[17.15618869 13.32209576  0.53367846  3.00000003 21.99996932]
2026-01-20 16:21:09,090 - DEBUG - integration_test - Step 78: Using propagated spline 22.0000 (close to path, dist=0.211m, drift=0.491m)
2026-01-20 16:21:09,090 - DEBUG - integration_test -   Set spline state to 22.0000
2026-01-20 16:21:09,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:09,247 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(17.156, 13.322), path_start=(0.000, 0.000), dist=21.721m
2026-01-20 16:21:09,247 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=21.721m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:09,247 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-20 16:21:09,390 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:09,415 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:09,415 - INFO - integration_test - Warmstart k=0: x0=17.15618869299789 , y0=13.322095763635197 , psi0=0.5336784599996219 , v0=3.0000000274484546 , spline0=21.999969324337012 , a0=0.0 , w0=0.0
2026-01-20 16:21:09,415 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:09,416 - INFO - integration_test - Dyn residual k=0: pred=[17.414471191318157, 13.47470687957486, 0.5336784599996219, 3.0000000274484546, 22.299969327081858], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.414471191318157, 13.47470687957486, 0.5336784599996219, 3.0000000274484546, 22.299969327081858], res_norm=3.149e+01
2026-01-20 16:21:09,416 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:09,417 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:09,433 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,641 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:09,661 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,701 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:09,721 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,761 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:09,779 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,820 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:09,839 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,878 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:09,897 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,937 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:09,955 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:09,996 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:10,015 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:10,056 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:10,074 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:10,114 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:10,134 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:10,174 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:10,192 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:10,233 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:10,899 - INFO - integration_test - Step 78: MPC solve successful
2026-01-20 16:21:11,024 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.000)
2026-01-20 16:21:11,024 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:11,024 - INFO - integration_test - === Applying control at step 78 ===
2026-01-20 16:21:11,024 - INFO - integration_test -   Control dict from planner: {'a': 2.548154387562021e-08, 'w': -0.024000527961210834}
2026-01-20 16:21:11,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:11,024 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:11,025 - INFO - integration_test - Step 78 completed in 1.936s
2026-01-20 16:21:11,082 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-20 16:21:11,087 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[17.41465408 13.47439679  0.53127841  3.00000003 22.29996933]
2026-01-20 16:21:11,088 - DEBUG - integration_test - Step 79: Using propagated spline 22.3000 (close to path, dist=0.119m, drift=0.791m)
2026-01-20 16:21:11,088 - DEBUG - integration_test -   Set spline state to 22.3000
2026-01-20 16:21:11,089 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:11,257 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(17.415, 13.474), path_start=(0.000, 0.000), dist=22.019m
2026-01-20 16:21:11,257 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.019m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:11,257 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-20 16:21:11,476 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:11,505 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:11,505 - INFO - integration_test - Warmstart k=0: x0=17.414654080745773 , y0=13.474396787459064 , psi0=0.5312784072035008 , v0=3.000000029996609 , spline0=22.299969327336672 , a0=0.0 , w0=0.0
2026-01-20 16:21:11,505 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:11,506 - INFO - integration_test - Dyn residual k=0: pred=[17.673302109783656, 13.626387572951524, 0.5312784072035008, 3.000000029996609, 22.599969330336332], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.673302109783656, 13.626387572951524, 0.5312784072035008, 3.000000029996609, 22.599969330336332], res_norm=3.191e+01
2026-01-20 16:21:11,507 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:11,508 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:11,523 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:11,737 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:11,758 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:11,803 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:11,824 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:11,866 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:11,888 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:11,930 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:11,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:11,991 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:12,010 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:12,051 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:12,071 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:12,111 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:12,133 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:12,174 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:12,193 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:12,235 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:12,255 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:12,296 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:12,321 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:12,364 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:13,742 - INFO - integration_test - Step 79: MPC solve successful
2026-01-20 16:21:13,859 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.300)
2026-01-20 16:21:13,859 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:13,859 - INFO - integration_test - === Applying control at step 79 ===
2026-01-20 16:21:13,859 - INFO - integration_test -   Control dict from planner: {'a': -1.2257326589431715e-05, 'w': -0.003998819955660508}
2026-01-20 16:21:13,859 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:13,859 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:13,860 - INFO - integration_test - Step 79 completed in 2.774s
2026-01-20 16:21:13,924 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-20 16:21:13,925 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[17.67333244 13.62633582  0.53087853  2.9999988  22.59996921]
2026-01-20 16:21:13,925 - DEBUG - integration_test - Step 80: Using propagated spline 22.6000 (close to path, dist=0.130m, drift=0.579m)
2026-01-20 16:21:13,925 - DEBUG - integration_test -   Set spline state to 22.6000
2026-01-20 16:21:13,926 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:14,081 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(17.673, 13.626), path_start=(0.000, 0.000), dist=22.316m
2026-01-20 16:21:14,081 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=22.316m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:14,081 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-20 16:21:14,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:14,255 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:14,255 - INFO - integration_test - Warmstart k=0: x0=17.67333243923218 , y0=13.626335823520593 , psi0=0.5308785252079348 , v0=2.9999988042639503 , spline0=22.599969207763067 , a0=0.0 , w0=0.0
2026-01-20 16:21:14,255 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:14,256 - INFO - integration_test - Dyn residual k=0: pred=[17.932041120264817, 13.778223106115961, 0.5308785252079348, 2.9999988042639503, 22.89996908818946], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.932041120264817, 13.778223106115961, 0.5308785252079348, 2.9999988042639503, 22.89996908818946], res_norm=3.233e+01
2026-01-20 16:21:14,256 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:14,257 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:14,272 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,481 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,501 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,543 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,603 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,624 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,665 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,683 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,725 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,743 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,783 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,802 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,843 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,861 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,902 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,922 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:14,964 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:14,984 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:15,029 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:15,049 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:15,092 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:15,788 - INFO - integration_test - Step 80: MPC solve successful
2026-01-20 16:21:15,902 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.600)
2026-01-20 16:21:15,903 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:15,903 - INFO - integration_test - === Applying control at step 80 ===
2026-01-20 16:21:15,903 - INFO - integration_test -   Control dict from planner: {'a': 1.2257353961281355e-05, 'w': -0.006361867563146227}
2026-01-20 16:21:15,903 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:15,903 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:15,904 - INFO - integration_test - Step 80 completed in 1.980s
2026-01-20 16:21:15,963 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-20 16:21:15,968 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[17.93208947 13.77814083  0.53024234  3.00000003 22.89996921]
2026-01-20 16:21:15,969 - DEBUG - integration_test - Step 81: Using propagated spline 22.9000 (close to path, dist=0.197m, drift=0.879m)
2026-01-20 16:21:15,969 - DEBUG - integration_test -   Set spline state to 22.9000
2026-01-20 16:21:15,971 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:16,127 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(17.932, 13.778), path_start=(0.000, 0.000), dist=22.614m
2026-01-20 16:21:16,127 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=22.614m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:16,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-20 16:21:16,274 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:16,299 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:16,299 - INFO - integration_test - Warmstart k=0: x0=17.93208947001523 , y0=13.778140833361311 , psi0=0.5302423384516202 , v0=3.0000000299993466 , spline0=22.899969210763 , a0=0.0 , w0=0.0
2026-01-20 16:21:16,299 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:16,300 - INFO - integration_test - Dyn residual k=0: pred=[18.19089483310724, 13.929863560184861, 0.5302423384516202, 3.0000000299993466, 23.199969213762934], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.19089483310724, 13.929863560184861, 0.5302423384516202, 3.0000000299993466, 23.199969213762934], res_norm=3.275e+01
2026-01-20 16:21:16,300 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:16,301 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:16,316 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,526 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,548 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,589 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,608 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,649 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,668 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,707 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,726 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,766 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,785 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,825 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,844 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,885 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,903 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:16,944 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:16,963 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:17,004 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:17,024 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:17,064 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:17,083 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:17,123 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:17,840 - INFO - integration_test - Step 81: MPC solve successful
2026-01-20 16:21:17,950 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=22.900)
2026-01-20 16:21:17,951 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:17,951 - INFO - integration_test - === Applying control at step 81 ===
2026-01-20 16:21:17,951 - INFO - integration_test -   Control dict from planner: {'a': -1.6680987910245128e-06, 'w': -0.01261876873348334}
2026-01-20 16:21:17,951 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:17,951 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:17,953 - INFO - integration_test - Step 81 completed in 1.985s
2026-01-20 16:21:18,011 - INFO - integration_test - Step 82 (contouring until path end)
2026-01-20 16:21:18,015 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[18.19099048 13.92970023  0.52898046  2.99999986 23.1999692 ]
2026-01-20 16:21:18,016 - DEBUG - integration_test - Step 82: Using propagated spline 23.2000 (close to path, dist=0.065m, drift=0.667m)
2026-01-20 16:21:18,016 - DEBUG - integration_test -   Set spline state to 23.2000
2026-01-20 16:21:18,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:18,170 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(18.191, 13.930), path_start=(0.000, 0.000), dist=22.912m
2026-01-20 16:21:18,170 - WARNING - integration_test - Step 82: Vehicle is far from path start (dist=22.912m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:18,170 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2026-01-20 16:21:18,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:18,344 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:18,344 - INFO - integration_test - Warmstart k=0: x0=18.19099048491179 , y0=13.92970022547773 , psi0=0.5289804615782718 , v0=2.9999998631894673 , spline0=23.19996919708195 , a0=0.0 , w0=0.0
2026-01-20 16:21:18,344 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:18,345 - INFO - integration_test - Dyn residual k=0: pred=[18.449987082899902, 14.081096242670894, 0.5289804615782718, 2.9999998631894673, 23.499969183400896], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.449987082899902, 14.081096242670894, 0.5289804615782718, 2.9999998631894673, 23.499969183400896], res_norm=3.317e+01
2026-01-20 16:21:18,345 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:18,346 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:18,360 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,566 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,586 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,628 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,648 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,688 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,706 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,746 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,765 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,805 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,823 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,863 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,882 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,922 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:18,941 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:18,982 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:19,001 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:19,042 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:19,061 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:19,101 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:19,120 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:19,161 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:19,828 - INFO - integration_test - Step 82: MPC solve successful
2026-01-20 16:21:19,952 - INFO - integration_test - Step 82: Computed 6 numeric contouring constraints for visualization (s=23.200)
2026-01-20 16:21:19,952 - DEBUG - integration_test - Step 82: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:19,952 - INFO - integration_test - === Applying control at step 82 ===
2026-01-20 16:21:19,952 - INFO - integration_test -   Control dict from planner: {'a': 1.3686853751532394e-06, 'w': -0.05770254214799595}
2026-01-20 16:21:19,952 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:19,952 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:19,954 - INFO - integration_test - Step 82 completed in 1.939s
2026-01-20 16:21:20,012 - INFO - integration_test - Step 83 (contouring until path end)
2026-01-20 16:21:20,015 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[18.45042245 14.08034817  0.52321021  3.         23.4999692 ]
2026-01-20 16:21:20,015 - DEBUG - integration_test - Step 83: Using propagated spline 23.5000 (close to path, dist=0.245m, drift=0.455m)
2026-01-20 16:21:20,015 - DEBUG - integration_test -   Set spline state to 23.5000
2026-01-20 16:21:20,017 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:20,171 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(18.450, 14.080), path_start=(0.000, 0.000), dist=23.209m
2026-01-20 16:21:20,172 - WARNING - integration_test - Step 83: Vehicle is far from path start (dist=23.209m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:20,172 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2026-01-20 16:21:20,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:20,342 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:20,342 - INFO - integration_test - Warmstart k=0: x0=18.450422447113635 , y0=14.08034816992813 , psi0=0.5232102073634722 , v0=3.0000000000580047 , spline0=23.49996919708775 , a0=0.0 , w0=0.0
2026-01-20 16:21:20,342 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:20,343 - INFO - integration_test - Dyn residual k=0: pred=[18.710288333874185, 14.230247205620934, 0.5232102073634722, 3.0000000000580047, 23.799969197093553], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.710288333874185, 14.230247205620934, 0.5232102073634722, 3.0000000000580047, 23.799969197093553], res_norm=3.359e+01
2026-01-20 16:21:20,344 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:20,344 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:20,359 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,565 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,585 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,627 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,686 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,704 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,745 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,764 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,805 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,824 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,864 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,884 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,924 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:20,943 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:20,983 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:21,001 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:21,042 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:21,061 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:21,101 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:21,119 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:21,160 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:21,966 - INFO - integration_test - Step 83: MPC solve successful
2026-01-20 16:21:22,083 - INFO - integration_test - Step 83: Computed 6 numeric contouring constraints for visualization (s=23.500)
2026-01-20 16:21:22,083 - DEBUG - integration_test - Step 83: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:22,083 - INFO - integration_test - === Applying control at step 83 ===
2026-01-20 16:21:22,083 - INFO - integration_test -   Control dict from planner: {'a': 2.9890276953941747e-07, 'w': -0.04510504038059099}
2026-01-20 16:21:22,083 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:22,083 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:22,085 - INFO - integration_test - Step 83 completed in 2.071s
2026-01-20 16:21:22,147 - INFO - integration_test - Step 84 (contouring until path end)
2026-01-20 16:21:22,148 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[18.71062551 14.22966064  0.5186997   3.00000003 23.7999692 ]
2026-01-20 16:21:22,149 - DEBUG - integration_test - Step 84: Using propagated spline 23.8000 (close to path, dist=0.083m, drift=0.755m)
2026-01-20 16:21:22,149 - DEBUG - integration_test -   Set spline state to 23.8000
2026-01-20 16:21:22,150 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:22,309 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(18.711, 14.230), path_start=(0.000, 0.000), dist=23.507m
2026-01-20 16:21:22,309 - WARNING - integration_test - Step 84: Vehicle is far from path start (dist=23.507m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:22,309 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2026-01-20 16:21:22,456 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:22,481 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:22,481 - INFO - integration_test - Warmstart k=0: x0=18.710625513555083 , y0=14.22966063601832 , psi0=0.5186997033254132 , v0=3.0000000299482816 , spline0=23.79996920008258 , a0=0.0 , w0=0.0
2026-01-20 16:21:22,481 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:22,482 - INFO - integration_test - Dyn residual k=0: pred=[18.97116487738938, 14.378386026216889, 0.5186997033254132, 3.0000000299482816, 24.099969203077407], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.97116487738938, 14.378386026216889, 0.5186997033254132, 3.0000000299482816, 24.099969203077407], res_norm=3.401e+01
2026-01-20 16:21:22,482 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:22,483 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:22,498 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:22,704 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:22,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:22,764 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:22,783 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:22,824 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:22,843 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:22,883 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:22,902 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:22,944 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:22,963 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:23,003 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:23,025 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:23,065 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:23,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:23,125 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:23,144 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:23,185 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:23,204 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:23,246 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:23,265 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:23,305 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:24,443 - INFO - integration_test - Step 84: MPC solve successful
2026-01-20 16:21:24,592 - INFO - integration_test - Step 84: Computed 6 numeric contouring constraints for visualization (s=23.800)
2026-01-20 16:21:24,593 - DEBUG - integration_test - Step 84: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:24,593 - INFO - integration_test - === Applying control at step 84 ===
2026-01-20 16:21:24,593 - INFO - integration_test -   Control dict from planner: {'a': -1.9999863338992505, 'w': -0.10115366268798122}
2026-01-20 16:21:24,593 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:24,593 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:24,594 - INFO - integration_test - Step 84 completed in 2.446s
2026-01-20 16:21:24,655 - INFO - integration_test - Step 85 (contouring until path end)
2026-01-20 16:21:24,660 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[18.96319484 14.37216699  0.50858434  2.8000014  24.07996934]
2026-01-20 16:21:24,661 - DEBUG - integration_test - Step 85: Using propagated spline 24.0800 (close to path, dist=0.169m, drift=0.523m)
2026-01-20 16:21:24,661 - DEBUG - integration_test -   Set spline state to 24.0800
2026-01-20 16:21:24,662 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:24,815 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(18.963, 14.372), path_start=(0.000, 0.000), dist=23.794m
2026-01-20 16:21:24,815 - WARNING - integration_test - Step 85: Vehicle is far from path start (dist=23.794m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:21:24,815 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2026-01-20 16:21:24,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:21:24,991 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:21:24,991 - INFO - integration_test - Warmstart k=0: x0=18.963194839136424 , y0=14.372166987925496 , psi0=0.508584337056615 , v0=2.800001396558357 , spline0=24.079969339738415 , a0=0.0 , w0=0.0
2026-01-20 16:21:24,991 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:21:24,992 - INFO - integration_test - Dyn residual k=0: pred=[19.20775668476599, 14.508510604826135, 0.508584337056615, 2.800001396558357, 24.359969479394252], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.20775668476599, 14.508510604826135, 0.508584337056615, 2.800001396558357, 24.359969479394252], res_norm=3.436e+01
2026-01-20 16:21:24,993 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:24,994 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:21:25,008 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,216 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,238 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,278 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,299 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,340 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,359 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,398 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,420 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,462 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,480 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,520 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,539 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,580 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,598 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,638 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,657 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,697 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,715 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,756 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:25,774 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:21:25,814 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:21:26,504 - INFO - integration_test - Step 85: MPC solve successful
2026-01-20 16:21:26,873 - INFO - integration_test - Step 85: Computed 6 numeric contouring constraints for visualization (s=24.080)
2026-01-20 16:21:26,874 - DEBUG - integration_test - Step 85: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:21:26,874 - INFO - integration_test - === Applying control at step 85 ===
2026-01-20 16:21:26,874 - INFO - integration_test -   Control dict from planner: {'a': -2.000000002362622, 'w': -0.7999999743133489}
2026-01-20 16:21:26,874 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:21:26,874 - INFO - integration_test -   Planner output success: True
2026-01-20 16:21:26,875 - INFO - integration_test - Goal reached at step 85!
2026-01-20 16:21:26,875 - INFO - integration_test - Step 85 completed in 2.215s
2026-01-20 16:21:26,934 - INFO - integration_test - Goal reached at step 85, added 3 extra frames for visualization
2026-01-20 16:21:26,942 - INFO - integration_test - Saving test results...
2026-01-20 16:21:26,943 - INFO - integration_test - Saved 90 vehicle states to test_outputs/20260120_161803_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-20 16:21:26,943 - INFO - integration_test - Saved obstacle summary to test_outputs/20260120_161803_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-20 16:21:26,943 - INFO - integration_test - Saved 97 states for obstacle 0 to test_outputs/20260120_161803_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-20 16:21:26,944 - INFO - integration_test - Saved 97 states for obstacle 1 to test_outputs/20260120_161803_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-20 16:21:26,944 - INFO - integration_test - Saved state history: 90 vehicle states, 2 obstacles
2026-01-20 16:21:26,944 - INFO - integration_test - Creating animation...
2026-01-20 16:21:26,982 - DEBUG - integration_test - Creating animation with 90 frames (range: 0 to 89)
2026-01-20 16:21:26,983 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-20 16:21:27,131 - INFO - integration_test - Frame 0: Safe Horizon module has 317 scenarios after update
2026-01-20 16:21:27,131 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-20 16:21:27,131 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:21:27,154 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-20 16:21:27,154 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-20 16:21:27,301 - INFO - integration_test - Frame 0: Safe Horizon module has 315 scenarios after update
2026-01-20 16:21:27,301 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-20 16:21:27,301 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:21:27,323 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-20 16:21:27,434 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-20 16:21:27,625 - INFO - integration_test - Frame 1: Safe Horizon module has 316 scenarios after update
2026-01-20 16:21:27,625 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-20 16:21:27,625 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:21:27,646 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-20 16:21:27,686 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-20 16:21:27,837 - INFO - integration_test - Frame 2: Safe Horizon module has 314 scenarios after update
2026-01-20 16:21:27,837 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-20 16:21:27,837 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:21:27,856 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-20 16:21:52,905 - INFO - integration_test - Saved animation with 90 frames at 10.00 fps to test_outputs/20260120_161803_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 9.00s, size: 1287297 bytes)
2026-01-20 16:21:52,949 - INFO - integration_test - Animation created successfully
2026-01-20 16:21:52,951 - INFO - integration_test - Test completed successfully
