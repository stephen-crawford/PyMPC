2026-01-20 16:36:22,400 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-20 16:36:22,400 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-20 16:36:22,400 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-20 16:36:22,400 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-20 16:36:22,400 - INFO - integration_test - Creating objective module: contouring
2026-01-20 16:36:22,407 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-20 16:36:22,407 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-20 16:36:22,407 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-20 16:36:22,416 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-20 16:36:22,416 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-20 16:36:22,421 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-20 16:36:22,421 - INFO - integration_test - Created 2 constraint module(s)
2026-01-20 16:36:22,437 - INFO - integration_test - Setting solver on all modules...
2026-01-20 16:36:22,437 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-20 16:36:22,437 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-20 16:36:22,437 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-20 16:36:22,437 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-20 16:36:22,437 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-20 16:36:22,438 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-20 16:36:22,438 - INFO - integration_test - Placing obstacles within reference path boundaries
2026-01-20 16:36:22,438 - INFO - integration_test - Obstacle 0: s=10.04, pos=(6.02, 9.00), lateral_offset=2.68m, vel=(0.47, 0.37)
2026-01-20 16:36:22,438 - INFO - integration_test - Obstacle 1: s=21.33, pos=(18.36, 11.00), lateral_offset=-2.68m, vel=(-0.69, -0.41)
2026-01-20 16:36:22,439 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-20 16:36:22,439 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-20 16:36:22,439 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-20 16:36:22,439 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-20 16:36:22,439 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-20 16:36:22,439 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-20 16:36:22,439 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-20 16:36:22,440 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-20 16:36:22,440 - INFO - integration_test - Added spline variable: 0.0000
2026-01-20 16:36:22,440 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-20 16:36:22,440 - INFO - integration_test - Auto-calculated timeout: 255s for 150 steps
2026-01-20 16:36:22,440 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-20 16:36:22,440 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-20 16:36:22,440 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-20 16:36:22,441 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-20 16:36:22,441 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:22,455 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-20 16:36:22,456 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-20 16:36:22,597 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:22,621 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:22,621 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-20 16:36:22,621 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:22,622 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-20 16:36:22,623 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:22,624 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:22,638 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:22,842 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:22,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:22,901 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:22,919 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:22,958 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:22,979 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,026 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,049 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,099 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,123 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,177 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,199 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,245 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,265 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,312 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,334 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,385 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,407 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,451 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:23,471 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:23,516 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:24,454 - INFO - integration_test - Step 0: MPC solve successful
2026-01-20 16:36:24,701 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-20 16:36:24,701 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:24,701 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-20 16:36:24,701 - INFO - integration_test - === Applying control at step 0 ===
2026-01-20 16:36:24,701 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000093752104, 'w': 0.7999998973216994}
2026-01-20 16:36:24,701 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:24,701 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:24,702 - INFO - integration_test - Step 0 completed in 2.262s
2026-01-20 16:36:24,758 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-20 16:36:24,759 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453084 0.07999999 1.2        0.12      ]
2026-01-20 16:36:24,759 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-20 16:36:24,759 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-20 16:36:24,760 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:24,908 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-20 16:36:24,908 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-20 16:36:25,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:25,085 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:25,085 - INFO - integration_test - Warmstart k=0: x0=0.10987737535945834 , y0=0.004530844474682586 , psi0=0.07999998973216994 , v0=1.2000000009375211 , spline0=0.12000000009375211 , a0=0.0 , w0=0.0
2026-01-20 16:36:25,085 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:25,086 - INFO - integration_test - Dyn residual k=0: pred=[0.229493580307691, 0.014120606530276615, 0.07999998973216994, 1.2000000009375211, 0.24000000018750423], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.229493580307691, 0.014120606530276615, 0.07999998973216994, 1.2000000009375211, 0.24000000018750423], res_norm=1.248e+00
2026-01-20 16:36:25,087 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:25,088 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:25,104 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,337 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,356 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,398 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,417 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,461 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,480 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,520 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,539 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,583 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,603 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,648 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,668 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,715 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,735 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,777 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,836 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,855 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,897 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:25,916 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:25,961 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:26,512 - INFO - integration_test - Step 1: MPC solve successful
2026-01-20 16:36:26,540 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-20 16:36:26,541 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:26,541 - INFO - integration_test - === Applying control at step 1 ===
2026-01-20 16:36:26,541 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195593217, 'w': 0.8000000044313063}
2026-01-20 16:36:26,541 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:26,541 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:26,542 - INFO - integration_test - Step 1 completed in 1.784s
2026-01-20 16:36:26,606 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-20 16:36:26,607 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-20 16:36:26,607 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-20 16:36:26,607 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-20 16:36:26,608 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:26,773 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-20 16:36:26,773 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-20 16:36:26,928 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:26,949 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:26,949 - INFO - integration_test - Warmstart k=0: x0=0.23889212821873906 , y0=0.02022161986889396 , psi0=0.15999999017530053 , v0=1.4000000028934534 , spline0=0.26000000038309745 , a0=0.0 , w0=0.0
2026-01-20 16:36:26,949 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:26,950 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394839611194, 0.04252616748309678, 0.15999999017530053, 1.4000000028934534, 0.4000000006724428], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394839611194, 0.04252616748309678, 0.15999999017530053, 1.4000000028934534, 0.4000000006724428], res_norm=1.513e+00
2026-01-20 16:36:26,951 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:26,951 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:26,965 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,198 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,219 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,266 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,287 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,329 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,348 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,391 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,409 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,449 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,468 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,508 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,527 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,567 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,586 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,626 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,645 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,686 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,704 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,744 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:27,763 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:27,805 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:28,319 - INFO - integration_test - Step 2: MPC solve successful
2026-01-20 16:36:28,350 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-20 16:36:28,351 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:28,351 - INFO - integration_test - === Applying control at step 2 ===
2026-01-20 16:36:28,351 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999942856423, 'w': 0.7999997761300337}
2026-01-20 16:36:28,351 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:28,351 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:28,352 - INFO - integration_test - Step 2 completed in 1.746s
2026-01-20 16:36:28,405 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-20 16:36:28,405 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999997 1.6        0.42      ]
2026-01-20 16:36:28,406 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.316m, drift=0.092m)
2026-01-20 16:36:28,406 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-20 16:36:28,407 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:28,555 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-20 16:36:28,555 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-20 16:36:28,691 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:28,713 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:28,714 - INFO - integration_test - Warmstart k=0: x0=0.38583643619153607 , y0=0.05014471140494661 , psi0=0.2399999677883039 , v0=1.6000000023220176 , spline0=0.4200000006152992 , a0=0.0 , w0=0.0
2026-01-20 16:36:28,714 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:28,715 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505136184959, 0.0881771266823321, 0.2399999677883039, 1.6000000023220176, 0.5800000008475009], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505136184959, 0.0881771266823321, 0.2399999677883039, 1.6000000023220176, 0.5800000008475009], res_norm=1.804e+00
2026-01-20 16:36:28,715 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:28,716 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:28,730 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:28,928 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:28,947 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:28,986 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,004 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,046 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,064 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,103 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,120 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,158 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,176 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,215 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,232 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,270 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,288 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,327 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,344 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,383 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,401 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,439 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:29,456 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:29,497 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,009 - INFO - integration_test - Step 3: MPC solve successful
2026-01-20 16:36:30,041 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-20 16:36:30,041 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:30,041 - INFO - integration_test - === Applying control at step 3 ===
2026-01-20 16:36:30,041 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000191741916, 'w': 0.8000000019230755}
2026-01-20 16:36:30,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:30,041 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:30,042 - INFO - integration_test - Step 3 completed in 1.637s
2026-01-20 16:36:30,091 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-20 16:36:30,093 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999997 1.8        0.6       ]
2026-01-20 16:36:30,094 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.327m, drift=0.088m)
2026-01-20 16:36:30,094 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-20 16:36:30,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:30,242 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-20 16:36:30,242 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-20 16:36:30,383 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:30,406 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:30,406 - INFO - integration_test - Warmstart k=0: x0=0.5491354628990265 , y0=0.0972407466130995 , psi0=0.3199999679806115 , v0=1.8000000042394366 , spline0=0.6000000010392429 , a0=0.0 , w0=0.0
2026-01-20 16:36:30,406 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:30,406 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978403692893, 0.1538627221864504, 0.3199999679806115, 1.8000000042394366, 0.7800000014631866], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978403692893, 0.1538627221864504, 0.3199999679806115, 1.8000000042394366, 0.7800000014631866], res_norm=2.120e+00
2026-01-20 16:36:30,407 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:30,408 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:30,422 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,624 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,642 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,683 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,701 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,741 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,760 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,799 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,817 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,857 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,874 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,919 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,937 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:30,976 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:30,994 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:31,034 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:31,054 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:31,094 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:31,113 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:31,153 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:31,172 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:31,212 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:31,726 - INFO - integration_test - Step 4: MPC solve successful
2026-01-20 16:36:31,758 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-20 16:36:31,758 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:31,758 - INFO - integration_test - === Applying control at step 4 ===
2026-01-20 16:36:31,758 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000184332167, 'w': 0.7999999906594829}
2026-01-20 16:36:31,758 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:31,758 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:31,760 - INFO - integration_test - Step 4 completed in 1.667s
2026-01-20 16:36:31,811 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-20 16:36:31,812 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427975 0.39999997 2.00000001 0.8       ]
2026-01-20 16:36:31,812 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.417m, drift=0.288m)
2026-01-20 16:36:31,813 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-20 16:36:31,813 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:31,972 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-20 16:36:31,972 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-20 16:36:32,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:32,194 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:32,195 - INFO - integration_test - Warmstart k=0: x0=0.7268614922361102 , y0=0.16427975213157575 , psi0=0.39999996704655977 , v0=2.0000000060827583 , spline0=0.8000000016475187 , a0=0.0 , w0=0.0
2026-01-20 16:36:32,195 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:32,196 - INFO - integration_test - Dyn residual k=0: pred=[0.911073694163481, 0.24216341475975386, 0.39999996704655977, 2.0000000060827583, 1.0000000022557947], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.911073694163481, 0.24216341475975386, 0.39999996704655977, 2.0000000060827583, 1.0000000022557947], res_norm=2.459e+00
2026-01-20 16:36:32,196 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:32,197 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:32,212 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,416 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,435 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,474 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,492 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,532 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,550 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,589 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,608 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,647 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,665 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,705 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,723 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,762 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,780 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,819 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,837 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,876 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,894 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,933 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:32,951 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:32,991 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:33,516 - INFO - integration_test - Step 5: MPC solve successful
2026-01-20 16:36:33,550 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-20 16:36:33,551 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:33,551 - INFO - integration_test - === Applying control at step 5 ===
2026-01-20 16:36:33,551 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197136063, 'w': 0.8000000050736775}
2026-01-20 16:36:33,551 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:33,551 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:33,552 - INFO - integration_test - Step 5 completed in 1.740s
2026-01-20 16:36:33,604 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-20 16:36:33,605 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.25382379 0.47999997 2.20000001 1.02      ]
2026-01-20 16:36:33,605 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.511m, drift=0.004m)
2026-01-20 16:36:33,606 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-20 16:36:33,606 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:33,759 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-20 16:36:33,759 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-20 16:36:33,901 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:33,924 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:33,924 - INFO - integration_test - Warmstart k=0: x0=0.9167519089547622 , y0=0.2538237858475646 , psi0=0.47999996755392754 , v0=2.200000008054119 , spline0=1.0200000024529305 , a0=0.0 , w0=0.0
2026-01-20 16:36:33,925 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:33,925 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907959768434, 0.3554151985071229, 0.47999996755392754, 2.200000008054119, 1.2400000032583425], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907959768434, 0.3554151985071229, 0.47999996755392754, 2.200000008054119, 1.2400000032583425], res_norm=2.823e+00
2026-01-20 16:36:33,926 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:33,927 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:33,942 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,148 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,167 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,207 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,225 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,264 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,282 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,323 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,341 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,384 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,403 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,443 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,462 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,501 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,519 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,559 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,577 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,617 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,635 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,675 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:34,693 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:34,733 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:35,328 - INFO - integration_test - Step 6: MPC solve successful
2026-01-20 16:36:35,363 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-20 16:36:35,363 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:35,363 - INFO - integration_test - === Applying control at step 6 ===
2026-01-20 16:36:35,363 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019002488, 'w': 0.7999999867599975}
2026-01-20 16:36:35,363 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:35,363 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:35,365 - INFO - integration_test - Step 6 completed in 1.760s
2026-01-20 16:36:35,414 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-20 16:36:35,416 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819142 0.55999997 2.40000001 1.26      ]
2026-01-20 16:36:35,417 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.532m, drift=0.236m)
2026-01-20 16:36:35,417 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-20 16:36:35,417 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:35,570 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-20 16:36:35,570 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-20 16:36:35,713 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:35,736 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:35,736 - INFO - integration_test - Warmstart k=0: x0=1.1162308726843624 , y0=0.36819141851340775 , psi0=0.5599999662299273 , v0=2.4000000099543675 , spline0=1.2600000034483674 , a0=0.0 , w0=0.0
2026-01-20 16:36:35,736 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:35,737 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721044761382, 0.4956760996763339, 0.5599999662299273, 2.4000000099543675, 1.5000000044438042], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721044761382, 0.4956760996763339, 0.5599999662299273, 2.4000000099543675, 1.5000000044438042], res_norm=3.211e+00
2026-01-20 16:36:35,738 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:35,738 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:35,753 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,013 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,033 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,076 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,136 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,154 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,194 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,212 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,252 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,270 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,309 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,327 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,367 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,385 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,428 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,446 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,486 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,504 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,543 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:36,562 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:36,601 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:37,165 - INFO - integration_test - Step 7: MPC solve successful
2026-01-20 16:36:37,200 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-20 16:36:37,200 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:37,201 - INFO - integration_test - === Applying control at step 7 ===
2026-01-20 16:36:37,201 - INFO - integration_test -   Control dict from planner: {'a': 2.000000017327111, 'w': 0.799999949697839}
2026-01-20 16:36:37,201 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:37,201 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:37,202 - INFO - integration_test - Step 7 completed in 1.786s
2026-01-20 16:36:37,256 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-20 16:36:37,257 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.3224345  0.50942441 0.63999996 2.60000001 1.52      ]
2026-01-20 16:36:37,258 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.623m, drift=0.016m)
2026-01-20 16:36:37,258 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-20 16:36:37,259 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:37,482 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.322, 0.509), path_start=(0.000, 0.000), dist=1.417m
2026-01-20 16:36:37,482 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-20 16:36:37,639 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:37,664 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:37,664 - INFO - integration_test - Warmstart k=0: x0=1.3224345018133263 , y0=0.5094244075825763 , psi0=0.6399999611997113 , v0=2.6000000116870785 , spline0=1.5200000046170752 , a0=0.0 , w0=0.0
2026-01-20 16:36:37,664 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:37,666 - INFO - integration_test - Dyn residual k=0: pred=[1.5309794058252104, 0.6646952149431429, 0.6399999611997113, 2.6000000116870785, 1.780000005785783], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5309794058252104, 0.6646952149431429, 0.6399999611997113, 2.6000000116870785, 1.780000005785783], res_norm=3.623e+00
2026-01-20 16:36:37,667 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:37,667 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:37,683 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:37,911 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:37,932 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:37,976 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:37,998 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,047 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,069 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,118 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,140 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,190 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,212 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,260 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,281 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,325 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,345 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,386 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,405 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,446 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,465 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,505 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:38,522 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:38,562 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:39,184 - INFO - integration_test - Step 8: MPC solve successful
2026-01-20 16:36:39,220 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-20 16:36:39,220 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:39,220 - INFO - integration_test - === Applying control at step 8 ===
2026-01-20 16:36:39,220 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019775666, 'w': 0.8000000022903726}
2026-01-20 16:36:39,220 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:39,220 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:39,221 - INFO - integration_test - Step 8 completed in 1.965s
2026-01-20 16:36:39,273 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-20 16:36:39,274 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.53223935 0.6792569  0.71999996 2.80000001 1.80000001]
2026-01-20 16:36:39,274 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.602m, drift=0.264m)
2026-01-20 16:36:39,274 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-20 16:36:39,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:39,428 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.532, 0.679), path_start=(0.000, 0.000), dist=1.676m
2026-01-20 16:36:39,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-20 16:36:39,609 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:39,645 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:39,646 - INFO - integration_test - Warmstart k=0: x0=1.532239348944144 , y0=0.6792568984050436 , psi0=0.7199999614287486 , v0=2.8000000136646452 , spline0=1.8000000059835397 , a0=0.0 , w0=0.0
2026-01-20 16:36:39,646 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:39,647 - INFO - integration_test - Dyn residual k=0: pred=[1.742744961252232, 0.863884599338617, 0.7199999614287486, 2.8000000136646452, 2.0800000073500042], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.742744961252232, 0.863884599338617, 0.7199999614287486, 2.8000000136646452, 2.0800000073500042], res_norm=4.058e+00
2026-01-20 16:36:39,648 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:39,649 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:39,674 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:39,915 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:39,934 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:39,974 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:39,994 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,033 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,098 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,121 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,162 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,180 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,220 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,238 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,277 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,295 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,334 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,352 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,392 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,409 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,449 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:40,467 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:40,506 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:41,108 - INFO - integration_test - Step 9: MPC solve successful
2026-01-20 16:36:41,143 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-20 16:36:41,143 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:41,143 - INFO - integration_test - === Applying control at step 9 ===
2026-01-20 16:36:41,144 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001996639, 'w': 0.800000008516126}
2026-01-20 16:36:41,144 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:41,144 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:41,145 - INFO - integration_test - Step 9 completed in 1.871s
2026-01-20 16:36:41,196 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-20 16:36:41,197 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.74229392 0.87908746 0.79999996 3.00000002 2.10000001]
2026-01-20 16:36:41,197 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.634m, drift=0.052m)
2026-01-20 16:36:41,198 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-20 16:36:41,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:41,367 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.742, 0.879), path_start=(0.000, 0.000), dist=1.952m
2026-01-20 16:36:41,367 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-20 16:36:41,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:41,551 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:41,551 - INFO - integration_test - Warmstart k=0: x0=1.7422939225300658 , y0=0.8790874600281889 , psi0=0.7999999622803612 , v0=3.0000000156612843 , spline0=2.100000007549668 , a0=0.0 , w0=0.0
2026-01-20 16:36:41,551 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:41,552 - INFO - integration_test - Dyn residual k=0: pred=[1.9513059445428713, 1.0942942805376596, 0.7999999622803612, 3.0000000156612843, 2.4000000091157965], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.9513059445428713, 1.0942942805376596, 0.7999999622803612, 3.0000000156612843, 2.4000000091157965], res_norm=4.517e+00
2026-01-20 16:36:41,553 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:41,554 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:41,569 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:41,790 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:41,810 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:41,853 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:41,872 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:41,915 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:41,934 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:41,976 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:41,995 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,038 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,057 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,099 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,118 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,157 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,175 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,214 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,231 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,271 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,289 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,329 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,347 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:42,386 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:42,939 - INFO - integration_test - Step 10: MPC solve successful
2026-01-20 16:36:42,977 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-20 16:36:42,977 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:42,978 - INFO - integration_test - === Applying control at step 10 ===
2026-01-20 16:36:42,978 - INFO - integration_test -   Control dict from planner: {'a': 1.4338386648305333e-07, 'w': 0.8000000098378199}
2026-01-20 16:36:42,978 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:42,978 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:42,979 - INFO - integration_test - Step 10 completed in 1.782s
2026-01-20 16:36:43,029 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-20 16:36:43,032 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[1.94247939 1.10242083 0.87999996 3.00000003 2.40000001]
2026-01-20 16:36:43,032 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.594m, drift=0.352m)
2026-01-20 16:36:43,032 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-20 16:36:43,033 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:43,185 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(1.942, 1.102), path_start=(0.000, 0.000), dist=2.234m
2026-01-20 16:36:43,185 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-20 16:36:43,325 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:43,349 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:43,349 - INFO - integration_test - Warmstart k=0: x0=1.9424793902048272 , y0=1.1024208267643478 , psi0=0.8799999632641432 , v0=3.0000000299996707 , spline0=2.4000000105496353 , a0=0.0 , w0=0.0
2026-01-20 16:36:43,349 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:43,350 - INFO - integration_test - Dyn residual k=0: pred=[2.1336247438699596, 1.3336424857243416, 0.8799999632641432, 3.0000000299996707, 2.7000000135496025], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.1336247438699596, 1.3336424857243416, 0.8799999632641432, 3.0000000299996707, 2.7000000135496025], res_norm=4.837e+00
2026-01-20 16:36:43,350 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:43,351 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:43,365 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,570 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,588 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,627 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,685 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,704 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,744 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,762 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,803 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,821 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,863 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,884 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,929 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:43,948 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:43,988 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:44,006 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:44,046 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:44,064 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:44,106 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:44,124 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:44,163 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:45,343 - INFO - integration_test - Step 11: MPC solve successful
2026-01-20 16:36:45,380 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-20 16:36:45,380 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:45,380 - INFO - integration_test - === Applying control at step 11 ===
2026-01-20 16:36:45,380 - INFO - integration_test -   Control dict from planner: {'a': -1.3297035424556424e-07, 'w': 0.2469151864141327}
2026-01-20 16:36:45,380 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:45,380 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:45,382 - INFO - integration_test - Step 11 completed in 2.350s
2026-01-20 16:36:45,431 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-20 16:36:45,434 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.13075086 1.33597871 0.90469148 3.00000002 2.70000001]
2026-01-20 16:36:45,435 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.555m, drift=0.139m)
2026-01-20 16:36:45,435 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-20 16:36:45,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:45,587 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.131, 1.336), path_start=(0.000, 0.000), dist=2.515m
2026-01-20 16:36:45,587 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-20 16:36:45,727 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:45,751 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:45,751 - INFO - integration_test - Warmstart k=0: x0=2.130750859515176 , y0=1.335978705731593 , psi0=0.9046914819055565 , v0=3.0000000167026353 , spline0=2.700000012219899 , a0=0.0 , w0=0.0
2026-01-20 16:36:45,751 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:45,752 - INFO - integration_test - Dyn residual k=0: pred=[2.3161293136241996, 1.5718490721499006, 0.9046914819055565, 3.0000000167026353, 3.000000013890163], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3161293136241996, 1.5718490721499006, 0.9046914819055565, 3.0000000167026353, 3.000000013890163], res_norm=5.163e+00
2026-01-20 16:36:45,753 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:45,753 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:45,768 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:45,970 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:45,989 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,029 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,047 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,090 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,108 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,148 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,166 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,205 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,223 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,261 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,279 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,318 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,336 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,375 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,393 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,432 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,450 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,489 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:46,507 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:46,545 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:47,267 - INFO - integration_test - Step 12: MPC solve successful
2026-01-20 16:36:47,307 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-20 16:36:47,307 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:47,308 - INFO - integration_test - === Applying control at step 12 ===
2026-01-20 16:36:47,308 - INFO - integration_test -   Control dict from planner: {'a': 1.3290351564514026e-07, 'w': -0.2449482200010458}
2026-01-20 16:36:47,308 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:47,308 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:47,309 - INFO - integration_test - Step 12 completed in 1.875s
2026-01-20 16:36:47,358 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-20 16:36:47,359 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.31899943 1.56955519 0.88019666 3.00000003 3.00000002]
2026-01-20 16:36:47,360 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.544m, drift=0.439m)
2026-01-20 16:36:47,360 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-20 16:36:47,360 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:47,511 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.319, 1.570), path_start=(0.000, 0.000), dist=2.800m
2026-01-20 16:36:47,512 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-20 16:36:47,653 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:47,676 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:47,676 - INFO - integration_test - Warmstart k=0: x0=2.3189994337756725 , y0=1.5695551939103045 , psi0=0.8801966599054519 , v0=3.0000000299929868 , spline0=3.000000015219198 , a0=0.0 , w0=0.0
2026-01-20 16:36:47,677 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:47,677 - INFO - integration_test - Dyn residual k=0: pred=[2.5100993032192913, 1.8008144460456754, 0.8801966599054519, 3.0000000299929868, 3.3000000182184968], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5100993032192913, 1.8008144460456754, 0.8801966599054519, 3.0000000299929868, 3.3000000182184968], res_norm=5.496e+00
2026-01-20 16:36:47,678 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:47,679 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:47,693 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:47,897 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:47,917 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:47,959 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:47,979 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,021 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,040 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,084 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,102 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,142 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,161 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,202 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,221 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,281 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,307 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,364 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,388 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,434 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,454 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,496 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:48,514 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:48,554 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:49,256 - INFO - integration_test - Step 13: MPC solve successful
2026-01-20 16:36:49,297 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-20 16:36:49,297 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:49,297 - INFO - integration_test - === Applying control at step 13 ===
2026-01-20 16:36:49,297 - INFO - integration_test -   Control dict from planner: {'a': -1.0810318283859859e-07, 'w': -0.13333965726605032}
2026-01-20 16:36:49,297 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:49,297 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:49,299 - INFO - integration_test - Step 13 completed in 1.940s
2026-01-20 16:36:49,350 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-20 16:36:49,351 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.51163542 1.79953355 0.86686269 3.00000002 3.30000002]
2026-01-20 16:36:49,352 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.473m, drift=0.227m)
2026-01-20 16:36:49,352 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-20 16:36:49,352 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:49,510 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.512, 1.800), path_start=(0.000, 0.000), dist=3.090m
2026-01-20 16:36:49,510 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-20 16:36:49,654 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:49,679 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:49,679 - INFO - integration_test - Warmstart k=0: x0=2.511635418795702 , y0=1.7995335522414182 , psi0=0.8668626941788469 , v0=3.0000000191826683 , spline0=3.3000000171374646 , a0=0.0 , w0=0.0
2026-01-20 16:36:49,679 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:49,680 - INFO - integration_test - Dyn residual k=0: pred=[2.705801811092983, 2.028224201926136, 0.8668626941788469, 3.0000000191826683, 3.6000000190557313], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.705801811092983, 2.028224201926136, 0.8668626941788469, 3.0000000191826683, 3.6000000190557313], res_norm=5.844e+00
2026-01-20 16:36:49,681 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:49,682 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:49,697 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:49,929 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:49,947 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:49,986 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,005 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,047 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,067 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,116 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,136 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,181 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,202 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,249 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,271 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,318 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,339 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,386 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,407 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,453 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,474 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,515 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:50,533 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:50,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:51,278 - INFO - integration_test - Step 14: MPC solve successful
2026-01-20 16:36:51,324 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-20 16:36:51,324 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:51,324 - INFO - integration_test - === Applying control at step 14 ===
2026-01-20 16:36:51,324 - INFO - integration_test -   Control dict from planner: {'a': 1.0812890595631744e-07, 'w': -0.14744052203022134}
2026-01-20 16:36:51,324 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:51,324 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:51,326 - INFO - integration_test - Step 14 completed in 1.975s
2026-01-20 16:36:51,384 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-20 16:36:51,385 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[2.70748066 2.02678454 0.85211864 3.00000003 3.60000002]
2026-01-20 16:36:51,386 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.496m, drift=0.015m)
2026-01-20 16:36:51,386 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-20 16:36:51,386 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:51,555 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(2.707, 2.027), path_start=(0.000, 0.000), dist=3.382m
2026-01-20 16:36:51,555 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-20 16:36:51,708 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:51,732 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:51,732 - INFO - integration_test - Warmstart k=0: x0=2.707480659546803 , y0=2.0267845429150917 , psi0=0.8521186419758248 , v0=3.000000029995559 , spline0=3.6000000201370206 , a0=0.0 , w0=0.0
2026-01-20 16:36:51,732 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:51,733 - INFO - integration_test - Dyn residual k=0: pred=[2.9049976530195947, 2.252587640965589, 0.8521186419758248, 3.000000029995559, 3.9000000231365766], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.9049976530195947, 2.252587640965589, 0.8521186419758248, 3.000000029995559, 3.9000000231365766], res_norm=6.201e+00
2026-01-20 16:36:51,734 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:51,735 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:51,750 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:51,971 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:51,993 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,036 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,056 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,101 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,120 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,164 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,183 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,228 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,247 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,287 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,305 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,346 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,364 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,406 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,426 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,468 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,490 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,535 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:52,555 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:52,599 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:53,283 - INFO - integration_test - Step 15: MPC solve successful
2026-01-20 16:36:53,339 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-20 16:36:53,340 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:53,340 - INFO - integration_test - === Applying control at step 15 ===
2026-01-20 16:36:53,340 - INFO - integration_test -   Control dict from planner: {'a': -2.3339859757611264e-07, 'w': -0.13914030582956213}
2026-01-20 16:36:53,340 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:53,340 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:53,341 - INFO - integration_test - Step 15 completed in 1.956s
2026-01-20 16:36:53,404 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-20 16:36:53,405 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[2.90656217 2.25120625 0.83820461 3.00000001 3.90000002]
2026-01-20 16:36:53,406 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.420m, drift=0.315m)
2026-01-20 16:36:53,406 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-20 16:36:53,407 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:53,567 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(2.907, 2.251), path_start=(0.000, 0.000), dist=3.676m
2026-01-20 16:36:53,567 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-20 16:36:53,819 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:53,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:53,846 - INFO - integration_test - Warmstart k=0: x0=2.9065621693463353 , y0=2.2512062476704884 , psi0=0.8382046113928685 , v0=3.000000006655699 , spline0=3.9000000208025907 , a0=0.0 , w0=0.0
2026-01-20 16:36:53,846 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:53,847 - INFO - integration_test - Dyn residual k=0: pred=[3.107201771733687, 2.47423931775918, 0.8382046113928685, 3.000000006655699, 4.200000021468161], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.107201771733687, 2.47423931775918, 0.8382046113928685, 3.000000006655699, 4.200000021468161], res_norm=6.567e+00
2026-01-20 16:36:53,848 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:53,849 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:53,864 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,086 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,109 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,157 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,179 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,226 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,248 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,295 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,317 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,363 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,386 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,433 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,454 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,503 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,525 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,573 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,594 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,640 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,662 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,709 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:54,732 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:54,782 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:55,402 - INFO - integration_test - Step 16: MPC solve successful
2026-01-20 16:36:55,450 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-20 16:36:55,450 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:55,450 - INFO - integration_test - === Applying control at step 16 ===
2026-01-20 16:36:55,450 - INFO - integration_test -   Control dict from planner: {'a': 2.3342144933207524e-07, 'w': -0.12052260371589497}
2026-01-20 16:36:55,450 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:55,450 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:55,452 - INFO - integration_test - Step 16 completed in 2.047s
2026-01-20 16:36:55,506 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-20 16:36:55,507 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.10854093 2.47302485 0.82615235 3.00000003 4.20000002]
2026-01-20 16:36:55,507 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.412m, drift=0.103m)
2026-01-20 16:36:55,507 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-20 16:36:55,508 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:55,675 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.109, 2.473), path_start=(0.000, 0.000), dist=3.972m
2026-01-20 16:36:55,675 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-20 16:36:55,842 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:55,870 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:55,871 - INFO - integration_test - Warmstart k=0: x0=3.1085409252212313 , y0=2.4730248534141572 , psi0=0.826152351021279 , v0=3.000000029997844 , spline0=4.200000023802375 , a0=0.0 , w0=0.0
2026-01-20 16:36:55,871 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:55,872 - INFO - integration_test - Dyn residual k=0: pred=[3.3118539447717885, 2.69362362467344, 0.826152351021279, 3.000000029997844, 4.50000002680216], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3118539447717885, 2.69362362467344, 0.826152351021279, 3.000000029997844, 4.50000002680216], res_norm=6.939e+00
2026-01-20 16:36:55,873 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:55,874 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:55,892 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,117 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,183 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,204 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,247 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,267 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,312 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,333 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,383 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,403 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,448 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,469 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,513 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,533 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,577 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,596 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,642 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,662 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,705 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:56,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:56,767 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:57,420 - INFO - integration_test - Step 17: MPC solve successful
2026-01-20 16:36:57,463 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-20 16:36:57,463 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:57,463 - INFO - integration_test - === Applying control at step 17 ===
2026-01-20 16:36:57,464 - INFO - integration_test -   Control dict from planner: {'a': -3.3497363670122586e-11, 'w': -0.1262774414599875}
2026-01-20 16:36:57,464 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:57,464 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:57,465 - INFO - integration_test - Step 17 completed in 1.959s
2026-01-20 16:36:57,516 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-20 16:36:57,516 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.31324136 2.69233409 0.81352461 3.00000003 4.50000003]
2026-01-20 16:36:57,517 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.399m, drift=0.403m)
2026-01-20 16:36:57,517 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-20 16:36:57,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:57,690 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.313, 2.692), path_start=(0.000, 0.000), dist=4.269m
2026-01-20 16:36:57,690 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-20 16:36:57,842 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:57,866 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:57,866 - INFO - integration_test - Warmstart k=0: x0=3.313241355349726 , y0=2.692334086606663 , psi0=0.8135246068752803 , v0=3.0000000299944944 , spline0=4.500000026801825 , a0=0.0 , w0=0.0
2026-01-20 16:36:57,866 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:57,867 - INFO - integration_test - Dyn residual k=0: pred=[3.5193237557856407, 2.910347953207485, 0.8135246068752803, 3.0000000299944944, 4.800000029801274], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.5193237557856407, 2.910347953207485, 0.8135246068752803, 3.0000000299944944, 4.800000029801274], res_norm=7.318e+00
2026-01-20 16:36:57,868 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:57,869 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:57,883 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,100 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,120 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,170 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,190 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,233 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,254 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,306 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,335 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,385 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,407 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,457 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,479 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,525 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,546 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,591 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,615 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,671 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,697 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,753 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:58,779 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:36:58,833 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:36:59,459 - INFO - integration_test - Step 18: MPC solve successful
2026-01-20 16:36:59,522 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-20 16:36:59,523 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:36:59,523 - INFO - integration_test - === Applying control at step 18 ===
2026-01-20 16:36:59,523 - INFO - integration_test -   Control dict from planner: {'a': -1.4919310479326287e-06, 'w': -0.0841128738422191}
2026-01-20 16:36:59,523 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:36:59,523 - INFO - integration_test -   Planner output success: True
2026-01-20 16:36:59,526 - INFO - integration_test - Step 18 completed in 2.010s
2026-01-20 16:36:59,585 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-20 16:36:59,586 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[3.5202382  2.90947867 0.80511332 2.99999988 4.80000001]
2026-01-20 16:36:59,586 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.348m, drift=0.191m)
2026-01-20 16:36:59,587 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-20 16:36:59,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:59,758 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(3.520, 2.909), path_start=(0.000, 0.000), dist=4.567m
2026-01-20 16:36:59,758 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-20 16:36:59,905 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:36:59,928 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:36:59,928 - INFO - integration_test - Warmstart k=0: x0=3.5202382038304423 , y0=2.909478673049296 , psi0=0.8051133194910584 , v0=2.9999998808013895 , spline0=4.800000014881964 , a0=0.0 , w0=0.0
2026-01-20 16:36:59,928 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:36:59,929 - INFO - integration_test - Dyn residual k=0: pred=[3.7281470594926827, 3.125751418871096, 0.8051133194910584, 2.9999998808013895, 5.100000002962103], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.7281470594926827, 3.125751418871096, 0.8051133194910584, 2.9999998808013895, 5.100000002962103], res_norm=7.702e+00
2026-01-20 16:36:59,930 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:59,930 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:36:59,945 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,165 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,186 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,233 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,254 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,299 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,321 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,366 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,386 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,431 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,451 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,492 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,510 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,554 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,575 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,617 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,636 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,678 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,697 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,739 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:00,758 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:00,801 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:01,550 - INFO - integration_test - Step 19: MPC solve successful
2026-01-20 16:37:01,599 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-20 16:37:01,599 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:01,599 - INFO - integration_test - === Applying control at step 19 ===
2026-01-20 16:37:01,599 - INFO - integration_test -   Control dict from planner: {'a': 1.4919847858006598e-06, 'w': -0.1242994006735611}
2026-01-20 16:37:01,599 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:01,599 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:01,601 - INFO - integration_test - Step 19 completed in 2.015s
2026-01-20 16:37:01,656 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-20 16:37:01,657 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[3.72948582 3.12445372 0.79268338 3.00000003 5.10000002]
2026-01-20 16:37:01,658 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.411m, drift=0.491m)
2026-01-20 16:37:01,658 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-20 16:37:01,659 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:01,826 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(3.729, 3.124), path_start=(0.000, 0.000), dist=4.865m
2026-01-20 16:37:01,826 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-20 16:37:01,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:02,009 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:02,009 - INFO - integration_test - Warmstart k=0: x0=3.7294858223073253 , y0=3.1244537244336583 , psi0=0.7926833794237023 , v0=3.000000029999868 , spline0=5.100000017881951 , a0=0.0 , w0=0.0
2026-01-20 16:37:02,009 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:02,011 - INFO - integration_test - Dyn residual k=0: pred=[3.9400668153807037, 3.3381255455898926, 0.7926833794237023, 3.000000029999868, 5.400000020881937], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9400668153807037, 3.3381255455898926, 0.7926833794237023, 3.000000029999868, 5.400000020881937], res_norm=8.090e+00
2026-01-20 16:37:02,012 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:02,013 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:02,029 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,261 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,283 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,332 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,355 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,401 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,422 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,470 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,491 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,539 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,561 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,608 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,630 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,678 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,699 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,746 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,766 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,816 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,837 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,888 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:02,912 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:02,963 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:03,546 - INFO - integration_test - Step 20: MPC solve successful
2026-01-20 16:37:03,598 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-20 16:37:03,598 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:03,598 - INFO - integration_test - === Applying control at step 20 ===
2026-01-20 16:37:03,598 - INFO - integration_test -   Control dict from planner: {'a': -2.0292981875235728e-07, 'w': -0.034968581898228615}
2026-01-20 16:37:03,598 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:03,598 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:03,600 - INFO - integration_test - Step 20 completed in 1.943s
2026-01-20 16:37:03,663 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-20 16:37:03,663 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[3.94043998 3.33775692 0.78918652 3.00000001 5.40000002]
2026-01-20 16:37:03,664 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.311m, drift=0.279m)
2026-01-20 16:37:03,664 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-20 16:37:03,665 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:03,833 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(3.940, 3.338), path_start=(0.000, 0.000), dist=5.164m
2026-01-20 16:37:03,833 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-20 16:37:03,988 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:04,014 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:04,014 - INFO - integration_test - Warmstart k=0: x0=3.940439975150591 , y0=3.3377569238454328 , psi0=0.7891865212338794 , v0=3.000000009706886 , spline0=5.400000018852639 , a0=0.0 , w0=0.0
2026-01-20 16:37:04,014 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:04,015 - INFO - integration_test - Dyn residual k=0: pred=[4.151766857836785, 3.5506910668017673, 0.7891865212338794, 3.000000009706886, 5.700000019823327], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.151766857836785, 3.5506910668017673, 0.7891865212338794, 3.000000009706886, 5.700000019823327], res_norm=8.483e+00
2026-01-20 16:37:04,016 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:04,016 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:04,032 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,292 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,318 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,375 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,399 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,445 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,466 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,509 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,528 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,570 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,588 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,630 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,649 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,690 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,710 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,751 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,770 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,812 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,831 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,872 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:04,891 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:04,936 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:05,558 - INFO - integration_test - Step 21: MPC solve successful
2026-01-20 16:37:05,611 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-20 16:37:05,611 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:05,611 - INFO - integration_test - === Applying control at step 21 ===
2026-01-20 16:37:05,611 - INFO - integration_test -   Control dict from planner: {'a': 1.189292244196745e-07, 'w': -0.16787380770433172}
2026-01-20 16:37:05,611 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:05,611 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:05,614 - INFO - integration_test - Step 21 completed in 1.951s
2026-01-20 16:37:05,667 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-20 16:37:05,668 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.15354419 3.5489073  0.77239914 3.00000002 5.70000002]
2026-01-20 16:37:05,668 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.340m, drift=0.067m)
2026-01-20 16:37:05,668 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-20 16:37:05,669 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:05,822 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.154, 3.549), path_start=(0.000, 0.000), dist=5.463m
2026-01-20 16:37:05,822 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-20 16:37:05,970 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:05,994 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:05,994 - INFO - integration_test - Warmstart k=0: x0=4.153544193812479 , y0=3.5489072952193785 , psi0=0.7723991404634463 , v0=3.0000000215998086 , spline0=5.70000002101262 , a0=0.0 , w0=0.0
2026-01-20 16:37:05,994 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:05,995 - INFO - integration_test - Dyn residual k=0: pred=[4.3684157390274585, 3.7582639773504143, 0.7723991404634463, 3.0000000215998086, 6.000000023172602], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.3684157390274585, 3.7582639773504143, 0.7723991404634463, 3.0000000215998086, 6.000000023172602], res_norm=8.877e+00
2026-01-20 16:37:05,995 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:05,996 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:06,011 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,230 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,250 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,295 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,316 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,366 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,386 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,435 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,456 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,500 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,521 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,563 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,584 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,628 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,647 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,690 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,709 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,751 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,770 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,812 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:06,832 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:06,879 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:07,556 - INFO - integration_test - Step 22: MPC solve successful
2026-01-20 16:37:07,613 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-20 16:37:07,613 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:07,613 - INFO - integration_test - === Applying control at step 22 ===
2026-01-20 16:37:07,614 - INFO - integration_test -   Control dict from planner: {'a': 8.373854679222149e-08, 'w': -0.06041991226016767}
2026-01-20 16:37:07,614 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:07,614 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:07,615 - INFO - integration_test - Step 22 completed in 1.948s
2026-01-20 16:37:07,675 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-20 16:37:07,676 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[4.3690469  3.75761358 0.76635715 3.00000003 6.00000002]
2026-01-20 16:37:07,676 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.308m, drift=0.367m)
2026-01-20 16:37:07,677 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-20 16:37:07,677 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:07,847 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(4.369, 3.758), path_start=(0.000, 0.000), dist=5.763m
2026-01-20 16:37:07,847 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-20 16:37:08,005 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:08,033 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:08,033 - INFO - integration_test - Warmstart k=0: x0=4.369046895687372 , y0=3.7576135798391808 , psi0=0.7663571492374295 , v0=3.000000029973663 , spline0=6.000000024009987 , a0=0.0 , w0=0.0
2026-01-20 16:37:08,033 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:08,034 - INFO - integration_test - Dyn residual k=0: pred=[4.585179443044368, 3.9656681971188648, 0.7663571492374295, 3.000000029973663, 6.3000000270073535], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.585179443044368, 3.9656681971188648, 0.7663571492374295, 3.000000029973663, 6.3000000270073535], res_norm=9.275e+00
2026-01-20 16:37:08,035 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:08,036 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:08,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,344 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,372 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,422 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,445 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,492 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,516 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,558 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,578 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,620 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,639 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,681 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,700 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,740 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,758 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,799 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,817 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,858 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,877 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,918 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:08,936 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:08,977 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:09,888 - INFO - integration_test - Step 23: MPC solve successful
2026-01-20 16:37:09,938 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-20 16:37:09,938 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:09,938 - INFO - integration_test - === Applying control at step 23 ===
2026-01-20 16:37:09,938 - INFO - integration_test -   Control dict from planner: {'a': -1.8842859990223731e-07, 'w': -0.06694091730953844}
2026-01-20 16:37:09,938 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:09,938 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:09,940 - INFO - integration_test - Step 23 completed in 2.264s
2026-01-20 16:37:09,994 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-20 16:37:09,995 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[4.58587419 3.96494324 0.75966306 3.00000001 6.30000003]
2026-01-20 16:37:09,995 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.281m, drift=0.155m)
2026-01-20 16:37:09,995 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-20 16:37:09,996 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:10,157 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(4.586, 3.965), path_start=(0.000, 0.000), dist=6.062m
2026-01-20 16:37:10,157 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-20 16:37:10,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:10,333 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:10,333 - INFO - integration_test - Warmstart k=0: x0=4.585874193931591 , y0=3.9649432397732784 , psi0=0.7596630575064757 , v0=3.000000011130803 , spline0=6.300000025123067 , a0=0.0 , w0=0.0
2026-01-20 16:37:10,333 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:10,334 - INFO - integration_test - Dyn residual k=0: pred=[4.803394623688851, 4.171546393926514, 0.7596630575064757, 3.000000011130803, 6.600000026236147], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.803394623688851, 4.171546393926514, 0.7596630575064757, 3.000000011130803, 6.600000026236147], res_norm=9.675e+00
2026-01-20 16:37:10,335 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:10,335 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:10,352 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:10,716 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:10,737 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:10,782 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:10,803 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:10,848 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:10,868 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:10,913 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:10,933 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:10,979 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:10,999 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:11,044 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:11,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:11,111 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:11,132 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:11,182 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:11,204 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:11,249 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:11,270 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:11,318 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:11,340 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:11,384 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:12,153 - INFO - integration_test - Step 24: MPC solve successful
2026-01-20 16:37:12,213 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-20 16:37:12,214 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:12,214 - INFO - integration_test - === Applying control at step 24 ===
2026-01-20 16:37:12,214 - INFO - integration_test -   Control dict from planner: {'a': 1.4365268323949434e-07, 'w': -0.08521013953597444}
2026-01-20 16:37:12,214 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:12,214 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:12,216 - INFO - integration_test - Step 24 completed in 2.221s
2026-01-20 16:37:12,291 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-20 16:37:12,292 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[4.80427222 4.17061715 0.75114204 3.00000003 6.60000003]
2026-01-20 16:37:12,293 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.337m, drift=0.455m)
2026-01-20 16:37:12,293 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-20 16:37:12,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:12,466 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(4.804, 4.171), path_start=(0.000, 0.000), dist=6.362m
2026-01-20 16:37:12,466 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-20 16:37:12,628 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:12,652 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:12,652 - INFO - integration_test - Warmstart k=0: x0=4.804272220800545 , y0=4.170617152563898 , psi0=0.7511420435528783 , v0=3.0000000254960715 , spline0=6.6000000276726745 , a0=0.0 , w0=0.0
2026-01-20 16:37:12,652 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:12,653 - INFO - integration_test - Dyn residual k=0: pred=[5.023545201884363, 4.3753593350676026, 0.7511420435528783, 3.0000000254960715, 6.900000030222282], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.023545201884363, 4.3753593350676026, 0.7511420435528783, 3.0000000254960715, 6.900000030222282], res_norm=1.008e+01
2026-01-20 16:37:12,654 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:12,655 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:12,670 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:12,884 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:12,903 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:12,944 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:12,964 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,010 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,034 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,080 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,104 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,151 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,170 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,212 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,231 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,276 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,297 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,342 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,362 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,409 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,430 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,499 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:13,537 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:13,596 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:14,382 - INFO - integration_test - Step 25: MPC solve successful
2026-01-20 16:37:14,441 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-20 16:37:14,441 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:14,441 - INFO - integration_test - === Applying control at step 25 ===
2026-01-20 16:37:14,441 - INFO - integration_test -   Control dict from planner: {'a': 4.49637687108906e-08, 'w': -0.06780693825788699}
2026-01-20 16:37:14,441 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:14,441 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:14,443 - INFO - integration_test - Step 25 completed in 2.151s
2026-01-20 16:37:14,492 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-20 16:37:14,493 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[5.02423767 4.37461436 0.74436135 3.00000003 6.90000003]
2026-01-20 16:37:14,494 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.248m, drift=0.242m)
2026-01-20 16:37:14,494 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-20 16:37:14,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:14,648 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(5.024, 4.375), path_start=(0.000, 0.000), dist=6.662m
2026-01-20 16:37:14,649 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-20 16:37:14,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:14,817 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:14,817 - INFO - integration_test - Warmstart k=0: x0=5.024237666138317 , y0=4.374614357665095 , psi0=0.7443613497270896 , v0=3.0000000299924485 , spline0=6.90000003067192 , a0=0.0 , w0=0.0
2026-01-20 16:37:14,817 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:14,818 - INFO - integration_test - Dyn residual k=0: pred=[5.244893890140924, 4.577865022137461, 0.7443613497270896, 3.0000000299924485, 7.200000033671165], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.244893890140924, 4.577865022137461, 0.7443613497270896, 3.0000000299924485, 7.200000033671165], res_norm=1.048e+01
2026-01-20 16:37:14,819 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:14,819 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:14,834 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,044 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,063 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,104 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,123 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,165 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,183 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,224 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,242 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,282 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,302 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,342 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,361 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,399 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,462 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,480 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,519 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,537 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,576 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:15,594 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:15,635 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:16,346 - INFO - integration_test - Step 26: MPC solve successful
2026-01-20 16:37:16,401 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-20 16:37:16,402 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:16,402 - INFO - integration_test - === Applying control at step 26 ===
2026-01-20 16:37:16,402 - INFO - integration_test -   Control dict from planner: {'a': -3.195204364045428e-09, 'w': -0.05864407017819572}
2026-01-20 16:37:16,402 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:16,402 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:16,403 - INFO - integration_test - Step 26 completed in 1.911s
2026-01-20 16:37:16,459 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-20 16:37:16,460 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[5.2454886  4.57721685 0.73849694 3.00000003 7.20000003]
2026-01-20 16:37:16,460 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.315m, drift=0.030m)
2026-01-20 16:37:16,460 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-20 16:37:16,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:16,619 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(5.245, 4.577), path_start=(0.000, 0.000), dist=6.962m
2026-01-20 16:37:16,619 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-20 16:37:16,769 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:16,795 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:16,795 - INFO - integration_test - Warmstart k=0: x0=5.245488595960316 , y0=4.5772168500207036 , psi0=0.73849694270927 , v0=3.000000029672928 , spline0=7.2000000336392125 , a0=0.0 , w0=0.0
2026-01-20 16:37:16,795 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:16,796 - INFO - integration_test - Dyn residual k=0: pred=[5.4673329634173555, 4.779170008965944, 0.73849694270927, 3.000000029672928, 7.500000036606505], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.4673329634173555, 4.779170008965944, 0.73849694270927, 3.000000029672928, 7.500000036606505], res_norm=1.089e+01
2026-01-20 16:37:16,797 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:16,798 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:16,813 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,042 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,062 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,104 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,124 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,171 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,191 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,235 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,255 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,301 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,321 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,372 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,397 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,453 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,482 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,532 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,553 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,597 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,616 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,657 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:17,676 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:17,717 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:18,402 - INFO - integration_test - Step 27: MPC solve successful
2026-01-20 16:37:18,456 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-20 16:37:18,457 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:18,457 - INFO - integration_test - === Applying control at step 27 ===
2026-01-20 16:37:18,457 - INFO - integration_test -   Control dict from planner: {'a': 3.2692049212950462e-09, 'w': -0.06596043963136662}
2026-01-20 16:37:18,457 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:18,457 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:18,458 - INFO - integration_test - Step 27 completed in 1.998s
2026-01-20 16:37:18,518 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-20 16:37:18,518 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[5.4679974  4.7784369  0.7319009  3.00000003 7.50000004]
2026-01-20 16:37:18,519 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.250m, drift=0.330m)
2026-01-20 16:37:18,519 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-20 16:37:18,520 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:18,680 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(5.468, 4.778), path_start=(0.000, 0.000), dist=7.262m
2026-01-20 16:37:18,680 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-20 16:37:18,838 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:18,867 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:18,867 - INFO - integration_test - Warmstart k=0: x0=5.467997398315827 , y0=4.778436899609741 , psi0=0.7319008987461334 , v0=3.000000029999849 , spline0=7.5000000366391975 , a0=0.0 , w0=0.0
2026-01-20 16:37:18,867 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:18,868 - INFO - integration_test - Dyn residual k=0: pred=[5.691169022090468, 4.978922380734388, 0.7319008987461334, 3.000000029999849, 7.800000039639182], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.691169022090468, 4.978922380734388, 0.7319008987461334, 3.000000029999849, 7.800000039639182], res_norm=1.129e+01
2026-01-20 16:37:18,869 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:18,870 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:18,888 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,118 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,179 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,198 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,239 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,257 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,299 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,317 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,358 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,377 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,419 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,439 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,484 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,503 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,545 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,564 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,605 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,625 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,666 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:19,685 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:19,726 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:20,593 - INFO - integration_test - Step 28: MPC solve successful
2026-01-20 16:37:20,651 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-20 16:37:20,651 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:20,651 - INFO - integration_test - === Applying control at step 28 ===
2026-01-20 16:37:20,651 - INFO - integration_test -   Control dict from planner: {'a': -2.2934120015724926e-08, 'w': -0.06690902438744521}
2026-01-20 16:37:20,651 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:20,651 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:20,653 - INFO - integration_test - Step 28 completed in 2.135s
2026-01-20 16:37:20,710 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-20 16:37:20,711 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[5.69183807 4.97817428 0.72521    3.00000003 7.80000004]
2026-01-20 16:37:20,711 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.251m, drift=0.118m)
2026-01-20 16:37:20,711 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-20 16:37:20,712 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:20,876 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(5.692, 4.978), path_start=(0.000, 0.000), dist=7.562m
2026-01-20 16:37:20,876 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-20 16:37:21,022 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:21,047 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:21,047 - INFO - integration_test - Warmstart k=0: x0=5.691838068739381 , y0=4.978174277771231 , psi0=0.7252099963073889 , v0=3.0000000277064367 , spline0=7.800000039409841 , a0=0.0 , w0=0.0
2026-01-20 16:37:21,047 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:21,048 - INFO - integration_test - Dyn residual k=0: pred=[5.91634611565355, 5.177162062655559, 0.7252099963073889, 3.0000000277064367, 8.100000042180485], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.91634611565355, 5.177162062655559, 0.7252099963073889, 3.0000000277064367, 8.100000042180485], res_norm=1.170e+01
2026-01-20 16:37:21,049 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:21,049 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:21,063 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,269 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,289 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,328 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,346 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,384 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,401 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,442 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,464 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,506 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,525 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,566 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,585 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,627 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,646 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,689 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,707 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,752 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,782 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,849 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:21,876 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:21,932 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:22,536 - INFO - integration_test - Step 29: MPC solve successful
2026-01-20 16:37:22,596 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-20 16:37:22,596 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:22,596 - INFO - integration_test - === Applying control at step 29 ===
2026-01-20 16:37:22,596 - INFO - integration_test -   Control dict from planner: {'a': 1.9408717022975283e-08, 'w': -0.02871979155814877}
2026-01-20 16:37:22,596 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:22,596 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:22,598 - INFO - integration_test - Step 29 completed in 1.887s
2026-01-20 16:37:22,678 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-20 16:37:22,688 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[5.91663155 5.1768394  0.72233802 3.00000003 8.10000004]
2026-01-20 16:37:22,689 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.285m, drift=0.418m)
2026-01-20 16:37:22,689 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-20 16:37:22,690 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:22,893 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(5.917, 5.177), path_start=(0.000, 0.000), dist=7.862m
2026-01-20 16:37:22,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-20 16:37:23,041 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:23,065 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:23,065 - INFO - integration_test - Warmstart k=0: x0=5.916631551281629 , y0=5.176839398175338 , psi0=0.7223380171515741 , v0=3.0000000296473086 , spline0=8.100000042374573 , a0=0.0 , w0=0.0
2026-01-20 16:37:23,066 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:23,066 - INFO - integration_test - Dyn residual k=0: pred=[6.141710160426018, 5.37518158099197, 0.7223380171515741, 3.0000000296473086, 8.400000045339304], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.141710160426018, 5.37518158099197, 0.7223380171515741, 3.0000000296473086, 8.400000045339304], res_norm=1.211e+01
2026-01-20 16:37:23,067 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:23,068 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:23,083 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,290 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,309 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,350 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,371 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,412 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,431 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,471 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,492 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,532 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,551 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,593 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,612 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,653 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,673 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,713 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,732 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,774 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,793 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,835 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:23,853 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:23,892 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:24,578 - INFO - integration_test - Step 30: MPC solve successful
2026-01-20 16:37:24,639 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-20 16:37:24,640 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:24,640 - INFO - integration_test - === Applying control at step 30 ===
2026-01-20 16:37:24,640 - INFO - integration_test -   Control dict from planner: {'a': 3.5153094679256993e-09, 'w': -0.06240465367882509}
2026-01-20 16:37:24,640 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:24,640 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:24,641 - INFO - integration_test - Step 30 completed in 1.954s
2026-01-20 16:37:24,703 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-20 16:37:24,704 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[6.14232757 5.374478   0.71609755 3.00000003 8.40000005]
2026-01-20 16:37:24,705 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.211m, drift=0.206m)
2026-01-20 16:37:24,705 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-20 16:37:24,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:24,871 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(6.142, 5.374), path_start=(0.000, 0.000), dist=8.162m
2026-01-20 16:37:24,871 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-20 16:37:25,020 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:25,044 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:25,045 - INFO - integration_test - Warmstart k=0: x0=6.1423275713072085 , y0=5.374477998299165 , psi0=0.7160975517836916 , v0=3.0000000299988394 , spline0=8.400000045374457 , a0=0.0 , w0=0.0
2026-01-20 16:37:25,045 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:25,045 - INFO - integration_test - Dyn residual k=0: pred=[6.368639537317472, 5.571411732942317, 0.7160975517836916, 3.0000000299988394, 8.70000004837434], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.368639537317472, 5.571411732942317, 0.7160975517836916, 3.0000000299988394, 8.70000004837434], res_norm=1.252e+01
2026-01-20 16:37:25,046 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:25,047 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:25,062 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,282 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,305 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,351 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,373 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,420 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,442 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,488 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,508 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,551 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,570 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,611 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,633 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,676 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,696 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,739 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,758 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,798 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,817 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,858 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:25,876 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:25,918 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:26,689 - INFO - integration_test - Step 31: MPC solve successful
2026-01-20 16:37:26,745 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-20 16:37:26,746 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:26,746 - INFO - integration_test - === Applying control at step 31 ===
2026-01-20 16:37:26,746 - INFO - integration_test -   Control dict from planner: {'a': -3.033142344618065e-07, 'w': -0.045292374012254985}
2026-01-20 16:37:26,746 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:26,746 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:26,747 - INFO - integration_test - Step 31 completed in 2.044s
2026-01-20 16:37:26,803 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-20 16:37:26,806 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[6.36908474 5.57089855 0.71156831 3.         8.70000005]
2026-01-20 16:37:26,807 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.312m, drift=0.006m)
2026-01-20 16:37:26,807 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-20 16:37:26,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:26,968 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(6.369, 5.571), path_start=(0.000, 0.000), dist=8.462m
2026-01-20 16:37:26,968 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-20 16:37:27,114 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:27,138 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:27,138 - INFO - integration_test - Warmstart k=0: x0=6.369084741466803 , y0=5.570898549200527 , psi0=0.7115683143824661 , v0=2.999999999667416 , spline0=8.700000045341199 , a0=0.0 , w0=0.0
2026-01-20 16:37:27,138 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:27,139 - INFO - integration_test - Dyn residual k=0: pred=[6.596286340489955, 5.7668052448016915, 0.7115683143824661, 2.999999999667416, 9.00000004530794], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.596286340489955, 5.7668052448016915, 0.7115683143824661, 2.999999999667416, 9.00000004530794], res_norm=1.293e+01
2026-01-20 16:37:27,140 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:27,141 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:27,155 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,374 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,397 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,442 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,465 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,508 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,527 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,568 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,627 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,646 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,687 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,706 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,745 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,764 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,803 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,823 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,862 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,880 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,918 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:27,935 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:27,974 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:28,556 - INFO - integration_test - Step 32: MPC solve successful
2026-01-20 16:37:28,727 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-20 16:37:28,727 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:28,727 - INFO - integration_test - === Applying control at step 32 ===
2026-01-20 16:37:28,727 - INFO - integration_test -   Control dict from planner: {'a': 3.029395117416196e-07, 'w': -0.04979613436314024}
2026-01-20 16:37:28,727 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:28,727 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:28,728 - INFO - integration_test - Step 32 completed in 1.922s
2026-01-20 16:37:28,785 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-20 16:37:28,789 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[6.59677317 5.76623875 0.7065887  3.00000003 9.00000005]
2026-01-20 16:37:28,790 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.208m, drift=0.294m)
2026-01-20 16:37:28,790 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-20 16:37:28,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:28,950 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(6.597, 5.766), path_start=(0.000, 0.000), dist=8.762m
2026-01-20 16:37:28,950 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-20 16:37:29,096 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:29,121 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:29,121 - INFO - integration_test - Warmstart k=0: x0=6.596773171471207 , y0=5.7662387492543274 , psi0=0.7065887009461521 , v0=3.000000029961367 , spline0=9.000000048337336 , a0=0.0 , w0=0.0
2026-01-20 16:37:29,121 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:29,122 - INFO - integration_test - Dyn residual k=0: pred=[6.824947491478394, 5.961011646462691, 0.7065887009461521, 3.000000029961367, 9.300000051333473], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.824947491478394, 5.961011646462691, 0.7065887009461521, 3.000000029961367, 9.300000051333473], res_norm=1.335e+01
2026-01-20 16:37:29,123 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:29,124 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:29,140 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,348 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,368 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,407 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,426 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,466 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,484 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,524 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,543 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,584 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,602 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,641 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,659 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,701 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,720 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,765 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,786 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,832 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,852 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,895 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:29,915 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:29,955 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:30,594 - INFO - integration_test - Step 33: MPC solve successful
2026-01-20 16:37:30,654 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-20 16:37:30,654 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:30,654 - INFO - integration_test - === Applying control at step 33 ===
2026-01-20 16:37:30,654 - INFO - integration_test -   Control dict from planner: {'a': 3.846250735370862e-10, 'w': -0.044898515895327895}
2026-01-20 16:37:30,654 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:30,654 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:30,656 - INFO - integration_test - Step 33 completed in 1.867s
2026-01-20 16:37:30,711 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-20 16:37:30,714 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[6.82538397 5.96049876 0.70209885 3.00000003 9.30000005]
2026-01-20 16:37:30,714 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.243m, drift=0.082m)
2026-01-20 16:37:30,715 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-20 16:37:30,715 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:30,868 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(6.825, 5.960), path_start=(0.000, 0.000), dist=9.062m
2026-01-20 16:37:30,868 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-20 16:37:31,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:31,030 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:31,030 - INFO - integration_test - Warmstart k=0: x0=6.825383974828357 , y0=5.960498758511517 , psi0=0.7020988493566194 , v0=3.0000000299998297 , spline0=9.300000051337319 , a0=0.0 , w0=0.0
2026-01-20 16:37:31,031 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:31,031 - INFO - integration_test - Dyn residual k=0: pred=[7.054430493449821, 6.154245227143534, 0.7020988493566194, 3.0000000299998297, 9.600000054337302], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.054430493449821, 6.154245227143534, 0.7020988493566194, 3.0000000299998297, 9.600000054337302], res_norm=1.376e+01
2026-01-20 16:37:31,032 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:31,033 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:31,046 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,248 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,268 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,307 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,326 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,365 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,382 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,423 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,441 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,480 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,497 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,539 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,558 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,597 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,615 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,655 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,675 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,715 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,734 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,775 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:31,793 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:31,832 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:32,417 - INFO - integration_test - Step 34: MPC solve successful
2026-01-20 16:37:32,480 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-20 16:37:32,480 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:32,480 - INFO - integration_test - === Applying control at step 34 ===
2026-01-20 16:37:32,480 - INFO - integration_test -   Control dict from planner: {'a': -2.8258394244498215e-11, 'w': -0.05677397270949268}
2026-01-20 16:37:32,480 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:32,480 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:32,482 - INFO - integration_test - Step 34 completed in 1.768s
2026-01-20 16:37:32,536 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-20 16:37:32,537 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[7.05497925 6.15359399 0.69642145 3.00000003 9.60000005]
2026-01-20 16:37:32,538 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.243m, drift=0.382m)
2026-01-20 16:37:32,538 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-20 16:37:32,539 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:32,686 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(7.055, 6.154), path_start=(0.000, 0.000), dist=9.362m
2026-01-20 16:37:32,686 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-20 16:37:32,830 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:32,855 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:32,855 - INFO - integration_test - Warmstart k=0: x0=7.0549792493406525 , y0=6.153593994018637 , psi0=0.6964214520856701 , v0=3.000000029997004 , spline0=9.60000005433702 , a0=0.0 , w0=0.0
2026-01-20 16:37:32,855 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:32,856 - INFO - integration_test - Dyn residual k=0: pred=[7.285122046325001, 6.3460369590655334, 0.6964214520856701, 3.000000029997004, 9.90000005733672], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.285122046325001, 6.3460369590655334, 0.6964214520856701, 3.000000029997004, 9.90000005733672], res_norm=1.417e+01
2026-01-20 16:37:32,856 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:32,857 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:32,872 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,075 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,094 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,134 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,153 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,194 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,212 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,252 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,272 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,313 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,332 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,374 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,394 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,437 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,456 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,498 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,558 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,577 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,618 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:33,635 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:33,675 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:34,271 - INFO - integration_test - Step 35: MPC solve successful
2026-01-20 16:37:34,353 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-20 16:37:34,354 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:34,354 - INFO - integration_test - === Applying control at step 35 ===
2026-01-20 16:37:34,354 - INFO - integration_test -   Control dict from planner: {'a': -3.988702704629133e-07, 'w': -0.009417695299829037}
2026-01-20 16:37:34,354 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:34,354 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:34,355 - INFO - integration_test - Step 35 completed in 1.818s
2026-01-20 16:37:34,411 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-20 16:37:34,412 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[7.28521263 6.34592856 0.69547968 2.99999999 9.90000005]
2026-01-20 16:37:34,413 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.192m, drift=0.170m)
2026-01-20 16:37:34,413 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-20 16:37:34,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:34,576 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(7.285, 6.346), path_start=(0.000, 0.000), dist=9.662m
2026-01-20 16:37:34,576 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-20 16:37:34,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:34,746 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:34,746 - INFO - integration_test - Warmstart k=0: x0=7.285212629227835 , y0=6.345928558611068 , psi0=0.6954796825556872 , v0=2.999999990109977 , spline0=9.900000053348018 , a0=0.0 , w0=0.0
2026-01-20 16:37:34,746 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:34,747 - INFO - integration_test - Dyn residual k=0: pred=[7.5155365579835705, 6.538154694318784, 0.6954796825556872, 2.999999990109977, 10.200000052359016], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.5155365579835705, 6.538154694318784, 0.6954796825556872, 2.999999990109977, 10.200000052359016], res_norm=1.459e+01
2026-01-20 16:37:34,747 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:34,748 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:34,763 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:34,969 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:34,990 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,030 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,049 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,090 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,111 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,151 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,172 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,216 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,235 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,275 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,294 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,337 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,355 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,395 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,414 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,455 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,476 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,519 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:35,546 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:35,610 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:36,279 - INFO - integration_test - Step 36: MPC solve successful
2026-01-20 16:37:36,342 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-20 16:37:36,342 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:36,342 - INFO - integration_test - === Applying control at step 36 ===
2026-01-20 16:37:36,342 - INFO - integration_test -   Control dict from planner: {'a': 3.9889841291210256e-07, 'w': -0.05125782066132821}
2026-01-20 16:37:36,343 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:36,343 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:36,344 - INFO - integration_test - Step 36 completed in 1.932s
2026-01-20 16:37:36,393 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-20 16:37:36,395 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 7.5160282   6.53756356  0.6903539   3.00000003 10.20000006]
2026-01-20 16:37:36,395 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.301m, drift=0.470m)
2026-01-20 16:37:36,395 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-20 16:37:36,396 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:36,554 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(7.516, 6.538), path_start=(0.000, 0.000), dist=9.961m
2026-01-20 16:37:36,554 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-20 16:37:36,696 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:36,719 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:36,719 - INFO - integration_test - Warmstart k=0: x0=7.516028204506713 , y0=6.537563560006625 , psi0=0.6903539004895544 , v0=3.000000029999818 , spline0=10.200000056348 , a0=0.0 , w0=0.0
2026-01-20 16:37:36,719 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:36,720 - INFO - integration_test - Dyn residual k=0: pred=[7.747334415584912, 6.728606587926089, 0.6903539004895544, 3.000000029999818, 10.50000005934798], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.747334415584912, 6.728606587926089, 0.6903539004895544, 3.000000029999818, 10.50000005934798], res_norm=1.500e+01
2026-01-20 16:37:36,720 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:36,721 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:36,735 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:36,936 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:36,955 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:36,995 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,014 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,054 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,072 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,112 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,130 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,169 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,188 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,228 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,248 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,288 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,306 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,346 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,364 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,403 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,422 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,462 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:37,481 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:37,521 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:39,905 - WARNING - integration_test - Step 37: MPC solve failed
2026-01-20 16:37:39,905 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-20 16:37:39,985 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-20 16:37:39,986 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:39,986 - INFO - integration_test - === Applying control at step 37 ===
2026-01-20 16:37:39,986 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-20 16:37:39,986 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:39,986 - INFO - integration_test -   Planner output success: False
2026-01-20 16:37:39,986 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-20 16:37:39,987 - INFO - integration_test - Step 37 completed in 3.593s
2026-01-20 16:37:40,043 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-20 16:37:40,044 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 7.74733442  6.72860659  0.6903539   3.00000003 10.50000006]
2026-01-20 16:37:40,044 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.175m, drift=0.258m)
2026-01-20 16:37:40,044 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-20 16:37:40,045 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:40,200 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(7.747, 6.729), path_start=(0.000, 0.000), dist=10.261m
2026-01-20 16:37:40,200 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.261m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:40,200 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-20 16:37:40,346 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:40,371 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:40,371 - INFO - integration_test - Warmstart k=0: x0=7.747334415584912 , y0=6.728606587926089 , psi0=0.6903539004895544 , v0=3.000000029999818 , spline0=10.50000005934798 , a0=0.0 , w0=0.0
2026-01-20 16:37:40,371 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:40,372 - INFO - integration_test - Dyn residual k=0: pred=[7.97864062666311, 6.919649615845554, 0.6903539004895544, 3.000000029999818, 10.800000062347962], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.97864062666311, 6.919649615845554, 0.6903539004895544, 3.000000029999818, 10.800000062347962], res_norm=1.542e+01
2026-01-20 16:37:40,373 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:40,374 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:40,388 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,593 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,613 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,654 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,673 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,714 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,732 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,774 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,794 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,837 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,858 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,898 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,916 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:40,956 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:40,974 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:41,016 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:41,034 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:41,075 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:41,096 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:41,138 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:41,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:41,196 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:41,963 - INFO - integration_test - Step 38: MPC solve successful
2026-01-20 16:37:42,024 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-20 16:37:42,024 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:42,024 - INFO - integration_test - === Applying control at step 38 ===
2026-01-20 16:37:42,024 - INFO - integration_test -   Control dict from planner: {'a': -9.610571290763547e-11, 'w': -0.08805538265024915}
2026-01-20 16:37:42,024 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:42,024 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:42,025 - INFO - integration_test - Step 38 completed in 1.982s
2026-01-20 16:37:42,081 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-20 16:37:42,088 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 7.97947875  6.91862877  0.68154836  3.00000003 10.80000006]
2026-01-20 16:37:42,089 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.245m, drift=0.046m)
2026-01-20 16:37:42,089 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-20 16:37:42,090 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:42,256 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(7.979, 6.919), path_start=(0.000, 0.000), dist=10.561m
2026-01-20 16:37:42,256 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.561m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:42,256 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-20 16:37:42,403 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:42,427 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:42,427 - INFO - integration_test - Warmstart k=0: x0=7.979478750435229 , y0=6.9186287657559165 , psi0=0.6815483622245294 , v0=3.0000000299902077 , spline0=10.800000062347001 , a0=0.0 , w0=0.0
2026-01-20 16:37:42,427 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:42,428 - INFO - integration_test - Dyn residual k=0: pred=[8.212458209070764, 7.107627637851243, 0.6815483622245294, 3.0000000299902077, 11.100000065346022], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.212458209070764, 7.107627637851243, 0.6815483622245294, 3.0000000299902077, 11.100000065346022], res_norm=1.583e+01
2026-01-20 16:37:42,429 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:42,429 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:42,444 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:42,655 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:42,674 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:42,714 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:42,733 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:42,773 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:42,791 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:42,833 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:42,851 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:42,892 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:42,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:42,950 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:42,968 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:43,008 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:43,026 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:43,065 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:43,082 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:43,122 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:43,141 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:43,180 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:43,199 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:43,239 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:43,932 - INFO - integration_test - Step 39: MPC solve successful
2026-01-20 16:37:43,994 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-20 16:37:43,995 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:43,995 - INFO - integration_test - === Applying control at step 39 ===
2026-01-20 16:37:43,995 - INFO - integration_test -   Control dict from planner: {'a': 9.597698846173577e-11, 'w': -0.050020124135436134}
2026-01-20 16:37:43,995 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:43,995 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:43,996 - INFO - integration_test - Step 39 completed in 1.908s
2026-01-20 16:37:44,048 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-20 16:37:44,048 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 8.21292992  7.10704417  0.67654635  3.00000003 11.10000007]
2026-01-20 16:37:44,049 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.203m, drift=0.346m)
2026-01-20 16:37:44,049 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-20 16:37:44,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:44,203 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(8.213, 7.107), path_start=(0.000, 0.000), dist=10.861m
2026-01-20 16:37:44,203 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.861m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:44,203 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-20 16:37:44,346 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:44,370 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:44,370 - INFO - integration_test - Warmstart k=0: x0=8.212929923909709 , y0=7.107044167866038 , psi0=0.6765463498109858 , v0=3.0000000299998053 , spline0=11.100000065346983 , a0=0.0 , w0=0.0
2026-01-20 16:37:44,370 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:44,371 - INFO - integration_test - Dyn residual k=0: pred=[8.446851838726248, 7.294875314294291, 0.6765463498109858, 3.0000000299998053, 11.400000068346962], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.446851838726248, 7.294875314294291, 0.6765463498109858, 3.0000000299998053, 11.400000068346962], res_norm=1.625e+01
2026-01-20 16:37:44,372 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:44,372 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:44,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:44,726 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:44,744 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:44,784 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:44,804 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:44,843 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:44,862 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:44,902 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:44,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:44,959 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:44,977 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:45,017 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:45,035 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:45,075 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:45,093 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:45,133 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:45,152 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:45,192 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:45,211 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:45,251 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:45,270 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:45,311 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:45,961 - INFO - integration_test - Step 40: MPC solve successful
2026-01-20 16:37:46,027 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-20 16:37:46,027 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:46,027 - INFO - integration_test - === Applying control at step 40 ===
2026-01-20 16:37:46,027 - INFO - integration_test -   Control dict from planner: {'a': -3.400873124743741e-08, 'w': -0.038839757203242994}
2026-01-20 16:37:46,027 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:46,027 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:46,029 - INFO - integration_test - Step 40 completed in 1.980s
2026-01-20 16:37:46,084 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-20 16:37:46,089 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[ 8.44721602  7.29442057  0.67266237  3.00000003 11.40000007]
2026-01-20 16:37:46,090 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.183m, drift=0.133m)
2026-01-20 16:37:46,090 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-20 16:37:46,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:46,241 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(8.447, 7.294), path_start=(0.000, 0.000), dist=11.161m
2026-01-20 16:37:46,241 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.161m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:46,241 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-20 16:37:46,384 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:46,407 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:46,407 - INFO - integration_test - Warmstart k=0: x0=8.447216015812314 , y0=7.294420568993633 , psi0=0.6726623740906615 , v0=3.0000000265989324 , spline0=11.400000068006875 , a0=0.0 , w0=0.0
2026-01-20 16:37:46,407 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:46,408 - INFO - integration_test - Dyn residual k=0: pred=[8.681865695755802, 7.481341753716913, 0.6726623740906615, 3.0000000265989324, 11.700000070666768], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.681865695755802, 7.481341753716913, 0.6726623740906615, 3.0000000265989324, 11.700000070666768], res_norm=1.666e+01
2026-01-20 16:37:46,408 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:46,409 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:46,424 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,631 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:46,650 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,689 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:46,706 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,748 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:46,767 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,809 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:46,828 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,868 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:46,886 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,925 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:46,943 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:46,982 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:47,000 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:47,039 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:47,059 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:47,100 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:47,120 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:47,159 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:47,178 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:47,218 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:47,806 - INFO - integration_test - Step 41: MPC solve successful
2026-01-20 16:37:47,873 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-20 16:37:47,873 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:47,873 - INFO - integration_test - === Applying control at step 41 ===
2026-01-20 16:37:47,873 - INFO - integration_test -   Control dict from planner: {'a': 3.400863268197528e-08, 'w': -0.032378552191861754}
2026-01-20 16:37:47,873 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:47,873 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:47,875 - INFO - integration_test - Step 41 completed in 1.785s
2026-01-20 16:37:47,927 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-20 16:37:47,928 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[ 8.6821679   7.48096155  0.66942452  3.00000003 11.70000007]
2026-01-20 16:37:47,928 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.262m, drift=0.433m)
2026-01-20 16:37:47,928 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-20 16:37:47,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:48,079 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(8.682, 7.481), path_start=(0.000, 0.000), dist=11.461m
2026-01-20 16:37:48,079 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.461m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:48,079 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-20 16:37:48,241 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:48,267 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:48,268 - INFO - integration_test - Warmstart k=0: x0=8.682167897491922 , y0=7.4809615467047195 , psi0=0.6694245188714754 , v0=3.0000000299997955 , spline0=11.700000071006855 , a0=0.0 , w0=0.0
2026-01-20 16:37:48,268 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:48,269 - INFO - integration_test - Dyn residual k=0: pred=[8.91742157038003, 7.667121991463112, 0.6694245188714754, 3.0000000299997955, 12.000000074006834], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.91742157038003, 7.667121991463112, 0.6694245188714754, 3.0000000299997955, 12.000000074006834], res_norm=1.708e+01
2026-01-20 16:37:48,269 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:48,270 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:48,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,511 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,533 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,574 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,593 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,633 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,652 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,692 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,710 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,749 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,766 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,807 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,824 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,865 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,883 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,923 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:48,979 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:48,997 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:49,037 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:49,058 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:49,102 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:50,131 - INFO - integration_test - Step 42: MPC solve successful
2026-01-20 16:37:50,194 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-20 16:37:50,194 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:50,194 - INFO - integration_test - === Applying control at step 42 ===
2026-01-20 16:37:50,194 - INFO - integration_test -   Control dict from planner: {'a': -3.5947945018275816e-07, 'w': -0.019816161380199204}
2026-01-20 16:37:50,194 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:50,195 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:50,196 - INFO - integration_test - Step 42 completed in 2.268s
2026-01-20 16:37:50,251 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-20 16:37:50,252 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[ 8.91760586  7.66688878  0.6674429   2.99999999 12.00000007]
2026-01-20 16:37:50,252 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.151m, drift=0.221m)
2026-01-20 16:37:50,252 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-20 16:37:50,253 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:50,446 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(8.918, 7.667), path_start=(0.000, 0.000), dist=11.760m
2026-01-20 16:37:50,446 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.760m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:50,446 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-20 16:37:50,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:50,611 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:50,611 - INFO - integration_test - Warmstart k=0: x0=8.917605864213762 , y0=7.666888777352683 , psi0=0.6674429027334554 , v0=2.9999999940518505 , spline0=12.00000007041204 , a0=0.0 , w0=0.0
2026-01-20 16:37:50,611 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:50,612 - INFO - integration_test - Dyn residual k=0: pred=[9.15322797068145, 7.852582672208817, 0.6674429027334554, 2.9999999940518505, 12.300000069817226], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.15322797068145, 7.852582672208817, 0.6674429027334554, 2.9999999940518505, 12.300000069817226], res_norm=1.750e+01
2026-01-20 16:37:50,612 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:50,613 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:50,627 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:50,841 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:50,861 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:50,901 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:50,920 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:50,969 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:50,988 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,028 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,047 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,087 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,105 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,146 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,165 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,205 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,224 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,264 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,323 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,340 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,379 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:51,396 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:51,435 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:52,098 - INFO - integration_test - Step 43: MPC solve successful
2026-01-20 16:37:52,163 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-20 16:37:52,163 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:52,163 - INFO - integration_test - === Applying control at step 43 ===
2026-01-20 16:37:52,163 - INFO - integration_test -   Control dict from planner: {'a': 3.594767451040534e-07, 'w': -0.06754762600974622}
2026-01-20 16:37:52,163 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:52,163 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:52,164 - INFO - integration_test - Step 43 completed in 1.913s
2026-01-20 16:37:52,224 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-20 16:37:52,225 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[ 9.15385334  7.85178548  0.66068814  3.00000003 12.30000007]
2026-01-20 16:37:52,225 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.257m, drift=0.009m)
2026-01-20 16:37:52,225 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-20 16:37:52,226 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:52,378 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(9.154, 7.852), path_start=(0.000, 0.000), dist=12.060m
2026-01-20 16:37:52,378 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.060m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:52,378 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-20 16:37:52,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:52,541 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:52,541 - INFO - integration_test - Warmstart k=0: x0=9.153853337024724 , y0=7.851785478544156 , psi0=0.6606881401324808 , v0=3.000000029999525 , spline0=12.300000073411994 , a0=0.0 , w0=0.0
2026-01-20 16:37:52,541 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:52,542 - INFO - integration_test - Dyn residual k=0: pred=[9.390724379645512, 8.035883580021908, 0.6606881401324808, 3.000000029999525, 12.600000076411947], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.390724379645512, 8.035883580021908, 0.6606881401324808, 3.000000029999525, 12.600000076411947], res_norm=1.792e+01
2026-01-20 16:37:52,542 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:52,543 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:52,557 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:52,756 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:52,774 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:52,813 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:52,832 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:52,871 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:52,888 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:52,928 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:52,947 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:52,987 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,005 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:53,046 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,064 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:53,103 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,121 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:53,161 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,179 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:53,220 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,239 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:53,279 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,297 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:53,336 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:53,816 - INFO - integration_test - Step 44: MPC solve successful
2026-01-20 16:37:53,887 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-20 16:37:53,887 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:53,887 - INFO - integration_test - === Applying control at step 44 ===
2026-01-20 16:37:53,887 - INFO - integration_test -   Control dict from planner: {'a': -3.993552931417301e-07, 'w': -0.021343824404893564}
2026-01-20 16:37:53,887 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:53,888 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:53,889 - INFO - integration_test - Step 44 completed in 1.664s
2026-01-20 16:37:53,938 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-20 16:37:53,940 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[ 9.39092067  8.03563065  0.65855376  2.99999999 12.60000007]
2026-01-20 16:37:53,941 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.169m, drift=0.309m)
2026-01-20 16:37:53,941 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-20 16:37:53,941 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:54,094 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(9.391, 8.036), path_start=(0.000, 0.000), dist=12.360m
2026-01-20 16:37:54,094 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.360m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:54,094 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-20 16:37:54,240 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:54,262 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:54,262 - INFO - integration_test - Warmstart k=0: x0=9.390920666022364 , y0=8.035630652418599 , psi0=0.6585537576919914 , v0=2.999999990063996 , spline0=12.600000072418393 , a0=0.0 , w0=0.0
2026-01-20 16:37:54,262 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:54,263 - INFO - integration_test - Dyn residual k=0: pred=[9.628184101398235, 8.219222759104806, 0.6585537576919914, 2.999999990063996, 12.900000071424792], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.628184101398235, 8.219222759104806, 0.6585537576919914, 2.999999990063996, 12.900000071424792], res_norm=1.833e+01
2026-01-20 16:37:54,264 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:54,264 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:54,279 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,487 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,506 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,545 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,562 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,601 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,619 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,659 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,677 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,716 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,734 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,773 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,793 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,832 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,849 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,888 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:54,945 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:54,963 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:55,002 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:55,020 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:55,060 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:55,634 - INFO - integration_test - Step 45: MPC solve successful
2026-01-20 16:37:55,700 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-20 16:37:55,700 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:55,700 - INFO - integration_test - === Applying control at step 45 ===
2026-01-20 16:37:55,700 - INFO - integration_test -   Control dict from planner: {'a': 3.9935776642916485e-07, 'w': -0.06239025720097372}
2026-01-20 16:37:55,700 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:55,700 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:55,702 - INFO - integration_test - Step 45 completed in 1.762s
2026-01-20 16:37:55,754 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-20 16:37:55,757 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[ 9.62875528  8.21848143  0.65231473  3.00000003 12.90000008]
2026-01-20 16:37:55,758 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.414m, drift=0.609m)
2026-01-20 16:37:55,758 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-20 16:37:55,759 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:55,910 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(9.629, 8.218), path_start=(0.000, 0.000), dist=12.659m
2026-01-20 16:37:55,910 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.659m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:55,910 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-20 16:37:56,059 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:56,081 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:56,081 - INFO - integration_test - Warmstart k=0: x0=9.628755279801664 , y0=8.218481425318307 , psi0=0.652314731971894 , v0=3.0000000299997724 , spline0=12.90000007541837 , a0=0.0 , w0=0.0
2026-01-20 16:37:56,081 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:56,082 - INFO - integration_test - Dyn residual k=0: pred=[9.867159529018632, 8.400589678166114, 0.652314731971894, 3.0000000299997724, 13.200000078418348], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.867159529018632, 8.400589678166114, 0.652314731971894, 3.0000000299997724, 13.200000078418348], res_norm=1.875e+01
2026-01-20 16:37:56,083 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:56,083 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:56,097 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,300 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,318 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,358 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,376 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,416 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,436 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,478 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,496 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,539 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,559 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,599 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,618 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,661 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,679 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,718 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,735 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,775 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,795 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,835 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:56,852 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:56,891 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:57,536 - INFO - integration_test - Step 46: MPC solve successful
2026-01-20 16:37:57,601 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-20 16:37:57,601 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:57,601 - INFO - integration_test - === Applying control at step 46 ===
2026-01-20 16:37:57,602 - INFO - integration_test -   Control dict from planner: {'a': -2.89282713884021e-12, 'w': -0.026233430734516353}
2026-01-20 16:37:57,602 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:57,602 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:57,603 - INFO - integration_test - Step 46 completed in 1.846s
2026-01-20 16:37:57,654 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-20 16:37:57,655 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[ 9.86739812  8.40027676  0.64969139  3.00000003 13.20000008]
2026-01-20 16:37:57,655 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.337m, drift=0.397m)
2026-01-20 16:37:57,655 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-20 16:37:57,656 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:57,804 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(9.867, 8.400), path_start=(0.000, 0.000), dist=12.959m
2026-01-20 16:37:57,804 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.959m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:57,804 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-20 16:37:57,943 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:57,969 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:57,969 - INFO - integration_test - Warmstart k=0: x0=9.867398121646746 , y0=8.400276761401576 , psi0=0.6496913888984424 , v0=3.0000000299994833 , spline0=13.200000078418318 , a0=0.0 , w0=0.0
2026-01-20 16:37:57,969 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:57,970 - INFO - integration_test - Dyn residual k=0: pred=[10.10627928239939, 8.58175897220318, 0.6496913888984424, 3.0000000299994833, 13.500000081418266], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.10627928239939, 8.58175897220318, 0.6496913888984424, 3.0000000299994833, 13.500000081418266], res_norm=1.917e+01
2026-01-20 16:37:57,970 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:57,971 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:57,985 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,184 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,202 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,242 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,261 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,302 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,321 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,361 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,381 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,421 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,439 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,480 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,500 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,541 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,560 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,603 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,624 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,665 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,686 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,726 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:58,745 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:37:58,785 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:37:59,378 - INFO - integration_test - Step 47: MPC solve successful
2026-01-20 16:37:59,442 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-20 16:37:59,443 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:37:59,443 - INFO - integration_test - === Applying control at step 47 ===
2026-01-20 16:37:59,443 - INFO - integration_test -   Control dict from planner: {'a': 1.587480783773765e-12, 'w': -0.06186173614115953}
2026-01-20 16:37:59,443 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:37:59,443 - INFO - integration_test -   Planner output success: True
2026-01-20 16:37:59,444 - INFO - integration_test - Step 47 completed in 1.789s
2026-01-20 16:37:59,496 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-20 16:37:59,498 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[10.1068391   8.58101894  0.64350522  3.00000003 13.50000008]
2026-01-20 16:37:59,499 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.134m, drift=0.697m)
2026-01-20 16:37:59,499 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-20 16:37:59,499 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:59,649 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(10.107, 8.581), path_start=(0.000, 0.000), dist=13.258m
2026-01-20 16:37:59,649 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.258m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:37:59,649 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-20 16:37:59,943 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:37:59,965 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:37:59,965 - INFO - integration_test - Warmstart k=0: x0=10.10683909723057 , y0=8.581018936879003 , psi0=0.6435052152843264 , v0=3.000000029999642 , spline0=13.500000081418282 , a0=0.0 , w0=0.0
2026-01-20 16:37:59,965 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:37:59,966 - INFO - integration_test - Dyn residual k=0: pred=[10.346838360460122, 8.761019924235324, 0.6435052152843264, 3.000000029999642, 13.800000084418246], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.346838360460122, 8.761019924235324, 0.6435052152843264, 3.000000029999642, 13.800000084418246], res_norm=1.959e+01
2026-01-20 16:37:59,967 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:59,967 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:37:59,981 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,184 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,204 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,245 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,264 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,304 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,322 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,361 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,381 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,421 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,441 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,481 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,499 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,539 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,556 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,595 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,613 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,652 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,670 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,709 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:00,729 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:00,768 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:01,493 - INFO - integration_test - Step 48: MPC solve successful
2026-01-20 16:38:01,584 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-20 16:38:01,585 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:01,585 - INFO - integration_test - === Applying control at step 48 ===
2026-01-20 16:38:01,585 - INFO - integration_test -   Control dict from planner: {'a': -1.2642721265938348e-09, 'w': -0.01161160755661838}
2026-01-20 16:38:01,585 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:01,585 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:01,586 - INFO - integration_test - Step 48 completed in 2.089s
2026-01-20 16:38:01,642 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-20 16:38:01,643 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[10.34694281  8.76088054  0.64234405  3.00000003 13.80000008]
2026-01-20 16:38:01,643 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.255m, drift=0.485m)
2026-01-20 16:38:01,643 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-20 16:38:01,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:01,795 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(10.347, 8.761), path_start=(0.000, 0.000), dist=13.558m
2026-01-20 16:38:01,795 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.558m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:01,795 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-20 16:38:01,936 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:01,959 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:01,959 - INFO - integration_test - Warmstart k=0: x0=10.346942811552967 , y0=8.760880544935217 , psi0=0.6423440545286645 , v0=3.0000000298732146 , spline0=13.800000084405603 , a0=0.0 , w0=0.0
2026-01-20 16:38:01,959 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:01,959 - INFO - integration_test - Dyn residual k=0: pred=[10.587150923013127, 8.940602733273598, 0.6423440545286645, 3.0000000298732146, 14.100000087392925], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.587150923013127, 8.940602733273598, 0.6423440545286645, 3.0000000298732146, 14.100000087392925], res_norm=2.001e+01
2026-01-20 16:38:01,960 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:01,961 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:01,975 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,177 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,195 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,235 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,253 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,293 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,311 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,351 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,370 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,410 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,428 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,467 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,486 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,526 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,544 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,584 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,602 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,642 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,661 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,701 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:02,719 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:02,759 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:03,372 - INFO - integration_test - Step 49: MPC solve successful
2026-01-20 16:38:03,444 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-20 16:38:03,444 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:03,445 - INFO - integration_test - === Applying control at step 49 ===
2026-01-20 16:38:03,445 - INFO - integration_test -   Control dict from planner: {'a': 1.265296423151721e-09, 'w': -0.05240575062064706}
2026-01-20 16:38:03,445 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:03,445 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:03,446 - INFO - integration_test - Step 49 completed in 1.804s
2026-01-20 16:38:03,507 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-20 16:38:03,508 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[10.58762075  8.9399725   0.63710348  3.00000003 14.10000009]
2026-01-20 16:38:03,508 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.151m, drift=0.785m)
2026-01-20 16:38:03,508 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-20 16:38:03,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:03,660 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(10.588, 8.940), path_start=(0.000, 0.000), dist=13.857m
2026-01-20 16:38:03,660 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.857m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:03,660 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-20 16:38:03,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:03,833 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:03,833 - INFO - integration_test - Warmstart k=0: x0=10.587620746253497 , y0=8.939972497762543 , psi0=0.6371034794665998 , v0=3.000000029999744 , spline0=14.100000087405578 , a0=0.0 , w0=0.0
2026-01-20 16:38:03,833 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:03,834 - INFO - integration_test - Dyn residual k=0: pred=[10.82876740254561, 9.118433395325898, 0.6371034794665998, 3.000000029999744, 14.400000090405552], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.82876740254561, 9.118433395325898, 0.6371034794665998, 3.000000029999744, 14.400000090405552], res_norm=2.042e+01
2026-01-20 16:38:03,835 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:03,836 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:03,851 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,057 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,076 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,114 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,132 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,170 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,186 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,224 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,244 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,286 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,305 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,345 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,364 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,403 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,421 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,484 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,510 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,567 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,590 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,635 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:04,653 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:04,693 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:05,430 - INFO - integration_test - Step 50: MPC solve successful
2026-01-20 16:38:05,545 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-20 16:38:05,546 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:05,546 - INFO - integration_test - === Applying control at step 50 ===
2026-01-20 16:38:05,546 - INFO - integration_test -   Control dict from planner: {'a': -4.849891236480971e-07, 'w': -0.023418413763293094}
2026-01-20 16:38:05,546 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:05,546 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:05,547 - INFO - integration_test - Step 50 completed in 2.040s
2026-01-20 16:38:05,608 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-20 16:38:05,608 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[10.82897614  9.11815087  0.63476164  2.99999998 14.40000009]
2026-01-20 16:38:05,609 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.180m, drift=0.573m)
2026-01-20 16:38:05,609 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-20 16:38:05,610 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:05,772 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(10.829, 9.118), path_start=(0.000, 0.000), dist=14.157m
2026-01-20 16:38:05,772 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.157m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:05,772 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-20 16:38:05,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:05,944 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:05,944 - INFO - integration_test - Warmstart k=0: x0=10.828976143638757 , y0=9.11815086728694 , psi0=0.6347616380902705 , v0=2.9999999815008316 , spline0=14.40000008555566 , a0=0.0 , w0=0.0
2026-01-20 16:38:05,944 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:05,945 - INFO - integration_test - Dyn residual k=0: pred=[11.070540061507165, 9.29604654591381, 0.6347616380902705, 2.9999999815008316, 14.700000083705744], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.070540061507165, 9.29604654591381, 0.6347616380902705, 2.9999999815008316, 14.700000083705744], res_norm=2.084e+01
2026-01-20 16:38:05,946 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:05,947 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:05,961 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,177 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,199 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,245 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,267 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,311 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,330 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,372 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,391 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,434 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,453 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,493 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,514 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,554 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,574 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,616 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,635 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,677 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,696 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,737 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:06,755 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:06,795 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:07,410 - INFO - integration_test - Step 51: MPC solve successful
2026-01-20 16:38:07,498 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-20 16:38:07,498 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:07,498 - INFO - integration_test - === Applying control at step 51 ===
2026-01-20 16:38:07,498 - INFO - integration_test -   Control dict from planner: {'a': 4.849889573090043e-07, 'w': -0.04552509406958607}
2026-01-20 16:38:07,498 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:07,498 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:07,499 - INFO - integration_test - Step 51 completed in 1.891s
2026-01-20 16:38:07,560 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-20 16:38:07,561 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[11.07094416  9.29549607  0.63020913  3.00000003 14.70000009]
2026-01-20 16:38:07,561 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.210m, drift=0.873m)
2026-01-20 16:38:07,562 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-20 16:38:07,562 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:07,717 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(11.071, 9.295), path_start=(0.000, 0.000), dist=14.456m
2026-01-20 16:38:07,717 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.456m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:07,717 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-20 16:38:07,860 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:07,883 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:07,883 - INFO - integration_test - Warmstart k=0: x0=11.070944164225052 , y0=9.29549607280047 , psi0=0.6302091286833119 , v0=3.000000029999727 , spline0=14.700000088555633 , a0=0.0 , w0=0.0
2026-01-20 16:38:07,883 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:07,884 - INFO - integration_test - Dyn residual k=0: pred=[11.313315451721566, 9.472290192604454, 0.6302091286833119, 3.000000029999727, 15.000000091555606], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.313315451721566, 9.472290192604454, 0.6302091286833119, 3.000000029999727, 15.000000091555606], res_norm=2.126e+01
2026-01-20 16:38:07,885 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:07,886 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:07,901 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,113 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,134 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,177 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,197 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,242 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,264 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,305 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,323 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,363 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,424 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,442 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,481 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,501 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,543 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,562 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,602 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,621 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,662 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:08,680 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:08,721 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:09,393 - INFO - integration_test - Step 52: MPC solve successful
2026-01-20 16:38:09,467 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-20 16:38:09,467 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:09,467 - INFO - integration_test - === Applying control at step 52 ===
2026-01-20 16:38:09,467 - INFO - integration_test -   Control dict from planner: {'a': -6.971487792473762e-05, 'w': -0.03966408313421984}
2026-01-20 16:38:09,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:09,467 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:09,469 - INFO - integration_test - Step 52 completed in 1.908s
2026-01-20 16:38:09,527 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-20 16:38:09,528 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[11.31366515  9.47180885  0.62624272  2.99999306 14.99999939]
2026-01-20 16:38:09,528 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.125m, drift=0.661m)
2026-01-20 16:38:09,529 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-20 16:38:09,529 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:09,684 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(11.314, 9.472), path_start=(0.000, 0.000), dist=14.755m
2026-01-20 16:38:09,684 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.755m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:09,684 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-20 16:38:09,826 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:09,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:09,852 - INFO - integration_test - Warmstart k=0: x0=11.313665152425404 , y0=9.471808853250161 , psi0=0.6262427203698899 , v0=2.9999930585119348 , spline0=14.999999394406826 , a0=0.0 , w0=0.0
2026-01-20 16:38:09,852 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:09,853 - INFO - integration_test - Dyn residual k=0: pred=[11.55673520435727, 9.647639832787435, 0.6262427203698899, 2.9999930585119348, 15.29999870025802], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.55673520435727, 9.647639832787435, 0.6262427203698899, 2.9999930585119348, 15.29999870025802], res_norm=2.168e+01
2026-01-20 16:38:09,853 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:09,854 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:09,870 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,078 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,097 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,138 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,156 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,196 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,215 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,255 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,275 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,315 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,335 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,377 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,396 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,437 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,457 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,498 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,517 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,559 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,580 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,621 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:10,640 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:10,688 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:11,366 - INFO - integration_test - Step 53: MPC solve successful
2026-01-20 16:38:11,453 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-20 16:38:11,454 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:11,454 - INFO - integration_test - === Applying control at step 53 ===
2026-01-20 16:38:11,454 - INFO - integration_test -   Control dict from planner: {'a': 6.971487772912865e-05, 'w': -0.03168091472559745}
2026-01-20 16:38:11,454 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:11,454 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:11,455 - INFO - integration_test - Step 53 completed in 1.927s
2026-01-20 16:38:11,513 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-20 16:38:11,514 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[11.5570136   9.64725471  0.62307463  3.00000003 15.2999994 ]
2026-01-20 16:38:11,514 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.277m, drift=0.449m)
2026-01-20 16:38:11,515 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-20 16:38:11,515 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:11,667 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(11.557, 9.647), path_start=(0.000, 0.000), dist=15.054m
2026-01-20 16:38:11,667 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.054m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:11,667 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-20 16:38:11,806 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:11,829 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:11,829 - INFO - integration_test - Warmstart k=0: x0=11.55701360468833 , y0=9.647254708604128 , psi0=0.6230746288973302 , v0=3.0000000299997076 , spline0=15.299999397406797 , a0=0.0 , w0=0.0
2026-01-20 16:38:11,829 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:11,830 - INFO - integration_test - Dyn residual k=0: pred=[11.800640050639343, 9.82231514569161, 0.6230746288973302, 3.0000000299997076, 15.599999400406768], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.800640050639343, 9.82231514569161, 0.6230746288973302, 3.0000000299997076, 15.599999400406768], res_norm=2.210e+01
2026-01-20 16:38:11,831 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:11,831 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:11,847 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,066 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,085 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,125 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,143 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,182 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,199 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,237 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,257 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,296 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,313 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,351 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,369 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,407 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,426 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,465 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,482 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,520 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,537 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,576 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:12,595 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:12,635 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:13,159 - INFO - integration_test - Step 54: MPC solve successful
2026-01-20 16:38:13,233 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-20 16:38:13,234 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:13,234 - INFO - integration_test - === Applying control at step 54 ===
2026-01-20 16:38:13,234 - INFO - integration_test -   Control dict from planner: {'a': -3.811778071955599e-08, 'w': -0.01850769773086074}
2026-01-20 16:38:13,234 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:13,234 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:13,235 - INFO - integration_test - Step 54 completed in 1.721s
2026-01-20 16:38:13,296 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-20 16:38:13,298 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[11.80080191  9.8220896   0.62122386  3.00000003 15.5999994 ]
2026-01-20 16:38:13,299 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.123m, drift=0.749m)
2026-01-20 16:38:13,299 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-20 16:38:13,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:13,450 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(11.801, 9.822), path_start=(0.000, 0.000), dist=15.354m
2026-01-20 16:38:13,450 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.354m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:13,450 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-20 16:38:13,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:13,622 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:13,622 - INFO - integration_test - Warmstart k=0: x0=11.80080190963667 , y0=9.822089597473404 , psi0=0.6212238591242442 , v0=3.0000000261879296 , spline0=15.59999940002559 , a0=0.0 , w0=0.0
2026-01-20 16:38:13,622 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:13,623 - INFO - integration_test - Dyn residual k=0: pred=[12.044751934405529, 9.996698838312911, 0.6212238591242442, 3.0000000261879296, 15.899999402644383], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.044751934405529, 9.996698838312911, 0.6212238591242442, 3.0000000261879296, 15.899999402644383], res_norm=2.252e+01
2026-01-20 16:38:13,623 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:13,624 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:13,638 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:13,849 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:13,869 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:13,910 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:13,930 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:13,975 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:13,995 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,042 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,061 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,104 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,124 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,163 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,182 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,222 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,241 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,283 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,302 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,343 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,363 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,403 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:14,421 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:14,461 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:15,068 - INFO - integration_test - Step 55: MPC solve successful
2026-01-20 16:38:15,148 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-20 16:38:15,148 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:15,148 - INFO - integration_test - === Applying control at step 55 ===
2026-01-20 16:38:15,148 - INFO - integration_test -   Control dict from planner: {'a': 3.81175561988399e-08, 'w': -0.06645091280267339}
2026-01-20 16:38:15,148 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:15,148 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:15,149 - INFO - integration_test - Step 55 completed in 1.851s
2026-01-20 16:38:15,208 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-20 16:38:15,209 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[12.04533028  9.99588702  0.61457877  3.00000003 15.8999994 ]
2026-01-20 16:38:15,209 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.196m, drift=0.536m)
2026-01-20 16:38:15,209 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-20 16:38:15,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:15,365 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(12.045, 9.996), path_start=(0.000, 0.000), dist=15.653m
2026-01-20 16:38:15,365 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.653m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:15,366 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-20 16:38:15,511 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:15,534 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:15,534 - INFO - integration_test - Warmstart k=0: x0=12.045330284242311 , y0=9.995887021273841 , psi0=0.6145787678439768 , v0=3.0000000299996854 , spline0=15.899999403025559 , a0=0.0 , w0=0.0
2026-01-20 16:38:15,534 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:15,535 - INFO - integration_test - Dyn residual k=0: pred=[12.290435209067292, 10.168871348964304, 0.6145787678439768, 3.0000000299996854, 16.199999406025526], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.290435209067292, 10.168871348964304, 0.6145787678439768, 3.0000000299996854, 16.199999406025526], res_norm=2.294e+01
2026-01-20 16:38:15,535 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:15,536 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:15,550 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:15,929 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:15,949 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:15,991 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,010 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,052 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,071 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,111 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,128 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,167 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,185 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,225 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,243 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,287 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,305 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,347 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,365 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,406 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,425 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,467 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:16,485 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:16,527 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:17,301 - INFO - integration_test - Step 56: MPC solve successful
2026-01-20 16:38:17,380 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-20 16:38:17,381 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:17,381 - INFO - integration_test - === Applying control at step 56 ===
2026-01-20 16:38:17,381 - INFO - integration_test -   Control dict from planner: {'a': -3.878685887922605e-07, 'w': -0.03134173139530004}
2026-01-20 16:38:17,381 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:17,381 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:17,382 - INFO - integration_test - Step 56 completed in 2.173s
2026-01-20 16:38:17,442 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-20 16:38:17,443 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[12.29070589 10.16848696  0.61144459  2.99999999 16.1999994 ]
2026-01-20 16:38:17,444 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.175m, drift=0.836m)
2026-01-20 16:38:17,444 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-20 16:38:17,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:17,589 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(12.291, 10.168), path_start=(0.000, 0.000), dist=15.952m
2026-01-20 16:38:17,589 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.952m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:17,589 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-20 16:38:17,730 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:17,752 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:17,752 - INFO - integration_test - Warmstart k=0: x0=12.290705887396191 , y0=10.168486964322687 , psi0=0.6114445947044468 , v0=2.9999999912128263 , spline0=16.19999940214684 , a0=0.0 , w0=0.0
2026-01-20 16:38:17,752 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:17,753 - INFO - integration_test - Dyn residual k=0: pred=[12.53635176715411, 10.340702240157112, 0.6114445947044468, 2.9999999912128263, 16.499999401268123], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.53635176715411, 10.340702240157112, 0.6114445947044468, 2.9999999912128263, 16.499999401268123], res_norm=2.336e+01
2026-01-20 16:38:17,753 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:17,754 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:17,768 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:17,993 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,016 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,064 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,086 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,133 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,156 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,202 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,223 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,269 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,291 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,340 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,361 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,403 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,461 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,479 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,517 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,537 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,580 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:18,600 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:18,645 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:19,329 - INFO - integration_test - Step 57: MPC solve successful
2026-01-20 16:38:19,452 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-20 16:38:19,453 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:19,453 - INFO - integration_test - === Applying control at step 57 ===
2026-01-20 16:38:19,453 - INFO - integration_test -   Control dict from planner: {'a': 3.878683245324217e-07, 'w': -0.04398330059140462}
2026-01-20 16:38:19,453 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:19,453 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:19,454 - INFO - integration_test - Step 57 completed in 2.011s
2026-01-20 16:38:19,519 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-20 16:38:19,529 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[12.53672971 10.34016147  0.60704626  3.00000003 16.49999941]
2026-01-20 16:38:19,530 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.127m, drift=0.624m)
2026-01-20 16:38:19,530 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-20 16:38:19,530 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:19,714 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(12.537, 10.340), path_start=(0.000, 0.000), dist=16.251m
2026-01-20 16:38:19,714 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.251m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:19,714 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-20 16:38:19,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:19,898 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:19,898 - INFO - integration_test - Warmstart k=0: x0=12.536729705931917 , y0=10.340161471049184 , psi0=0.6070462646453063 , v0=3.0000000299996588 , spline0=16.499999405146806 , a0=0.0 , w0=0.0
2026-01-20 16:38:19,898 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:19,899 - INFO - integration_test - Dyn residual k=0: pred=[12.783130670013987, 10.51129465514685, 0.6070462646453063, 3.0000000299996588, 16.79999940814677], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.783130670013987, 10.51129465514685, 0.6070462646453063, 3.0000000299996588, 16.79999940814677], res_norm=2.378e+01
2026-01-20 16:38:19,900 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:19,901 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:19,917 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,128 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,147 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,189 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,208 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,250 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,269 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,311 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,329 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,369 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,387 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,425 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,442 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,483 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,500 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,540 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,558 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,596 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,613 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,651 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:20,668 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:20,706 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:21,397 - INFO - integration_test - Step 58: MPC solve successful
2026-01-20 16:38:21,497 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-20 16:38:21,498 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:21,498 - INFO - integration_test - === Applying control at step 58 ===
2026-01-20 16:38:21,498 - INFO - integration_test -   Control dict from planner: {'a': -3.932487214417752e-06, 'w': 0.002998141567645697}
2026-01-20 16:38:21,498 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:21,498 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:21,499 - INFO - integration_test - Step 58 completed in 1.970s
2026-01-20 16:38:21,553 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-20 16:38:21,559 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[12.783105   10.51133158  0.60734608  2.99999964 16.79999937]
2026-01-20 16:38:21,560 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.249m, drift=0.924m)
2026-01-20 16:38:21,560 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-20 16:38:21,561 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:21,715 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(12.783, 10.511), path_start=(0.000, 0.000), dist=16.550m
2026-01-20 16:38:21,715 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.550m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:21,715 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-20 16:38:21,857 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:21,880 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:21,880 - INFO - integration_test - Warmstart k=0: x0=12.783104996099866 , y0=10.511331578611845 , psi0=0.6073460788020709 , v0=2.999999636750937 , spline0=16.7999993688219 , a0=0.0 , w0=0.0
2026-01-20 16:38:21,880 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:21,881 - INFO - integration_test - Dyn residual k=0: pred=[13.029454608664883, 10.682538607071903, 0.6073460788020709, 2.999999636750937, 17.099999332496996], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.029454608664883, 10.682538607071903, 0.6073460788020709, 2.999999636750937, 17.099999332496996], res_norm=2.420e+01
2026-01-20 16:38:21,881 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:21,882 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:21,896 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,101 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,120 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,159 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,177 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,222 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,243 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,284 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,304 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,346 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,365 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,407 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,427 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,469 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,488 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,527 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,545 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,589 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,651 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:22,670 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:22,711 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:23,256 - INFO - integration_test - Step 59: MPC solve successful
2026-01-20 16:38:23,362 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-20 16:38:23,362 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:23,362 - INFO - integration_test - === Applying control at step 59 ===
2026-01-20 16:38:23,363 - INFO - integration_test -   Control dict from planner: {'a': 3.932305725738117e-06, 'w': -0.08102292008477027}
2026-01-20 16:38:23,363 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:23,363 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:23,364 - INFO - integration_test - Step 59 completed in 1.805s
2026-01-20 16:38:23,425 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-20 16:38:23,431 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[13.03014551 10.68153875  0.59924379  3.00000003 17.09999937]
2026-01-20 16:38:23,431 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.100m, drift=0.712m)
2026-01-20 16:38:23,431 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-20 16:38:23,432 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:23,583 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(13.030, 10.682), path_start=(0.000, 0.000), dist=16.849m
2026-01-20 16:38:23,584 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.849m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:23,584 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-20 16:38:23,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:23,751 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:23,751 - INFO - integration_test - Warmstart k=0: x0=13.030145510396999 , y0=10.68153875221409 , psi0=0.5992437867935939 , v0=3.0000000299815097 , spline0=17.09999937182005 , a0=0.0 , w0=0.0
2026-01-20 16:38:23,752 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:23,752 - INFO - integration_test - Dyn residual k=0: pred=[13.277874223565773, 10.850744208599615, 0.5992437867935939, 3.0000000299815097, 17.3999993748182], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.277874223565773, 10.850744208599615, 0.5992437867935939, 3.0000000299815097, 17.3999993748182], res_norm=2.462e+01
2026-01-20 16:38:23,753 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:23,754 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:23,769 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:23,976 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:23,997 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,038 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,058 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,098 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,117 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,158 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,177 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,218 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,238 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,279 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,297 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,338 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,358 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,398 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,417 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,458 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,478 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,519 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:24,538 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:24,578 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:25,747 - INFO - integration_test - Step 60: MPC solve successful
2026-01-20 16:38:25,827 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-20 16:38:25,827 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:25,827 - INFO - integration_test - === Applying control at step 60 ===
2026-01-20 16:38:25,827 - INFO - integration_test -   Control dict from planner: {'a': -3.4590482557106505e-09, 'w': -0.015793050915739352}
2026-01-20 16:38:25,827 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:25,827 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:25,829 - INFO - integration_test - Step 60 completed in 2.398s
2026-01-20 16:38:25,893 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-20 16:38:25,904 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[13.27800773 10.85054852  0.59766448  3.00000003 17.39999937]
2026-01-20 16:38:25,905 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.218m, drift=0.500m)
2026-01-20 16:38:25,905 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-20 16:38:25,906 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:26,058 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(13.278, 10.851), path_start=(0.000, 0.000), dist=17.148m
2026-01-20 16:38:26,058 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.148m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:26,058 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-20 16:38:26,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:26,236 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:26,237 - INFO - integration_test - Warmstart k=0: x0=13.278007734062104 , y0=10.850548518682688 , psi0=0.59766448170202 , v0=3.000000029635605 , spline0=17.39999937478361 , a0=0.0 , w0=0.0
2026-01-20 16:38:26,237 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:26,238 - INFO - integration_test - Dyn residual k=0: pred=[13.526003365187009, 11.019362524976883, 0.59766448170202, 3.000000029635605, 17.699999377747172], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.526003365187009, 11.019362524976883, 0.59766448170202, 3.000000029635605, 17.699999377747172], res_norm=2.504e+01
2026-01-20 16:38:26,239 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:26,240 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:26,257 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,481 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,499 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,539 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,557 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,597 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,615 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,658 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,676 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,715 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,733 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,772 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,788 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,829 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,847 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,887 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,906 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:26,946 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:26,965 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:27,008 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:27,026 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:27,067 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:27,731 - INFO - integration_test - Step 61: MPC solve successful
2026-01-20 16:38:27,822 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-20 16:38:27,822 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:27,822 - INFO - integration_test - === Applying control at step 61 ===
2026-01-20 16:38:27,822 - INFO - integration_test -   Control dict from planner: {'a': 3.1704071672320957e-09, 'w': -0.05218369104415484}
2026-01-20 16:38:27,822 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:27,822 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:27,824 - INFO - integration_test - Step 61 completed in 1.920s
2026-01-20 16:38:27,885 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-20 16:38:27,891 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[13.52644271 11.01871469  0.59244611  3.00000003 17.69999938]
2026-01-20 16:38:27,892 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.140m, drift=0.800m)
2026-01-20 16:38:27,892 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-20 16:38:27,893 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:28,043 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(13.526, 11.019), path_start=(0.000, 0.000), dist=17.446m
2026-01-20 16:38:28,044 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.446m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:28,044 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-20 16:38:28,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:28,207 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:28,208 - INFO - integration_test - Warmstart k=0: x0=13.5264427055559 , y0=11.018714693912521 , psi0=0.5924461125976045 , v0=3.0000000299526457 , spline0=17.699999377778877 , a0=0.0 , w0=0.0
2026-01-20 16:38:28,208 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:28,208 - INFO - integration_test - Dyn residual k=0: pred=[13.775315889880286, 11.186232274844787, 0.5924461125976045, 3.0000000299526457, 17.999999380774142], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.775315889880286, 11.186232274844787, 0.5924461125976045, 3.0000000299526457, 17.999999380774142], res_norm=2.546e+01
2026-01-20 16:38:28,209 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:28,210 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:28,224 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,431 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,449 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,489 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,507 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,546 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,565 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,609 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,668 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,686 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,726 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,743 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,783 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,804 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,845 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,864 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,904 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,924 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:28,965 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:28,983 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:29,022 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:30,210 - INFO - integration_test - Step 62: MPC solve successful
2026-01-20 16:38:30,291 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-20 16:38:30,292 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:30,292 - INFO - integration_test - === Applying control at step 62 ===
2026-01-20 16:38:30,292 - INFO - integration_test -   Control dict from planner: {'a': -0.00023146409629282215, 'w': 0.0007304237964862244}
2026-01-20 16:38:30,292 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:30,292 - INFO - integration_test -   Planner output success: True
2026-01-20 16:38:30,294 - INFO - integration_test - Step 62 completed in 2.403s
2026-01-20 16:38:30,349 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-20 16:38:30,350 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[13.77530881 11.18624072  0.59251915  2.99997688 17.99999707]
2026-01-20 16:38:30,351 - DEBUG - integration_test - Step 63: Using propagated spline 18.0000 (close to path, dist=0.140m, drift=0.588m)
2026-01-20 16:38:30,351 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-20 16:38:30,352 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:30,501 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(13.775, 11.186), path_start=(0.000, 0.000), dist=17.745m
2026-01-20 16:38:30,501 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.745m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:30,501 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-20 16:38:30,634 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:30,656 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:30,656 - INFO - integration_test - Warmstart k=0: x0=13.77530881166232 , y0=11.186240717555465 , psi0=0.5925191549772532 , v0=2.9999768835430163 , spline0=17.99999706613318 , a0=0.0 , w0=0.0
2026-01-20 16:38:30,656 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:30,657 - INFO - integration_test - Dyn residual k=0: pred=[14.024167839360954, 11.353775183713374, 0.5925191549772532, 2.9999768835430163, 18.299994754487482], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.024167839360954, 11.353775183713374, 0.5925191549772532, 2.9999768835430163, 18.299994754487482], res_norm=2.588e+01
2026-01-20 16:38:30,658 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:30,658 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:30,672 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:30,880 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:30,901 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:30,944 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:30,964 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,005 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,025 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,066 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,084 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,126 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,144 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,184 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,202 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,242 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,260 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,300 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,319 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,360 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,380 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,419 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:31,436 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:31,478 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:38,081 - WARNING - integration_test - Step 63: MPC solve failed
2026-01-20 16:38:38,081 - WARNING - integration_test -   Consecutive MPC failures: 1/20
2026-01-20 16:38:38,367 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-20 16:38:38,367 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:38:38,368 - INFO - integration_test - === Applying control at step 63 ===
2026-01-20 16:38:38,368 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-20 16:38:38,368 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:38:38,368 - INFO - integration_test -   Planner output success: False
2026-01-20 16:38:38,368 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-20 16:38:38,369 - INFO - integration_test - Step 63 completed in 8.019s
2026-01-20 16:38:38,423 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-20 16:38:38,424 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[14.02416784 11.35377518  0.59251915  2.99997688 18.29999475]
2026-01-20 16:38:38,424 - DEBUG - integration_test - Step 64: Using propagated spline 18.3000 (close to path, dist=0.212m, drift=0.888m)
2026-01-20 16:38:38,425 - DEBUG - integration_test -   Set spline state to 18.3000
2026-01-20 16:38:38,425 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:38,569 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(14.024, 11.354), path_start=(0.000, 0.000), dist=18.044m
2026-01-20 16:38:38,569 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.044m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:38:38,569 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-20 16:38:38,708 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:38:38,731 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:38:38,731 - INFO - integration_test - Warmstart k=0: x0=14.024167839360954 , y0=11.353775183713374 , psi0=0.5925191549772532 , v0=2.9999768835430163 , spline0=18.299994754487482 , a0=0.0 , w0=0.0
2026-01-20 16:38:38,731 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:38:38,732 - INFO - integration_test - Dyn residual k=0: pred=[14.273026867059588, 11.521309649871283, 0.5925191549772532, 2.9999768835430163, 18.599992442841785], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.273026867059588, 11.521309649871283, 0.5925191549772532, 2.9999768835430163, 18.599992442841785], res_norm=2.630e+01
2026-01-20 16:38:38,732 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:38,733 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:38:38,747 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:38,953 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:38,972 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,012 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,032 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,072 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,092 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,132 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,152 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,192 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,211 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,251 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,269 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,310 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,330 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,371 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,390 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,430 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,449 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,490 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:38:39,510 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:38:39,550 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:00,240 - WARNING - integration_test - Step 64: MPC solve failed
2026-01-20 16:39:00,240 - WARNING - integration_test -   Consecutive MPC failures: 2/20
2026-01-20 16:39:00,326 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.300)
2026-01-20 16:39:00,326 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:00,326 - INFO - integration_test - === Applying control at step 64 ===
2026-01-20 16:39:00,326 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-20 16:39:00,326 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:00,326 - INFO - integration_test -   Planner output success: False
2026-01-20 16:39:00,326 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-20 16:39:00,328 - INFO - integration_test - Step 64 completed in 21.904s
2026-01-20 16:39:00,386 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-20 16:39:00,390 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[14.27302687 11.52130965  0.59251915  2.99997688 18.59999244]
2026-01-20 16:39:00,390 - DEBUG - integration_test - Step 65: Using propagated spline 18.6000 (close to path, dist=0.084m, drift=0.676m)
2026-01-20 16:39:00,390 - DEBUG - integration_test -   Set spline state to 18.6000
2026-01-20 16:39:00,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:00,541 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(14.273, 11.521), path_start=(0.000, 0.000), dist=18.343m
2026-01-20 16:39:00,542 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.343m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:00,542 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-20 16:39:00,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:00,704 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:00,704 - INFO - integration_test - Warmstart k=0: x0=14.273026867059588 , y0=11.521309649871283 , psi0=0.5925191549772532 , v0=2.9999768835430163 , spline0=18.599992442841785 , a0=0.0 , w0=0.0
2026-01-20 16:39:00,704 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:00,705 - INFO - integration_test - Dyn residual k=0: pred=[14.521885894758222, 11.688844116029191, 0.5925191549772532, 2.9999768835430163, 18.899990131196088], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.521885894758222, 11.688844116029191, 0.5925191549772532, 2.9999768835430163, 18.899990131196088], res_norm=2.672e+01
2026-01-20 16:39:00,705 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:00,706 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:00,720 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:00,922 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:00,941 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:00,980 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:00,999 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,037 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,055 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,092 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,110 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,148 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,165 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,203 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,220 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,258 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,275 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,313 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,330 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,371 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,389 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,428 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:01,445 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:01,483 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:02,144 - INFO - integration_test - Step 65: MPC solve successful
2026-01-20 16:39:02,254 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.600)
2026-01-20 16:39:02,254 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:02,254 - INFO - integration_test - === Applying control at step 65 ===
2026-01-20 16:39:02,254 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199964867, 'w': -0.11741223191437211}
2026-01-20 16:39:02,254 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:02,254 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:02,256 - INFO - integration_test - Step 65 completed in 1.867s
2026-01-20 16:39:02,318 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-20 16:39:02,320 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[14.5145249  11.68185993  0.58077793  2.79997688 18.87999013]
2026-01-20 16:39:02,320 - DEBUG - integration_test - Step 66: Using propagated spline 18.8800 (close to path, dist=0.252m, drift=0.444m)
2026-01-20 16:39:02,321 - DEBUG - integration_test -   Set spline state to 18.8800
2026-01-20 16:39:02,322 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:02,479 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(14.515, 11.682), path_start=(0.000, 0.000), dist=18.632m
2026-01-20 16:39:02,479 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.632m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:02,479 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-20 16:39:02,622 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:02,645 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:02,645 - INFO - integration_test - Warmstart k=0: x0=14.514524904301263 , y0=11.681859926925211 , psi0=0.5807779317858159 , v0=2.7999768815433677 , spline0=18.87999013099612 , a0=0.0 , w0=0.0
2026-01-20 16:39:02,645 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:02,646 - INFO - integration_test - Dyn residual k=0: pred=[14.748613071566828, 11.835487513373812, 0.5807779317858159, 2.7999768815433677, 19.159987819150455], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.748613071566828, 11.835487513373812, 0.5807779317858159, 2.7999768815433677, 19.159987819150455], res_norm=2.707e+01
2026-01-20 16:39:02,647 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:02,648 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:02,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:02,866 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:02,884 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:02,923 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:02,940 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:02,982 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,000 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,041 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,060 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,100 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,119 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,159 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,176 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,214 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,232 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,270 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,287 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,326 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,343 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,384 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:03,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:03,441 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:04,047 - INFO - integration_test - Step 66: MPC solve successful
2026-01-20 16:39:04,130 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.880)
2026-01-20 16:39:04,131 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:04,131 - INFO - integration_test - === Applying control at step 66 ===
2026-01-20 16:39:04,131 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000192333323, 'w': 0.01020443170572511}
2026-01-20 16:39:04,131 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:04,131 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:04,132 - INFO - integration_test - Step 66 completed in 1.813s
2026-01-20 16:39:04,181 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-20 16:39:04,185 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[14.74017802 11.83011449  0.58179837  2.59997688 19.13998782]
2026-01-20 16:39:04,185 - DEBUG - integration_test - Step 67: Using propagated spline 19.1400 (close to path, dist=0.080m, drift=0.704m)
2026-01-20 16:39:04,185 - DEBUG - integration_test -   Set spline state to 19.1400
2026-01-20 16:39:04,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:04,331 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(14.740, 11.830), path_start=(0.000, 0.000), dist=18.900m
2026-01-20 16:39:04,331 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.900m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:04,331 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-20 16:39:04,471 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:04,492 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:04,492 - INFO - integration_test - Warmstart k=0: x0=14.740178020823793 , y0=11.830114492580048 , psi0=0.5817983749563884 , v0=2.5999768796200344 , spline0=19.139987818958122 , a0=0.0 , w0=0.0
2026-01-20 16:39:04,492 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:04,493 - INFO - integration_test - Dyn residual k=0: pred=[14.95739978294999, 11.972990326101247, 0.5817983749563884, 2.5999768796200344, 19.399985506920125], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.95739978294999, 11.972990326101247, 0.5817983749563884, 2.5999768796200344, 19.399985506920125], res_norm=2.740e+01
2026-01-20 16:39:04,494 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:04,494 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:04,508 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:04,705 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:04,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:04,761 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:04,779 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:04,817 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:04,834 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:04,873 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:04,890 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:04,930 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:04,950 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:04,990 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:05,009 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:05,049 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:05,067 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:05,107 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:05,127 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:05,167 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:05,186 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:05,226 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:05,245 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:05,284 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:05,858 - INFO - integration_test - Step 67: MPC solve successful
2026-01-20 16:39:05,951 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.140)
2026-01-20 16:39:05,952 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:05,952 - INFO - integration_test - === Applying control at step 67 ===
2026-01-20 16:39:05,952 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199161168, 'w': -0.022479452257729283}
2026-01-20 16:39:05,952 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:05,952 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:05,953 - INFO - integration_test - Step 67 completed in 1.769s
2026-01-20 16:39:06,009 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-20 16:39:06,017 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[14.94919721 11.96726331  0.57955043  2.39997688 19.37998551]
2026-01-20 16:39:06,018 - DEBUG - integration_test - Step 68: Using propagated spline 19.3800 (close to path, dist=0.242m, drift=0.432m)
2026-01-20 16:39:06,020 - DEBUG - integration_test -   Set spline state to 19.3800
2026-01-20 16:39:06,021 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:06,172 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(14.949, 11.967), path_start=(0.000, 0.000), dist=19.149m
2026-01-20 16:39:06,172 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=19.149m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:06,172 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-20 16:39:06,317 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:06,339 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:06,339 - INFO - integration_test - Warmstart k=0: x0=14.949197206100667 , y0=11.967263308900959 , psi0=0.5795504297306155 , v0=2.399976877628423 , spline0=19.379985506720963 , a0=0.0 , w0=0.0
2026-01-20 16:39:06,339 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:06,340 - INFO - integration_test - Dyn residual k=0: pred=[15.150005417186112, 12.098697522453497, 0.5795504297306155, 2.399976877628423, 19.619983194483805], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.150005417186112, 12.098697522453497, 0.5795504297306155, 2.399976877628423, 19.619983194483805], res_norm=2.769e+01
2026-01-20 16:39:06,341 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:06,341 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:06,355 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,556 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,574 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,612 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,630 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,669 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,686 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,725 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,742 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,780 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,798 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,837 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,857 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,898 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,917 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:06,957 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:06,976 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:07,016 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:07,035 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:07,075 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:07,092 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:07,131 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:07,802 - INFO - integration_test - Step 68: MPC solve successful
2026-01-20 16:39:07,892 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.380)
2026-01-20 16:39:07,893 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:07,893 - INFO - integration_test - === Applying control at step 68 ===
2026-01-20 16:39:07,893 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999408558065, 'w': -0.02393426071865522}
2026-01-20 16:39:07,893 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:07,894 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:07,896 - INFO - integration_test - Step 68 completed in 1.880s
2026-01-20 16:39:07,953 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-20 16:39:07,959 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[15.1417867  12.09299397  0.577157    2.19997688 19.5999832 ]
2026-01-20 16:39:07,960 - DEBUG - integration_test - Step 69: Using propagated spline 19.6000 (close to path, dist=0.067m, drift=0.652m)
2026-01-20 16:39:07,960 - DEBUG - integration_test -   Set spline state to 19.6000
2026-01-20 16:39:07,961 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:08,108 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(15.142, 12.093), path_start=(0.000, 0.000), dist=19.378m
2026-01-20 16:39:08,108 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.378m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:08,108 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-20 16:39:08,254 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:08,278 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:08,278 - INFO - integration_test - Warmstart k=0: x0=15.141786698891691 , y0=12.092993967620782 , psi0=0.57715700365875 , v0=2.1999768835428424 , spline0=19.599983195075247 , a0=0.0 , w0=0.0
2026-01-20 16:39:08,278 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:08,279 - INFO - integration_test - Dyn residual k=0: pred=[15.326148567133258, 12.213034312587414, 0.57715700365875, 2.1999768835428424, 19.81998088342953], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.326148567133258, 12.213034312587414, 0.57715700365875, 2.1999768835428424, 19.81998088342953], res_norm=2.797e+01
2026-01-20 16:39:08,280 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:08,280 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:08,295 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,500 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,518 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,556 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,574 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,612 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,630 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,671 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,689 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,728 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,745 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,783 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,800 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,838 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,855 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,893 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,911 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:08,950 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:08,968 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:09,006 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:09,024 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:09,062 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:09,690 - INFO - integration_test - Step 69: MPC solve successful
2026-01-20 16:39:09,779 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.600)
2026-01-20 16:39:09,779 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:09,779 - INFO - integration_test - === Applying control at step 69 ===
2026-01-20 16:39:09,779 - INFO - integration_test -   Control dict from planner: {'a': -2.000000018809532, 'w': -0.0022573792579423588}
2026-01-20 16:39:09,779 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:09,779 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:09,780 - INFO - integration_test - Step 69 completed in 1.821s
2026-01-20 16:39:09,829 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-20 16:39:09,833 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[15.31778112 12.20755833  0.57693127  1.99997688 19.79998088]
2026-01-20 16:39:09,833 - DEBUG - integration_test - Step 70: Using propagated spline 19.8000 (close to path, dist=0.218m, drift=0.852m)
2026-01-20 16:39:09,833 - DEBUG - integration_test -   Set spline state to 19.8000
2026-01-20 16:39:09,834 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:09,978 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(15.318, 12.208), path_start=(0.000, 0.000), dist=19.587m
2026-01-20 16:39:09,978 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.587m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:09,978 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-20 16:39:10,112 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:10,134 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:10,134 - INFO - integration_test - Warmstart k=0: x0=15.31778112030024 , y0=12.207558327351851 , psi0=0.5769312657329557 , v0=1.9999768816618892 , spline0=19.799980883241435 , a0=0.0 , w0=0.0
2026-01-20 16:39:10,134 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:10,135 - INFO - integration_test - Dyn residual k=0: pred=[15.485407272373608, 12.316647962115635, 0.5769312657329557, 1.9999768816618892, 19.999978571407624], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.485407272373608, 12.316647962115635, 0.5769312657329557, 1.9999768816618892, 19.999978571407624], res_norm=2.821e+01
2026-01-20 16:39:10,135 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:10,136 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:10,149 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,348 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,367 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,408 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,426 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,464 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,482 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,520 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,537 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,580 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,598 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,640 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,659 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,700 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,719 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,760 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,778 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,817 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,835 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,874 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:10,893 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:10,935 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:11,706 - INFO - integration_test - Step 70: MPC solve successful
2026-01-20 16:39:11,809 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.800)
2026-01-20 16:39:11,809 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:11,809 - INFO - integration_test - === Applying control at step 70 ===
2026-01-20 16:39:11,809 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000195908836, 'w': -0.21739330424029205}
2026-01-20 16:39:11,809 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:11,809 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:11,810 - INFO - integration_test - Step 70 completed in 1.978s
2026-01-20 16:39:11,870 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-20 16:39:11,871 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[15.49503925 12.32014984  0.55519194  2.19997688 20.01997857]
2026-01-20 16:39:11,872 - DEBUG - integration_test - Step 71: Using propagated spline 20.0200 (close to path, dist=0.112m, drift=0.560m)
2026-01-20 16:39:11,872 - DEBUG - integration_test -   Set spline state to 20.0200
2026-01-20 16:39:11,873 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:12,025 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(15.495, 12.320), path_start=(0.000, 0.000), dist=19.796m
2026-01-20 16:39:12,025 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.796m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:12,025 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-20 16:39:12,171 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:12,195 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:12,195 - INFO - integration_test - Warmstart k=0: x0=15.495039253044567 , y0=12.320149836969572 , psi0=0.5551919353089265 , v0=2.1999768836209777 , spline0=20.019978571603534 , a0=0.0 , w0=0.0
2026-01-20 16:39:12,195 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:12,196 - INFO - integration_test - Dyn residual k=0: pred=[15.681993131446246, 12.436112030098354, 0.5551919353089265, 2.1999768836209777, 20.239976259965633], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.681993131446246, 12.436112030098354, 0.5551919353089265, 2.1999768836209777, 20.239976259965633], res_norm=2.855e+01
2026-01-20 16:39:12,197 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:12,198 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:12,213 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,432 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,452 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,494 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,515 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,559 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,578 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,621 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,639 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,681 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,701 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,743 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,762 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,804 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,823 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,864 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,882 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,920 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,938 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:12,976 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:12,992 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:13,030 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:13,726 - INFO - integration_test - Step 71: MPC solve successful
2026-01-20 16:39:13,831 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.020)
2026-01-20 16:39:13,831 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:13,831 - INFO - integration_test - === Applying control at step 71 ===
2026-01-20 16:39:13,831 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199960155, 'w': 0.002006133403450048}
2026-01-20 16:39:13,831 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:13,831 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:13,832 - INFO - integration_test - Step 71 completed in 1.962s
2026-01-20 16:39:13,884 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-20 16:39:13,887 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[15.69047879 12.44140298  0.55539255  2.39997689 20.25997626]
2026-01-20 16:39:13,888 - DEBUG - integration_test - Step 72: Using propagated spline 20.2600 (close to path, dist=0.150m, drift=0.800m)
2026-01-20 16:39:13,888 - DEBUG - integration_test -   Set spline state to 20.2600
2026-01-20 16:39:13,889 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:14,035 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(15.690, 12.441), path_start=(0.000, 0.000), dist=20.024m
2026-01-20 16:39:14,035 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.024m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:14,035 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-20 16:39:14,182 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:14,206 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:14,206 - INFO - integration_test - Warmstart k=0: x0=15.690478786302315 , y0=12.441402982745638 , psi0=0.5553925486492716 , v0=2.399976885620579 , spline0=20.259976260165594 , a0=0.0 , w0=0.0
2026-01-20 16:39:14,206 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:14,207 - INFO - integration_test - Dyn residual k=0: pred=[15.89440326802733, 12.56794821682545, 0.5553925486492716, 2.399976885620579, 20.499973948727654], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.89440326802733, 12.56794821682545, 0.5553925486492716, 2.399976885620579, 20.499973948727654], res_norm=2.893e+01
2026-01-20 16:39:14,207 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:14,208 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:14,222 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,430 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,449 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,491 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,512 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,553 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,573 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,614 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,633 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,672 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,691 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,730 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,747 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,785 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,802 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,841 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,858 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,900 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,918 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:14,956 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:14,974 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:15,011 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:15,543 - INFO - integration_test - Step 72: MPC solve successful
2026-01-20 16:39:15,634 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.260)
2026-01-20 16:39:15,634 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:15,634 - INFO - integration_test - === Applying control at step 72 ===
2026-01-20 16:39:15,634 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000194995518, 'w': -0.056585377435153954}
2026-01-20 16:39:15,635 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:15,635 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:15,636 - INFO - integration_test - Step 72 completed in 1.749s
2026-01-20 16:39:15,690 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-20 16:39:15,691 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[15.90327697 12.57261126  0.54973401  2.59997689 20.51997395]
2026-01-20 16:39:15,691 - DEBUG - integration_test - Step 73: Using propagated spline 20.5200 (close to path, dist=0.139m, drift=0.547m)
2026-01-20 16:39:15,692 - DEBUG - integration_test -   Set spline state to 20.5200
2026-01-20 16:39:15,693 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:15,840 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(15.903, 12.573), path_start=(0.000, 0.000), dist=20.273m
2026-01-20 16:39:15,840 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.273m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:15,840 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-20 16:39:15,976 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:15,998 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:15,998 - INFO - integration_test - Warmstart k=0: x0=15.903276967335245 , y0=12.572611259201667 , psi0=0.5497340109057561 , v0=2.5999768875705342 , spline0=20.519973948922647 , a0=0.0 , w0=0.0
2026-01-20 16:39:15,998 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:15,999 - INFO - integration_test - Dyn residual k=0: pred=[16.124967512083302, 12.708449768205263, 0.5497340109057561, 2.5999768875705342, 20.7799716376797], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.124967512083302, 12.708449768205263, 0.5497340109057561, 2.5999768875705342, 20.7799716376797], res_norm=2.933e+01
2026-01-20 16:39:16,000 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:16,000 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:16,014 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,211 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,229 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,267 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,285 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,324 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,341 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,389 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,409 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,448 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,466 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,504 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,521 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,559 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,576 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,614 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,631 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,670 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,687 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,725 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:16,742 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:16,781 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:17,337 - INFO - integration_test - Step 73: MPC solve successful
2026-01-20 16:39:17,657 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.520)
2026-01-20 16:39:17,657 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:17,657 - INFO - integration_test - === Applying control at step 73 ===
2026-01-20 16:39:17,657 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199960635, 'w': -0.04449854637514103}
2026-01-20 16:39:17,657 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:17,657 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:17,658 - INFO - integration_test - Step 73 completed in 1.968s
2026-01-20 16:39:17,717 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-20 16:39:17,718 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[16.1338111  12.71315536  0.54528416  2.79997689 20.79997164]
2026-01-20 16:39:17,719 - DEBUG - integration_test - Step 74: Using propagated spline 20.8000 (close to path, dist=0.158m, drift=0.827m)
2026-01-20 16:39:17,719 - DEBUG - integration_test -   Set spline state to 20.8000
2026-01-20 16:39:17,720 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:17,870 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(16.134, 12.713), path_start=(0.000, 0.000), dist=20.541m
2026-01-20 16:39:17,870 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.541m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:17,870 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-20 16:39:18,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:18,030 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:18,030 - INFO - integration_test - Warmstart k=0: x0=16.133811102979347 , y0=12.713155359240762 , psi0=0.545284156268242 , v0=2.7999768895701407 , spline0=20.79997163787966 , a0=0.0 , w0=0.0
2026-01-20 16:39:18,030 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:18,031 - INFO - integration_test - Dyn residual k=0: pred=[16.37320351154646, 12.85837925721112, 0.545284156268242, 2.7999768895701407, 21.079969326836675], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.37320351154646, 12.85837925721112, 0.545284156268242, 2.7999768895701407, 21.079969326836675], res_norm=2.976e+01
2026-01-20 16:39:18,031 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:18,032 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:18,048 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,261 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,280 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,322 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,341 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,383 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,406 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,452 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,472 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,515 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,534 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,574 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,593 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,634 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,654 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,698 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,718 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,761 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,781 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,824 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:18,844 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:18,888 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:19,513 - INFO - integration_test - Step 74: MPC solve successful
2026-01-20 16:39:19,609 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=20.800)
2026-01-20 16:39:19,609 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:19,609 - INFO - integration_test - === Applying control at step 74 ===
2026-01-20 16:39:19,610 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199935966, 'w': -0.04823118155611851}
2026-01-20 16:39:19,610 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:19,610 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:19,611 - INFO - integration_test - Step 74 completed in 1.893s
2026-01-20 16:39:19,671 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-20 16:39:19,672 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[16.38211923 12.86296048  0.54046104  2.99997689 21.09996933]
2026-01-20 16:39:19,672 - DEBUG - integration_test - Step 75: Using propagated spline 21.1000 (close to path, dist=0.099m, drift=0.615m)
2026-01-20 16:39:19,673 - DEBUG - integration_test -   Set spline state to 21.1000
2026-01-20 16:39:19,673 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:19,827 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(16.382, 12.863), path_start=(0.000, 0.000), dist=20.829m
2026-01-20 16:39:19,827 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.829m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:19,827 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-20 16:39:19,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:19,988 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:19,988 - INFO - integration_test - Warmstart k=0: x0=16.38211922559358 , y0=12.862960475770286 , psi0=0.5404610381126301 , v0=2.9999768915695 , spline0=21.09996932703661 , a0=0.0 , w0=0.0
2026-01-20 16:39:19,988 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:19,989 - INFO - integration_test - Dyn residual k=0: pred=[16.63935871029021, 13.017318698785848, 0.5404610381126301, 2.9999768915695, 21.39996701619356], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.63935871029021, 13.017318698785848, 0.5404610381126301, 2.9999768915695, 21.39996701619356], res_norm=3.023e+01
2026-01-20 16:39:19,989 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:19,990 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:20,004 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,206 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,227 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,266 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,285 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,325 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,343 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,382 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,400 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,441 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,460 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,500 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,518 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,557 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,575 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,613 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,631 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,670 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,688 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,729 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:20,748 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:20,789 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:21,417 - INFO - integration_test - Step 75: MPC solve successful
2026-01-20 16:39:21,695 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.100)
2026-01-20 16:39:21,696 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:21,696 - INFO - integration_test - === Applying control at step 75 ===
2026-01-20 16:39:21,696 - INFO - integration_test -   Control dict from planner: {'a': 0.0002313809348300534, 'w': -0.020455718806549998}
2026-01-20 16:39:21,696 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:21,696 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:21,697 - INFO - integration_test - Step 75 completed in 2.026s
2026-01-20 16:39:21,760 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-20 16:39:21,761 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[16.6395174  13.01705608  0.53841547  3.00000003 21.39996933]
2026-01-20 16:39:21,761 - DEBUG - integration_test - Step 76: Using propagated spline 21.4000 (close to path, dist=0.232m, drift=0.915m)
2026-01-20 16:39:21,762 - DEBUG - integration_test -   Set spline state to 21.4000
2026-01-20 16:39:21,762 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:21,931 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(16.640, 13.017), path_start=(0.000, 0.000), dist=21.126m
2026-01-20 16:39:21,931 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.126m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:21,931 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-20 16:39:22,114 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:22,138 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:22,138 - INFO - integration_test - Warmstart k=0: x0=16.639517399081768 , y0=13.01705608421117 , psi0=0.5384154662319751 , v0=3.000000029662983 , spline0=21.39996933000291 , a0=0.0 , w0=0.0
2026-01-20 16:39:22,139 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:22,140 - INFO - integration_test - Dyn residual k=0: pred=[16.897074082663927, 13.170888969258352, 0.5384154662319751, 3.000000029662983, 21.69996933296921], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.897074082663927, 13.170888969258352, 0.5384154662319751, 3.000000029662983, 21.69996933296921], res_norm=3.065e+01
2026-01-20 16:39:22,141 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:22,141 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:22,158 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,393 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,417 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,466 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,488 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,536 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,558 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,606 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,629 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,676 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,741 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,760 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,802 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,822 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,864 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,883 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,925 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:22,944 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:22,987 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:23,007 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:23,055 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:23,614 - INFO - integration_test - Step 76: MPC solve successful
2026-01-20 16:39:23,708 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.400)
2026-01-20 16:39:23,708 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:23,708 - INFO - integration_test - === Applying control at step 76 ===
2026-01-20 16:39:23,708 - INFO - integration_test -   Control dict from planner: {'a': -1.1377042709318724e-06, 'w': -0.07809644493090677}
2026-01-20 16:39:23,708 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:23,708 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:23,709 - INFO - integration_test - Step 76 completed in 1.949s
2026-01-20 16:39:23,769 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-20 16:39:23,771 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[16.89767215 13.16988169  0.53060582  2.99999992 21.69996932]
2026-01-20 16:39:23,771 - DEBUG - integration_test - Step 77: Using propagated spline 21.7000 (close to path, dist=0.066m, drift=0.703m)
2026-01-20 16:39:23,772 - DEBUG - integration_test -   Set spline state to 21.7000
2026-01-20 16:39:23,772 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:23,931 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(16.898, 13.170), path_start=(0.000, 0.000), dist=21.424m
2026-01-20 16:39:23,932 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.424m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:23,932 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-20 16:39:24,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:24,121 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:24,121 - INFO - integration_test - Warmstart k=0: x0=16.897672146704988 , y0=13.16988169469032 , psi0=0.5306058217388845 , v0=2.999999915892556 , spline0=21.699969321592167 , a0=0.0 , w0=0.0
2026-01-20 16:39:24,121 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:24,122 - INFO - integration_test - Dyn residual k=0: pred=[17.1564223341843, 13.321698477138684, 0.5306058217388845, 2.999999915892556, 21.999969313181424], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.1564223341843, 13.321698477138684, 0.5306058217388845, 2.999999915892556, 21.999969313181424], res_norm=3.107e+01
2026-01-20 16:39:24,123 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:24,124 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:24,140 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,355 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,373 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,411 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,432 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,474 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,495 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,542 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,563 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,610 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,630 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,673 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,694 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,737 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,756 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,800 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,819 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,863 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,884 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,927 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:24,949 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:24,990 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:25,601 - INFO - integration_test - Step 77: MPC solve successful
2026-01-20 16:39:25,748 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=21.700)
2026-01-20 16:39:25,748 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:25,748 - INFO - integration_test - === Applying control at step 77 ===
2026-01-20 16:39:25,748 - INFO - integration_test -   Control dict from planner: {'a': 1.115558986238214e-06, 'w': 0.030726382607374758}
2026-01-20 16:39:25,748 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:25,748 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:25,749 - INFO - integration_test - Step 77 completed in 1.978s
2026-01-20 16:39:25,809 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-20 16:39:25,817 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[17.15618869 13.32209576  0.53367846  3.00000003 21.99996932]
2026-01-20 16:39:25,818 - DEBUG - integration_test - Step 78: Using propagated spline 22.0000 (close to path, dist=0.211m, drift=0.491m)
2026-01-20 16:39:25,819 - DEBUG - integration_test -   Set spline state to 22.0000
2026-01-20 16:39:25,819 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:25,978 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(17.156, 13.322), path_start=(0.000, 0.000), dist=21.721m
2026-01-20 16:39:25,978 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=21.721m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:25,978 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-20 16:39:26,129 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:26,153 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:26,153 - INFO - integration_test - Warmstart k=0: x0=17.15618869299789 , y0=13.322095763635197 , psi0=0.5336784599996219 , v0=3.0000000274484546 , spline0=21.999969324337012 , a0=0.0 , w0=0.0
2026-01-20 16:39:26,153 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:26,155 - INFO - integration_test - Dyn residual k=0: pred=[17.414471191318157, 13.47470687957486, 0.5336784599996219, 3.0000000274484546, 22.299969327081858], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.414471191318157, 13.47470687957486, 0.5336784599996219, 3.0000000274484546, 22.299969327081858], res_norm=3.149e+01
2026-01-20 16:39:26,156 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:26,156 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:26,172 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,410 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,434 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,483 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,505 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,552 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,575 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,621 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,641 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,688 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,712 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,763 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,785 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,836 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,864 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,911 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:26,932 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:26,980 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:27,004 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:27,048 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:27,067 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:27,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:27,870 - INFO - integration_test - Step 78: MPC solve successful
2026-01-20 16:39:27,975 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.000)
2026-01-20 16:39:27,976 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:27,976 - INFO - integration_test - === Applying control at step 78 ===
2026-01-20 16:39:27,976 - INFO - integration_test -   Control dict from planner: {'a': 2.548154387562021e-08, 'w': -0.024000527961210834}
2026-01-20 16:39:27,976 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:27,976 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:27,977 - INFO - integration_test - Step 78 completed in 2.160s
2026-01-20 16:39:28,060 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-20 16:39:28,061 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[17.41465408 13.47439679  0.53127841  3.00000003 22.29996933]
2026-01-20 16:39:28,062 - DEBUG - integration_test - Step 79: Using propagated spline 22.3000 (close to path, dist=0.119m, drift=0.791m)
2026-01-20 16:39:28,062 - DEBUG - integration_test -   Set spline state to 22.3000
2026-01-20 16:39:28,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:28,216 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(17.415, 13.474), path_start=(0.000, 0.000), dist=22.019m
2026-01-20 16:39:28,216 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.019m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:28,216 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-20 16:39:28,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:28,382 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:28,382 - INFO - integration_test - Warmstart k=0: x0=17.414654080745773 , y0=13.474396787459064 , psi0=0.5312784072035008 , v0=3.000000029996609 , spline0=22.299969327336672 , a0=0.0 , w0=0.0
2026-01-20 16:39:28,382 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:28,383 - INFO - integration_test - Dyn residual k=0: pred=[17.673302109783656, 13.626387572951524, 0.5312784072035008, 3.000000029996609, 22.599969330336332], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.673302109783656, 13.626387572951524, 0.5312784072035008, 3.000000029996609, 22.599969330336332], res_norm=3.191e+01
2026-01-20 16:39:28,384 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:28,385 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:28,401 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:28,612 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:28,637 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:28,685 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:28,708 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:28,756 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:28,778 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:28,824 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:28,845 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:28,890 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:28,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:28,953 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:28,974 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:29,019 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:29,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:29,086 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:29,108 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:29,152 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:29,173 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:29,215 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:29,235 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:29,277 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:30,749 - INFO - integration_test - Step 79: MPC solve successful
2026-01-20 16:39:30,891 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.300)
2026-01-20 16:39:30,892 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:30,892 - INFO - integration_test - === Applying control at step 79 ===
2026-01-20 16:39:30,892 - INFO - integration_test -   Control dict from planner: {'a': -1.2257326589431715e-05, 'w': -0.003998819955660508}
2026-01-20 16:39:30,892 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:30,892 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:30,893 - INFO - integration_test - Step 79 completed in 2.832s
2026-01-20 16:39:30,962 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-20 16:39:30,968 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[17.67333244 13.62633582  0.53087853  2.9999988  22.59996921]
2026-01-20 16:39:30,969 - DEBUG - integration_test - Step 80: Using propagated spline 22.6000 (close to path, dist=0.130m, drift=0.579m)
2026-01-20 16:39:30,969 - DEBUG - integration_test -   Set spline state to 22.6000
2026-01-20 16:39:30,971 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:31,152 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(17.673, 13.626), path_start=(0.000, 0.000), dist=22.316m
2026-01-20 16:39:31,152 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=22.316m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:31,152 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-20 16:39:31,312 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:31,341 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:31,341 - INFO - integration_test - Warmstart k=0: x0=17.67333243923218 , y0=13.626335823520593 , psi0=0.5308785252079348 , v0=2.9999988042639503 , spline0=22.599969207763067 , a0=0.0 , w0=0.0
2026-01-20 16:39:31,341 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:31,342 - INFO - integration_test - Dyn residual k=0: pred=[17.932041120264817, 13.778223106115961, 0.5308785252079348, 2.9999988042639503, 22.89996908818946], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.932041120264817, 13.778223106115961, 0.5308785252079348, 2.9999988042639503, 22.89996908818946], res_norm=3.233e+01
2026-01-20 16:39:31,343 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:31,344 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:31,360 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,574 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,593 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,634 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,653 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,695 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,714 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,758 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,777 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,818 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,839 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,881 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,899 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:31,940 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:31,959 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:32,000 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:32,019 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:32,060 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:32,078 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:32,119 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:32,138 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:32,179 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:32,879 - INFO - integration_test - Step 80: MPC solve successful
2026-01-20 16:39:33,008 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.600)
2026-01-20 16:39:33,008 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:33,008 - INFO - integration_test - === Applying control at step 80 ===
2026-01-20 16:39:33,008 - INFO - integration_test -   Control dict from planner: {'a': 1.2257353961281355e-05, 'w': -0.006361867563146227}
2026-01-20 16:39:33,008 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:33,008 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:33,010 - INFO - integration_test - Step 80 completed in 2.042s
2026-01-20 16:39:33,070 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-20 16:39:33,073 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[17.93208947 13.77814083  0.53024234  3.00000003 22.89996921]
2026-01-20 16:39:33,074 - DEBUG - integration_test - Step 81: Using propagated spline 22.9000 (close to path, dist=0.197m, drift=0.879m)
2026-01-20 16:39:33,074 - DEBUG - integration_test -   Set spline state to 22.9000
2026-01-20 16:39:33,075 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:33,226 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(17.932, 13.778), path_start=(0.000, 0.000), dist=22.614m
2026-01-20 16:39:33,226 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=22.614m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:33,226 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-20 16:39:33,371 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:33,396 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:33,397 - INFO - integration_test - Warmstart k=0: x0=17.93208947001523 , y0=13.778140833361311 , psi0=0.5302423384516202 , v0=3.0000000299993466 , spline0=22.899969210763 , a0=0.0 , w0=0.0
2026-01-20 16:39:33,397 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:33,397 - INFO - integration_test - Dyn residual k=0: pred=[18.19089483310724, 13.929863560184861, 0.5302423384516202, 3.0000000299993466, 23.199969213762934], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.19089483310724, 13.929863560184861, 0.5302423384516202, 3.0000000299993466, 23.199969213762934], res_norm=3.275e+01
2026-01-20 16:39:33,398 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:33,399 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:33,414 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,622 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:33,643 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,685 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:33,704 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,746 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:33,765 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,805 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:33,824 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,865 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:33,884 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,924 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:33,943 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:33,985 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:34,005 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:34,046 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:34,065 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:34,105 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:34,123 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:34,164 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:34,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:34,221 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:34,943 - INFO - integration_test - Step 81: MPC solve successful
2026-01-20 16:39:35,066 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=22.900)
2026-01-20 16:39:35,066 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:35,066 - INFO - integration_test - === Applying control at step 81 ===
2026-01-20 16:39:35,066 - INFO - integration_test -   Control dict from planner: {'a': -1.6680987910245128e-06, 'w': -0.01261876873348334}
2026-01-20 16:39:35,066 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:35,066 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:35,068 - INFO - integration_test - Step 81 completed in 1.995s
2026-01-20 16:39:35,132 - INFO - integration_test - Step 82 (contouring until path end)
2026-01-20 16:39:35,133 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[18.19099048 13.92970023  0.52898046  2.99999986 23.1999692 ]
2026-01-20 16:39:35,133 - DEBUG - integration_test - Step 82: Using propagated spline 23.2000 (close to path, dist=0.065m, drift=0.667m)
2026-01-20 16:39:35,134 - DEBUG - integration_test -   Set spline state to 23.2000
2026-01-20 16:39:35,135 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:35,291 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(18.191, 13.930), path_start=(0.000, 0.000), dist=22.912m
2026-01-20 16:39:35,291 - WARNING - integration_test - Step 82: Vehicle is far from path start (dist=22.912m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:35,291 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2026-01-20 16:39:35,435 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:35,462 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:35,462 - INFO - integration_test - Warmstart k=0: x0=18.19099048491179 , y0=13.92970022547773 , psi0=0.5289804615782718 , v0=2.9999998631894673 , spline0=23.19996919708195 , a0=0.0 , w0=0.0
2026-01-20 16:39:35,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:35,463 - INFO - integration_test - Dyn residual k=0: pred=[18.449987082899902, 14.081096242670894, 0.5289804615782718, 2.9999998631894673, 23.499969183400896], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.449987082899902, 14.081096242670894, 0.5289804615782718, 2.9999998631894673, 23.499969183400896], res_norm=3.317e+01
2026-01-20 16:39:35,464 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:35,465 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:35,479 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:35,687 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:35,706 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:35,748 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:35,768 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:35,809 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:35,828 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:35,869 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:35,887 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:35,928 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:35,947 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:35,988 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:36,006 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:36,047 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:36,066 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:36,106 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:36,126 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:36,168 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:36,186 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:36,226 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:36,245 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:36,287 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:36,960 - INFO - integration_test - Step 82: MPC solve successful
2026-01-20 16:39:37,080 - INFO - integration_test - Step 82: Computed 6 numeric contouring constraints for visualization (s=23.200)
2026-01-20 16:39:37,081 - DEBUG - integration_test - Step 82: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:37,081 - INFO - integration_test - === Applying control at step 82 ===
2026-01-20 16:39:37,081 - INFO - integration_test -   Control dict from planner: {'a': 1.3686853751532394e-06, 'w': -0.05770254214799595}
2026-01-20 16:39:37,081 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:37,081 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:37,082 - INFO - integration_test - Step 82 completed in 1.949s
2026-01-20 16:39:37,138 - INFO - integration_test - Step 83 (contouring until path end)
2026-01-20 16:39:37,141 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[18.45042245 14.08034817  0.52321021  3.         23.4999692 ]
2026-01-20 16:39:37,142 - DEBUG - integration_test - Step 83: Using propagated spline 23.5000 (close to path, dist=0.245m, drift=0.455m)
2026-01-20 16:39:37,142 - DEBUG - integration_test -   Set spline state to 23.5000
2026-01-20 16:39:37,145 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:37,297 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(18.450, 14.080), path_start=(0.000, 0.000), dist=23.209m
2026-01-20 16:39:37,297 - WARNING - integration_test - Step 83: Vehicle is far from path start (dist=23.209m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:37,297 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2026-01-20 16:39:37,455 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:37,481 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:37,481 - INFO - integration_test - Warmstart k=0: x0=18.450422447113635 , y0=14.08034816992813 , psi0=0.5232102073634722 , v0=3.0000000000580047 , spline0=23.49996919708775 , a0=0.0 , w0=0.0
2026-01-20 16:39:37,481 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:37,482 - INFO - integration_test - Dyn residual k=0: pred=[18.710288333874185, 14.230247205620934, 0.5232102073634722, 3.0000000000580047, 23.799969197093553], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.710288333874185, 14.230247205620934, 0.5232102073634722, 3.0000000000580047, 23.799969197093553], res_norm=3.359e+01
2026-01-20 16:39:37,483 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:37,483 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:37,498 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:37,704 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:37,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:37,764 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:37,783 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:37,824 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:37,843 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:37,886 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:37,905 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:37,946 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:37,964 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:38,005 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:38,024 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:38,065 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:38,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:38,127 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:38,147 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:38,187 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:38,206 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:38,246 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:38,264 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:38,305 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:39,115 - INFO - integration_test - Step 83: MPC solve successful
2026-01-20 16:39:39,242 - INFO - integration_test - Step 83: Computed 6 numeric contouring constraints for visualization (s=23.500)
2026-01-20 16:39:39,243 - DEBUG - integration_test - Step 83: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:39,243 - INFO - integration_test - === Applying control at step 83 ===
2026-01-20 16:39:39,243 - INFO - integration_test -   Control dict from planner: {'a': 2.9890276953941747e-07, 'w': -0.04510504038059099}
2026-01-20 16:39:39,243 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:39,243 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:39,244 - INFO - integration_test - Step 83 completed in 2.104s
2026-01-20 16:39:39,304 - INFO - integration_test - Step 84 (contouring until path end)
2026-01-20 16:39:39,305 - DEBUG - integration_test - Syncing planner state at step 84: vehicle_state=[18.71062551 14.22966064  0.5186997   3.00000003 23.7999692 ]
2026-01-20 16:39:39,305 - DEBUG - integration_test - Step 84: Using propagated spline 23.8000 (close to path, dist=0.083m, drift=0.755m)
2026-01-20 16:39:39,305 - DEBUG - integration_test -   Set spline state to 23.8000
2026-01-20 16:39:39,306 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:39,751 - DEBUG - integration_test - Step 84: Checking path alignment: vehicle=(18.711, 14.230), path_start=(0.000, 0.000), dist=23.507m
2026-01-20 16:39:39,751 - WARNING - integration_test - Step 84: Vehicle is far from path start (dist=23.507m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:39,751 - INFO - integration_test - === Calling planner.solve_mpc() at step 84 ===
2026-01-20 16:39:39,902 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:39,927 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:39,927 - INFO - integration_test - Warmstart k=0: x0=18.710625513555083 , y0=14.22966063601832 , psi0=0.5186997033254132 , v0=3.0000000299482816 , spline0=23.79996920008258 , a0=0.0 , w0=0.0
2026-01-20 16:39:39,927 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:39,928 - INFO - integration_test - Dyn residual k=0: pred=[18.97116487738938, 14.378386026216889, 0.5186997033254132, 3.0000000299482816, 24.099969203077407], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.97116487738938, 14.378386026216889, 0.5186997033254132, 3.0000000299482816, 24.099969203077407], res_norm=3.401e+01
2026-01-20 16:39:39,929 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:39,930 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:39,945 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,155 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,175 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,217 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,238 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,282 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,302 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,343 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,363 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,403 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,422 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,464 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,482 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,523 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,542 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,585 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,603 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,645 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,665 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,706 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:40,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:40,766 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:41,933 - INFO - integration_test - Step 84: MPC solve successful
2026-01-20 16:39:42,078 - INFO - integration_test - Step 84: Computed 6 numeric contouring constraints for visualization (s=23.800)
2026-01-20 16:39:42,078 - DEBUG - integration_test - Step 84: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:42,078 - INFO - integration_test - === Applying control at step 84 ===
2026-01-20 16:39:42,078 - INFO - integration_test -   Control dict from planner: {'a': -1.9999863338992505, 'w': -0.10115366268798122}
2026-01-20 16:39:42,078 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:42,078 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:42,079 - INFO - integration_test - Step 84 completed in 2.775s
2026-01-20 16:39:42,139 - INFO - integration_test - Step 85 (contouring until path end)
2026-01-20 16:39:42,145 - DEBUG - integration_test - Syncing planner state at step 85: vehicle_state=[18.96319484 14.37216699  0.50858434  2.8000014  24.07996934]
2026-01-20 16:39:42,146 - DEBUG - integration_test - Step 85: Using propagated spline 24.0800 (close to path, dist=0.169m, drift=0.523m)
2026-01-20 16:39:42,146 - DEBUG - integration_test -   Set spline state to 24.0800
2026-01-20 16:39:42,149 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:42,301 - DEBUG - integration_test - Step 85: Checking path alignment: vehicle=(18.963, 14.372), path_start=(0.000, 0.000), dist=23.794m
2026-01-20 16:39:42,301 - WARNING - integration_test - Step 85: Vehicle is far from path start (dist=23.794m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-20 16:39:42,301 - INFO - integration_test - === Calling planner.solve_mpc() at step 85 ===
2026-01-20 16:39:42,447 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-20 16:39:42,472 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-20 16:39:42,472 - INFO - integration_test - Warmstart k=0: x0=18.963194839136424 , y0=14.372166987925496 , psi0=0.508584337056615 , v0=2.800001396558357 , spline0=24.079969339738415 , a0=0.0 , w0=0.0
2026-01-20 16:39:42,472 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-20 16:39:42,473 - INFO - integration_test - Dyn residual k=0: pred=[19.20775668476599, 14.508510604826135, 0.508584337056615, 2.800001396558357, 24.359969479394252], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.20775668476599, 14.508510604826135, 0.508584337056615, 2.800001396558357, 24.359969479394252], res_norm=3.436e+01
2026-01-20 16:39:42,473 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:42,474 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-20 16:39:42,488 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:42,696 - INFO - integration_test - Stage 0: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:42,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:42,756 - INFO - integration_test - Stage 1: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:42,775 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:42,816 - INFO - integration_test - Stage 2: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:42,834 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:42,875 - INFO - integration_test - Stage 3: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:42,894 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:42,934 - INFO - integration_test - Stage 4: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:42,953 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:42,993 - INFO - integration_test - Stage 5: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:43,012 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:43,053 - INFO - integration_test - Stage 6: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:43,071 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:43,112 - INFO - integration_test - Stage 7: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:43,131 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:43,171 - INFO - integration_test - Stage 8: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:43,190 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:43,230 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:43,249 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-20 16:39:43,289 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-20 16:39:44,104 - INFO - integration_test - Step 85: MPC solve successful
2026-01-20 16:39:44,320 - INFO - integration_test - Step 85: Computed 6 numeric contouring constraints for visualization (s=24.080)
2026-01-20 16:39:44,321 - DEBUG - integration_test - Step 85: Captured 6 contouring constraint halfspaces for visualization
2026-01-20 16:39:44,321 - INFO - integration_test - === Applying control at step 85 ===
2026-01-20 16:39:44,321 - INFO - integration_test -   Control dict from planner: {'a': -2.000000002362622, 'w': -0.7999999743133489}
2026-01-20 16:39:44,321 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-20 16:39:44,321 - INFO - integration_test -   Planner output success: True
2026-01-20 16:39:44,322 - INFO - integration_test - Goal reached at step 85!
2026-01-20 16:39:44,322 - INFO - integration_test - Step 85 completed in 2.177s
2026-01-20 16:39:44,396 - INFO - integration_test - Goal reached at step 85, added 3 extra frames for visualization
2026-01-20 16:39:44,406 - INFO - integration_test - Saving test results...
2026-01-20 16:39:44,409 - INFO - integration_test - Saved 90 vehicle states to test_outputs/20260120_163622_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-20 16:39:44,410 - INFO - integration_test - Saved obstacle summary to test_outputs/20260120_163622_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-20 16:39:44,410 - INFO - integration_test - Saved 97 states for obstacle 0 to test_outputs/20260120_163622_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-20 16:39:44,410 - INFO - integration_test - Saved 97 states for obstacle 1 to test_outputs/20260120_163622_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-20 16:39:44,410 - INFO - integration_test - Saved state history: 90 vehicle states, 2 obstacles
2026-01-20 16:39:44,410 - INFO - integration_test - Creating animation...
2026-01-20 16:39:44,455 - DEBUG - integration_test - Creating animation with 90 frames (range: 0 to 89)
2026-01-20 16:39:44,456 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-20 16:39:44,616 - INFO - integration_test - Frame 0: Safe Horizon module has 321 scenarios after update
2026-01-20 16:39:44,616 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-20 16:39:44,616 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:39:44,636 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-20 16:39:44,637 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-20 16:39:44,794 - INFO - integration_test - Frame 0: Safe Horizon module has 318 scenarios after update
2026-01-20 16:39:44,794 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-20 16:39:44,794 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:39:44,811 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-20 16:39:44,887 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-20 16:39:45,036 - INFO - integration_test - Frame 1: Safe Horizon module has 319 scenarios after update
2026-01-20 16:39:45,036 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-20 16:39:45,036 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:39:45,058 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-20 16:39:45,093 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-20 16:39:45,241 - INFO - integration_test - Frame 2: Safe Horizon module has 318 scenarios after update
2026-01-20 16:39:45,241 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-20 16:39:45,241 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 0 constraints across 0 keys: []
2026-01-20 16:39:45,262 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-20 16:40:10,003 - INFO - integration_test - Saved animation with 90 frames at 10.00 fps to test_outputs/20260120_163622_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 9.00s, size: 1278964 bytes)
2026-01-20 16:40:10,044 - INFO - integration_test - Animation created successfully
2026-01-20 16:40:10,044 - INFO - integration_test - Test completed successfully
