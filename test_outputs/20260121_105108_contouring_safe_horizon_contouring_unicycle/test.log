2026-01-21 10:51:08,589 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 10:51:08,589 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 10:51:08,589 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 10:51:08,589 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 10:51:08,589 - INFO - integration_test - Creating objective module: contouring
2026-01-21 10:51:08,596 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 10:51:08,596 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 10:51:08,596 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 10:51:08,623 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 10:51:08,623 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 10:51:08,631 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 10:51:08,631 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 10:51:08,658 - INFO - integration_test - Setting solver on all modules...
2026-01-21 10:51:08,658 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 10:51:08,658 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 10:51:08,658 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 10:51:08,658 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 10:51:08,658 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 10:51:08,658 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 10:51:08,660 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 10:51:08,661 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 10:51:08,661 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 10:51:08,661 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 10:51:08,661 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 10:51:08,661 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 10:51:08,661 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 10:51:08,662 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 10:51:08,662 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 10:51:08,662 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 10:51:08,662 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 10:51:08,662 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 10:51:08,663 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 10:51:08,663 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 10:51:08,668 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:08,689 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 10:51:08,689 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 10:51:08,837 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:08,865 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:08,866 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 10:51:08,866 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:08,867 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 10:51:08,867 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:08,868 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:08,882 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,046 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,067 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,112 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,135 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,181 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,202 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,252 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,277 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,336 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,361 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,425 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,454 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,519 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,544 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,598 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,623 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,683 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:09,712 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,770 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:09,799 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:09,851 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:10,880 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 10:51:11,123 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 10:51:11,123 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:11,123 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 10:51:11,123 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 10:51:11,123 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196548617, 'w': 0.7999999980077056}
2026-01-21 10:51:11,123 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:11,123 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:11,125 - INFO - integration_test - Step 0 completed in 2.462s
2026-01-21 10:51:11,189 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 10:51:11,191 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 10:51:11,192 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 10:51:11,192 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 10:51:11,195 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:11,294 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 10:51:11,294 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 10:51:11,382 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:11,410 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:11,411 - INFO - integration_test - Warmstart k=0: x0=0.10987737537991847 , y0=0.004530845047036681 , psi0=0.07999999980077056 , v0=1.2000000019654862 , spline0=0.12000000019654862 , a0=0.0 , w0=0.0
2026-01-21 10:51:11,411 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:11,412 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033406336, 0.014120608315213456, 0.07999999980077056, 1.2000000019654862, 0.24000000039309724], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033406336, 0.014120608315213456, 0.07999999980077056, 1.2000000019654862, 0.24000000039309724], res_norm=1.248e+00
2026-01-21 10:51:11,413 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:11,414 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:11,436 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,589 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,611 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,655 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,675 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,721 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,740 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,782 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,844 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,862 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,904 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,923 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:11,968 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:11,988 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:12,032 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:12,050 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:12,096 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:12,115 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:12,156 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:12,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:12,221 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:12,872 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 10:51:12,964 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 10:51:12,965 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:12,965 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 10:51:12,965 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000180084725, 'w': 0.7999999197693473}
2026-01-21 10:51:12,965 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:12,965 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:12,966 - INFO - integration_test - Step 1 completed in 1.775s
2026-01-21 10:51:13,027 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 10:51:13,028 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 10:51:13,028 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 10:51:13,028 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 10:51:13,031 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:13,130 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 10:51:13,130 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 10:51:13,220 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:13,244 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:13,244 - INFO - integration_test - Warmstart k=0: x0=0.23889212825095213 , y0=0.02022162119226654 , psi0=0.1599999917777053 , v0=1.4000000037663334 , spline0=0.26000000057318196 , a0=0.0 , w0=0.0
2026-01-21 10:51:13,244 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:13,245 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394847875717, 0.04252616904184721, 0.1599999917777053, 1.4000000037663334, 0.4000000009498153], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394847875717, 0.04252616904184721, 0.1599999917777053, 1.4000000037663334, 0.4000000009498153], res_norm=1.513e+00
2026-01-21 10:51:13,246 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:13,246 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:13,263 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,410 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,431 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,477 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,496 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,542 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,561 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,607 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,627 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,670 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,689 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,735 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,754 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,800 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,820 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,866 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,886 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,931 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:13,951 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:13,997 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:14,018 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:14,064 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:14,682 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 10:51:14,721 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 10:51:14,721 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:14,721 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 10:51:14,721 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019910229, 'w': 0.8000000044891185}
2026-01-21 10:51:14,722 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:14,722 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:14,723 - INFO - integration_test - Step 2 completed in 1.696s
2026-01-21 10:51:14,783 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 10:51:14,784 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014471 0.23999999 1.60000001 0.42      ]
2026-01-21 10:51:14,785 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 10:51:14,785 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 10:51:14,789 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:14,892 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 10:51:14,892 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 10:51:14,980 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:15,005 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:15,005 - INFO - integration_test - Warmstart k=0: x0=0.38583643601493123 , y0=0.05014471471878054 , psi0=0.23999999222661714 , v0=1.6000000057573562 , spline0=0.42000000114891756 , a0=0.0 , w0=0.0
2026-01-21 10:51:15,005 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:15,006 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505128461303, 0.08817713387588283, 0.23999999222661714, 1.6000000057573562, 0.5800000017246532], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505128461303, 0.08817713387588283, 0.23999999222661714, 1.6000000057573562, 0.5800000017246532], res_norm=1.804e+00
2026-01-21 10:51:15,006 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:15,007 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:15,025 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,229 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,250 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,296 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,315 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,361 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,380 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,428 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,449 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,496 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,517 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,559 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,579 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,625 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,647 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,691 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,710 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,756 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:15,776 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,822 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:15,841 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:15,884 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:16,528 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 10:51:16,575 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 10:51:16,575 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:16,575 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 10:51:16,575 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999782, 'w': 0.8000000099814529}
2026-01-21 10:51:16,575 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:16,575 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:16,577 - INFO - integration_test - Step 3 completed in 1.793s
2026-01-21 10:51:16,630 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 10:51:16,631 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 10:51:16,632 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 10:51:16,632 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 10:51:16,634 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:16,734 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 10:51:16,734 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 10:51:16,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:16,851 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:16,851 - INFO - integration_test - Warmstart k=0: x0=0.5491354618852677 , y0=0.0972407540806254 , psi0=0.3199999932247624 , v0=1.8000000077573344 , spline0=0.600000001924651 , a0=0.0 , w0=0.0
2026-01-21 10:51:16,851 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:16,852 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978382600881, 0.1538627340779132, 0.3199999932247624, 1.8000000077573344, 0.7800000027003844], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978382600881, 0.1538627340779132, 0.3199999932247624, 1.8000000077573344, 0.7800000027003844], res_norm=2.120e+00
2026-01-21 10:51:16,853 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:16,854 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:16,869 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,011 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,032 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,077 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,098 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,144 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,164 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,212 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,232 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,279 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,321 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,391 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,414 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,459 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,481 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,525 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,545 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,590 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:17,611 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,654 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:17,673 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:17,717 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:18,309 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 10:51:18,425 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 10:51:18,425 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:18,425 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 10:51:18,425 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019995873, 'w': 0.8000000094435602}
2026-01-21 10:51:18,425 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:18,425 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:18,426 - INFO - integration_test - Step 4 completed in 1.795s
2026-01-21 10:51:18,485 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 10:51:18,486 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427976 0.39999999 2.00000001 0.8       ]
2026-01-21 10:51:18,487 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 10:51:18,487 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 10:51:18,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:18,591 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 10:51:18,591 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 10:51:18,680 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:18,705 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:18,705 - INFO - integration_test - Warmstart k=0: x0=0.7268614898001421 , y0=0.16427976438139757 , psi0=0.39999999416911847 , v0=2.0000000097569215 , spline0=0.8000000029003431 , a0=0.0 , w0=0.0
2026-01-21 10:51:18,705 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:18,706 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736899535216, 0.24216343214896058, 0.39999999416911847, 2.0000000097569215, 1.0000000038760353], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736899535216, 0.24216343214896058, 0.39999999416911847, 2.0000000097569215, 1.0000000038760353], res_norm=2.459e+00
2026-01-21 10:51:18,708 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:18,709 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:18,725 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:18,876 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:18,896 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:18,942 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:18,963 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,011 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,033 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,082 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,103 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,148 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,169 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,217 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,238 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,285 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,305 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,351 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,371 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,420 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:19,440 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,486 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:19,505 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:19,550 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:20,250 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 10:51:20,297 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 10:51:20,298 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:20,298 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 10:51:20,298 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019989574, 'w': 0.8000000064507874}
2026-01-21 10:51:20,298 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:20,298 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:20,299 - INFO - integration_test - Step 5 completed in 1.813s
2026-01-21 10:51:20,357 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 10:51:20,362 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.2538238  0.47999999 2.20000001 1.02      ]
2026-01-21 10:51:20,363 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 10:51:20,363 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 10:51:20,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:20,470 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 10:51:20,470 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 10:51:20,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:20,582 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:20,583 - INFO - integration_test - Warmstart k=0: x0=0.9167519044172652 , y0=0.25382380341796035 , psi0=0.4799999948141972 , v0=2.2000000117558787 , spline0=1.020000004075931 , a0=0.0 , w0=0.0
2026-01-21 10:51:20,583 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:20,583 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907889982812, 0.35541522156799676, 0.4799999948141972, 2.2000000117558787, 1.2400000052515188], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907889982812, 0.35541522156799676, 0.4799999948141972, 2.2000000117558787, 1.2400000052515188], res_norm=2.823e+00
2026-01-21 10:51:20,584 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:20,585 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:20,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:20,742 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:20,765 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:20,809 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:20,832 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:20,877 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:20,897 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:20,946 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:20,969 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,014 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:21,035 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,079 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:21,099 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,145 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:21,166 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,212 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:21,234 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,279 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:21,300 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,344 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:21,363 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:21,410 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:22,096 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 10:51:22,213 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 10:51:22,213 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:22,213 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 10:51:22,213 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000191451406, 'w': 0.7999955810281058}
2026-01-21 10:51:22,213 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:22,213 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:22,215 - INFO - integration_test - Step 6 completed in 1.853s
2026-01-21 10:51:22,271 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 10:51:22,272 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623089 0.3681914  0.55999955 2.40000001 1.26000001]
2026-01-21 10:51:22,273 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 10:51:22,273 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 10:51:22,278 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:22,386 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 10:51:22,386 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 10:51:22,478 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:22,506 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:22,506 - INFO - integration_test - Warmstart k=0: x0=1.1162308914952548 , y0=0.3681913974622111 , psi0=0.5599995529170078 , v0=2.4000000136703927 , spline0=1.2600000054429703 , a0=0.0 , w0=0.0
2026-01-21 10:51:22,506 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:22,507 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721762929211, 0.4956759947789582, 0.5599995529170078, 2.4000000136703927, 1.5000000068100097], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721762929211, 0.4956759947789582, 0.5599995529170078, 2.4000000136703927, 1.5000000068100097], res_norm=3.211e+00
2026-01-21 10:51:22,507 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:22,508 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:22,524 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:22,670 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:22,690 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:22,737 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:22,757 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:22,804 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:22,824 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:22,871 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:22,893 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:22,940 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:22,960 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:23,005 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:23,028 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:23,072 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:23,094 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:23,137 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:23,157 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:23,206 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:23,229 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:23,271 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:23,291 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:23,336 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:24,014 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 10:51:24,064 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 10:51:24,064 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:24,064 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 10:51:24,064 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198838532, 'w': -0.17190630702137574}
2026-01-21 10:51:24,064 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:24,064 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:24,065 - INFO - integration_test - Step 7 completed in 1.793s
2026-01-21 10:51:24,117 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 10:51:24,118 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32919071 0.49913635 0.54280892 2.60000002 1.52000001]
2026-01-21 10:51:24,118 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 10:51:24,118 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 10:51:24,121 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:24,228 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 10:51:24,228 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 10:51:24,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:24,419 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:24,419 - INFO - integration_test - Warmstart k=0: x0=1.3291907065059825 , y0=0.499136346232668 , psi0=0.5428089222148702 , v0=2.600000015658778 , spline0=1.5200000070088482 , a0=0.0 , w0=0.0
2026-01-21 10:51:24,419 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:24,420 - INFO - integration_test - Dyn residual k=0: pred=[1.5518186020568288, 0.6334375783076494, 0.5428089222148702, 2.600000015658778, 1.780000008574726], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5518186020568288, 0.6334375783076494, 0.5428089222148702, 2.600000015658778, 1.780000008574726], res_norm=3.610e+00
2026-01-21 10:51:24,421 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:24,422 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:24,437 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,587 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:24,608 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,652 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:24,673 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,719 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:24,738 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,785 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:24,806 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,853 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:24,872 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,919 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:24,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:24,982 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:25,003 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:25,050 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:25,071 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:25,118 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:25,139 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:25,187 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:25,208 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:25,254 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:26,185 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 10:51:26,241 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 10:51:26,242 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:26,242 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 10:51:26,242 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199994057, 'w': -0.045812776436052055}
2026-01-21 10:51:26,242 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:26,242 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:26,243 - INFO - integration_test - Step 8 completed in 2.126s
2026-01-21 10:51:26,302 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 10:51:26,308 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.5607038  0.6380664  0.53822764 2.80000002 1.80000001]
2026-01-21 10:51:26,309 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 10:51:26,309 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 10:51:26,312 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:26,438 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 10:51:26,438 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 10:51:26,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:26,571 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:26,571 - INFO - integration_test - Warmstart k=0: x0=1.560703801003576 , y0=0.6380664024890228 , psi0=0.538227644571265 , v0=2.8000000176587183 , spline0=1.80000000877472 , a0=0.0 , w0=0.0
2026-01-21 10:51:26,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:26,572 - INFO - integration_test - Dyn residual k=0: pred=[1.8011170008505464, 0.7815986090777494, 0.538227644571265, 2.8000000176587183, 2.080000010540592], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8011170008505464, 0.7815986090777494, 0.538227644571265, 2.8000000176587183, 2.080000010540592], res_norm=4.039e+00
2026-01-21 10:51:26,573 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:26,574 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:26,591 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:26,796 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:26,821 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:26,867 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:26,888 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:26,939 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:26,968 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,022 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:27,045 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,091 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:27,113 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,158 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:27,180 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,226 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:27,248 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,292 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:27,313 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,363 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:27,383 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,429 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:27,448 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:27,493 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:28,744 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 10:51:28,872 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 10:51:28,872 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:28,872 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 10:51:28,873 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000177426775, 'w': -0.07251305041493925}
2026-01-21 10:51:28,873 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:28,873 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:28,874 - INFO - integration_test - Step 9 completed in 2.566s
2026-01-21 10:51:28,926 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 10:51:28,927 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81024614 0.78581028 0.53097634 3.00000002 2.10000001]
2026-01-21 10:51:28,927 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 10:51:28,927 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 10:51:28,931 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:29,031 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 10:51:29,031 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 10:51:29,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:29,150 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:29,151 - INFO - integration_test - Warmstart k=0: x0=1.8102461431843495 , y0=0.7858102760449257 , psi0=0.5309763395297711 , v0=3.000000019432986 , spline0=2.1000000107180186 , a0=0.0 , w0=0.0
2026-01-21 10:51:29,151 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:29,151 - INFO - integration_test - Dyn residual k=0: pred=[2.0689400710134667, 0.9377229248610219, 0.5309763395297711, 3.000000019432986, 2.4000000126613172], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.0689400710134667, 0.9377229248610219, 0.5309763395297711, 3.000000019432986, 2.4000000126613172], res_norm=4.495e+00
2026-01-21 10:51:29,152 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:29,153 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:29,168 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,310 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,329 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,375 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,395 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,442 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,461 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,507 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,527 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,572 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,594 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,643 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,663 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,711 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,731 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,775 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,843 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:29,863 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,908 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:29,927 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:29,972 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:30,649 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 10:51:30,703 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 10:51:30,703 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:30,703 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 10:51:30,703 - INFO - integration_test -   Control dict from planner: {'a': 9.90705853449713e-08, 'w': -0.05315459783694316}
2026-01-21 10:51:30,703 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:30,703 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:30,704 - INFO - integration_test - Step 10 completed in 1.778s
2026-01-21 10:51:30,760 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 10:51:30,761 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.0693426  0.93703467 0.52566088 3.00000003 2.40000001]
2026-01-21 10:51:30,761 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 10:51:30,762 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 10:51:30,765 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:30,870 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 10:51:30,870 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 10:51:30,959 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:30,984 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:30,984 - INFO - integration_test - Warmstart k=0: x0=2.0693425950858217 , y0=0.9370346727858603 , psi0=0.5256608797460768 , v0=3.0000000293400446 , spline0=2.400000013652023 , a0=0.0 , w0=0.0
2026-01-21 10:51:30,984 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:30,985 - INFO - integration_test - Dyn residual k=0: pred=[2.328840350969757, 1.087570105331173, 0.5256608797460768, 3.0000000293400446, 2.7000000165860274], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.328840350969757, 1.087570105331173, 0.5256608797460768, 3.0000000293400446, 2.7000000165860274], res_norm=4.814e+00
2026-01-21 10:51:30,986 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:30,987 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:31,002 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,224 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,245 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,291 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,311 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,355 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,374 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,421 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,442 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,491 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,519 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,582 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,604 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,649 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,681 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,730 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,753 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,798 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:31,821 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,865 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:31,884 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:31,928 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:32,527 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 10:51:32,578 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 10:51:32,578 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:32,578 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 10:51:32,578 - INFO - integration_test -   Control dict from planner: {'a': 6.445119190995442e-09, 'w': -0.0668241407722765}
2026-01-21 10:51:32,578 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:32,578 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:32,580 - INFO - integration_test - Step 11 completed in 1.819s
2026-01-21 10:51:32,639 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 10:51:32,640 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32934139 1.08670195 0.51897847 3.00000003 2.70000002]
2026-01-21 10:51:32,641 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 10:51:32,641 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 10:51:32,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:32,762 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 10:51:32,762 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 10:51:32,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:32,891 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:32,891 - INFO - integration_test - Warmstart k=0: x0=2.329341387880064 , y0=1.0867019524964137 , psi0=0.5189784656688491 , v0=3.0000000299845566 , spline0=2.7000000166504785 , a0=0.0 , w0=0.0
2026-01-21 10:51:32,891 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:32,892 - INFO - integration_test - Dyn residual k=0: pred=[2.5898392825566936, 1.2354999654808512, 0.5189784656688491, 3.0000000299845566, 3.000000019648934], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5898392825566936, 1.2354999654808512, 0.5189784656688491, 3.0000000299845566, 3.000000019648934], res_norm=5.148e+00
2026-01-21 10:51:32,893 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:32,895 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:32,913 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,078 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,101 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,152 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,173 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,222 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,246 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,295 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,317 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,365 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,386 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,433 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,455 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,499 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,521 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,565 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,585 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,629 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:33,649 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,692 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:33,712 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:33,753 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:34,315 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 10:51:34,374 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 10:51:34,374 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:34,374 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 10:51:34,374 - INFO - integration_test -   Control dict from planner: {'a': -1.86234016217572e-07, 'w': -0.06693447863771937}
2026-01-21 10:51:34,374 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:34,374 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:34,376 - INFO - integration_test - Step 12 completed in 1.736s
2026-01-21 10:51:34,433 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 10:51:34,434 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59033532 1.23462704 0.51228502 3.00000001 3.00000002]
2026-01-21 10:51:34,435 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 10:51:34,435 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 10:51:34,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:34,624 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 10:51:34,624 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 10:51:34,718 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:34,742 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:34,742 - INFO - integration_test - Warmstart k=0: x0=2.59033532061407 , y0=1.2346270426609929 , psi0=0.5122850178050772 , v0=3.000000011361155 , spline0=3.000000017786594 , a0=0.0 , w0=0.0
2026-01-21 10:51:34,742 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:34,742 - INFO - integration_test - Dyn residual k=0: pred=[2.8518233425492614, 1.3816781054456264, 0.5122850178050772, 3.000000011361155, 3.3000000189227094], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8518233425492614, 1.3816781054456264, 0.5122850178050772, 3.000000011361155, 3.3000000189227094], res_norm=5.495e+00
2026-01-21 10:51:34,743 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:34,744 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:34,759 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:34,911 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:34,932 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:34,975 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:34,999 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,046 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,067 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,110 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,133 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,178 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,201 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,249 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,269 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,313 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,335 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,378 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,397 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,446 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:35,469 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,512 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:35,531 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:35,577 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:36,231 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 10:51:36,289 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 10:51:36,290 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:36,290 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 10:51:36,290 - INFO - integration_test -   Control dict from planner: {'a': 1.8636585841994954e-07, 'w': -0.050862137247815006}
2026-01-21 10:51:36,290 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:36,290 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:36,291 - INFO - integration_test - Step 13 completed in 1.857s
2026-01-21 10:51:36,346 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 10:51:36,348 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85219618 1.38101248 0.5071988  3.00000003 3.30000002]
2026-01-21 10:51:36,348 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.147m, drift=0.370m)
2026-01-21 10:51:36,348 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 10:51:36,351 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:36,494 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 10:51:36,495 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 10:51:36,602 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:36,629 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:36,629 - INFO - integration_test - Warmstart k=0: x0=2.852196181694775 , y0=1.3810124813264206 , psi0=0.5071988040802957 , v0=3.000000029997741 , spline0=3.300000020786368 , a0=0.0 , w0=0.0
2026-01-21 10:51:36,629 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:36,630 - INFO - integration_test - Dyn residual k=0: pred=[3.114428752883945, 1.5267316647148177, 0.5071988040802957, 3.000000029997741, 3.600000023786142], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114428752883945, 1.5267316647148177, 0.5071988040802957, 3.000000029997741, 3.600000023786142], res_norm=5.852e+00
2026-01-21 10:51:36,631 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:36,632 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:36,649 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:36,795 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:36,817 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:36,862 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:36,886 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:36,930 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:36,950 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:36,992 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:37,015 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,061 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:37,080 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,123 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:37,145 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,192 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:37,213 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,259 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:37,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,332 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:37,353 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,396 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:37,417 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:37,462 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:38,039 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 10:51:38,190 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 10:51:38,190 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:38,190 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 10:51:38,190 - INFO - integration_test -   Control dict from planner: {'a': -4.363435049684727e-08, 'w': -0.06452818735329764}
2026-01-21 10:51:38,190 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:38,190 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:38,193 - INFO - integration_test - Step 14 completed in 1.846s
2026-01-21 10:51:38,256 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 10:51:38,257 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11489708 1.52588459 0.50074599 3.00000003 3.60000002]
2026-01-21 10:51:38,258 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 10:51:38,258 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 10:51:38,260 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:38,364 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 10:51:38,364 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 10:51:38,458 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:38,484 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:38,484 - INFO - integration_test - Warmstart k=0: x0=3.1148970809590515 , y0=1.5258845866597652 , psi0=0.500745985344966 , v0=3.0000000256343062 , spline0=3.6000000233497986 , a0=0.0 , w0=0.0
2026-01-21 10:51:38,484 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:38,485 - INFO - integration_test - Dyn residual k=0: pred=[3.37806448520165, 1.6699086085528894, 0.500745985344966, 3.0000000256343062, 3.9000000259132293], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.37806448520165, 1.6699086085528894, 0.500745985344966, 3.0000000256343062, 3.9000000259132293], res_norm=6.218e+00
2026-01-21 10:51:38,485 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:38,486 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:38,504 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:38,646 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:38,666 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:38,711 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:38,732 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:38,776 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:38,799 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:38,847 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:38,869 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:38,916 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:38,936 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:38,980 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:39,003 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:39,048 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:39,071 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:39,115 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:39,137 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:39,181 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:39,201 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:39,246 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:39,266 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:39,311 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:39,911 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 10:51:39,965 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 10:51:39,965 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:39,966 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 10:51:39,966 - INFO - integration_test -   Control dict from planner: {'a': 4.365181328907407e-08, 'w': -0.05248812186905449}
2026-01-21 10:51:39,966 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:39,966 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:39,967 - INFO - integration_test - Step 15 completed in 1.710s
2026-01-21 10:51:40,028 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 10:51:40,031 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37844125 1.66921729 0.49549717 3.00000003 3.90000003]
2026-01-21 10:51:40,032 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-21 10:51:40,032 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 10:51:40,035 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:40,139 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 10:51:40,139 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 10:51:40,232 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:40,259 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:40,259 - INFO - integration_test - Warmstart k=0: x0=3.378441253669812 , y0=1.6692172907932874 , psi0=0.4954971731580605 , v0=3.000000029999488 , spline0=3.9000000263497476 , a0=0.0 , w0=0.0
2026-01-21 10:51:40,259 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:40,260 - INFO - integration_test - Dyn residual k=0: pred=[3.642360984740121, 1.8118580190294575, 0.4954971731580605, 3.000000029999488, 4.200000029349696], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.642360984740121, 1.8118580190294575, 0.4954971731580605, 3.000000029999488, 4.200000029349696], res_norm=6.591e+00
2026-01-21 10:51:40,261 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:40,261 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:40,277 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,513 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,533 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,580 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,600 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,648 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,669 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,715 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,735 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,782 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,802 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,851 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,871 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,919 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:40,939 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:40,987 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:41,008 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:41,064 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:41,095 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:41,153 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:41,175 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:41,220 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:42,012 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 10:51:42,078 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 10:51:42,078 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:42,078 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 10:51:42,078 - INFO - integration_test -   Control dict from planner: {'a': -7.065834414183958e-07, 'w': -0.03367124601734929}
2026-01-21 10:51:42,079 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:42,079 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:42,080 - INFO - integration_test - Step 16 completed in 2.049s
2026-01-21 10:51:42,134 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 10:51:42,135 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64260063 1.81141342 0.49213005 2.99999996 4.20000002]
2026-01-21 10:51:42,135 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.143m, drift=0.294m)
2026-01-21 10:51:42,135 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 10:51:42,138 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:42,240 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 10:51:42,240 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 10:51:42,340 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:42,369 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:42,369 - INFO - integration_test - Warmstart k=0: x0=3.642600627254811 , y0=1.8114134229347056 , psi0=0.4921300485563256 , v0=2.9999999593411437 , spline0=4.200000022283862 , a0=0.0 , w0=0.0
2026-01-21 10:51:42,369 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:42,370 - INFO - integration_test - Dyn residual k=0: pred=[3.9069991441982372, 1.9531646902961846, 0.4921300485563256, 2.9999999593411437, 4.5000000182179765], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9069991441982372, 1.9531646902961846, 0.4921300485563256, 2.9999999593411437, 4.5000000182179765], res_norm=6.969e+00
2026-01-21 10:51:42,371 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:42,372 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:42,387 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,537 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,559 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,603 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,624 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,668 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,690 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,735 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,755 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,801 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,822 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,869 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,890 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:42,937 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:42,957 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:43,003 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:43,027 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:43,072 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:43,092 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:43,135 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:43,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:43,199 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:43,869 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 10:51:44,029 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 10:51:44,029 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:44,029 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 10:51:44,029 - INFO - integration_test -   Control dict from planner: {'a': 7.065872687201002e-07, 'w': -0.0994324015683258}
2026-01-21 10:51:44,029 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:44,029 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:44,030 - INFO - integration_test - Step 17 completed in 1.896s
2026-01-21 10:51:44,090 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 10:51:44,091 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90769952 1.95184788 0.48218681 3.00000003 4.50000003]
2026-01-21 10:51:44,091 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 10:51:44,091 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 10:51:44,094 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:44,199 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.952), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 10:51:44,199 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 10:51:44,295 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:44,320 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:44,320 - INFO - integration_test - Warmstart k=0: x0=3.907699518226158 , y0=1.9518478780333866 , psi0=0.482186808399493 , v0=3.0000000299998706 , spline0=4.500000025283849 , a0=0.0 , w0=0.0
2026-01-21 10:51:44,321 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:44,322 - INFO - integration_test - Dyn residual k=0: pred=[4.173494414926769, 2.0909632067642763, 0.482186808399493, 3.0000000299998706, 4.8000000282838355], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173494414926769, 2.0909632067642763, 0.482186808399493, 3.0000000299998706, 4.8000000282838355], res_norm=7.353e+00
2026-01-21 10:51:44,322 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:44,323 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:44,341 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,488 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,511 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,555 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,578 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,624 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,647 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,694 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,714 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,762 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,782 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,829 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,851 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,896 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,917 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:44,969 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:44,990 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:45,038 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:45,060 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:45,105 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:45,126 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:45,175 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:46,083 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 10:51:46,147 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 10:51:46,147 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:46,147 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 10:51:46,147 - INFO - integration_test -   Control dict from planner: {'a': -3.6372009627000448e-06, 'w': -0.026145957596439187}
2026-01-21 10:51:46,147 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:46,147 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:46,149 - INFO - integration_test - Step 18 completed in 2.058s
2026-01-21 10:51:46,205 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 10:51:46,206 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17367596 2.09061557 0.47957221 2.99999967 4.79999999]
2026-01-21 10:51:46,207 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.126m, drift=0.405m)
2026-01-21 10:51:46,207 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 10:51:46,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:46,319 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.091), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 10:51:46,319 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 10:51:46,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:46,447 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:46,447 - INFO - integration_test - Warmstart k=0: x0=4.173675961036508 , y0=2.090615566950977 , psi0=0.4795722126398491 , v0=2.9999996662797743 , spline0=4.799999991911826 , a0=0.0 , w0=0.0
2026-01-21 10:51:46,447 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:46,448 - INFO - integration_test - Dyn residual k=0: pred=[4.439833646901145, 2.2290354579781297, 0.4795722126398491, 2.9999996662797743, 5.0999999585398035], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.439833646901145, 2.2290354579781297, 0.4795722126398491, 2.9999996662797743, 5.0999999585398035], res_norm=7.741e+00
2026-01-21 10:51:46,449 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:46,450 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:46,469 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:46,620 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:46,641 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:46,690 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:46,710 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:46,760 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:46,780 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:46,830 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:46,850 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:46,896 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:46,916 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:46,961 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:46,981 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:47,028 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:47,048 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:47,095 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:47,115 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:47,162 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:47,182 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:47,228 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:47,248 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:47,290 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:47,934 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 10:51:48,095 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 10:51:48,095 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:48,095 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 10:51:48,095 - INFO - integration_test -   Control dict from planner: {'a': 3.6371289657150337e-06, 'w': -0.08615454362048086}
2026-01-21 10:51:48,095 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:48,095 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:48,096 - INFO - integration_test - Step 19 completed in 1.890s
2026-01-21 10:51:48,150 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 10:51:48,151 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44042664 2.22788723 0.47095676 3.00000003 5.09999999]
2026-01-21 10:51:48,151 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-21 10:51:48,152 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 10:51:48,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:48,261 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.440, 2.228), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 10:51:48,261 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 10:51:48,356 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:48,384 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:48,384 - INFO - integration_test - Warmstart k=0: x0=4.440426641895533 , y0=2.2278872262831 , psi0=0.47095675827780104 , v0=3.000000029992671 , spline0=5.0999999949110935 , a0=0.0 , w0=0.0
2026-01-21 10:51:48,384 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:48,385 - INFO - integration_test - Dyn residual k=0: pred=[4.707767017816568, 2.3640089556357626, 0.47095675827780104, 3.000000029992671, 5.399999997910361], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.707767017816568, 2.3640089556357626, 0.47095675827780104, 3.000000029992671, 5.399999997910361], res_norm=8.132e+00
2026-01-21 10:51:48,386 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:48,386 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:48,404 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,570 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,590 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,634 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,657 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,701 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,724 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,768 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,788 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,836 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,857 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,904 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,925 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:48,972 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:48,992 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:49,041 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:49,061 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:49,110 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:49,130 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:49,175 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:49,194 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:49,240 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:49,811 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 10:51:49,879 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 10:51:49,879 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:49,879 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 10:51:49,879 - INFO - integration_test -   Control dict from planner: {'a': -1.966834919524845e-06, 'w': -0.05132671803604025}
2026-01-21 10:51:49,879 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:49,879 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:49,880 - INFO - integration_test - Step 20 completed in 1.730s
2026-01-21 10:51:49,942 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 10:51:49,943 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70811517 2.36332227 0.46582409 2.99999983 5.39999998]
2026-01-21 10:51:49,943 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.223m, drift=0.517m)
2026-01-21 10:51:49,943 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 10:51:49,946 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:50,052 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 10:51:50,052 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 10:51:50,274 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:50,302 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:50,302 - INFO - integration_test - Warmstart k=0: x0=4.708115168536807 , y0=2.363322269833529 , psi0=0.465824086474197 , v0=2.999999833309179 , spline0=5.399999978242011 , a0=0.0 , w0=0.0
2026-01-21 10:51:50,302 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:50,303 - INFO - integration_test - Dyn residual k=0: pred=[4.9761506705371215, 2.4980700329540726, 0.465824086474197, 2.999999833309179, 5.699999961572929], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.9761506705371215, 2.4980700329540726, 0.465824086474197, 2.999999833309179, 5.699999961572929], res_norm=8.527e+00
2026-01-21 10:51:50,304 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:50,305 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:50,323 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,491 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,512 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,556 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,576 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,620 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,641 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,685 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,707 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,752 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,774 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,818 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,841 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,886 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,908 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:50,953 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:50,975 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:51,020 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:51,041 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:51,087 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:51,106 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:51,151 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:51,899 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 10:51:51,971 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 10:51:51,971 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:51,971 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 10:51:51,971 - INFO - integration_test -   Control dict from planner: {'a': 1.966906825736442e-06, 'w': -0.059273251250030155}
2026-01-21 10:51:51,971 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:51,971 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:51,973 - INFO - integration_test - Step 21 completed in 2.030s
2026-01-21 10:51:52,033 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 10:51:52,034 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97654846 2.49727488 0.45989676 3.00000003 5.69999998]
2026-01-21 10:51:52,034 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 10:51:52,034 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 10:51:52,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:52,145 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 10:51:52,145 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 10:51:52,248 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:52,273 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:52,273 - INFO - integration_test - Warmstart k=0: x0=4.976548455585739 , y0=2.4972748838614054 , psi0=0.459896761349194 , v0=3.0000000299998613 , spline0=5.699999981241997 , a0=0.0 , w0=0.0
2026-01-21 10:51:52,273 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:52,274 - INFO - integration_test - Dyn residual k=0: pred=[5.245377955880183, 2.630431564397648, 0.459896761349194, 3.0000000299998613, 5.999999984241983], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245377955880183, 2.630431564397648, 0.459896761349194, 3.0000000299998613, 5.999999984241983], res_norm=8.924e+00
2026-01-21 10:51:52,275 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:52,276 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:52,293 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,469 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,490 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,537 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,558 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,606 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,626 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,670 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,690 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,737 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,759 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,802 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,823 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,870 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,890 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:52,937 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:52,957 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:53,000 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:53,020 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:53,066 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:53,087 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:53,132 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:53,744 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 10:51:53,915 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 10:51:53,915 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:53,915 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 10:51:53,915 - INFO - integration_test -   Control dict from planner: {'a': -9.23712452491728e-07, 'w': -0.10794010895256935}
2026-01-21 10:51:53,915 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:53,915 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:53,916 - INFO - integration_test - Step 22 completed in 1.883s
2026-01-21 10:51:53,979 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 10:51:53,980 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24609137 2.62897812 0.44910275 2.99999994 5.99999998]
2026-01-21 10:51:53,981 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 10:51:53,981 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 10:51:53,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:54,092 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 10:51:54,092 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 10:51:54,186 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:54,211 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:54,211 - INFO - integration_test - Warmstart k=0: x0=5.24609137186039 , y0=2.6289781165067287 , psi0=0.44910275045393705 , v0=2.999999937628616 , spline0=5.999999975004859 , a0=0.0 , w0=0.0
2026-01-21 10:51:54,211 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:54,212 - INFO - integration_test - Dyn residual k=0: pred=[5.516342469983604, 2.75922534381278, 0.44910275045393705, 2.999999937628616, 6.299999968767721], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.516342469983604, 2.75922534381278, 0.44910275045393705, 2.999999937628616, 6.299999968767721], res_norm=9.324e+00
2026-01-21 10:51:54,213 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:54,214 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:54,232 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,400 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,421 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,468 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,489 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,536 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,558 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,602 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,622 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,667 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,687 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,734 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,753 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,799 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,818 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,866 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,886 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,932 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:54,952 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:54,994 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:55,016 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:55,060 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:55,759 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 10:51:55,827 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 10:51:55,828 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:55,828 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 10:51:55,828 - INFO - integration_test -   Control dict from planner: {'a': 9.237103895866631e-07, 'w': 0.014075855062124071}
2026-01-21 10:51:55,828 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:55,828 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:55,829 - INFO - integration_test - Step 23 completed in 1.849s
2026-01-21 10:51:55,885 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 10:51:55,886 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51625072 2.7594155  0.45051034 3.00000003 6.29999998]
2026-01-21 10:51:55,887 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 10:51:55,887 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 10:51:55,889 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:55,997 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.759), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 10:51:55,998 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 10:51:56,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:56,123 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:56,123 - INFO - integration_test - Warmstart k=0: x0=5.516250717861457 , y0=2.7594155035451013 , psi0=0.45051033596014944 , v0=3.0000000299996548 , spline0=6.299999978004824 , a0=0.0 , w0=0.0
2026-01-21 10:51:56,123 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:56,124 - INFO - integration_test - Dyn residual k=0: pred=[5.786318222527507, 2.8900430072471637, 0.45051033596014944, 3.0000000299996548, 6.59999998100479], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786318222527507, 2.8900430072471637, 0.45051033596014944, 3.0000000299996548, 6.59999998100479], res_norm=9.726e+00
2026-01-21 10:51:56,124 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:56,125 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:56,142 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,309 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,332 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,378 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,398 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,448 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,469 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,518 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,540 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,589 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,657 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,677 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,726 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,746 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,792 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,864 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:56,886 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:56,933 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:56,955 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:57,003 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:57,880 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 10:51:58,068 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 10:51:58,068 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:51:58,068 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 10:51:58,068 - INFO - integration_test -   Control dict from planner: {'a': -4.4681873533288944e-07, 'w': -0.09021410729768328}
2026-01-21 10:51:58,069 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:51:58,069 - INFO - integration_test -   Planner output success: True
2026-01-21 10:51:58,070 - INFO - integration_test - Step 24 completed in 2.184s
2026-01-21 10:51:58,129 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 10:51:58,130 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78690378 2.88882305 0.44148893 2.99999999 6.59999998]
2026-01-21 10:51:58,131 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-21 10:51:58,131 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 10:51:58,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:58,246 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 10:51:58,246 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 10:51:58,342 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:51:58,368 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:51:58,368 - INFO - integration_test - Warmstart k=0: x0=5.786903775432631 , y0=2.888823047742022 , psi0=0.44148892523038114 , v0=2.9999999853177814 , spline0=6.599999976536602 , a0=0.0 , w0=0.0
2026-01-21 10:51:58,368 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:51:58,369 - INFO - integration_test - Dyn residual k=0: pred=[6.058138714675314, 3.0170088771190824, 0.44148892523038114, 2.9999999853177814, 6.89999997506838], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.058138714675314, 3.0170088771190824, 0.44148892523038114, 2.9999999853177814, 6.89999997506838], res_norm=1.013e+01
2026-01-21 10:51:58,370 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:58,371 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:51:58,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,557 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,578 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,621 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,642 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,689 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,712 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,756 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,777 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,823 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,845 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,892 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,913 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:58,961 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:58,981 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:59,029 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:59,050 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:59,100 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:51:59,121 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:59,168 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:51:59,189 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:51:59,238 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:00,088 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 10:52:00,170 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 10:52:00,170 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:00,170 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 10:52:00,170 - INFO - integration_test -   Control dict from planner: {'a': 4.468206893715115e-07, 'w': -0.0489208388817232}
2026-01-21 10:52:00,170 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:00,170 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:00,172 - INFO - integration_test - Step 25 completed in 2.042s
2026-01-21 10:52:00,234 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 10:52:00,235 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05845118 3.01634492 0.43659684 3.00000003 6.89999998]
2026-01-21 10:52:00,235 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.205m, drift=0.064m)
2026-01-21 10:52:00,236 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 10:52:00,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:00,351 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.016), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 10:52:00,351 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 10:52:00,559 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:00,582 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:00,583 - INFO - integration_test - Warmstart k=0: x0=6.0584511821019404 , y0=3.016344916051907 , psi0=0.43659684134220883 , v0=3.0000000299998506 , spline0=6.899999979536587 , a0=0.0 , w0=0.0
2026-01-21 10:52:00,583 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:00,583 - INFO - integration_test - Dyn residual k=0: pred=[6.330309973066405, 3.1432023146352392, 0.43659684134220883, 3.0000000299998506, 7.199999982536572], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.330309973066405, 3.1432023146352392, 0.43659684134220883, 3.0000000299998506, 7.199999982536572], res_norm=1.053e+01
2026-01-21 10:52:00,584 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:00,585 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:00,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:00,776 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:00,796 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:00,844 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:00,865 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:00,910 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:00,933 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:00,979 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:01,000 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,047 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:01,068 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,113 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:01,135 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,180 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:01,202 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,248 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:01,271 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,316 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:01,339 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,381 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:01,403 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:01,449 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:02,213 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 10:52:02,299 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 10:52:02,299 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:02,300 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 10:52:02,300 - INFO - integration_test -   Control dict from planner: {'a': -2.5259581622946977e-06, 'w': -0.06560147590486315}
2026-01-21 10:52:02,300 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:02,300 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:02,301 - INFO - integration_test - Step 26 completed in 2.066s
2026-01-21 10:52:02,367 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 10:52:02,368 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33072411 3.14230969 0.43003669 2.99999978 7.19999996]
2026-01-21 10:52:02,368 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-21 10:52:02,368 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 10:52:02,371 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:02,477 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.331, 3.142), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 10:52:02,477 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 10:52:02,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:02,596 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:02,596 - INFO - integration_test - Warmstart k=0: x0=6.33072411180756 , y0=3.1423096857524553 , psi0=0.4300366937517225 , v0=2.9999997774040343 , spline0=7.19999995727699 , a0=0.0 , w0=0.0
2026-01-21 10:52:02,596 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:02,597 - INFO - integration_test - Dyn residual k=0: pred=[6.603409227327459, 3.2673809231259674, 0.4300366937517225, 2.9999997774040343, 7.499999935017394], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.603409227327459, 3.2673809231259674, 0.4300366937517225, 2.9999997774040343, 7.499999935017394], res_norm=1.094e+01
2026-01-21 10:52:02,598 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:02,599 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:02,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:02,780 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:02,801 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:02,850 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:02,870 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:02,919 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:02,939 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:02,986 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:03,007 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,056 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:03,076 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,125 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:03,146 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,193 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:03,212 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,260 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:03,280 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,327 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:03,347 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,394 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:03,415 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:03,459 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:04,422 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 10:52:04,638 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 10:52:04,639 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:04,639 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 10:52:04,639 - INFO - integration_test -   Control dict from planner: {'a': 2.505132000615414e-06, 'w': -0.061389954758701216}
2026-01-21 10:52:04,639 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:04,639 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:04,640 - INFO - integration_test - Step 27 completed in 2.273s
2026-01-21 10:52:04,698 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 10:52:04,699 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60379143 3.26654314 0.4238977  3.00000003 7.49999996]
2026-01-21 10:52:04,699 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.125m, drift=0.175m)
2026-01-21 10:52:04,699 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 10:52:04,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:04,809 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.604, 3.267), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 10:52:04,809 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 10:52:04,906 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:04,933 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:04,933 - INFO - integration_test - Warmstart k=0: x0=6.603791430619071 , y0=3.26654313898749 , psi0=0.4238976982758524 , v0=3.0000000279172343 , spline0=7.499999960068713 , a0=0.0 , w0=0.0
2026-01-21 10:52:04,933 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:04,934 - INFO - integration_test - Dyn residual k=0: pred=[6.877239237548656, 3.3899380277002513, 0.4238976982758524, 3.0000000279172343, 7.799999962860436], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.877239237548656, 3.3899380277002513, 0.4238976982758524, 3.0000000279172343, 7.799999962860436], res_norm=1.135e+01
2026-01-21 10:52:04,935 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:04,935 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:04,951 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,127 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,148 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,195 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,215 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,265 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,287 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,334 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,354 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,402 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,422 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,474 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,494 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,542 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,561 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,605 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,625 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,673 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:05,695 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,740 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:05,759 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:05,805 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:07,884 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-21 10:52:07,884 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 10:52:07,962 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 10:52:07,962 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:07,962 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 10:52:07,962 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:52:07,962 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:07,963 - INFO - integration_test -   Planner output success: False
2026-01-21 10:52:07,963 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:52:07,966 - INFO - integration_test - Step 28 completed in 3.267s
2026-01-21 10:52:08,027 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 10:52:08,028 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87723924 3.38993803 0.4238977  3.00000003 7.79999996]
2026-01-21 10:52:08,029 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.243m, drift=0.013m)
2026-01-21 10:52:08,029 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 10:52:08,032 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:08,143 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.877, 3.390), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 10:52:08,143 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 10:52:08,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:08,268 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:08,268 - INFO - integration_test - Warmstart k=0: x0=6.877239237548656 , y0=3.3899380277002513 , psi0=0.4238976982758524 , v0=3.0000000279172343 , spline0=7.799999962860436 , a0=0.0 , w0=0.0
2026-01-21 10:52:08,268 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:08,269 - INFO - integration_test - Dyn residual k=0: pred=[7.15068704447824, 3.5133329164130127, 0.4238976982758524, 3.0000000279172343, 8.09999996565216], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.15068704447824, 3.5133329164130127, 0.4238976982758524, 3.0000000279172343, 8.09999996565216], res_norm=1.176e+01
2026-01-21 10:52:08,270 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:08,270 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:08,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,469 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,491 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,541 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,566 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,613 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,634 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,684 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,707 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,752 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,773 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,817 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,838 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,887 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,910 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:08,958 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:08,989 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:09,055 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:09,081 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:09,126 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:09,145 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:09,190 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:10,647 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 10:52:10,847 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 10:52:10,847 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:10,847 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 10:52:10,847 - INFO - integration_test -   Control dict from planner: {'a': -8.106612950802579e-07, 'w': 0.5193601662644488}
2026-01-21 10:52:10,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:10,847 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:10,849 - INFO - integration_test - Step 29 completed in 2.820s
2026-01-21 10:52:10,911 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 10:52:10,917 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.14736053 3.52037675 0.47583371 2.99999995 8.09999996]
2026-01-21 10:52:10,917 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.143m, drift=0.287m)
2026-01-21 10:52:10,917 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 10:52:10,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:11,038 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.147, 3.520), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 10:52:11,038 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 10:52:11,130 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:11,157 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:11,157 - INFO - integration_test - Warmstart k=0: x0=7.147360528075922 , y0=3.5203767481667367 , psi0=0.47583371490229726 , v0=2.999999946851105 , spline0=8.099999957545547 , a0=0.0 , w0=0.0
2026-01-21 10:52:11,157 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:11,158 - INFO - integration_test - Dyn residual k=0: pred=[7.414033860168513, 3.657800657155314, 0.47583371490229726, 2.999999946851105, 8.399999952230658], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.414033860168513, 3.657800657155314, 0.47583371490229726, 2.999999946851105, 8.399999952230658], res_norm=1.217e+01
2026-01-21 10:52:11,158 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:11,159 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:11,175 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,347 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,369 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,412 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,437 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,488 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,512 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,559 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,583 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,630 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,651 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,701 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,721 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,769 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,789 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,836 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,859 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,908 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:11,929 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:11,976 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:11,997 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:12,042 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:12,945 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 10:52:13,028 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 10:52:13,028 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:13,028 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 10:52:13,028 - INFO - integration_test -   Control dict from planner: {'a': 8.184457932808329e-07, 'w': -0.7999992270751347}
2026-01-21 10:52:13,028 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:13,028 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:13,029 - INFO - integration_test - Step 30 completed in 2.113s
2026-01-21 10:52:13,089 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 10:52:13,092 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.41924353 3.64699289 0.39583379 3.00000003 8.39999996]
2026-01-21 10:52:13,092 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.136m, drift=0.099m)
2026-01-21 10:52:13,092 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 10:52:13,095 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:13,202 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.419, 3.647), path_start=(0.000, 0.000), dist=8.267m
2026-01-21 10:52:13,202 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 10:52:13,427 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:13,452 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:13,452 - INFO - integration_test - Warmstart k=0: x0=7.4192435277458495 , y0=3.6469928871377637 , psi0=0.39583379219478376 , v0=3.000000028695684 , spline0=8.399999960415116 , a0=0.0 , w0=0.0
2026-01-21 10:52:13,453 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:13,454 - INFO - integration_test - Dyn residual k=0: pred=[7.696046148442941, 3.762666180930941, 0.39583379219478376, 3.000000028695684, 8.699999963284684], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.696046148442941, 3.762666180930941, 0.39583379219478376, 3.000000028695684, 8.699999963284684], res_norm=1.258e+01
2026-01-21 10:52:13,454 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:13,455 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:13,474 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:13,639 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:13,663 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:13,710 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:13,735 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:13,788 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:13,809 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:13,884 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:13,917 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:13,967 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:13,990 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:14,038 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:14,060 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:14,108 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:14,130 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:14,175 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:14,196 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:14,243 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:14,265 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:14,311 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:14,331 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:14,376 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:15,231 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 10:52:15,313 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 10:52:15,314 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:15,314 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 10:52:15,314 - INFO - integration_test -   Control dict from planner: {'a': 1.2940962684797897e-08, 'w': -0.8000000086175398}
2026-01-21 10:52:15,314 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:15,314 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:15,315 - INFO - integration_test - Step 31 completed in 2.224s
2026-01-21 10:52:15,378 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 10:52:15,379 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70037546 3.75147664 0.31583379 3.00000003 8.69999996]
2026-01-21 10:52:15,380 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.248m, drift=0.399m)
2026-01-21 10:52:15,380 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 10:52:15,383 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:15,490 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.700, 3.751), path_start=(0.000, 0.000), dist=8.566m
2026-01-21 10:52:15,490 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 10:52:15,590 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:15,615 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:15,615 - INFO - integration_test - Warmstart k=0: x0=7.700375455466361 , y0=3.7514766359827068 , psi0=0.3158337913330298 , v0=3.0000000299897804 , spline0=8.699999963414093 , a0=0.0 , w0=0.0
2026-01-21 10:52:15,615 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:15,616 - INFO - integration_test - Dyn residual k=0: pred=[7.985536776163456, 3.8446593756809744, 0.3158337913330298, 3.0000000299897804, 8.999999966413071], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.985536776163456, 3.8446593756809744, 0.3158337913330298, 3.0000000299897804, 8.999999966413071], res_norm=1.299e+01
2026-01-21 10:52:15,617 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:15,618 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:15,634 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:15,807 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:15,828 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:15,876 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:15,897 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:15,941 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:15,961 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,004 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:16,029 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,076 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:16,099 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,146 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:16,166 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,214 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:16,233 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,282 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:16,302 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,348 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:16,370 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,415 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:16,434 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:16,481 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:17,250 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 10:52:17,468 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 10:52:17,469 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:17,469 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 10:52:17,469 - INFO - integration_test -   Control dict from planner: {'a': -2.9484516268885732e-08, 'w': -0.46790249322079114}
2026-01-21 10:52:17,469 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:17,469 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:17,470 - INFO - integration_test - Step 32 completed in 2.091s
2026-01-21 10:52:17,535 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 10:52:17,536 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.98761236 3.83795521 0.26904354 3.00000003 8.99999997]
2026-01-21 10:52:17,536 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.162m, drift=0.211m)
2026-01-21 10:52:17,536 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 10:52:17,539 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:17,644 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.988, 3.838), path_start=(0.000, 0.000), dist=8.862m
2026-01-21 10:52:17,644 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 10:52:17,747 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:17,772 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:17,772 - INFO - integration_test - Warmstart k=0: x0=7.987612360081396 , y0=3.837955210669365 , psi0=0.2690435420109507 , v0=3.0000000270413287 , spline0=8.999999966118226 , a0=0.0 , w0=0.0
2026-01-21 10:52:17,772 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:17,773 - INFO - integration_test - Dyn residual k=0: pred=[8.276820034560062, 3.9176980639235692, 0.2690435420109507, 3.0000000270413287, 9.299999968822359], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.276820034560062, 3.9176980639235692, 0.2690435420109507, 3.0000000270413287, 9.299999968822359], res_norm=1.339e+01
2026-01-21 10:52:17,773 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:17,774 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:17,790 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:17,963 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:17,984 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,032 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,054 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,100 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,123 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,170 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,191 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,235 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,256 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,305 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,326 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,371 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,395 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,440 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,460 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,521 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:18,552 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,608 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:18,628 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:18,674 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:19,479 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 10:52:19,569 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 10:52:19,569 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:19,570 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 10:52:19,570 - INFO - integration_test -   Control dict from planner: {'a': -9.371977208822334e-08, 'w': -0.7999989542261617}
2026-01-21 10:52:19,570 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:19,570 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:19,571 - INFO - integration_test - Step 33 completed in 2.036s
2026-01-21 10:52:19,634 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 10:52:19,636 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.27969966 3.90605091 0.18904365 3.00000002 9.29999997]
2026-01-21 10:52:19,636 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.253m, drift=0.022m)
2026-01-21 10:52:19,636 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 10:52:19,639 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:19,750 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.280, 3.906), path_start=(0.000, 0.000), dist=9.155m
2026-01-21 10:52:19,750 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 10:52:19,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:19,872 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:19,872 - INFO - integration_test - Warmstart k=0: x0=8.279699658727575 , y0=3.906050909752067 , psi0=0.18904364658833453 , v0=3.0000000176693513 , spline0=9.299999967885162 , a0=0.0 , w0=0.0
2026-01-21 10:52:19,872 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:19,873 - INFO - integration_test - Dyn residual k=0: pred=[8.574354981021617, 3.9624268097799638, 0.18904364658833453, 3.0000000176693513, 9.599999969652098], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.574354981021617, 3.9624268097799638, 0.18904364658833453, 3.0000000176693513, 9.599999969652098], res_norm=1.380e+01
2026-01-21 10:52:19,874 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:19,875 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:19,893 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,059 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,081 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,129 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,151 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,196 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,216 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,266 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,287 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,336 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,356 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,404 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,424 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,473 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,494 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,541 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,562 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,607 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:20,626 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,674 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:20,696 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:20,741 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:21,536 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 10:52:21,764 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 10:52:21,764 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:21,764 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 10:52:21,764 - INFO - integration_test -   Control dict from planner: {'a': 1.2275210771563617e-07, 'w': -0.8000000063232714}
2026-01-21 10:52:21,765 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:21,765 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:21,766 - INFO - integration_test - Step 34 completed in 2.130s
2026-01-21 10:52:21,825 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 10:52:21,826 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.57629462 3.95058677 0.10904365 3.00000003 9.59999997]
2026-01-21 10:52:21,827 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.319m, drift=0.322m)
2026-01-21 10:52:21,827 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 10:52:21,831 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:21,937 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.576, 3.951), path_start=(0.000, 0.000), dist=9.442m
2026-01-21 10:52:21,937 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 10:52:22,047 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:22,072 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:22,072 - INFO - integration_test - Warmstart k=0: x0=8.576294620983203 , y0=3.950586767096817 , psi0=0.10904364595600739 , v0=3.000000029944562 , spline0=9.599999970879619 , a0=0.0 , w0=0.0
2026-01-21 10:52:22,072 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:22,073 - INFO - integration_test - Dyn residual k=0: pred=[8.874512813055894, 3.983235070476471, 0.10904364595600739, 3.000000029944562, 9.899999973874076], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.874512813055894, 3.983235070476471, 0.10904364595600739, 3.000000029944562, 9.899999973874076], res_norm=1.420e+01
2026-01-21 10:52:22,074 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:22,075 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:22,093 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,268 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,305 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,381 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,407 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,452 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,475 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,521 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,544 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,589 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,657 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,679 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,726 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,747 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,794 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,861 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:22,882 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,928 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:22,949 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:22,995 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:23,936 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 10:52:24,033 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 10:52:24,033 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:24,033 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 10:52:24,034 - INFO - integration_test -   Control dict from planner: {'a': -1.2075266234020728e-07, 'w': -0.36171002501871996}
2026-01-21 10:52:24,034 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:24,034 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:24,035 - INFO - integration_test - Step 35 completed in 2.209s
2026-01-21 10:52:24,103 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 10:52:24,104 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.87503818 3.97783511 0.07287264 3.00000002 9.89999997]
2026-01-21 10:52:24,105 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.372m, drift=0.134m)
2026-01-21 10:52:24,105 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 10:52:24,108 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:24,217 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.875, 3.978), path_start=(0.000, 0.000), dist=9.726m
2026-01-21 10:52:24,217 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 10:52:24,316 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:24,345 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:24,345 - INFO - integration_test - Warmstart k=0: x0=8.87503818490754 , y0=3.977835114244614 , psi0=0.0728726434541354 , v0=3.000000017869296 , spline0=9.89999997266655 , a0=0.0 , w0=0.0
2026-01-21 10:52:24,345 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:24,346 - INFO - integration_test - Dyn residual k=0: pred=[9.17424197581003, 3.9996775633228885, 0.0728726434541354, 3.000000017869296, 10.19999997445348], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.17424197581003, 3.9996775633228885, 0.0728726434541354, 3.000000017869296, 10.19999997445348], res_norm=1.460e+01
2026-01-21 10:52:24,347 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:24,348 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:24,365 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,534 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,557 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,605 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,626 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,674 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,696 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,743 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,765 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,813 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,833 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,881 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,902 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:24,950 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:24,970 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:25,019 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:25,040 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:25,088 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:25,109 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:25,155 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:25,175 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:25,220 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:26,041 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 10:52:26,280 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 10:52:26,280 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:26,280 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 10:52:26,281 - INFO - integration_test -   Control dict from planner: {'a': 1.1999058457539812e-07, 'w': 0.6593058156715158}
2026-01-21 10:52:26,281 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:26,281 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:26,282 - INFO - integration_test - Step 36 completed in 2.178s
2026-01-21 10:52:26,350 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 10:52:26,351 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.17330548  4.00952151  0.13880323  3.00000003 10.19999998]
2026-01-21 10:52:26,352 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.508m, drift=0.054m)
2026-01-21 10:52:26,352 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 10:52:26,355 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:26,463 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.173, 4.010), path_start=(0.000, 0.000), dist=10.011m
2026-01-21 10:52:26,464 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.011m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:26,464 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 10:52:26,566 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:26,591 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:26,591 - INFO - integration_test - Warmstart k=0: x0=9.17330547832633 , y0=4.009521510385587 , psi0=0.13880322502128697 , v0=3.0000000298683545 , spline0=10.199999975653384 , a0=0.0 , w0=0.0
2026-01-21 10:52:26,591 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:26,592 - INFO - integration_test - Dyn residual k=0: pred=[9.470420167910163, 4.051028895579123, 0.13880322502128697, 3.0000000298683545, 10.499999978640219], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.470420167910163, 4.051028895579123, 0.13880322502128697, 3.0000000298683545, 10.499999978640219], res_norm=1.501e+01
2026-01-21 10:52:26,593 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:26,593 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:26,609 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:26,777 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:26,799 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:26,846 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:26,868 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:26,916 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:26,937 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:26,983 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:27,006 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,051 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:27,073 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,126 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:27,150 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,198 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:27,221 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,268 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:27,291 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,343 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:27,365 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,411 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:27,431 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:27,478 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:28,301 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 10:52:28,404 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 10:52:28,404 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:28,404 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 10:52:28,404 - INFO - integration_test -   Control dict from planner: {'a': -1.17171798878174e-07, 'w': -0.7598192589570953}
2026-01-21 10:52:28,404 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:28,404 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:28,406 - INFO - integration_test - Step 37 completed in 2.055s
2026-01-21 10:52:28,473 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 10:52:28,477 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.47171051  4.03970672  0.0628213   3.00000002 10.49999998]
2026-01-21 10:52:28,477 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.536m, drift=0.246m)
2026-01-21 10:52:28,477 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 10:52:28,480 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:28,586 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.472, 4.040), path_start=(0.000, 0.000), dist=10.297m
2026-01-21 10:52:28,586 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.297m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:28,586 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 10:52:28,694 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:28,719 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:28,719 - INFO - integration_test - Warmstart k=0: x0=9.471710513934873 , y0=4.039706724972355 , psi0=0.06282129912557743 , v0=3.000000018151175 , spline0=10.499999977468502 , a0=0.0 , w0=0.0
2026-01-21 10:52:28,719 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:28,720 - INFO - integration_test - Dyn residual k=0: pred=[9.771118733064547, 4.058540721007928, 0.06282129912557743, 3.000000018151175, 10.79999997928362], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.771118733064547, 4.058540721007928, 0.06282129912557743, 3.000000018151175, 10.79999997928362], res_norm=1.541e+01
2026-01-21 10:52:28,721 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:28,722 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:28,738 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:28,910 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:28,932 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:28,980 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,001 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,049 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,074 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,129 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,152 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,199 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,220 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,266 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,290 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,340 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,362 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,412 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,433 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,482 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:29,506 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,552 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:29,574 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:29,619 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:30,543 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 10:52:30,782 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 10:52:30,783 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:30,783 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 10:52:30,783 - INFO - integration_test -   Control dict from planner: {'a': 1.1813377923203892e-07, 'w': 0.8000000091025714}
2026-01-21 10:52:30,783 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:30,783 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:30,784 - INFO - integration_test - Step 38 completed in 2.308s
2026-01-21 10:52:30,844 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 10:52:30,845 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.77004651  4.07049058  0.1428213   3.00000003 10.79999998]
2026-01-21 10:52:30,846 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.626m, drift=0.057m)
2026-01-21 10:52:30,846 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 10:52:30,848 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:30,961 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.770, 4.070), path_start=(0.000, 0.000), dist=10.584m
2026-01-21 10:52:30,961 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.584m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:30,961 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 10:52:31,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:31,087 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:31,087 - INFO - integration_test - Warmstart k=0: x0=9.770046513159269 , y0=4.070490581234113 , psi0=0.1428213000358346 , v0=3.0000000299645526 , spline0=10.799999980464957 , a0=0.0 , w0=0.0
2026-01-21 10:52:31,087 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:31,088 - INFO - integration_test - Dyn residual k=0: pred=[10.066992024969798, 4.113191457260916, 0.1428213000358346, 3.0000000299645526, 11.099999983461412], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.066992024969798, 4.113191457260916, 0.1428213000358346, 3.0000000299645526, 11.099999983461412], res_norm=1.583e+01
2026-01-21 10:52:31,089 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:31,090 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:31,106 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,280 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,303 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,351 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,375 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,422 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,444 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,494 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,515 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,563 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,583 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,627 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,648 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,697 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,718 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,767 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,787 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,835 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:31,856 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,904 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:31,924 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:31,971 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:33,381 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 10:52:33,474 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 10:52:33,474 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:33,474 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 10:52:33,475 - INFO - integration_test -   Control dict from planner: {'a': -1.4612806211799985e-07, 'w': 0.7999994025443633}
2026-01-21 10:52:33,475 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:33,475 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:33,476 - INFO - integration_test - Step 39 completed in 2.631s
2026-01-21 10:52:33,541 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 10:52:33,543 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[10.06496827  4.1250174   0.22282124  3.00000002 11.09999998]
2026-01-21 10:52:33,543 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.686m, drift=0.357m)
2026-01-21 10:52:33,543 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 10:52:33,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:33,647 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(10.065, 4.125), path_start=(0.000, 0.000), dist=10.877m
2026-01-21 10:52:33,647 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.877m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:33,647 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 10:52:33,750 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:33,774 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:33,774 - INFO - integration_test - Warmstart k=0: x0=10.064968265374203 , y0=4.125017403063795 , psi0=0.22282124029027092 , v0=3.0000000153517465 , spline0=11.099999982000131 , a0=0.0 , w0=0.0
2026-01-21 10:52:33,774 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:33,775 - INFO - integration_test - Dyn residual k=0: pred=[10.357551633321599, 4.191312001046312, 0.22282124029027092, 3.0000000153517465, 11.399999983535306], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.357551633321599, 4.191312001046312, 0.22282124029027092, 3.0000000153517465, 11.399999983535306], res_norm=1.624e+01
2026-01-21 10:52:33,776 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:33,777 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:33,792 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:33,991 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,024 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,075 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,102 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,150 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,171 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,217 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,239 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,286 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,312 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,362 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,383 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,432 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,454 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,504 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,530 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,579 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:34,600 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,646 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:34,666 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:34,716 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:35,586 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 10:52:35,841 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 10:52:35,841 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:35,841 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 10:52:35,841 - INFO - integration_test -   Control dict from planner: {'a': 9.297704004695669e-08, 'w': 0.7999996077170214}
2026-01-21 10:52:35,842 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:35,842 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:35,843 - INFO - integration_test - Step 40 completed in 2.301s
2026-01-21 10:52:35,908 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 10:52:35,914 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.35458928  4.2029384   0.3028212   3.00000002 11.39999998]
2026-01-21 10:52:35,914 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.693m, drift=0.169m)
2026-01-21 10:52:35,914 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 10:52:35,917 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:36,023 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.355, 4.203), path_start=(0.000, 0.000), dist=11.175m
2026-01-21 10:52:36,024 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.175m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:36,024 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 10:52:36,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:36,153 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:36,153 - INFO - integration_test - Warmstart k=0: x0=10.354589280483932 , y0=4.20293839927924 , psi0=0.3028212010619731 , v0=3.0000000246494505 , spline0=11.399999984465076 , a0=0.0 , w0=0.0
2026-01-21 10:52:36,153 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:36,154 - INFO - integration_test - Dyn residual k=0: pred=[10.640938972777077, 4.292402667021105, 0.3028212010619731, 3.0000000246494505, 11.69999998693002], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.640938972777077, 4.292402667021105, 0.3028212010619731, 3.0000000246494505, 11.69999998693002], res_norm=1.666e+01
2026-01-21 10:52:36,155 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:36,155 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:36,171 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,355 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,377 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,426 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,450 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,499 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,522 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,570 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,592 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,636 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,657 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,704 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,771 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,794 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,839 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,860 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,910 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:36,931 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:36,976 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:36,996 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:37,041 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:37,960 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 10:52:38,057 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 10:52:38,057 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:38,057 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 10:52:38,057 - INFO - integration_test -   Control dict from planner: {'a': 5.197052024172797e-08, 'w': 0.7999999826032698}
2026-01-21 10:52:38,057 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:38,057 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:38,059 - INFO - integration_test - Step 41 completed in 2.145s
2026-01-21 10:52:38,126 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 10:52:38,127 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.63705697  4.30375515  0.3828212   3.00000003 11.69999999]
2026-01-21 10:52:38,128 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.722m, drift=0.019m)
2026-01-21 10:52:38,128 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 10:52:38,131 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:38,243 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.637, 4.304), path_start=(0.000, 0.000), dist=11.475m
2026-01-21 10:52:38,243 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.475m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:38,243 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 10:52:38,348 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:38,373 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:38,373 - INFO - integration_test - Warmstart k=0: x0=10.637056972637911 , y0=4.303755150482848 , psi0=0.3828211993223001 , v0=3.0000000298465026 , spline0=11.699999987449726 , a0=0.0 , w0=0.0
2026-01-21 10:52:38,373 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:38,374 - INFO - integration_test - Dyn residual k=0: pred=[10.915341325614218, 4.415816832958833, 0.3828211993223001, 3.0000000298465026, 11.999999990434375], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.915341325614218, 4.415816832958833, 0.3828211993223001, 3.0000000298465026, 11.999999990434375], res_norm=1.708e+01
2026-01-21 10:52:38,375 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:38,377 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:38,396 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,567 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:38,589 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,634 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:38,658 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,707 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:38,729 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,781 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:38,803 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,853 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:38,875 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,926 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:38,948 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:38,995 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:39,017 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:39,063 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:39,085 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:39,135 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:39,157 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:39,205 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:39,226 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:39,270 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:40,198 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 10:52:40,467 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 10:52:40,467 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:40,467 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 10:52:40,467 - INFO - integration_test -   Control dict from planner: {'a': -7.12744806572679e-08, 'w': 0.7999913693425559}
2026-01-21 10:52:40,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:40,467 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:40,468 - INFO - integration_test - Step 42 completed in 2.341s
2026-01-21 10:52:40,537 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 10:52:40,538 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.91056457  4.42682266  0.46282034  3.00000002 11.99999999]
2026-01-21 10:52:40,539 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.677m, drift=0.281m)
2026-01-21 10:52:40,539 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 10:52:40,542 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:40,641 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.911, 4.427), path_start=(0.000, 0.000), dist=11.774m
2026-01-21 10:52:40,641 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.774m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:40,641 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 10:52:40,740 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:40,765 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:40,765 - INFO - integration_test - Warmstart k=0: x0=10.910564565033603 , y0=4.426822661675329 , psi0=0.46282033625655566 , v0=3.0000000227190546 , spline0=11.999999989721632 , a0=0.0 , w0=0.0
2026-01-21 10:52:40,765 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:40,766 - INFO - integration_test - Dyn residual k=0: pred=[11.179003622820103, 4.560764714884316, 0.46282033625655566, 3.0000000227190546, 12.299999991993538], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.179003622820103, 4.560764714884316, 0.46282033625655566, 3.0000000227190546, 12.299999991993538], res_norm=1.750e+01
2026-01-21 10:52:40,767 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:40,767 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:40,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:40,958 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:40,979 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,028 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,049 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,098 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,120 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,167 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,188 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,237 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,258 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,305 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,329 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,374 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,397 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,445 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,466 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,515 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:41,538 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,581 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:41,602 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:41,648 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:42,695 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 10:52:42,817 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 10:52:42,818 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:42,818 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 10:52:42,818 - INFO - integration_test -   Control dict from planner: {'a': 7.279922072356145e-08, 'w': -0.03015006705418709}
2026-01-21 10:52:42,818 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:42,818 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:42,819 - INFO - integration_test - Step 43 completed in 2.281s
2026-01-21 10:52:42,887 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 10:52:42,888 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.17920513  4.56035984  0.45980533  3.00000003 12.29999999]
2026-01-21 10:52:42,889 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.636m, drift=0.092m)
2026-01-21 10:52:42,889 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 10:52:42,892 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:43,004 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.179, 4.560), path_start=(0.000, 0.000), dist=12.074m
2026-01-21 10:52:43,004 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.074m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:43,004 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 10:52:43,103 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:43,129 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:43,129 - INFO - integration_test - Warmstart k=0: x0=11.1792051343906 , y0=4.5603598396450735 , psi0=0.45980532955113695 , v0=3.0000000299989766 , spline0=12.29999999272153 , a0=0.0 , w0=0.0
2026-01-21 10:52:43,129 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:43,130 - INFO - integration_test - Dyn residual k=0: pred=[11.448046808315995, 4.693491940060149, 0.45980532955113695, 3.0000000299989766, 12.599999995721427], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.448046808315995, 4.693491940060149, 0.45980532955113695, 3.0000000299989766, 12.599999995721427], res_norm=1.792e+01
2026-01-21 10:52:43,131 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:43,131 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:43,149 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,321 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,345 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,395 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,420 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,467 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,491 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,538 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,560 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,605 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,668 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,691 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,738 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,761 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,807 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,830 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,875 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:43,899 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:43,943 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:43,964 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:44,020 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:45,726 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 10:52:45,847 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 10:52:45,847 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:45,847 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 10:52:45,847 - INFO - integration_test -   Control dict from planner: {'a': -3.6245033596606863e-06, 'w': -0.22078529892301377}
2026-01-21 10:52:45,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:45,847 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:45,848 - INFO - integration_test - Step 44 completed in 2.960s
2026-01-21 10:52:45,918 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 10:52:45,922 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.44949457  4.69051342  0.4377268   2.99999967 12.59999996]
2026-01-21 10:52:45,922 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.632m, drift=0.392m)
2026-01-21 10:52:45,923 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 10:52:45,926 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:46,193 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.449, 4.691), path_start=(0.000, 0.000), dist=12.373m
2026-01-21 10:52:46,193 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.373m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:46,193 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 10:52:46,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:46,314 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:46,314 - INFO - integration_test - Warmstart k=0: x0=11.44949457168305 , y0=4.690513422492669 , psi0=0.4377267996588356 , v0=2.9999996675486407 , spline0=12.599999959476394 , a0=0.0 , w0=0.0
2026-01-21 10:52:46,314 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:46,315 - INFO - integration_test - Dyn residual k=0: pred=[11.721209812722199, 4.8176779137626635, 0.4377267996588356, 2.9999996675486407, 12.899999926231258], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.721209812722199, 4.8176779137626635, 0.4377267996588356, 2.9999996675486407, 12.899999926231258], res_norm=1.834e+01
2026-01-21 10:52:46,316 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:46,317 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:46,333 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,502 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,525 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,573 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,594 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,639 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,663 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,710 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,735 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,781 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,805 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,851 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,874 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,924 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:46,945 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:46,993 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:47,017 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:47,066 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:47,087 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:47,133 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:47,160 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:47,205 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:48,199 - INFO - integration_test - Step 45: MPC solve successful
2026-01-21 10:52:48,316 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 10:52:48,317 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:48,317 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 10:52:48,317 - INFO - integration_test -   Control dict from planner: {'a': 3.6026905118115218e-06, 'w': -0.17080486024982894}
2026-01-21 10:52:48,317 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:48,317 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:48,318 - INFO - integration_test - Step 45 completed in 2.396s
2026-01-21 10:52:48,386 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 10:52:48,388 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.72228261  4.81535128  0.42064631  3.00000003 12.89999996]
2026-01-21 10:52:48,388 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.561m, drift=0.204m)
2026-01-21 10:52:48,388 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 10:52:48,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:48,502 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.722, 4.815), path_start=(0.000, 0.000), dist=12.673m
2026-01-21 10:52:48,502 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.673m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:48,502 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 10:52:48,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:48,625 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:48,625 - INFO - integration_test - Warmstart k=0: x0=11.722282606742255 , y0=4.8153512803076275 , psi0=0.4206463136338527 , v0=3.0000000278176917 , spline0=12.899999962258162 , a0=0.0 , w0=0.0
2026-01-21 10:52:48,625 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:48,626 - INFO - integration_test - Dyn residual k=0: pred=[11.996130171826168, 4.937856434348889, 0.4206463136338527, 3.0000000278176917, 13.19999996503993], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.996130171826168, 4.937856434348889, 0.4206463136338527, 3.0000000278176917, 13.19999996503993], res_norm=1.875e+01
2026-01-21 10:52:48,627 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:48,628 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:48,644 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:48,817 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:48,842 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:48,888 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:48,913 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:48,963 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:48,986 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,031 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:49,055 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,101 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:49,126 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,172 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:49,195 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,241 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:49,266 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,315 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:49,337 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,383 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:49,406 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,450 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:49,474 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:49,522 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:50,545 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 10:52:50,653 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 10:52:50,653 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:50,653 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 10:52:50,653 - INFO - integration_test -   Control dict from planner: {'a': 2.182039089468455e-08, 'w': -0.16410003615058602}
2026-01-21 10:52:50,653 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:50,653 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:50,655 - INFO - integration_test - Step 46 completed in 2.267s
2026-01-21 10:52:50,727 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 10:52:50,729 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.99712301  4.93560407  0.40423631  3.00000003 13.19999997]
2026-01-21 10:52:50,729 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.554m, drift=0.016m)
2026-01-21 10:52:50,729 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 10:52:50,732 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:50,844 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.997, 4.936), path_start=(0.000, 0.000), dist=12.973m
2026-01-21 10:52:50,844 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.973m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:50,844 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 10:52:51,133 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:51,161 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:51,161 - INFO - integration_test - Warmstart k=0: x0=11.99712301389899 , y0=4.935604066925753 , psi0=0.40423631001879406 , v0=3.0000000299997307 , spline0=13.199999965258135 , a0=0.0 , w0=0.0
2026-01-21 10:52:51,161 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:51,162 - INFO - integration_test - Dyn residual k=0: pred=[12.272943927845883, 5.0535990889795865, 0.40423631001879406, 3.0000000299997307, 13.499999968258107], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.272943927845883, 5.0535990889795865, 0.40423631001879406, 3.0000000299997307, 13.499999968258107], res_norm=1.917e+01
2026-01-21 10:52:51,162 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:51,163 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:51,179 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,351 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,373 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,421 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,443 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,493 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,515 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,564 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,587 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,635 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,658 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,704 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,776 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,797 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,848 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,869 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,918 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:51,939 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:51,985 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:52,005 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:52,053 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:53,189 - INFO - integration_test - Step 47: MPC solve successful
2026-01-21 10:52:53,323 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 10:52:53,323 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:53,323 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 10:52:53,323 - INFO - integration_test -   Control dict from planner: {'a': -2.847306605713094e-11, 'w': -0.15855804688807712}
2026-01-21 10:52:53,324 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:53,324 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:53,325 - INFO - integration_test - Step 47 completed in 2.596s
2026-01-21 10:52:53,393 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 10:52:53,395 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.2738678   5.05140751  0.38838051  3.00000003 13.49999997]
2026-01-21 10:52:53,395 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.520m, drift=0.316m)
2026-01-21 10:52:53,395 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 10:52:53,398 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:53,515 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.274, 5.051), path_start=(0.000, 0.000), dist=13.273m
2026-01-21 10:52:53,515 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.273m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:53,515 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 10:52:53,617 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:53,643 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:53,643 - INFO - integration_test - Warmstart k=0: x0=12.273867804213937 , y0=5.051407509465604 , psi0=0.38838050532998636 , v0=3.000000029996883 , spline0=13.499999968257823 , a0=0.0 , w0=0.0
2026-01-21 10:52:53,643 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:53,644 - INFO - integration_test - Dyn residual k=0: pred=[12.55152487492773, 5.1650145201755455, 0.38838050532998636, 3.000000029996883, 13.799999971257511], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.55152487492773, 5.1650145201755455, 0.38838050532998636, 3.000000029996883, 13.799999971257511], res_norm=1.959e+01
2026-01-21 10:52:53,645 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:53,646 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:53,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:53,838 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:53,860 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:53,906 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:53,931 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:53,981 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,002 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,051 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,071 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,118 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,142 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,191 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,212 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,260 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,281 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,331 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,352 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,398 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:54,422 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,466 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:54,489 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:54,537 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:55,636 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 10:52:55,789 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 10:52:55,790 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:55,790 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 10:52:55,790 - INFO - integration_test -   Control dict from planner: {'a': -7.57426489227093e-09, 'w': -0.1371460347536587}
2026-01-21 10:52:55,790 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:55,790 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:55,791 - INFO - integration_test - Step 48 completed in 2.397s
2026-01-21 10:52:55,856 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 10:52:55,857 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.5522952   5.16310701  0.3746659   3.00000003 13.79999997]
2026-01-21 10:52:55,858 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.479m, drift=0.127m)
2026-01-21 10:52:55,858 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 10:52:55,861 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:55,971 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.552, 5.163), path_start=(0.000, 0.000), dist=13.573m
2026-01-21 10:52:55,971 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.573m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:55,971 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 10:52:56,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:56,093 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:56,093 - INFO - integration_test - Warmstart k=0: x0=12.552295196216539 , y0=5.163107010329007 , psi0=0.3746659018546205 , v0=3.0000000292394566 , spline0=13.79999997118177 , a0=0.0 , w0=0.0
2026-01-21 10:52:56,093 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:56,094 - INFO - integration_test - Dyn residual k=0: pred=[12.831484181222756, 5.272895499732798, 0.3746659018546205, 3.0000000292394566, 14.099999974105716], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.831484181222756, 5.272895499732798, 0.3746659018546205, 3.0000000292394566, 14.099999974105716], res_norm=2.001e+01
2026-01-21 10:52:56,095 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:56,095 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:56,114 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,286 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,309 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,358 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,380 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,428 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,449 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,496 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,517 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,567 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,590 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,639 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,662 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,707 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,729 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,779 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,802 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,848 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:56,870 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,913 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:56,937 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:56,984 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:58,015 - INFO - integration_test - Step 49: MPC solve successful
2026-01-21 10:52:58,306 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 10:52:58,306 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:52:58,306 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 10:52:58,306 - INFO - integration_test -   Control dict from planner: {'a': 6.341904636074148e-09, 'w': -0.15759112906013972}
2026-01-21 10:52:58,306 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:52:58,306 - INFO - integration_test -   Planner output success: True
2026-01-21 10:52:58,307 - INFO - integration_test - Step 49 completed in 2.450s
2026-01-21 10:52:58,371 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 10:52:58,374 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.83233769  5.27069112  0.35890679  3.00000003 14.09999997]
2026-01-21 10:52:58,375 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.514m, drift=0.427m)
2026-01-21 10:52:58,375 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 10:52:58,378 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:58,485 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.832, 5.271), path_start=(0.000, 0.000), dist=13.873m
2026-01-21 10:52:58,485 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.873m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:52:58,485 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 10:52:58,596 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:52:58,622 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:52:58,622 - INFO - integration_test - Warmstart k=0: x0=12.83233769201792 , y0=5.270691115640466 , psi0=0.35890678894860656 , v0=3.000000029873647 , spline0=14.099999974169133 , a0=0.0 , w0=0.0
2026-01-21 10:52:58,622 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:52:58,623 - INFO - integration_test - Dyn residual k=0: pred=[13.113222107145795, 5.376066383757279, 0.35890678894860656, 3.000000029873647, 14.399999977156497], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.113222107145795, 5.376066383757279, 0.35890678894860656, 3.000000029873647, 14.399999977156497], res_norm=2.043e+01
2026-01-21 10:52:58,624 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:58,625 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:52:58,643 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:58,815 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:58,837 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:58,884 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:58,906 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:58,952 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:58,976 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,021 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:59,044 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,090 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:59,111 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,160 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:59,185 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,232 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:59,253 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,299 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:59,320 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,369 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:52:59,390 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,432 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:52:59,454 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:52:59,498 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:00,502 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 10:53:00,642 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 10:53:00,642 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:00,642 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 10:53:00,642 - INFO - integration_test -   Control dict from planner: {'a': -9.947849168427924e-08, 'w': -0.10598105518600635}
2026-01-21 10:53:00,642 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:00,642 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:00,643 - INFO - integration_test - Step 50 completed in 2.270s
2026-01-21 10:53:00,709 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 10:53:00,713 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.11377523  5.374576    0.34830868  3.00000002 14.39999998]
2026-01-21 10:53:00,713 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.432m, drift=0.239m)
2026-01-21 10:53:00,714 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 10:53:00,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:00,829 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.114, 5.375), path_start=(0.000, 0.000), dist=14.172m
2026-01-21 10:53:00,829 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.172m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:00,829 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 10:53:00,933 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:00,959 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:00,959 - INFO - integration_test - Warmstart k=0: x0=13.113775232439629 , y0=5.374576003571702 , psi0=0.3483086834300059 , v0=3.000000019925798 , spline0=14.399999976161713 , a0=0.0 , w0=0.0
2026-01-21 10:53:00,959 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:00,960 - INFO - integration_test - Dyn residual k=0: pred=[13.39576062963835, 5.476968566593767, 0.3483086834300059, 3.000000019925798, 14.699999978154292], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.39576062963835, 5.476968566593767, 0.3483086834300059, 3.000000019925798, 14.699999978154292], res_norm=2.085e+01
2026-01-21 10:53:00,960 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:00,961 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:00,977 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,151 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,172 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,220 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,241 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,289 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,308 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,356 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,377 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,424 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,445 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,492 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,513 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,561 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,581 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,626 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,646 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,696 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:01,718 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,770 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:01,792 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:01,836 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:02,754 - INFO - integration_test - Step 51: MPC solve successful
2026-01-21 10:53:03,042 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 10:53:03,042 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:03,042 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 10:53:03,042 - INFO - integration_test -   Control dict from planner: {'a': 9.897306874427054e-08, 'w': -0.16020507270765702}
2026-01-21 10:53:03,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:03,042 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:03,043 - INFO - integration_test - Step 51 completed in 2.331s
2026-01-21 10:53:03,105 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 10:53:03,106 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.39656874  5.47470546  0.33228818  3.00000003 14.69999998]
2026-01-21 10:53:03,106 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.435m, drift=0.051m)
2026-01-21 10:53:03,106 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 10:53:03,109 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:03,215 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.397, 5.475), path_start=(0.000, 0.000), dist=14.472m
2026-01-21 10:53:03,215 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.472m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:03,215 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 10:53:03,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:03,341 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:03,341 - INFO - integration_test - Warmstart k=0: x0=13.39656874088654 , y0=5.474705460618107 , psi0=0.3322881761592402 , v0=3.000000029823105 , spline0=14.699999979144023 , a0=0.0 , w0=0.0
2026-01-21 10:53:03,341 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:03,342 - INFO - integration_test - Dyn residual k=0: pred=[13.68015826371282, 5.572567528512414, 0.3322881761592402, 3.000000029823105, 14.999999982126333], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.68015826371282, 5.572567528512414, 0.3322881761592402, 3.000000029823105, 14.999999982126333], res_norm=2.127e+01
2026-01-21 10:53:03,343 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:03,343 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:03,359 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,535 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,559 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,605 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,626 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,670 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,690 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,738 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,761 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,806 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,829 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,874 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,894 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:03,942 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:03,966 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:04,012 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:04,036 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:04,082 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:04,106 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:04,151 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:04,174 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:04,219 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:05,382 - INFO - integration_test - Step 52: MPC solve successful
2026-01-21 10:53:05,494 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 10:53:05,494 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:05,494 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 10:53:05,495 - INFO - integration_test -   Control dict from planner: {'a': -3.8252964124270585e-07, 'w': -0.1095173630770437}
2026-01-21 10:53:05,495 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:05,495 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:05,496 - INFO - integration_test - Step 52 completed in 2.390s
2026-01-21 10:53:05,569 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 10:53:05,581 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.68068847  5.57101269  0.32133644  2.99999999 14.99999998]
2026-01-21 10:53:05,582 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.419m, drift=0.351m)
2026-01-21 10:53:05,582 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 10:53:05,586 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:05,707 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.681, 5.571), path_start=(0.000, 0.000), dist=14.772m
2026-01-21 10:53:05,707 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.772m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:05,707 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 10:53:05,808 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:05,833 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:05,833 - INFO - integration_test - Warmstart k=0: x0=13.680688467381119 , y0=5.571012688326994 , psi0=0.32133643985153587 , v0=2.999999991570141 , spline0=14.999999978301037 , a0=0.0 , w0=0.0
2026-01-21 10:53:05,834 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:05,834 - INFO - integration_test - Dyn residual k=0: pred=[13.965332717946978, 5.6657631506689174, 0.32133643985153587, 2.999999991570141, 15.299999977458052], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.965332717946978, 5.6657631506689174, 0.32133643985153587, 2.999999991570141, 15.299999977458052], res_norm=2.169e+01
2026-01-21 10:53:05,835 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:05,836 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:05,852 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,028 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,050 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,097 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,118 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,167 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,187 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,235 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,256 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,303 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,323 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,373 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,393 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,441 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,462 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,509 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,531 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,579 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:06,600 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,643 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:06,663 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:06,708 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:07,575 - INFO - integration_test - Step 53: MPC solve successful
2026-01-21 10:53:07,701 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 10:53:07,701 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:07,701 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 10:53:07,701 - INFO - integration_test -   Control dict from planner: {'a': 3.842953656792845e-07, 'w': -0.12425154739058726}
2026-01-21 10:53:07,701 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:07,702 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:07,703 - INFO - integration_test - Step 53 completed in 2.122s
2026-01-21 10:53:07,774 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 10:53:07,775 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.96591403  5.66399236  0.30891129  3.00000003 15.29999998]
2026-01-21 10:53:07,776 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.376m, drift=0.163m)
2026-01-21 10:53:07,776 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 10:53:07,780 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:08,067 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.966, 5.664), path_start=(0.000, 0.000), dist=15.071m
2026-01-21 10:53:08,067 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.071m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:08,067 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 10:53:08,167 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:08,192 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:08,192 - INFO - integration_test - Warmstart k=0: x0=13.965914032730321 , y0=5.663992361601508 , psi0=0.3089112851124771 , v0=3.0000000299996774 , spline0=15.299999981301005 , a0=0.0 , w0=0.0
2026-01-21 10:53:08,192 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:08,193 - INFO - integration_test - Dyn residual k=0: pred=[14.25171357377789, 5.755198853349517, 0.3089112851124771, 3.0000000299996774, 15.599999984300972], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.25171357377789, 5.755198853349517, 0.3089112851124771, 3.0000000299996774, 15.599999984300972], res_norm=2.211e+01
2026-01-21 10:53:08,194 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:08,194 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:08,214 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,390 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,412 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,458 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,482 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,527 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,551 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,597 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,617 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,661 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,683 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,729 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,753 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,801 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,827 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,875 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,896 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:08,944 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:08,971 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:09,042 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:09,070 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:09,117 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:10,092 - INFO - integration_test - Step 54: MPC solve successful
2026-01-21 10:53:10,222 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 10:53:10,223 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:10,223 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 10:53:10,223 - INFO - integration_test -   Control dict from planner: {'a': -6.739288581256674e-07, 'w': -0.061810517653761665}
2026-01-21 10:53:10,223 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:10,223 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:10,224 - INFO - integration_test - Step 54 completed in 2.449s
2026-01-21 10:53:10,288 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 10:53:10,289 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.25199363  5.754315    0.30273023  2.99999996 15.59999998]
2026-01-21 10:53:10,290 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.434m, drift=0.026m)
2026-01-21 10:53:10,290 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 10:53:10,293 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:10,400 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.252, 5.754), path_start=(0.000, 0.000), dist=15.370m
2026-01-21 10:53:10,400 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.370m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:10,400 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 10:53:10,500 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:10,526 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:10,526 - INFO - integration_test - Warmstart k=0: x0=14.251993625845488 , y0=5.754315003509306 , psi0=0.302730233347101 , v0=2.9999999626067915 , spline0=15.599999977561684 , a0=0.0 , w0=0.0
2026-01-21 10:53:10,526 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:10,527 - INFO - integration_test - Dyn residual k=0: pred=[14.538351449391698, 5.843753220454218, 0.302730233347101, 2.9999999626067915, 15.899999973822363], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.538351449391698, 5.843753220454218, 0.302730233347101, 2.9999999626067915, 15.899999973822363], res_norm=2.253e+01
2026-01-21 10:53:10,528 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:10,529 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:10,549 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:10,721 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:10,744 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:10,797 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:10,824 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:10,876 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:10,897 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:10,945 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:10,966 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,016 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:11,039 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,084 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:11,107 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,154 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:11,176 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,225 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:11,246 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,293 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:11,314 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,363 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:11,383 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:11,429 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:12,325 - INFO - integration_test - Step 55: MPC solve successful
2026-01-21 10:53:12,453 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 10:53:12,453 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:12,454 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 10:53:12,454 - INFO - integration_test -   Control dict from planner: {'a': 6.738850576629025e-07, 'w': -0.1715272899916179}
2026-01-21 10:53:12,454 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:12,454 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:12,455 - INFO - integration_test - Step 55 completed in 2.166s
2026-01-21 10:53:12,521 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 10:53:12,529 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.53910445  5.84129299  0.2855775   3.00000003 15.89999998]
2026-01-21 10:53:12,531 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.344m, drift=0.274m)
2026-01-21 10:53:12,531 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 10:53:12,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:12,641 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.539, 5.841), path_start=(0.000, 0.000), dist=15.669m
2026-01-21 10:53:12,641 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.669m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:12,641 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 10:53:12,738 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:12,765 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:12,766 - INFO - integration_test - Warmstart k=0: x0=14.539104446929002 , y0=5.8412929869363115 , psi0=0.28557750434793916 , v0=3.0000000299952974 , spline0=15.899999980561214 , a0=0.0 , w0=0.0
2026-01-21 10:53:12,766 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:12,767 - INFO - integration_test - Dyn residual k=0: pred=[14.826954186703107, 5.925806471728372, 0.28557750434793916, 3.0000000299952974, 16.199999983560744], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.826954186703107, 5.925806471728372, 0.28557750434793916, 3.0000000299952974, 16.199999983560744], res_norm=2.295e+01
2026-01-21 10:53:12,767 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:12,768 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:12,784 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,142 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,165 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,212 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,236 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,282 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,305 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,353 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,378 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,427 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,447 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,495 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,517 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,564 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,585 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,631 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,652 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,728 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:13,759 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,815 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:13,837 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:13,884 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:15,010 - INFO - integration_test - Step 56: MPC solve successful
2026-01-21 10:53:15,176 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 10:53:15,177 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:15,177 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 10:53:15,177 - INFO - integration_test -   Control dict from planner: {'a': -2.935933823505327e-07, 'w': -0.0765746286551284}
2026-01-21 10:53:15,177 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:15,177 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:15,178 - INFO - integration_test - Step 56 completed in 2.649s
2026-01-21 10:53:15,243 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 10:53:15,255 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.82727495  5.92470355  0.27792004  3.         16.19999998]
2026-01-21 10:53:15,255 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.360m, drift=0.086m)
2026-01-21 10:53:15,255 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 10:53:15,258 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:15,362 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.827, 5.925), path_start=(0.000, 0.000), dist=15.967m
2026-01-21 10:53:15,362 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.967m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:15,362 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 10:53:15,462 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:15,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:15,486 - INFO - integration_test - Warmstart k=0: x0=14.827274950060737 , y0=5.92470355143074 , psi0=0.2779200414824263 , v0=3.0000000006359593 , spline0=16.19999998062481 , a0=0.0 , w0=0.0
2026-01-21 10:53:15,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:15,487 - INFO - integration_test - Dyn residual k=0: pred=[15.115763400314883, 6.0070103804798425, 0.2779200414824263, 3.0000000006359593, 16.499999980688404], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.115763400314883, 6.0070103804798425, 0.2779200414824263, 3.0000000006359593, 16.499999980688404], res_norm=2.336e+01
2026-01-21 10:53:15,488 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:15,489 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:15,504 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:15,667 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:15,691 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:15,737 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:15,761 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:15,808 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:15,829 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:15,878 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:15,899 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:15,948 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:15,970 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:16,016 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:16,038 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:16,085 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:16,108 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:16,155 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:16,178 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:16,224 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:16,247 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:16,291 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:16,311 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:16,359 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:52,571 - WARNING - integration_test - Step 57: MPC solve failed
2026-01-21 10:53:52,571 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 10:53:52,702 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 10:53:52,702 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:52,702 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 10:53:52,702 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:53:52,702 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:52,702 - INFO - integration_test -   Planner output success: False
2026-01-21 10:53:52,702 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:53:52,704 - INFO - integration_test - Step 57 completed in 37.449s
2026-01-21 10:53:52,777 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 10:53:52,778 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.1157634   6.00701038  0.27792004  3.         16.49999998]
2026-01-21 10:53:52,778 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.344m, drift=0.386m)
2026-01-21 10:53:52,778 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 10:53:52,781 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:52,886 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.116, 6.007), path_start=(0.000, 0.000), dist=16.266m
2026-01-21 10:53:52,886 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.266m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:52,887 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 10:53:52,987 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:53,015 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:53,015 - INFO - integration_test - Warmstart k=0: x0=15.115763400314883 , y0=6.0070103804798425 , psi0=0.2779200414824263 , v0=3.0000000006359593 , spline0=16.499999980688404 , a0=0.0 , w0=0.0
2026-01-21 10:53:53,015 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:53,016 - INFO - integration_test - Dyn residual k=0: pred=[15.404251850569029, 6.089317209528945, 0.2779200414824263, 3.0000000006359593, 16.799999980752], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.404251850569029, 6.089317209528945, 0.2779200414824263, 3.0000000006359593, 16.799999980752], res_norm=2.378e+01
2026-01-21 10:53:53,017 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:53,018 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:53,035 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,211 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,233 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,279 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,302 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,348 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,373 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,426 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,448 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,497 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,520 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,567 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,589 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,639 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,660 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,708 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,730 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,777 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:53,800 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,846 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:53,869 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:53,913 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:55,655 - INFO - integration_test - Step 58: MPC solve successful
2026-01-21 10:53:55,971 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 10:53:55,972 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:53:55,972 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 10:53:55,972 - INFO - integration_test -   Control dict from planner: {'a': 2.4183167884632926e-07, 'w': -0.2298572029341298}
2026-01-21 10:53:55,972 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:53:55,972 - INFO - integration_test -   Planner output success: True
2026-01-21 10:53:55,973 - INFO - integration_test - Step 58 completed in 3.195s
2026-01-21 10:53:56,043 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 10:53:56,045 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.40517235  6.08599455  0.25493432  3.00000002 16.79999998]
2026-01-21 10:53:56,045 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.302m, drift=0.198m)
2026-01-21 10:53:56,045 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 10:53:56,048 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:56,158 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.405, 6.086), path_start=(0.000, 0.000), dist=16.564m
2026-01-21 10:53:56,158 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.564m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:53:56,158 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 10:53:56,261 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:53:56,287 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:53:56,287 - INFO - integration_test - Warmstart k=0: x0=15.405172348171734 , y0=6.085994550895257 , psi0=0.2549343211890133 , v0=3.000000024819127 , spline0=16.799999983170316 , a0=0.0 , w0=0.0
2026-01-21 10:53:56,287 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:53:56,288 - INFO - integration_test - Dyn residual k=0: pred=[15.695476308807422, 6.161649107455852, 0.2549343211890133, 3.000000024819127, 17.09999998565223], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.695476308807422, 6.161649107455852, 0.2549343211890133, 3.000000024819127, 17.09999998565223], res_norm=2.420e+01
2026-01-21 10:53:56,289 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:56,290 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:53:56,306 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,481 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,504 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,551 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,572 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,619 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,639 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,695 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,727 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,786 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,808 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,857 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,880 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,925 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:56,948 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:56,995 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:57,019 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:57,068 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:53:57,090 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:57,135 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:53:57,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:53:57,202 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:11,500 - INFO - integration_test - Step 59: MPC solve successful
2026-01-21 10:54:11,626 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 10:54:11,626 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:11,627 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 10:54:11,627 - INFO - integration_test -   Control dict from planner: {'a': -0.0004440035475870895, 'w': 0.08379191711155037}
2026-01-21 10:54:11,627 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:11,627 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:11,630 - INFO - integration_test - Step 59 completed in 15.585s
2026-01-21 10:54:11,696 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 10:54:11,705 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.69515381  6.1628639   0.26331351  2.99995562 17.09999555]
2026-01-21 10:54:11,705 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.373m, drift=0.498m)
2026-01-21 10:54:11,705 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 10:54:11,708 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:11,819 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.695, 6.163), path_start=(0.000, 0.000), dist=16.862m
2026-01-21 10:54:11,819 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.862m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:11,819 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 10:54:11,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:11,961 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:11,962 - INFO - integration_test - Warmstart k=0: x0=15.69515380647486 , y0=6.162863899479315 , psi0=0.26331351290016836 , v0=2.9999556244643686 , spline0=17.099995545616753 , a0=0.0 , w0=0.0
2026-01-21 10:54:11,962 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:11,963 - INFO - integration_test - Dyn residual k=0: pred=[15.984809372310465, 6.240947128587805, 0.26331351290016836, 2.9999556244643686, 17.39999110806319], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.984809372310465, 6.240947128587805, 0.26331351290016836, 2.9999556244643686, 17.39999110806319], res_norm=2.462e+01
2026-01-21 10:54:11,964 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:11,964 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:11,981 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,154 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,227 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,250 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,303 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,326 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,380 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,402 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,451 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,472 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,520 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,541 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,588 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,610 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,660 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,680 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,724 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:12,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,791 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:12,812 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:12,859 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:20,574 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 10:54:20,574 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 10:54:20,993 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 10:54:20,993 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:20,994 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 10:54:20,994 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:20,994 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:20,994 - INFO - integration_test -   Planner output success: False
2026-01-21 10:54:20,994 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:20,995 - INFO - integration_test - Step 60 completed in 9.291s
2026-01-21 10:54:21,074 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 10:54:21,075 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.98480937  6.24094713  0.26331351  2.99995562 17.39999111]
2026-01-21 10:54:21,076 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.268m, drift=0.309m)
2026-01-21 10:54:21,076 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 10:54:21,078 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:21,185 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.985, 6.241), path_start=(0.000, 0.000), dist=17.160m
2026-01-21 10:54:21,185 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.160m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:21,185 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 10:54:21,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:21,315 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:21,315 - INFO - integration_test - Warmstart k=0: x0=15.984809372310465 , y0=6.240947128587805 , psi0=0.26331351290016836 , v0=2.9999556244643686 , spline0=17.39999110806319 , a0=0.0 , w0=0.0
2026-01-21 10:54:21,315 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:21,316 - INFO - integration_test - Dyn residual k=0: pred=[16.27446493814607, 6.3190303576962945, 0.26331351290016836, 2.9999556244643686, 17.699986670509627], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.27446493814607, 6.3190303576962945, 0.26331351290016836, 2.9999556244643686, 17.699986670509627], res_norm=2.504e+01
2026-01-21 10:54:21,316 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:21,317 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:21,334 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,505 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,527 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,575 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,598 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,648 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,669 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,716 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,737 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,783 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,804 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,851 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,875 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,920 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:21,944 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:21,992 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:22,014 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:22,064 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:22,086 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:22,128 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:22,148 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:22,193 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:23,707 - INFO - integration_test - Step 61: MPC solve successful
2026-01-21 10:54:23,899 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 10:54:23,899 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:23,899 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 10:54:23,899 - INFO - integration_test -   Control dict from planner: {'a': 0.00044385536747189525, 'w': -0.2628484289993595}
2026-01-21 10:54:23,899 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:23,899 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:23,901 - INFO - integration_test - Step 61 completed in 2.826s
2026-01-21 10:54:23,964 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 10:54:23,972 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.27545988  6.31521535  0.23702867  3.00000001 17.69999111]
2026-01-21 10:54:23,972 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.304m, drift=0.121m)
2026-01-21 10:54:23,972 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 10:54:23,975 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:24,086 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.275, 6.315), path_start=(0.000, 0.000), dist=17.458m
2026-01-21 10:54:24,086 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.458m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:24,086 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 10:54:24,193 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:24,221 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:24,221 - INFO - integration_test - Warmstart k=0: x0=16.27545988200691 , y0=6.315215350463829 , psi0=0.23702867000023242 , v0=3.000000010001116 , spline0=17.6999911090633 , a0=0.0 , w0=0.0
2026-01-21 10:54:24,221 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:24,222 - INFO - integration_test - Dyn residual k=0: pred=[16.56707187664471, 6.3856599754073216, 0.23702867000023242, 3.000000010001116, 17.999991110063412], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.56707187664471, 6.3856599754073216, 0.23702867000023242, 3.000000010001116, 17.999991110063412], res_norm=2.546e+01
2026-01-21 10:54:24,223 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:24,224 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:24,241 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,415 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,438 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,486 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,508 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,557 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,579 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,624 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,648 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,694 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,717 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,762 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,783 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,831 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,855 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,900 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,924 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:24,969 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:24,993 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:25,041 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:25,062 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:25,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:28,316 - WARNING - integration_test - Step 62: MPC solve failed
2026-01-21 10:54:28,316 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 10:54:28,695 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 10:54:28,695 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:28,695 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 10:54:28,695 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:28,695 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:28,695 - INFO - integration_test -   Planner output success: False
2026-01-21 10:54:28,695 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:28,696 - INFO - integration_test - Step 62 completed in 4.725s
2026-01-21 10:54:28,774 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 10:54:28,775 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.56707188  6.38565998  0.23702867  3.00000001 17.99999111]
2026-01-21 10:54:28,776 - DEBUG - integration_test - Step 63: Using propagated spline 18.0000 (close to path, dist=0.270m, drift=0.421m)
2026-01-21 10:54:28,776 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-21 10:54:28,779 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:28,886 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.567, 6.386), path_start=(0.000, 0.000), dist=17.755m
2026-01-21 10:54:28,887 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.755m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:28,887 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 10:54:28,985 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:29,009 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:29,009 - INFO - integration_test - Warmstart k=0: x0=16.56707187664471 , y0=6.3856599754073216 , psi0=0.23702867000023242 , v0=3.000000010001116 , spline0=17.999991110063412 , a0=0.0 , w0=0.0
2026-01-21 10:54:29,010 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:29,011 - INFO - integration_test - Dyn residual k=0: pred=[16.858683871282512, 6.456104600350814, 0.23702867000023242, 3.000000010001116, 18.299991111063523], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.858683871282512, 6.456104600350814, 0.23702867000023242, 3.000000010001116, 18.299991111063523], res_norm=2.588e+01
2026-01-21 10:54:29,011 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:29,012 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:29,029 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,210 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,235 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,285 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,307 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,354 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,375 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,424 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,446 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,494 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,515 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,596 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,626 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,678 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,699 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,747 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,770 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,814 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:29,838 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,883 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:29,903 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:29,949 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:31,808 - INFO - integration_test - Step 63: MPC solve successful
2026-01-21 10:54:31,939 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-21 10:54:31,939 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:31,939 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 10:54:31,939 - INFO - integration_test -   Control dict from planner: {'a': -2.000000016361101, 'w': -0.11284336580151104}
2026-01-21 10:54:31,939 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:31,939 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:31,940 - INFO - integration_test - Step 63 completed in 3.165s
2026-01-21 10:54:32,009 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 10:54:32,020 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.84933738  6.45218284  0.22574433  2.80000001 18.27999111]
2026-01-21 10:54:32,021 - DEBUG - integration_test - Step 64: Using propagated spline 18.2800 (close to path, dist=0.243m, drift=0.213m)
2026-01-21 10:54:32,021 - DEBUG - integration_test -   Set spline state to 18.2800
2026-01-21 10:54:32,024 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:32,136 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.849, 6.452), path_start=(0.000, 0.000), dist=18.042m
2026-01-21 10:54:32,136 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.042m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:32,136 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 10:54:32,240 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:32,269 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:32,269 - INFO - integration_test - Warmstart k=0: x0=16.84933738363389 , y0=6.452182843958646 , psi0=0.22574433342008132 , v0=2.800000008365006 , spline0=18.279991110899914 , a0=0.0 , w0=0.0
2026-01-21 10:54:32,269 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:32,270 - INFO - integration_test - Dyn residual k=0: pred=[17.1222331604773, 6.51485576833172, 0.22574433342008132, 2.800000008365006, 18.559991111736416], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.1222331604773, 6.51485576833172, 0.22574433342008132, 2.800000008365006, 18.559991111736416], res_norm=2.623e+01
2026-01-21 10:54:32,271 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:32,272 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:32,289 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,470 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,494 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,549 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,571 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,615 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,638 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,687 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,708 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,757 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,779 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,827 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,851 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,897 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,921 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:32,967 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:32,989 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:33,038 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:33,060 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:33,110 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:33,131 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:33,178 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:34,735 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 10:54:34,883 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.280)
2026-01-21 10:54:34,884 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:34,884 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 10:54:34,884 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019985443, 'w': -0.021516281096277554}
2026-01-21 10:54:34,884 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:34,884 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:34,885 - INFO - integration_test - Step 64 completed in 2.866s
2026-01-21 10:54:34,952 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 10:54:34,961 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.1125509   6.5123378   0.22359271  2.60000001 18.53999111]
2026-01-21 10:54:34,961 - DEBUG - integration_test - Step 65: Using propagated spline 18.5400 (close to path, dist=0.278m, drift=0.473m)
2026-01-21 10:54:34,961 - DEBUG - integration_test -   Set spline state to 18.5400
2026-01-21 10:54:34,964 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:35,076 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.113, 6.512), path_start=(0.000, 0.000), dist=18.310m
2026-01-21 10:54:35,076 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.310m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:35,076 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 10:54:35,181 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:35,205 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:35,205 - INFO - integration_test - Warmstart k=0: x0=17.112550897084862 , y0=6.512337799059427 , psi0=0.22359270531045355 , v0=2.6000000063664617 , spline0=18.539991111536562 , a0=0.0 , w0=0.0
2026-01-21 10:54:35,205 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:35,206 - INFO - integration_test - Dyn residual k=0: pred=[17.366078748407705, 6.569988722162863, 0.22359270531045355, 2.6000000063664617, 18.79999111217321], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.366078748407705, 6.569988722162863, 0.22359270531045355, 2.6000000063664617, 18.79999111217321], res_norm=2.655e+01
2026-01-21 10:54:35,207 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:35,208 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:35,224 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,407 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,430 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,481 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,505 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,553 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,576 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,624 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,648 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,695 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,717 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,766 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,787 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,835 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,861 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,909 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,933 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:35,978 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:35,998 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:36,044 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:36,066 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:36,110 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:39,892 - WARNING - integration_test - Step 65: MPC solve failed
2026-01-21 10:54:39,892 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 10:54:40,036 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.540)
2026-01-21 10:54:40,036 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:40,036 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 10:54:40,036 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:40,036 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:40,036 - INFO - integration_test -   Planner output success: False
2026-01-21 10:54:40,037 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:40,038 - INFO - integration_test - Step 65 completed in 5.078s
2026-01-21 10:54:40,120 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 10:54:40,122 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.36607875  6.56998872  0.22359271  2.60000001 18.79999111]
2026-01-21 10:54:40,122 - DEBUG - integration_test - Step 66: Using propagated spline 18.8000 (close to path, dist=0.214m, drift=0.244m)
2026-01-21 10:54:40,122 - DEBUG - integration_test -   Set spline state to 18.8000
2026-01-21 10:54:40,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:40,237 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.366, 6.570), path_start=(0.000, 0.000), dist=18.567m
2026-01-21 10:54:40,237 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.567m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:40,237 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 10:54:40,335 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:40,360 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:40,361 - INFO - integration_test - Warmstart k=0: x0=17.366078748407705 , y0=6.569988722162863 , psi0=0.22359270531045355 , v0=2.6000000063664617 , spline0=18.79999111217321 , a0=0.0 , w0=0.0
2026-01-21 10:54:40,361 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:40,362 - INFO - integration_test - Dyn residual k=0: pred=[17.61960659973055, 6.627639645266299, 0.22359270531045355, 2.6000000063664617, 19.059991112809858], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.61960659973055, 6.627639645266299, 0.22359270531045355, 2.6000000063664617, 19.059991112809858], res_norm=2.692e+01
2026-01-21 10:54:40,363 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:40,365 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:40,382 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,555 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,577 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,622 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,643 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,693 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,716 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,762 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,783 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,830 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,856 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,903 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,926 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:40,973 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:40,996 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:41,042 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:41,066 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:41,112 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:41,136 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:41,181 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:41,202 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:41,248 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:43,613 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 10:54:43,761 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.800)
2026-01-21 10:54:43,762 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:43,762 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 10:54:43,762 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199857886, 'w': -0.3643450115574878}
2026-01-21 10:54:43,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:43,762 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:43,763 - INFO - integration_test - Step 66 completed in 3.642s
2026-01-21 10:54:43,833 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 10:54:43,843 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.63040232  6.62498861  0.1871582   2.80000001 19.07999111]
2026-01-21 10:54:43,843 - DEBUG - integration_test - Step 67: Using propagated spline 19.0800 (close to path, dist=0.274m, drift=0.524m)
2026-01-21 10:54:43,843 - DEBUG - integration_test -   Set spline state to 19.0800
2026-01-21 10:54:43,847 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:43,960 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.630, 6.625), path_start=(0.000, 0.000), dist=18.834m
2026-01-21 10:54:43,960 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.834m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:43,960 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 10:54:44,064 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:44,092 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:44,092 - INFO - integration_test - Warmstart k=0: x0=17.630402323413357 , y0=6.6249886115198535 , psi0=0.18715820415470477 , v0=2.8000000083650405 , spline0=19.079991113009715 , a0=0.0 , w0=0.0
2026-01-21 10:54:44,092 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:44,093 - INFO - integration_test - Dyn residual k=0: pred=[17.905512675158764, 6.677087506239034, 0.18715820415470477, 2.8000000083650405, 19.35999111384622], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.905512675158764, 6.677087506239034, 0.18715820415470477, 2.8000000083650405, 19.35999111384622], res_norm=2.735e+01
2026-01-21 10:54:44,093 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:44,094 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:44,111 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,290 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,313 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,360 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,384 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,430 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,451 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,500 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,524 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,570 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,592 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,637 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,659 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,708 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,729 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,774 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,797 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,843 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:44,867 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,912 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:44,936 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:44,984 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:46,452 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 10:54:46,825 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.080)
2026-01-21 10:54:46,825 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:46,825 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 10:54:46,825 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019984367, 'w': 0.032056307605434375}
2026-01-21 10:54:46,825 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:46,825 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:46,826 - INFO - integration_test - Step 67 completed in 2.984s
2026-01-21 10:54:46,896 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 10:54:46,906 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.91525007  6.67941004  0.19036383  3.00000001 19.37999111]
2026-01-21 10:54:46,907 - DEBUG - integration_test - Step 68: Using propagated spline 19.3800 (close to path, dist=0.188m, drift=0.336m)
2026-01-21 10:54:46,907 - DEBUG - integration_test -   Set spline state to 19.3800
2026-01-21 10:54:46,910 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:47,021 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.915, 6.679), path_start=(0.000, 0.000), dist=19.120m
2026-01-21 10:54:47,021 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=19.120m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:47,021 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 10:54:47,121 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:47,147 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:47,147 - INFO - integration_test - Warmstart k=0: x0=17.915250067257745 , y0=6.679410035429466 , psi0=0.19036383491524822 , v0=3.000000010363477 , spline0=19.379991114046064 , a0=0.0 , w0=0.0
2026-01-21 10:54:47,147 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:47,148 - INFO - integration_test - Dyn residual k=0: pred=[18.209830705273948, 6.736174886594389, 0.19036383491524822, 3.000000010363477, 19.679991115082412], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.209830705273948, 6.736174886594389, 0.19036383491524822, 3.000000010363477, 19.679991115082412], res_norm=2.781e+01
2026-01-21 10:54:47,148 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:47,149 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:47,168 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,347 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,373 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,426 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,450 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,499 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,520 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,568 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,589 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,633 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,654 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,707 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,730 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,778 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,799 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,845 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,869 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,919 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:47,941 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:47,992 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:48,012 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:48,056 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:49,143 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 10:54:49,300 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.380)
2026-01-21 10:54:49,300 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:49,300 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 10:54:49,300 - INFO - integration_test -   Control dict from planner: {'a': 1.963562162159969e-07, 'w': -0.07066456791149114}
2026-01-21 10:54:49,300 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:49,300 - INFO - integration_test -   Planner output success: True
2026-01-21 10:54:49,301 - INFO - integration_test - Step 68 completed in 2.395s
2026-01-21 10:54:49,366 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 10:54:49,374 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[18.21002882  6.7351336   0.18329738  3.00000003 19.67999112]
2026-01-21 10:54:49,375 - DEBUG - integration_test - Step 69: Using propagated spline 19.6800 (close to path, dist=0.299m, drift=0.148m)
2026-01-21 10:54:49,375 - DEBUG - integration_test -   Set spline state to 19.6800
2026-01-21 10:54:49,377 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:49,483 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(18.210, 6.735), path_start=(0.000, 0.000), dist=19.416m
2026-01-21 10:54:49,483 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.416m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:49,483 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 10:54:49,587 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:49,611 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:49,611 - INFO - integration_test - Warmstart k=0: x0=18.21002881695654 , y0=6.735133598009217 , psi0=0.1832973781240991 , v0=3.0000000299990988 , spline0=19.679991117045972 , a0=0.0 , w0=0.0
2026-01-21 10:54:49,612 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:49,612 - INFO - integration_test - Dyn residual k=0: pred=[18.50500322504935, 6.789815408241168, 0.1832973781240991, 3.0000000299990988, 19.97999112004588], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.50500322504935, 6.789815408241168, 0.1832973781240991, 3.0000000299990988, 19.97999112004588], res_norm=2.823e+01
2026-01-21 10:54:49,613 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:49,614 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:49,630 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:49,802 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:49,824 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:49,872 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:49,894 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:49,938 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:49,962 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,007 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:50,030 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,077 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:50,101 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,147 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:50,170 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,215 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:50,236 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,287 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:50,309 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,359 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:50,381 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,425 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:50,446 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:50,493 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:53,285 - WARNING - integration_test - Step 69: MPC solve failed
2026-01-21 10:54:53,285 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 10:54:53,466 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.680)
2026-01-21 10:54:53,466 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:53,466 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 10:54:53,467 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:53,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:53,467 - INFO - integration_test -   Planner output success: False
2026-01-21 10:54:53,467 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:53,468 - INFO - integration_test - Step 69 completed in 4.094s
2026-01-21 10:54:53,542 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 10:54:53,549 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.50500323  6.78981541  0.18329738  3.00000003 19.97999112]
2026-01-21 10:54:53,550 - DEBUG - integration_test - Step 70: Using propagated spline 19.9800 (close to path, dist=0.181m, drift=0.448m)
2026-01-21 10:54:53,550 - DEBUG - integration_test -   Set spline state to 19.9800
2026-01-21 10:54:53,553 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:53,666 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.505, 6.790), path_start=(0.000, 0.000), dist=19.711m
2026-01-21 10:54:53,666 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.711m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:53,666 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 10:54:53,773 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:53,801 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:53,801 - INFO - integration_test - Warmstart k=0: x0=18.50500322504935 , y0=6.789815408241168 , psi0=0.1832973781240991 , v0=3.0000000299990988 , spline0=19.97999112004588 , a0=0.0 , w0=0.0
2026-01-21 10:54:53,801 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:53,802 - INFO - integration_test - Dyn residual k=0: pred=[18.79997763314216, 6.844497218473119, 0.1832973781240991, 3.0000000299990988, 20.27999112304579], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.79997763314216, 6.844497218473119, 0.1832973781240991, 3.0000000299990988, 20.27999112304579], res_norm=2.865e+01
2026-01-21 10:54:53,803 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:53,804 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:53,819 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:53,995 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,016 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,065 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,087 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,136 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,159 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,205 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,227 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,276 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,298 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,346 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,368 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,415 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,439 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,486 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,510 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,556 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:54,576 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,619 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:54,639 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:54,687 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:57,756 - WARNING - integration_test - Step 70: MPC solve failed
2026-01-21 10:54:57,756 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 10:54:57,928 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.980)
2026-01-21 10:54:57,928 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:54:57,929 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 10:54:57,929 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:57,929 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:54:57,929 - INFO - integration_test -   Planner output success: False
2026-01-21 10:54:57,929 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 10:54:57,930 - INFO - integration_test - Step 70 completed in 4.381s
2026-01-21 10:54:57,997 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 10:54:58,006 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.79997763  6.84449722  0.18329738  3.00000003 20.27999112]
2026-01-21 10:54:58,006 - DEBUG - integration_test - Step 71: Using propagated spline 20.2800 (close to path, dist=0.224m, drift=0.260m)
2026-01-21 10:54:58,006 - DEBUG - integration_test -   Set spline state to 20.2800
2026-01-21 10:54:58,009 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:58,125 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.800, 6.844), path_start=(0.000, 0.000), dist=20.007m
2026-01-21 10:54:58,125 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=20.007m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:54:58,125 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 10:54:58,223 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:54:58,250 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:54:58,250 - INFO - integration_test - Warmstart k=0: x0=18.79997763314216 , y0=6.844497218473119 , psi0=0.1832973781240991 , v0=3.0000000299990988 , spline0=20.27999112304579 , a0=0.0 , w0=0.0
2026-01-21 10:54:58,250 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:54:58,251 - INFO - integration_test - Dyn residual k=0: pred=[19.09495204123497, 6.8991790287050705, 0.1832973781240991, 3.0000000299990988, 20.579991126045698], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.09495204123497, 6.8991790287050705, 0.1832973781240991, 3.0000000299990988, 20.579991126045698], res_norm=2.907e+01
2026-01-21 10:54:58,252 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:58,253 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:54:58,269 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,452 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,475 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,521 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,545 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,592 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,615 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,672 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,704 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,759 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,782 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,834 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,856 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,905 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,925 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:58,971 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:58,993 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:59,037 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:54:59,059 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:59,105 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:54:59,128 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:54:59,171 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:01,168 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 10:55:01,366 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.280)
2026-01-21 10:55:01,366 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:01,367 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 10:55:01,367 - INFO - integration_test -   Control dict from planner: {'a': -2.452145086060126e-07, 'w': -0.11204304957211739}
2026-01-21 10:55:01,367 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:01,367 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:01,368 - INFO - integration_test - Step 71 completed in 3.363s
2026-01-21 10:55:01,437 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 10:55:01,448 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[19.0952522   6.89752541  0.17209307  3.00000001 20.57999112]
2026-01-21 10:55:01,449 - DEBUG - integration_test - Step 72: Using propagated spline 20.5800 (close to path, dist=0.211m, drift=0.560m)
2026-01-21 10:55:01,449 - DEBUG - integration_test -   Set spline state to 20.5800
2026-01-21 10:55:01,452 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:01,562 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(19.095, 6.898), path_start=(0.000, 0.000), dist=20.303m
2026-01-21 10:55:01,562 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.303m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:01,562 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 10:55:01,659 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:01,687 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:01,687 - INFO - integration_test - Warmstart k=0: x0=19.095252201028885 , y0=6.8975254100805214 , psi0=0.17209307316688738 , v0=3.000000005477648 , spline0=20.579991123593555 , a0=0.0 , w0=0.0
2026-01-21 10:55:01,687 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:01,689 - INFO - integration_test - Dyn residual k=0: pred=[19.390820750738268, 6.948898873574336, 0.17209307316688738, 3.000000005477648, 20.87999112414132], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.390820750738268, 6.948898873574336, 0.17209307316688738, 3.000000005477648, 20.87999112414132], res_norm=2.948e+01
2026-01-21 10:55:01,690 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:01,691 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:01,708 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:01,882 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:01,903 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:01,955 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:01,978 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,027 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,048 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,101 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,122 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,170 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,192 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,239 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,261 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,311 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,334 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,385 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,409 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,461 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:02,486 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,531 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:02,551 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:02,596 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:03,506 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 10:55:03,926 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.580)
2026-01-21 10:55:03,926 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:03,926 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 10:55:03,926 - INFO - integration_test -   Control dict from planner: {'a': 2.450708598310315e-07, 'w': 0.002629255379547479}
2026-01-21 10:55:03,926 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:03,926 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:03,927 - INFO - integration_test - Step 72 completed in 2.480s
2026-01-21 10:55:03,994 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 10:55:04,002 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.39081399  6.94893773  0.172356    3.00000003 20.87999113]
2026-01-21 10:55:04,004 - DEBUG - integration_test - Step 73: Using propagated spline 20.8800 (close to path, dist=0.160m, drift=0.371m)
2026-01-21 10:55:04,004 - DEBUG - integration_test -   Set spline state to 20.8800
2026-01-21 10:55:04,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:04,114 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.391, 6.949), path_start=(0.000, 0.000), dist=20.598m
2026-01-21 10:55:04,114 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.598m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:04,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 10:55:04,218 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:04,243 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:04,243 - INFO - integration_test - Warmstart k=0: x0=19.39081399484233 , y0=6.948937729452221 , psi0=0.17235599870484214 , v0=3.0000000299847343 , spline0=20.879991126592028 , a0=0.0 , w0=0.0
2026-01-21 10:55:04,243 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:04,244 - INFO - integration_test - Dyn residual k=0: pred=[19.686369029354438, 7.000388904109662, 0.17235599870484214, 3.0000000299847343, 21.1799911295905], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.686369029354438, 7.000388904109662, 0.17235599870484214, 3.0000000299847343, 21.1799911295905], res_norm=2.990e+01
2026-01-21 10:55:04,244 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:04,245 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:04,262 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,442 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,467 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,540 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,570 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,619 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,640 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,687 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,711 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,756 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,780 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,825 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,848 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,896 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,919 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:04,966 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:04,988 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:05,035 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:05,057 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:05,105 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:05,126 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:05,172 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:06,171 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 10:55:06,361 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.880)
2026-01-21 10:55:06,361 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:06,361 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 10:55:06,361 - INFO - integration_test -   Control dict from planner: {'a': -1.8154079896642734e-06, 'w': 0.004111612666305962}
2026-01-21 10:55:06,361 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:06,361 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:06,362 - INFO - integration_test - Step 73 completed in 2.360s
2026-01-21 10:55:06,427 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 10:55:06,440 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.68635843  7.00044966  0.17276716  2.99999985 21.17999111]
2026-01-21 10:55:06,442 - DEBUG - integration_test - Step 74: Using propagated spline 21.1800 (close to path, dist=0.266m, drift=0.671m)
2026-01-21 10:55:06,442 - DEBUG - integration_test -   Set spline state to 21.1800
2026-01-21 10:55:06,445 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:06,558 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.686, 7.000), path_start=(0.000, 0.000), dist=20.894m
2026-01-21 10:55:06,558 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.894m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:06,558 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 10:55:06,656 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:06,681 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:06,681 - INFO - integration_test - Warmstart k=0: x0=19.686358434719953 , y0=7.000449661491114 , psi0=0.17276715997147274 , v0=2.9999998484439354 , spline0=21.179991111436422 , a0=0.0 , w0=0.0
2026-01-21 10:55:06,681 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:06,682 - INFO - integration_test - Dyn residual k=0: pred=[19.98189227163638, 7.052022349457628, 0.17276715997147274, 2.9999998484439354, 21.479991096280816], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.98189227163638, 7.052022349457628, 0.17276715997147274, 2.9999998484439354, 21.479991096280816], res_norm=3.032e+01
2026-01-21 10:55:06,683 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:06,684 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:06,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:06,876 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:06,898 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:06,946 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:06,970 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,015 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,039 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,088 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,110 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,155 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,179 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,223 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,246 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,295 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,319 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,368 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,393 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,439 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:07,461 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,509 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:07,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:07,572 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:08,553 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 10:55:08,758 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=21.180)
2026-01-21 10:55:08,759 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:08,759 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 10:55:08,759 - INFO - integration_test -   Control dict from planner: {'a': 1.8152873150117622e-06, 'w': -0.021816155245632275}
2026-01-21 10:55:08,759 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:08,759 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:08,760 - INFO - integration_test - Step 74 completed in 2.320s
2026-01-21 10:55:08,833 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 10:55:08,843 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.9819483   7.05169994  0.17058554  3.00000003 21.47999111]
2026-01-21 10:55:08,844 - DEBUG - integration_test - Step 75: Using propagated spline 21.4800 (close to path, dist=0.125m, drift=0.483m)
2026-01-21 10:55:08,844 - DEBUG - integration_test -   Set spline state to 21.4800
2026-01-21 10:55:08,847 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:08,960 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.982, 7.052), path_start=(0.000, 0.000), dist=21.190m
2026-01-21 10:55:08,961 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=21.190m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:08,961 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 10:55:09,060 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:09,090 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:09,090 - INFO - integration_test - Warmstart k=0: x0=19.981948302016484 , y0=7.051699939619914 , psi0=0.17058554444690952 , v0=3.000000029972667 , spline0=21.479991114433687 , a0=0.0 , w0=0.0
2026-01-21 10:55:09,090 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:09,091 - INFO - integration_test - Dyn residual k=0: pred=[20.27759396522133, 7.102627767244163, 0.17058554444690952, 3.000000029972667, 21.779991117430953], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.27759396522133, 7.102627767244163, 0.17058554444690952, 3.000000029972667, 21.779991117430953], res_norm=3.074e+01
2026-01-21 10:55:09,092 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:09,093 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:09,109 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,326 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,349 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,397 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,418 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,464 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,488 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,537 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,559 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,607 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,627 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,672 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,696 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,741 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,762 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,809 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,830 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,879 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:09,901 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:09,947 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:09,967 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:10,014 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:11,350 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 10:55:11,579 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.480)
2026-01-21 10:55:11,579 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:11,579 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 10:55:11,580 - INFO - integration_test -   Control dict from planner: {'a': -4.154324338517455e-07, 'w': -0.028697731097245695}
2026-01-21 10:55:11,580 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:11,580 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:11,581 - INFO - integration_test - Step 75 completed in 2.738s
2026-01-21 10:55:11,647 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 10:55:11,655 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[20.27766663  7.10220348  0.16771577  2.99999999 21.77999111]
2026-01-21 10:55:11,655 - DEBUG - integration_test - Step 76: Using propagated spline 21.7800 (close to path, dist=0.233m, drift=0.295m)
2026-01-21 10:55:11,655 - DEBUG - integration_test -   Set spline state to 21.7800
2026-01-21 10:55:11,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:12,003 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(20.278, 7.102), path_start=(0.000, 0.000), dist=21.485m
2026-01-21 10:55:12,003 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.485m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:12,003 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 10:55:12,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:12,137 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:12,137 - INFO - integration_test - Warmstart k=0: x0=20.277666632975674 , y0=7.10220347929598 , psi0=0.16771577133718493 , v0=2.9999999884294235 , spline0=21.77999111327663 , a0=0.0 , w0=0.0
2026-01-21 10:55:12,137 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:12,138 - INFO - integration_test - Dyn residual k=0: pred=[20.573457225785596, 7.1522826617066295, 0.16771577133718493, 2.9999999884294235, 22.079991112119572], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.573457225785596, 7.1522826617066295, 0.16771577133718493, 2.9999999884294235, 22.079991112119572], res_norm=3.116e+01
2026-01-21 10:55:12,139 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:12,140 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:12,156 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,338 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,362 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,411 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,432 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,482 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,503 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,556 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,577 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,625 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,692 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,718 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,763 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,785 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,830 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,851 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,900 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:12,922 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:12,969 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:12,992 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:13,042 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:14,527 - INFO - integration_test - Step 76: MPC solve successful
2026-01-21 10:55:14,732 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.780)
2026-01-21 10:55:14,733 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:14,733 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 10:55:14,733 - INFO - integration_test -   Control dict from planner: {'a': -1.2933149091004536e-06, 'w': -0.018333605790599457}
2026-01-21 10:55:14,733 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:14,733 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:14,734 - INFO - integration_test - Step 76 completed in 3.080s
2026-01-21 10:55:14,804 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 10:55:14,817 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.57350296  7.15201149  0.16588241  2.99999986 22.0799911 ]
2026-01-21 10:55:14,818 - DEBUG - integration_test - Step 77: Using propagated spline 22.0800 (close to path, dist=0.142m, drift=0.595m)
2026-01-21 10:55:14,818 - DEBUG - integration_test -   Set spline state to 22.0800
2026-01-21 10:55:14,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:14,931 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.574, 7.152), path_start=(0.000, 0.000), dist=21.781m
2026-01-21 10:55:14,931 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.781m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:14,931 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 10:55:15,035 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:15,059 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:15,059 - INFO - integration_test - Warmstart k=0: x0=20.573502960292615 , y0=7.1520114872502 , psi0=0.165882410758125 , v0=2.9999998590979327 , spline0=22.079991099186422 , a0=0.0 , w0=0.0
2026-01-21 10:55:15,059 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:15,060 - INFO - integration_test - Dyn residual k=0: pred=[20.869384856387192, 7.2015482928532455, 0.165882410758125, 2.9999998590979327, 22.379991085096215], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.869384856387192, 7.2015482928532455, 0.165882410758125, 2.9999998590979327, 22.379991085096215], res_norm=3.158e+01
2026-01-21 10:55:15,061 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:15,062 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:15,078 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,260 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,284 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,337 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,408 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,432 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,478 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,503 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,551 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,571 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,618 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,642 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,693 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,719 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,773 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,797 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,849 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:15,872 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,925 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:15,948 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:15,996 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:17,922 - INFO - integration_test - Step 77: MPC solve successful
2026-01-21 10:55:18,200 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=22.080)
2026-01-21 10:55:18,200 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:18,200 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 10:55:18,200 - INFO - integration_test -   Control dict from planner: {'a': 1.708965206809021e-06, 'w': -0.022546163820600665}
2026-01-21 10:55:18,200 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:18,200 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:18,201 - INFO - integration_test - Step 77 completed in 3.385s
2026-01-21 10:55:18,280 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 10:55:18,293 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[20.86944046  7.2012147   0.16362779  3.00000003 22.3799911 ]
2026-01-21 10:55:18,294 - DEBUG - integration_test - Step 78: Using propagated spline 22.3800 (close to path, dist=0.153m, drift=0.406m)
2026-01-21 10:55:18,294 - DEBUG - integration_test -   Set spline state to 22.3800
2026-01-21 10:55:18,298 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:18,428 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(20.869, 7.201), path_start=(0.000, 0.000), dist=22.077m
2026-01-21 10:55:18,428 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=22.077m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:18,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 10:55:18,544 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:18,575 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:18,575 - INFO - integration_test - Warmstart k=0: x0=20.869440457364128 , y0=7.201214702339415 , psi0=0.16362779437606492 , v0=3.000000029994453 , spline0=22.37999110218587 , a0=0.0 , w0=0.0
2026-01-21 10:55:18,575 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:18,576 - INFO - integration_test - Dyn residual k=0: pred=[21.165433304691724, 7.250084285216383, 0.16362779437606492, 3.000000029994453, 22.679991105185316], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.165433304691724, 7.250084285216383, 0.16362779437606492, 3.000000029994453, 22.679991105185316], res_norm=3.200e+01
2026-01-21 10:55:18,577 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:18,578 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:18,595 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:18,780 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:18,803 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:18,855 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:18,878 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:18,932 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:18,957 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,012 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:19,035 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,085 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:19,111 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,162 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:19,184 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,233 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:19,255 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,311 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:19,335 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,387 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:19,412 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,470 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:19,494 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:19,547 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:21,416 - INFO - integration_test - Step 78: MPC solve successful
2026-01-21 10:55:21,674 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.380)
2026-01-21 10:55:21,674 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:21,674 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 10:55:21,674 - INFO - integration_test -   Control dict from planner: {'a': -0.7315604348886877, 'w': -0.17245366597465156}
2026-01-21 10:55:21,674 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:21,674 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:21,676 - INFO - integration_test - Step 78 completed in 3.383s
2026-01-21 10:55:21,752 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 10:55:21,767 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[21.16222448  7.24697536  0.14638243  2.92684399 22.6726755 ]
2026-01-21 10:55:21,768 - DEBUG - integration_test - Step 79: Using propagated spline 22.6727 (close to path, dist=0.195m, drift=0.699m)
2026-01-21 10:55:21,768 - DEBUG - integration_test -   Set spline state to 22.6727
2026-01-21 10:55:21,771 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:22,135 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(21.162, 7.247), path_start=(0.000, 0.000), dist=22.369m
2026-01-21 10:55:22,135 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.369m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:22,135 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 10:55:22,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:22,269 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:22,269 - INFO - integration_test - Warmstart k=0: x0=21.16222448375879 , y0=7.246975357446011 , psi0=0.14638242777859978 , v0=2.926843986505584 , spline0=22.672675500836426 , a0=0.0 , w0=0.0
2026-01-21 10:55:22,269 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:22,270 - INFO - integration_test - Dyn residual k=0: pred=[21.451778684247632, 7.2896663657815886, 0.14638242777859978, 2.926843986505584, 22.965359899486984], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.451778684247632, 7.2896663657815886, 0.14638242777859978, 2.926843986505584, 22.965359899486984], res_norm=3.239e+01
2026-01-21 10:55:22,271 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:22,272 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:22,292 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,491 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:22,523 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,603 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:22,634 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,684 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:22,712 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,761 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:22,783 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,832 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:22,858 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,913 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:22,937 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:22,990 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:23,013 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:23,062 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:23,084 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:23,139 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:23,163 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:23,214 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:23,240 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:23,289 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:24,726 - INFO - integration_test - Step 79: MPC solve successful
2026-01-21 10:55:24,947 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.673)
2026-01-21 10:55:24,948 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:24,948 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 10:55:24,948 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019995355, 'w': 0.8000000098083416}
2026-01-21 10:55:24,948 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:24,948 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:24,949 - INFO - integration_test - Step 79 completed in 3.182s
2026-01-21 10:55:25,020 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-21 10:55:25,032 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[21.43996371  7.29921329  0.22638243  2.72684398 22.9453599 ]
2026-01-21 10:55:25,034 - DEBUG - integration_test - Step 80: Using propagated spline 22.9454 (close to path, dist=0.091m, drift=0.483m)
2026-01-21 10:55:25,034 - DEBUG - integration_test -   Set spline state to 22.9454
2026-01-21 10:55:25,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:25,150 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(21.440, 7.299), path_start=(0.000, 0.000), dist=22.648m
2026-01-21 10:55:25,150 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=22.648m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 10:55:25,150 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-21 10:55:25,251 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 10:55:25,277 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 10:55:25,278 - INFO - integration_test - Warmstart k=0: x0=21.439963710150156 , y0=7.299213289267758 , psi0=0.22638242875943393 , v0=2.726843984506049 , spline0=22.94535989928703 , a0=0.0 , w0=0.0
2026-01-21 10:55:25,278 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 10:55:25,278 - INFO - integration_test - Dyn residual k=0: pred=[21.705690497197924, 7.360418320136457, 0.22638242875943393, 2.726843984506049, 23.218044297737634], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.705690497197924, 7.360418320136457, 0.22638242875943393, 2.726843984506049, 23.218044297737634], res_norm=3.274e+01
2026-01-21 10:55:25,279 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:25,280 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 10:55:25,296 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,471 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,493 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,544 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,567 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,614 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,635 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,683 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,705 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,755 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,778 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,827 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,848 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,898 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,920 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:25,970 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:25,991 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:26,070 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 10:55:26,100 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:26,153 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:26,176 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 10:55:26,222 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 10:55:27,835 - INFO - integration_test - Step 80: MPC solve successful
2026-01-21 10:55:28,064 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.945)
2026-01-21 10:55:28,064 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 10:55:28,064 - INFO - integration_test - === Applying control at step 80 ===
2026-01-21 10:55:28,064 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019992605, 'w': 0.8000000096686651}
2026-01-21 10:55:28,064 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 10:55:28,064 - INFO - integration_test -   Planner output success: True
2026-01-21 10:55:28,065 - INFO - integration_test - Goal reached at step 80!
2026-01-21 10:55:28,065 - INFO - integration_test - Step 80 completed in 3.034s
2026-01-21 10:55:28,142 - INFO - integration_test - Goal reached at step 80, added 3 extra frames for visualization
2026-01-21 10:55:28,151 - INFO - integration_test - Saving test results...
2026-01-21 10:55:28,151 - INFO - integration_test - Saved 85 vehicle states to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 10:55:28,152 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 10:55:28,152 - INFO - integration_test - Saved 92 states for obstacle 0 to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 10:55:28,152 - INFO - integration_test - Saved 92 states for obstacle 1 to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 10:55:28,153 - INFO - integration_test - Saved 92 states for obstacle 2 to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 10:55:28,153 - INFO - integration_test - Saved 92 states for obstacle 3 to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 10:55:28,153 - INFO - integration_test - Saved state history: 85 vehicle states, 4 obstacles
2026-01-21 10:55:28,153 - INFO - integration_test - Creating animation...
2026-01-21 10:55:28,199 - DEBUG - integration_test - Creating animation with 85 frames (range: 0 to 84)
2026-01-21 10:55:28,200 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 10:55:28,307 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 10:55:28,307 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 10:55:28,307 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 10:55:28,337 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 10:55:28,337 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 10:55:28,722 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 10:55:28,722 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 10:55:28,722 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 10:55:28,754 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 10:55:28,859 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 10:55:28,977 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 10:55:28,977 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 10:55:28,977 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 10:55:29,014 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 10:55:29,057 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 10:55:29,173 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 10:55:29,173 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 10:55:29,173 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 10:55:29,207 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 10:55:54,525 - INFO - integration_test - Saved animation with 85 frames at 10.00 fps to test_outputs/20260121_105108_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.50s, size: 1486516 bytes)
2026-01-21 10:55:54,559 - INFO - integration_test - Animation created successfully
2026-01-21 10:55:54,560 - INFO - integration_test - Test completed successfully
