2026-01-21 11:34:01,101 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 11:34:01,101 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 11:34:01,101 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 11:34:01,101 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 11:34:01,101 - INFO - integration_test - Creating objective module: contouring
2026-01-21 11:34:01,107 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 11:34:01,107 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 11:34:01,107 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 11:34:01,114 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 11:34:01,114 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 11:34:01,120 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 11:34:01,120 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 11:34:01,137 - INFO - integration_test - Setting solver on all modules...
2026-01-21 11:34:01,137 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 11:34:01,137 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 11:34:01,137 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 11:34:01,137 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 11:34:01,137 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 11:34:01,137 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 11:34:01,138 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 11:34:01,138 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 11:34:01,138 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 11:34:01,138 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 11:34:01,138 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 11:34:01,138 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 11:34:01,138 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 11:34:01,139 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 11:34:01,139 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 11:34:01,139 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 11:34:01,139 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 11:34:01,139 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 11:34:01,140 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 11:34:01,140 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 11:34:01,143 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:01,159 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 11:34:01,159 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 11:34:01,291 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:01,317 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:01,317 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 11:34:01,318 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:01,318 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 11:34:01,319 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:01,320 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:01,335 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,494 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,513 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,559 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,578 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,621 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,643 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,689 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,709 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,762 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,788 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,851 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,884 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:01,948 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:01,972 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:02,027 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:02,056 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:02,114 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:02,144 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:02,225 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:02,258 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:02,325 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:03,303 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 11:34:03,588 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 11:34:03,588 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:03,588 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 11:34:03,588 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 11:34:03,589 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196573087, 'w': 0.7999999980974664}
2026-01-21 11:34:03,589 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:03,589 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:03,590 - INFO - integration_test - Step 0 completed in 2.451s
2026-01-21 11:34:03,657 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 11:34:03,664 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 11:34:03,665 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 11:34:03,665 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 11:34:03,667 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:03,768 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 11:34:03,768 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 11:34:03,862 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:03,886 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:03,886 - INFO - integration_test - Warmstart k=0: x0=0.10987737537990316 , y0=0.004530845047545141 , psi0=0.07999999980974663 , v0=1.2000000019657309 , spline0=0.12000000019657309 , a0=0.0 , w0=0.0
2026-01-21 11:34:03,886 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:03,887 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033398637, 0.014120608316797557, 0.07999999980974663, 1.2000000019657309, 0.24000000039314617], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033398637, 0.014120608316797557, 0.07999999980974663, 1.2000000019657309, 0.24000000039314617], res_norm=1.248e+00
2026-01-21 11:34:03,888 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:03,888 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:03,904 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,043 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,065 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,109 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,128 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,175 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,194 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,239 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,260 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,303 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,325 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,368 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,387 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,430 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,451 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,496 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,561 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:04,581 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,627 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:04,655 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:04,697 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:05,323 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 11:34:05,417 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 11:34:05,417 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:05,417 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 11:34:05,417 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000185059834, 'w': 0.7999999421622779}
2026-01-21 11:34:05,417 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:05,417 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:05,419 - INFO - integration_test - Step 1 completed in 1.755s
2026-01-21 11:34:05,484 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 11:34:05,484 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 11:34:05,485 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 11:34:05,485 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 11:34:05,488 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:05,585 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 11:34:05,585 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 11:34:05,675 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:05,699 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:05,699 - INFO - integration_test - Warmstart k=0: x0=0.23889212823334446 , y0=0.020221621342187614 , psi0=0.15999999402597442 , v0=1.4000000038163292 , spline0=0.26000000057820605 , a0=0.0 , w0=0.0
2026-01-21 11:34:05,699 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:05,700 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394841593864, 0.042526169503302166, 0.15999999402597442, 1.4000000038163292, 0.400000000959839], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394841593864, 0.042526169503302166, 0.15999999402597442, 1.4000000038163292, 0.400000000959839], res_norm=1.513e+00
2026-01-21 11:34:05,700 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:05,701 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:05,717 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:05,865 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:05,887 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:05,937 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:05,958 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,006 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,028 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,079 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,101 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,147 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,168 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,214 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,235 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,284 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,308 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,357 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,377 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,422 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:06,445 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,491 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:06,511 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:06,555 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:07,203 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 11:34:07,247 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 11:34:07,247 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:07,247 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 11:34:07,247 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019919645, 'w': 0.8000000050749364}
2026-01-21 11:34:07,247 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:07,248 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:07,249 - INFO - integration_test - Step 2 completed in 1.765s
2026-01-21 11:34:07,309 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 11:34:07,310 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 11:34:07,310 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 11:34:07,310 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 11:34:07,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:07,408 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 11:34:07,408 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 11:34:07,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:07,520 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:07,520 - INFO - integration_test - Warmstart k=0: x0=0.3858364359340397 , y0=0.050144715204463036 , psi0=0.23999999453346807 , v0=1.6000000058082937 , spline0=0.42000000115903546 , a0=0.0 , w0=0.0
2026-01-21 11:34:07,520 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:07,521 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505126824515, 0.08817713472129322, 0.23999999453346807, 1.6000000058082937, 0.5800000017398649], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505126824515, 0.08817713472129322, 0.23999999453346807, 1.6000000058082937, 0.5800000017398649], res_norm=1.804e+00
2026-01-21 11:34:07,522 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:07,523 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:07,540 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:07,736 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:07,758 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:07,801 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:07,820 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:07,868 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:07,887 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:07,932 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:07,952 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:07,995 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:08,016 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:08,062 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:08,081 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:08,126 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:08,146 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:08,191 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:08,209 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:08,255 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:08,275 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:08,320 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:08,343 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:08,384 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:09,017 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 11:34:09,060 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 11:34:09,060 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:09,060 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 11:34:09,060 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999492, 'w': 0.800000009957639}
2026-01-21 11:34:09,060 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:09,060 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:09,061 - INFO - integration_test - Step 3 completed in 1.752s
2026-01-21 11:34:09,119 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 11:34:09,121 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.32       1.80000001 0.6       ]
2026-01-21 11:34:09,122 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 11:34:09,122 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 11:34:09,125 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:09,222 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 11:34:09,222 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 11:34:09,312 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:09,336 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:09,336 - INFO - integration_test - Warmstart k=0: x0=0.5491354617006852 , y0=0.0972407549442238 , psi0=0.319999995529232 , v0=1.800000007808243 , spline0=0.6000000019398598 , a0=0.0 , w0=0.0
2026-01-21 11:34:09,336 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:09,338 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978379498544, 0.15386273533686015, 0.319999995529232, 1.800000007808243, 0.7800000027206841], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978379498544, 0.15386273533686015, 0.319999995529232, 1.800000007808243, 0.7800000027206841], res_norm=2.120e+00
2026-01-21 11:34:09,339 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:09,340 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:09,358 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,496 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,517 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,562 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,582 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,625 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,646 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,691 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,710 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,755 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,775 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,817 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,836 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,882 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,902 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:09,946 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:09,965 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:10,010 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:10,029 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:10,074 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:10,093 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:10,134 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:10,746 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 11:34:10,787 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 11:34:10,788 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:10,788 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 11:34:10,788 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199955563, 'w': 0.8000000094001888}
2026-01-21 11:34:10,788 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:10,788 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:10,789 - INFO - integration_test - Step 4 completed in 1.668s
2026-01-21 11:34:10,846 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 11:34:10,847 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 11:34:10,847 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 11:34:10,847 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 11:34:10,850 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:11,008 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 11:34:11,009 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 11:34:11,099 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:11,121 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:11,122 - INFO - integration_test - Warmstart k=0: x0=0.726861489465985 , y0=0.1642797656559623 , psi0=0.39999999646925083 , v0=2.0000000098077986 , spline0=0.8000000029206397 , a0=0.0 , w0=0.0
2026-01-21 11:34:11,122 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:11,122 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736894449077, 0.242163433849219, 0.39999999646925083, 2.0000000098077986, 1.0000000039014196], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736894449077, 0.242163433849219, 0.39999999646925083, 2.0000000098077986, 1.0000000039014196], res_norm=2.459e+00
2026-01-21 11:34:11,123 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:11,124 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:11,138 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,307 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,327 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,376 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,396 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,441 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,463 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,507 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,527 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,572 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,592 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,636 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,657 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,702 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,721 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,766 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,785 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,827 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:11,852 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,893 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:11,912 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:11,956 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:12,586 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 11:34:12,632 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 11:34:12,632 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:12,632 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 11:34:12,632 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019180683, 'w': 0.7999997272549138}
2026-01-21 11:34:12,632 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:12,632 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:12,633 - INFO - integration_test - Step 5 completed in 1.787s
2026-01-21 11:34:12,696 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 11:34:12,699 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999997 2.20000001 1.02      ]
2026-01-21 11:34:12,700 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 11:34:12,700 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 11:34:12,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:12,801 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 11:34:12,801 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 11:34:12,901 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:12,925 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:12,925 - INFO - integration_test - Warmstart k=0: x0=0.916751905183287 , y0=0.2538238024534402 , psi0=0.4799999691947422 , v0=2.2000000117258667 , spline0=1.0200000040932262 , a0=0.0 , w0=0.0
2026-01-21 11:34:12,925 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:12,926 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907923643577, 0.35541521560273887, 0.4799999691947422, 2.2000000117258667, 1.2400000052658129], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907923643577, 0.35541521560273887, 0.4799999691947422, 2.2000000117258667, 1.2400000052658129], res_norm=2.823e+00
2026-01-21 11:34:12,926 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:12,927 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:12,944 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,093 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,114 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,161 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,181 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,227 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,247 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,293 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,314 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,361 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,381 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,423 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,445 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,490 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,509 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,556 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,577 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,621 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:13,642 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,684 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:13,703 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:13,748 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:14,421 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 11:34:14,534 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 11:34:14,535 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:14,535 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 11:34:14,535 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000193259417, 'w': 0.7999978532133503}
2026-01-21 11:34:14,535 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:14,535 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:14,536 - INFO - integration_test - Step 6 completed in 1.837s
2026-01-21 11:34:14,593 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 11:34:14,596 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819141 0.55999975 2.40000001 1.26000001]
2026-01-21 11:34:14,597 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 11:34:14,597 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 11:34:14,599 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:14,701 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 11:34:14,701 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 11:34:14,788 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:14,812 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:14,812 - INFO - integration_test - Warmstart k=0: x0=1.1162308817059832 , y0=0.36819141420408796 , psi0=0.5599997545160772 , v0=2.400000013658461 , spline0=1.2600000054590723 , a0=0.0 , w0=0.0
2026-01-21 11:34:14,812 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:14,813 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721408018584, 0.49567605251361246, 0.5599997545160772, 2.400000013658461, 1.5000000068249184], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721408018584, 0.49567605251361246, 0.5599997545160772, 2.400000013658461, 1.5000000068249184], res_norm=3.211e+00
2026-01-21 11:34:14,814 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:14,814 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:14,829 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:14,979 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:14,999 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,044 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,068 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,114 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,134 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,180 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,199 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,245 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,267 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,310 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,338 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,399 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,421 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,470 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,491 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,540 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:15,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,601 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:15,619 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:15,663 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:16,378 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 11:34:16,420 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 11:34:16,421 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:16,421 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 11:34:16,421 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019968154, 'w': -0.17997872728277944}
2026-01-21 11:34:16,421 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:16,421 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:16,423 - INFO - integration_test - Step 7 completed in 1.827s
2026-01-21 11:34:16,482 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 11:34:16,482 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32924396 0.49904914 0.54200188 2.60000002 1.52000001]
2026-01-21 11:34:16,483 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 11:34:16,483 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 11:34:16,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:16,583 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 11:34:16,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 11:34:16,741 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:16,764 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:16,764 - INFO - integration_test - Warmstart k=0: x0=1.329243957368214 , y0=0.4990491390471923 , psi0=0.5420018817877993 , v0=2.6000000156552763 , spline0=1.5200000070246 , a0=0.0 , w0=0.0
2026-01-21 11:34:16,764 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:16,766 - INFO - integration_test - Dyn residual k=0: pred=[1.551980166930328, 0.6331706576934425, 0.5420018817877993, 2.6000000156552763, 1.7800000085901277], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.551980166930328, 0.6331706576934425, 0.5420018817877993, 2.6000000156552763, 1.7800000085901277], res_norm=3.610e+00
2026-01-21 11:34:16,766 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:16,767 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:16,783 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:16,932 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:16,953 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:16,997 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,018 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,065 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,085 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,132 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,152 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,197 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,217 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,262 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,283 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,326 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,348 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,392 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,410 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,455 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:17,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,516 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:17,538 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:17,582 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:18,354 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 11:34:18,401 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 11:34:18,402 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:18,402 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 11:34:18,402 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199987262, 'w': -0.03753607699044755}
2026-01-21 11:34:18,402 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:18,402 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:18,403 - INFO - integration_test - Step 8 completed in 1.921s
2026-01-21 11:34:18,463 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 11:34:18,463 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56081102 0.63788938 0.53824827 2.80000002 1.80000001]
2026-01-21 11:34:18,464 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 11:34:18,464 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 11:34:18,466 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:18,565 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 11:34:18,565 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 11:34:18,654 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:18,678 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:18,678 - INFO - integration_test - Warmstart k=0: x0=1.5608110192120315 , y0=0.637889375338577 , psi0=0.5382482740887545 , v0=2.8000000176551487 , spline0=1.800000008790115 , a0=0.0 , w0=0.0
2026-01-21 11:34:18,678 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:18,679 - INFO - integration_test - Dyn residual k=0: pred=[1.8012212580073723, 0.7814265415048892, 0.5382482740887545, 2.8000000176551487, 2.0800000105556298], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8012212580073723, 0.7814265415048892, 0.5382482740887545, 2.8000000176551487, 2.0800000105556298], res_norm=4.039e+00
2026-01-21 11:34:18,680 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:18,681 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:18,696 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:18,854 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:18,877 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:18,922 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:18,944 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:18,986 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,006 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,053 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,074 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,120 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,140 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,183 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,205 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,249 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,270 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,313 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,336 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,398 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:19,428 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,479 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:19,498 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:19,542 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:20,655 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 11:34:20,779 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 11:34:20,780 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:20,780 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 11:34:20,780 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199988586, 'w': -0.06673809575004734}
2026-01-21 11:34:20,780 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:20,780 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:20,781 - INFO - integration_test - Step 9 completed in 2.318s
2026-01-21 11:34:20,837 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 11:34:20,838 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81030723 0.78571132 0.53157446 3.00000002 2.10000001]
2026-01-21 11:34:20,838 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 11:34:20,838 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 11:34:20,841 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:20,942 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 11:34:20,942 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 11:34:21,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:21,054 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:21,054 - INFO - integration_test - Warmstart k=0: x0=1.8103072338222448 , y0=0.7857113221264671 , psi0=0.5315744645137498 , v0=3.0000000196550345 , spline0=2.1000000107556183 , a0=0.0 , w0=0.0
2026-01-21 11:34:21,054 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:21,055 - INFO - integration_test - Dyn residual k=0: pred=[2.068910252650954, 0.9377786750723912, 0.5315744645137498, 3.0000000196550345, 2.400000012721122], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.068910252650954, 0.9377786750723912, 0.5315744645137498, 3.0000000196550345, 2.400000012721122], res_norm=4.495e+00
2026-01-21 11:34:21,056 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:21,057 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:21,072 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,214 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,235 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,280 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,301 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,349 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,368 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,411 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,429 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,475 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,497 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,539 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,561 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,604 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,622 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,668 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,687 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,731 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:21,751 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,791 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:21,812 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:21,854 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:22,505 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 11:34:22,557 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 11:34:22,558 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:22,558 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 11:34:22,558 - INFO - integration_test -   Control dict from planner: {'a': 1.0263650487792098e-07, 'w': -0.0658687961915037}
2026-01-21 11:34:22,558 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:22,558 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:22,559 - INFO - integration_test - Step 10 completed in 1.721s
2026-01-21 11:34:22,615 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 11:34:22,615 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06940921 0.93692589 0.52498758 3.00000003 2.40000001]
2026-01-21 11:34:22,616 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 11:34:22,616 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 11:34:22,619 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:22,721 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 11:34:22,721 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 11:34:22,809 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:22,834 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:22,835 - INFO - integration_test - Warmstart k=0: x0=2.069409205961043 , y0=0.9369258853113883 , psi0=0.5249875848945994 , v0=3.000000029918685 , spline0=2.4000000137474866 , a0=0.0 , w0=0.0
2026-01-21 11:34:22,835 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:22,836 - INFO - integration_test - Dyn residual k=0: pred=[2.3290082578005573, 1.0872865652750885, 0.5249875848945994, 3.000000029918685, 2.700000016739355], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3290082578005573, 1.0872865652750885, 0.5249875848945994, 3.000000029918685, 2.700000016739355], res_norm=4.814e+00
2026-01-21 11:34:22,836 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:22,837 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:22,854 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,079 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,100 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,142 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,165 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,209 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,228 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,275 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,294 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,339 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,359 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,401 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,420 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,468 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,487 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,531 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,551 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,594 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:23,613 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,658 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:23,677 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:23,718 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:24,320 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 11:34:24,372 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 11:34:24,372 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:24,372 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 11:34:24,372 - INFO - integration_test -   Control dict from planner: {'a': -5.182957482150263e-08, 'w': -0.056592776455240176}
2026-01-21 11:34:24,373 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:24,373 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:24,374 - INFO - integration_test - Step 11 completed in 1.759s
2026-01-21 11:34:24,434 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 11:34:24,435 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32943234 1.08655119 0.51932831 3.00000002 2.70000002]
2026-01-21 11:34:24,436 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 11:34:24,436 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 11:34:24,439 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:24,540 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 11:34:24,540 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 11:34:24,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:24,655 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:24,655 - INFO - integration_test - Warmstart k=0: x0=2.3294323371452323 , y0=1.0865511929416238 , psi0=0.5193283072490754 , v0=3.0000000247357272 , spline0=2.7000000162210593 , a0=0.0 , w0=0.0
2026-01-21 11:34:24,655 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:24,656 - INFO - integration_test - Dyn residual k=0: pred=[2.589878159694193, 1.2354403295531942, 0.5193283072490754, 3.0000000247357272, 3.000000018694632], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.589878159694193, 1.2354403295531942, 0.5193283072490754, 3.0000000247357272, 3.000000018694632], res_norm=5.148e+00
2026-01-21 11:34:24,657 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:24,658 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:24,673 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:24,817 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:24,837 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:24,884 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:24,904 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:24,949 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:24,969 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,011 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:25,033 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,080 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:25,099 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,145 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:25,165 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,211 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:25,231 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,277 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:25,299 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,345 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:25,368 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,409 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:25,428 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:25,473 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:26,121 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 11:34:26,174 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 11:34:26,174 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:26,174 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 11:34:26,174 - INFO - integration_test -   Control dict from planner: {'a': 5.2641532544478085e-08, 'w': -0.06648588632021672}
2026-01-21 11:34:26,174 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:26,174 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:26,176 - INFO - integration_test - Step 12 completed in 1.741s
2026-01-21 11:34:26,229 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 11:34:26,230 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59037119 1.23457344 0.51267972 3.00000003 3.00000002]
2026-01-21 11:34:26,230 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 11:34:26,230 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 11:34:26,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:26,418 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 11:34:26,418 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 11:34:26,511 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:26,536 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:26,536 - INFO - integration_test - Warmstart k=0: x0=2.590371190635519 , y0=1.234573437397876 , psi0=0.5126797186170537 , v0=3.0000000299998804 , spline0=3.0000000192210474 , a0=0.0 , w0=0.0
2026-01-21 11:34:26,536 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:26,537 - INFO - integration_test - Dyn residual k=0: pred=[2.8518011526541316, 1.3817276991742167, 0.5126797186170537, 3.0000000299998804, 3.3000000222210355], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8518011526541316, 1.3817276991742167, 0.5126797186170537, 3.0000000299998804, 3.3000000222210355], res_norm=5.495e+00
2026-01-21 11:34:26,538 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:26,539 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:26,555 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:26,701 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:26,722 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:26,767 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:26,790 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:26,834 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:26,856 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:26,901 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:26,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:26,965 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:26,985 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:27,030 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:27,051 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:27,097 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:27,118 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:27,163 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:27,183 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:27,227 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:27,248 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:27,293 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:27,314 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:27,357 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:29,042 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 11:34:29,101 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 11:34:29,101 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:29,101 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 11:34:29,101 - INFO - integration_test -   Control dict from planner: {'a': -7.695392124444381e-07, 'w': -0.025945945593234362}
2026-01-21 11:34:29,101 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:29,101 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:29,102 - INFO - integration_test - Step 13 completed in 2.873s
2026-01-21 11:34:29,164 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 11:34:29,165 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85199176 1.38138838 0.51008512 2.99999995 3.30000001]
2026-01-21 11:34:29,165 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.146m, drift=0.370m)
2026-01-21 11:34:29,166 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 11:34:29,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:29,296 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 11:34:29,296 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 11:34:29,403 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:29,429 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:29,429 - INFO - integration_test - Warmstart k=0: x0=2.851991758693391 , y0=1.381388379999299 , psi0=0.5100851240577303 , v0=2.999999953045959 , spline0=3.300000014525643 , a0=0.0 , w0=0.0
2026-01-21 11:34:29,429 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:29,431 - INFO - integration_test - Dyn residual k=0: pred=[3.1138026392523948, 1.5278638387071544, 0.5100851240577303, 2.999999953045959, 3.600000009830239], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.1138026392523948, 1.5278638387071544, 0.5100851240577303, 2.999999953045959, 3.600000009830239], res_norm=5.852e+00
2026-01-21 11:34:29,432 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:29,433 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:29,450 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:29,605 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:29,626 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:29,672 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:29,695 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:29,740 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:29,760 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:29,804 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:29,823 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:29,870 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:29,890 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:29,935 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:29,956 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:30,000 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:30,021 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:30,068 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:30,090 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:30,136 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:30,159 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:30,204 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:30,225 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:30,270 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:30,951 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 11:34:31,101 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 11:34:31,101 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:31,101 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 11:34:31,101 - INFO - integration_test -   Control dict from planner: {'a': 7.695391753841693e-07, 'w': -0.10229466265761022}
2026-01-21 11:34:31,101 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:31,101 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:31,103 - INFO - integration_test - Step 14 completed in 1.938s
2026-01-21 11:34:31,165 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 11:34:31,166 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11454725 1.5265222  0.49985566 3.00000003 3.60000002]
2026-01-21 11:34:31,166 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 11:34:31,166 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 11:34:31,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:31,271 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.527), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 11:34:31,271 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 11:34:31,364 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:31,388 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:31,388 - INFO - integration_test - Warmstart k=0: x0=3.114547252928576 , y0=1.5265222048881535 , psi0=0.4998556577919693 , v0=3.0000000299998764 , spline0=3.600000017525631 , a0=0.0 , w0=0.0
2026-01-21 11:34:31,388 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:31,389 - INFO - integration_test - Dyn residual k=0: pred=[3.3778427817881864, 1.6703118647477222, 0.4998556577919693, 3.0000000299998764, 3.9000000205256184], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3778427817881864, 1.6703118647477222, 0.4998556577919693, 3.0000000299998764, 3.9000000205256184], res_norm=6.218e+00
2026-01-21 11:34:31,390 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:31,390 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:31,405 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,563 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,586 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,632 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,654 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,703 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,723 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,768 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,788 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,830 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,853 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,898 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,918 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:31,963 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:31,984 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:32,030 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:32,051 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:32,102 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:32,123 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:32,168 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:32,188 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:32,231 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:32,987 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 11:34:33,040 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 11:34:33,041 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:33,041 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 11:34:33,041 - INFO - integration_test -   Control dict from planner: {'a': -3.350981911670051e-07, 'w': -0.018387677557957664}
2026-01-21 11:34:33,041 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:33,041 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:33,042 - INFO - integration_test - Step 15 completed in 1.876s
2026-01-21 11:34:33,106 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 11:34:33,107 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37797483 1.67006971 0.49801689 3.         3.90000002]
2026-01-21 11:34:33,107 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.146m, drift=0.482m)
2026-01-21 11:34:33,107 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 11:34:33,110 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:33,216 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.670), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 11:34:33,216 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 11:34:33,311 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:33,336 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:33,336 - INFO - integration_test - Warmstart k=0: x0=3.3779748298046033 , y0=1.6700697133232514 , psi0=0.4980168900361735 , v0=2.9999999964900574 , spline0=3.9000000171746367 , a0=0.0 , w0=0.0
2026-01-21 11:34:33,336 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:33,337 - INFO - integration_test - Dyn residual k=0: pred=[3.641534306251679, 1.813374989445056, 0.4980168900361735, 2.9999999964900574, 4.200000016823642], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.641534306251679, 1.813374989445056, 0.4980168900361735, 2.9999999964900574, 4.200000016823642], res_norm=6.591e+00
2026-01-21 11:34:33,338 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:33,339 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:33,355 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:33,642 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:33,664 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:33,713 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:33,735 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:33,781 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:33,801 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:33,846 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:33,870 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:33,915 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:33,937 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:33,983 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:34,004 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:34,050 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:34,073 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:34,116 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:34,141 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:34,185 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:34,209 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:34,253 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:34,275 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:34,322 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:34,973 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 11:34:35,037 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 11:34:35,037 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:35,037 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 11:34:35,037 - INFO - integration_test -   Control dict from planner: {'a': 3.346511477666082e-07, 'w': -0.10082183717902427}
2026-01-21 11:34:35,037 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:35,037 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:35,039 - INFO - integration_test - Step 16 completed in 1.932s
2026-01-21 11:34:35,102 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 11:34:35,103 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64225225 1.81204395 0.48793471 3.00000003 4.20000002]
2026-01-21 11:34:35,103 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.143m, drift=0.294m)
2026-01-21 11:34:35,103 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 11:34:35,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:35,212 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.642, 1.812), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 11:34:35,212 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 11:34:35,308 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:35,335 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:35,335 - INFO - integration_test - Warmstart k=0: x0=3.642252251536384 , y0=1.8120439461303623 , psi0=0.48793470631827107 , v0=3.000000029955172 , spline0=4.200000020170154 , a0=0.0 , w0=0.0
2026-01-21 11:34:35,335 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:35,336 - INFO - integration_test - Dyn residual k=0: pred=[3.9072431412298494, 1.952684730317511, 0.48793470631827107, 3.000000029955172, 4.500000023165671], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9072431412298494, 1.952684730317511, 0.48793470631827107, 3.000000029955172, 4.500000023165671], res_norm=6.969e+00
2026-01-21 11:34:35,336 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:35,337 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:35,353 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,511 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,542 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,597 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,622 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,676 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,700 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,750 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,772 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,822 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,844 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,897 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,918 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:35,968 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:35,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:36,037 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:36,062 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:36,109 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:36,129 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:36,182 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:36,202 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:36,248 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:37,139 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 11:34:37,302 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 11:34:37,303 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:37,303 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 11:34:37,303 - INFO - integration_test -   Control dict from planner: {'a': -6.805595506652033e-07, 'w': -0.0498233468811697}
2026-01-21 11:34:37,303 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:37,303 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:37,305 - INFO - integration_test - Step 17 completed in 2.202s
2026-01-21 11:34:37,365 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 11:34:37,366 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.9075924  1.95202401 0.48295237 2.99999996 4.50000002]
2026-01-21 11:34:37,367 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 11:34:37,367 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 11:34:37,370 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:37,473 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.952), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 11:34:37,473 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 11:34:37,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:37,599 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:37,599 - INFO - integration_test - Warmstart k=0: x0=3.9075924008837504 , y0=1.9520240115779117 , psi0=0.4829523716301541 , v0=2.999999961899217 , spline0=4.500000016360075 , a0=0.0 , w0=0.0
2026-01-21 11:34:37,599 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:37,600 - INFO - integration_test - Dyn residual k=0: pred=[4.1732807120936135, 2.0913427791593246, 0.4829523716301541, 2.999999961899217, 4.800000012549996], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.1732807120936135, 2.0913427791593246, 0.4829523716301541, 2.999999961899217, 4.800000012549996], res_norm=7.353e+00
2026-01-21 11:34:37,601 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:37,602 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:37,618 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:37,766 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:37,786 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:37,833 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:37,869 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:37,931 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:37,953 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,000 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:38,020 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,064 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:38,085 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,129 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:38,150 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,193 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:38,212 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,255 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:38,276 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,320 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:38,340 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,385 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:38,404 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:38,448 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:39,082 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 11:34:39,139 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 11:34:39,139 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:39,139 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 11:34:39,139 - INFO - integration_test -   Control dict from planner: {'a': 6.809948081974675e-07, 'w': -0.055289084142105864}
2026-01-21 11:34:39,139 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:39,139 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:39,140 - INFO - integration_test - Step 18 completed in 1.774s
2026-01-21 11:34:39,205 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 11:34:39,206 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.1736645  2.09060759 0.47742346 3.00000003 4.80000002]
2026-01-21 11:34:39,206 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.126m, drift=0.405m)
2026-01-21 11:34:39,206 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 11:34:39,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:39,313 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.091), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 11:34:39,313 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 11:34:39,404 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:39,429 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:39,430 - INFO - integration_test - Warmstart k=0: x0=4.173664500859117 , y0=2.09060758962999 , psi0=0.4774234632159435 , v0=3.0000000299986977 , spline0=4.800000019359945 , a0=0.0 , w0=0.0
2026-01-21 11:34:39,430 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:39,430 - INFO - integration_test - Dyn residual k=0: pred=[4.440119034019535, 2.2284552720848865, 0.4774234632159435, 3.0000000299986977, 5.100000022359814], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440119034019535, 2.2284552720848865, 0.4774234632159435, 3.0000000299986977, 5.100000022359814], res_norm=7.741e+00
2026-01-21 11:34:39,431 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:39,432 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:39,447 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,589 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:39,612 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,661 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:39,682 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,726 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:39,745 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,791 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:39,810 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,855 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:39,876 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,923 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:39,945 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:39,993 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:40,018 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:40,065 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:40,090 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:40,137 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:40,159 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:40,204 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:40,223 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:40,272 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:40,876 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 11:34:41,042 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 11:34:41,042 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:41,042 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 11:34:41,042 - INFO - integration_test -   Control dict from planner: {'a': -4.028190639121164e-07, 'w': -0.046133624854470374}
2026-01-21 11:34:41,042 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:41,042 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:41,044 - INFO - integration_test - Step 19 completed in 1.838s
2026-01-21 11:34:41,110 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 11:34:41,112 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44043606 2.22784016 0.4728101  2.99999999 5.10000002]
2026-01-21 11:34:41,112 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-21 11:34:41,112 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 11:34:41,115 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:41,218 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.440, 2.228), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 11:34:41,218 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 11:34:41,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:41,341 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:41,341 - INFO - integration_test - Warmstart k=0: x0=4.4404360571647095 , y0=2.227840157610579 , psi0=0.47281010073049645 , v0=2.9999999897167915 , spline0=5.100000018331624 , a0=0.0 , w0=0.0
2026-01-21 11:34:41,341 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:41,342 - INFO - integration_test - Dyn residual k=0: pred=[4.707523690324008, 2.364457124332768, 0.47281010073049645, 2.9999999897167915, 5.400000017303303], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.707523690324008, 2.364457124332768, 0.47281010073049645, 2.9999999897167915, 5.400000017303303], res_norm=8.132e+00
2026-01-21 11:34:41,343 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:41,344 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:41,359 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,528 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,549 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,593 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,615 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,659 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,680 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,726 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,747 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,794 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,815 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,858 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,878 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:41,936 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:41,963 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:42,021 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:42,043 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:42,087 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:42,108 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:42,152 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:42,170 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:42,215 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:43,258 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 11:34:43,319 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 11:34:43,319 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:43,319 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 11:34:43,319 - INFO - integration_test -   Control dict from planner: {'a': 4.0281689333644615e-07, 'w': -0.07430957866723331}
2026-01-21 11:34:43,319 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:43,319 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:43,320 - INFO - integration_test - Step 20 completed in 2.209s
2026-01-21 11:34:43,380 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 11:34:43,380 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70802883 2.36346351 0.46537914 3.00000003 5.40000002]
2026-01-21 11:34:43,381 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.223m, drift=0.517m)
2026-01-21 11:34:43,381 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 11:34:43,384 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:43,482 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 11:34:43,482 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 11:34:43,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:43,706 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:43,707 - INFO - integration_test - Warmstart k=0: x0=4.708028829196759 , y0=2.363463514024955 , psi0=0.46537914286377313 , v0=3.000000029998481 , spline0=5.400000021331472 , a0=0.0 , w0=0.0
2026-01-21 11:34:43,707 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:43,707 - INFO - integration_test - Dyn residual k=0: pred=[4.9761242773963446, 2.498092011953782, 0.46537914286377313, 3.000000029998481, 5.70000002433132], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.9761242773963446, 2.498092011953782, 0.46537914286377313, 3.000000029998481, 5.70000002433132], res_norm=8.527e+00
2026-01-21 11:34:43,708 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:43,709 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:43,723 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:43,883 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:43,903 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:43,949 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:43,968 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,013 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,032 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,079 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,101 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,147 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,166 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,208 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,228 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,274 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,294 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,341 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,362 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,406 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:44,425 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,469 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:44,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:44,530 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:45,112 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 11:34:45,174 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 11:34:45,174 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:45,174 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 11:34:45,174 - INFO - integration_test -   Control dict from planner: {'a': -4.6508378002001125e-08, 'w': -0.04865528007542111}
2026-01-21 11:34:45,174 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:45,174 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:45,176 - INFO - integration_test - Step 21 completed in 1.795s
2026-01-21 11:34:45,239 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 11:34:45,241 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97645074 2.49743927 0.46051361 3.00000003 5.70000002]
2026-01-21 11:34:45,241 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.113m, drift=0.329m)
2026-01-21 11:34:45,242 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 11:34:45,244 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:45,345 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.976, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 11:34:45,345 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 11:34:45,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:45,458 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:45,458 - INFO - integration_test - Warmstart k=0: x0=4.976450738120219 , y0=2.497439268996594 , psi0=0.46051361485623105 , v0=3.000000025347643 , spline0=5.700000023866236 , a0=0.0 , w0=0.0
2026-01-21 11:34:45,458 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:45,459 - INFO - integration_test - Dyn residual k=0: pred=[5.2451980486918215, 2.6307617524020164, 0.46051361485623105, 3.000000025347643, 6.0000000264010005], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.2451980486918215, 2.6307617524020164, 0.46051361485623105, 3.000000025347643, 6.0000000264010005], res_norm=8.924e+00
2026-01-21 11:34:45,460 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:45,461 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:45,476 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:45,637 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:45,658 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:45,705 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:45,725 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:45,771 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:45,792 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:45,838 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:45,859 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:45,906 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:45,926 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:45,972 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:45,991 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:46,038 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:46,057 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:46,104 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:46,123 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:46,167 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:46,188 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:46,229 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:46,250 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:46,299 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:48,001 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 11:34:48,186 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 11:34:48,186 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:48,186 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 11:34:48,186 - INFO - integration_test -   Control dict from planner: {'a': -3.6745640137028564e-08, 'w': -0.0802029958202607}
2026-01-21 11:34:48,186 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:48,186 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:48,187 - INFO - integration_test - Step 22 completed in 2.947s
2026-01-21 11:34:48,245 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 11:34:48,247 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24572981 2.62968261 0.45249332 3.00000002 6.00000003]
2026-01-21 11:34:48,249 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 11:34:48,249 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 11:34:48,252 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:48,354 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.630), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 11:34:48,354 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 11:34:48,443 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:48,469 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:48,469 - INFO - integration_test - Warmstart k=0: x0=5.245729807595181 , y0=2.6296826117990406 , psi0=0.452493315274205 , v0=3.000000021673079 , spline0=6.000000026033544 , a0=0.0 , w0=0.0
2026-01-21 11:34:48,469 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:48,470 - INFO - integration_test - Dyn residual k=0: pred=[5.5155377490639586, 2.760845396234129, 0.452493315274205, 3.000000021673079, 6.300000028200852], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.5155377490639586, 2.760845396234129, 0.452493315274205, 3.000000021673079, 6.300000028200852], res_norm=9.324e+00
2026-01-21 11:34:48,470 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:48,471 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:48,487 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:48,648 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:48,670 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:48,717 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:48,737 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:48,783 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:48,803 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:48,848 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:48,868 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:48,914 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:48,934 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:48,979 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:48,999 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:49,043 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:49,063 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:49,110 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:49,130 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:49,175 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:49,196 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:49,239 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:49,260 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:49,304 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:50,004 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 11:34:50,078 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 11:34:50,078 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:50,078 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 11:34:50,079 - INFO - integration_test -   Control dict from planner: {'a': 6.692290861288618e-08, 'w': -0.03649968347075059}
2026-01-21 11:34:50,079 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:50,079 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:50,080 - INFO - integration_test - Step 23 completed in 1.833s
2026-01-21 11:34:50,139 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 11:34:50,141 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51577652 2.76035271 0.44884335 3.00000003 6.30000003]
2026-01-21 11:34:50,141 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 11:34:50,141 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 11:34:50,144 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:50,241 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 11:34:50,241 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 11:34:50,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:50,355 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:50,356 - INFO - integration_test - Warmstart k=0: x0=5.5157765200300135 , y0=2.76035271047249 , psi0=0.44884334692712996 , v0=3.0000000283653696 , spline0=6.300000028870081 , a0=0.0 , w0=0.0
2026-01-21 11:34:50,356 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:50,356 - INFO - integration_test - Dyn residual k=0: pred=[5.7860614038252685, 2.8905298332464535, 0.44884334692712996, 3.0000000283653696, 6.600000031706618], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.7860614038252685, 2.8905298332464535, 0.44884334692712996, 3.0000000283653696, 6.600000031706618], res_norm=9.726e+00
2026-01-21 11:34:50,357 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:50,358 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:50,372 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,533 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,555 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,598 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,619 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,664 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,685 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,731 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,752 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,795 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,816 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,861 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,885 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:50,949 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:50,978 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:51,029 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:51,051 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:51,102 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:51,123 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:51,169 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:51,191 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:51,234 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:52,073 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 11:34:52,284 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 11:34:52,284 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:52,285 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 11:34:52,285 - INFO - integration_test -   Control dict from planner: {'a': -7.315964778449083e-08, 'w': -0.05220073222367837}
2026-01-21 11:34:52,285 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:52,285 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:52,287 - INFO - integration_test - Step 24 completed in 2.146s
2026-01-21 11:34:52,353 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 11:34:52,355 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78639994 2.88982379 0.44362327 3.00000002 6.60000003]
2026-01-21 11:34:52,355 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.111m, drift=0.252m)
2026-01-21 11:34:52,355 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 11:34:52,358 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:52,473 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.786, 2.890), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 11:34:52,473 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 11:34:52,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:52,600 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:52,600 - INFO - integration_test - Warmstart k=0: x0=5.786399942275536 , y0=2.8898237900465022 , psi0=0.4436232737047621 , v0=3.000000021049405 , spline0=6.600000030975021 , a0=0.0 , w0=0.0
2026-01-21 11:34:52,600 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:52,601 - INFO - integration_test - Dyn residual k=0: pred=[6.057360673926389, 3.0185882384249214, 0.4436232737047621, 3.000000021049405, 6.900000033079962], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.057360673926389, 3.0185882384249214, 0.4436232737047621, 3.000000021049405, 6.900000033079962], res_norm=1.013e+01
2026-01-21 11:34:52,602 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:52,603 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:52,620 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:52,792 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:52,815 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:52,861 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:52,881 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:52,928 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:52,949 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:52,994 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:53,013 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,058 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:53,077 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,124 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:53,147 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,193 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:53,213 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,262 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:53,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,331 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:53,353 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,398 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:53,418 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:53,464 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:54,637 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 11:34:54,715 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 11:34:54,716 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:54,716 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 11:34:54,716 - INFO - integration_test -   Control dict from planner: {'a': 8.94910283661985e-08, 'w': -0.08056649682571446}
2026-01-21 11:34:54,716 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:54,716 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:54,717 - INFO - integration_test - Step 25 completed in 2.363s
2026-01-21 11:34:54,788 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 11:34:54,791 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05787645 3.01749533 0.43556662 3.00000003 6.90000003]
2026-01-21 11:34:54,791 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.204m, drift=0.064m)
2026-01-21 11:34:54,791 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 11:34:54,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:54,909 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.017), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 11:34:54,909 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 11:34:55,124 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:55,148 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:55,148 - INFO - integration_test - Warmstart k=0: x0=6.057876445236169 , y0=3.017495333669113 , psi0=0.43556662402219065 , v0=3.0000000299985077 , spline0=6.900000033974872 , a0=0.0 , w0=0.0
2026-01-21 11:34:55,148 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:55,149 - INFO - integration_test - Dyn residual k=0: pred=[6.329865782598245, 3.1440725913469807, 0.43556662402219065, 3.0000000299985077, 7.200000036974723], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.329865782598245, 3.1440725913469807, 0.43556662402219065, 3.0000000299985077, 7.200000036974723], res_norm=1.053e+01
2026-01-21 11:34:55,150 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:55,151 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:55,165 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,329 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,366 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,442 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,465 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,514 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,534 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,581 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,602 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,646 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,666 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,711 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,732 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,779 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,798 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,843 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,864 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,909 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:55,931 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:55,975 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:55,996 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:56,036 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:57,384 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 11:34:57,450 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 11:34:57,451 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:57,451 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 11:34:57,451 - INFO - integration_test -   Control dict from planner: {'a': -3.009082673902166e-07, 'w': -0.057627237812186635}
2026-01-21 11:34:57,451 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:57,451 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:57,452 - INFO - integration_test - Step 26 completed in 2.662s
2026-01-21 11:34:57,513 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 11:34:57,514 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33022899 3.14328819 0.4298039  3.         7.20000003]
2026-01-21 11:34:57,514 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-21 11:34:57,514 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 11:34:57,517 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:57,620 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.330, 3.143), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 11:34:57,620 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 11:34:57,711 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:34:57,734 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:34:57,734 - INFO - integration_test - Warmstart k=0: x0=6.330228989696544 , y0=3.1432881925924123 , psi0=0.429803900240972 , v0=2.999999999907681 , spline0=7.20000003396564 , a0=0.0 , w0=0.0
2026-01-21 11:34:57,735 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:34:57,735 - INFO - integration_test - Dyn residual k=0: pred=[6.6029432338264735, 3.2682959565237066, 0.429803900240972, 2.999999999907681, 7.500000033956408], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.6029432338264735, 3.2682959565237066, 0.429803900240972, 2.999999999907681, 7.500000033956408], res_norm=1.094e+01
2026-01-21 11:34:57,736 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:57,737 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:34:57,754 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:57,915 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:57,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:57,981 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,004 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,049 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,071 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,115 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,136 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,182 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,202 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,249 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,271 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,318 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,338 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,385 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,405 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,450 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:34:58,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,530 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:58,553 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:34:58,600 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:34:59,620 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 11:34:59,833 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 11:34:59,833 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:34:59,833 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 11:34:59,833 - INFO - integration_test -   Control dict from planner: {'a': 3.0092081363134194e-07, 'w': -0.06077834801909234}
2026-01-21 11:34:59,833 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:34:59,833 - INFO - integration_test -   Planner output success: True
2026-01-21 11:34:59,835 - INFO - integration_test - Step 27 completed in 2.322s
2026-01-21 11:34:59,916 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 11:34:59,917 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60332144 3.26746643 0.42372607 3.00000003 7.50000004]
2026-01-21 11:34:59,918 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.124m, drift=0.175m)
2026-01-21 11:34:59,918 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 11:34:59,921 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:00,038 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.603, 3.267), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 11:35:00,038 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 11:35:00,135 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:00,161 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:00,161 - INFO - integration_test - Warmstart k=0: x0=6.603321443285485 , y0=3.2674664340030968 , psi0=0.42372606543906277 , v0=3.0000000299997622 , spline0=7.500000036965616 , a0=0.0 , w0=0.0
2026-01-21 11:35:00,161 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:00,162 - INFO - integration_test - Dyn residual k=0: pred=[6.876790424992007, 3.390814388361424, 0.42372606543906277, 3.0000000299997622, 7.800000039965592], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.876790424992007, 3.390814388361424, 0.42372606543906277, 3.0000000299997622, 7.800000039965592], res_norm=1.135e+01
2026-01-21 11:35:00,163 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:00,164 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:00,179 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,342 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,362 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,408 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,429 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,473 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,494 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,540 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,559 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,605 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,624 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,671 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,691 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,738 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,760 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,805 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,825 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,869 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:00,889 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,932 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:00,953 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:00,997 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:03,149 - WARNING - integration_test - Step 28: MPC solve failed
2026-01-21 11:35:03,149 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:35:03,223 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 11:35:03,223 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:03,223 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 11:35:03,224 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:03,224 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:03,224 - INFO - integration_test -   Planner output success: False
2026-01-21 11:35:03,224 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:03,225 - INFO - integration_test - Step 28 completed in 3.309s
2026-01-21 11:35:03,289 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 11:35:03,293 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87679042 3.39081439 0.42372607 3.00000003 7.80000004]
2026-01-21 11:35:03,293 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.242m, drift=0.013m)
2026-01-21 11:35:03,294 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 11:35:03,296 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:03,394 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.877, 3.391), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 11:35:03,394 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 11:35:03,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:03,509 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:03,509 - INFO - integration_test - Warmstart k=0: x0=6.876790424992007 , y0=3.390814388361424 , psi0=0.42372606543906277 , v0=3.0000000299997622 , spline0=7.800000039965592 , a0=0.0 , w0=0.0
2026-01-21 11:35:03,509 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:03,510 - INFO - integration_test - Dyn residual k=0: pred=[7.150259406698528, 3.5141623427197515, 0.42372606543906277, 3.0000000299997622, 8.100000042965569], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.150259406698528, 3.5141623427197515, 0.42372606543906277, 3.0000000299997622, 8.100000042965569], res_norm=1.176e+01
2026-01-21 11:35:03,511 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:03,512 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:03,529 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:03,816 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:03,836 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:03,880 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:03,900 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:03,945 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:03,967 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,011 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:04,031 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,075 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:04,095 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,140 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:04,163 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,219 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:04,260 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,317 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:04,339 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,390 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:04,409 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,452 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:04,472 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:04,514 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:05,482 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 11:35:05,552 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 11:35:05,552 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:05,553 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 11:35:05,553 - INFO - integration_test -   Control dict from planner: {'a': -1.759608824844396e-07, 'w': -0.14358775206517627}
2026-01-21 11:35:05,553 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:05,553 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:05,554 - INFO - integration_test - Step 29 completed in 2.262s
2026-01-21 11:35:05,621 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 11:35:05,622 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15113556 3.5121948  0.40936729 3.00000001 8.10000004]
2026-01-21 11:35:05,623 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.150m, drift=0.287m)
2026-01-21 11:35:05,623 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 11:35:05,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:05,740 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.151, 3.512), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 11:35:05,740 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 11:35:05,860 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:05,894 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:05,895 - INFO - integration_test - Warmstart k=0: x0=7.151135556501813 , y0=3.512194797794089 , psi0=0.40936729023254514 , v0=3.000000012403674 , spline0=8.10000004120596 , a0=0.0 , w0=0.0
2026-01-21 11:35:05,895 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:05,896 - INFO - integration_test - Dyn residual k=0: pred=[7.426347410612694, 3.6316034913681823, 0.40936729023254514, 3.000000012403674, 8.400000042446326], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.426347410612694, 3.6316034913681823, 0.40936729023254514, 3.000000012403674, 8.400000042446326], res_norm=1.217e+01
2026-01-21 11:35:05,897 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:05,897 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:05,917 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,109 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,132 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,180 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,202 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,247 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,267 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,312 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,333 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,379 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,400 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,443 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,463 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,507 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,527 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,574 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,594 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,638 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:06,660 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,702 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:06,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:06,767 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:07,819 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 11:35:07,892 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 11:35:07,892 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:07,892 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 11:35:07,892 - INFO - integration_test -   Control dict from planner: {'a': 1.7596160606225462e-07, 'w': -0.037448829376001906}
2026-01-21 11:35:07,892 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:07,892 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:07,893 - INFO - integration_test - Step 30 completed in 2.272s
2026-01-21 11:35:07,959 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 11:35:07,960 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.42657035 3.6310879  0.40562241 3.00000003 8.40000004]
2026-01-21 11:35:07,961 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.150m, drift=0.099m)
2026-01-21 11:35:07,961 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 11:35:07,964 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:08,200 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.427, 3.631), path_start=(0.000, 0.000), dist=8.267m
2026-01-21 11:35:08,200 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 11:35:08,294 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:08,319 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:08,319 - INFO - integration_test - Warmstart k=0: x0=7.426570353680791 , y0=3.631087895129588 , psi0=0.405622407294945 , v0=3.0000000299998346 , spline0=8.400000044205942 , a0=0.0 , w0=0.0
2026-01-21 11:35:08,319 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:08,320 - INFO - integration_test - Dyn residual k=0: pred=[7.702227450138814, 3.7494651183286587, 0.405622407294945, 3.0000000299998346, 8.700000047205926], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.702227450138814, 3.7494651183286587, 0.405622407294945, 3.0000000299998346, 8.700000047205926], res_norm=1.258e+01
2026-01-21 11:35:08,321 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:08,322 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:08,338 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,499 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,520 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,569 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,589 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,636 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,657 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,702 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,722 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,781 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,815 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,877 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,898 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:08,945 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:08,965 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:09,010 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:09,029 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:09,075 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:09,095 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:09,137 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:09,160 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:09,203 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:10,042 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 11:35:10,153 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 11:35:10,153 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:10,153 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 11:35:10,153 - INFO - integration_test -   Control dict from planner: {'a': -2.632125591519952e-07, 'w': -0.07252122202285098}
2026-01-21 11:35:10,153 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:10,153 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:10,155 - INFO - integration_test - Step 31 completed in 2.195s
2026-01-21 11:35:10,220 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 11:35:10,227 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70265427 3.74846454 0.39837029 3.         8.70000004]
2026-01-21 11:35:10,228 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.251m, drift=0.399m)
2026-01-21 11:35:10,228 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 11:35:10,231 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:10,348 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.703, 3.748), path_start=(0.000, 0.000), dist=8.566m
2026-01-21 11:35:10,348 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 11:35:10,438 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:10,463 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:10,464 - INFO - integration_test - Warmstart k=0: x0=7.702654273811717 , y0=3.7484645350831136 , psi0=0.39837028509265987 , v0=3.0000000036785788 , spline0=8.7000000445738 , a0=0.0 , w0=0.0
2026-01-21 11:35:10,464 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:10,465 - INFO - integration_test - Dyn residual k=0: pred=[7.979162597584084, 3.8648395629254773, 0.39837028509265987, 3.0000000036785788, 9.000000044941658], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.979162597584084, 3.8648395629254773, 0.39837028509265987, 3.0000000036785788, 9.000000044941658], res_norm=1.299e+01
2026-01-21 11:35:10,466 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:10,467 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:10,484 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:10,648 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:10,669 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:10,712 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:10,734 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:10,779 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:10,799 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:10,845 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:10,864 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:10,910 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:10,931 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:10,976 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:10,996 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:11,041 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:11,063 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:11,111 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:11,134 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:11,179 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:11,199 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:11,243 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:11,263 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:11,304 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:12,279 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 11:35:12,513 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 11:35:12,514 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:12,514 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 11:35:12,514 - INFO - integration_test -   Control dict from planner: {'a': 2.6245470670537965e-07, 'w': -0.05903519663995266}
2026-01-21 11:35:12,514 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:12,514 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:12,515 - INFO - integration_test - Step 32 completed in 2.288s
2026-01-21 11:35:12,591 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 11:35:12,593 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.9795045  3.8640227  0.39246677 3.00000003 9.00000005]
2026-01-21 11:35:12,594 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.137m, drift=0.211m)
2026-01-21 11:35:12,594 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 11:35:12,597 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:12,708 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.980, 3.864), path_start=(0.000, 0.000), dist=8.866m
2026-01-21 11:35:12,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 11:35:12,822 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:12,862 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:12,862 - INFO - integration_test - Warmstart k=0: x0=7.979504502809795 , y0=3.8640227036632018 , psi0=0.3924667654286646 , v0=3.0000000299240495 , spline0=9.000000047566205 , a0=0.0 , w0=0.0
2026-01-21 11:35:12,862 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:12,864 - INFO - integration_test - Dyn residual k=0: pred=[8.25669502892473, 3.978763341745654, 0.3924667654286646, 3.0000000299240495, 9.30000005055861], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.25669502892473, 3.978763341745654, 0.3924667654286646, 3.0000000299240495, 9.30000005055861], res_norm=1.340e+01
2026-01-21 11:35:12,865 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:12,866 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:12,890 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,060 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,081 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,125 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,148 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,194 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,214 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,260 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,281 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,325 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,347 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,392 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,411 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,457 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,476 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,519 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,541 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,585 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:13,606 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,652 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:13,672 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:13,717 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:14,540 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 11:35:14,618 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 11:35:14,618 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:14,618 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 11:35:14,618 - INFO - integration_test -   Control dict from planner: {'a': -6.022720690498779e-07, 'w': -0.060242192445984145}
2026-01-21 11:35:14,618 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:14,618 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:14,619 - INFO - integration_test - Step 33 completed in 2.027s
2026-01-21 11:35:14,685 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 11:35:14,686 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.25703896 3.97792772 0.38644255 2.99999997 9.30000004]
2026-01-21 11:35:14,687 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.191m, drift=0.022m)
2026-01-21 11:35:14,687 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 11:35:14,690 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:14,793 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.257, 3.978), path_start=(0.000, 0.000), dist=9.165m
2026-01-21 11:35:14,793 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 11:35:14,890 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:14,923 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:14,923 - INFO - integration_test - Warmstart k=0: x0=8.257038959878768 , y0=3.9779277208676125 , psi0=0.3864425461840662 , v0=2.9999999696968427 , spline0=9.300000044535889 , a0=0.0 , w0=0.0
2026-01-21 11:35:14,923 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:14,924 - INFO - integration_test - Dyn residual k=0: pred=[8.534915669218694, 4.090996428246024, 0.3864425461840662, 2.9999999696968427, 9.600000041505574], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.534915669218694, 4.090996428246024, 0.3864425461840662, 2.9999999696968427, 9.600000041505574], res_norm=1.382e+01
2026-01-21 11:35:14,925 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:14,925 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:14,942 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,115 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,137 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,185 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,206 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,255 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,278 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,327 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,351 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,400 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,421 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,470 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,490 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,538 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,559 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,603 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,623 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,674 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:15,696 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,740 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:15,761 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:15,804 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:16,543 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 11:35:16,761 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 11:35:16,761 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:16,762 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 11:35:16,762 - INFO - integration_test -   Control dict from planner: {'a': 6.026945882675811e-07, 'w': -0.06457103663383672}
2026-01-21 11:35:16,762 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:16,762 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:16,764 - INFO - integration_test - Step 34 completed in 2.077s
2026-01-21 11:35:16,825 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 11:35:16,826 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.53527879 4.09009851 0.37998544 3.00000003 9.60000005]
2026-01-21 11:35:16,826 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.214m, drift=0.322m)
2026-01-21 11:35:16,826 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 11:35:16,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:16,928 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.535, 4.090), path_start=(0.000, 0.000), dist=9.465m
2026-01-21 11:35:16,928 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 11:35:17,024 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:17,049 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:17,049 - INFO - integration_test - Warmstart k=0: x0=8.535278787958998 , y0=4.090098507411679 , psi0=0.37998544252068256 , v0=3.0000000299663014 , spline0=9.600000047532518 , a0=0.0 , w0=0.0
2026-01-21 11:35:17,049 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:17,050 - INFO - integration_test - Dyn residual k=0: pred=[8.81387980128543, 4.2013705936303865, 0.37998544252068256, 3.0000000299663014, 9.900000050529147], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.81387980128543, 4.2013705936303865, 0.37998544252068256, 3.0000000299663014, 9.900000050529147], res_norm=1.423e+01
2026-01-21 11:35:17,051 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:17,051 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:17,071 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,261 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,281 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,326 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,349 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,393 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,415 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,459 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,480 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,525 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,547 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,594 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,614 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,660 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,679 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,723 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,746 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,790 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:17,812 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,855 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:17,877 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:17,921 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:18,674 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 11:35:18,773 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 11:35:18,774 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:18,774 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 11:35:18,774 - INFO - integration_test -   Control dict from planner: {'a': -3.9760749431510524e-07, 'w': -0.03343559157914549}
2026-01-21 11:35:18,774 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:18,774 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:18,775 - INFO - integration_test - Step 35 completed in 1.950s
2026-01-21 11:35:18,833 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 11:35:18,834 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.8140653  4.20090463 0.37664188 2.99999999 9.90000005]
2026-01-21 11:35:18,835 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.141m, drift=0.134m)
2026-01-21 11:35:18,835 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 11:35:18,838 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:18,939 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.814, 4.201), path_start=(0.000, 0.000), dist=9.764m
2026-01-21 11:35:18,939 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 11:35:19,034 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:19,058 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:19,058 - INFO - integration_test - Warmstart k=0: x0=8.81406530256788 , y0=4.2009046265207655 , psi0=0.376641883362768 , v0=2.999999990205552 , spline0=9.900000046553073 , a0=0.0 , w0=0.0
2026-01-21 11:35:19,058 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:19,059 - INFO - integration_test - Dyn residual k=0: pred=[9.09303679901369, 4.3112445720668715, 0.376641883362768, 2.999999990205552, 10.200000045573628], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.09303679901369, 4.3112445720668715, 0.376641883362768, 2.999999990205552, 10.200000045573628], res_norm=1.464e+01
2026-01-21 11:35:19,060 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:19,061 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:19,075 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,236 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,259 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,303 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,323 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,369 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,389 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,433 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,454 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,502 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,524 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,570 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,591 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,638 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,660 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,704 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,724 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,770 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:19,790 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,833 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:19,852 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:19,893 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:20,893 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 11:35:21,123 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 11:35:21,124 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:21,124 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 11:35:21,124 - INFO - integration_test -   Control dict from planner: {'a': 3.9788789919239435e-07, 'w': -0.11598011605296935}
2026-01-21 11:35:21,124 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:21,124 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:21,125 - INFO - integration_test - Step 36 completed in 2.291s
2026-01-21 11:35:21,198 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 11:35:21,200 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.0936704   4.30962436  0.36504387  3.00000003 10.20000005]
2026-01-21 11:35:21,201 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.242m, drift=0.054m)
2026-01-21 11:35:21,201 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 11:35:21,205 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:21,327 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.094, 4.310), path_start=(0.000, 0.000), dist=10.063m
2026-01-21 11:35:21,327 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.063m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:21,327 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 11:35:21,422 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:21,446 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:21,446 - INFO - integration_test - Warmstart k=0: x0=9.093670401469005 , y0=4.309624359900161 , psi0=0.36504387175747105 , v0=3.000000029994342 , spline0=10.200000049552507 , a0=0.0 , w0=0.0
2026-01-21 11:35:21,446 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:21,447 - INFO - integration_test - Dyn residual k=0: pred=[9.37390283435265, 4.416721443706273, 0.36504387175747105, 3.000000029994342, 10.500000052551941], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.37390283435265, 4.416721443706273, 0.36504387175747105, 3.000000029994342, 10.500000052551941], res_norm=1.506e+01
2026-01-21 11:35:21,448 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:21,449 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:21,464 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:21,627 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:21,649 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:21,693 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:21,713 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:21,760 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:21,780 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:21,826 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:21,846 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:21,890 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:21,910 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:21,955 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:21,975 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:22,019 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:22,039 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:22,083 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:22,103 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:22,148 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:22,168 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:22,210 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:22,229 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:22,271 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:23,852 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 11:35:23,933 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 11:35:23,933 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:23,933 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 11:35:23,933 - INFO - integration_test -   Control dict from planner: {'a': -1.8845266330032982e-06, 'w': -0.010463538202575146}
2026-01-21 11:35:23,933 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:23,933 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:23,934 - INFO - integration_test - Step 37 completed in 2.735s
2026-01-21 11:35:23,998 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 11:35:24,001 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.37395881  4.41657481  0.36399752  2.99999984 10.50000003]
2026-01-21 11:35:24,002 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.180m, drift=0.246m)
2026-01-21 11:35:24,002 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 11:35:24,005 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:24,107 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.374, 4.417), path_start=(0.000, 0.000), dist=10.362m
2026-01-21 11:35:24,107 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.362m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:24,107 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 11:35:24,201 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:24,225 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:24,225 - INFO - integration_test - Warmstart k=0: x0=9.37395880512912 , y0=4.416574809680997 , psi0=0.3639975179372135 , v0=2.999999841541679 , spline0=10.500000033706675 , a0=0.0 , w0=0.0
2026-01-21 11:35:24,225 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:24,226 - INFO - integration_test - Dyn residual k=0: pred=[9.65430312841744, 4.5233786059268, 0.3639975179372135, 2.999999841541679, 10.800000017860842], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.65430312841744, 4.5233786059268, 0.3639975179372135, 2.999999841541679, 10.800000017860842], res_norm=1.547e+01
2026-01-21 11:35:24,227 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:24,228 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:24,243 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,404 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,427 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,471 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,493 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,537 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,560 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,604 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,624 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,673 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,693 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,740 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,761 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,805 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,825 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,870 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,891 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:24,937 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:24,959 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:25,003 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:25,022 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:25,065 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:26,067 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 11:35:26,302 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 11:35:26,302 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:26,302 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 11:35:26,302 - INFO - integration_test -   Control dict from planner: {'a': 1.8845812195184823e-06, 'w': -0.12461434095662419}
2026-01-21 11:35:26,302 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:26,302 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:26,304 - INFO - integration_test - Step 38 completed in 2.303s
2026-01-21 11:35:26,370 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 11:35:26,372 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.65496134  4.52162912  0.35153608  3.00000003 10.80000004]
2026-01-21 11:35:26,372 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.168m, drift=0.057m)
2026-01-21 11:35:26,372 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 11:35:26,375 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:26,478 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.655, 4.522), path_start=(0.000, 0.000), dist=10.661m
2026-01-21 11:35:26,479 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.661m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:26,479 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 11:35:26,576 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:26,600 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:26,600 - INFO - integration_test - Warmstart k=0: x0=9.654961337277728 , y0=4.5216291214671065 , psi0=0.3515360838415511 , v0=3.000000029999801 , spline0=10.800000036706654 , a0=0.0 , w0=0.0
2026-01-21 11:35:26,600 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:26,601 - INFO - integration_test - Dyn residual k=0: pred=[9.936614805601227, 4.624931229777301, 0.3515360838415511, 3.000000029999801, 11.100000039706634], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.936614805601227, 4.624931229777301, 0.3515360838415511, 3.000000029999801, 11.100000039706634], res_norm=1.589e+01
2026-01-21 11:35:26,601 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:26,602 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:26,617 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:26,780 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:26,801 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:26,849 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:26,869 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:26,915 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:26,936 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:26,981 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:27,001 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,047 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:27,067 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,111 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:27,130 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,178 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:27,197 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,242 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:27,262 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,304 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:27,324 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,369 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:27,388 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:27,432 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:28,169 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 11:35:28,264 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 11:35:28,264 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:28,265 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 11:35:28,265 - INFO - integration_test -   Control dict from planner: {'a': -2.9125574253071163e-06, 'w': -0.040549834584781855}
2026-01-21 11:35:28,265 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:28,265 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:28,266 - INFO - integration_test - Step 39 completed in 1.895s
2026-01-21 11:35:28,331 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 11:35:28,333 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.93682346  4.62435989  0.3474811   2.99999974 11.10000001]
2026-01-21 11:35:28,333 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.270m, drift=0.357m)
2026-01-21 11:35:28,334 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 11:35:28,337 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:28,443 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.937, 4.624), path_start=(0.000, 0.000), dist=10.960m
2026-01-21 11:35:28,443 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.960m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:28,443 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 11:35:28,543 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:28,569 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:28,569 - INFO - integration_test - Warmstart k=0: x0=9.936823463933207 , y0=4.624359892407359 , psi0=0.3474811003830729 , v0=2.9999997387440582 , spline0=11.100000010581061 , a0=0.0 , w0=0.0
2026-01-21 11:35:28,569 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:28,570 - INFO - integration_test - Dyn residual k=0: pred=[10.21889347646889, 4.726519044482751, 0.3474811003830729, 2.9999997387440582, 11.399999984455468], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.21889347646889, 4.726519044482751, 0.3474811003830729, 2.9999997387440582, 11.399999984455468], res_norm=1.630e+01
2026-01-21 11:35:28,571 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:28,572 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:28,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:28,752 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:28,772 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:28,815 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:28,837 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:28,881 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:28,903 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:28,948 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:28,968 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,012 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:29,031 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,079 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:29,098 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,145 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:29,167 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,212 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:29,234 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,282 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:29,302 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,346 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:29,367 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:29,416 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:30,200 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 11:35:30,456 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 11:35:30,456 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:30,456 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 11:35:30,456 - INFO - integration_test -   Control dict from planner: {'a': 2.911977120704449e-06, 'w': -0.08832701456731046}
2026-01-21 11:35:30,456 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:30,456 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:30,458 - INFO - integration_test - Step 40 completed in 2.125s
2026-01-21 11:35:30,524 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 11:35:30,531 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.21934099  4.72527201  0.3386484   3.00000003 11.40000001]
2026-01-21 11:35:30,531 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.160m, drift=0.169m)
2026-01-21 11:35:30,531 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 11:35:30,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:30,643 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.219, 4.725), path_start=(0.000, 0.000), dist=11.259m
2026-01-21 11:35:30,643 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.259m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:30,643 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 11:35:30,743 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:30,770 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:30,770 - INFO - integration_test - Warmstart k=0: x0=10.219340990223603 , y0=4.725272009007224 , psi0=0.33864839892634185 , v0=3.0000000299417704 , spline0=11.400000013575237 , a0=0.0 , w0=0.0
2026-01-21 11:35:30,770 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:30,771 - INFO - integration_test - Dyn residual k=0: pred=[10.5023023567814, 4.824935777911731, 0.33864839892634185, 3.0000000299417704, 11.700000016569414], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.5023023567814, 4.824935777911731, 0.33864839892634185, 3.0000000299417704, 11.700000016569414], res_norm=1.672e+01
2026-01-21 11:35:30,772 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:30,773 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:30,789 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:30,969 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:30,990 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,034 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,056 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,099 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,118 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,166 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,187 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,236 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,258 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,304 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,326 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,374 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,394 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,442 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,463 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,508 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:31,529 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,576 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:31,596 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:31,640 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:32,734 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 11:35:32,847 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 11:35:32,847 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:32,847 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 11:35:32,847 - INFO - integration_test -   Control dict from planner: {'a': -8.415401738918167e-07, 'w': -0.04249478421594567}
2026-01-21 11:35:32,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:32,847 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:32,849 - INFO - integration_test - Step 41 completed in 2.318s
2026-01-21 11:35:32,919 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 11:35:32,925 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.50251326  4.82433426  0.33439892  2.99999995 11.70000001]
2026-01-21 11:35:32,925 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.218m, drift=0.019m)
2026-01-21 11:35:32,926 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 11:35:32,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:33,043 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.503, 4.824), path_start=(0.000, 0.000), dist=11.558m
2026-01-21 11:35:33,043 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.558m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:33,044 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 11:35:33,166 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:33,201 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:33,201 - INFO - integration_test - Warmstart k=0: x0=10.502513260386014 , y0=4.824334258363649 , psi0=0.3343989205047473 , v0=2.999999945787753 , spline0=11.700000008154012 , a0=0.0 , w0=0.0
2026-01-21 11:35:33,201 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:33,203 - INFO - integration_test - Dyn residual k=0: pred=[10.785895581891483, 4.922794690037678, 0.3343989205047473, 2.999999945787753, 12.000000002732786], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.785895581891483, 4.922794690037678, 0.3343989205047473, 2.999999945787753, 12.000000002732786], res_norm=1.714e+01
2026-01-21 11:35:33,204 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:33,205 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:33,221 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,385 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,405 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,449 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,470 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,513 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,534 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,581 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,600 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,646 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,665 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,707 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,726 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,774 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,795 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,837 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,860 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,905 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:33,924 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:33,968 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:33,987 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:34,033 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:35,220 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 11:35:35,479 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 11:35:35,480 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:35,480 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 11:35:35,480 - INFO - integration_test -   Control dict from planner: {'a': 6.390257835973515e-07, 'w': -0.09075253285290445}
2026-01-21 11:35:35,480 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:35,480 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:35,481 - INFO - integration_test - Step 42 completed in 2.557s
2026-01-21 11:35:35,547 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 11:35:35,551 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.78633847  4.92150747  0.32532367  3.00000001 12.00000001]
2026-01-21 11:35:35,552 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.221m, drift=0.281m)
2026-01-21 11:35:35,552 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 11:35:35,555 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:35,669 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.786, 4.922), path_start=(0.000, 0.000), dist=11.856m
2026-01-21 11:35:35,669 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.856m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:35,669 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 11:35:35,771 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:35,799 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:35,799 - INFO - integration_test - Warmstart k=0: x0=10.786338468639068 , y0=4.921507465189992 , psi0=0.3253236672194568 , v0=3.000000009690331 , spline0=12.000000009123045 , a0=0.0 , w0=0.0
2026-01-21 11:35:35,799 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:35,800 - INFO - integration_test - Dyn residual k=0: pred=[11.070602667654748, 5.017392113280254, 0.3253236672194568, 3.000000009690331, 12.300000010092079], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.070602667654748, 5.017392113280254, 0.3253236672194568, 3.000000009690331, 12.300000010092079], res_norm=1.755e+01
2026-01-21 11:35:35,801 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:35,802 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:35,818 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:35,993 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,014 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,063 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,084 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,128 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,151 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,195 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,217 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,260 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,280 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,325 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,345 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,391 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,411 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,453 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,477 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,519 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:36,539 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,584 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:36,602 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:36,646 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:39,965 - WARNING - integration_test - Step 43: MPC solve failed
2026-01-21 11:35:39,965 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:35:40,054 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 11:35:40,055 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:40,055 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 11:35:40,055 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:40,055 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:40,055 - INFO - integration_test -   Planner output success: False
2026-01-21 11:35:40,055 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:40,057 - INFO - integration_test - Step 43 completed in 4.507s
2026-01-21 11:35:40,126 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 11:35:40,127 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.07060267  5.01739211  0.32532367  3.00000001 12.30000001]
2026-01-21 11:35:40,128 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.168m, drift=0.092m)
2026-01-21 11:35:40,128 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 11:35:40,131 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:40,231 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.071, 5.017), path_start=(0.000, 0.000), dist=12.155m
2026-01-21 11:35:40,231 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.155m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:40,231 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 11:35:40,324 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:40,349 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:40,350 - INFO - integration_test - Warmstart k=0: x0=11.070602667654748 , y0=5.017392113280254 , psi0=0.3253236672194568 , v0=3.000000009690331 , spline0=12.300000010092079 , a0=0.0 , w0=0.0
2026-01-21 11:35:40,350 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:40,351 - INFO - integration_test - Dyn residual k=0: pred=[11.354866866670429, 5.113276761370515, 0.3253236672194568, 3.000000009690331, 12.600000011061113], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.354866866670429, 5.113276761370515, 0.3253236672194568, 3.000000009690331, 12.600000011061113], res_norm=1.797e+01
2026-01-21 11:35:40,351 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:40,352 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:40,368 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,530 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,553 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,599 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,618 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,665 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,684 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,728 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,747 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,793 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,816 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,864 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,884 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,929 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:40,949 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:40,995 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:41,014 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:41,060 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:41,079 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:41,120 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:41,139 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:41,203 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:42,531 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 11:35:42,792 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 11:35:42,792 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:42,792 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 11:35:42,792 - INFO - integration_test -   Control dict from planner: {'a': 2.0282544835478293e-07, 'w': -0.15649118062895453}
2026-01-21 11:35:42,792 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:42,792 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:42,794 - INFO - integration_test - Step 44 completed in 2.667s
2026-01-21 11:35:42,863 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 11:35:42,865 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.35560551  5.11104865  0.30967455  3.00000003 12.60000001]
2026-01-21 11:35:42,865 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.283m, drift=0.096m)
2026-01-21 11:35:42,865 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 11:35:42,868 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:42,972 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.356, 5.111), path_start=(0.000, 0.000), dist=12.453m
2026-01-21 11:35:42,972 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.453m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:42,972 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 11:35:43,068 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:43,091 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:43,091 - INFO - integration_test - Warmstart k=0: x0=11.35560550508562 , y0=5.111048651510346 , psi0=0.3096745491565614 , v0=3.000000029972876 , spline0=12.600000013089367 , a0=0.0 , w0=0.0
2026-01-21 11:35:43,091 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:43,092 - INFO - integration_test - Dyn residual k=0: pred=[11.641335348252257, 5.202473257182683, 0.3096745491565614, 3.000000029972876, 12.900000016086656], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.641335348252257, 5.202473257182683, 0.3096745491565614, 3.000000029972876, 12.900000016086656], res_norm=1.839e+01
2026-01-21 11:35:43,093 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:43,094 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:43,108 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,272 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,294 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,338 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,362 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,412 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,432 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,478 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,497 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,541 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,563 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,608 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,631 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,676 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,695 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,740 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,760 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,805 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:43,825 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,866 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:43,886 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:43,926 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:47,001 - WARNING - integration_test - Step 45: MPC solve failed
2026-01-21 11:35:47,001 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:35:47,099 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 11:35:47,099 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:47,099 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 11:35:47,099 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:47,099 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:47,099 - INFO - integration_test -   Planner output success: False
2026-01-21 11:35:47,099 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:47,101 - INFO - integration_test - Step 45 completed in 4.236s
2026-01-21 11:35:47,173 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 11:35:47,184 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.64133535  5.20247326  0.30967455  3.00000003 12.90000002]
2026-01-21 11:35:47,184 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.181m, drift=0.204m)
2026-01-21 11:35:47,185 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 11:35:47,188 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:47,291 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.641, 5.202), path_start=(0.000, 0.000), dist=12.751m
2026-01-21 11:35:47,291 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.751m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:47,291 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 11:35:47,386 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:47,410 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:47,410 - INFO - integration_test - Warmstart k=0: x0=11.641335348252257 , y0=5.202473257182683 , psi0=0.3096745491565614 , v0=3.000000029972876 , spline0=12.900000016086656 , a0=0.0 , w0=0.0
2026-01-21 11:35:47,410 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:47,411 - INFO - integration_test - Dyn residual k=0: pred=[11.927065191418894, 5.293897862855019, 0.3096745491565614, 3.000000029972876, 13.200000019083944], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.927065191418894, 5.293897862855019, 0.3096745491565614, 3.000000029972876, 13.200000019083944], res_norm=1.880e+01
2026-01-21 11:35:47,412 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:47,413 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:47,427 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:47,760 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:47,782 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:47,826 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:47,846 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:47,893 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:47,913 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:47,959 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:47,979 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,025 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:48,045 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,088 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:48,109 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,155 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:48,177 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,222 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:48,241 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,288 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:48,307 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,349 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:48,371 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:48,415 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:51,494 - WARNING - integration_test - Step 46: MPC solve failed
2026-01-21 11:35:51,494 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:35:51,599 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 11:35:51,600 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:51,600 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 11:35:51,600 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:51,600 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:51,600 - INFO - integration_test -   Planner output success: False
2026-01-21 11:35:51,600 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:51,601 - INFO - integration_test - Step 46 completed in 4.418s
2026-01-21 11:35:51,668 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 11:35:51,676 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.92706519  5.29389786  0.30967455  3.00000003 13.20000002]
2026-01-21 11:35:51,677 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.207m, drift=0.016m)
2026-01-21 11:35:51,677 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 11:35:51,680 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:51,793 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.927, 5.294), path_start=(0.000, 0.000), dist=13.049m
2026-01-21 11:35:51,793 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.049m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:51,793 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 11:35:51,891 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:51,915 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:51,915 - INFO - integration_test - Warmstart k=0: x0=11.927065191418894 , y0=5.293897862855019 , psi0=0.3096745491565614 , v0=3.000000029972876 , spline0=13.200000019083944 , a0=0.0 , w0=0.0
2026-01-21 11:35:51,915 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:51,916 - INFO - integration_test - Dyn residual k=0: pred=[12.21279503458553, 5.385322468527355, 0.3096745491565614, 3.000000029972876, 13.500000022081233], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.21279503458553, 5.385322468527355, 0.3096745491565614, 3.000000029972876, 13.500000022081233], res_norm=1.922e+01
2026-01-21 11:35:51,917 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:51,918 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:51,935 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,101 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,122 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,167 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,190 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,238 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,258 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,303 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,325 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,369 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,389 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,434 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,456 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,501 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,520 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,567 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,589 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,635 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:52,659 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,700 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:52,719 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:52,764 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:55,811 - WARNING - integration_test - Step 47: MPC solve failed
2026-01-21 11:35:55,811 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 11:35:56,085 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 11:35:56,085 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:56,085 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 11:35:56,085 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:56,085 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:56,085 - INFO - integration_test -   Planner output success: False
2026-01-21 11:35:56,086 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:35:56,087 - INFO - integration_test - Step 47 completed in 4.411s
2026-01-21 11:35:56,159 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 11:35:56,161 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.21279503  5.38532247  0.30967455  3.00000003 13.50000002]
2026-01-21 11:35:56,162 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.242m, drift=0.316m)
2026-01-21 11:35:56,162 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 11:35:56,165 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:56,267 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.213, 5.385), path_start=(0.000, 0.000), dist=13.347m
2026-01-21 11:35:56,267 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.347m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:56,267 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 11:35:56,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:56,384 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:56,384 - INFO - integration_test - Warmstart k=0: x0=12.21279503458553 , y0=5.385322468527355 , psi0=0.3096745491565614 , v0=3.000000029972876 , spline0=13.500000022081233 , a0=0.0 , w0=0.0
2026-01-21 11:35:56,384 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:56,385 - INFO - integration_test - Dyn residual k=0: pred=[12.498524877752168, 5.476747074199691, 0.3096745491565614, 3.000000029972876, 13.800000025078521], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.498524877752168, 5.476747074199691, 0.3096745491565614, 3.000000029972876, 13.800000025078521], res_norm=1.964e+01
2026-01-21 11:35:56,386 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:56,386 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:56,402 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,560 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,582 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,625 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,645 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,691 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,710 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,752 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,774 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,818 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,838 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,883 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,902 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:56,947 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:56,968 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:57,012 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:57,034 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:57,078 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:57,098 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:57,140 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:57,161 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:57,205 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:58,350 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 11:35:58,463 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 11:35:58,463 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:35:58,463 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 11:35:58,463 - INFO - integration_test -   Control dict from planner: {'a': -4.584613354485852e-07, 'w': -0.3402841382493229}
2026-01-21 11:35:58,463 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:35:58,463 - INFO - integration_test -   Planner output success: True
2026-01-21 11:35:58,464 - INFO - integration_test - Step 48 completed in 2.304s
2026-01-21 11:35:58,527 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 11:35:58,535 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.5000251   5.47186843  0.27564614  2.99999998 13.80000002]
2026-01-21 11:35:58,535 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.166m, drift=0.127m)
2026-01-21 11:35:58,536 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 11:35:58,538 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:58,646 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.500, 5.472), path_start=(0.000, 0.000), dist=13.645m
2026-01-21 11:35:58,646 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.645m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:35:58,646 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 11:35:58,743 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:35:58,768 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:35:58,769 - INFO - integration_test - Warmstart k=0: x0=12.500025103278201 , y0=5.471868433099003 , psi0=0.2756461353316291 , v0=2.9999999841267426 , spline0=13.800000020493908 , a0=0.0 , w0=0.0
2026-01-21 11:35:58,769 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:35:58,770 - INFO - integration_test - Dyn residual k=0: pred=[12.788699963951325, 5.5535190538128525, 0.2756461353316291, 2.9999999841267426, 14.100000018906583], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.788699963951325, 5.5535190538128525, 0.2756461353316291, 2.9999999841267426, 14.100000018906583], res_norm=2.006e+01
2026-01-21 11:35:58,770 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:58,771 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:35:58,787 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:58,952 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:58,976 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,022 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,043 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,089 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,109 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,154 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,175 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,221 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,243 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,289 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,311 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,357 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,377 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,421 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,441 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,488 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:35:59,507 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,550 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:35:59,571 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:35:59,613 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:02,376 - WARNING - integration_test - Step 49: MPC solve failed
2026-01-21 11:36:02,376 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:36:02,664 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 11:36:02,664 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:02,664 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 11:36:02,664 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:02,664 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:02,664 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:02,664 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:02,666 - INFO - integration_test - Step 49 completed in 4.131s
2026-01-21 11:36:02,734 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 11:36:02,735 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.78869996  5.55351905  0.27564614  2.99999998 14.10000002]
2026-01-21 11:36:02,735 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.273m, drift=0.061m)
2026-01-21 11:36:02,736 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 11:36:02,738 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:02,839 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.789, 5.554), path_start=(0.000, 0.000), dist=13.942m
2026-01-21 11:36:02,839 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.942m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:02,840 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 11:36:02,937 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:02,962 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:02,962 - INFO - integration_test - Warmstart k=0: x0=12.788699963951325 , y0=5.5535190538128525 , psi0=0.2756461353316291 , v0=2.9999999841267426 , spline0=14.100000018906583 , a0=0.0 , w0=0.0
2026-01-21 11:36:02,962 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:02,963 - INFO - integration_test - Dyn residual k=0: pred=[13.07737482462445, 5.635169674526702, 0.2756461353316291, 2.9999999841267426, 14.400000017319257], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.07737482462445, 5.635169674526702, 0.2756461353316291, 2.9999999841267426, 14.400000017319257], res_norm=2.047e+01
2026-01-21 11:36:02,964 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:02,964 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:02,980 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,141 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,164 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,210 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,230 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,276 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,295 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,339 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,360 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,403 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,423 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,469 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,489 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,533 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,552 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,599 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,620 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,666 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:03,686 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,727 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:03,746 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:03,791 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:05,291 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 11:36:05,424 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 11:36:05,424 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:05,424 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 11:36:05,424 - INFO - integration_test -   Control dict from planner: {'a': 4.5872409351818055e-07, 'w': -0.06647075632617791}
2026-01-21 11:36:05,424 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:05,424 - INFO - integration_test -   Planner output success: True
2026-01-21 11:36:05,426 - INFO - integration_test - Step 50 completed in 2.691s
2026-01-21 11:36:05,495 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 11:36:05,503 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.07764407  5.63420966  0.26899906  3.00000003 14.40000002]
2026-01-21 11:36:05,504 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.190m, drift=0.239m)
2026-01-21 11:36:05,504 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 11:36:05,507 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:05,611 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.078, 5.634), path_start=(0.000, 0.000), dist=14.240m
2026-01-21 11:36:05,611 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.240m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:05,611 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 11:36:05,702 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:05,727 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:05,727 - INFO - integration_test - Warmstart k=0: x0=13.07764406898249 , y0=5.634209655589116 , psi0=0.26899905969901133 , v0=3.000000029999152 , spline0=14.400000021906498 , a0=0.0 , w0=0.0
2026-01-21 11:36:05,727 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:05,728 - INFO - integration_test - Dyn residual k=0: pred=[13.36685529060665, 5.713939644217049, 0.26899905969901133, 3.000000029999152, 14.700000024906414], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.36685529060665, 5.713939644217049, 0.26899905969901133, 3.000000029999152, 14.700000024906414], res_norm=2.089e+01
2026-01-21 11:36:05,729 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:05,730 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:05,744 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:05,906 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:05,926 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:05,972 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:05,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,040 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,061 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,104 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,124 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,170 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,190 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,236 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,256 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,303 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,322 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,367 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,388 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,432 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:06,454 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,496 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:06,515 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:06,558 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:09,079 - WARNING - integration_test - Step 51: MPC solve failed
2026-01-21 11:36:09,079 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:36:09,190 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 11:36:09,191 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:09,191 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 11:36:09,191 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:09,191 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:09,191 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:09,191 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:09,192 - INFO - integration_test - Step 51 completed in 3.689s
2026-01-21 11:36:09,289 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 11:36:09,292 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.36685529  5.71393964  0.26899906  3.00000003 14.70000002]
2026-01-21 11:36:09,293 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.205m, drift=0.051m)
2026-01-21 11:36:09,293 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 11:36:09,296 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:09,569 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.367, 5.714), path_start=(0.000, 0.000), dist=14.537m
2026-01-21 11:36:09,569 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.537m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:09,569 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 11:36:09,661 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:09,684 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:09,684 - INFO - integration_test - Warmstart k=0: x0=13.36685529060665 , y0=5.713939644217049 , psi0=0.26899905969901133 , v0=3.000000029999152 , spline0=14.700000024906414 , a0=0.0 , w0=0.0
2026-01-21 11:36:09,684 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:09,685 - INFO - integration_test - Dyn residual k=0: pred=[13.656066512230808, 5.793669632844983, 0.26899905969901133, 3.000000029999152, 15.00000002790633], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.656066512230808, 5.793669632844983, 0.26899905969901133, 3.000000029999152, 15.00000002790633], res_norm=2.131e+01
2026-01-21 11:36:09,685 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:09,686 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:09,702 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:09,862 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:09,883 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:09,925 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:09,947 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:09,991 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,011 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,057 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,078 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,128 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,151 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,195 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,217 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,265 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,286 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,331 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,354 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,401 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:10,421 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,467 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:10,487 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:10,528 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:13,470 - WARNING - integration_test - Step 52: MPC solve failed
2026-01-21 11:36:13,470 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:36:13,599 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 11:36:13,599 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:13,599 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 11:36:13,599 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:13,599 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:13,599 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:13,599 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:13,601 - INFO - integration_test - Step 52 completed in 4.309s
2026-01-21 11:36:13,675 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 11:36:13,683 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.65606651  5.79366963  0.26899906  3.00000003 15.00000003]
2026-01-21 11:36:13,684 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.251m, drift=0.351m)
2026-01-21 11:36:13,684 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 11:36:13,687 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:13,792 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.656, 5.794), path_start=(0.000, 0.000), dist=14.834m
2026-01-21 11:36:13,792 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.834m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:13,792 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 11:36:13,897 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:13,922 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:13,922 - INFO - integration_test - Warmstart k=0: x0=13.656066512230808 , y0=5.793669632844983 , psi0=0.26899905969901133 , v0=3.000000029999152 , spline0=15.00000002790633 , a0=0.0 , w0=0.0
2026-01-21 11:36:13,922 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:13,923 - INFO - integration_test - Dyn residual k=0: pred=[13.945277733854967, 5.873399621472917, 0.26899905969901133, 3.000000029999152, 15.300000030906245], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.945277733854967, 5.873399621472917, 0.26899905969901133, 3.000000029999152, 15.300000030906245], res_norm=2.173e+01
2026-01-21 11:36:13,924 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:13,924 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:13,939 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,102 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,124 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,167 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,188 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,234 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,254 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,299 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,318 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,364 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,385 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,429 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,453 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,496 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,516 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,561 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,581 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,628 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:14,647 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,691 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:14,711 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:14,754 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:15,713 - INFO - integration_test - Step 53: MPC solve successful
2026-01-21 11:36:16,031 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 11:36:16,032 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:16,032 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 11:36:16,032 - INFO - integration_test -   Control dict from planner: {'a': -1.5196506434682549e-06, 'w': -0.23271767712757016}
2026-01-21 11:36:16,032 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:16,032 - INFO - integration_test -   Planner output success: True
2026-01-21 11:36:16,033 - INFO - integration_test - Step 53 completed in 2.350s
2026-01-21 11:36:16,100 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 11:36:16,101 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.94617931  5.87002735  0.24572729  2.99999988 15.30000002]
2026-01-21 11:36:16,102 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.169m, drift=0.163m)
2026-01-21 11:36:16,102 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 11:36:16,105 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:16,205 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.946, 5.870), path_start=(0.000, 0.000), dist=15.131m
2026-01-21 11:36:16,205 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.131m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:16,205 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 11:36:16,301 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:16,324 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:16,324 - INFO - integration_test - Warmstart k=0: x0=13.946179309318575 , y0=5.870027346829206 , psi0=0.24572729198625431 , v0=2.9999998780340875 , spline0=15.300000015709738 , a0=0.0 , w0=0.0
2026-01-21 11:36:16,324 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:16,325 - INFO - integration_test - Dyn residual k=0: pred=[14.237167495229802, 5.9430058939656005, 0.24572729198625431, 2.9999998780340875, 15.600000003513147], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.237167495229802, 5.9430058939656005, 0.24572729198625431, 2.9999998780340875, 15.600000003513147], res_norm=2.215e+01
2026-01-21 11:36:16,326 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:16,326 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:16,341 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,502 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,522 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,566 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,586 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,633 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,652 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,696 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,716 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,761 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,782 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,826 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,846 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,891 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,911 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:16,955 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:16,975 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:17,021 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:17,040 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:17,082 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:17,102 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:17,143 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:18,376 - INFO - integration_test - Step 54: MPC solve successful
2026-01-21 11:36:18,497 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 11:36:18,497 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:18,497 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 11:36:18,498 - INFO - integration_test -   Control dict from planner: {'a': 1.5196557556670278e-06, 'w': -0.024627818157865588}
2026-01-21 11:36:18,498 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:18,498 - INFO - integration_test -   Planner output success: True
2026-01-21 11:36:18,499 - INFO - integration_test - Step 54 completed in 2.398s
2026-01-21 11:36:18,569 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 11:36:18,578 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.23725707  5.9426475   0.24326451  3.00000003 15.60000002]
2026-01-21 11:36:18,579 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.276m, drift=0.026m)
2026-01-21 11:36:18,579 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 11:36:18,582 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:18,690 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.237, 5.943), path_start=(0.000, 0.000), dist=15.428m
2026-01-21 11:36:18,690 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.428m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:18,690 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 11:36:18,789 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:18,814 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:18,814 - INFO - integration_test - Warmstart k=0: x0=14.237257073522112 , y0=5.9426475020038385 , psi0=0.24326451017046777 , v0=3.000000029999663 , spline0=15.600000018709704 , a0=0.0 , w0=0.0
2026-01-21 11:36:18,814 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:18,815 - INFO - integration_test - Dyn residual k=0: pred=[14.528424121775563, 6.014909191794161, 0.24326451017046777, 3.000000029999663, 15.900000021709669], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.528424121775563, 6.014909191794161, 0.24326451017046777, 3.000000029999663, 15.900000021709669], res_norm=2.256e+01
2026-01-21 11:36:18,816 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:18,817 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:18,832 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,004 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,029 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,075 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,096 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,138 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,163 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,208 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,228 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,276 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,296 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,341 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,362 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,408 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,429 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,474 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,494 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,538 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:19,558 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,603 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:19,623 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:19,666 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:22,452 - WARNING - integration_test - Step 55: MPC solve failed
2026-01-21 11:36:22,452 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:36:22,598 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 11:36:22,598 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:22,598 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 11:36:22,598 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:22,598 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:22,598 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:22,598 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:22,600 - INFO - integration_test - Step 55 completed in 4.022s
2026-01-21 11:36:22,673 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 11:36:22,682 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.52842412  6.01490919  0.24326451  3.00000003 15.90000002]
2026-01-21 11:36:22,683 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.188m, drift=0.274m)
2026-01-21 11:36:22,683 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 11:36:22,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:22,978 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.528, 6.015), path_start=(0.000, 0.000), dist=15.724m
2026-01-21 11:36:22,978 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.724m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:22,978 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 11:36:23,075 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:23,098 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:23,098 - INFO - integration_test - Warmstart k=0: x0=14.528424121775563 , y0=6.014909191794161 , psi0=0.24326451017046777 , v0=3.000000029999663 , spline0=15.900000021709669 , a0=0.0 , w0=0.0
2026-01-21 11:36:23,098 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:23,099 - INFO - integration_test - Dyn residual k=0: pred=[14.819591170029014, 6.087170881584484, 0.24326451017046777, 3.000000029999663, 16.200000024709635], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.819591170029014, 6.087170881584484, 0.24326451017046777, 3.000000029999663, 16.200000024709635], res_norm=2.298e+01
2026-01-21 11:36:23,099 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:23,100 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:23,115 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,278 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,299 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,342 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,366 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,411 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,432 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,478 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,498 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,544 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,564 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,609 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,631 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,676 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,696 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,745 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,767 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,815 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:23,836 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,879 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:23,899 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:23,939 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:26,724 - WARNING - integration_test - Step 56: MPC solve failed
2026-01-21 11:36:26,724 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:36:26,846 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 11:36:26,846 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:26,846 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 11:36:26,847 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:26,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:26,847 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:26,847 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:26,848 - INFO - integration_test - Step 56 completed in 4.166s
2026-01-21 11:36:26,919 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 11:36:26,929 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.81959117  6.08717088  0.24326451  3.00000003 16.20000002]
2026-01-21 11:36:26,929 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.206m, drift=0.086m)
2026-01-21 11:36:26,929 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 11:36:26,932 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:27,034 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.820, 6.087), path_start=(0.000, 0.000), dist=16.021m
2026-01-21 11:36:27,034 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=16.021m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:27,034 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 11:36:27,127 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:27,152 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:27,152 - INFO - integration_test - Warmstart k=0: x0=14.819591170029014 , y0=6.087170881584484 , psi0=0.24326451017046777 , v0=3.000000029999663 , spline0=16.200000024709635 , a0=0.0 , w0=0.0
2026-01-21 11:36:27,152 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:27,154 - INFO - integration_test - Dyn residual k=0: pred=[15.110758218282465, 6.159432571374807, 0.24326451017046777, 3.000000029999663, 16.5000000277096], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.110758218282465, 6.159432571374807, 0.24326451017046777, 3.000000029999663, 16.5000000277096], res_norm=2.340e+01
2026-01-21 11:36:27,154 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:27,155 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:27,170 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,331 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,353 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,397 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,418 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,464 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,483 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,528 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,548 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,595 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,618 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,662 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,682 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,726 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,745 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,804 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,825 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,871 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:27,892 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,933 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:27,953 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:27,998 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:29,954 - INFO - integration_test - Step 57: MPC solve successful
2026-01-21 11:36:30,075 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 11:36:30,075 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:30,076 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 11:36:30,076 - INFO - integration_test -   Control dict from planner: {'a': -1.1029117582541975e-05, 'w': -0.17193638673082595}
2026-01-21 11:36:30,076 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:30,076 - INFO - integration_test -   Planner output success: True
2026-01-21 11:36:30,077 - INFO - integration_test - Step 57 completed in 3.148s
2026-01-21 11:36:30,144 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 11:36:30,153 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.11136502  6.15692595  0.22607087  2.99999893 16.49999992]
2026-01-21 11:36:30,153 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.241m, drift=0.386m)
2026-01-21 11:36:30,153 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 11:36:30,157 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:30,456 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.111, 6.157), path_start=(0.000, 0.000), dist=16.318m
2026-01-21 11:36:30,456 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.318m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:30,456 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 11:36:30,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:30,575 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:30,575 - INFO - integration_test - Warmstart k=0: x0=15.111365024362312 , y0=6.156925949566103 , psi0=0.22607087149738517 , v0=2.999998927087905 , spline0=16.499999917418425 , a0=0.0 , w0=0.0
2026-01-21 11:36:30,575 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:30,576 - INFO - integration_test - Dyn residual k=0: pred=[15.40373130878326, 6.224170959486353, 0.22607087149738517, 2.999998927087905, 16.799999810127215], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.40373130878326, 6.224170959486353, 0.22607087149738517, 2.999998927087905, 16.799999810127215], res_norm=2.382e+01
2026-01-21 11:36:30,577 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:30,578 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:30,592 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:30,756 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:30,781 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:30,826 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:30,846 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:30,894 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:30,913 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:30,960 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:30,980 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,027 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:31,048 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,092 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:31,113 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,159 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:31,180 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,226 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:31,247 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,292 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:31,312 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,354 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:31,376 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:31,418 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:34,186 - WARNING - integration_test - Step 58: MPC solve failed
2026-01-21 11:36:34,186 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:36:34,307 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 11:36:34,307 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:34,307 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 11:36:34,307 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:34,307 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:34,307 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:34,307 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:34,309 - INFO - integration_test - Step 58 completed in 4.156s
2026-01-21 11:36:34,382 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 11:36:34,391 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.40373131  6.22417096  0.22607087  2.99999893 16.79999981]
2026-01-21 11:36:34,392 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.164m, drift=0.198m)
2026-01-21 11:36:34,392 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 11:36:34,396 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:34,504 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.404, 6.224), path_start=(0.000, 0.000), dist=16.614m
2026-01-21 11:36:34,504 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.614m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:34,504 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 11:36:34,600 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:34,624 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:34,624 - INFO - integration_test - Warmstart k=0: x0=15.40373130878326 , y0=6.224170959486353 , psi0=0.22607087149738517 , v0=2.999998927087905 , spline0=16.799999810127215 , a0=0.0 , w0=0.0
2026-01-21 11:36:34,624 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:34,625 - INFO - integration_test - Dyn residual k=0: pred=[15.69609759320421, 6.291415969406602, 0.22607087149738517, 2.999998927087905, 17.099999702836005], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.69609759320421, 6.291415969406602, 0.22607087149738517, 2.999998927087905, 17.099999702836005], res_norm=2.424e+01
2026-01-21 11:36:34,625 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:34,626 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:34,642 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:34,807 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:34,830 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:34,874 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:34,896 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:34,939 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:34,961 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,006 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:35,026 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,074 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:35,094 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,137 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:35,159 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,202 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:35,225 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,271 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:35,292 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,338 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:35,358 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,400 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:35,421 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:35,464 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:38,404 - WARNING - integration_test - Step 59: MPC solve failed
2026-01-21 11:36:38,404 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:36:38,725 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 11:36:38,726 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:38,726 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 11:36:38,726 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:38,726 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:38,726 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:38,726 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:38,727 - INFO - integration_test - Step 59 completed in 4.336s
2026-01-21 11:36:38,799 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 11:36:38,808 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.69609759  6.29141597  0.22607087  2.99999893 17.0999997 ]
2026-01-21 11:36:38,808 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.284m, drift=0.009m)
2026-01-21 11:36:38,809 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 11:36:38,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:38,919 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.696, 6.291), path_start=(0.000, 0.000), dist=16.910m
2026-01-21 11:36:38,919 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.910m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:38,919 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 11:36:39,013 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:39,038 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:39,038 - INFO - integration_test - Warmstart k=0: x0=15.69609759320421 , y0=6.291415969406602 , psi0=0.22607087149738517 , v0=2.999998927087905 , spline0=17.099999702836005 , a0=0.0 , w0=0.0
2026-01-21 11:36:39,038 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:39,039 - INFO - integration_test - Dyn residual k=0: pred=[15.988463877625158, 6.358660979326851, 0.22607087149738517, 2.999998927087905, 17.399999595544795], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.988463877625158, 6.358660979326851, 0.22607087149738517, 2.999998927087905, 17.399999595544795], res_norm=2.466e+01
2026-01-21 11:36:39,042 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:39,043 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:39,060 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,225 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,248 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,292 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,313 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,359 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,381 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,426 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,449 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,495 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,515 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,561 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,580 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,624 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,646 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,690 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,710 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,755 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:39,775 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,817 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:39,837 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:39,883 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:45,810 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 11:36:45,810 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 11:36:45,939 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 11:36:45,939 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:45,939 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 11:36:45,939 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:45,939 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:45,939 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:45,939 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:45,941 - INFO - integration_test - Step 60 completed in 7.133s
2026-01-21 11:36:46,019 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 11:36:46,020 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.98846388  6.35866098  0.22607087  2.99999893 17.3999996 ]
2026-01-21 11:36:46,021 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.164m, drift=0.309m)
2026-01-21 11:36:46,021 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 11:36:46,024 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:46,126 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.988, 6.359), path_start=(0.000, 0.000), dist=17.206m
2026-01-21 11:36:46,127 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.206m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:46,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 11:36:46,255 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:46,282 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:46,282 - INFO - integration_test - Warmstart k=0: x0=15.988463877625158 , y0=6.358660979326851 , psi0=0.22607087149738517 , v0=2.999998927087905 , spline0=17.399999595544795 , a0=0.0 , w0=0.0
2026-01-21 11:36:46,282 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:46,283 - INFO - integration_test - Dyn residual k=0: pred=[16.280830162046108, 6.4259059892471, 0.22607087149738517, 2.999998927087905, 17.699999488253585], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.280830162046108, 6.4259059892471, 0.22607087149738517, 2.999998927087905, 17.699999488253585], res_norm=2.507e+01
2026-01-21 11:36:46,284 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:46,285 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:46,299 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,460 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,480 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,526 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,547 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,590 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,611 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,654 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,677 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,721 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,741 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,787 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,806 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,853 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,874 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,919 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:46,939 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:46,983 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:47,005 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:47,047 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:47,070 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:47,112 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:48,561 - INFO - integration_test - Step 61: MPC solve successful
2026-01-21 11:36:48,706 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 11:36:48,706 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:48,706 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 11:36:48,706 - INFO - integration_test -   Control dict from planner: {'a': 1.102888586473488e-05, 'w': -0.2492183819091716}
2026-01-21 11:36:48,706 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:48,706 - INFO - integration_test -   Planner output success: True
2026-01-21 11:36:48,707 - INFO - integration_test - Step 61 completed in 2.687s
2026-01-21 11:36:48,781 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 11:36:48,785 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.28163784  6.42225608  0.20114903  3.00000003 17.6999996 ]
2026-01-21 11:36:48,786 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.207m, drift=0.121m)
2026-01-21 11:36:48,786 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 11:36:48,789 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:48,893 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.282, 6.422), path_start=(0.000, 0.000), dist=17.502m
2026-01-21 11:36:48,893 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.502m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:48,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 11:36:48,992 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:49,015 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:49,015 - INFO - integration_test - Warmstart k=0: x0=16.281637843535954 , y0=6.4222560759231895 , psi0=0.201149033306468 , v0=3.0000000299764915 , spline0=17.699999598542444 , a0=0.0 , w0=0.0
2026-01-21 11:36:49,015 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:49,016 - INFO - integration_test - Dyn residual k=0: pred=[16.575589142443228, 6.482194675083639, 0.201149033306468, 3.0000000299764915, 17.999999601540093], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.575589142443228, 6.482194675083639, 0.201149033306468, 3.0000000299764915, 17.999999601540093], res_norm=2.549e+01
2026-01-21 11:36:49,017 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:49,018 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:49,032 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,403 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,426 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,471 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,492 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,536 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,556 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,602 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,621 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,667 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,687 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,732 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,757 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,800 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,820 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,867 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,887 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,933 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:49,955 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:49,998 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:50,017 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:50,063 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:52,858 - WARNING - integration_test - Step 62: MPC solve failed
2026-01-21 11:36:52,858 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:36:52,994 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 11:36:52,995 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:52,995 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 11:36:52,995 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:52,995 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:52,995 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:52,995 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:52,996 - INFO - integration_test - Step 62 completed in 4.211s
2026-01-21 11:36:53,071 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 11:36:53,081 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.57558914  6.48219468  0.20114903  3.00000003 17.9999996 ]
2026-01-21 11:36:53,081 - DEBUG - integration_test - Step 63: Using propagated spline 18.0000 (close to path, dist=0.211m, drift=0.421m)
2026-01-21 11:36:53,082 - DEBUG - integration_test -   Set spline state to 18.0000
2026-01-21 11:36:53,085 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:53,190 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.576, 6.482), path_start=(0.000, 0.000), dist=17.798m
2026-01-21 11:36:53,190 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.798m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:53,190 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 11:36:53,288 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:53,312 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:53,312 - INFO - integration_test - Warmstart k=0: x0=16.575589142443228 , y0=6.482194675083639 , psi0=0.201149033306468 , v0=3.0000000299764915 , spline0=17.999999601540093 , a0=0.0 , w0=0.0
2026-01-21 11:36:53,312 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:53,313 - INFO - integration_test - Dyn residual k=0: pred=[16.8695404413505, 6.542133274244088, 0.201149033306468, 3.0000000299764915, 18.299999604537742], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.8695404413505, 6.542133274244088, 0.201149033306468, 3.0000000299764915, 18.299999604537742], res_norm=2.591e+01
2026-01-21 11:36:53,313 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:53,314 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:53,329 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,491 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,514 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,559 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,579 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,625 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,647 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,697 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,717 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,765 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,786 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,830 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,852 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,897 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,918 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:53,965 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:53,986 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:54,034 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:54,056 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:54,100 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:54,119 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:54,168 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:56,952 - WARNING - integration_test - Step 63: MPC solve failed
2026-01-21 11:36:56,952 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:36:57,104 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=18.000)
2026-01-21 11:36:57,105 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:36:57,105 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 11:36:57,105 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:57,105 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:36:57,105 - INFO - integration_test -   Planner output success: False
2026-01-21 11:36:57,105 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:36:57,106 - INFO - integration_test - Step 63 completed in 4.026s
2026-01-21 11:36:57,181 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 11:36:57,192 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.86954044  6.54213327  0.20114903  3.00000003 18.2999996 ]
2026-01-21 11:36:57,193 - DEBUG - integration_test - Step 64: Using propagated spline 18.3000 (close to path, dist=0.151m, drift=0.233m)
2026-01-21 11:36:57,195 - DEBUG - integration_test -   Set spline state to 18.3000
2026-01-21 11:36:57,200 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:57,309 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.870, 6.542), path_start=(0.000, 0.000), dist=18.094m
2026-01-21 11:36:57,309 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.094m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:36:57,309 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 11:36:57,617 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:36:57,640 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:36:57,641 - INFO - integration_test - Warmstart k=0: x0=16.8695404413505 , y0=6.542133274244088 , psi0=0.201149033306468 , v0=3.0000000299764915 , spline0=18.299999604537742 , a0=0.0 , w0=0.0
2026-01-21 11:36:57,641 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:36:57,642 - INFO - integration_test - Dyn residual k=0: pred=[17.163491740257776, 6.602071873404537, 0.201149033306468, 3.0000000299764915, 18.59999960753539], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.163491740257776, 6.602071873404537, 0.201149033306468, 3.0000000299764915, 18.59999960753539], res_norm=2.633e+01
2026-01-21 11:36:57,644 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:57,645 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:36:57,660 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:57,820 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:57,841 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:57,888 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:57,908 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:57,954 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:57,973 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,017 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:58,037 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,081 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:58,102 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,145 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:58,167 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,211 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:58,231 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,277 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:58,298 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,344 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:36:58,365 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,406 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:58,427 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:36:58,469 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:36:59,925 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 11:37:00,069 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.300)
2026-01-21 11:37:00,069 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:00,069 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 11:37:00,069 - INFO - integration_test -   Control dict from planner: {'a': -9.545869008716328e-05, 'w': -0.14859186663745005}
2026-01-21 11:37:00,069 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:00,069 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:00,071 - INFO - integration_test - Step 64 completed in 2.879s
2026-01-21 11:37:00,149 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 11:37:00,153 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.16392577  6.59988568  0.18628985  2.99999048 18.59999865]
2026-01-21 11:37:00,153 - DEBUG - integration_test - Step 65: Using propagated spline 18.6000 (close to path, dist=0.279m, drift=0.533m)
2026-01-21 11:37:00,153 - DEBUG - integration_test -   Set spline state to 18.6000
2026-01-21 11:37:00,158 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:00,262 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.164, 6.600), path_start=(0.000, 0.000), dist=18.389m
2026-01-21 11:37:00,262 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.389m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:00,262 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 11:37:00,359 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:00,383 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:00,383 - INFO - integration_test - Warmstart k=0: x0=17.16392576583243 , y0=6.599885678585125 , psi0=0.186289846642723 , v0=2.999990484107483 , spline0=18.59999865294849 , a0=0.0 , w0=0.0
2026-01-21 11:37:00,383 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:00,384 - INFO - integration_test - Dyn residual k=0: pred=[17.458734281773342, 6.655449767492189, 0.186289846642723, 2.999990484107483, 18.899997701359236], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.458734281773342, 6.655449767492189, 0.186289846642723, 2.999990484107483, 18.899997701359236], res_norm=2.675e+01
2026-01-21 11:37:00,385 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:00,385 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:00,401 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,565 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,585 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,628 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,651 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,696 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,719 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,765 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,785 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,830 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,850 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,898 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,917 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:00,964 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:00,985 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:01,026 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:01,049 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:01,096 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:01,116 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:01,161 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:01,180 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:01,224 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:02,647 - INFO - integration_test - Step 65: MPC solve successful
2026-01-21 11:37:02,788 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.600)
2026-01-21 11:37:02,789 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:02,789 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 11:37:02,789 - INFO - integration_test -   Control dict from planner: {'a': 9.544878538177742e-05, 'w': -0.09000379810676203}
2026-01-21 11:37:02,789 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:02,789 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:02,790 - INFO - integration_test - Step 65 completed in 2.637s
2026-01-21 11:37:02,863 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 11:37:02,873 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.45898082  6.65412242  0.17728947  3.00000003 18.89999866]
2026-01-21 11:37:02,874 - DEBUG - integration_test - Step 66: Using propagated spline 18.9000 (close to path, dist=0.138m, drift=0.344m)
2026-01-21 11:37:02,875 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-21 11:37:02,878 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:02,984 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.459, 6.654), path_start=(0.000, 0.000), dist=18.684m
2026-01-21 11:37:02,984 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.684m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:02,984 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 11:37:03,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:03,135 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:03,135 - INFO - integration_test - Warmstart k=0: x0=17.458980818310888 , y0=6.654122417541866 , psi0=0.1772894668320468 , v0=3.000000028986021 , spline0=18.899998655847092 , a0=0.0 , w0=0.0
2026-01-21 11:37:03,135 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:03,136 - INFO - integration_test - Dyn residual k=0: pred=[17.754278424258466, 6.7070310714728745, 0.1772894668320468, 3.000000028986021, 19.199998658745695], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.754278424258466, 6.7070310714728745, 0.1772894668320468, 3.000000028986021, 19.199998658745695], res_norm=2.716e+01
2026-01-21 11:37:03,136 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:03,137 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:03,155 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,320 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,343 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,387 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,409 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,454 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,476 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,521 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,541 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,586 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,606 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,653 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,675 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,719 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,742 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,788 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,808 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,853 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:03,875 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,921 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:03,940 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:03,982 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:05,430 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 11:37:05,793 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-21 11:37:05,793 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:05,793 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 11:37:05,793 - INFO - integration_test -   Control dict from planner: {'a': -2.855842484498235e-07, 'w': 0.017244346731729036}
2026-01-21 11:37:05,793 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:05,793 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:05,795 - INFO - integration_test - Step 66 completed in 2.922s
2026-01-21 11:37:05,863 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 11:37:05,872 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.75423266  6.70728566  0.1790139   3.         19.19999866]
2026-01-21 11:37:05,873 - DEBUG - integration_test - Step 67: Using propagated spline 19.2000 (close to path, dist=0.224m, drift=0.156m)
2026-01-21 11:37:05,874 - DEBUG - integration_test -   Set spline state to 19.2000
2026-01-21 11:37:05,877 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:05,983 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.754, 6.707), path_start=(0.000, 0.000), dist=18.979m
2026-01-21 11:37:05,984 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.979m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:05,984 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 11:37:06,080 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:06,108 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:06,108 - INFO - integration_test - Warmstart k=0: x0=17.754232657752688 , y0=6.707285655649448 , psi0=0.1790139015052197 , v0=3.000000000427596 , spline0=19.199998655889853 , a0=0.0 , w0=0.0
2026-01-21 11:37:06,108 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:06,109 - INFO - integration_test - Dyn residual k=0: pred=[18.04943858435849, 6.7607034515836215, 0.1790139015052197, 3.000000000427596, 19.499998655932615], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.04943858435849, 6.7607034515836215, 0.1790139015052197, 3.000000000427596, 19.499998655932615], res_norm=2.758e+01
2026-01-21 11:37:06,110 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:06,110 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:06,125 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,299 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,322 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,368 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,390 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,432 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,455 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,499 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,519 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,568 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,590 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,633 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,654 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,698 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,720 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,764 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,787 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,830 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:06,849 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,897 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:06,918 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:06,972 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:08,252 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 11:37:08,400 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=19.200)
2026-01-21 11:37:08,400 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:08,400 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 11:37:08,400 - INFO - integration_test -   Control dict from planner: {'a': 2.957122055521046e-07, 'w': -0.08950720149271213}
2026-01-21 11:37:08,400 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:08,400 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:08,401 - INFO - integration_test - Step 67 completed in 2.529s
2026-01-21 11:37:08,474 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 11:37:08,484 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[18.04967371  6.75938159  0.17006318  3.00000003 19.49999866]
2026-01-21 11:37:08,484 - DEBUG - integration_test - Step 68: Using propagated spline 19.5000 (close to path, dist=0.175m, drift=0.456m)
2026-01-21 11:37:08,485 - DEBUG - integration_test -   Set spline state to 19.5000
2026-01-21 11:37:08,489 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:08,600 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(18.050, 6.759), path_start=(0.000, 0.000), dist=19.274m
2026-01-21 11:37:08,600 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=19.274m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:08,600 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 11:37:08,700 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:08,725 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:08,725 - INFO - integration_test - Warmstart k=0: x0=18.049673706350177 , y0=6.7593815945792155 , psi0=0.1700631813559485 , v0=3.0000000299988168 , spline0=19.499998658889734 , a0=0.0 , w0=0.0
2026-01-21 11:37:08,725 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:08,726 - INFO - integration_test - Dyn residual k=0: pred=[18.345345932038438, 6.810154980880305, 0.1700631813559485, 3.0000000299988168, 19.799998661889614], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.345345932038438, 6.810154980880305, 0.1700631813559485, 3.0000000299988168, 19.799998661889614], res_norm=2.800e+01
2026-01-21 11:37:08,726 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:08,727 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:08,743 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:08,920 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:08,941 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:08,986 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,007 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,053 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,073 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,120 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,139 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,185 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,206 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,251 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,273 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,317 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,339 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,382 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,402 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,446 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:09,468 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,513 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:09,533 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:09,576 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:11,370 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 11:37:11,510 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.500)
2026-01-21 11:37:11,510 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:11,510 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 11:37:11,510 - INFO - integration_test -   Control dict from planner: {'a': -5.230694848888458e-07, 'w': -0.008158163973993002}
2026-01-21 11:37:11,510 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:11,510 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:11,512 - INFO - integration_test - Step 68 completed in 3.028s
2026-01-21 11:37:11,583 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 11:37:11,593 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[18.34536661  6.81003437  0.16924736  2.99999998 19.79999866]
2026-01-21 11:37:11,594 - DEBUG - integration_test - Step 69: Using propagated spline 19.8000 (close to path, dist=0.157m, drift=0.268m)
2026-01-21 11:37:11,595 - DEBUG - integration_test -   Set spline state to 19.8000
2026-01-21 11:37:11,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:11,700 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(18.345, 6.810), path_start=(0.000, 0.000), dist=19.569m
2026-01-21 11:37:11,700 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.569m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:11,700 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 11:37:11,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:11,825 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:11,825 - INFO - integration_test - Warmstart k=0: x0=18.34536660754222 , y0=6.810034367688685 , psi0=0.1692473649585492 , v0=2.999999977691868 , spline0=19.79999865665892 , a0=0.0 , w0=0.0
2026-01-21 11:37:11,825 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:11,826 - INFO - integration_test - Dyn residual k=0: pred=[18.64108015143776, 6.860566521989223, 0.1692473649585492, 2.999999977691868, 20.09999865442811], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.64108015143776, 6.860566521989223, 0.1692473649585492, 2.999999977691868, 20.09999865442811], res_norm=2.842e+01
2026-01-21 11:37:11,826 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:11,827 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:11,842 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,007 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,029 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,074 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,141 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,162 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,207 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,226 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,272 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,292 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,338 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,361 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,405 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,424 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,470 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,490 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,538 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:12,560 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,605 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:12,624 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:12,667 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:14,165 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 11:37:14,545 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.800)
2026-01-21 11:37:14,545 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:14,545 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 11:37:14,545 - INFO - integration_test -   Control dict from planner: {'a': 5.229828727811434e-07, 'w': -0.03976298399607334}
2026-01-21 11:37:14,545 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:14,545 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:14,547 - INFO - integration_test - Step 69 completed in 2.954s
2026-01-21 11:37:14,620 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 11:37:14,629 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[18.64117984  6.85997847  0.16527107  3.00000003 20.09999866]
2026-01-21 11:37:14,631 - DEBUG - integration_test - Step 70: Using propagated spline 20.1000 (close to path, dist=0.239m, drift=0.568m)
2026-01-21 11:37:14,631 - DEBUG - integration_test -   Set spline state to 20.1000
2026-01-21 11:37:14,635 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:14,747 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(18.641, 6.860), path_start=(0.000, 0.000), dist=19.863m
2026-01-21 11:37:14,747 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.863m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:14,747 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 11:37:14,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:14,906 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:14,906 - INFO - integration_test - Warmstart k=0: x0=18.641179840094917 , y0=6.859978467391704 , psi0=0.16527106655894186 , v0=3.0000000299901557 , spline0=20.09999865965794 , a0=0.0 , w0=0.0
2026-01-21 11:37:14,906 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:14,907 - INFO - integration_test - Dyn residual k=0: pred=[18.937091981791017, 6.909334380879724, 0.16527106655894186, 3.0000000299901557, 20.399998662656955], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.937091981791017, 6.909334380879724, 0.16527106655894186, 3.0000000299901557, 20.399998662656955], res_norm=2.884e+01
2026-01-21 11:37:14,908 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:14,909 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:14,925 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,092 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,114 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,162 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,182 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,228 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,248 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,293 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,316 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,361 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,382 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,425 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,450 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,495 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,516 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,563 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,583 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,628 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:15,647 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,690 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:15,710 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:15,755 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:18,185 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 11:37:18,332 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=20.100)
2026-01-21 11:37:18,332 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:18,332 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 11:37:18,332 - INFO - integration_test -   Control dict from planner: {'a': -4.913376963451636e-07, 'w': -0.012935329028755337}
2026-01-21 11:37:18,332 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:18,332 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:18,334 - INFO - integration_test - Step 70 completed in 3.705s
2026-01-21 11:37:18,404 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 11:37:18,414 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.93712382  6.90914298  0.16397753  2.99999998 20.39999866]
2026-01-21 11:37:18,416 - DEBUG - integration_test - Step 71: Using propagated spline 20.4000 (close to path, dist=0.118m, drift=0.380m)
2026-01-21 11:37:18,417 - DEBUG - integration_test -   Set spline state to 20.4000
2026-01-21 11:37:18,420 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:18,532 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.937, 6.909), path_start=(0.000, 0.000), dist=20.158m
2026-01-21 11:37:18,533 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=20.158m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:18,533 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 11:37:18,627 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:18,653 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:18,653 - INFO - integration_test - Warmstart k=0: x0=18.937123818590653 , y0=6.909142980694561 , psi0=0.16397753365606632 , v0=2.999999980856386 , spline0=20.399998657743577 , a0=0.0 , w0=0.0
2026-01-21 11:37:18,653 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:18,654 - INFO - integration_test - Dyn residual k=0: pred=[19.233099551355416, 6.9581160801037765, 0.16397753365606632, 2.999999980856386, 20.699998655829216], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.233099551355416, 6.9581160801037765, 0.16397753365606632, 2.999999980856386, 20.699998655829216], res_norm=2.925e+01
2026-01-21 11:37:18,655 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:18,656 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:18,673 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:18,842 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:18,865 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:18,917 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:18,938 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:18,983 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,005 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,052 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,075 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,122 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,142 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,191 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,221 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,286 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,308 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,356 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,379 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,422 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:19,441 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,485 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:19,505 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:19,550 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:21,123 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 11:37:21,273 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=20.400)
2026-01-21 11:37:21,273 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:21,273 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 11:37:21,274 - INFO - integration_test -   Control dict from planner: {'a': 4.914308967087278e-07, 'w': -0.01666398017460773}
2026-01-21 11:37:21,274 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:21,274 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:21,275 - INFO - integration_test - Step 71 completed in 2.861s
2026-01-21 11:37:21,345 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 11:37:21,359 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[19.23314022  6.95786945  0.16231114  3.00000003 20.69999866]
2026-01-21 11:37:21,359 - DEBUG - integration_test - Step 72: Using propagated spline 20.7000 (close to path, dist=0.252m, drift=0.191m)
2026-01-21 11:37:21,361 - DEBUG - integration_test -   Set spline state to 20.7000
2026-01-21 11:37:21,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:21,474 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(19.233, 6.958), path_start=(0.000, 0.000), dist=20.453m
2026-01-21 11:37:21,474 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=20.453m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:21,474 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 11:37:21,572 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:21,596 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:21,596 - INFO - integration_test - Warmstart k=0: x0=19.23314022112688 , y0=6.957869451206697 , psi0=0.16231113563860555 , v0=3.000000029999476 , spline0=20.699998660743525 , a0=0.0 , w0=0.0
2026-01-21 11:37:21,596 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:21,597 - INFO - integration_test - Dyn residual k=0: pred=[19.529197156434556, 7.006349270267781, 0.16231113563860555, 3.000000029999476, 20.999998663743472], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.529197156434556, 7.006349270267781, 0.16231113563860555, 3.000000029999476, 20.999998663743472], res_norm=2.967e+01
2026-01-21 11:37:21,597 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:21,598 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:21,614 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:21,783 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:21,804 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:21,849 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:21,870 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:21,913 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:21,935 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:21,981 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:22,002 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,047 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:22,069 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,115 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:22,136 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,181 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:22,203 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,246 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:22,269 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,313 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:22,335 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,380 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:22,399 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:22,443 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:24,003 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 11:37:24,461 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=20.700)
2026-01-21 11:37:24,461 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:24,461 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 11:37:24,461 - INFO - integration_test -   Control dict from planner: {'a': -1.7670709013984119e-06, 'w': -0.0075840823856422}
2026-01-21 11:37:24,462 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:24,462 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:24,463 - INFO - integration_test - Step 72 completed in 3.104s
2026-01-21 11:37:24,534 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 11:37:24,546 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[19.5292155   7.006237    0.16155273  2.99999985 20.99999865]
2026-01-21 11:37:24,547 - DEBUG - integration_test - Step 73: Using propagated spline 21.0000 (close to path, dist=0.131m, drift=0.491m)
2026-01-21 11:37:24,549 - DEBUG - integration_test -   Set spline state to 21.0000
2026-01-21 11:37:24,553 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:24,659 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(19.529, 7.006), path_start=(0.000, 0.000), dist=20.748m
2026-01-21 11:37:24,659 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=20.748m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:24,659 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 11:37:24,758 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:24,784 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:24,784 - INFO - integration_test - Warmstart k=0: x0=19.529215503079662 , y0=7.00623699819291 , psi0=0.16155272740004134 , v0=2.9999998532923855 , spline0=20.999998646072765 , a0=0.0 , w0=0.0
2026-01-21 11:37:24,784 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:24,785 - INFO - integration_test - Dyn residual k=0: pred=[19.825309103293918, 7.054492268471962, 0.16155272740004134, 2.9999998532923855, 21.299998631402005], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.825309103293918, 7.054492268471962, 0.16155272740004134, 2.9999998532923855, 21.299998631402005], res_norm=3.009e+01
2026-01-21 11:37:24,786 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:24,786 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:24,801 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:24,968 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:24,989 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,036 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,057 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,102 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,125 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,172 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,192 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,237 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,259 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,305 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,326 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,373 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,393 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,438 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,458 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,502 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:25,524 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,571 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:25,590 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:25,636 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:27,833 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 11:37:27,994 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=21.000)
2026-01-21 11:37:27,994 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:27,994 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 11:37:27,994 - INFO - integration_test -   Control dict from planner: {'a': 1.74759611033943e-06, 'w': -0.012856373506724512}
2026-01-21 11:37:27,994 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:27,994 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:27,995 - INFO - integration_test - Step 73 completed in 3.451s
2026-01-21 11:37:28,065 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 11:37:28,077 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[19.82534005  7.05430192  0.16026709  3.00000003 21.29999865]
2026-01-21 11:37:28,078 - DEBUG - integration_test - Step 74: Using propagated spline 21.3000 (close to path, dist=0.173m, drift=0.303m)
2026-01-21 11:37:28,079 - DEBUG - integration_test -   Set spline state to 21.3000
2026-01-21 11:37:28,083 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:28,199 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(19.825, 7.054), path_start=(0.000, 0.000), dist=21.043m
2026-01-21 11:37:28,199 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=21.043m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:28,199 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 11:37:28,296 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:28,323 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:28,323 - INFO - integration_test - Warmstart k=0: x0=19.825340049736926 , y0=7.054301922107205 , psi0=0.1602670900493689 , v0=3.0000000280519967 , spline0=21.299998648877963 , a0=0.0 , w0=0.0
2026-01-21 11:37:28,323 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:28,324 - INFO - integration_test - Dyn residual k=0: pred=[20.12149546126283, 7.10217648640856, 0.1602670900493689, 3.0000000280519967, 21.599998651683162], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.12149546126283, 7.10217648640856, 0.1602670900493689, 3.0000000280519967, 21.599998651683162], res_norm=3.051e+01
2026-01-21 11:37:28,325 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:28,326 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:28,356 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,552 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:28,574 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,623 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:28,646 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,700 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:28,724 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,775 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:28,797 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,841 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:28,863 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,910 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:28,931 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:28,984 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:29,004 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:29,051 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:29,072 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:29,118 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:29,143 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:29,189 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:29,210 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:29,254 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:32,451 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 11:37:32,622 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=21.300)
2026-01-21 11:37:32,622 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:32,622 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 11:37:32,622 - INFO - integration_test -   Control dict from planner: {'a': 1.939257472065797e-08, 'w': -0.005506480258987461}
2026-01-21 11:37:32,622 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:32,622 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:32,624 - INFO - integration_test - Step 74 completed in 4.546s
2026-01-21 11:37:32,694 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 11:37:32,704 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[20.12150863  7.10209495  0.15971644  3.00000003 21.59999865]
2026-01-21 11:37:32,704 - DEBUG - integration_test - Step 75: Using propagated spline 21.6000 (close to path, dist=0.184m, drift=0.603m)
2026-01-21 11:37:32,705 - DEBUG - integration_test -   Set spline state to 21.6000
2026-01-21 11:37:32,709 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:32,822 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(20.122, 7.102), path_start=(0.000, 0.000), dist=21.338m
2026-01-21 11:37:32,822 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=21.338m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:32,822 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 11:37:32,919 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:32,944 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:32,944 - INFO - integration_test - Warmstart k=0: x0=20.121508627409007 , y0=7.102094945310333 , psi0=0.15971644202347016 , v0=3.0000000299912544 , spline0=21.59999865187709 , a0=0.0 , w0=0.0
2026-01-21 11:37:32,944 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:32,945 - INFO - integration_test - Dyn residual k=0: pred=[20.417690356260234, 7.149806424999953, 0.15971644202347016, 3.0000000299912544, 21.899998654876217], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.417690356260234, 7.149806424999953, 0.15971644202347016, 3.0000000299912544, 21.899998654876217], res_norm=3.093e+01
2026-01-21 11:37:32,946 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:32,946 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:32,964 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,128 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,151 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,198 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,218 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,265 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,287 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,333 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,357 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,403 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,423 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,469 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,489 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,537 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,558 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,603 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,628 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,678 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:33,702 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,749 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:33,771 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:33,815 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:36,049 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 11:37:36,454 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=21.600)
2026-01-21 11:37:36,455 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:36,455 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 11:37:36,455 - INFO - integration_test -   Control dict from planner: {'a': -1.992244321726388e-06, 'w': -0.013477073882526959}
2026-01-21 11:37:36,455 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:36,455 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:36,457 - INFO - integration_test - Step 75 completed in 3.753s
2026-01-21 11:37:36,530 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 11:37:36,540 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[20.41772241  7.14960683  0.15836873  2.99999983 21.89999863]
2026-01-21 11:37:36,542 - DEBUG - integration_test - Step 76: Using propagated spline 21.9000 (close to path, dist=0.104m, drift=0.415m)
2026-01-21 11:37:36,542 - DEBUG - integration_test -   Set spline state to 21.9000
2026-01-21 11:37:36,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:36,653 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(20.418, 7.150), path_start=(0.000, 0.000), dist=21.633m
2026-01-21 11:37:36,653 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=21.633m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:36,653 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 11:37:36,750 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:36,775 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:36,775 - INFO - integration_test - Warmstart k=0: x0=20.417722407316464 , y0=7.149606825859485 , psi0=0.15836873463521747 , v0=2.9999998307668223 , spline0=21.89999863495377 , a0=0.0 , w0=0.0
2026-01-21 11:37:36,775 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:36,776 - INFO - integration_test - Dyn residual k=0: pred=[20.71396814860913, 7.1969190928942455, 0.15836873463521747, 2.9999998307668223, 22.199998618030452], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.71396814860913, 7.1969190928942455, 0.15836873463521747, 2.9999998307668223, 22.199998618030452], res_norm=3.135e+01
2026-01-21 11:37:36,776 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:36,777 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:36,796 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:36,970 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:36,991 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,037 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,058 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,102 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,124 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,172 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,193 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,240 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,263 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,310 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,332 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,380 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,401 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,444 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,467 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,513 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:37,534 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,583 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:37,604 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:37,649 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:39,984 - INFO - integration_test - Step 76: MPC solve successful
2026-01-21 11:37:40,214 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=21.900)
2026-01-21 11:37:40,214 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:40,214 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 11:37:40,214 - INFO - integration_test -   Control dict from planner: {'a': 1.9521012621120947e-06, 'w': -0.04791087172509567}
2026-01-21 11:37:40,214 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:40,214 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:40,216 - INFO - integration_test - Step 76 completed in 3.676s
2026-01-21 11:37:40,292 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 11:37:40,305 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[20.71408036  7.19620925  0.15357765  3.00000003 22.19999864]
2026-01-21 11:37:40,306 - DEBUG - integration_test - Step 77: Using propagated spline 22.2000 (close to path, dist=0.254m, drift=0.715m)
2026-01-21 11:37:40,306 - DEBUG - integration_test -   Set spline state to 22.2000
2026-01-21 11:37:40,312 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:40,428 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(20.714, 7.196), path_start=(0.000, 0.000), dist=21.928m
2026-01-21 11:37:40,428 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=21.928m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:40,428 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 11:37:40,540 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:40,570 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:40,570 - INFO - integration_test - Warmstart k=0: x0=20.714080363271805 , y0=7.19620924516994 , psi0=0.1535776474627079 , v0=3.0000000259769486 , spline0=22.199998637551467 , a0=0.0 , w0=0.0
2026-01-21 11:37:40,570 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:40,572 - INFO - integration_test - Dyn residual k=0: pred=[21.010549400101862, 7.242101638435874, 0.1535776474627079, 3.0000000259769486, 22.499998640149162], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.010549400101862, 7.242101638435874, 0.1535776474627079, 3.0000000259769486, 22.499998640149162], res_norm=3.177e+01
2026-01-21 11:37:40,573 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:40,573 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:40,591 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:40,775 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:40,798 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:40,847 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:40,871 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:40,919 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:40,941 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:40,992 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:41,013 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,059 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:41,080 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,125 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:41,146 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,194 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:41,214 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,260 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:41,283 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,326 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:41,350 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,393 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:41,412 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:41,456 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:42,801 - INFO - integration_test - Step 77: MPC solve successful
2026-01-21 11:37:42,986 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=22.200)
2026-01-21 11:37:42,986 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:42,986 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 11:37:42,986 - INFO - integration_test -   Control dict from planner: {'a': 3.825914466974595e-08, 'w': -0.04491245215906441}
2026-01-21 11:37:42,986 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:42,986 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:42,987 - INFO - integration_test - Step 77 completed in 2.682s
2026-01-21 11:37:43,058 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 11:37:43,068 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[21.01065146  7.24143573  0.1490864   3.00000003 22.49999864]
2026-01-21 11:37:43,069 - DEBUG - integration_test - Step 78: Using propagated spline 22.5000 (close to path, dist=0.075m, drift=0.526m)
2026-01-21 11:37:43,070 - DEBUG - integration_test -   Set spline state to 22.5000
2026-01-21 11:37:43,073 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:43,181 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(21.011, 7.241), path_start=(0.000, 0.000), dist=22.224m
2026-01-21 11:37:43,181 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=22.224m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:43,181 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 11:37:43,283 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:43,308 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:43,308 - INFO - integration_test - Warmstart k=0: x0=21.010651460421155 , y0=7.241435727727421 , psi0=0.14908640224680147 , v0=3.000000029802863 , spline0=22.499998640531754 , a0=0.0 , w0=0.0
2026-01-21 11:37:43,308 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:43,309 - INFO - integration_test - Dyn residual k=0: pred=[21.30732362085285, 7.285996147529784, 0.14908640224680147, 3.000000029802863, 22.79999864351204], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.30732362085285, 7.285996147529784, 0.14908640224680147, 3.000000029802863, 22.79999864351204], res_norm=3.219e+01
2026-01-21 11:37:43,310 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:43,311 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:43,326 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:43,743 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:43,767 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:43,811 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:43,834 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:43,879 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:43,900 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:43,947 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:43,969 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,013 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:44,033 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,082 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:44,103 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,152 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:44,175 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,219 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:44,241 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,286 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:44,307 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,351 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:44,374 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:44,417 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:46,224 - INFO - integration_test - Step 78: MPC solve successful
2026-01-21 11:37:46,393 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=22.500)
2026-01-21 11:37:46,393 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:46,393 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 11:37:46,393 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000195962144, 'w': -0.18571540351296334}
2026-01-21 11:37:46,393 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:46,393 - INFO - integration_test -   Planner output success: True
2026-01-21 11:37:46,395 - INFO - integration_test - Step 78 completed in 3.326s
2026-01-21 11:37:46,466 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 11:37:46,479 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[21.29781372  7.28187605  0.13051486  2.80000003 22.77999864]
2026-01-21 11:37:46,479 - DEBUG - integration_test - Step 79: Using propagated spline 22.7800 (close to path, dist=0.214m, drift=0.318m)
2026-01-21 11:37:46,481 - DEBUG - integration_test -   Set spline state to 22.7800
2026-01-21 11:37:46,485 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:46,594 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(21.298, 7.282), path_start=(0.000, 0.000), dist=22.508m
2026-01-21 11:37:46,594 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=22.508m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:37:46,594 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 11:37:46,690 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:37:46,715 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:37:46,715 - INFO - integration_test - Warmstart k=0: x0=21.29781372446928 , y0=7.281876048970633 , psi0=0.13051486189550515 , v0=2.8000000278432413 , spline0=22.779998643316077 , a0=0.0 , w0=0.0
2026-01-21 11:37:46,715 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:37:46,716 - INFO - integration_test - Dyn residual k=0: pred=[21.57543233244194, 7.318316549331379, 0.13051486189550515, 2.8000000278432413, 23.0599986461004], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.57543233244194, 7.318316549331379, 0.13051486189550515, 2.8000000278432413, 23.0599986461004], res_norm=3.254e+01
2026-01-21 11:37:46,716 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:46,717 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:37:46,732 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:46,904 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:46,924 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:46,973 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:46,994 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,039 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,068 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,114 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,135 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,202 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,239 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,289 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,310 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,359 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,381 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,427 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,451 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,496 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:37:47,517 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,566 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:47,587 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:37:47,633 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:37:50,758 - WARNING - integration_test - Step 79: MPC solve failed
2026-01-21 11:37:50,758 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:37:50,943 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=22.780)
2026-01-21 11:37:50,943 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:37:50,943 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 11:37:50,943 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:37:50,943 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:37:50,943 - INFO - integration_test -   Planner output success: False
2026-01-21 11:37:50,943 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:37:50,945 - INFO - integration_test - Goal reached at step 79!
2026-01-21 11:37:50,945 - INFO - integration_test - Step 79 completed in 4.466s
2026-01-21 11:37:51,033 - INFO - integration_test - Goal reached at step 79, added 3 extra frames for visualization
2026-01-21 11:37:51,035 - INFO - integration_test - Saving test results...
2026-01-21 11:37:51,037 - INFO - integration_test - Saved 84 vehicle states to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 11:37:51,037 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 11:37:51,037 - INFO - integration_test - Saved 91 states for obstacle 0 to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 11:37:51,037 - INFO - integration_test - Saved 91 states for obstacle 1 to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 11:37:51,038 - INFO - integration_test - Saved 91 states for obstacle 2 to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 11:37:51,038 - INFO - integration_test - Saved 91 states for obstacle 3 to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 11:37:51,038 - INFO - integration_test - Saved state history: 84 vehicle states, 4 obstacles
2026-01-21 11:37:51,038 - INFO - integration_test - Creating animation...
2026-01-21 11:37:51,084 - DEBUG - integration_test - Creating animation with 84 frames (range: 0 to 83)
2026-01-21 11:37:51,085 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 11:37:51,189 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:37:51,189 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 11:37:51,189 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:37:51,477 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 11:37:51,478 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 11:37:51,581 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:37:51,581 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 11:37:51,581 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:37:51,611 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 11:37:51,772 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 11:37:51,874 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:37:51,874 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 11:37:51,874 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:37:51,904 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 11:37:51,948 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 11:37:52,046 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:37:52,046 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 11:37:52,046 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:37:52,078 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 11:38:16,778 - INFO - integration_test - Saved animation with 84 frames at 10.00 fps to test_outputs/20260121_113401_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.40s, size: 1496032 bytes)
2026-01-21 11:38:16,825 - INFO - integration_test - Animation created successfully
2026-01-21 11:38:16,826 - INFO - integration_test - Test completed successfully
