2026-01-21 11:40:40,906 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 11:40:40,906 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 11:40:40,906 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 11:40:40,906 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 11:40:40,906 - INFO - integration_test - Creating objective module: contouring
2026-01-21 11:40:40,913 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 11:40:40,913 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 11:40:40,913 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 11:40:40,921 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 11:40:40,922 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 11:40:40,929 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 11:40:40,929 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 11:40:40,954 - INFO - integration_test - Setting solver on all modules...
2026-01-21 11:40:40,954 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 11:40:40,954 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 11:40:40,954 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 11:40:40,954 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 11:40:40,954 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 11:40:40,954 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 11:40:40,956 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 11:40:40,956 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 11:40:40,957 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 11:40:40,957 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 11:40:40,957 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 11:40:40,957 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 11:40:40,957 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 11:40:40,958 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 11:40:40,958 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 11:40:40,958 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 11:40:40,958 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 11:40:40,958 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 11:40:40,959 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 11:40:40,959 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 11:40:40,963 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:40,983 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 11:40:40,983 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 11:40:41,138 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:41,168 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:41,168 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 11:40:41,168 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:41,169 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 11:40:41,170 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:41,172 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:41,190 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,377 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,400 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,449 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,472 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,522 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,544 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,603 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,633 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,703 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,736 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,804 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,833 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,895 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:41,921 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:41,983 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:42,011 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:42,074 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:42,099 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:42,147 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:42,170 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:42,219 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:43,310 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 11:40:43,545 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 11:40:43,545 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:43,545 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 11:40:43,545 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 11:40:43,545 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019700157, 'w': 0.799999999503587}
2026-01-21 11:40:43,545 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:43,545 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:43,546 - INFO - integration_test - Step 0 completed in 2.588s
2026-01-21 11:40:43,602 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 11:40:43,603 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 11:40:43,603 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 11:40:43,603 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 11:40:43,606 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:43,708 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 11:40:43,708 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 11:40:43,807 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:43,832 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:43,832 - INFO - integration_test - Warmstart k=0: x0=0.10987737537968616 , y0=0.004530845055511459 , psi0=0.0799999999503587 , v0=1.2000000019700157 , spline0=0.12000000019700158 , a0=0.0 , w0=0.0
2026-01-21 11:40:43,832 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:43,833 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033284803, 0.014120608341617597, 0.0799999999503587, 1.2000000019700157, 0.24000000039400315], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033284803, 0.014120608341617597, 0.0799999999503587, 1.2000000019700157, 0.24000000039400315], res_norm=1.248e+00
2026-01-21 11:40:43,833 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:43,834 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:43,849 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:43,993 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,061 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,081 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,127 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,147 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,194 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,217 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,262 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,284 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,329 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,350 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,396 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,417 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,463 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,485 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,528 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:44,548 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,594 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:44,613 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:44,657 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:45,279 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 11:40:45,373 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 11:40:45,374 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:45,374 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 11:40:45,374 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001895043, 'w': 0.7999999621108763}
2026-01-21 11:40:45,374 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:45,374 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:45,375 - INFO - integration_test - Step 1 completed in 1.772s
2026-01-21 11:40:45,432 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 11:40:45,433 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-21 11:40:45,433 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 11:40:45,433 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 11:40:45,436 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:45,545 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 11:40:45,545 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 11:40:45,644 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:45,671 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:45,671 - INFO - integration_test - Warmstart k=0: x0=0.23889212821578443 , y0=0.020221621500416086 , psi0=0.15999999616144633 , v0=1.4000000038650586 , spline0=0.2600000005835075 , a0=0.0 , w0=0.0
2026-01-21 11:40:45,671 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:45,672 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039483555585, 0.04252616995745445, 0.15999999616144633, 1.4000000038650586, 0.4000000009700133], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039483555585, 0.04252616995745445, 0.15999999616144633, 1.4000000038650586, 0.4000000009700133], res_norm=1.513e+00
2026-01-21 11:40:45,673 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:45,674 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:45,691 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:45,838 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:45,862 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:45,910 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:45,931 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:45,977 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:45,998 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,043 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:46,064 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,109 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:46,130 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,177 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:46,199 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,243 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:46,264 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,311 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:46,331 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,378 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:46,399 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,444 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:46,464 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:46,508 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:47,138 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 11:40:47,190 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 11:40:47,191 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:47,191 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 11:40:47,191 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019920559, 'w': 0.8000000051229581}
2026-01-21 11:40:47,191 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:47,191 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:47,192 - INFO - integration_test - Step 2 completed in 1.760s
2026-01-21 11:40:47,253 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 11:40:47,254 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-21 11:40:47,255 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 11:40:47,255 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 11:40:47,257 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:47,353 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 11:40:47,353 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 11:40:47,449 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:47,473 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:47,473 - INFO - integration_test - Warmstart k=0: x0=0.3858364358572806 , y0=0.05014471567781548 , psi0=0.23999999667374214 , v0=1.6000000058571144 , spline0=0.42000000116921893 , a0=0.0 , w0=0.0
2026-01-21 11:40:47,473 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:47,474 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505125290348, 0.08817713552843487, 0.23999999667374214, 1.6000000058571144, 0.5800000017549304], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505125290348, 0.08817713552843487, 0.23999999667374214, 1.6000000058571144, 0.5800000017549304], res_norm=1.804e+00
2026-01-21 11:40:47,474 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:47,475 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:47,491 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:47,696 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:47,715 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:47,761 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:47,782 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:47,833 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:47,854 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:47,901 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:47,920 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:47,965 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:47,985 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:48,032 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:48,052 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:48,098 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:48,118 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:48,165 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:48,187 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:48,236 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:48,257 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:48,301 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:48,320 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:48,365 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:49,000 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 11:40:49,049 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 11:40:49,050 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:49,050 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 11:40:49,050 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999532, 'w': 0.8000000099608875}
2026-01-21 11:40:49,050 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:49,050 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:49,052 - INFO - integration_test - Step 3 completed in 1.798s
2026-01-21 11:40:49,108 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 11:40:49,109 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-21 11:40:49,109 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 11:40:49,109 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 11:40:49,112 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:49,215 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 11:40:49,215 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 11:40:49,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:49,331 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:49,331 - INFO - integration_test - Warmstart k=0: x0=0.5491354615278103 , y0=0.09724075576845673 , psi0=0.3199999976698309 , v0=1.8000000078570677 , spline0=0.6000000019549256 , a0=0.0 , w0=0.0
2026-01-21 11:40:49,331 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:49,332 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978376604093, 0.15386273652837676, 0.3199999976698309, 1.8000000078570677, 0.7800000027406324], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978376604093, 0.15386273652837676, 0.3199999976698309, 1.8000000078570677, 0.7800000027406324], res_norm=2.120e+00
2026-01-21 11:40:49,333 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:49,334 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:49,349 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,494 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,514 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,561 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,584 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,632 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,652 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,700 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,720 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,764 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,785 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,831 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,851 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,895 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,916 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:49,961 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:49,982 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:50,029 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:50,050 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:50,093 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:50,113 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:50,155 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:50,810 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 11:40:50,859 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 11:40:50,859 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:50,859 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 11:40:50,859 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019995739, 'w': 0.8000000094249617}
2026-01-21 11:40:50,859 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:50,860 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:50,861 - INFO - integration_test - Step 4 completed in 1.752s
2026-01-21 11:40:50,920 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 11:40:50,920 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 11:40:50,921 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 11:40:50,921 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 11:40:50,924 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:51,096 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 11:40:51,096 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 11:40:51,190 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:51,215 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:51,215 - INFO - integration_test - Warmstart k=0: x0=0.7268614891540882 , y0=0.1642797668625781 , psi0=0.39999999861232705 , v0=2.0000000098566417 , spline0=0.8000000029405898 , a0=0.0 , w0=0.0
2026-01-21 11:40:51,215 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:51,216 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736889705991, 0.24216343545251762, 0.39999999861232705, 2.0000000098566417, 1.000000003926254], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736889705991, 0.24216343545251762, 0.39999999861232705, 2.0000000098566417, 1.000000003926254], res_norm=2.459e+00
2026-01-21 11:40:51,216 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:51,217 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:51,233 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,380 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,401 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,448 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,470 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,516 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,535 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,581 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,602 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,652 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,672 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,715 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,737 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,782 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,804 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,853 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,874 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,922 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:51,942 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:51,986 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:52,007 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:52,053 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:52,677 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 11:40:52,724 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 11:40:52,724 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:52,724 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 11:40:52,724 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198119525, 'w': 0.799999938739587}
2026-01-21 11:40:52,724 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:52,724 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:52,726 - INFO - integration_test - Step 5 completed in 1.806s
2026-01-21 11:40:52,783 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 11:40:52,783 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.25382381 0.47999999 2.20000001 1.02      ]
2026-01-21 11:40:52,784 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 11:40:52,784 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 11:40:52,787 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:52,891 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 11:40:52,891 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 11:40:52,982 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:53,008 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:53,008 - INFO - integration_test - Warmstart k=0: x0=0.916751903698104 , y0=0.2538238060976702 , psi0=0.4799999924862857 , v0=2.200000011837837 , spline0=1.0200000041243735 , a0=0.0 , w0=0.0
2026-01-21 11:40:53,008 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:53,009 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907885228855, 0.3554152237972253, 0.4799999924862857, 2.200000011837837, 1.2400000053081572], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907885228855, 0.3554152237972253, 0.4799999924862857, 2.200000011837837, 1.2400000053081572], res_norm=2.823e+00
2026-01-21 11:40:53,010 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:53,010 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:53,026 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,171 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,192 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,241 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,262 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,306 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,325 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,369 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,388 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,434 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,455 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,501 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,520 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,582 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,605 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,656 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,677 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,722 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:53,741 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,785 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:53,805 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:53,849 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:54,570 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 11:40:54,684 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 11:40:54,684 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:54,684 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 11:40:54,684 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199996752, 'w': 0.8000000088160544}
2026-01-21 11:40:54,684 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:54,684 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:54,686 - INFO - integration_test - Step 6 completed in 1.902s
2026-01-21 11:40:54,748 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 11:40:54,748 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623086 0.36819144 0.55999999 2.40000001 1.26000001]
2026-01-21 11:40:54,749 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 11:40:54,749 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 11:40:54,752 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:54,895 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 11:40:54,895 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 11:40:54,998 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:55,025 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:55,025 - INFO - integration_test - Warmstart k=0: x0=1.1162308647779287 , y0=0.3681914441489776 , psi0=0.5599999933678912 , v0=2.4000000138378046 , spline0=1.260000005508154 , a0=0.0 , w0=0.0
2026-01-21 11:40:55,025 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:55,026 - INFO - integration_test - Dyn residual k=0: pred=[1.319572093439056, 0.49567613103645347, 0.5599999933678912, 2.4000000138378046, 1.5000000068919344], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.319572093439056, 0.49567613103645347, 0.5599999933678912, 2.4000000138378046, 1.5000000068919344], res_norm=3.211e+00
2026-01-21 11:40:55,027 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:55,028 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:55,043 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,193 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,217 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,264 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,285 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,330 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,354 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,401 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,422 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,468 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,487 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,528 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,546 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,593 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,616 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,661 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,681 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,726 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:55,746 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,793 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:55,816 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:55,860 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:56,595 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 11:40:56,639 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 11:40:56,640 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:56,640 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 11:40:56,640 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000198512304, 'w': -0.18155521197970834}
2026-01-21 11:40:56,640 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:56,640 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:56,641 - INFO - integration_test - Step 7 completed in 1.893s
2026-01-21 11:40:56,699 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 11:40:56,700 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32925431 0.49903217 0.54184447 2.60000002 1.52000001]
2026-01-21 11:40:56,700 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 11:40:56,700 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 11:40:56,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:56,805 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 11:40:56,805 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 11:40:56,966 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:56,991 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:56,991 - INFO - integration_test - Warmstart k=0: x0=1.3292543102521353 , y0=0.499032173942 , psi0=0.5418444721699204 , v0=2.6000000158229275 , spline0=1.5200000070904467 , a0=0.0 , w0=0.0
2026-01-21 11:40:56,991 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:56,992 - INFO - integration_test - Dyn residual k=0: pred=[1.55201162908607, 0.6331186301137888, 0.5418444721699204, 2.6000000158229275, 1.7800000086727394], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.55201162908607, 0.6331186301137888, 0.5418444721699204, 2.6000000158229275, 1.7800000086727394], res_norm=3.610e+00
2026-01-21 11:40:56,993 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:56,993 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:57,012 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,155 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,177 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,228 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,250 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,297 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,317 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,367 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,389 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,438 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,459 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,503 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,523 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,571 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,592 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,638 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,660 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,706 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:57,725 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,767 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:57,785 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:57,832 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:58,457 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 11:40:58,507 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 11:40:58,507 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:40:58,507 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 11:40:58,507 - INFO - integration_test -   Control dict from planner: {'a': 2.000000008664214, 'w': -0.028932678538825946}
2026-01-21 11:40:58,507 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:40:58,507 - INFO - integration_test -   Planner output success: True
2026-01-21 11:40:58,509 - INFO - integration_test - Step 8 completed in 1.809s
2026-01-21 11:40:58,571 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 11:40:58,572 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56078281 0.63793683 0.5389512  2.80000002 1.80000001]
2026-01-21 11:40:58,572 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 11:40:58,572 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 11:40:58,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:58,688 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 11:40:58,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 11:40:58,776 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:40:58,802 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:40:58,802 - INFO - integration_test - Warmstart k=0: x0=1.5607828108018527 , y0=0.6379368300212066 , psi0=0.5389512043160378 , v0=2.800000016689349 , spline0=1.8000000087593815 , a0=0.0 , w0=0.0
2026-01-21 11:40:58,802 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:40:58,803 - INFO - integration_test - Dyn residual k=0: pred=[1.8010920935151182, 0.7816429522861933, 0.5389512043160378, 2.800000016689349, 2.0800000104283165], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8010920935151182, 0.7816429522861933, 0.5389512043160378, 2.800000016689349, 2.0800000104283165], res_norm=4.039e+00
2026-01-21 11:40:58,804 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:58,805 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:40:58,825 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:58,977 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:58,998 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,051 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,081 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,129 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,165 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,240 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,267 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,316 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,337 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,383 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,403 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,453 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,474 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,521 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,586 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:40:59,607 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,654 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:40:59,676 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:40:59,734 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:00,415 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 11:41:00,544 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 11:41:00,544 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:00,544 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 11:41:00,544 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019987044, 'w': -0.0791037855078524}
2026-01-21 11:41:00,544 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:00,544 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:00,545 - INFO - integration_test - Step 9 completed in 1.974s
2026-01-21 11:41:00,601 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 11:41:00,602 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81026738 0.78577801 0.53104083 3.00000002 2.10000001]
2026-01-21 11:41:00,603 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 11:41:00,603 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 11:41:00,605 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:00,709 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 11:41:00,709 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 11:41:00,803 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:00,834 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:00,834 - INFO - integration_test - Warmstart k=0: x0=1.8102673752135523 , y0=0.785778010959167 , psi0=0.5310408257652526 , v0=3.0000000186880533 , spline0=2.100000010628187 , a0=0.0 , w0=0.0
2026-01-21 11:41:00,834 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:00,835 - INFO - integration_test - Dyn residual k=0: pred=[2.068951506165712, 0.9377073416192111, 0.5310408257652526, 3.0000000186880533, 2.4000000124969922], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.068951506165712, 0.9377073416192111, 0.5310408257652526, 3.0000000186880533, 2.4000000124969922], res_norm=4.495e+00
2026-01-21 11:41:00,836 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:00,836 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:00,852 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:00,997 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,018 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,068 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,088 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,136 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,161 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,212 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,236 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,289 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,319 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,380 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,399 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,449 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,472 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,520 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,588 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:01,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,656 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:01,676 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:01,717 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:02,455 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 11:41:02,508 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 11:41:02,509 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:02,509 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 11:41:02,509 - INFO - integration_test -   Control dict from planner: {'a': 1.1311830843971316e-07, 'w': -0.061227377371886625}
2026-01-21 11:41:02,509 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:02,509 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:02,510 - INFO - integration_test - Step 10 completed in 1.908s
2026-01-21 11:41:02,567 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 11:41:02,568 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.069415   0.93691447 0.52491809 3.00000003 2.40000001]
2026-01-21 11:41:02,568 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 11:41:02,568 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 11:41:02,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:02,676 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 11:41:02,676 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 11:41:02,771 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:02,796 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:02,796 - INFO - integration_test - Warmstart k=0: x0=2.0694150006729473 , y0=0.9369144675818143 , psi0=0.524918088028064 , v0=3.0000000299998844 , spline0=2.4000000136281754 , a0=0.0 , w0=0.0
2026-01-21 11:41:02,797 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:02,797 - INFO - integration_test - Dyn residual k=0: pred=[2.32902450148868, 1.0872571058658327, 0.524918088028064, 3.0000000299998844, 2.700000016628164], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.32902450148868, 1.0872571058658327, 0.524918088028064, 3.0000000299998844, 2.700000016628164], res_norm=4.814e+00
2026-01-21 11:41:02,798 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:02,799 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:02,815 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,042 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,064 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,110 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,130 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,176 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,197 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,249 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,272 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,317 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,336 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,381 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,401 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,452 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,483 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,548 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,572 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,620 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:03,640 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,686 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:03,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:03,747 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:04,491 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 11:41:04,545 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 11:41:04,546 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:04,546 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 11:41:04,546 - INFO - integration_test -   Control dict from planner: {'a': -9.322843885739441e-09, 'w': -0.02502328369393983}
2026-01-21 11:41:04,546 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:04,546 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:04,547 - INFO - integration_test - Step 11 completed in 1.980s
2026-01-21 11:41:04,606 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 11:41:04,607 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32921233 1.08693214 0.52241576 3.00000003 2.70000002]
2026-01-21 11:41:04,608 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 11:41:04,608 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 11:41:04,611 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:04,709 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 11:41:04,709 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 11:41:04,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:04,830 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:04,830 - INFO - integration_test - Warmstart k=0: x0=2.3292123337441715 , y0=1.0869321350038907 , psi0=0.5224157596586699 , v0=3.0000000290676 , spline0=2.7000000165349354 , a0=0.0 , w0=0.0
2026-01-21 11:41:04,830 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:04,831 - INFO - integration_test - Dyn residual k=0: pred=[2.5891972279442697, 1.2366246750044525, 0.5224157596586699, 3.0000000290676, 3.0000000194416954], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5891972279442697, 1.2366246750044525, 0.5224157596586699, 3.0000000290676, 3.0000000194416954], res_norm=5.148e+00
2026-01-21 11:41:04,832 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:04,833 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:04,850 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:04,998 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,022 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,071 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,093 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,138 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,159 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,205 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,227 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,277 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,301 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,346 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,366 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,413 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,435 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,481 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,501 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,543 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:05,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,607 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:05,627 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:05,671 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:06,307 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 11:41:06,368 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 11:41:06,369 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:06,369 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 11:41:06,369 - INFO - integration_test -   Control dict from planner: {'a': 9.206739937895466e-09, 'w': -0.1034173294641435}
2026-01-21 11:41:06,369 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:06,369 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:06,370 - INFO - integration_test - Step 12 completed in 1.763s
2026-01-21 11:41:06,428 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 11:41:06,429 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.58996663 1.23527767 0.51207403 3.00000003 3.00000002]
2026-01-21 11:41:06,429 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.172m, drift=0.558m)
2026-01-21 11:41:06,429 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 11:41:06,432 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:06,619 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.869m
2026-01-21 11:41:06,619 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 11:41:06,713 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:06,737 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:06,737 - INFO - integration_test - Warmstart k=0: x0=2.5899666269546655 , y0=1.2352776715451979 , psi0=0.5120740267122555 , v0=3.000000029988274 , spline0=3.000000019533763 , a0=0.0 , w0=0.0
2026-01-21 11:41:06,737 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:06,738 - INFO - integration_test - Dyn residual k=0: pred=[2.8514856711574836, 1.3822735603262823, 0.5120740267122555, 3.000000029988274, 3.3000000225325907], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8514856711574836, 1.3822735603262823, 0.5120740267122555, 3.000000029988274, 3.3000000225325907], res_norm=5.495e+00
2026-01-21 11:41:06,738 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:06,739 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:06,754 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:06,909 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:06,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:06,976 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:06,997 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,044 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,065 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,110 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,128 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,171 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,192 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,243 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,265 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,313 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,332 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,378 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,398 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,445 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:07,466 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,509 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:07,529 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:07,576 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:08,340 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 11:41:08,396 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 11:41:08,396 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:08,396 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 11:41:08,396 - INFO - integration_test -   Control dict from planner: {'a': -4.50870324747984e-07, 'w': -0.05557606180921511}
2026-01-21 11:41:08,396 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:08,396 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:08,398 - INFO - integration_test - Step 13 completed in 1.969s
2026-01-21 11:41:08,460 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 11:41:08,460 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85189279 1.38154609 0.50651642 2.99999998 3.30000002]
2026-01-21 11:41:08,461 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.146m, drift=0.370m)
2026-01-21 11:41:08,461 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 11:41:08,464 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:08,562 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.382), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 11:41:08,562 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 11:41:08,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:08,682 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:08,682 - INFO - integration_test - Warmstart k=0: x0=2.8518927945131796 , y0=1.381546094462426 , psi0=0.506516420531334 , v0=2.9999999849012418 , spline0=3.300000018023887 , a0=0.0 , w0=0.0
2026-01-21 11:41:08,683 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:08,683 - INFO - integration_test - Dyn residual k=0: pred=[3.1142247370707845, 1.5270862985574731, 0.506516420531334, 2.9999999849012418, 3.600000016514011], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.1142247370707845, 1.5270862985574731, 0.506516420531334, 2.9999999849012418, 3.600000016514011], res_norm=5.852e+00
2026-01-21 11:41:08,684 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:08,685 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:08,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:08,845 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:08,867 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:08,913 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:08,932 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:08,978 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:08,997 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,045 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:09,066 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,110 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:09,130 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,176 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:09,196 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,246 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:09,268 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,314 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:09,335 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,380 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:09,401 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,448 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:09,469 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:09,512 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:10,199 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 11:41:10,347 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 11:41:10,348 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:10,348 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 11:41:10,348 - INFO - integration_test -   Control dict from planner: {'a': 4.509863498926141e-07, 'w': -0.054441018701826355}
2026-01-21 11:41:10,348 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:10,348 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:10,349 - INFO - integration_test - Step 14 completed in 1.889s
2026-01-21 11:41:10,402 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 11:41:10,403 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11461961 1.5263715  0.50107232 3.00000003 3.60000002]
2026-01-21 11:41:10,404 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 11:41:10,404 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 11:41:10,407 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:10,511 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 11:41:10,511 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 11:41:10,602 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:10,630 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:10,630 - INFO - integration_test - Warmstart k=0: x0=3.114619610075646 , y0=1.5263715015734507 , psi0=0.5010723186611514 , v0=3.000000029999877 , spline0=3.6000000210238747 , a0=0.0 , w0=0.0
2026-01-21 11:41:10,630 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:10,631 - INFO - integration_test - Dyn residual k=0: pred=[3.377740000852494, 1.67048139629769, 0.5010723186611514, 3.000000029999877, 3.9000000240238624], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.377740000852494, 1.67048139629769, 0.5010723186611514, 3.000000029999877, 3.9000000240238624], res_norm=6.218e+00
2026-01-21 11:41:10,632 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:10,632 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:10,649 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:10,793 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:10,814 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:10,863 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:10,884 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:10,927 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:10,948 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:10,991 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:11,010 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,058 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:11,078 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,123 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:11,143 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,189 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:11,209 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,259 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:11,279 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,324 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:11,345 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,389 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:11,409 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:11,480 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:12,352 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 11:41:12,405 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 11:41:12,405 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:12,406 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 11:41:12,406 - INFO - integration_test -   Control dict from planner: {'a': -1.4566432616799393e-06, 'w': -0.0411399745744279}
2026-01-21 11:41:12,406 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:12,406 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:12,407 - INFO - integration_test - Step 15 completed in 2.004s
2026-01-21 11:41:12,468 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 11:41:12,469 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37803569 1.66993975 0.49695832 2.99999988 3.90000001]
2026-01-21 11:41:12,469 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.146m, drift=0.482m)
2026-01-21 11:41:12,469 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 11:41:12,472 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:12,572 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.670), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 11:41:12,573 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 11:41:12,669 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:12,694 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:12,694 - INFO - integration_test - Warmstart k=0: x0=3.378035685690177 , y0=1.6699397487616163 , psi0=0.49695832120370864 , v0=2.9999998843355504 , spline0=3.90000000945743 , a0=0.0 , w0=0.0
2026-01-21 11:41:12,694 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:12,695 - INFO - integration_test - Dyn residual k=0: pred=[3.6417467030808184, 1.812965943449604, 0.49695832120370864, 2.9999998843355504, 4.199999997890985], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.6417467030808184, 1.812965943449604, 0.49695832120370864, 2.9999998843355504, 4.199999997890985], res_norm=6.591e+00
2026-01-21 11:41:12,695 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:12,696 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:12,711 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:12,940 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:12,962 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,005 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,026 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,076 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,096 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,140 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,161 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,205 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,228 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,276 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,297 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,344 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,366 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,413 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,434 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,481 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:13,501 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,545 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:13,565 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:13,609 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:14,257 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 11:41:14,322 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 11:41:14,323 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:14,323 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 11:41:14,323 - INFO - integration_test -   Control dict from planner: {'a': 1.4566418546987553e-06, 'w': -0.08674558485608401}
2026-01-21 11:41:14,323 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:14,323 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:14,324 - INFO - integration_test - Step 16 completed in 1.856s
2026-01-21 11:41:14,386 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 11:41:14,387 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64236374 1.81182037 0.48828376 3.00000003 4.20000001]
2026-01-21 11:41:14,388 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.143m, drift=0.294m)
2026-01-21 11:41:14,388 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 11:41:14,391 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:14,491 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.642, 1.812), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 11:41:14,491 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 11:41:14,582 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:14,606 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:14,606 - INFO - integration_test - Warmstart k=0: x0=3.642363742885154 , y0=1.8118203720039616 , psi0=0.48828376271810026 , v0=3.000000029999736 , spline0=4.200000012457403 , a0=0.0 , w0=0.0
2026-01-21 11:41:14,606 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:14,607 - INFO - integration_test - Dyn residual k=0: pred=[3.90730552487446, 1.952553644389404, 0.48828376271810026, 3.000000029999736, 4.500000015457377], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.90730552487446, 1.952553644389404, 0.48828376271810026, 3.000000029999736, 4.500000015457377], res_norm=6.969e+00
2026-01-21 11:41:14,608 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:14,609 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:14,624 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:14,774 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:14,795 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:14,841 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:14,862 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:14,907 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:14,928 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:14,977 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:14,998 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,049 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:15,074 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,120 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:15,142 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,190 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:15,210 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,265 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:15,285 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,333 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:15,351 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,397 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:15,420 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:15,464 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:16,381 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 11:41:16,534 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 11:41:16,534 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:16,534 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 11:41:16,534 - INFO - integration_test -   Control dict from planner: {'a': -5.685727900392038e-07, 'w': -0.056678420586606035}
2026-01-21 11:41:16,535 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:16,535 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:16,536 - INFO - integration_test - Step 17 completed in 2.149s
2026-01-21 11:41:16,593 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 11:41:16,594 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90770293 1.95180207 0.48261592 2.99999997 4.50000001]
2026-01-21 11:41:16,595 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 11:41:16,595 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 11:41:16,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:16,704 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.952), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 11:41:16,705 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 11:41:16,799 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:16,823 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:16,823 - INFO - integration_test - Warmstart k=0: x0=3.907702929756189 , y0=1.9518020674928858 , psi0=0.48261592065943965 , v0=2.999999973142457 , spline0=4.500000009771649 , a0=0.0 , w0=0.0
2026-01-21 11:41:16,824 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:16,824 - INFO - integration_test - Dyn residual k=0: pred=[4.173438100857808, 2.0910314366221776, 0.48261592065943965, 2.999999973142457, 4.800000007085895], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173438100857808, 2.0910314366221776, 0.48261592065943965, 2.999999973142457, 4.800000007085895], res_norm=7.353e+00
2026-01-21 11:41:16,825 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:16,826 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:16,844 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:16,987 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,009 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,058 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,080 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,126 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,145 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,190 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,210 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,261 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,283 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,327 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,349 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,395 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,417 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,466 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,489 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,537 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:17,560 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,611 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:17,631 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:17,677 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:18,345 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 11:41:18,410 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 11:41:18,411 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:18,411 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 11:41:18,411 - INFO - integration_test -   Control dict from planner: {'a': 5.685741124291e-07, 'w': -0.04991960473225234}
2026-01-21 11:41:18,411 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:18,411 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:18,412 - INFO - integration_test - Step 18 completed in 1.818s
2026-01-21 11:41:18,477 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 11:41:18,477 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17378451 2.09036759 0.47762396 3.00000003 4.80000001]
2026-01-21 11:41:18,478 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.126m, drift=0.405m)
2026-01-21 11:41:18,478 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 11:41:18,481 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:18,583 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 11:41:18,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 11:41:18,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:18,708 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:18,708 - INFO - integration_test - Warmstart k=0: x0=4.173784512741727 , y0=2.0903675913177304 , psi0=0.4776239601862144 , v0=3.0000000299998684 , spline0=4.800000012771636 , a0=0.0 , w0=0.0
2026-01-21 11:41:18,708 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:18,709 - INFO - integration_test - Dyn residual k=0: pred=[4.440211402504135, 2.228268694328264, 0.4776239601862144, 3.0000000299998684, 5.100000015771623], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440211402504135, 2.228268694328264, 0.4776239601862144, 3.0000000299998684, 5.100000015771623], res_norm=7.741e+00
2026-01-21 11:41:18,710 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:18,711 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:18,726 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:18,877 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:18,897 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:18,941 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:18,963 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,007 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,029 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,075 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,094 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,137 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,161 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,206 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,226 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,278 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,300 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,345 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,369 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,414 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:19,436 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,480 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:19,500 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:19,543 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:20,170 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 11:41:20,335 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 11:41:20,336 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:20,336 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 11:41:20,336 - INFO - integration_test -   Control dict from planner: {'a': -1.8840339678636993e-07, 'w': -0.061372818266253834}
2026-01-21 11:41:20,336 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:20,336 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:20,337 - INFO - integration_test - Step 19 completed in 1.860s
2026-01-21 11:41:20,394 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 11:41:20,395 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.4406329  2.22745026 0.47148668 3.00000001 5.10000001]
2026-01-21 11:41:20,396 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-21 11:41:20,396 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 11:41:20,399 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:20,506 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 11:41:20,506 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 11:41:20,597 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:20,627 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:20,627 - INFO - integration_test - Warmstart k=0: x0=4.440632896758143 , y0=2.227450262309861 , psi0=0.471486678359589 , v0=3.000000011159529 , spline0=5.100000013887589 , a0=0.0 , w0=0.0
2026-01-21 11:41:20,627 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:20,628 - INFO - integration_test - Dyn residual k=0: pred=[4.707901099830138, 2.3637136407218127, 0.471486678359589, 3.000000011159529, 5.400000015003542], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.707901099830138, 2.3637136407218127, 0.471486678359589, 3.000000011159529, 5.400000015003542], res_norm=8.132e+00
2026-01-21 11:41:20,629 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:20,630 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:20,647 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:20,814 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:20,836 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:20,880 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:20,903 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:20,947 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:20,970 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,015 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:21,038 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,083 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:21,103 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,145 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:21,165 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,209 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:21,233 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,279 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:21,302 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,350 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:21,372 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,416 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:21,438 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:21,484 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:22,266 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 11:41:22,333 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 11:41:22,333 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:22,333 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 11:41:22,334 - INFO - integration_test -   Control dict from planner: {'a': 1.8840334832169693e-07, 'w': -0.05438776133128124}
2026-01-21 11:41:22,334 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:22,334 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:22,335 - INFO - integration_test - Step 20 completed in 1.940s
2026-01-21 11:41:22,392 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 11:41:22,393 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70827034 2.36298617 0.4660479  3.00000003 5.40000002]
2026-01-21 11:41:22,394 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 11:41:22,394 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 11:41:22,397 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:22,499 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 11:41:22,499 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 11:41:22,691 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:22,717 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:22,717 - INFO - integration_test - Warmstart k=0: x0=4.708270335119719 , y0=2.3629861651923156 , psi0=0.4660479022264609 , v0=3.0000000299998635 , spline0=5.400000016887576 , a0=0.0 , w0=0.0
2026-01-21 11:41:22,717 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:22,718 - INFO - integration_test - Dyn residual k=0: pred=[4.976275689306286, 2.497793924343356, 0.4660479022264609, 3.0000000299998635, 5.700000019887563], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.976275689306286, 2.497793924343356, 0.4660479022264609, 3.0000000299998635, 5.700000019887563], res_norm=8.527e+00
2026-01-21 11:41:22,719 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:22,720 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:22,734 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:22,898 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:22,919 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:22,963 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:22,981 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,026 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,048 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,094 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,114 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,160 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,180 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,227 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,249 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,294 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,315 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,363 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,384 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,428 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:23,452 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,495 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:23,513 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:23,556 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:24,498 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 11:41:24,565 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 11:41:24,565 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:24,565 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 11:41:24,565 - INFO - integration_test -   Control dict from planner: {'a': -3.6528811534067136e-07, 'w': -0.08677428795759771}
2026-01-21 11:41:24,565 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:24,565 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:24,566 - INFO - integration_test - Step 21 completed in 2.173s
2026-01-21 11:41:24,621 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 11:41:24,622 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97685721 2.49662944 0.45737047 2.99999999 5.70000002]
2026-01-21 11:41:24,622 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 11:41:24,622 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 11:41:24,625 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:24,730 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 11:41:24,730 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 11:41:24,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:24,848 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:24,848 - INFO - integration_test - Warmstart k=0: x0=4.976857213010991 , y0=2.496629440358839 , psi0=0.45737047343070114 , v0=2.999999993471052 , spline0=5.700000016234681 , a0=0.0 , w0=0.0
2026-01-21 11:41:24,848 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:24,849 - INFO - integration_test - Dyn residual k=0: pred=[5.246022243931458, 2.6291065543742302, 0.45737047343070114, 2.999999993471052, 6.0000000155817865], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.246022243931458, 2.6291065543742302, 0.45737047343070114, 2.999999993471052, 6.0000000155817865], res_norm=8.924e+00
2026-01-21 11:41:24,850 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:24,851 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:24,868 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,038 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,061 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,106 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,126 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,168 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,187 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,235 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,257 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,304 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,327 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,374 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,394 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,443 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,465 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,510 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,529 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,578 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:25,597 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,643 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:25,665 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:25,709 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:26,461 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 11:41:26,634 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 11:41:26,634 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:26,634 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 11:41:26,634 - INFO - integration_test -   Control dict from planner: {'a': 2.135256902899025e-07, 'w': -0.021550237006976825}
2026-01-21 11:41:26,634 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:26,634 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:26,636 - INFO - integration_test - Step 22 completed in 2.014s
2026-01-21 11:41:26,699 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 11:41:26,699 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24616478 2.62881642 0.45521545 3.00000001 6.00000002]
2026-01-21 11:41:26,700 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 11:41:26,700 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 11:41:26,703 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:26,803 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 11:41:26,803 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 11:41:26,901 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:26,925 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:26,925 - INFO - integration_test - Warmstart k=0: x0=5.246164782155648 , y0=2.6288164239059673 , psi0=0.45521544973000344 , v0=3.000000014823621 , spline0=6.000000017717044 , a0=0.0 , w0=0.0
2026-01-21 11:41:26,925 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:26,926 - INFO - integration_test - Dyn residual k=0: pred=[5.515614681075386, 2.7607131746679183, 0.45521544973000344, 3.000000014823621, 6.300000019199406], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515614681075386, 2.7607131746679183, 0.45521544973000344, 3.000000014823621, 6.300000019199406], res_norm=9.324e+00
2026-01-21 11:41:26,927 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:26,929 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:26,944 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,107 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,127 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,173 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,193 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,240 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,261 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,308 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,330 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,378 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,398 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,448 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,469 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,515 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,539 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,588 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,610 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,659 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:27,679 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,721 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:27,741 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:27,783 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:28,894 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 11:41:28,977 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 11:41:28,977 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:28,977 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 11:41:28,978 - INFO - integration_test -   Control dict from planner: {'a': -4.405321978169966e-08, 'w': -0.08083659305672379}
2026-01-21 11:41:28,978 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:28,978 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:28,979 - INFO - integration_test - Step 23 completed in 2.280s
2026-01-21 11:41:29,038 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 11:41:29,044 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51614485 2.75962267 0.44713179 3.00000001 6.30000002]
2026-01-21 11:41:29,045 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 11:41:29,045 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 11:41:29,048 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:29,156 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 11:41:29,156 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 11:41:29,254 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:29,280 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:29,280 - INFO - integration_test - Warmstart k=0: x0=5.5161448476238295 , y0=2.759622673438533 , psi0=0.44713179042433104 , v0=3.000000010418299 , spline0=6.300000018758873 , a0=0.0 , w0=0.0
2026-01-21 11:41:29,280 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:29,281 - INFO - integration_test - Dyn residual k=0: pred=[5.78665213930339, 2.8893369971398384, 0.44713179042433104, 3.000000010418299, 6.600000019800703], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.78665213930339, 2.8893369971398384, 0.44713179042433104, 3.000000010418299, 6.600000019800703], res_norm=9.726e+00
2026-01-21 11:41:29,282 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:29,282 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:29,298 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,471 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,491 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,536 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,555 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,601 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,622 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,671 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,692 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,738 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,758 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,804 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,825 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,875 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,895 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:29,940 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:29,961 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:30,007 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:30,029 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:30,075 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:30,095 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:30,134 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:30,905 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 11:41:31,089 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 11:41:31,089 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:31,090 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 11:41:31,090 - INFO - integration_test -   Control dict from planner: {'a': 1.9581510995397616e-07, 'w': -0.05779938158263723}
2026-01-21 11:41:31,090 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:31,090 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:31,091 - INFO - integration_test - Step 24 completed in 2.047s
2026-01-21 11:41:31,147 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 11:41:31,150 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.7870255  2.88855452 0.44135185 3.00000003 6.60000002]
2026-01-21 11:41:31,151 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.113m, drift=0.252m)
2026-01-21 11:41:31,151 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 11:41:31,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:31,259 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 11:41:31,259 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 11:41:31,356 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:31,384 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:31,384 - INFO - integration_test - Warmstart k=0: x0=5.787025503361044 , y0=2.8885545197862332 , psi0=0.4413518522660673 , v0=3.00000002999981 , spline0=6.600000021758855 , a0=0.0 , w0=0.0
2026-01-21 11:41:31,384 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:31,386 - INFO - integration_test - Dyn residual k=0: pred=[6.058278014907209, 3.0167031708906684, 0.4413518522660673, 3.00000002999981, 6.900000024758836], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.058278014907209, 3.0167031708906684, 0.4413518522660673, 3.00000002999981, 6.900000024758836], res_norm=1.013e+01
2026-01-21 11:41:31,386 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:31,387 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:31,403 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,571 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,590 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,635 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,658 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,703 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,723 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,769 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,790 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,835 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,859 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,905 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,925 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:31,970 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:31,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:32,036 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:32,061 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:32,133 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:32,169 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:32,214 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:32,234 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:32,282 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:33,088 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 11:41:33,157 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 11:41:33,158 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:33,158 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 11:41:33,158 - INFO - integration_test -   Control dict from planner: {'a': -6.582236775535153e-09, 'w': -0.045650223758009}
2026-01-21 11:41:33,158 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:33,158 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:33,159 - INFO - integration_test - Step 25 completed in 2.010s
2026-01-21 11:41:33,219 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 11:41:33,220 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05856957 3.01608359 0.43678683 3.00000003 6.90000002]
2026-01-21 11:41:33,221 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.205m, drift=0.064m)
2026-01-21 11:41:33,221 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 11:41:33,224 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:33,333 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.059, 3.016), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 11:41:33,333 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 11:41:33,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:33,570 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:33,571 - INFO - integration_test - Warmstart k=0: x0=6.058569572975741 , y0=3.016083589969245 , psi0=0.4367868298902664 , v0=3.0000000293415865 , spline0=6.900000024693013 , a0=0.0 , w0=0.0
2026-01-21 11:41:33,571 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:33,571 - INFO - integration_test - Dyn residual k=0: pred=[6.330404257521278, 3.142992636291892, 0.4367868298902664, 3.0000000293415865, 7.200000027627172], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.330404257521278, 3.142992636291892, 0.4367868298902664, 3.0000000293415865, 7.200000027627172], res_norm=1.053e+01
2026-01-21 11:41:33,572 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:33,573 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:33,587 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:33,761 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:33,782 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:33,826 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:33,849 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:33,898 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:33,920 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:33,963 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:33,983 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,029 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:34,054 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,104 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:34,125 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,172 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:34,191 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,238 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:34,262 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,311 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:34,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,378 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:34,397 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:34,441 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:35,294 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 11:41:35,374 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 11:41:35,374 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:35,374 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 11:41:35,374 - INFO - integration_test -   Control dict from planner: {'a': -9.31017818917096e-08, 'w': -0.09547012475336128}
2026-01-21 11:41:35,374 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:35,374 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:35,376 - INFO - integration_test - Step 26 completed in 2.156s
2026-01-21 11:41:35,436 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 11:41:35,439 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33100592 3.14169311 0.42723982 3.00000002 7.20000003]
2026-01-21 11:41:35,439 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.175m, drift=0.364m)
2026-01-21 11:41:35,440 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 11:41:35,443 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:35,544 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.331, 3.142), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 11:41:35,544 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 11:41:35,637 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:35,666 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:35,666 - INFO - integration_test - Warmstart k=0: x0=6.331005924225103 , y0=3.141693113536748 , psi0=0.4272398174149303 , v0=3.000000020031408 , spline0=7.200000026696154 , a0=0.0 , w0=0.0
2026-01-21 11:41:35,666 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:35,667 - INFO - integration_test - Dyn residual k=0: pred=[6.604039803613679, 3.266001206225474, 0.4272398174149303, 3.000000020031408, 7.5000000286992945], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.604039803613679, 3.266001206225474, 0.4272398174149303, 3.000000020031408, 7.5000000286992945], res_norm=1.094e+01
2026-01-21 11:41:35,668 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:35,668 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:35,683 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:35,857 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:35,892 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:35,956 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:35,980 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,024 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,043 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,093 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,159 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,178 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,225 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,249 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,296 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,317 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,364 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,385 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,430 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:36,451 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,500 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:36,520 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:36,566 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:37,348 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 11:41:37,539 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 11:41:37,540 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:37,540 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 11:41:37,540 - INFO - integration_test -   Control dict from planner: {'a': -1.4444105233017083e-06, 'w': -0.014843085553847932}
2026-01-21 11:41:37,540 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:37,540 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:37,542 - INFO - integration_test - Step 27 completed in 2.103s
2026-01-21 11:41:37,609 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 11:41:37,610 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60413195 3.26579852 0.42575551 2.99999988 7.50000001]
2026-01-21 11:41:37,611 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.125m, drift=0.175m)
2026-01-21 11:41:37,611 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 11:41:37,613 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:37,720 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.604, 3.266), path_start=(0.000, 0.000), dist=7.367m
2026-01-21 11:41:37,720 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 11:41:37,812 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:37,836 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:37,836 - INFO - integration_test - Warmstart k=0: x0=6.604131952546891 , y0=3.265798524369764 , psi0=0.4257555088595455 , v0=2.9999998755903556 , spline0=7.500000014255189 , a0=0.0 , w0=0.0
2026-01-21 11:41:37,837 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:37,838 - INFO - integration_test - Dyn residual k=0: pred=[6.877350029508332, 3.3897012077826485, 0.4257555088595455, 2.9999998755903556, 7.800000001814224], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.877350029508332, 3.3897012077826485, 0.4257555088595455, 2.9999998755903556, 7.800000001814224], res_norm=1.135e+01
2026-01-21 11:41:37,838 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:37,839 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:37,859 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,023 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,046 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,094 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,115 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,163 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,182 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,226 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,246 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,294 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,316 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,363 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,385 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,430 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,450 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,498 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,563 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:38,582 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,627 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:38,648 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:38,691 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:39,416 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 11:41:39,498 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 11:41:39,498 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:39,498 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 11:41:39,498 - INFO - integration_test -   Control dict from planner: {'a': 1.544058299809528e-06, 'w': -0.11924704178306722}
2026-01-21 11:41:39,498 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:39,498 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:39,499 - INFO - integration_test - Step 28 completed in 1.890s
2026-01-21 11:41:39,566 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 11:41:39,567 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.8780823  3.38806927 0.4138308  3.00000003 7.80000002]
2026-01-21 11:41:39,568 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.244m, drift=0.013m)
2026-01-21 11:41:39,568 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 11:41:39,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:39,674 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.878, 3.388), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 11:41:39,674 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 11:41:39,767 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:39,790 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:39,790 - INFO - integration_test - Warmstart k=0: x0=6.878082304078398 , y0=3.388069271404529 , psi0=0.4138308046812388 , v0=3.0000000299961855 , spline0=7.800000017254808 , a0=0.0 , w0=0.0
2026-01-21 11:41:39,790 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:39,791 - INFO - integration_test - Dyn residual k=0: pred=[7.152758437627723, 3.5087051842089854, 0.4138308046812388, 3.0000000299961855, 8.100000020254427], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.152758437627723, 3.5087051842089854, 0.4138308046812388, 3.0000000299961855, 8.100000020254427], res_norm=1.176e+01
2026-01-21 11:41:39,792 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:39,793 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:39,808 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,020 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,043 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,091 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,113 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,158 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,178 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,223 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,244 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,291 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,312 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,360 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,381 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,430 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,457 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,504 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,526 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,570 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:40,589 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,629 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:40,652 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:40,696 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:41,697 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 11:41:41,908 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 11:41:41,909 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:41,909 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 11:41:41,909 - INFO - integration_test -   Control dict from planner: {'a': -9.438213925886386e-08, 'w': -0.002352797144240668}
2026-01-21 11:41:41,909 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:41,909 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:41,910 - INFO - integration_test - Step 29 completed in 2.343s
2026-01-21 11:41:41,973 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 11:41:41,974 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15277263 3.50867287 0.41359552 3.00000002 8.10000002]
2026-01-21 11:41:41,975 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.153m, drift=0.287m)
2026-01-21 11:41:41,975 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 11:41:41,978 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:42,095 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.153, 3.509), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 11:41:42,095 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 11:41:42,196 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:42,220 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:42,220 - INFO - integration_test - Warmstart k=0: x0=7.152772626252923 , y0=3.5086728700453094 , psi0=0.41359552496681473 , v0=3.0000000205579718 , spline0=8.100000019310606 , a0=0.0 , w0=0.0
2026-01-21 11:41:42,220 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:42,221 - INFO - integration_test - Dyn residual k=0: pred=[7.427477134518299, 3.629244153409782, 0.41359552496681473, 3.0000000205579718, 8.400000021366404], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.427477134518299, 3.629244153409782, 0.41359552496681473, 3.0000000205579718, 8.400000021366404], res_norm=1.217e+01
2026-01-21 11:41:42,222 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:42,223 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:42,239 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,418 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,439 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,488 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,508 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,552 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,575 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,626 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,647 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,695 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,715 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,761 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,781 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,828 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,850 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,896 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,916 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:42,960 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:42,982 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:43,025 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:43,047 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:43,092 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:43,797 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 11:41:43,883 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 11:41:43,883 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:43,883 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 11:41:43,883 - INFO - integration_test -   Control dict from planner: {'a': 9.436477309761304e-08, 'w': -0.075722562798239}
2026-01-21 11:41:43,883 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:43,883 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:43,885 - INFO - integration_test - Step 30 completed in 1.910s
2026-01-21 11:41:43,942 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 11:41:43,943 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.42793101 3.62820294 0.40602327 3.00000003 8.40000002]
2026-01-21 11:41:43,944 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.153m, drift=0.099m)
2026-01-21 11:41:43,944 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 11:41:43,947 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:44,051 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.428, 3.628), path_start=(0.000, 0.000), dist=8.267m
2026-01-21 11:41:44,051 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 11:41:44,148 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:44,173 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:44,174 - INFO - integration_test - Warmstart k=0: x0=7.4279310058900645 , y0=3.6282029398606768 , psi0=0.40602326868699085 , v0=3.000000029994449 , spline0=8.400000022310051 , a0=0.0 , w0=0.0
2026-01-21 11:41:44,174 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:44,174 - INFO - integration_test - Dyn residual k=0: pred=[7.703540627342735, 3.7466906538329794, 0.40602326868699085, 3.000000029994449, 8.700000025309496], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.703540627342735, 3.7466906538329794, 0.40602326868699085, 3.000000029994449, 8.700000025309496], res_norm=1.258e+01
2026-01-21 11:41:44,175 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:44,176 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:44,191 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,359 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,381 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,429 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,450 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,502 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,522 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,568 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,591 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,634 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,658 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,701 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,720 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,768 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,788 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,831 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,852 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,900 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:44,921 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:44,966 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:44,988 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:45,031 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:45,770 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 11:41:45,982 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 11:41:45,982 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:45,983 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 11:41:45,983 - INFO - integration_test -   Control dict from planner: {'a': -7.98660442961097e-07, 'w': 0.06470273441485572}
2026-01-21 11:41:45,983 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:45,983 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:45,984 - INFO - integration_test - Step 31 completed in 2.041s
2026-01-21 11:41:46,040 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 11:41:46,041 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.70315538 3.74758146 0.41249354 2.99999995 8.70000002]
2026-01-21 11:41:46,042 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.251m, drift=0.399m)
2026-01-21 11:41:46,042 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 11:41:46,045 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:46,148 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.703, 3.748), path_start=(0.000, 0.000), dist=8.566m
2026-01-21 11:41:46,148 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 11:41:46,240 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:46,267 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:46,267 - INFO - integration_test - Warmstart k=0: x0=7.703155378027665 , y0=3.7475814572011563 , psi0=0.41249354212847644 , v0=2.9999999501284047 , spline0=8.70000001732289 , a0=0.0 , w0=0.0
2026-01-21 11:41:46,267 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:46,268 - INFO - integration_test - Dyn residual k=0: pred=[7.977992580503077, 3.8678499449408528, 0.41249354212847644, 2.9999999501284047, 9.00000001233573], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.977992580503077, 3.8678499449408528, 0.41249354212847644, 2.9999999501284047, 9.00000001233573], res_norm=1.299e+01
2026-01-21 11:41:46,269 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:46,270 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:46,286 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,455 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,477 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,522 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,545 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,588 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,606 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,650 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,673 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,718 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,738 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,783 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,802 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,848 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,871 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,917 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:46,936 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:46,981 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:47,000 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:47,040 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:47,061 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:47,106 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:47,761 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 11:41:47,840 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 11:41:47,841 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:47,841 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 11:41:47,841 - INFO - integration_test -   Control dict from planner: {'a': 7.284363181593548e-07, 'w': 0.7999610118632541}
2026-01-21 11:41:47,841 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:47,841 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:47,842 - INFO - integration_test - Step 32 completed in 1.801s
2026-01-21 11:41:47,906 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 11:41:47,908 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.97289161 3.87870881 0.49248964 3.00000002 9.00000002]
2026-01-21 11:41:47,908 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.122m, drift=0.211m)
2026-01-21 11:41:47,908 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 11:41:47,911 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:48,012 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.973, 3.879), path_start=(0.000, 0.000), dist=8.866m
2026-01-21 11:41:48,012 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 11:41:48,229 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:48,255 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:48,255 - INFO - integration_test - Warmstart k=0: x0=7.972891610010503 , y0=3.878708806839071 , psi0=0.49248964331480183 , v0=3.0000000229720367 , spline0=9.000000019620094 , a0=0.0 , w0=0.0
2026-01-21 11:41:48,255 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:48,256 - INFO - integration_test - Dyn residual k=0: pred=[8.237239142454694, 4.020555144363132, 0.49248964331480183, 3.0000000229720367, 9.300000021917297], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.237239142454694, 4.020555144363132, 0.49248964331480183, 3.0000000229720367, 9.300000021917297], res_norm=1.341e+01
2026-01-21 11:41:48,256 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:48,257 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:48,277 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,448 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,471 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,516 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,536 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,584 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,605 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,652 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,679 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,727 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,748 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,793 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,813 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,861 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,882 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,925 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:48,943 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:48,990 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:49,011 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:49,054 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:49,077 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:49,120 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:51,790 - WARNING - integration_test - Step 33: MPC solve failed
2026-01-21 11:41:51,790 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:41:51,874 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 11:41:51,874 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:51,874 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 11:41:51,874 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:41:51,874 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:51,874 - INFO - integration_test -   Planner output success: False
2026-01-21 11:41:51,874 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:41:51,876 - INFO - integration_test - Step 33 completed in 3.968s
2026-01-21 11:41:51,938 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 11:41:51,939 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.23723914 4.02055514 0.49248964 3.00000002 9.30000002]
2026-01-21 11:41:51,939 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.163m, drift=0.022m)
2026-01-21 11:41:51,939 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 11:41:51,942 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:52,048 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.237, 4.021), path_start=(0.000, 0.000), dist=9.166m
2026-01-21 11:41:52,048 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 11:41:52,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:52,195 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:52,195 - INFO - integration_test - Warmstart k=0: x0=8.237239142454694 , y0=4.020555144363132 , psi0=0.49248964331480183 , v0=3.0000000229720367 , spline0=9.300000021917297 , a0=0.0 , w0=0.0
2026-01-21 11:41:52,195 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:52,196 - INFO - integration_test - Dyn residual k=0: pred=[8.501586674898885, 4.162401481887192, 0.49248964331480183, 3.0000000229720367, 9.6000000242145], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.501586674898885, 4.162401481887192, 0.49248964331480183, 3.0000000229720367, 9.6000000242145], res_norm=1.382e+01
2026-01-21 11:41:52,197 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:52,198 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:52,214 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,385 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,406 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,458 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,481 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,525 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,548 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,598 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,619 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,668 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,688 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,734 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,754 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,802 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,822 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,871 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,893 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:52,938 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:52,962 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:53,003 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:53,023 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:53,071 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:54,011 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 11:41:54,226 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 11:41:54,227 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:54,227 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 11:41:54,227 - INFO - integration_test -   Control dict from planner: {'a': 7.027751700274487e-08, 'w': -0.8000000098954737}
2026-01-21 11:41:54,227 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:54,227 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:54,228 - INFO - integration_test - Step 34 completed in 2.289s
2026-01-21 11:41:54,299 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 11:41:54,300 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.50697563 4.15168197 0.41248964 3.00000003 9.60000002]
2026-01-21 11:41:54,301 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.176m, drift=0.322m)
2026-01-21 11:41:54,301 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 11:41:54,304 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:54,413 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.507, 4.152), path_start=(0.000, 0.000), dist=9.466m
2026-01-21 11:41:54,413 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 11:41:54,517 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:54,541 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:54,542 - INFO - integration_test - Warmstart k=0: x0=8.506975626723804 , y0=4.151681966330315 , psi0=0.4124896423252544 , v0=3.0000000299997884 , spline0=9.600000024917277 , a0=0.0 , w0=0.0
2026-01-21 11:41:54,542 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:54,542 - INFO - integration_test - Dyn residual k=0: pred=[8.781813305537785, 4.271949385460064, 0.4124896423252544, 3.0000000299997884, 9.900000027917256], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.781813305537785, 4.271949385460064, 0.4124896423252544, 3.0000000299997884, 9.900000027917256], res_norm=1.423e+01
2026-01-21 11:41:54,543 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:54,544 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:54,561 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:54,728 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:54,750 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:54,796 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:54,816 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:54,863 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:54,886 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:54,930 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:54,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:54,995 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:55,015 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:55,062 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:55,082 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:55,131 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:55,151 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:55,197 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:55,217 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:55,263 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:55,286 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:55,330 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:55,353 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:55,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:56,339 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 11:41:56,433 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 11:41:56,433 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:56,433 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 11:41:56,433 - INFO - integration_test -   Control dict from planner: {'a': -3.638912846179922e-08, 'w': -0.7919682121406613}
2026-01-21 11:41:56,433 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:56,433 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:56,435 - INFO - integration_test - Step 35 completed in 2.135s
2026-01-21 11:41:56,509 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 11:41:56,510 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.78628601 4.26094626 0.33329282 3.00000003 9.90000003]
2026-01-21 11:41:56,511 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.076m, drift=0.134m)
2026-01-21 11:41:56,511 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 11:41:56,514 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:56,613 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.786, 4.261), path_start=(0.000, 0.000), dist=9.765m
2026-01-21 11:41:56,614 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 11:41:56,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:56,734 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:56,734 - INFO - integration_test - Warmstart k=0: x0=8.786286005995777 , y0=4.2609462559629865 , psi0=0.3332928211111883 , v0=3.0000000263608757 , spline0=9.900000027553364 , a0=0.0 , w0=0.0
2026-01-21 11:41:56,734 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:56,735 - INFO - integration_test - Dyn residual k=0: pred=[9.069777068763859, 4.359093181091979, 0.3332928211111883, 3.0000000263608757, 10.200000030189452], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.069777068763859, 4.359093181091979, 0.3332928211111883, 3.0000000263608757, 10.200000030189452], res_norm=1.464e+01
2026-01-21 11:41:56,735 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:56,736 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:56,752 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:56,915 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:56,936 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:56,980 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,001 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,046 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,071 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,117 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,137 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,184 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,203 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,249 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,272 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,317 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,337 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,386 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,407 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,454 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:57,477 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,536 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:57,560 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:57,608 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:41:58,745 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 11:41:59,014 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 11:41:59,014 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:41:59,014 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 11:41:59,015 - INFO - integration_test -   Control dict from planner: {'a': 3.6389348258513014e-08, 'w': 0.2142189283621049}
2026-01-21 11:41:59,015 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:41:59,015 - INFO - integration_test -   Planner output success: True
2026-01-21 11:41:59,016 - INFO - integration_test - Step 36 completed in 2.506s
2026-01-21 11:41:59,087 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 11:41:59,089 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.06870418  4.36212202  0.35471471  3.00000003 10.20000003]
2026-01-21 11:41:59,089 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.217m, drift=0.054m)
2026-01-21 11:41:59,089 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 11:41:59,093 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:59,214 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.069, 4.362), path_start=(0.000, 0.000), dist=10.063m
2026-01-21 11:41:59,214 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.063m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:41:59,214 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 11:41:59,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:41:59,341 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:41:59,341 - INFO - integration_test - Warmstart k=0: x0=9.068704180974503 , y0=4.362122016237143 , psi0=0.3547147139473988 , v0=3.0000000299998106 , spline0=10.200000030553346 , a0=0.0 , w0=0.0
2026-01-21 11:41:59,341 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:41:59,342 - INFO - integration_test - Dyn residual k=0: pred=[9.350027867791095, 4.466318873367809, 0.3547147139473988, 3.0000000299998106, 10.500000033553327], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.350027867791095, 4.466318873367809, 0.3547147139473988, 3.0000000299998106, 10.500000033553327], res_norm=1.506e+01
2026-01-21 11:41:59,343 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:59,343 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:41:59,359 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,533 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,555 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,603 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,623 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,671 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,692 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,735 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,758 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,803 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,822 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,869 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,892 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:41:59,935 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:41:59,958 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:00,004 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:00,025 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:00,073 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:00,094 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:00,135 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:00,154 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:00,199 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:01,099 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 11:42:01,196 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 11:42:01,197 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:01,197 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 11:42:01,197 - INFO - integration_test -   Control dict from planner: {'a': -3.9191780959225997e-07, 'w': -0.6241986558604015}
2026-01-21 11:42:01,197 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:01,197 - INFO - integration_test -   Planner output success: True
2026-01-21 11:42:01,198 - INFO - integration_test - Step 37 completed in 2.110s
2026-01-21 11:42:01,268 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 11:42:01,270 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.35309614  4.45747398  0.29229485  2.99999999 10.50000003]
2026-01-21 11:42:01,271 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.142m, drift=0.246m)
2026-01-21 11:42:01,271 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 11:42:01,275 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:01,382 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.353, 4.457), path_start=(0.000, 0.000), dist=10.361m
2026-01-21 11:42:01,383 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.361m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:01,383 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 11:42:01,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:01,513 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:01,513 - INFO - integration_test - Warmstart k=0: x0=9.353096140101497 , y0=4.457473980843522 , psi0=0.29229484836135866 , v0=2.9999999908080297 , spline0=10.50000002963415 , a0=0.0 , w0=0.0
2026-01-21 11:42:01,513 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:01,514 - INFO - integration_test - Dyn residual k=0: pred=[9.640371679985533, 4.543919128959642, 0.29229484836135866, 2.9999999908080297, 10.800000028714953], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.640371679985533, 4.543919128959642, 0.29229484836135866, 2.9999999908080297, 10.800000028714953], res_norm=1.547e+01
2026-01-21 11:42:01,515 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:01,516 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:01,531 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:01,701 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:01,721 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:01,767 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:01,788 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:01,833 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:01,855 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:01,902 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:01,923 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:01,969 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:01,989 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:02,035 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:02,057 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:02,104 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:02,125 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:02,170 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:02,191 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:02,234 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:02,255 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:02,301 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:02,320 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:02,364 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:03,349 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 11:42:03,582 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 11:42:03,582 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:03,582 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 11:42:03,582 - INFO - integration_test -   Control dict from planner: {'a': -1.2889090076368068e-06, 'w': -0.799983667670575}
2026-01-21 11:42:03,582 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:03,582 - INFO - integration_test -   Planner output success: True
2026-01-21 11:42:03,583 - INFO - integration_test - Step 38 completed in 2.313s
2026-01-21 11:42:03,642 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 11:42:03,643 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.64352125  4.53234229  0.21229648  2.99999986 10.80000002]
2026-01-21 11:42:03,644 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.160m, drift=0.057m)
2026-01-21 11:42:03,644 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 11:42:03,647 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:03,753 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.644, 4.532), path_start=(0.000, 0.000), dist=10.655m
2026-01-21 11:42:03,753 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.655m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:03,753 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 11:42:03,845 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:03,874 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:03,875 - INFO - integration_test - Warmstart k=0: x0=9.643521252834182 , y0=4.532342293466984 , psi0=0.21229648159430115 , v0=2.999999861917129 , spline0=10.800000015825862 , a0=0.0 , w0=0.0
2026-01-21 11:42:03,875 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:03,876 - INFO - integration_test - Dyn residual k=0: pred=[9.93678612288779, 4.595553904010204, 0.21229648159430115, 2.999999861917129, 11.100000002017575], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.93678612288779, 4.595553904010204, 0.21229648159430115, 2.999999861917129, 11.100000002017575], res_norm=1.588e+01
2026-01-21 11:42:03,877 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:03,878 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:03,895 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,060 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,128 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,150 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,195 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,216 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,265 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,288 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,335 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,357 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,401 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,423 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,472 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,494 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,540 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,562 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,606 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:04,628 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,676 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:04,698 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:04,741 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:05,745 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 11:42:05,835 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 11:42:05,836 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:05,836 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 11:42:05,836 - INFO - integration_test -   Control dict from planner: {'a': -2.0173889622348266e-05, 'w': -0.7999999725126276}
2026-01-21 11:42:05,836 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:05,836 - INFO - integration_test -   Planner output success: True
2026-01-21 11:42:05,837 - INFO - integration_test - Step 39 completed in 2.194s
2026-01-21 11:42:05,895 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 11:42:05,898 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[ 9.93900043  4.58376215  0.13229648  2.99999784 11.0999998 ]
2026-01-21 11:42:05,899 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.284m, drift=0.357m)
2026-01-21 11:42:05,899 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 11:42:05,902 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:06,004 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(9.939, 4.584), path_start=(0.000, 0.000), dist=10.945m
2026-01-21 11:42:06,004 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.945m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:06,004 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 11:42:06,101 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:06,124 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:06,124 - INFO - integration_test - Warmstart k=0: x0=9.9390004278652 , y0=4.583762145219952 , psi0=0.13229648434303837 , v0=2.999997844528167 , spline0=11.09999980027868 , a0=0.0 , w0=0.0
2026-01-21 11:42:06,124 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:06,125 - INFO - integration_test - Dyn residual k=0: pred=[10.23637868716032, 4.623335388331182, 0.13229648434303837, 2.999997844528167, 11.399999584731496], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.23637868716032, 4.623335388331182, 0.13229648434303837, 2.999997844528167, 11.399999584731496], res_norm=1.628e+01
2026-01-21 11:42:06,126 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:06,127 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:06,143 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,308 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,328 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,377 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,396 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,443 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,465 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,512 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,534 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,582 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,601 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,645 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,666 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,713 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,732 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,778 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,798 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,842 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:06,865 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,913 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:06,932 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:06,976 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:07,902 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 11:42:08,147 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 11:42:08,147 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:08,147 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 11:42:08,147 - INFO - integration_test -   Control dict from planner: {'a': 2.1585458227171808e-05, 'w': -0.7999999880929827}
2026-01-21 11:42:08,147 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:08,147 - INFO - integration_test -   Planner output success: True
2026-01-21 11:42:08,149 - INFO - integration_test - Step 40 completed in 2.251s
2026-01-21 11:42:08,218 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 11:42:08,219 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.23764378  4.61140441  0.05229649  3.         11.3999998 ]
2026-01-21 11:42:08,219 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.269m, drift=0.169m)
2026-01-21 11:42:08,219 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 11:42:08,223 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:08,328 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.238, 4.611), path_start=(0.000, 0.000), dist=11.228m
2026-01-21 11:42:08,328 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.228m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:08,328 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 11:42:08,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:08,444 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:08,444 - INFO - integration_test - Warmstart k=0: x0=10.237643782654683 , y0=4.611404411805175 , psi0=0.0522964855337401 , v0=3.0000000030739895 , spline0=11.399999800586079 , a0=0.0 , w0=0.0
2026-01-21 11:42:08,444 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:08,445 - INFO - integration_test - Dyn residual k=0: pred=[10.537233638090768, 4.627086207117736, 0.0522964855337401, 3.0000000030739895, 11.699999800893478], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.537233638090768, 4.627086207117736, 0.0522964855337401, 3.0000000030739895, 11.699999800893478], res_norm=1.668e+01
2026-01-21 11:42:08,446 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:08,446 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:08,463 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:08,635 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:08,657 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:08,704 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:08,725 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:08,771 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:08,792 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:08,836 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:08,857 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:08,904 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:08,927 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:08,975 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:09,001 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:09,050 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:09,071 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:09,120 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:09,141 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:09,186 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:09,207 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:09,251 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:09,273 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:09,318 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:14,266 - WARNING - integration_test - Step 41: MPC solve failed
2026-01-21 11:42:14,266 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:42:14,356 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 11:42:14,356 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:14,356 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 11:42:14,357 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:14,357 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:14,357 - INFO - integration_test -   Planner output success: False
2026-01-21 11:42:14,357 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:14,358 - INFO - integration_test - Step 41 completed in 6.139s
2026-01-21 11:42:14,420 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 11:42:14,422 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.53723364  4.62708621  0.05229649  3.         11.6999998 ]
2026-01-21 11:42:14,423 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.400m, drift=0.019m)
2026-01-21 11:42:14,423 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 11:42:14,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:14,688 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.537, 4.627), path_start=(0.000, 0.000), dist=11.508m
2026-01-21 11:42:14,688 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.508m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:14,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 11:42:14,788 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:14,811 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:14,811 - INFO - integration_test - Warmstart k=0: x0=10.537233638090768 , y0=4.627086207117736 , psi0=0.0522964855337401 , v0=3.0000000030739895 , spline0=11.699999800893478 , a0=0.0 , w0=0.0
2026-01-21 11:42:14,811 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:14,812 - INFO - integration_test - Dyn residual k=0: pred=[10.836823493526854, 4.642768002430296, 0.0522964855337401, 3.0000000030739895, 11.999999801200877], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.836823493526854, 4.642768002430296, 0.0522964855337401, 3.0000000030739895, 11.999999801200877], res_norm=1.709e+01
2026-01-21 11:42:14,813 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:14,814 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:14,830 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,000 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,021 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,067 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,088 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,136 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,158 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,203 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,226 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,272 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,292 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,371 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,402 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,450 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,474 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,523 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,542 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,590 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:15,610 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,653 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:15,674 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:15,719 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:18,613 - WARNING - integration_test - Step 42: MPC solve failed
2026-01-21 11:42:18,613 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:42:18,720 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 11:42:18,721 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:18,721 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 11:42:18,721 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:18,721 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:18,721 - INFO - integration_test -   Planner output success: False
2026-01-21 11:42:18,721 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:18,722 - INFO - integration_test - Step 42 completed in 4.300s
2026-01-21 11:42:18,788 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 11:42:18,790 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.83682349  4.642768    0.05229649  3.         11.9999998 ]
2026-01-21 11:42:18,791 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.454m, drift=0.281m)
2026-01-21 11:42:18,791 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 11:42:18,794 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:18,907 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.837, 4.643), path_start=(0.000, 0.000), dist=11.789m
2026-01-21 11:42:18,907 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.789m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:18,908 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 11:42:19,034 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:19,059 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:19,059 - INFO - integration_test - Warmstart k=0: x0=10.836823493526854 , y0=4.642768002430296 , psi0=0.0522964855337401 , v0=3.0000000030739895 , spline0=11.999999801200877 , a0=0.0 , w0=0.0
2026-01-21 11:42:19,059 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:19,060 - INFO - integration_test - Dyn residual k=0: pred=[11.13641334896294, 4.658449797742857, 0.0522964855337401, 3.0000000030739895, 12.299999801508276], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.13641334896294, 4.658449797742857, 0.0522964855337401, 3.0000000030739895, 12.299999801508276], res_norm=1.749e+01
2026-01-21 11:42:19,061 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:19,062 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:19,078 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,247 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,269 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,316 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,384 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,404 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,449 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,470 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,521 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,543 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,589 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,608 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,655 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,677 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,723 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,743 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,786 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:19,809 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,851 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:19,871 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:19,918 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:22,711 - WARNING - integration_test - Step 43: MPC solve failed
2026-01-21 11:42:22,711 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 11:42:22,967 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 11:42:22,968 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:22,968 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 11:42:22,968 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:22,968 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:22,968 - INFO - integration_test -   Planner output success: False
2026-01-21 11:42:22,968 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:22,969 - INFO - integration_test - Step 43 completed in 4.179s
2026-01-21 11:42:23,036 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 11:42:23,046 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.13641335  4.6584498   0.05229649  3.         12.2999998 ]
2026-01-21 11:42:23,047 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.532m, drift=0.092m)
2026-01-21 11:42:23,047 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 11:42:23,050 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:23,205 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.136, 4.658), path_start=(0.000, 0.000), dist=12.071m
2026-01-21 11:42:23,205 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.071m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:23,205 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 11:42:23,300 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:23,326 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:23,326 - INFO - integration_test - Warmstart k=0: x0=11.13641334896294 , y0=4.658449797742857 , psi0=0.0522964855337401 , v0=3.0000000030739895 , spline0=12.299999801508276 , a0=0.0 , w0=0.0
2026-01-21 11:42:23,326 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:23,327 - INFO - integration_test - Dyn residual k=0: pred=[11.436003204399025, 4.674131593055417, 0.0522964855337401, 3.0000000030739895, 12.599999801815676], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.436003204399025, 4.674131593055417, 0.0522964855337401, 3.0000000030739895, 12.599999801815676], res_norm=1.790e+01
2026-01-21 11:42:23,328 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:23,328 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:23,344 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,516 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,538 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,585 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,607 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,658 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,680 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,728 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,748 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,793 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,814 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,859 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,879 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,927 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:23,947 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:23,992 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:24,012 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:24,056 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:24,080 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:24,124 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:24,144 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:24,188 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:26,880 - WARNING - integration_test - Step 44: MPC solve failed
2026-01-21 11:42:26,880 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 11:42:26,983 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 11:42:26,983 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:26,983 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 11:42:26,983 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:26,983 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:26,983 - INFO - integration_test -   Planner output success: False
2026-01-21 11:42:26,983 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:26,985 - INFO - integration_test - Step 44 completed in 3.939s
2026-01-21 11:42:27,051 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 11:42:27,059 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.4360032   4.67413159  0.05229649  3.         12.5999998 ]
2026-01-21 11:42:27,059 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.637m, drift=0.392m)
2026-01-21 11:42:27,059 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 11:42:27,062 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:27,172 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.436, 4.674), path_start=(0.000, 0.000), dist=12.354m
2026-01-21 11:42:27,172 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.354m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:27,172 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 11:42:27,267 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:27,293 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:27,293 - INFO - integration_test - Warmstart k=0: x0=11.436003204399025 , y0=4.674131593055417 , psi0=0.0522964855337401 , v0=3.0000000030739895 , spline0=12.599999801815676 , a0=0.0 , w0=0.0
2026-01-21 11:42:27,293 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:27,294 - INFO - integration_test - Dyn residual k=0: pred=[11.73559305983511, 4.689813388367978, 0.0522964855337401, 3.0000000030739895, 12.899999802123075], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.73559305983511, 4.689813388367978, 0.0522964855337401, 3.0000000030739895, 12.899999802123075], res_norm=1.831e+01
2026-01-21 11:42:27,295 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:27,296 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:27,312 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,518 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,541 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,591 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,613 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,660 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,680 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,728 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,749 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,793 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,815 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,857 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,879 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:27,929 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:27,953 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:28,000 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:28,022 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:28,065 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:28,088 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:28,135 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:28,155 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:28,201 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:31,278 - WARNING - integration_test - Step 45: MPC solve failed
2026-01-21 11:42:31,279 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 11:42:31,378 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 11:42:31,378 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:31,378 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 11:42:31,378 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:31,378 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:31,378 - INFO - integration_test -   Planner output success: False
2026-01-21 11:42:31,378 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:31,380 - INFO - integration_test - Step 45 completed in 4.321s
2026-01-21 11:42:31,444 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 11:42:31,457 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.73559306  4.68981339  0.05229649  3.         12.8999998 ]
2026-01-21 11:42:31,458 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.684m, drift=0.204m)
2026-01-21 11:42:31,458 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 11:42:31,461 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:31,573 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.736, 4.690), path_start=(0.000, 0.000), dist=12.638m
2026-01-21 11:42:31,573 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.638m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:31,573 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 11:42:31,671 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:31,695 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:31,696 - INFO - integration_test - Warmstart k=0: x0=11.73559305983511 , y0=4.689813388367978 , psi0=0.0522964855337401 , v0=3.0000000030739895 , spline0=12.899999802123075 , a0=0.0 , w0=0.0
2026-01-21 11:42:31,696 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:31,697 - INFO - integration_test - Dyn residual k=0: pred=[12.035182915271196, 4.705495183680538, 0.0522964855337401, 3.0000000030739895, 13.199999802430474], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.035182915271196, 4.705495183680538, 0.0522964855337401, 3.0000000030739895, 13.199999802430474], res_norm=1.871e+01
2026-01-21 11:42:31,698 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:31,699 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:31,716 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:31,883 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:31,905 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:31,954 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:31,976 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,021 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,044 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,091 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,114 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,161 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,183 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,225 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,248 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,293 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,314 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,361 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,382 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,426 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:32,446 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,488 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:32,511 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:32,560 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:33,366 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 11:42:33,467 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 11:42:33,468 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:33,468 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 11:42:33,468 - INFO - integration_test -   Control dict from planner: {'a': 2.6636543724939094e-07, 'w': -0.8000000097832723}
2026-01-21 11:42:33,468 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:33,468 - INFO - integration_test -   Planner output success: True
2026-01-21 11:42:33,469 - INFO - integration_test - Step 46 completed in 2.012s
2026-01-21 11:42:33,533 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 11:42:33,542 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[12.0354904   4.69350126 -0.02770352  3.00000003 13.19999981]
2026-01-21 11:42:33,542 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.798m, drift=0.016m)
2026-01-21 11:42:33,542 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 11:42:33,546 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:33,823 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(12.035, 4.694), path_start=(0.000, 0.000), dist=12.918m
2026-01-21 11:42:33,823 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=12.918m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:33,823 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 11:42:33,917 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:33,943 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:33,943 - INFO - integration_test - Warmstart k=0: x0=12.035490397939508 , y0=4.693501257357961 , psi0=-0.027703515444587143 , v0=3.000000029710533 , spline0=13.199999805094128 , a0=0.0 , w0=0.0
2026-01-21 11:42:33,943 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:33,944 - INFO - integration_test - Dyn residual k=0: pred=[12.335375285556946, 4.685191265702798, -0.027703515444587143, 3.000000029710533, 13.499999808065182], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.335375285556946, 4.685191265702798, -0.027703515444587143, 3.000000029710533, 13.499999808065182], res_norm=1.911e+01
2026-01-21 11:42:33,945 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:33,946 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:33,962 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,130 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,154 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,205 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,227 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,277 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,299 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,346 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,368 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,414 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,434 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,480 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,502 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,558 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,580 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,632 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,667 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,731 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:34,762 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,808 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:34,833 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:34,878 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:38,042 - WARNING - integration_test - Step 47: MPC solve failed
2026-01-21 11:42:38,042 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:42:38,148 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 11:42:38,149 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:38,149 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 11:42:38,149 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:38,149 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:38,149 - INFO - integration_test -   Planner output success: False
2026-01-21 11:42:38,149 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:42:38,150 - INFO - integration_test - Step 47 completed in 4.609s
2026-01-21 11:42:38,225 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 11:42:38,226 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.33537529  4.68519127 -0.02770352  3.00000003 13.49999981]
2026-01-21 11:42:38,226 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.874m, drift=0.316m)
2026-01-21 11:42:38,226 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 11:42:38,230 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:38,362 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.335, 4.685), path_start=(0.000, 0.000), dist=13.195m
2026-01-21 11:42:38,362 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.195m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:42:38,362 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 11:42:38,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:38,511 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:38,511 - INFO - integration_test - Warmstart k=0: x0=12.335375285556946 , y0=4.685191265702798 , psi0=-0.027703515444587143 , v0=3.000000029710533 , spline0=13.499999808065182 , a0=0.0 , w0=0.0
2026-01-21 11:42:38,511 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:38,512 - INFO - integration_test - Dyn residual k=0: pred=[12.635260173174384, 4.676881274047635, -0.027703515444587143, 3.000000029710533, 13.799999811036235], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.635260173174384, 4.676881274047635, -0.027703515444587143, 3.000000029710533, 13.799999811036235], res_norm=1.952e+01
2026-01-21 11:42:38,513 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:38,514 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:38,531 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:38,704 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:38,728 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:38,780 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:38,805 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:38,852 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:38,875 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:38,927 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:38,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:38,997 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:39,017 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:39,065 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:39,086 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:39,133 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:39,153 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:39,197 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:39,218 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:39,263 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:39,285 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:39,337 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:39,358 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:39,403 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
