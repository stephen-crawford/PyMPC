2026-01-21 11:42:56,120 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 11:42:56,120 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 11:42:56,120 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 11:42:56,120 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 11:42:56,120 - INFO - integration_test - Creating objective module: contouring
2026-01-21 11:42:56,127 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 11:42:56,127 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 11:42:56,127 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 11:42:56,136 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 11:42:56,136 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 11:42:56,145 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 11:42:56,145 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 11:42:56,162 - INFO - integration_test - Setting solver on all modules...
2026-01-21 11:42:56,162 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 11:42:56,162 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 11:42:56,162 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 11:42:56,162 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 11:42:56,162 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 11:42:56,162 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 11:42:56,163 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 11:42:56,164 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 11:42:56,164 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 11:42:56,164 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 11:42:56,164 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 11:42:56,164 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 11:42:56,164 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 11:42:56,164 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 11:42:56,164 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 11:42:56,164 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 11:42:56,165 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 11:42:56,165 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 11:42:56,165 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 11:42:56,165 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 11:42:56,168 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:56,182 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 11:42:56,182 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 11:42:56,319 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:56,347 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:56,347 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 11:42:56,347 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:56,348 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 11:42:56,349 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:56,350 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:56,367 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,527 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:56,549 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,593 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:56,611 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,656 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:56,675 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,721 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:56,741 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,798 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:56,827 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,900 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:56,932 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:56,997 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:57,026 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:57,090 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:57,118 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:57,177 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:57,204 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:57,270 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:57,293 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:57,341 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:58,450 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 11:42:58,685 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 11:42:58,686 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:42:58,686 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 11:42:58,686 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 11:42:58,686 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019657303, 'w': 0.7999999980973127}
2026-01-21 11:42:58,686 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:42:58,686 - INFO - integration_test -   Planner output success: True
2026-01-21 11:42:58,687 - INFO - integration_test - Step 0 completed in 2.523s
2026-01-21 11:42:58,747 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 11:42:58,749 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 11:42:58,750 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 11:42:58,750 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 11:42:58,753 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:58,857 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 11:42:58,857 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 11:42:58,945 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:42:58,974 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:42:58,975 - INFO - integration_test - Warmstart k=0: x0=0.10987737537990319 , y0=0.004530845047544269 , psi0=0.07999999980973126 , v0=1.2000000019657302 , spline0=0.12000000019657303 , a0=0.0 , w0=0.0
2026-01-21 11:42:58,975 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:42:58,976 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033398645, 0.014120608316794838, 0.07999999980973126, 1.2000000019657302, 0.24000000039314606], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033398645, 0.014120608316794838, 0.07999999980973126, 1.2000000019657302, 0.24000000039314606], res_norm=1.248e+00
2026-01-21 11:42:58,977 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:58,977 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:42:58,998 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,180 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,201 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,246 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,268 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,314 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,338 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,390 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,410 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,456 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,477 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,518 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,538 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,586 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,605 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,651 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,671 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,712 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:42:59,733 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,778 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:42:59,798 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:42:59,842 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:00,493 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 11:43:00,580 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 11:43:00,580 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:00,580 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 11:43:00,581 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000189134983, 'w': 0.7999999604514912}
2026-01-21 11:43:00,581 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:00,581 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:00,582 - INFO - integration_test - Step 1 completed in 1.834s
2026-01-21 11:43:00,629 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 11:43:00,632 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.16       1.4        0.26      ]
2026-01-21 11:43:00,632 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 11:43:00,632 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 11:43:00,635 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:00,733 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 11:43:00,733 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 11:43:00,821 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:00,846 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:00,846 - INFO - integration_test - Warmstart k=0: x0=0.23889212821907735 , y0=0.02022162146326865 , psi0=0.1599999958548804 , v0=1.4000000038570801 , spline0=0.260000000582281 , a0=0.0 , w0=0.0
2026-01-21 11:43:00,846 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:00,847 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394836490163, 0.04252616987780887, 0.1599999958548804, 1.4000000038570801, 0.40000000096798904], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394836490163, 0.04252616987780887, 0.1599999958548804, 1.4000000038570801, 0.40000000096798904], res_norm=1.513e+00
2026-01-21 11:43:00,848 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:00,849 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:00,864 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,013 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,035 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,082 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,104 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,150 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,174 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,220 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,239 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,289 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,309 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,358 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,381 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,428 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,448 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,494 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,515 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,563 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:01,585 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,630 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:01,652 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:01,695 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:02,311 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 11:43:02,358 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 11:43:02,358 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:02,359 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 11:43:02,359 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019919536, 'w': 0.8000000050713322}
2026-01-21 11:43:02,359 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:02,359 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:02,360 - INFO - integration_test - Step 2 completed in 1.729s
2026-01-21 11:43:02,413 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 11:43:02,414 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.24       1.60000001 0.42      ]
2026-01-21 11:43:02,415 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 11:43:02,415 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 11:43:02,417 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:02,518 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 11:43:02,518 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 11:43:02,616 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:02,640 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:02,640 - INFO - integration_test - Warmstart k=0: x0=0.3858364358690442 , y0=0.05014471559507366 , psi0=0.23999999636201363 , v0=1.6000000058490338 , spline0=0.4200000011671844 , a0=0.0 , w0=0.0
2026-01-21 11:43:02,640 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:02,641 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505125518692, 0.08817713539705398, 0.23999999636201363, 1.6000000058490338, 0.5800000017520878], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505125518692, 0.08817713539705398, 0.23999999636201363, 1.6000000058490338, 0.5800000017520878], res_norm=1.804e+00
2026-01-21 11:43:02,642 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:02,643 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:02,658 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:02,855 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:02,876 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:02,923 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:02,947 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:02,997 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,020 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,065 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,088 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,169 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,192 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,250 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,270 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,314 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,335 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,386 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,408 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,453 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:03,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,518 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:03,535 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:03,583 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:04,222 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 11:43:04,265 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 11:43:04,265 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:04,265 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 11:43:04,265 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199996646, 'w': 0.8000000099717826}
2026-01-21 11:43:04,265 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:04,265 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:04,266 - INFO - integration_test - Step 3 completed in 1.853s
2026-01-21 11:43:04,323 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 11:43:04,324 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724076 0.32       1.80000001 0.6       ]
2026-01-21 11:43:04,325 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 11:43:04,325 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 11:43:04,327 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:04,436 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 11:43:04,436 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 11:43:04,526 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:04,552 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:04,552 - INFO - integration_test - Warmstart k=0: x0=0.5491354615534519 , y0=0.09724075563467725 , psi0=0.3199999973591919 , v0=1.8000000078490004 , spline0=0.6000000019520845 , a0=0.0 , w0=0.0
2026-01-21 11:43:04,552 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:04,553 - INFO - integration_test - Dyn residual k=0: pred=[0.719997837702874, 0.15386273634126701, 0.3199999973591919, 1.8000000078490004, 0.7800000027369846], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.719997837702874, 0.15386273634126701, 0.3199999973591919, 1.8000000078490004, 0.7800000027369846], res_norm=2.120e+00
2026-01-21 11:43:04,553 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:04,554 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:04,570 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:04,714 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:04,734 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:04,781 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:04,803 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:04,847 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:04,868 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:04,912 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:04,931 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:04,979 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:05,001 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:05,047 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:05,068 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:05,114 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:05,135 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:05,183 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:05,203 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:05,250 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:05,270 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:05,315 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:05,335 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:05,383 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:05,992 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 11:43:06,104 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 11:43:06,105 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:06,105 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 11:43:06,105 - INFO - integration_test -   Control dict from planner: {'a': 2.00000001999563, 'w': 0.8000000094102158}
2026-01-21 11:43:06,105 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:06,105 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:06,106 - INFO - integration_test - Step 4 completed in 1.782s
2026-01-21 11:43:06,157 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 11:43:06,163 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 11:43:06,164 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 11:43:06,164 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 11:43:06,169 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:06,285 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 11:43:06,285 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 11:43:06,387 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:06,411 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:06,411 - INFO - integration_test - Warmstart k=0: x0=0.7268614891998515 , y0=0.164279766673173 , psi0=0.3999999983002135 , v0=2.0000000098485633 , spline0=0.8000000029369408 , a0=0.0 , w0=0.0
2026-01-21 11:43:06,411 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:06,412 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736890399268, 0.2421634352053028, 0.3999999983002135, 2.0000000098485633, 1.000000003921797], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736890399268, 0.2421634352053028, 0.3999999983002135, 2.0000000098485633, 1.000000003921797], res_norm=2.459e+00
2026-01-21 11:43:06,413 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:06,414 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:06,430 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:06,573 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:06,594 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:06,640 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:06,661 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:06,713 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:06,740 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:06,791 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:06,815 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:06,873 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:06,896 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:06,941 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:06,963 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:07,010 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:07,030 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:07,074 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:07,094 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:07,140 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:07,163 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:07,205 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:07,224 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:07,270 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:08,081 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 11:43:08,131 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 11:43:08,131 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:08,131 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 11:43:08,131 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000197063867, 'w': 0.7999999149904803}
2026-01-21 11:43:08,131 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:08,131 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:08,132 - INFO - integration_test - Step 5 completed in 1.969s
2026-01-21 11:43:08,194 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 11:43:08,195 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.9167519  0.25382381 0.47999999 2.20000001 1.02      ]
2026-01-21 11:43:08,196 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 11:43:08,196 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 11:43:08,198 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:08,303 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 11:43:08,303 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 11:43:08,402 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:08,426 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:08,426 - INFO - integration_test - Warmstart k=0: x0=0.9167519038816316 , y0=0.25382380562077367 , psi0=0.4799999897992615 , v0=2.200000011819202 , spline0=1.020000004118861 , a0=0.0 , w0=0.0
2026-01-21 11:43:08,426 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:08,427 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907889777387, 0.3554152227951253, 0.4799999897992615, 2.200000011819202, 1.2400000053007814], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907889777387, 0.3554152227951253, 0.4799999897992615, 2.200000011819202, 1.2400000053007814], res_norm=2.823e+00
2026-01-21 11:43:08,428 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:08,429 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:08,445 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,594 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:08,615 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,665 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:08,685 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,725 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:08,743 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,793 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:08,813 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,862 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:08,885 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,929 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:08,951 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:08,999 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:09,019 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:09,063 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:09,083 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:09,129 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:09,150 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:09,194 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:09,214 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:09,258 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:10,002 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 11:43:10,116 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 11:43:10,117 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:10,117 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 11:43:10,117 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199956918, 'w': 0.7999999970807923}
2026-01-21 11:43:10,117 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:10,117 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:10,118 - INFO - integration_test - Step 6 completed in 1.923s
2026-01-21 11:43:10,169 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 11:43:10,175 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623087 0.36819144 0.55999999 2.40000001 1.26000001]
2026-01-21 11:43:10,176 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 11:43:10,176 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 11:43:10,179 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:10,286 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 11:43:10,286 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 11:43:10,386 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:10,413 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:10,413 - INFO - integration_test - Warmstart k=0: x0=1.1162308653367699 , y0=0.3681914430172914 , psi0=0.5599999895073408 , v0=2.400000013818771 , spline0=1.260000005500738 , a0=0.0 , w0=0.0
2026-01-21 11:43:10,413 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:10,415 - INFO - integration_test - Dyn residual k=0: pred=[1.3195720944884455, 0.49567612911874726, 0.5599999895073408, 2.400000013818771, 1.5000000068826151], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195720944884455, 0.49567612911874726, 0.5599999895073408, 2.400000013818771, 1.5000000068826151], res_norm=3.211e+00
2026-01-21 11:43:10,416 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:10,417 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:10,433 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,573 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:10,593 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,641 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:10,663 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,708 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:10,730 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,780 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:10,801 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,847 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:10,868 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,912 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:10,932 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:10,983 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:11,015 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:11,088 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:11,108 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:11,152 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:11,175 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:11,222 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:11,243 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:11,286 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:12,047 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 11:43:12,097 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 11:43:12,098 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:12,098 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 11:43:12,098 - INFO - integration_test -   Control dict from planner: {'a': 2.000000016434233, 'w': -0.17949839846421}
2026-01-21 11:43:12,098 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:12,098 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:12,099 - INFO - integration_test - Step 7 completed in 1.924s
2026-01-21 11:43:12,156 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 11:43:12,159 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32924074 0.49905441 0.54205015 2.60000002 1.52000001]
2026-01-21 11:43:12,160 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 11:43:12,160 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 11:43:12,163 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:12,266 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 11:43:12,266 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 11:43:12,433 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:12,462 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:12,462 - INFO - integration_test - Warmstart k=0: x0=1.329240740859627 , y0=0.4990544113129899 , psi0=0.5420501496609198 , v0=2.6000000154621943 , spline0=1.5200000070469575 , a0=0.0 , w0=0.0
2026-01-21 11:43:12,462 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:12,463 - INFO - integration_test - Dyn residual k=0: pred=[1.5519704763852942, 0.6331866807961402, 0.5420501496609198, 2.6000000154621943, 1.7800000085931769], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5519704763852942, 0.6331866807961402, 0.5420501496609198, 2.6000000154621943, 1.7800000085931769], res_norm=3.610e+00
2026-01-21 11:43:12,464 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:12,466 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:12,484 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:12,637 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:12,661 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:12,708 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:12,728 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:12,773 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:12,794 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:12,842 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:12,863 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:12,909 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:12,930 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:12,975 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:12,996 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:13,041 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:13,061 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:13,106 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:13,126 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:13,172 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:13,194 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:13,237 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:13,260 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:13,303 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:13,906 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 11:43:13,952 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 11:43:13,953 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:13,953 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 11:43:13,953 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000056622658, 'w': -0.031177702293157673}
2026-01-21 11:43:13,953 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:13,953 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:13,954 - INFO - integration_test - Step 8 completed in 1.795s
2026-01-21 11:43:14,013 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 11:43:14,016 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56075644 0.63798037 0.53893238 2.80000002 1.80000001]
2026-01-21 11:43:14,017 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 11:43:14,017 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 11:43:14,019 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:14,117 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 11:43:14,117 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 11:43:14,210 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:14,234 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:14,235 - INFO - integration_test - Warmstart k=0: x0=1.5607564425208824 , y0=0.6379803689652002 , psi0=0.538932379431604 , v0=2.800000016028421 , spline0=1.8000000086497996 , a0=0.0 , w0=0.0
2026-01-21 11:43:14,235 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:14,235 - INFO - integration_test - Dyn residual k=0: pred=[1.8010684303859874, 0.7816819673763284, 0.538932379431604, 2.800000016028421, 2.0800000102526415], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8010684303859874, 0.7816819673763284, 0.538932379431604, 2.800000016028421, 2.0800000102526415], res_norm=4.039e+00
2026-01-21 11:43:14,236 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:14,237 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:14,253 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,398 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,420 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,468 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,490 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,534 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,556 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,605 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,625 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,672 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,693 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,736 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,759 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,805 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,827 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,874 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,894 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:14,940 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:14,961 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:15,008 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:15,028 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:15,075 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:15,772 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 11:43:15,904 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 11:43:15,904 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:15,904 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 11:43:15,904 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199131014, 'w': -0.07914287668409373}
2026-01-21 11:43:15,904 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:15,904 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:15,905 - INFO - integration_test - Step 9 completed in 1.890s
2026-01-21 11:43:15,965 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 11:43:15,966 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81024408 0.78581636 0.53101809 3.00000002 2.10000001]
2026-01-21 11:43:15,967 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 11:43:15,967 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 11:43:15,970 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:16,072 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 11:43:16,072 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 11:43:16,163 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:16,189 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:16,190 - INFO - integration_test - Warmstart k=0: x0=1.8102440815574796 , y0=0.7858163597010762 , psi0=0.5310180917631946 , v0=3.000000018019731 , spline0=2.100000010451773 , a0=0.0 , w0=0.0
2026-01-21 11:43:16,190 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:16,191 - INFO - integration_test - Dyn residual k=0: pred=[2.0689316663468778, 0.9377398093624496, 0.5310180917631946, 3.000000018019731, 2.400000012253746], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.0689316663468778, 0.9377398093624496, 0.5310180917631946, 3.000000018019731, 2.400000012253746], res_norm=4.495e+00
2026-01-21 11:43:16,192 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:16,193 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:16,209 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,349 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,369 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,421 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,444 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,491 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,511 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,559 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,579 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,628 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,649 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,695 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,715 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,762 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,783 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,828 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,847 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,896 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:16,915 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:16,960 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:16,982 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:17,030 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:17,656 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 11:43:17,707 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 11:43:17,707 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:17,707 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 11:43:17,707 - INFO - integration_test -   Control dict from planner: {'a': 9.622700566144278e-08, 'w': -0.06257873023642516}
2026-01-21 11:43:17,707 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:17,707 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:17,708 - INFO - integration_test - Step 10 completed in 1.742s
2026-01-21 11:43:17,771 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 11:43:17,773 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06940534 0.9369294  0.52476022 3.00000003 2.40000001]
2026-01-21 11:43:17,773 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 11:43:17,773 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 11:43:17,776 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:17,883 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 11:43:17,883 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 11:43:17,976 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:18,000 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:18,000 - INFO - integration_test - Warmstart k=0: x0=2.0694053356339053 , y0=0.9369294036402513 , psi0=0.524760218739552 , v0=3.0000000276424315 , spline0=2.400000013216016 , a0=0.0 , w0=0.0
2026-01-21 11:43:18,000 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:18,001 - INFO - integration_test - Dyn residual k=0: pred=[2.3290385674957674, 1.0872310555656726, 0.524760218739552, 3.0000000276424315, 2.7000000159802595], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3290385674957674, 1.0872310555656726, 0.524760218739552, 3.0000000276424315, 2.7000000159802595], res_norm=4.814e+00
2026-01-21 11:43:18,002 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:18,003 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:18,020 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,243 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,265 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,311 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,330 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,377 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,400 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,449 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,474 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,519 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,538 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,584 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,605 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,651 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,675 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,718 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,739 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,786 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:18,808 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,854 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:18,874 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:18,918 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:19,545 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 11:43:19,602 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 11:43:19,602 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:19,602 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 11:43:19,602 - INFO - integration_test -   Control dict from planner: {'a': -1.1974303280186463e-08, 'w': -0.06509050511570241}
2026-01-21 11:43:19,602 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:19,602 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:19,603 - INFO - integration_test - Step 11 completed in 1.831s
2026-01-21 11:43:19,662 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 11:43:19,663 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32952589 1.08638501 0.51825117 3.00000003 2.70000002]
2026-01-21 11:43:19,663 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 11:43:19,663 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 11:43:19,666 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:19,764 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.330, 1.086), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 11:43:19,764 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 11:43:19,859 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:19,885 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:19,885 - INFO - integration_test - Warmstart k=0: x0=2.3295258928975144 , y0=1.0863850142877223 , psi0=0.5182511682279818 , v0=3.0000000264450013 , spline0=2.700000015860516 , a0=0.0 , w0=0.0
2026-01-21 11:43:19,885 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:19,886 - INFO - integration_test - Dyn residual k=0: pred=[2.5901319387744923, 1.2349935283071636, 0.5182511682279818, 3.0000000264450013, 3.000000018505016], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5901319387744923, 1.2349935283071636, 0.5182511682279818, 3.0000000264450013, 3.000000018505016], res_norm=5.148e+00
2026-01-21 11:43:19,887 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:19,888 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:19,904 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,050 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,071 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,117 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,137 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,187 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,208 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,252 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,275 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,318 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,336 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,382 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,404 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,454 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,474 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,518 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,540 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,586 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:20,605 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,649 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:20,669 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:20,712 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:21,428 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 11:43:21,492 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 11:43:21,492 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:21,492 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 11:43:21,492 - INFO - integration_test -   Control dict from planner: {'a': 3.554879272256229e-08, 'w': -0.048408294766760486}
2026-01-21 11:43:21,492 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:21,492 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:21,494 - INFO - integration_test - Step 12 completed in 1.831s
2026-01-21 11:43:21,558 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 11:43:21,559 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59049061 1.23436217 0.51341034 3.00000003 3.00000002]
2026-01-21 11:43:21,559 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 11:43:21,559 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 11:43:21,562 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:21,741 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.234), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 11:43:21,741 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 11:43:21,830 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:21,858 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:21,858 - INFO - integration_test - Warmstart k=0: x0=2.590490614641309 , y0=1.2343621745067015 , psi0=0.5134103387513057 , v0=3.0000000299998804 , spline0=3.0000000188605043 , a0=0.0 , w0=0.0
2026-01-21 11:43:21,859 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:21,859 - INFO - integration_test - Dyn residual k=0: pred=[2.8518129930265825, 1.3817074029841, 0.5134103387513057, 3.0000000299998804, 3.3000000218604923], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8518129930265825, 1.3817074029841, 0.5134103387513057, 3.0000000299998804, 3.3000000218604923], res_norm=5.495e+00
2026-01-21 11:43:21,860 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:21,861 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:21,876 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,022 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,042 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,087 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,107 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,155 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,175 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,222 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,242 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,288 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,309 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,352 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,373 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,420 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,440 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,488 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,507 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,557 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:22,580 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,625 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:22,644 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:22,691 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:24,721 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 11:43:24,785 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 11:43:24,785 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:24,785 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 11:43:24,785 - INFO - integration_test -   Control dict from planner: {'a': -1.432630087208113e-07, 'w': -0.06953306862011924}
2026-01-21 11:43:24,785 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:24,785 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:24,787 - INFO - integration_test - Step 13 completed in 3.228s
2026-01-21 11:43:24,854 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 11:43:24,855 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85232315 1.38079769 0.50645703 3.00000002 3.30000002]
2026-01-21 11:43:24,856 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.147m, drift=0.370m)
2026-01-21 11:43:24,856 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 11:43:24,859 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:24,958 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 11:43:24,958 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 11:43:25,053 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:25,077 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:25,078 - INFO - integration_test - Warmstart k=0: x0=2.85232315288001 , y0=1.380797691635694 , psi0=0.5064570318892938 , v0=3.0000000156735793 , spline0=3.3000000204278623 , a0=0.0 , w0=0.0
2026-01-21 11:43:25,078 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:25,078 - INFO - integration_test - Dyn residual k=0: pred=[3.114663741101014, 1.526322317428968, 0.5064570318892938, 3.0000000156735793, 3.6000000219952204], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114663741101014, 1.526322317428968, 0.5064570318892938, 3.0000000156735793, 3.6000000219952204], res_norm=5.852e+00
2026-01-21 11:43:25,079 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:25,080 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:25,095 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,241 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,264 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,310 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,330 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,376 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,398 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,447 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,469 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,515 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,537 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,583 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,604 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,650 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,672 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,718 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,737 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,784 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:25,805 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,852 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:25,874 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:25,918 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:26,520 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 11:43:26,682 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 11:43:26,683 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:26,683 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 11:43:26,683 - INFO - integration_test -   Control dict from planner: {'a': 1.4116080749848828e-07, 'w': -0.05322743544179774}
2026-01-21 11:43:26,683 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:26,683 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:26,684 - INFO - integration_test - Step 14 completed in 1.829s
2026-01-21 11:43:26,733 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 11:43:26,734 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.1150498  1.52562345 0.50113429 3.00000003 3.60000002]
2026-01-21 11:43:26,735 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 11:43:26,735 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 11:43:26,737 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:26,842 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 11:43:26,842 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 11:43:26,940 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:26,966 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:26,966 - INFO - integration_test - Warmstart k=0: x0=3.115049797183379 , y0=1.525623446424836 , psi0=0.5011342883451141 , v0=3.00000002978966 , spline0=3.600000023406828 , a0=0.0 , w0=0.0
2026-01-21 11:43:26,966 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:26,967 - INFO - integration_test - Dyn residual k=0: pred=[3.378161256991941, 1.669749646349718, 0.5011342883451141, 3.00000002978966, 3.9000000263857943], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.378161256991941, 1.669749646349718, 0.5011342883451141, 3.00000002978966, 3.9000000263857943], res_norm=6.218e+00
2026-01-21 11:43:26,968 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:26,969 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:26,985 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,141 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,164 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,211 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,230 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,278 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,300 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,346 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,367 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,414 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,434 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,482 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,504 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,551 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,572 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,625 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,645 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,694 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:27,716 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,759 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:27,779 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:27,824 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:28,468 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 11:43:28,528 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 11:43:28,528 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:28,529 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 11:43:28,529 - INFO - integration_test -   Control dict from planner: {'a': -3.0075764671010615e-08, 'w': -0.054876345245094584}
2026-01-21 11:43:28,529 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:28,529 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:28,530 - INFO - integration_test - Step 15 completed in 1.796s
2026-01-21 11:43:28,586 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 11:43:28,587 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37855539 1.66902699 0.49564665 3.00000003 3.90000003]
2026-01-21 11:43:28,588 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-21 11:43:28,588 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 11:43:28,591 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:28,698 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.379, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 11:43:28,698 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 11:43:28,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:28,819 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:28,819 - INFO - integration_test - Warmstart k=0: x0=3.3785553912625232 , y0=1.6690269949528749 , psi0=0.49564665382060463 , v0=3.0000000267820837 , spline0=3.9000000260850367 , a0=0.0 , w0=0.0
2026-01-21 11:43:28,819 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:28,820 - INFO - integration_test - Dyn residual k=0: pred=[3.6424537970707536, 1.8117071723385214, 0.49564665382060463, 3.0000000267820837, 4.200000028763245], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.6424537970707536, 1.8117071723385214, 0.49564665382060463, 3.0000000267820837, 4.200000028763245], res_norm=6.591e+00
2026-01-21 11:43:28,821 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:28,822 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:28,838 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,079 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,099 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,145 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,166 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,213 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,234 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,282 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,302 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,345 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,368 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,415 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,437 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,484 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,505 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,552 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,574 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,621 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:29,642 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,688 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:29,709 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:29,752 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:30,441 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 11:43:30,509 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 11:43:30,510 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:30,510 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 11:43:30,510 - INFO - integration_test -   Control dict from planner: {'a': 3.2177889456016783e-08, 'w': -0.0644254752357332}
2026-01-21 11:43:30,510 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:30,510 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:30,511 - INFO - integration_test - Step 16 completed in 1.924s
2026-01-21 11:43:30,568 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 11:43:30,571 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64291158 1.8108561  0.48920411 3.00000003 4.20000003]
2026-01-21 11:43:30,572 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.144m, drift=0.294m)
2026-01-21 11:43:30,572 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 11:43:30,574 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:30,719 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 11:43:30,719 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 11:43:30,816 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:30,842 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:30,842 - INFO - integration_test - Warmstart k=0: x0=3.6429115819589444 , y0=1.8108560993226384 , psi0=0.4892041062970313 , v0=3.000000029999873 , spline0=4.200000029085024 , a0=0.0 , w0=0.0
2026-01-21 11:43:30,842 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:30,843 - INFO - integration_test - Dyn residual k=0: pred=[3.9077237287958497, 1.951833149538699, 0.4892041062970313, 3.000000029999873, 4.500000032085012], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9077237287958497, 1.951833149538699, 0.4892041062970313, 3.000000029999873, 4.500000032085012], res_norm=6.969e+00
2026-01-21 11:43:30,845 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:30,846 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:30,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,012 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,033 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,080 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,101 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,147 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,168 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,214 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,283 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,303 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,348 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,371 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,418 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,440 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,486 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,506 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,553 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:31,574 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,621 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:31,639 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:31,683 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:32,980 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 11:43:33,145 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 11:43:33,146 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:33,146 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 11:43:33,146 - INFO - integration_test -   Control dict from planner: {'a': -0.00012004086664590026, 'w': -0.06630371187600348}
2026-01-21 11:43:33,146 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:33,146 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:33,147 - INFO - integration_test - Step 17 completed in 2.576s
2026-01-21 11:43:33,205 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 11:43:33,206 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90818862 1.95095394 0.48257374 2.99998803 4.49999883]
2026-01-21 11:43:33,206 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 11:43:33,206 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 11:43:33,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:33,319 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 11:43:33,319 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 11:43:33,415 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:33,440 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:33,440 - INFO - integration_test - Warmstart k=0: x0=3.9081886208577377 , y0=1.950953938703152 , psi0=0.48257373510943097 , v0=2.999988025913208 , spline0=4.499998831676345 , a0=0.0 , w0=0.0
2026-01-21 11:43:33,440 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:33,441 - INFO - integration_test - Dyn residual k=0: pred=[4.17392860690068, 2.090171543100452, 0.48257373510943097, 2.999988025913208, 4.799997634267666], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.17392860690068, 2.090171543100452, 0.48257373510943097, 2.999988025913208, 4.799997634267666], res_norm=7.353e+00
2026-01-21 11:43:33,441 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:33,442 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:33,459 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:33,613 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:33,636 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:33,684 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:33,706 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:33,754 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:33,775 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:33,823 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:33,843 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:33,890 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:33,911 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:33,957 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:33,978 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:34,027 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:34,049 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:34,095 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:34,114 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:34,160 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:34,180 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:34,227 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:34,247 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:34,292 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:35,370 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 11:43:35,435 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 11:43:35,436 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:35,436 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 11:43:35,436 - INFO - integration_test -   Control dict from planner: {'a': 0.0001200408666032851, 'w': -0.04680028403372449}
2026-01-21 11:43:35,436 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:35,436 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:35,437 - INFO - integration_test - Step 18 completed in 2.232s
2026-01-21 11:43:35,501 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 11:43:35,507 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17425394 2.08954948 0.47789371 3.00000003 4.79999883]
2026-01-21 11:43:35,507 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 11:43:35,507 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 11:43:35,510 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:35,613 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 11:43:35,614 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 11:43:35,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:35,737 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:35,737 - INFO - integration_test - Warmstart k=0: x0=4.174253939938779 , y0=2.0895494775594328 , psi0=0.4778937067060585 , v0=3.0000000299998684 , spline0=4.799998834676332 , a0=0.0 , w0=0.0
2026-01-21 11:43:35,737 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:35,738 - INFO - integration_test - Dyn residual k=0: pred=[4.440643621665983, 2.22752244327834, 0.4778937067060585, 3.0000000299998684, 5.099998837676319], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440643621665983, 2.22752244327834, 0.4778937067060585, 3.0000000299998684, 5.099998837676319], res_norm=7.741e+00
2026-01-21 11:43:35,738 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:35,739 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:35,756 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:35,910 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:35,930 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:35,975 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:35,996 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,044 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,066 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,110 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,129 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,178 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,199 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,248 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,269 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,314 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,336 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,381 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,401 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,449 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:36,472 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,517 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:36,536 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:36,584 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:37,148 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 11:43:37,313 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 11:43:37,313 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:37,313 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 11:43:37,313 - INFO - integration_test -   Control dict from planner: {'a': -4.7173901736844265e-08, 'w': -0.06540338077912351}
2026-01-21 11:43:37,313 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:37,313 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:37,314 - INFO - integration_test - Step 19 completed in 1.808s
2026-01-21 11:43:37,373 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 11:43:37,374 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44109292 2.22665032 0.47135337 3.00000003 5.09999884]
2026-01-21 11:43:37,374 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.154m, drift=0.217m)
2026-01-21 11:43:37,374 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 11:43:37,378 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:37,490 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 11:43:37,490 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 11:43:37,594 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:37,624 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:37,624 - INFO - integration_test - Warmstart k=0: x0=4.4410929155908265 , y0=2.2266503233330295 , psi0=0.47135336862814614 , v0=3.0000000252824783 , spline0=5.09999883720458 , a0=0.0 , w0=0.0
2026-01-21 11:43:37,624 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:37,625 - INFO - integration_test - Dyn residual k=0: pred=[4.708379282780563, 2.362878071723223, 0.47135336862814614, 3.0000000252824783, 5.399998839732827], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.708379282780563, 2.362878071723223, 0.47135336862814614, 3.0000000252824783, 5.399998839732827], res_norm=8.132e+00
2026-01-21 11:43:37,626 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:37,626 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:37,642 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:37,812 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:37,834 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:37,884 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:37,907 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:37,958 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:37,978 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,028 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:38,049 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,096 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:38,116 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,162 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:38,183 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,232 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:38,251 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,297 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:38,317 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,363 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:38,384 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,431 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:38,452 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:38,498 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:39,289 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 11:43:39,350 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 11:43:39,350 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:39,350 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 11:43:39,351 - INFO - integration_test -   Control dict from planner: {'a': -3.233900543065575e-05, 'w': -0.053454231382492085}
2026-01-21 11:43:39,351 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:39,351 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:39,352 - INFO - integration_test - Step 20 completed in 1.978s
2026-01-21 11:43:39,413 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 11:43:39,414 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70874196 2.36216297 0.46600795 2.99999679 5.39999852]
2026-01-21 11:43:39,415 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 11:43:39,415 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 11:43:39,418 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:39,521 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.709, 2.362), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 11:43:39,521 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 11:43:39,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:39,748 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:39,748 - INFO - integration_test - Warmstart k=0: x0=4.708741962184443 , y0=2.3621629723970727 , psi0=0.46600794548989694 , v0=2.9999967913819354 , spline0=5.399998516342773 , a0=0.0 , w0=0.0
2026-01-21 11:43:39,748 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:39,749 - INFO - integration_test - Dyn residual k=0: pred=[4.97675241330706, 2.4969598773024546, 0.46600794548989694, 2.9999967913819354, 5.699998195480966], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.97675241330706, 2.4969598773024546, 0.46600794548989694, 2.9999967913819354, 5.699998195480966], res_norm=8.527e+00
2026-01-21 11:43:39,749 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:39,750 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:39,766 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:39,929 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:39,949 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:39,997 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,017 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,066 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,086 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,132 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,153 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,200 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,220 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,268 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,287 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,334 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,356 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,405 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,428 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,473 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:40,495 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,541 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:40,561 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:40,605 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:41,349 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 11:43:41,424 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 11:43:41,424 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:41,424 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 11:43:41,424 - INFO - integration_test -   Control dict from planner: {'a': 3.238617925833622e-05, 'w': -0.037460107766147936}
2026-01-21 11:43:41,424 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:41,424 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:41,425 - INFO - integration_test - Step 21 completed in 2.011s
2026-01-21 11:43:41,486 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 11:43:41,491 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97700441 2.49645765 0.46226193 3.00000003 5.69999852]
2026-01-21 11:43:41,492 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 11:43:41,492 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 11:43:41,495 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:41,613 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.496), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 11:43:41,613 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 11:43:41,723 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:41,751 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:41,751 - INFO - integration_test - Warmstart k=0: x0=4.9770044063729895 , y0=2.4964576500100137 , psi0=0.46226193471328214 , v0=3.0000000299998613 , spline0=5.699998519342759 , a0=0.0 , w0=0.0
2026-01-21 11:43:41,751 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:41,752 - INFO - integration_test - Dyn residual k=0: pred=[5.245518216405193, 2.6302497858849647, 0.46226193471328214, 3.0000000299998613, 5.999998522342745], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245518216405193, 2.6302497858849647, 0.46226193471328214, 3.0000000299998613, 5.999998522342745], res_norm=8.925e+00
2026-01-21 11:43:41,753 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:41,753 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:41,771 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:41,952 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:41,976 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,028 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,051 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,101 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,122 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,174 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,196 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,243 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,263 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,314 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,334 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,382 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,402 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,449 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,470 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,517 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:42,541 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,590 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:42,613 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:42,664 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:43,259 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 11:43:43,436 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 11:43:43,437 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:43,437 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 11:43:43,437 - INFO - integration_test -   Control dict from planner: {'a': -4.332004115882604e-07, 'w': -0.08650284337040354}
2026-01-21 11:43:43,437 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:43,437 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:43,439 - INFO - integration_test - Step 22 completed in 1.948s
2026-01-21 11:43:43,503 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 11:43:43,504 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24609353 2.62908676 0.45361165 2.99999999 5.99999852]
2026-01-21 11:43:43,505 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 11:43:43,505 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 11:43:43,508 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:43,613 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 11:43:43,613 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 11:43:43,713 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:43,738 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:43,738 - INFO - integration_test - Warmstart k=0: x0=5.246093532175139 , y0=2.629086763222494 , psi0=0.4536116503762418 , v0=2.99999998667982 , spline0=5.999998518010741 , a0=0.0 , w0=0.0
2026-01-21 11:43:43,738 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:43,739 - INFO - integration_test - Dyn residual k=0: pred=[5.515754617862347, 2.760551199732089, 0.4536116503762418, 2.99999998667982, 6.2999985166787225], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515754617862347, 2.760551199732089, 0.4536116503762418, 2.99999998667982, 6.2999985166787225], res_norm=9.324e+00
2026-01-21 11:43:43,739 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:43,740 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:43,758 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:43,921 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:43,943 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:43,988 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,014 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,092 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,124 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,174 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,193 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,246 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,266 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,315 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,335 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,379 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,399 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,447 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,469 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,515 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:44,540 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,584 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:44,603 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:44,651 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:45,339 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 11:43:45,414 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 11:43:45,415 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:45,415 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 11:43:45,415 - INFO - integration_test -   Control dict from planner: {'a': 4.332003633087938e-07, 'w': -0.05338721558006194}
2026-01-21 11:43:45,415 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:45,415 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:45,417 - INFO - integration_test - Step 23 completed in 1.913s
2026-01-21 11:43:45,475 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 11:43:45,476 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51610426 2.75983076 0.44827293 3.00000003 6.29999852]
2026-01-21 11:43:45,477 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 11:43:45,477 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 11:43:45,480 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:45,584 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 11:43:45,584 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 11:43:45,682 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:45,707 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:45,707 - INFO - integration_test - Warmstart k=0: x0=5.516104264014014 , y0=2.759830755160438 , psi0=0.4482729288182356 , v0=3.0000000299998564 , spline0=6.2999985210107265 , a0=0.0 , w0=0.0
2026-01-21 11:43:45,708 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:45,708 - INFO - integration_test - Dyn residual k=0: pred=[5.786463359368518, 2.889853681443017, 0.4482729288182356, 3.0000000299998564, 6.599998524010712], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786463359368518, 2.889853681443017, 0.4482729288182356, 3.0000000299998564, 6.599998524010712], res_norm=9.726e+00
2026-01-21 11:43:45,709 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:45,710 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:45,725 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:45,890 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:45,912 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:45,961 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:45,984 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,034 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,058 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,105 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,126 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,171 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,192 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,238 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,260 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,304 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,323 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,371 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,393 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,441 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:46,462 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,508 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:46,527 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:46,575 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:47,327 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 11:43:47,514 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 11:43:47,515 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:47,515 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 11:43:47,515 - INFO - integration_test -   Control dict from planner: {'a': -3.207050531157363e-08, 'w': -0.024015556117155938}
2026-01-21 11:43:47,515 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:47,515 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:47,516 - INFO - integration_test - Step 24 completed in 2.040s
2026-01-21 11:43:47,577 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 11:43:47,578 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78661923 2.88952892 0.44587137 3.00000003 6.59999852]
2026-01-21 11:43:47,579 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-21 11:43:47,579 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 11:43:47,582 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:47,706 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.890), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 11:43:47,706 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 11:43:47,836 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:47,866 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:47,866 - INFO - integration_test - Warmstart k=0: x0=5.786619227911771 , y0=2.88952891534463 , psi0=0.44587137320652004 , v0=3.0000000267928058 , spline0=6.599998523690007 , a0=0.0 , w0=0.0
2026-01-21 11:43:47,866 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:47,867 - INFO - integration_test - Dyn residual k=0: pred=[6.057289800321511, 3.018902184758958, 0.44587137320652004, 3.0000000267928058, 6.899998526369288], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.057289800321511, 3.018902184758958, 0.44587137320652004, 3.0000000267928058, 6.899998526369288], res_norm=1.013e+01
2026-01-21 11:43:47,868 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:47,869 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:47,887 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,055 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,075 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,122 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,142 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,186 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,206 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,255 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,275 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,322 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,342 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,387 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,407 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,453 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,475 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,520 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,541 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,590 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:48,611 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,662 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:48,682 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:48,725 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:49,339 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 11:43:49,409 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 11:43:49,409 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:49,409 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 11:43:49,409 - INFO - integration_test -   Control dict from planner: {'a': -3.326721856933909e-07, 'w': -0.10607516604893766}
2026-01-21 11:43:49,409 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:49,409 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:49,410 - INFO - integration_test - Step 25 completed in 1.832s
2026-01-21 11:43:49,474 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 11:43:49,476 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05797088 3.0174642  0.43526386 2.99999999 6.89999852]
2026-01-21 11:43:49,476 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.204m, drift=0.064m)
2026-01-21 11:43:49,476 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 11:43:49,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:49,585 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.017), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 11:43:49,585 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 11:43:49,792 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:49,816 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:49,816 - INFO - integration_test - Warmstart k=0: x0=6.057970881014595 , y0=3.017464200064302 , psi0=0.43526385660162625 , v0=2.999999993525587 , spline0=6.899998523042566 , a0=0.0 , w0=0.0
2026-01-21 11:43:49,816 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:49,817 - INFO - integration_test - Dyn residual k=0: pred=[6.3299985260723055, 3.143959100893905, 0.43526385660162625, 2.999999993525587, 7.199998522395124], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.3299985260723055, 3.143959100893905, 0.43526385660162625, 2.999999993525587, 7.199998522395124], res_norm=1.053e+01
2026-01-21 11:43:49,818 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:49,819 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:49,834 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:49,995 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,015 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,066 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,087 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,132 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,153 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,198 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,220 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,269 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,288 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,332 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,353 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,398 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,420 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,467 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,488 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,535 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:50,555 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,601 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:50,621 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:50,670 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:51,274 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 11:43:51,348 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 11:43:51,348 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:51,348 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 11:43:51,348 - INFO - integration_test -   Control dict from planner: {'a': 3.1830782169894584e-07, 'w': -0.05068784770314079}
2026-01-21 11:43:51,348 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:51,348 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:51,349 - INFO - integration_test - Step 26 completed in 1.874s
2026-01-21 11:43:51,410 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 11:43:51,411 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33031795 3.14326914 0.43019507 3.00000003 7.19999853]
2026-01-21 11:43:51,411 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-21 11:43:51,411 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 11:43:51,414 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:51,519 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.330, 3.143), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 11:43:51,519 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 11:43:51,612 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:51,639 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:51,639 - INFO - integration_test - Warmstart k=0: x0=6.330317949697667 , y0=3.1432691365813517 , psi0=0.43019507183131217 , v0=3.000000025356369 , spline0=7.199998525578203 , a0=0.0 , w0=0.0
2026-01-21 11:43:51,639 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:51,640 - INFO - integration_test - Dyn residual k=0: pred=[6.602983275791299, 3.268383570071798, 0.43019507183131217, 3.000000025356369, 7.49999852811384], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.602983275791299, 3.268383570071798, 0.43019507183131217, 3.000000025356369, 7.49999852811384], res_norm=1.094e+01
2026-01-21 11:43:51,641 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:51,642 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:51,658 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:51,819 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:51,843 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:51,886 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:51,908 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:51,955 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:51,975 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,018 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:52,041 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,088 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:52,108 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,153 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:52,175 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,219 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:52,254 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,339 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:52,362 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,406 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:52,428 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,474 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:52,493 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:52,539 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:53,170 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 11:43:53,365 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 11:43:53,365 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:53,365 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 11:43:53,365 - INFO - integration_test -   Control dict from planner: {'a': -2.7178487781689443e-07, 'w': -0.07002942092139666}
2026-01-21 11:43:53,365 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:53,365 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:53,367 - INFO - integration_test - Step 27 completed in 1.956s
2026-01-21 11:43:53,423 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 11:43:53,424 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60341913 3.26742782 0.42319213 3.         7.49999853]
2026-01-21 11:43:53,425 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.124m, drift=0.175m)
2026-01-21 11:43:53,425 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 11:43:53,428 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:53,541 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.603, 3.267), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 11:43:53,541 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 11:43:53,642 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:53,669 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:53,669 - INFO - integration_test - Warmstart k=0: x0=6.603419128696184 , y0=3.267427821043663 , psi0=0.42319212973917253 , v0=2.999999998177881 , spline0=7.499998525395991 , a0=0.0 , w0=0.0
2026-01-21 11:43:53,669 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:53,670 - INFO - integration_test - Dyn residual k=0: pred=[6.876953928393182, 3.3906297416674738, 0.42319212973917253, 2.999999998177881, 7.79999852521378], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.876953928393182, 3.3906297416674738, 0.42319212973917253, 2.999999998177881, 7.79999852521378], res_norm=1.135e+01
2026-01-21 11:43:53,671 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:53,671 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:53,687 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:53,856 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:53,879 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:53,925 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:53,945 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:53,992 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,012 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,061 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,084 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,129 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,148 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,193 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,213 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,261 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,281 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,326 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,346 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,390 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:54,411 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,457 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:54,477 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:54,519 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:55,156 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 11:43:55,232 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 11:43:55,232 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:55,232 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 11:43:55,232 - INFO - integration_test -   Control dict from planner: {'a': 3.143458853866178e-07, 'w': 0.32481338610004984}
2026-01-21 11:43:55,232 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:55,232 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:55,235 - INFO - integration_test - Step 28 completed in 1.810s
2026-01-21 11:43:55,297 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 11:43:55,299 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87490513 3.39505008 0.45567347 3.00000003 7.79999853]
2026-01-21 11:43:55,300 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.240m, drift=0.013m)
2026-01-21 11:43:55,300 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 11:43:55,303 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:55,406 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.875, 3.395), path_start=(0.000, 0.000), dist=7.668m
2026-01-21 11:43:55,406 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 11:43:55,500 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:55,528 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:55,528 - INFO - integration_test - Warmstart k=0: x0=6.8749051284756115 , y0=3.3950500774296613 , psi0=0.45567346834917755 , v0=3.00000002961247 , spline0=7.799998528357238 , a0=0.0 , w0=0.0
2026-01-21 11:43:55,528 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:55,529 - INFO - integration_test - Dyn residual k=0: pred=[7.144294589295049, 3.5270702280740265, 0.45567346834917755, 3.00000002961247, 8.099998531318485], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.144294589295049, 3.5270702280740265, 0.45567346834917755, 3.00000002961247, 8.099998531318485], res_norm=1.176e+01
2026-01-21 11:43:55,530 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:55,531 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:55,548 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:55,714 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:55,737 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:55,782 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:55,802 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:55,850 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:55,872 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:55,915 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:55,937 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:55,980 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:56,000 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:56,049 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:56,072 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:56,118 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:56,138 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:56,182 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:56,202 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:56,252 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:56,274 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:56,318 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:56,337 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:56,379 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:57,044 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 11:43:57,251 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 11:43:57,251 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:57,251 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 11:43:57,251 - INFO - integration_test -   Control dict from planner: {'a': -2.945111925994671e-07, 'w': 0.7998827671251042}
2026-01-21 11:43:57,251 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:57,251 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:57,252 - INFO - integration_test - Step 29 completed in 1.953s
2026-01-21 11:43:57,313 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 11:43:57,315 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.1387302  3.53769775 0.53566175 3.         8.09999853]
2026-01-21 11:43:57,315 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.128m, drift=0.287m)
2026-01-21 11:43:57,315 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 11:43:57,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:57,420 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.139, 3.538), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 11:43:57,420 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 11:43:57,518 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:57,544 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:57,544 - INFO - integration_test - Warmstart k=0: x0=7.138730201517109 , y0=3.5376977503330567 , psi0=0.535661745061688 , v0=3.0000000001613505 , spline0=8.099998528373373 , a0=0.0 , w0=0.0
2026-01-21 11:43:57,545 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:57,546 - INFO - integration_test - Dyn residual k=0: pred=[7.396709518376186, 3.690820812223174, 0.535661745061688, 3.0000000001613505, 8.399998528389508], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.396709518376186, 3.690820812223174, 0.535661745061688, 3.0000000001613505, 8.399998528389508], res_norm=1.217e+01
2026-01-21 11:43:57,547 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:57,548 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:57,567 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:57,744 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:57,767 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:57,814 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:57,835 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:57,884 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:57,904 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:57,949 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:57,970 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,014 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:58,036 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,082 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:58,104 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,146 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:58,167 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,212 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:58,234 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,281 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:58,302 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,343 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:58,367 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:58,409 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:43:59,119 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 11:43:59,203 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 11:43:59,203 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:43:59,204 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 11:43:59,204 - INFO - integration_test -   Control dict from planner: {'a': 1.861419424500139e-07, 'w': 0.799998857210346}
2026-01-21 11:43:59,204 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:43:59,204 - INFO - integration_test -   Planner output success: True
2026-01-21 11:43:59,205 - INFO - integration_test - Step 30 completed in 1.891s
2026-01-21 11:43:59,271 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 11:43:59,272 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.39031279 3.70097119 0.61566163 3.00000002 8.39999853]
2026-01-21 11:43:59,272 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.100m, drift=0.099m)
2026-01-21 11:43:59,272 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 11:43:59,276 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:59,380 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.390, 3.701), path_start=(0.000, 0.000), dist=8.265m
2026-01-21 11:43:59,380 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 11:43:59,482 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:43:59,506 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:43:59,506 - INFO - integration_test - Warmstart k=0: x0=7.390312785808165 , y0=3.7009711920933483 , psi0=0.6156616307827225 , v0=3.0000000187755447 , spline0=8.399998530250928 , a0=0.0 , w0=0.0
2026-01-21 11:43:59,506 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:43:59,507 - INFO - integration_test - Dyn residual k=0: pred=[7.635230247731944, 3.874220832702923, 0.6156616307827225, 3.0000000187755447, 8.699998532128483], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.635230247731944, 3.874220832702923, 0.6156616307827225, 3.0000000187755447, 8.699998532128483], res_norm=1.258e+01
2026-01-21 11:43:59,508 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:59,509 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:43:59,525 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:59,811 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:59,831 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:59,879 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:59,900 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:43:59,943 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:43:59,966 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,014 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:00,036 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,088 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:00,110 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,161 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:00,184 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,230 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:00,254 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,305 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:00,328 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,376 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:00,398 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,457 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:00,496 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:00,568 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:01,395 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 11:44:01,482 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 11:44:01,482 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:44:01,482 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 11:44:01,482 - INFO - integration_test -   Control dict from planner: {'a': -3.718045374272679e-07, 'w': 0.7999790586558924}
2026-01-21 11:44:01,482 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:44:01,482 - INFO - integration_test -   Planner output success: True
2026-01-21 11:44:01,483 - INFO - integration_test - Step 31 completed in 2.212s
2026-01-21 11:44:01,549 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 11:44:01,556 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.62804299 3.88382732 0.69565954 2.99999998 8.69999853]
2026-01-21 11:44:01,557 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.204m, drift=0.399m)
2026-01-21 11:44:01,557 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 11:44:01,560 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:01,663 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.628, 3.884), path_start=(0.000, 0.000), dist=8.560m
2026-01-21 11:44:01,663 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 11:44:01,763 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:01,788 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:44:01,788 - INFO - integration_test - Warmstart k=0: x0=7.628042992309861 , y0=3.8838273219805224 , psi0=0.6956595366483118 , v0=2.999999981595091 , spline0=8.699998528410436 , a0=0.0 , w0=0.0
2026-01-21 11:44:01,788 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:44:01,789 - INFO - integration_test - Dyn residual k=0: pred=[7.858332344029736, 4.076094878734502, 0.6956595366483118, 2.999999981595091, 8.999998526569945], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.858332344029736, 4.076094878734502, 0.6956595366483118, 2.999999981595091, 8.999998526569945], res_norm=1.299e+01
2026-01-21 11:44:01,789 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:01,790 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:01,806 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:01,970 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:01,991 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,036 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,061 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,106 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,126 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,171 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,192 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,237 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,260 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,305 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,327 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,371 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,390 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,436 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,461 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,507 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:02,528 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,578 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:02,600 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:02,650 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:05,507 - WARNING - integration_test - Step 32: MPC solve failed
2026-01-21 11:44:05,507 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:44:05,723 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 11:44:05,723 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:44:05,723 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 11:44:05,723 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:05,723 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:44:05,723 - INFO - integration_test -   Planner output success: False
2026-01-21 11:44:05,723 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:05,725 - INFO - integration_test - Step 32 completed in 4.169s
2026-01-21 11:44:05,789 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 11:44:05,789 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.85833234 4.07609488 0.69565954 2.99999998 8.99999853]
2026-01-21 11:44:05,790 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.113m, drift=0.211m)
2026-01-21 11:44:05,790 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 11:44:05,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:05,893 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.858, 4.076), path_start=(0.000, 0.000), dist=8.853m
2026-01-21 11:44:05,893 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 11:44:05,991 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:06,016 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:44:06,017 - INFO - integration_test - Warmstart k=0: x0=7.858332344029736 , y0=4.076094878734502 , psi0=0.6956595366483118 , v0=2.999999981595091 , spline0=8.999998526569945 , a0=0.0 , w0=0.0
2026-01-21 11:44:06,017 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:44:06,018 - INFO - integration_test - Dyn residual k=0: pred=[8.088621695749612, 4.268362435488482, 0.6956595366483118, 2.999999981595091, 9.299998524729453], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.088621695749612, 4.268362435488482, 0.6956595366483118, 2.999999981595091, 9.299998524729453], res_norm=1.340e+01
2026-01-21 11:44:06,018 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:06,019 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:06,035 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,199 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,219 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,266 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,288 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,332 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,352 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,396 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,417 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,463 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,483 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,525 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,545 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,595 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,615 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,662 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,683 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,727 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:06,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,789 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:06,809 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:06,854 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:09,763 - WARNING - integration_test - Step 33: MPC solve failed
2026-01-21 11:44:09,763 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:44:09,840 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 11:44:09,840 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:44:09,840 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 11:44:09,840 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:09,840 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:44:09,840 - INFO - integration_test -   Planner output success: False
2026-01-21 11:44:09,840 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:09,842 - INFO - integration_test - Step 33 completed in 4.052s
2026-01-21 11:44:09,913 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 11:44:09,914 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.0886217  4.26836244 0.69565954 2.99999998 9.29999852]
2026-01-21 11:44:09,914 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.268m, drift=0.022m)
2026-01-21 11:44:09,914 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 11:44:09,918 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:10,017 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.089, 4.268), path_start=(0.000, 0.000), dist=9.146m
2026-01-21 11:44:10,017 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 11:44:10,107 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:10,133 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:44:10,133 - INFO - integration_test - Warmstart k=0: x0=8.088621695749612 , y0=4.268362435488482 , psi0=0.6956595366483118 , v0=2.999999981595091 , spline0=9.299998524729453 , a0=0.0 , w0=0.0
2026-01-21 11:44:10,133 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:44:10,134 - INFO - integration_test - Dyn residual k=0: pred=[8.318911047469488, 4.460629992242462, 0.6956595366483118, 2.999999981595091, 9.599998522888962], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.318911047469488, 4.460629992242462, 0.6956595366483118, 2.999999981595091, 9.599998522888962], res_norm=1.381e+01
2026-01-21 11:44:10,135 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:10,135 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:10,152 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,316 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,336 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,382 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,402 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,447 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,470 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,515 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,536 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,585 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,606 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,653 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,677 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,728 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,749 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,794 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,816 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,868 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:10,889 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,934 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:10,955 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:10,998 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:13,934 - WARNING - integration_test - Step 34: MPC solve failed
2026-01-21 11:44:13,934 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 11:44:14,017 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 11:44:14,017 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:44:14,017 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 11:44:14,017 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:14,017 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:44:14,017 - INFO - integration_test -   Planner output success: False
2026-01-21 11:44:14,017 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:14,019 - INFO - integration_test - Step 34 completed in 4.105s
2026-01-21 11:44:14,087 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 11:44:14,087 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.31891105 4.46062999 0.69565954 2.99999998 9.59999852]
2026-01-21 11:44:14,088 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.307m, drift=0.322m)
2026-01-21 11:44:14,088 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 11:44:14,091 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:14,188 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.319, 4.461), path_start=(0.000, 0.000), dist=9.439m
2026-01-21 11:44:14,188 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 11:44:14,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:14,310 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:44:14,310 - INFO - integration_test - Warmstart k=0: x0=8.318911047469488 , y0=4.460629992242462 , psi0=0.6956595366483118 , v0=2.999999981595091 , spline0=9.599998522888962 , a0=0.0 , w0=0.0
2026-01-21 11:44:14,310 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:44:14,310 - INFO - integration_test - Dyn residual k=0: pred=[8.549200399189363, 4.652897548996442, 0.6956595366483118, 2.999999981595091, 9.89999852104847], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.549200399189363, 4.652897548996442, 0.6956595366483118, 2.999999981595091, 9.89999852104847], res_norm=1.422e+01
2026-01-21 11:44:14,311 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:14,312 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:14,328 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,497 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,518 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,564 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,585 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,632 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,655 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,702 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,723 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,766 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,786 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,833 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,854 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,900 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,922 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:14,967 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:14,986 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:15,032 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:15,053 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:15,099 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:15,118 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:15,159 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:18,025 - WARNING - integration_test - Step 35: MPC solve failed
2026-01-21 11:44:18,025 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 11:44:18,245 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 11:44:18,246 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:44:18,246 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 11:44:18,246 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:18,246 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:44:18,246 - INFO - integration_test -   Planner output success: False
2026-01-21 11:44:18,246 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:18,247 - INFO - integration_test - Step 35 completed in 4.160s
2026-01-21 11:44:18,306 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 11:44:18,311 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.5492004  4.65289755 0.69565954 2.99999998 9.89999852]
2026-01-21 11:44:18,312 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.389m, drift=0.134m)
2026-01-21 11:44:18,312 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 11:44:18,315 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:18,416 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.549, 4.653), path_start=(0.000, 0.000), dist=9.733m
2026-01-21 11:44:18,416 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 11:44:18,511 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:18,535 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:44:18,535 - INFO - integration_test - Warmstart k=0: x0=8.549200399189363 , y0=4.652897548996442 , psi0=0.6956595366483118 , v0=2.999999981595091 , spline0=9.89999852104847 , a0=0.0 , w0=0.0
2026-01-21 11:44:18,535 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:44:18,536 - INFO - integration_test - Dyn residual k=0: pred=[8.779489750909239, 4.845165105750422, 0.6956595366483118, 2.999999981595091, 10.199998519207979], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.779489750909239, 4.845165105750422, 0.6956595366483118, 2.999999981595091, 10.199998519207979], res_norm=1.463e+01
2026-01-21 11:44:18,537 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:18,537 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:18,552 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:18,721 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:18,744 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:18,788 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:18,808 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:18,856 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:18,878 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:18,921 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:18,945 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:18,994 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:19,013 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:19,060 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:19,083 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:19,129 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:19,149 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:19,193 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:19,213 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:19,259 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:19,281 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:19,323 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:19,343 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:19,387 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:22,279 - WARNING - integration_test - Step 36: MPC solve failed
2026-01-21 11:44:22,279 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 11:44:22,365 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 11:44:22,366 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:44:22,366 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 11:44:22,366 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:22,366 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:44:22,366 - INFO - integration_test -   Planner output success: False
2026-01-21 11:44:22,366 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:44:22,367 - INFO - integration_test - Step 36 completed in 4.056s
2026-01-21 11:44:22,432 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 11:44:22,433 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 8.77948975  4.84516511  0.69565954  2.99999998 10.19999852]
2026-01-21 11:44:22,434 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.509m, drift=0.434m)
2026-01-21 11:44:22,434 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 11:44:22,437 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:22,539 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(8.779, 4.845), path_start=(0.000, 0.000), dist=10.028m
2026-01-21 11:44:22,539 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.028m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:44:22,539 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 11:44:22,790 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:44:22,813 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:44:22,813 - INFO - integration_test - Warmstart k=0: x0=8.779489750909239 , y0=4.845165105750422 , psi0=0.6956595366483118 , v0=2.999999981595091 , spline0=10.199998519207979 , a0=0.0 , w0=0.0
2026-01-21 11:44:22,813 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:44:22,814 - INFO - integration_test - Dyn residual k=0: pred=[9.009779102629114, 5.037432662504402, 0.6956595366483118, 2.999999981595091, 10.499998517367487], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.009779102629114, 5.037432662504402, 0.6956595366483118, 2.999999981595091, 10.499998517367487], res_norm=1.504e+01
2026-01-21 11:44:22,814 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:22,815 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:44:22,830 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:22,998 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,020 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,067 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,090 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,135 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,158 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,202 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,220 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,270 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,290 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,331 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,354 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,399 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,418 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,466 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,487 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,533 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:44:23,554 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,598 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:44:23,618 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:44:23,667 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
