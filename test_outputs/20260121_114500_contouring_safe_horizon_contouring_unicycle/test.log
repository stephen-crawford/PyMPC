2026-01-21 11:45:00,942 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 11:45:00,942 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 11:45:00,942 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 11:45:00,942 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 11:45:00,942 - INFO - integration_test - Creating objective module: contouring
2026-01-21 11:45:00,950 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 11:45:00,951 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 11:45:00,951 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 11:45:00,960 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 11:45:00,960 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 11:45:00,967 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 11:45:00,967 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 11:45:00,985 - INFO - integration_test - Setting solver on all modules...
2026-01-21 11:45:00,985 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 11:45:00,985 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 11:45:00,985 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 11:45:00,985 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 11:45:00,985 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 11:45:00,985 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 11:45:00,986 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 11:45:00,986 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 11:45:00,986 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 11:45:00,986 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 11:45:00,986 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 11:45:00,986 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 11:45:00,986 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 11:45:00,987 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 11:45:00,987 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 11:45:00,987 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 11:45:00,987 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 11:45:00,987 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 11:45:00,988 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 11:45:00,988 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 11:45:00,991 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:01,007 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 11:45:01,007 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 11:45:01,135 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:01,167 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:01,167 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 11:45:01,167 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:01,168 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 11:45:01,169 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:01,170 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:01,186 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,342 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,367 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,411 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,433 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,478 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,498 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,544 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,567 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,621 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,645 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,709 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,743 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,810 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,836 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,897 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:01,923 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:01,994 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:02,025 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:02,089 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:02,117 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:02,170 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:03,291 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 11:45:03,532 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 11:45:03,532 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:03,532 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 11:45:03,532 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 11:45:03,532 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196572874, 'w': 0.7999999980967677}
2026-01-21 11:45:03,532 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:03,532 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:03,533 - INFO - integration_test - Step 0 completed in 2.546s
2026-01-21 11:45:03,594 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 11:45:03,595 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 11:45:03,595 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 11:45:03,595 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 11:45:03,599 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:03,698 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 11:45:03,698 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 11:45:03,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:03,817 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:03,817 - INFO - integration_test - Warmstart k=0: x0=0.10987737537990326 , y0=0.004530845047541181 , psi0=0.07999999980967677 , v0=1.2000000019657286 , spline0=0.12000000019657286 , a0=0.0 , w0=0.0
2026-01-21 11:45:03,817 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:03,818 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033398692, 0.014120608316785223, 0.07999999980967677, 1.2000000019657286, 0.24000000039314573], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033398692, 0.014120608316785223, 0.07999999980967677, 1.2000000019657286, 0.24000000039314573], res_norm=1.248e+00
2026-01-21 11:45:03,819 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:03,819 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:03,834 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:03,977 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:03,998 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,043 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,066 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,112 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,133 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,182 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,204 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,250 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,271 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,318 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,337 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,388 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,409 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,455 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,475 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,522 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:04,544 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,590 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:04,610 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:04,653 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:05,279 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 11:45:05,378 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 11:45:05,378 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:05,378 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 11:45:05,378 - INFO - integration_test -   Control dict from planner: {'a': 2.000000018377888, 'w': 0.7999999364256435}
2026-01-21 11:45:05,378 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:05,378 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:05,380 - INFO - integration_test - Step 1 completed in 1.785s
2026-01-21 11:45:05,435 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 11:45:05,436 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 11:45:05,437 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 11:45:05,437 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 11:45:05,439 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:05,537 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 11:45:05,537 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 11:45:05,632 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:05,655 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:05,655 - INFO - integration_test - Warmstart k=0: x0=0.2388921282378192 , y0=0.020221621304194994 , psi0=0.15999999345224114 , v0=1.4000000038035174 , spline0=0.26000000057692463 , a0=0.0 , w0=0.0
2026-01-21 11:45:05,655 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:05,656 - INFO - integration_test - Dyn residual k=0: pred=[0.3771039484319454, 0.04252616938580872, 0.15999999345224114, 1.4000000038035174, 0.4000000009572764], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.3771039484319454, 0.04252616938580872, 0.15999999345224114, 1.4000000038035174, 0.4000000009572764], res_norm=1.513e+00
2026-01-21 11:45:05,656 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:05,657 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:05,672 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:05,814 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:05,835 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:05,879 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:05,897 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:05,940 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:05,963 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,009 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:06,028 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,074 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:06,095 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,140 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:06,162 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,210 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:06,231 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,278 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:06,297 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,342 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:06,367 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,411 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:06,431 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:06,477 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:07,110 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 11:45:07,155 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 11:45:07,155 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:07,155 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 11:45:07,155 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199106722, 'w': 0.8000000045159915}
2026-01-21 11:45:07,155 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:07,155 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:07,157 - INFO - integration_test - Step 2 completed in 1.721s
2026-01-21 11:45:07,212 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 11:45:07,213 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 11:45:07,213 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 11:45:07,213 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 11:45:07,216 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:07,319 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 11:45:07,319 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 11:45:07,410 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:07,437 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:07,437 - INFO - integration_test - Warmstart k=0: x0=0.38583643595529266 , y0=0.0501447150777128 , psi0=0.2399999939038403 , v0=1.6000000057945847 , spline0=0.42000000115638314 , a0=0.0 , w0=0.0
2026-01-21 11:45:07,437 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:07,438 - INFO - integration_test - Dyn residual k=0: pred=[0.5412505127263191, 0.0881771344963641, 0.2399999939038403, 1.6000000057945847, 0.5800000017358417], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.5412505127263191, 0.0881771344963641, 0.2399999939038403, 1.6000000057945847, 0.5800000017358417], res_norm=1.804e+00
2026-01-21 11:45:07,439 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:07,439 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:07,455 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:07,667 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:07,689 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:07,733 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:07,752 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:07,799 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:07,819 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:07,863 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:07,884 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:07,928 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:07,948 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:08,000 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:08,021 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:08,066 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:08,087 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:08,131 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:08,152 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:08,201 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:08,223 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:08,268 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:08,289 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:08,333 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:09,008 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 11:45:09,053 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 11:45:09,053 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:09,053 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 11:45:09,053 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019999396, 'w': 0.8000000099497568}
2026-01-21 11:45:09,053 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:09,053 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:09,054 - INFO - integration_test - Step 3 completed in 1.842s
2026-01-21 11:45:09,115 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 11:45:09,116 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 11:45:09,117 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 11:45:09,117 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 11:45:09,120 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:09,221 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 11:45:09,221 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 11:45:09,313 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:09,338 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:09,338 - INFO - integration_test - Warmstart k=0: x0=0.5491354617502932 , y0=0.0972407547142117 , psi0=0.31999999489881603 , v0=1.8000000077945242 , spline0=0.6000000019358356 , a0=0.0 , w0=0.0
2026-01-21 11:45:09,338 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:09,339 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978380338555, 0.15386273499870215, 0.31999999489881603, 1.8000000077945242, 0.780000002715288], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978380338555, 0.15386273499870215, 0.31999999489881603, 1.8000000077945242, 0.780000002715288], res_norm=2.120e+00
2026-01-21 11:45:09,340 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:09,341 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:09,360 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,509 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,530 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,576 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,597 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,644 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,666 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,709 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,731 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,781 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,800 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,849 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,870 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,916 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:09,936 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:09,989 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:10,008 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:10,057 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:10,077 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:10,120 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:10,141 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:10,188 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:10,831 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 11:45:10,877 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 11:45:10,877 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:10,877 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 11:45:10,877 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019996528, 'w': 0.8000000095355593}
2026-01-21 11:45:10,877 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:10,877 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:10,878 - INFO - integration_test - Step 4 completed in 1.762s
2026-01-21 11:45:10,934 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 11:45:10,935 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 11:45:10,935 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 11:45:10,935 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 11:45:10,939 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:11,101 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 11:45:11,101 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 11:45:11,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:11,235 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:11,235 - INFO - integration_test - Warmstart k=0: x0=0.7268614895560985 , y0=0.1642797653146455 , psi0=0.39999999585237195 , v0=2.000000009794177 , spline0=0.8000000029152533 , a0=0.0 , w0=0.0
2026-01-21 11:45:11,235 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:11,236 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736895818115, 0.2421634333937351, 0.39999999585237195, 2.000000009794177, 1.000000003894671], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736895818115, 0.2421634333937351, 0.39999999585237195, 2.000000009794177, 1.000000003894671], res_norm=2.459e+00
2026-01-21 11:45:11,237 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:11,237 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:11,256 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,405 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,427 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,474 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,496 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,540 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,563 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,609 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,629 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,675 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,696 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,740 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,770 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,838 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,870 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:11,934 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:11,956 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:12,006 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:12,026 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:12,071 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:12,092 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:12,136 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:12,813 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 11:45:12,860 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 11:45:12,860 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:12,860 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 11:45:12,860 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019199182, 'w': 0.7999997339112835}
2026-01-21 11:45:12,860 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:12,860 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:12,862 - INFO - integration_test - Step 5 completed in 1.927s
2026-01-21 11:45:12,914 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 11:45:12,916 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999997 2.20000001 1.02      ]
2026-01-21 11:45:12,917 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 11:45:12,917 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 11:45:12,920 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:13,029 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 11:45:13,029 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 11:45:13,119 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:13,148 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:13,148 - INFO - integration_test - Warmstart k=0: x0=0.9167519052963724 , y0=0.2538238020582496 , psi0=0.4799999692435003 , v0=2.200000011714095 , spline0=1.0200000040866628 , a0=0.0 , w0=0.0
2026-01-21 11:45:13,149 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:13,149 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907924714456, 0.3554152152165193, 0.4799999692435003, 2.200000011714095, 1.2400000052580724], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907924714456, 0.3554152152165193, 0.4799999692435003, 2.200000011714095, 1.2400000052580724], res_norm=2.823e+00
2026-01-21 11:45:13,150 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:13,151 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:13,167 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,318 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,340 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,389 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,409 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,456 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,478 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,522 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,545 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,591 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,610 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,659 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,680 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,722 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,742 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,791 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,813 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,856 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:13,879 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,922 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:13,942 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:13,988 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:14,690 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 11:45:14,801 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 11:45:14,801 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:14,801 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 11:45:14,801 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019292365, 'w': 0.7999976633516268}
2026-01-21 11:45:14,801 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:14,801 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:14,802 - INFO - integration_test - Step 6 completed in 1.887s
2026-01-21 11:45:14,858 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 11:45:14,859 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623088 0.36819141 0.55999974 2.40000001 1.26000001]
2026-01-21 11:45:14,860 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 11:45:14,860 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 11:45:14,862 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:14,964 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 11:45:14,964 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 11:45:15,058 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:15,083 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:15,083 - INFO - integration_test - Warmstart k=0: x0=1.1162308829389957 , y0=0.3681914119113048 , psi0=0.559999735578663 , v0=2.4000000136433317 , spline0=1.2600000054509959 , a0=0.0 , w0=0.0
2026-01-21 11:45:15,083 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:15,084 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721444478186, 0.495676046369268, 0.559999735578663, 2.4000000136433317, 1.5000000068153292], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721444478186, 0.495676046369268, 0.559999735578663, 2.4000000136433317, 1.5000000068153292], res_norm=3.211e+00
2026-01-21 11:45:15,085 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:15,086 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:15,101 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,245 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,269 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,317 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,338 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,405 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,439 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,493 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,515 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,559 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,584 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,629 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,651 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,698 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,719 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,768 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,790 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,838 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:15,859 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,901 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:15,921 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:15,969 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:16,730 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 11:45:16,792 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 11:45:16,792 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:16,792 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 11:45:16,792 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019990008, 'w': -0.17965993135215053}
2026-01-21 11:45:16,792 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:16,792 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:16,794 - INFO - integration_test - Step 7 completed in 1.935s
2026-01-21 11:45:16,860 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 11:45:16,861 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32924186 0.49905258 0.54203374 2.60000002 1.52000001]
2026-01-21 11:45:16,861 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 11:45:16,861 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 11:45:16,864 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:16,966 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 11:45:16,966 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 11:45:17,124 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:17,150 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:17,150 - INFO - integration_test - Warmstart k=0: x0=1.3292418575640372 , y0=0.4990525796076979 , psi0=0.5420337424434479 , v0=2.6000000156423324 , spline0=1.520000007015229 , a0=0.0 , w0=0.0
2026-01-21 11:45:17,150 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:17,151 - INFO - integration_test - Dyn residual k=0: pred=[1.5519737938124725, 0.6331811947068791, 0.5420337424434479, 2.6000000156423324, 1.7800000085794623], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5519737938124725, 0.6331811947068791, 0.5420337424434479, 2.6000000156423324, 1.7800000085794623], res_norm=3.610e+00
2026-01-21 11:45:17,152 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:17,153 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:17,169 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,320 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,341 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,389 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,409 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,455 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,477 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,521 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,540 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,596 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,618 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,666 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,687 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,733 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,753 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,803 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,824 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,875 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:17,895 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:17,938 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:17,960 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:18,007 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:18,998 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 11:45:19,050 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 11:45:19,051 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:19,051 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 11:45:19,051 - INFO - integration_test -   Control dict from planner: {'a': 1.9999995612881023, 'w': -0.02812532190693887}
2026-01-21 11:45:19,051 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:19,051 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:19,052 - INFO - integration_test - Step 8 completed in 2.191s
2026-01-21 11:45:19,122 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 11:45:19,123 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56073839 0.63801052 0.53922121 2.79999997 1.8       ]
2026-01-21 11:45:19,124 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 11:45:19,124 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 11:45:19,128 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:19,241 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 11:45:19,241 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 11:45:19,338 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:19,365 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:19,365 - INFO - integration_test - Warmstart k=0: x0=1.5607383874626213 , y0=0.638010516666967 , psi0=0.539221210252754 , v0=2.799999971771143 , spline0=1.8000000041923434 , a0=0.0 , w0=0.0
2026-01-21 11:45:19,365 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:19,366 - INFO - integration_test - Dyn residual k=0: pred=[1.8010088560560749, 0.7817815163194218, 0.539221210252754, 2.799999971771143, 2.0800000013694575], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.8010088560560749, 0.7817815163194218, 0.539221210252754, 2.799999971771143, 2.0800000013694575], res_norm=4.039e+00
2026-01-21 11:45:19,367 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:19,368 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:19,386 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,531 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,553 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,599 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,619 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,664 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,685 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,727 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,760 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,819 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,841 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,887 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,908 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:19,951 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:19,975 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:20,023 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:20,042 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:20,092 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:20,111 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:20,151 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:20,175 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:20,219 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:20,937 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 11:45:21,066 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 11:45:21,066 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:21,066 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 11:45:21,067 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199934727, 'w': -0.08519195385071264}
2026-01-21 11:45:21,067 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:21,067 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:21,068 - INFO - integration_test - Step 9 completed in 1.945s
2026-01-21 11:45:21,122 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 11:45:21,122 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81022845 0.78584218 0.53070201 2.99999997 2.1       ]
2026-01-21 11:45:21,123 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 11:45:21,123 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 11:45:21,126 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:21,235 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 11:45:21,235 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 11:45:21,333 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:21,361 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:21,361 - INFO - integration_test - Warmstart k=0: x0=1.8102284472827006 , y0=0.7858421777994629 , psi0=0.5307020148676828 , v0=2.99999997377049 , spline0=2.1000000015693923 , a0=0.0 , w0=0.0
2026-01-21 11:45:21,361 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:21,363 - INFO - integration_test - Dyn residual k=0: pred=[2.068964034825299, 0.9376838524649377, 0.5307020148676828, 2.99999997377049, 2.3999999989464413], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.068964034825299, 0.9376838524649377, 0.5307020148676828, 2.99999997377049, 2.3999999989464413], res_norm=4.495e+00
2026-01-21 11:45:21,364 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:21,365 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:21,383 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,536 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,557 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,604 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,625 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,671 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,691 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,737 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,758 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,805 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,826 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,872 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,892 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:21,936 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:21,957 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:22,002 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:22,023 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:22,073 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:22,096 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:22,143 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:22,165 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:22,212 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:22,947 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 11:45:23,004 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 11:45:23,004 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:23,004 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 11:45:23,004 - INFO - integration_test -   Control dict from planner: {'a': 5.621086565358241e-07, 'w': -0.051047935187082616}
2026-01-21 11:45:23,004 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:23,004 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:23,005 - INFO - integration_test - Step 10 completed in 1.883s
2026-01-21 11:45:23,066 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 11:45:23,068 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.06935047 0.9370228  0.52559722 3.00000003 2.4       ]
2026-01-21 11:45:23,068 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 11:45:23,068 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 11:45:23,071 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:23,171 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 11:45:23,171 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 11:45:23,268 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:23,294 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:23,294 - INFO - integration_test - Warmstart k=0: x0=2.0693504728841488 , y0=0.9370227999674289 , psi0=0.5255972213489745 , v0=3.0000000299813556 , spline0=2.400000004567528 , a0=0.0 , w0=0.0
2026-01-21 11:45:23,294 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:23,295 - INFO - integration_test - Dyn residual k=0: pred=[2.328857811142102, 1.0875417130287237, 0.5255972213489745, 3.0000000299813556, 2.700000007565664], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.328857811142102, 1.0875417130287237, 0.5255972213489745, 3.0000000299813556, 2.700000007565664], res_norm=4.814e+00
2026-01-21 11:45:23,296 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:23,297 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:23,312 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,537 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,558 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,604 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,625 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,673 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,694 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,737 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,757 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,806 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,826 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,873 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,893 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:23,938 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:23,959 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:24,005 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:24,026 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:24,073 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:24,093 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:24,138 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:24,158 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:24,207 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:25,676 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 11:45:25,731 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 11:45:25,732 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:25,732 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 11:45:25,732 - INFO - integration_test -   Control dict from planner: {'a': -2.2808511886212061e-07, 'w': -0.049254061483352554}
2026-01-21 11:45:25,732 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:25,732 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:25,733 - INFO - integration_test - Step 11 completed in 2.665s
2026-01-21 11:45:25,795 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 11:45:25,796 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32922744 1.08690202 0.52067182 3.00000001 2.70000001]
2026-01-21 11:45:25,797 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 11:45:25,797 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 11:45:25,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:25,905 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 11:45:25,905 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 11:45:25,997 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:26,022 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:26,022 - INFO - integration_test - Warmstart k=0: x0=2.329227443537106 , y0=1.0869020156441087 , psi0=0.5206718152006392 , v0=3.0000000071728437 , spline0=2.7000000052848123 , a0=0.0 , w0=0.0
2026-01-21 11:45:26,022 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:26,023 - INFO - integration_test - Dyn residual k=0: pred=[2.5894729958296585, 1.2361409279368318, 0.5206718152006392, 3.0000000071728437, 3.0000000060020966], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5894729958296585, 1.2361409279368318, 0.5206718152006392, 3.0000000071728437, 3.0000000060020966], res_norm=5.148e+00
2026-01-21 11:45:26,024 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:26,025 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:26,041 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,189 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,210 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,258 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,282 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,329 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,351 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,397 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,417 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,462 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,482 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,527 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,547 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,594 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,614 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,659 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,678 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,723 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:26,744 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,792 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:26,812 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:26,857 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:27,467 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 11:45:27,521 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 11:45:27,522 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:27,522 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 11:45:27,522 - INFO - integration_test -   Control dict from planner: {'a': 2.280792478428101e-07, 'w': -0.07934354359852955}
2026-01-21 11:45:27,522 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:27,522 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:27,523 - INFO - integration_test - Step 12 completed in 1.727s
2026-01-21 11:45:27,585 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 11:45:27,586 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59006232 1.23510693 0.51273746 3.00000003 3.00000001]
2026-01-21 11:45:27,586 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.172m, drift=0.558m)
2026-01-21 11:45:27,586 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 11:45:27,590 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:27,779 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.869m
2026-01-21 11:45:27,779 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 11:45:27,872 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:27,897 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:27,897 - INFO - integration_test - Warmstart k=0: x0=2.5900623203498787 , y0=1.2351069278402413 , psi0=0.5127374608407863 , v0=3.0000000299807685 , spline0=3.000000008282889 , a0=0.0 , w0=0.0
2026-01-21 11:45:27,897 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:27,898 - INFO - integration_test - Dyn residual k=0: pred=[2.8514837849166983, 1.382276284917675, 0.5127374608407863, 3.0000000299807685, 3.3000000112809658], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8514837849166983, 1.382276284917675, 0.5127374608407863, 3.0000000299807685, 3.3000000112809658], res_norm=5.495e+00
2026-01-21 11:45:27,899 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:27,900 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:27,914 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,061 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,082 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,125 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,148 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,195 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,215 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,259 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,281 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,330 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,350 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,398 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,421 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,469 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,490 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,534 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,556 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,601 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:28,620 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,667 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:28,689 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:28,730 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:29,450 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 11:45:29,514 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 11:45:29,514 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:29,514 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 11:45:29,514 - INFO - integration_test -   Control dict from planner: {'a': -1.1230930330337453e-07, 'w': -0.05935179277143438}
2026-01-21 11:45:29,514 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:29,514 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:29,515 - INFO - integration_test - Step 13 completed in 1.930s
2026-01-21 11:45:29,577 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 11:45:29,578 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.85191899 1.38149963 0.50680228 3.00000002 3.30000001]
2026-01-21 11:45:29,579 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.146m, drift=0.370m)
2026-01-21 11:45:29,579 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 11:45:29,582 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:29,683 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 11:45:29,683 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 11:45:29,773 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:29,801 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:29,801 - INFO - integration_test - Warmstart k=0: x0=2.851918986585415 , y0=1.3814996312535763 , psi0=0.5068022815636428 , v0=3.000000018749838 , spline0=3.300000010157873 , a0=0.0 , w0=0.0
2026-01-21 11:45:29,801 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:29,802 - INFO - integration_test - Dyn residual k=0: pred=[3.1142093171115603, 1.5271148215239454, 0.5068022815636428, 3.000000018749838, 3.600000012032857], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.1142093171115603, 1.5271148215239454, 0.5068022815636428, 3.000000018749838, 3.600000012032857], res_norm=5.852e+00
2026-01-21 11:45:29,803 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:29,803 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:29,819 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:29,961 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:29,984 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,031 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,054 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,098 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,118 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,165 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,187 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,233 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,253 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,304 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,324 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,371 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,393 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,438 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,462 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,508 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:30,528 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,571 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:30,592 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:30,662 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:31,280 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 11:45:31,425 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 11:45:31,426 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:31,426 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 11:45:31,426 - INFO - integration_test -   Control dict from planner: {'a': 1.0914736334155624e-07, 'w': -0.060180977831603255}
2026-01-21 11:45:31,426 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:31,426 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:31,427 - INFO - integration_test - Step 14 completed in 1.850s
2026-01-21 11:45:31,484 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 11:45:31,486 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.1146459  1.5263247  0.50078418 3.00000003 3.60000001]
2026-01-21 11:45:31,486 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 11:45:31,486 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 11:45:31,489 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:31,593 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 11:45:31,594 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 11:45:31,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:31,711 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:31,711 - INFO - integration_test - Warmstart k=0: x0=3.114645896247146 , y0=1.526324700772557 , psi0=0.5007841837804825 , v0=3.0000000296645744 , spline0=3.6000000131243306 , a0=0.0 , w0=0.0
2026-01-21 11:45:31,711 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:31,712 - INFO - integration_test - Dyn residual k=0: pred=[3.3778077991589743, 1.6703587753372244, 0.5007841837804825, 3.0000000296645744, 3.900000016090788], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.3778077991589743, 1.6703587753372244, 0.5007841837804825, 3.0000000296645744, 3.900000016090788], res_norm=6.218e+00
2026-01-21 11:45:31,713 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:31,714 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:31,729 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:31,878 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:31,898 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:31,942 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:31,965 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,010 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,030 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,075 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,095 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,139 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,160 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,206 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,227 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,273 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,295 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,341 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,364 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,411 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:32,433 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,476 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:32,495 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:32,540 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:33,402 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 11:45:33,466 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 11:45:33,467 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:33,467 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 11:45:33,467 - INFO - integration_test -   Control dict from planner: {'a': 3.3530049130981575e-09, 'w': -0.05577704508014135}
2026-01-21 11:45:33,467 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:33,467 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:33,468 - INFO - integration_test - Step 15 completed in 1.982s
2026-01-21 11:45:33,527 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 11:45:33,530 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37820812 1.66962411 0.49520648 3.00000003 3.90000002]
2026-01-21 11:45:33,531 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.146m, drift=0.482m)
2026-01-21 11:45:33,531 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 11:45:33,534 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:33,634 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.670), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 11:45:33,634 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 11:45:33,725 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:33,750 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:33,751 - INFO - integration_test - Warmstart k=0: x0=3.378208123359009 , y0=1.669624110747474 , psi0=0.49520647927246836 , v0=3.000000029999875 , spline0=3.9000000161243182 , a0=0.0 , w0=0.0
2026-01-21 11:45:33,751 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:33,752 - INFO - integration_test - Dyn residual k=0: pred=[3.642169308065307, 1.812188113105854, 0.49520647927246836, 3.000000029999875, 4.200000019124306], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.642169308065307, 1.812188113105854, 0.49520647927246836, 3.000000029999875, 4.200000019124306], res_norm=6.590e+00
2026-01-21 11:45:33,753 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:33,753 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:33,772 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,014 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,034 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,079 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,097 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,141 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,161 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,211 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,230 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,278 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,300 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,348 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,370 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,417 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,437 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,487 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,508 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,553 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:34,575 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,617 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:34,635 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:34,680 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:35,300 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 11:45:35,357 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 11:45:35,358 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:35,358 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 11:45:35,358 - INFO - integration_test -   Control dict from planner: {'a': -1.7387483355871968e-07, 'w': -0.06629964760385275}
2026-01-21 11:45:35,358 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:35,358 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:35,359 - INFO - integration_test - Step 16 completed in 1.829s
2026-01-21 11:45:35,421 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 11:45:35,422 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64263997 1.81131204 0.48857651 3.00000001 4.20000002]
2026-01-21 11:45:35,423 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.143m, drift=0.294m)
2026-01-21 11:45:35,423 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 11:45:35,426 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:35,526 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 11:45:35,527 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 11:45:35,620 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:35,643 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:35,643 - INFO - integration_test - Warmstart k=0: x0=3.642639968929034 , y0=1.811312044793222 , psi0=0.48857651451208306 , v0=3.0000000126123916 , spline0=4.200000017385557 , a0=0.0 , w0=0.0
2026-01-21 11:45:35,643 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:35,644 - INFO - integration_test - Dyn residual k=0: pred=[3.907540538112425, 1.9521228725127513, 0.48857651451208306, 3.0000000126123916, 4.500000018646796], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.907540538112425, 1.9521228725127513, 0.48857651451208306, 3.0000000126123916, 4.500000018646796], res_norm=6.969e+00
2026-01-21 11:45:35,645 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:35,646 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:35,662 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:35,810 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:35,831 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:35,873 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:35,893 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:35,940 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:35,961 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,008 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:36,029 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,072 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:36,093 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,136 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:36,155 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,204 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:36,224 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,268 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:36,289 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,335 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:36,354 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,403 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:36,424 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:36,466 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:37,133 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 11:45:37,311 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 11:45:37,311 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:37,311 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 11:45:37,311 - INFO - integration_test -   Control dict from planner: {'a': 1.7387478890408574e-07, 'w': -0.04812964898961271}
2026-01-21 11:45:37,311 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:37,311 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:37,313 - INFO - integration_test - Step 17 completed in 1.891s
2026-01-21 11:45:37,380 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 11:45:37,381 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90787837 1.95148485 0.48376355 3.00000003 4.50000002]
2026-01-21 11:45:37,381 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 11:45:37,382 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 11:45:37,385 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:37,493 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 11:45:37,493 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 11:45:37,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:37,617 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:37,617 - INFO - integration_test - Warmstart k=0: x0=3.9078783742934373 , y0=1.9514848519405001 , psi0=0.4837635496131218 , v0=3.0000000299998706 , spline0=4.500000020385544 , a0=0.0 , w0=0.0
2026-01-21 11:45:37,617 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:37,618 - INFO - integration_test - Dyn residual k=0: pred=[4.173453591814693, 2.0910190973375715, 0.4837635496131218, 3.0000000299998706, 4.800000023385531], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173453591814693, 2.0910190973375715, 0.4837635496131218, 3.0000000299998706, 4.800000023385531], res_norm=7.353e+00
2026-01-21 11:45:37,619 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:37,619 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:37,635 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:37,786 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:37,810 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:37,856 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:37,878 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:37,924 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:37,946 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:37,991 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:38,014 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,061 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:38,081 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,125 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:38,144 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,191 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:38,211 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,259 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:38,281 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,331 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:38,352 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,400 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:38,422 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:38,464 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:39,079 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 11:45:39,138 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 11:45:39,139 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:39,139 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 11:45:39,139 - INFO - integration_test -   Control dict from planner: {'a': -1.0603556264307355e-06, 'w': -0.062152344177855985}
2026-01-21 11:45:39,139 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:39,139 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:39,140 - INFO - integration_test - Step 18 completed in 1.759s
2026-01-21 11:45:39,199 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 11:45:39,205 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17388549 2.09019289 0.47754832 2.99999992 4.80000001]
2026-01-21 11:45:39,206 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 11:45:39,206 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 11:45:39,209 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:39,316 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 11:45:39,316 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 11:45:39,417 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:39,443 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:39,443 - INFO - integration_test - Warmstart k=0: x0=4.173885494917265 , y0=2.090192893085471 , psi0=0.4775483151953362 , v0=2.999999923964308 , spline0=4.800000012781974 , a0=0.0 , w0=0.0
2026-01-21 11:45:39,443 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:39,444 - INFO - integration_test - Dyn residual k=0: pred=[4.440322806027796, 2.228073836968404, 0.4775483151953362, 2.999999923964308, 5.100000005178405], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440322806027796, 2.228073836968404, 0.4775483151953362, 2.999999923964308, 5.100000005178405], res_norm=7.741e+00
2026-01-21 11:45:39,445 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:39,446 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:39,462 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:39,604 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:39,623 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:39,670 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:39,692 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:39,735 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:39,757 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:39,803 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:39,825 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:39,869 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:39,889 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:39,934 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:39,954 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:40,001 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:40,021 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:40,069 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:40,089 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:40,133 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:40,153 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:40,199 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:40,221 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:40,268 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:40,905 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 11:45:41,068 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 11:45:41,068 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:41,068 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 11:45:41,068 - INFO - integration_test -   Control dict from planner: {'a': 1.0603555788047682e-06, 'w': -0.06253170878385411}
2026-01-21 11:45:41,068 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:41,068 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:41,069 - INFO - integration_test - Step 19 completed in 1.865s
2026-01-21 11:45:41,125 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 11:45:41,126 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.44075217 2.2272399  0.47129514 3.00000003 5.10000002]
2026-01-21 11:45:41,127 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-21 11:45:41,127 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 11:45:41,129 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:41,228 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 11:45:41,228 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 11:45:41,330 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:41,355 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:41,355 - INFO - integration_test - Warmstart k=0: x0=4.4407521695183965 , y0=2.227239904510916 , psi0=0.4712951443169508 , v0=3.0000000299998657 , spline0=5.100000015781961 , a0=0.0 , w0=0.0
2026-01-21 11:45:41,355 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:41,356 - INFO - integration_test - Dyn residual k=0: pred=[4.708046468442195, 2.363452090319775, 0.4712951443169508, 3.0000000299998657, 5.400000018781948], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.708046468442195, 2.363452090319775, 0.4712951443169508, 3.0000000299998657, 5.400000018781948], res_norm=8.132e+00
2026-01-21 11:45:41,357 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:41,358 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:41,374 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,539 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,559 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,605 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,626 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,672 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,691 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,737 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,761 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,819 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,845 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,894 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,918 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:41,966 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:41,990 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:42,041 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:42,063 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:42,113 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:42,134 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:42,184 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:42,206 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:42,255 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:42,896 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 11:45:42,957 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 11:45:42,957 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:42,958 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 11:45:42,958 - INFO - integration_test -   Control dict from planner: {'a': -1.9504911468046212e-07, 'w': -0.040788267870793746}
2026-01-21 11:45:42,958 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:42,958 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:42,959 - INFO - integration_test - Step 20 completed in 1.833s
2026-01-21 11:45:43,019 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 11:45:43,020 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70832352 2.36290659 0.46721632 3.00000001 5.40000002]
2026-01-21 11:45:43,021 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 11:45:43,021 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 11:45:43,024 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:43,131 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 11:45:43,131 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 11:45:43,329 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:43,358 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:43,358 - INFO - integration_test - Warmstart k=0: x0=4.708323518988803 , y0=2.3629065893724 , psi0=0.4672163175298714 , v0=3.0000000104949542 , spline0=5.400000016831457 , a0=0.0 , w0=0.0
2026-01-21 11:45:43,358 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:43,359 - INFO - integration_test - Dyn residual k=0: pred=[4.976171177081277, 2.4980273971115285, 0.4672163175298714, 3.0000000104949542, 5.700000017880952], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.976171177081277, 2.4980273971115285, 0.4672163175298714, 3.0000000104949542, 5.700000017880952], res_norm=8.527e+00
2026-01-21 11:45:43,360 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:43,360 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:43,376 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,540 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,560 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,607 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,632 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,677 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,697 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,741 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,763 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,810 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,831 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,878 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,899 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:43,945 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:43,967 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:44,016 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:44,037 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:44,085 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:44,106 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:44,149 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:44,170 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:44,216 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:44,889 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 11:45:44,952 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 11:45:44,953 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:44,953 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 11:45:44,953 - INFO - integration_test -   Control dict from planner: {'a': 1.9496459011777005e-07, 'w': -0.07824856850939005}
2026-01-21 11:45:44,953 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:44,953 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:44,954 - INFO - integration_test - Step 21 completed in 1.934s
2026-01-21 11:45:45,022 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 11:45:45,023 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97669709 2.49697809 0.45939146 3.00000003 5.70000002]
2026-01-21 11:45:45,023 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 11:45:45,023 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 11:45:45,027 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:45,127 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 11:45:45,127 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 11:45:45,215 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:45,242 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:45,243 - INFO - integration_test - Warmstart k=0: x0=4.976697092441083 , y0=2.496978089234692 , psi0=0.45939146067893244 , v0=3.0000000299914134 , spline0=5.700000019830598 , a0=0.0 , w0=0.0
2026-01-21 11:45:45,243 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:45,244 - INFO - integration_test - Dyn residual k=0: pred=[5.24559384257188, 2.6299989130502905, 0.45939146067893244, 3.0000000299914134, 6.000000022829739], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.24559384257188, 2.6299989130502905, 0.45939146067893244, 3.0000000299914134, 6.000000022829739], res_norm=8.924e+00
2026-01-21 11:45:45,244 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:45,245 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:45,262 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,434 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,455 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,501 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,522 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,569 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,590 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,635 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,657 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,701 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,721 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,766 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,790 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,836 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,856 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,904 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,924 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:45,971 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:45,994 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:46,074 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:46,104 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:46,148 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:46,986 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 11:45:47,174 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 11:45:47,174 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:47,174 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 11:45:47,174 - INFO - integration_test -   Control dict from planner: {'a': -8.410661102779924e-07, 'w': -0.052087346978578586}
2026-01-21 11:45:47,175 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:47,175 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:47,176 - INFO - integration_test - Step 22 completed in 2.153s
2026-01-21 11:45:47,241 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 11:45:47,242 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24593906 2.62929801 0.45418273 2.99999995 6.00000001]
2026-01-21 11:45:47,243 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 11:45:47,243 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 11:45:47,246 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:47,350 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 11:45:47,350 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 11:45:47,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:47,473 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:47,473 - INFO - integration_test - Warmstart k=0: x0=5.245939057202256 , y0=2.6292980053704818 , psi0=0.45418272598107456 , v0=2.9999999458848023 , spline0=6.000000014419078 , a0=0.0 , w0=0.0
2026-01-21 11:45:47,473 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:47,474 - INFO - integration_test - Dyn residual k=0: pred=[5.515525019123104, 2.7609164155124497, 0.45418272598107456, 2.9999999458848023, 6.300000009007559], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515525019123104, 2.7609164155124497, 0.45418272598107456, 2.9999999458848023, 6.300000009007559], res_norm=9.324e+00
2026-01-21 11:45:47,475 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:47,476 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:47,491 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:47,664 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:47,685 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:47,730 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:47,752 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:47,799 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:47,824 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:47,869 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:47,890 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:47,935 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:47,956 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:48,002 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:48,023 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:48,072 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:48,092 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:48,138 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:48,159 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:48,207 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:48,227 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:48,272 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:48,291 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:48,335 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:49,015 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 11:45:49,089 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 11:45:49,089 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:49,089 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 11:45:49,089 - INFO - integration_test -   Control dict from planner: {'a': 8.411505391672524e-07, 'w': -0.060040618690795335}
2026-01-21 11:45:49,089 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:49,089 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:49,091 - INFO - integration_test - Step 23 completed in 1.849s
2026-01-21 11:45:49,154 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 11:45:49,155 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51591852 2.76010632 0.44817866 3.00000003 6.30000002]
2026-01-21 11:45:49,156 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 11:45:49,156 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 11:45:49,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:49,266 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 11:45:49,266 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 11:45:49,368 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:49,395 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:49,395 - INFO - integration_test - Warmstart k=0: x0=5.515918524558141 , y0=2.760106323597913 , psi0=0.44817866411199503 , v0=3.0000000299998564 , spline0=6.300000017419064 , a0=0.0 , w0=0.0
2026-01-21 11:45:49,395 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:49,396 - INFO - integration_test - Dyn residual k=0: pred=[5.786289875284395, 2.8901037639821454, 0.44817866411199503, 3.0000000299998564, 6.60000002041905], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786289875284395, 2.8901037639821454, 0.44817866411199503, 3.0000000299998564, 6.60000002041905], res_norm=9.726e+00
2026-01-21 11:45:49,397 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:49,398 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:49,416 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,583 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:49,604 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,651 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:49,674 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,720 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:49,740 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,785 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:49,806 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,850 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:49,872 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,918 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:49,939 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:49,985 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:50,011 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:50,056 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:50,080 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:50,125 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:50,146 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:50,191 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:50,213 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:50,256 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:50,991 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 11:45:51,176 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 11:45:51,176 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:51,176 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 11:45:51,176 - INFO - integration_test -   Control dict from planner: {'a': -1.3914660602803552e-07, 'w': -0.14243713393959556}
2026-01-21 11:45:51,176 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:51,177 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:51,178 - INFO - integration_test - Step 24 completed in 2.023s
2026-01-21 11:45:51,242 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 11:45:51,242 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.78720654 2.88817385 0.43393495 3.00000002 6.60000002]
2026-01-21 11:45:51,243 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.113m, drift=0.252m)
2026-01-21 11:45:51,243 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 11:45:51,246 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:51,350 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.888), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 11:45:51,350 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 11:45:51,446 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:51,474 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:51,474 - INFO - integration_test - Warmstart k=0: x0=5.787206539931294 , y0=2.888173854553275 , psi0=0.43393495071803545 , v0=3.000000016085196 , spline0=6.600000019027584 , a0=0.0 , w0=0.0
2026-01-21 11:45:51,475 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:51,476 - INFO - integration_test - Dyn residual k=0: pred=[6.0594020466052285, 3.014307145605366, 0.43393495071803545, 3.000000016085196, 6.900000020636103], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.0594020466052285, 3.014307145605366, 0.43393495071803545, 3.000000016085196, 6.900000020636103], res_norm=1.013e+01
2026-01-21 11:45:51,477 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:51,478 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:51,494 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:51,658 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:51,679 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:51,729 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:51,753 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:51,799 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:51,820 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:51,865 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:51,885 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:51,929 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:51,948 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:51,995 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:52,016 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:52,064 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:52,084 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:52,130 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:52,150 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:52,196 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:52,219 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:52,263 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:52,284 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:52,326 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:53,192 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 11:45:53,276 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 11:45:53,276 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:53,277 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 11:45:53,277 - INFO - integration_test -   Control dict from planner: {'a': 1.3914595758413914e-07, 'w': 0.04959065949488855}
2026-01-21 11:45:53,277 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:53,277 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:53,278 - INFO - integration_test - Step 25 completed in 2.036s
2026-01-21 11:45:53,336 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 11:45:53,342 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05908818 3.01498155 0.43889402 3.00000003 6.90000002]
2026-01-21 11:45:53,342 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.205m, drift=0.064m)
2026-01-21 11:45:53,342 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 11:45:53,346 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:53,454 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.059, 3.015), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 11:45:53,454 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 11:45:53,658 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:53,682 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:53,682 - INFO - integration_test - Warmstart k=0: x0=6.059088180569647 , y0=3.014981545266495 , psi0=0.4388940166675243 , v0=3.0000000299997915 , spline0=6.900000022027562 , a0=0.0 , w0=0.0
2026-01-21 11:45:53,682 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:53,683 - INFO - integration_test - Dyn residual k=0: pred=[6.330654840803474, 3.142463115893126, 0.4388940166675243, 3.0000000299997915, 7.200000025027542], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.330654840803474, 3.142463115893126, 0.4388940166675243, 3.0000000299997915, 7.200000025027542], res_norm=1.053e+01
2026-01-21 11:45:53,684 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:53,685 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:53,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:53,869 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:53,890 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:53,933 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:53,954 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,003 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,024 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,072 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,093 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,137 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,160 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,204 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,228 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,275 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,296 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,343 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,366 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,415 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:54,436 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,480 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:54,500 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:54,542 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:55,386 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 11:45:55,467 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 11:45:55,467 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:55,468 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 11:45:55,468 - INFO - integration_test -   Control dict from planner: {'a': -6.478911643141295e-08, 'w': -0.14237813335882124}
2026-01-21 11:45:55,468 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:55,468 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:55,470 - INFO - integration_test - Step 26 completed in 2.128s
2026-01-21 11:45:55,528 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 11:45:55,532 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33155318 3.14052558 0.4246562  3.00000002 7.20000002]
2026-01-21 11:45:55,533 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.176m, drift=0.364m)
2026-01-21 11:45:55,533 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 11:45:55,536 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:55,645 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.332, 3.141), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 11:45:55,645 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 11:45:55,741 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:55,767 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:55,767 - INFO - integration_test - Warmstart k=0: x0=6.3315531795574636 , y0=3.140525583675491 , psi0=0.42465620333164217 , v0=3.00000002352088 , spline0=7.2000000243796505 , a0=0.0 , w0=0.0
2026-01-21 11:45:55,767 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:55,768 - INFO - integration_test - Dyn residual k=0: pred=[6.604907311787139, 3.2641278482348977, 0.42465620333164217, 3.00000002352088, 7.500000026731739], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.604907311787139, 3.2641278482348977, 0.42465620333164217, 3.00000002352088, 7.500000026731739], res_norm=1.094e+01
2026-01-21 11:45:55,769 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:55,769 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:55,786 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:55,954 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:55,977 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,026 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,046 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,092 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,113 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,159 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,179 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,226 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,248 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,293 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,313 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,359 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,381 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,429 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,450 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,495 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:56,513 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,557 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:56,585 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:56,637 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:57,246 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 11:45:57,452 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 11:45:57,452 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:57,452 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 11:45:57,452 - INFO - integration_test -   Control dict from planner: {'a': -1.4318352968929925e-07, 'w': 0.058619174856324875}
2026-01-21 11:45:57,452 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:57,452 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:57,454 - INFO - integration_test - Step 27 completed in 1.922s
2026-01-21 11:45:57,515 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 11:45:57,515 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60454347 3.26492833 0.43051812 3.00000001 7.50000003]
2026-01-21 11:45:57,516 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.126m, drift=0.175m)
2026-01-21 11:45:57,516 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 11:45:57,519 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:57,628 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.605, 3.265), path_start=(0.000, 0.000), dist=7.367m
2026-01-21 11:45:57,628 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 11:45:57,720 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:57,749 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:57,749 - INFO - integration_test - Warmstart k=0: x0=6.604543473535592 , y0=3.264928327456442 , psi0=0.43051812081727464 , v0=3.0000000092025267 , spline0=7.5000000252999035 , a0=0.0 , w0=0.0
2026-01-21 11:45:57,749 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:57,750 - INFO - integration_test - Dyn residual k=0: pred=[6.877168365843314, 3.390130837999779, 0.43051812081727464, 3.0000000092025267, 7.8000000262201565], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.877168365843314, 3.390130837999779, 0.43051812081727464, 3.0000000092025267, 7.8000000262201565], res_norm=1.135e+01
2026-01-21 11:45:57,750 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:57,751 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:57,766 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:57,929 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:57,951 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:57,996 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,019 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,066 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,087 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,132 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,154 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,199 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,221 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,266 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,285 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,332 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,355 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,403 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,424 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,471 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:58,491 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,537 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:58,556 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:58,601 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:45:59,276 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 11:45:59,357 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 11:45:59,357 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:45:59,357 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 11:45:59,357 - INFO - integration_test -   Control dict from planner: {'a': 2.079714786605269e-07, 'w': -0.13981194707764902}
2026-01-21 11:45:59,357 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:45:59,357 - INFO - integration_test -   Planner output success: True
2026-01-21 11:45:59,359 - INFO - integration_test - Step 28 completed in 1.844s
2026-01-21 11:45:59,426 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 11:45:59,427 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.87803471 3.38822098 0.41653693 3.00000003 7.80000003]
2026-01-21 11:45:59,428 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.244m, drift=0.013m)
2026-01-21 11:45:59,428 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 11:45:59,431 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:59,535 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.878, 3.388), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 11:45:59,535 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 11:45:59,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:45:59,655 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:45:59,656 - INFO - integration_test - Warmstart k=0: x0=6.8780347111269755 , y0=3.3882209796916003 , psi0=0.41653692610950976 , v0=3.0000000299996747 , spline0=7.800000028299871 , a0=0.0 , w0=0.0
2026-01-21 11:45:59,656 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:45:59,657 - INFO - integration_test - Dyn residual k=0: pred=[7.152383383907558, 3.5095997568460673, 0.41653692610950976, 3.0000000299996747, 8.100000031299839], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.152383383907558, 3.5095997568460673, 0.41653692610950976, 3.0000000299996747, 8.100000031299839], res_norm=1.176e+01
2026-01-21 11:45:59,657 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:59,658 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:45:59,675 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:59,841 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:59,863 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:59,909 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:59,930 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:45:59,977 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:45:59,998 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,070 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:00,113 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,168 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:00,190 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,235 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:00,254 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,303 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:00,322 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,370 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:00,392 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,444 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:00,470 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,514 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:00,533 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:00,576 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:01,589 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 11:46:01,798 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 11:46:01,799 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:01,799 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 11:46:01,799 - INFO - integration_test -   Control dict from planner: {'a': -1.6983697884630846e-07, 'w': 0.7999995812561285}
2026-01-21 11:46:01,799 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:01,799 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:01,800 - INFO - integration_test - Step 29 completed in 2.373s
2026-01-21 11:46:01,866 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 11:46:01,867 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.14723828 3.52043842 0.49653688 3.00000001 8.10000003]
2026-01-21 11:46:01,867 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.143m, drift=0.287m)
2026-01-21 11:46:01,867 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 11:46:01,870 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:01,968 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.147, 3.520), path_start=(0.000, 0.000), dist=7.967m
2026-01-21 11:46:01,968 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 11:46:02,065 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:02,092 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:02,092 - INFO - integration_test - Warmstart k=0: x0=7.147238282644519 , y0=3.5204384188596416 , psi0=0.4965368842351226 , v0=3.0000000130159767 , spline0=8.100000029601468 , a0=0.0 , w0=0.0
2026-01-21 11:46:02,092 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:02,093 - INFO - integration_test - Dyn residual k=0: pred=[7.41100956445462, 3.6633534694079124, 0.4965368842351226, 3.0000000130159767, 8.400000030903065], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.41100956445462, 3.6633534694079124, 0.4965368842351226, 3.0000000130159767, 8.400000030903065], res_norm=1.217e+01
2026-01-21 11:46:02,093 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:02,094 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:02,109 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,290 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,312 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,366 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,391 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,446 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,471 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,522 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,546 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,599 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,623 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,677 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,700 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,749 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,774 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,825 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,850 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,902 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:02,923 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:02,975 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:02,998 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:03,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:04,109 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 11:46:04,199 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 11:46:04,200 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:04,200 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 11:46:04,200 - INFO - integration_test -   Control dict from planner: {'a': 1.6939681888971549e-07, 'w': 0.800000008176928}
2026-01-21 11:46:04,200 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:04,200 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:04,201 - INFO - integration_test - Step 30 completed in 2.335s
2026-01-21 11:46:04,285 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 11:46:04,287 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.40501475 3.6737463  0.57653689 3.00000003 8.40000003]
2026-01-21 11:46:04,288 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.116m, drift=0.099m)
2026-01-21 11:46:04,288 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 11:46:04,293 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:04,421 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.405, 3.674), path_start=(0.000, 0.000), dist=8.266m
2026-01-21 11:46:04,421 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 11:46:04,517 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:04,541 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:04,541 - INFO - integration_test - Warmstart k=0: x0=7.405014748947807 , y0=3.67374630354149 , psi0=0.5765368850528154 , v0=3.000000029955659 , spline0=8.400000032597033 , a0=0.0 , w0=0.0
2026-01-21 11:46:04,541 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:04,542 - INFO - integration_test - Dyn residual k=0: pred=[7.656521401488016, 3.83728347217712, 0.5765368850528154, 3.000000029955659, 8.700000035592598], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.656521401488016, 3.83728347217712, 0.5765368850528154, 3.000000029955659, 8.700000035592598], res_norm=1.258e+01
2026-01-21 11:46:04,543 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:04,544 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:04,557 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:04,719 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:04,742 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:04,785 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:04,805 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:04,854 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:04,874 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:04,921 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:04,943 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:04,990 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:05,009 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:05,056 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:05,078 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:05,123 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:05,143 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:05,189 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:05,209 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:05,260 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:05,282 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:05,326 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:05,346 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:05,394 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:08,175 - WARNING - integration_test - Step 31: MPC solve failed
2026-01-21 11:46:08,175 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:46:08,267 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 11:46:08,267 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:08,267 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 11:46:08,267 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:08,267 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:08,267 - INFO - integration_test -   Planner output success: False
2026-01-21 11:46:08,267 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:08,269 - INFO - integration_test - Step 31 completed in 3.983s
2026-01-21 11:46:08,338 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 11:46:08,339 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.6565214  3.83728347 0.57653689 3.00000003 8.70000004]
2026-01-21 11:46:08,340 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.211m, drift=0.399m)
2026-01-21 11:46:08,340 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 11:46:08,343 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:08,476 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.657, 3.837), path_start=(0.000, 0.000), dist=8.564m
2026-01-21 11:46:08,476 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 11:46:08,590 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:08,615 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:08,615 - INFO - integration_test - Warmstart k=0: x0=7.656521401488016 , y0=3.83728347217712 , psi0=0.5765368850528154 , v0=3.000000029955659 , spline0=8.700000035592598 , a0=0.0 , w0=0.0
2026-01-21 11:46:08,615 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:08,616 - INFO - integration_test - Dyn residual k=0: pred=[7.908028054028224, 4.00082064081275, 0.5765368850528154, 3.000000029955659, 9.000000038588164], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.908028054028224, 4.00082064081275, 0.5765368850528154, 3.000000029955659, 9.000000038588164], res_norm=1.300e+01
2026-01-21 11:46:08,617 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:08,618 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:08,633 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:08,795 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:08,816 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:08,865 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:08,888 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:08,933 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:08,953 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:08,997 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:09,018 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,070 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:09,093 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,138 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:09,160 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,205 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:09,226 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,274 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:09,296 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,340 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:09,364 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,408 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:09,433 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:09,479 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:12,629 - WARNING - integration_test - Step 32: MPC solve failed
2026-01-21 11:46:12,629 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:46:12,846 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 11:46:12,847 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:12,847 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 11:46:12,847 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:12,847 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:12,847 - INFO - integration_test -   Planner output success: False
2026-01-21 11:46:12,847 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:12,848 - INFO - integration_test - Step 32 completed in 4.509s
2026-01-21 11:46:12,911 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 11:46:12,912 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[7.90802805 4.00082064 0.57653689 3.00000003 9.00000004]
2026-01-21 11:46:12,912 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.037m, drift=0.211m)
2026-01-21 11:46:12,913 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 11:46:12,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:13,022 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(7.908, 4.001), path_start=(0.000, 0.000), dist=8.862m
2026-01-21 11:46:13,022 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 11:46:13,117 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:13,143 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:13,143 - INFO - integration_test - Warmstart k=0: x0=7.908028054028224 , y0=4.00082064081275 , psi0=0.5765368850528154 , v0=3.000000029955659 , spline0=9.000000038588164 , a0=0.0 , w0=0.0
2026-01-21 11:46:13,143 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:13,144 - INFO - integration_test - Dyn residual k=0: pred=[8.159534706568433, 4.164357809448379, 0.5765368850528154, 3.000000029955659, 9.30000004158373], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.159534706568433, 4.164357809448379, 0.5765368850528154, 3.000000029955659, 9.30000004158373], res_norm=1.341e+01
2026-01-21 11:46:13,145 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:13,146 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:13,161 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,329 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,348 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,395 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,415 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,465 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,487 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,534 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,559 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,603 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,625 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,675 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,697 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,741 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,763 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,807 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,828 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,877 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:13,898 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:13,943 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:13,964 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:14,006 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:17,089 - WARNING - integration_test - Step 33: MPC solve failed
2026-01-21 11:46:17,089 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 11:46:17,170 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 11:46:17,170 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:17,170 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 11:46:17,170 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:17,170 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:17,170 - INFO - integration_test -   Planner output success: False
2026-01-21 11:46:17,170 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:17,171 - INFO - integration_test - Step 33 completed in 4.260s
2026-01-21 11:46:17,246 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 11:46:17,247 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.15953471 4.16435781 0.57653689 3.00000003 9.30000004]
2026-01-21 11:46:17,247 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.172m, drift=0.022m)
2026-01-21 11:46:17,247 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 11:46:17,250 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:17,495 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.160, 4.164), path_start=(0.000, 0.000), dist=9.161m
2026-01-21 11:46:17,495 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 11:46:17,598 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:17,624 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:17,624 - INFO - integration_test - Warmstart k=0: x0=8.159534706568433 , y0=4.164357809448379 , psi0=0.5765368850528154 , v0=3.000000029955659 , spline0=9.30000004158373 , a0=0.0 , w0=0.0
2026-01-21 11:46:17,624 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:17,625 - INFO - integration_test - Dyn residual k=0: pred=[8.41104135910864, 4.327894978084009, 0.5765368850528154, 3.000000029955659, 9.600000044579295], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.41104135910864, 4.327894978084009, 0.5765368850528154, 3.000000029955659, 9.600000044579295], res_norm=1.382e+01
2026-01-21 11:46:17,626 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:17,627 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:17,642 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:17,809 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:17,832 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:17,881 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:17,904 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:17,946 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:17,966 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,009 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:18,033 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,080 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:18,100 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,145 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:18,167 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,212 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:18,232 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,282 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:18,302 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,345 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:18,367 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,411 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:18,432 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:18,479 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:21,551 - WARNING - integration_test - Step 34: MPC solve failed
2026-01-21 11:46:21,551 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 11:46:21,633 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 11:46:21,633 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:21,633 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 11:46:21,633 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:21,633 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:21,633 - INFO - integration_test -   Planner output success: False
2026-01-21 11:46:21,633 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:21,635 - INFO - integration_test - Step 34 completed in 4.389s
2026-01-21 11:46:21,699 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 11:46:21,704 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.41104136 4.32789498 0.57653689 3.00000003 9.60000004]
2026-01-21 11:46:21,704 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.191m, drift=0.322m)
2026-01-21 11:46:21,705 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 11:46:21,709 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:21,809 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.411, 4.328), path_start=(0.000, 0.000), dist=9.459m
2026-01-21 11:46:21,809 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 11:46:21,902 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:21,930 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:21,930 - INFO - integration_test - Warmstart k=0: x0=8.41104135910864 , y0=4.327894978084009 , psi0=0.5765368850528154 , v0=3.000000029955659 , spline0=9.600000044579295 , a0=0.0 , w0=0.0
2026-01-21 11:46:21,930 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:21,931 - INFO - integration_test - Dyn residual k=0: pred=[8.662548011648848, 4.491432146719639, 0.5765368850528154, 3.000000029955659, 9.90000004757486], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.662548011648848, 4.491432146719639, 0.5765368850528154, 3.000000029955659, 9.90000004757486], res_norm=1.423e+01
2026-01-21 11:46:21,932 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:21,933 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:21,949 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,118 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,138 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,183 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,204 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,253 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,275 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,324 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,347 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,397 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,418 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,468 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,490 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,535 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,562 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,612 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,634 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,682 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:22,703 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,746 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:22,766 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:22,807 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:25,591 - WARNING - integration_test - Step 35: MPC solve failed
2026-01-21 11:46:25,591 - WARNING - integration_test -   Consecutive MPC failures: 5/15
2026-01-21 11:46:25,677 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 11:46:25,678 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:25,678 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 11:46:25,678 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:25,678 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:25,678 - INFO - integration_test -   Planner output success: False
2026-01-21 11:46:25,678 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:46:25,679 - INFO - integration_test - Step 35 completed in 3.976s
2026-01-21 11:46:25,752 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 11:46:25,752 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.66254801 4.49143215 0.57653689 3.00000003 9.90000005]
2026-01-21 11:46:25,753 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.192m, drift=0.134m)
2026-01-21 11:46:25,753 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 11:46:25,756 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:25,872 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.663, 4.491), path_start=(0.000, 0.000), dist=9.758m
2026-01-21 11:46:25,872 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 11:46:25,967 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:25,992 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:25,992 - INFO - integration_test - Warmstart k=0: x0=8.662548011648848 , y0=4.491432146719639 , psi0=0.5765368850528154 , v0=3.000000029955659 , spline0=9.90000004757486 , a0=0.0 , w0=0.0
2026-01-21 11:46:25,992 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:25,993 - INFO - integration_test - Dyn residual k=0: pred=[8.914054664189056, 4.6549693153552685, 0.5765368850528154, 3.000000029955659, 10.200000050570425], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.914054664189056, 4.6549693153552685, 0.5765368850528154, 3.000000029955659, 10.200000050570425], res_norm=1.465e+01
2026-01-21 11:46:25,994 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:25,995 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:26,010 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,183 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,204 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,250 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,275 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,320 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,341 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,388 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,409 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,465 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,486 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,533 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,555 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,600 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,621 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,669 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,690 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,736 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:26,758 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,801 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:26,820 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:26,868 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:29,958 - WARNING - integration_test - Step 36: MPC solve failed
2026-01-21 11:46:29,959 - WARNING - integration_test -   Consecutive MPC failures: 6/15
