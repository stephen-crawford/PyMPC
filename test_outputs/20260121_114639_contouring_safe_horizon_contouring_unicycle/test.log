2026-01-21 11:46:39,867 - INFO - integration_test - Contouring objective detected: automatically switching to contouring-aware dynamics model
2026-01-21 11:46:39,867 - INFO - integration_test -   Converted 'unicycle' -> 'contouring_unicycle'
2026-01-21 11:46:39,867 - INFO - integration_test - Created vehicle dynamics model: ContouringSecondOrderUnicycleModel
2026-01-21 11:46:39,867 - INFO - integration_test - ✓ Validation passed: Contouring objective with dynamics model that has 'spline' state
2026-01-21 11:46:39,867 - INFO - integration_test - Creating objective module: contouring
2026-01-21 11:46:39,874 - INFO - integration_test - Objective module 'contouring' created: contouring_objective
2026-01-21 11:46:39,874 - INFO - integration_test - Creating 2 constraint module(s): ['safe_horizon', 'contouring']
2026-01-21 11:46:39,874 - DEBUG - integration_test - Creating constraint module: safe_horizon
2026-01-21 11:46:39,882 - INFO - integration_test - Constraint module 'safe_horizon' created: safe_horizon_constraint
2026-01-21 11:46:39,882 - DEBUG - integration_test - Creating constraint module: contouring
2026-01-21 11:46:39,889 - INFO - integration_test - Constraint module 'contouring' created: contouring_constraints
2026-01-21 11:46:39,889 - INFO - integration_test - Created 2 constraint module(s)
2026-01-21 11:46:39,909 - INFO - integration_test - Setting solver on all modules...
2026-01-21 11:46:39,909 - WARNING - integration_test -   Module safe_horizon_constraint has no solver attribute
2026-01-21 11:46:39,909 - DEBUG - integration_test -   Set solver on module: contouring_constraints
2026-01-21 11:46:39,909 - DEBUG - integration_test -   Set solver on module: control_effort_objective
2026-01-21 11:46:39,909 - DEBUG - integration_test -   Set solver on module: control_jerk_objective
2026-01-21 11:46:39,909 - DEBUG - integration_test -   Set solver on module: path_reference_velocity_objective
2026-01-21 11:46:39,909 - DEBUG - integration_test -   Set solver on module: contouring_objective
2026-01-21 11:46:39,910 - WARNING - integration_test - Error shaping obstacles: name 'get_dummy_obstacle' is not defined
2026-01-21 11:46:39,911 - WARNING - integration_test - Error in on_data_received: 'Planner' object has no attribute 'on_data_received'
2026-01-21 11:46:39,911 - INFO - integration_test - Initial vehicle state (before spline): [0. 0. 0. 1.]
2026-01-21 11:46:39,911 - INFO - integration_test - Vehicle starting position: (0.00, 0.00)
2026-01-21 11:46:39,911 - INFO - integration_test - Reference path start: (0.00, 0.00)
2026-01-21 11:46:39,911 - INFO - integration_test - Reference path starts at vehicle position (requirement satisfied)
2026-01-21 11:46:39,911 - INFO - integration_test - Contouring-aware dynamics detected: initializing spline variable
2026-01-21 11:46:39,911 - INFO - integration_test - Initialized spline to closest path point: s=0.0000 (vehicle at (0.00, 0.00), closest path point at (0.00, 0.00), distance=0.000m)
2026-01-21 11:46:39,911 - INFO - integration_test - Added spline variable: 0.0000
2026-01-21 11:46:39,912 - INFO - integration_test - Final initial state: [0. 0. 0. 1. 0.] (variables: ['x', 'y', 'psi', 'v', 'spline'])
2026-01-21 11:46:39,912 - INFO - integration_test - Step 0 (contouring until path end)
2026-01-21 11:46:39,912 - DEBUG - integration_test - Syncing planner state at step 0: vehicle_state=[0. 0. 0. 1. 0.]
2026-01-21 11:46:39,912 - DEBUG - integration_test - Step 0: Using propagated spline 0.0000 (close to path, dist=0.000m, drift=0.000m)
2026-01-21 11:46:39,912 - DEBUG - integration_test -   Set spline state to 0.0000
2026-01-21 11:46:39,915 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:39,930 - DEBUG - integration_test - Step 0: Checking path alignment: vehicle=(0.000, 0.000), path_start=(0.000, 0.000), dist=0.000m
2026-01-21 11:46:39,930 - INFO - integration_test - === Calling planner.solve_mpc() at step 0 ===
2026-01-21 11:46:40,070 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:40,096 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:40,096 - INFO - integration_test - Warmstart k=0: x0=0.0 , y0=0.0 , psi0=0.0 , v0=1.0 , spline0=0.0 , a0=0.0 , w0=0.0
2026-01-21 11:46:40,097 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:40,098 - INFO - integration_test - Dyn residual k=0: pred=[0.1, 0.0, 0.0, 1.0, 0.1], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.1, 0.0, 0.0, 1.0, 0.1], res_norm=1.010e+00
2026-01-21 11:46:40,098 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:40,099 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:40,116 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,280 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,301 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,349 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,373 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,421 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,441 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,492 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,520 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,585 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,614 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,685 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,723 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,791 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,819 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,889 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:40,917 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:40,982 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:41,010 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:41,070 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:41,097 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:41,160 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:42,392 - INFO - integration_test - Step 0: MPC solve successful
2026-01-21 11:46:42,660 - INFO - integration_test - Step 0: Computed 6 numeric contouring constraints for visualization (s=0.000)
2026-01-21 11:46:42,660 - DEBUG - integration_test - Step 0: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:42,660 - DEBUG - integration_test - Linearized constraints module not found at step 0
2026-01-21 11:46:42,660 - INFO - integration_test - === Applying control at step 0 ===
2026-01-21 11:46:42,660 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000196287426, 'w': 0.7999999970446584}
2026-01-21 11:46:42,660 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:42,660 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:42,663 - INFO - integration_test - Step 0 completed in 2.751s
2026-01-21 11:46:42,725 - INFO - integration_test - Step 1 (contouring until path end)
2026-01-21 11:46:42,726 - DEBUG - integration_test - Syncing planner state at step 1: vehicle_state=[0.10987738 0.00453085 0.08       1.2        0.12      ]
2026-01-21 11:46:42,727 - DEBUG - integration_test - Step 1: Using propagated spline 0.1200 (close to path, dist=0.110m, drift=0.120m)
2026-01-21 11:46:42,727 - DEBUG - integration_test -   Set spline state to 0.1200
2026-01-21 11:46:42,732 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:42,833 - DEBUG - integration_test - Step 1: Checking path alignment: vehicle=(0.110, 0.005), path_start=(0.000, 0.000), dist=0.110m
2026-01-21 11:46:42,833 - INFO - integration_test - === Calling planner.solve_mpc() at step 1 ===
2026-01-21 11:46:42,926 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:42,953 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:42,953 - INFO - integration_test - Warmstart k=0: x0=0.10987737538008321 , y0=0.004530845041581438 , psi0=0.07999999970446584 , v0=1.2000000019628743 , spline0=0.12000000019628743 , a0=0.0 , w0=0.0
2026-01-21 11:46:42,953 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:42,954 - INFO - integration_test - Dyn residual k=0: pred=[0.22949358033489128, 0.014120608298217735, 0.07999999970446584, 1.2000000019628743, 0.24000000039257485], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.22949358033489128, 0.014120608298217735, 0.07999999970446584, 1.2000000019628743, 0.24000000039257485], res_norm=1.248e+00
2026-01-21 11:46:42,955 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:42,956 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:42,972 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,115 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,136 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,187 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,208 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,256 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,277 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,322 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,342 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,392 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,412 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,460 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,481 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,529 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,556 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,607 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,628 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,678 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:43,700 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,744 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:43,766 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:43,814 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:44,438 - INFO - integration_test - Step 1: MPC solve successful
2026-01-21 11:46:44,530 - INFO - integration_test - Step 1: Computed 6 numeric contouring constraints for visualization (s=0.120)
2026-01-21 11:46:44,531 - DEBUG - integration_test - Step 1: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:44,531 - INFO - integration_test - === Applying control at step 1 ===
2026-01-21 11:46:44,531 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000183771607, 'w': 0.7999999363926402}
2026-01-21 11:46:44,531 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:44,531 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:44,532 - INFO - integration_test - Step 1 completed in 1.806s
2026-01-21 11:46:44,590 - INFO - integration_test - Step 2 (contouring until path end)
2026-01-21 11:46:44,591 - DEBUG - integration_test - Syncing planner state at step 2: vehicle_state=[0.23889213 0.02022162 0.15999999 1.4        0.26      ]
2026-01-21 11:46:44,592 - DEBUG - integration_test - Step 2: Using propagated spline 0.2600 (close to path, dist=0.240m, drift=0.260m)
2026-01-21 11:46:44,592 - DEBUG - integration_test -   Set spline state to 0.2600
2026-01-21 11:46:44,595 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:44,697 - DEBUG - integration_test - Step 2: Checking path alignment: vehicle=(0.239, 0.020), path_start=(0.000, 0.000), dist=0.240m
2026-01-21 11:46:44,697 - INFO - integration_test - === Calling planner.solve_mpc() at step 2 ===
2026-01-21 11:46:44,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:44,818 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:44,818 - INFO - integration_test - Warmstart k=0: x0=0.2388921282393925 , y0=0.020221621284408832 , psi0=0.15999999334372983 , v0=1.4000000038005904 , spline0=0.2600000005763465 , a0=0.0 , w0=0.0
2026-01-21 11:46:44,818 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:44,819 - INFO - integration_test - Dyn residual k=0: pred=[0.37710394843565004, 0.042526169350978374, 0.15999999334372983, 1.4000000038005904, 0.40000000095640553], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.37710394843565004, 0.042526169350978374, 0.15999999334372983, 1.4000000038005904, 0.40000000095640553], res_norm=1.513e+00
2026-01-21 11:46:44,820 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:44,820 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:44,839 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:44,987 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,008 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,056 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,077 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,124 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,147 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,196 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,217 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,266 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,287 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,332 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,354 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,401 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,423 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,470 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,491 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,541 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:45,564 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,611 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:45,634 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:45,679 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:46,324 - INFO - integration_test - Step 2: MPC solve successful
2026-01-21 11:46:46,382 - INFO - integration_test - Step 2: Computed 6 numeric contouring constraints for visualization (s=0.260)
2026-01-21 11:46:46,382 - DEBUG - integration_test - Step 2: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:46,382 - INFO - integration_test - === Applying control at step 2 ===
2026-01-21 11:46:46,382 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199203933, 'w': 0.8000000051093645}
2026-01-21 11:46:46,382 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:46,382 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:46,383 - INFO - integration_test - Step 2 completed in 1.793s
2026-01-21 11:46:46,439 - INFO - integration_test - Step 3 (contouring until path end)
2026-01-21 11:46:46,440 - DEBUG - integration_test - Syncing planner state at step 3: vehicle_state=[0.38583644 0.05014472 0.23999999 1.60000001 0.42      ]
2026-01-21 11:46:46,441 - DEBUG - integration_test - Step 3: Using propagated spline 0.4200 (close to path, dist=0.389m, drift=0.420m)
2026-01-21 11:46:46,441 - DEBUG - integration_test -   Set spline state to 0.4200
2026-01-21 11:46:46,444 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:46,547 - DEBUG - integration_test - Step 3: Checking path alignment: vehicle=(0.386, 0.050), path_start=(0.000, 0.000), dist=0.389m
2026-01-21 11:46:46,547 - INFO - integration_test - === Calling planner.solve_mpc() at step 3 ===
2026-01-21 11:46:46,645 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:46,670 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:46,670 - INFO - integration_test - Warmstart k=0: x0=0.38583643595890815 , y0=0.05014471504637837 , psi0=0.2399999938546663 , v0=1.6000000057926298 , spline0=0.4200000011556095 , a0=0.0 , w0=0.0
2026-01-21 11:46:46,670 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:46,671 - INFO - integration_test - Dyn residual k=0: pred=[0.541250512731615, 0.08817713445734088, 0.2399999938546663, 1.6000000057926298, 0.5800000017348725], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.541250512731615, 0.08817713445734088, 0.2399999938546663, 1.6000000057926298, 0.5800000017348725], res_norm=1.804e+00
2026-01-21 11:46:46,672 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:46,673 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:46,689 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:46,899 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:46,919 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:46,968 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:46,992 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,038 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,060 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,110 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,130 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,177 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,199 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,246 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,269 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,314 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,334 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,382 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,404 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,453 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:47,475 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,518 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:47,537 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:47,589 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:48,244 - INFO - integration_test - Step 3: MPC solve successful
2026-01-21 11:46:48,288 - INFO - integration_test - Step 3: Computed 6 numeric contouring constraints for visualization (s=0.420)
2026-01-21 11:46:48,289 - DEBUG - integration_test - Step 3: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:48,289 - INFO - integration_test - === Applying control at step 3 ===
2026-01-21 11:46:48,289 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199994363, 'w': 0.8000000099530633}
2026-01-21 11:46:48,289 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:48,289 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:48,290 - INFO - integration_test - Step 3 completed in 1.850s
2026-01-21 11:46:48,348 - INFO - integration_test - Step 4 (contouring until path end)
2026-01-21 11:46:48,351 - DEBUG - integration_test - Syncing planner state at step 4: vehicle_state=[0.54913546 0.09724075 0.31999999 1.80000001 0.6       ]
2026-01-21 11:46:48,351 - DEBUG - integration_test - Step 4: Using propagated spline 0.6000 (close to path, dist=0.442m, drift=0.112m)
2026-01-21 11:46:48,351 - DEBUG - integration_test -   Set spline state to 0.6000
2026-01-21 11:46:48,354 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:48,463 - DEBUG - integration_test - Step 4: Checking path alignment: vehicle=(0.549, 0.097), path_start=(0.000, 0.000), dist=0.558m
2026-01-21 11:46:48,463 - INFO - integration_test - === Calling planner.solve_mpc() at step 4 ===
2026-01-21 11:46:48,554 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:48,581 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:48,581 - INFO - integration_test - Warmstart k=0: x0=0.5491354617560287 , y0=0.09724075467482066 , psi0=0.31999999484997266 , v0=1.8000000077925735 , spline0=0.6000000019348668 , a0=0.0 , w0=0.0
2026-01-21 11:46:48,581 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:48,582 - INFO - integration_test - Dyn residual k=0: pred=[0.7199978380421714, 0.15386273495090425, 0.31999999484997266, 1.8000000077925735, 0.7800000027141242], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.7199978380421714, 0.15386273495090425, 0.31999999484997266, 1.8000000077925735, 0.7800000027141242], res_norm=2.120e+00
2026-01-21 11:46:48,583 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:48,584 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:48,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:48,751 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:48,773 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:48,821 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:48,844 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:48,893 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:48,913 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:48,963 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:48,984 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,031 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:49,055 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,101 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:49,121 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,169 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:49,193 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,241 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:49,263 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,311 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:49,331 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,379 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:49,402 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:49,451 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:50,082 - INFO - integration_test - Step 4: MPC solve successful
2026-01-21 11:46:50,124 - INFO - integration_test - Step 4: Computed 6 numeric contouring constraints for visualization (s=0.600)
2026-01-21 11:46:50,125 - DEBUG - integration_test - Step 4: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:50,125 - INFO - integration_test - === Applying control at step 4 ===
2026-01-21 11:46:50,125 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199952206, 'w': 0.8000000093532663}
2026-01-21 11:46:50,125 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:50,125 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:50,126 - INFO - integration_test - Step 4 completed in 1.775s
2026-01-21 11:46:50,188 - INFO - integration_test - Step 5 (contouring until path end)
2026-01-21 11:46:50,189 - DEBUG - integration_test - Syncing planner state at step 5: vehicle_state=[0.72686149 0.16427977 0.4        2.00000001 0.8       ]
2026-01-21 11:46:50,190 - DEBUG - integration_test - Step 5: Using propagated spline 0.8000 (close to path, dist=0.297m, drift=0.312m)
2026-01-21 11:46:50,190 - DEBUG - integration_test -   Set spline state to 0.8000
2026-01-21 11:46:50,193 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:50,352 - DEBUG - integration_test - Step 5: Checking path alignment: vehicle=(0.727, 0.164), path_start=(0.000, 0.000), dist=0.745m
2026-01-21 11:46:50,352 - INFO - integration_test - === Calling planner.solve_mpc() at step 5 ===
2026-01-21 11:46:50,450 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:50,476 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:50,476 - INFO - integration_test - Warmstart k=0: x0=0.7268614895655633 , y0=0.16427976526486243 , psi0=0.39999999578529927 , v0=2.0000000097920956 , spline0=0.8000000029140764 , a0=0.0 , w0=0.0
2026-01-21 11:46:50,476 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:50,477 - INFO - integration_test - Dyn residual k=0: pred=[0.9110736895963084, 0.2421634333315154, 0.39999999578529927, 2.0000000097920956, 1.000000003893286], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.9110736895963084, 0.2421634333315154, 0.39999999578529927, 2.0000000097920956, 1.000000003893286], res_norm=2.459e+00
2026-01-21 11:46:50,478 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:50,479 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:50,495 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:50,643 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:50,667 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:50,716 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:50,738 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:50,793 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:50,815 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:50,864 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:50,888 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:50,935 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:50,958 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:51,009 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:51,030 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:51,115 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:51,143 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:51,194 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:51,220 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:51,273 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:51,294 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:51,340 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:51,363 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:51,408 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:52,149 - INFO - integration_test - Step 5: MPC solve successful
2026-01-21 11:46:52,202 - INFO - integration_test - Step 5: Computed 6 numeric contouring constraints for visualization (s=0.800)
2026-01-21 11:46:52,202 - DEBUG - integration_test - Step 5: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:52,202 - INFO - integration_test - === Applying control at step 5 ===
2026-01-21 11:46:52,202 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000182722393, 'w': 0.7999994112228896}
2026-01-21 11:46:52,202 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:52,202 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:52,204 - INFO - integration_test - Step 5 completed in 2.015s
2026-01-21 11:46:52,268 - INFO - integration_test - Step 6 (contouring until path end)
2026-01-21 11:46:52,269 - DEBUG - integration_test - Syncing planner state at step 6: vehicle_state=[0.91675191 0.2538238  0.47999994 2.20000001 1.02      ]
2026-01-21 11:46:52,269 - DEBUG - integration_test - Step 6: Using propagated spline 1.0200 (close to path, dist=0.214m, drift=0.532m)
2026-01-21 11:46:52,269 - DEBUG - integration_test -   Set spline state to 1.0200
2026-01-21 11:46:52,272 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:52,374 - DEBUG - integration_test - Step 6: Checking path alignment: vehicle=(0.917, 0.254), path_start=(0.000, 0.000), dist=0.951m
2026-01-21 11:46:52,374 - INFO - integration_test - === Calling planner.solve_mpc() at step 6 ===
2026-01-21 11:46:52,469 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:52,493 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:52,493 - INFO - integration_test - Warmstart k=0: x0=0.916751906815982 , y0=0.2538237989004577 , psi0=0.47999993690758824 , v0=2.2000000116193195 , spline0=1.0200000040760084 , a0=0.0 , w0=0.0
2026-01-21 11:46:52,493 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:52,494 - INFO - integration_test - Dyn residual k=0: pred=[1.1118907972676995, 0.35541520574435687, 0.47999993690758824, 2.2000000116193195, 1.2400000052379405], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.1118907972676995, 0.35541520574435687, 0.47999993690758824, 2.2000000116193195, 1.2400000052379405], res_norm=2.823e+00
2026-01-21 11:46:52,495 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:52,495 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:52,511 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:52,666 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:52,689 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:52,734 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:52,757 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:52,804 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:52,824 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:52,873 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:52,893 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:52,939 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:52,963 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:53,011 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:53,031 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:53,080 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:53,100 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:53,148 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:53,170 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:53,217 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:53,239 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:53,285 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:53,305 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:53,348 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:54,061 - INFO - integration_test - Step 6: MPC solve successful
2026-01-21 11:46:54,173 - INFO - integration_test - Step 6: Computed 6 numeric contouring constraints for visualization (s=1.020)
2026-01-21 11:46:54,173 - DEBUG - integration_test - Step 6: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:54,173 - INFO - integration_test - === Applying control at step 6 ===
2026-01-21 11:46:54,173 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019190773, 'w': 0.7999975493814329}
2026-01-21 11:46:54,173 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:54,173 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:54,174 - INFO - integration_test - Step 6 completed in 1.906s
2026-01-21 11:46:54,233 - INFO - integration_test - Step 7 (contouring until path end)
2026-01-21 11:46:54,235 - DEBUG - integration_test - Syncing planner state at step 7: vehicle_state=[1.11623089 0.3681914  0.55999969 2.40000001 1.26000001]
2026-01-21 11:46:54,235 - DEBUG - integration_test - Step 7: Using propagated spline 1.2600 (close to path, dist=0.305m, drift=0.772m)
2026-01-21 11:46:54,236 - DEBUG - integration_test -   Set spline state to 1.2600
2026-01-21 11:46:54,239 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:54,342 - DEBUG - integration_test - Step 7: Checking path alignment: vehicle=(1.116, 0.368), path_start=(0.000, 0.000), dist=1.175m
2026-01-21 11:46:54,342 - INFO - integration_test - === Calling planner.solve_mpc() at step 7 ===
2026-01-21 11:46:54,439 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:54,465 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:54,465 - INFO - integration_test - Warmstart k=0: x0=1.1162308888244432 , y0=0.3681914011536888 , psi0=0.5599996918457315 , v0=2.4000000135383965 , spline0=1.2600000054298481 , a0=0.0 , w0=0.0
2026-01-21 11:46:54,465 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:54,466 - INFO - integration_test - Dyn residual k=0: pred=[1.3195721558996518, 0.4956760267133684, 0.5599996918457315, 2.4000000135383965, 1.5000000067836878], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.3195721558996518, 0.4956760267133684, 0.5599996918457315, 2.4000000135383965, 1.5000000067836878], res_norm=3.211e+00
2026-01-21 11:46:54,467 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:54,468 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:54,484 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:54,634 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:54,657 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:54,704 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:54,724 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:54,773 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:54,795 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:54,844 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:54,866 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:54,912 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:54,933 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:54,982 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:55,004 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:55,055 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:55,077 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:55,123 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:55,144 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:55,193 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:55,215 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:55,263 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:55,283 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:55,327 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:56,073 - INFO - integration_test - Step 7: MPC solve successful
2026-01-21 11:46:56,122 - INFO - integration_test - Step 7: Computed 6 numeric contouring constraints for visualization (s=1.260)
2026-01-21 11:46:56,123 - DEBUG - integration_test - Step 7: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:56,123 - INFO - integration_test - === Applying control at step 7 ===
2026-01-21 11:46:56,123 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019981524, 'w': -0.18004149355934237}
2026-01-21 11:46:56,123 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:56,123 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:56,124 - INFO - integration_test - Step 7 completed in 1.889s
2026-01-21 11:46:56,183 - INFO - integration_test - Step 8 (contouring until path end)
2026-01-21 11:46:56,185 - DEBUG - integration_test - Syncing planner state at step 8: vehicle_state=[1.32924439 0.49904843 0.54199554 2.60000002 1.52000001]
2026-01-21 11:46:56,186 - DEBUG - integration_test - Step 8: Using propagated spline 1.5200 (close to path, dist=0.195m, drift=0.543m)
2026-01-21 11:46:56,186 - DEBUG - integration_test -   Set spline state to 1.5200
2026-01-21 11:46:56,189 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:56,294 - DEBUG - integration_test - Step 8: Checking path alignment: vehicle=(1.329, 0.499), path_start=(0.000, 0.000), dist=1.420m
2026-01-21 11:46:56,294 - INFO - integration_test - === Calling planner.solve_mpc() at step 8 ===
2026-01-21 11:46:56,462 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:56,486 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:56,486 - INFO - integration_test - Warmstart k=0: x0=1.32924438681997 , y0=0.49904843399358845 , psi0=0.5419955424897973 , v0=2.600000015536549 , spline0=1.5200000069835031 , a0=0.0 , w0=0.0
2026-01-21 11:46:56,486 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:56,487 - INFO - integration_test - Dyn residual k=0: pred=[1.5519814466037123, 0.633168540639811, 0.5419955424897973, 2.600000015536549, 1.7800000085371581], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.5519814466037123, 0.633168540639811, 0.5419955424897973, 2.600000015536549, 1.7800000085371581], res_norm=3.610e+00
2026-01-21 11:46:56,488 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:56,489 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:56,505 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:56,659 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:56,681 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:56,728 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:56,749 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:56,800 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:56,821 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:56,870 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:56,891 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:56,953 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:56,975 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:57,024 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:57,046 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:57,093 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:57,114 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:57,163 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:57,184 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:57,235 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:57,257 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:57,301 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:57,321 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:57,369 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:58,001 - INFO - integration_test - Step 8: MPC solve successful
2026-01-21 11:46:58,050 - INFO - integration_test - Step 8: Computed 6 numeric contouring constraints for visualization (s=1.520)
2026-01-21 11:46:58,050 - DEBUG - integration_test - Step 8: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:46:58,050 - INFO - integration_test - === Applying control at step 8 ===
2026-01-21 11:46:58,050 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000050965356, 'w': -0.030404017722103858}
2026-01-21 11:46:58,050 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:46:58,050 - INFO - integration_test -   Planner output success: True
2026-01-21 11:46:58,052 - INFO - integration_test - Step 8 completed in 1.867s
2026-01-21 11:46:58,112 - INFO - integration_test - Step 9 (contouring until path end)
2026-01-21 11:46:58,113 - DEBUG - integration_test - Syncing planner state at step 9: vehicle_state=[1.56076224 0.63797082 0.53895514 2.80000002 1.80000001]
2026-01-21 11:46:58,114 - DEBUG - integration_test - Step 9: Using propagated spline 1.8000 (close to path, dist=0.251m, drift=0.335m)
2026-01-21 11:46:58,114 - DEBUG - integration_test -   Set spline state to 1.8000
2026-01-21 11:46:58,118 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:58,249 - DEBUG - integration_test - Step 9: Checking path alignment: vehicle=(1.561, 0.638), path_start=(0.000, 0.000), dist=1.686m
2026-01-21 11:46:58,249 - INFO - integration_test - === Calling planner.solve_mpc() at step 9 ===
2026-01-21 11:46:58,346 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:46:58,373 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:46:58,373 - INFO - integration_test - Warmstart k=0: x0=1.5607622388129132 , y0=0.6379708185449844 , psi0=0.5389551407175869 , v0=2.8000000160462024 , spline0=1.8000000085881234 , a0=0.0 , w0=0.0
2026-01-21 11:46:58,373 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:46:58,374 - INFO - integration_test - Dyn residual k=0: pred=[1.801070955784117, 0.7816778867296815, 0.5389551407175869, 2.8000000160462024, 2.0800000101927436], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[1.801070955784117, 0.7816778867296815, 0.5389551407175869, 2.8000000160462024, 2.0800000101927436], res_norm=4.039e+00
2026-01-21 11:46:58,375 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:58,376 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:46:58,393 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,544 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,568 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,616 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,639 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,690 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,710 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,766 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,789 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,837 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,860 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,908 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,928 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:58,977 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:58,999 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:59,046 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:59,072 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:59,123 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:46:59,145 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:59,192 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:46:59,215 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:46:59,262 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:00,034 - INFO - integration_test - Step 9: MPC solve successful
2026-01-21 11:47:00,159 - INFO - integration_test - Step 9: Computed 6 numeric contouring constraints for visualization (s=1.800)
2026-01-21 11:47:00,160 - DEBUG - integration_test - Step 9: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:00,160 - INFO - integration_test - === Applying control at step 9 ===
2026-01-21 11:47:00,160 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199988586, 'w': -0.07584577712807862}
2026-01-21 11:47:00,160 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:00,160 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:00,161 - INFO - integration_test - Step 9 completed in 2.048s
2026-01-21 11:47:00,223 - INFO - integration_test - Step 10 (contouring until path end)
2026-01-21 11:47:00,224 - DEBUG - integration_test - Syncing planner state at step 10: vehicle_state=[1.81022191 0.78585412 0.53137056 3.00000002 2.10000001]
2026-01-21 11:47:00,224 - DEBUG - integration_test - Step 10: Using propagated spline 2.1000 (close to path, dist=0.206m, drift=0.635m)
2026-01-21 11:47:00,224 - DEBUG - integration_test -   Set spline state to 2.1000
2026-01-21 11:47:00,227 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:00,333 - DEBUG - integration_test - Step 10: Checking path alignment: vehicle=(1.810, 0.786), path_start=(0.000, 0.000), dist=1.973m
2026-01-21 11:47:00,333 - INFO - integration_test - === Calling planner.solve_mpc() at step 10 ===
2026-01-21 11:47:00,428 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:00,453 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:00,454 - INFO - integration_test - Warmstart k=0: x0=1.8102219098974777 , y0=0.7858541187911473 , psi0=0.531370563004779 , v0=3.000000018046088 , spline0=2.100000010392732 , a0=0.0 , w0=0.0
2026-01-21 11:47:00,454 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:00,455 - INFO - integration_test - Dyn residual k=0: pred=[2.068855929974177, 0.9378687389489826, 0.531370563004779, 3.000000018046088, 2.400000012197341], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.068855929974177, 0.9378687389489826, 0.531370563004779, 3.000000018046088, 2.400000012197341], res_norm=4.495e+00
2026-01-21 11:47:00,456 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:00,457 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:00,475 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:00,626 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:00,649 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:00,696 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:00,717 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:00,767 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:00,788 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:00,835 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:00,859 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:00,906 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:00,926 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:00,974 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:00,995 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:01,043 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:01,066 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:01,112 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:01,133 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:01,184 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:01,205 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:01,251 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:01,274 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:01,317 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:02,233 - INFO - integration_test - Step 10: MPC solve successful
2026-01-21 11:47:02,289 - INFO - integration_test - Step 10: Computed 6 numeric contouring constraints for visualization (s=2.100)
2026-01-21 11:47:02,289 - DEBUG - integration_test - Step 10: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:02,289 - INFO - integration_test - === Applying control at step 10 ===
2026-01-21 11:47:02,289 - INFO - integration_test -   Control dict from planner: {'a': 1.195377165479798e-07, 'w': -0.06214401562716821}
2026-01-21 11:47:02,289 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:02,289 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:02,290 - INFO - integration_test - Step 10 completed in 2.067s
2026-01-21 11:47:02,346 - INFO - integration_test - Step 11 (contouring until path end)
2026-01-21 11:47:02,348 - DEBUG - integration_test - Syncing planner state at step 11: vehicle_state=[2.0693266  0.93706414 0.52515616 3.00000003 2.40000001]
2026-01-21 11:47:02,348 - DEBUG - integration_test - Step 11: Using propagated spline 2.4000 (close to path, dist=0.164m, drift=0.447m)
2026-01-21 11:47:02,348 - DEBUG - integration_test -   Set spline state to 2.4000
2026-01-21 11:47:02,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:02,458 - DEBUG - integration_test - Step 11: Checking path alignment: vehicle=(2.069, 0.937), path_start=(0.000, 0.000), dist=2.272m
2026-01-21 11:47:02,458 - INFO - integration_test - === Calling planner.solve_mpc() at step 11 ===
2026-01-21 11:47:02,552 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:02,581 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:02,581 - INFO - integration_test - Warmstart k=0: x0=2.0693266042318057 , y0=0.9370641355719593 , psi0=0.5251561614420622 , v0=3.00000002999986 , spline0=2.400000013392718 , a0=0.0 , w0=0.0
2026-01-21 11:47:02,581 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:02,582 - INFO - integration_test - Dyn residual k=0: pred=[2.3289003051055115, 1.087468575714927, 0.5251561614420622, 3.00000002999986, 2.700000016392704], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.3289003051055115, 1.087468575714927, 0.5251561614420622, 3.00000002999986, 2.700000016392704], res_norm=4.814e+00
2026-01-21 11:47:02,583 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:02,584 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:02,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:02,840 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:02,864 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:02,911 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:02,932 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:02,981 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,002 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,050 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,074 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,121 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,141 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,191 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,212 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,263 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,285 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,331 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,353 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,400 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:03,424 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,472 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:03,493 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:03,537 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:04,728 - INFO - integration_test - Step 11: MPC solve successful
2026-01-21 11:47:04,781 - INFO - integration_test - Step 11: Computed 6 numeric contouring constraints for visualization (s=2.400)
2026-01-21 11:47:04,781 - DEBUG - integration_test - Step 11: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:04,781 - INFO - integration_test - === Applying control at step 11 ===
2026-01-21 11:47:04,782 - INFO - integration_test -   Control dict from planner: {'a': -4.398131098774283e-07, 'w': -0.059987354338445806}
2026-01-21 11:47:04,782 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:04,782 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:04,783 - INFO - integration_test - Step 11 completed in 2.435s
2026-01-21 11:47:04,846 - INFO - integration_test - Step 12 (contouring until path end)
2026-01-21 11:47:04,854 - DEBUG - integration_test - Syncing planner state at step 12: vehicle_state=[2.32934986 1.08668912 0.51915743 2.99999999 2.70000001]
2026-01-21 11:47:04,855 - DEBUG - integration_test - Step 12: Using propagated spline 2.7000 (close to path, dist=0.250m, drift=0.258m)
2026-01-21 11:47:04,855 - DEBUG - integration_test -   Set spline state to 2.7000
2026-01-21 11:47:04,858 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:04,965 - DEBUG - integration_test - Step 12: Checking path alignment: vehicle=(2.329, 1.087), path_start=(0.000, 0.000), dist=2.570m
2026-01-21 11:47:04,965 - INFO - integration_test - === Calling planner.solve_mpc() at step 12 ===
2026-01-21 11:47:05,066 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:05,090 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:05,090 - INFO - integration_test - Warmstart k=0: x0=2.3293498632849916 , y0=1.0866891179315719 , psi0=0.5191574260082177 , v0=2.999999986018549 , spline0=2.7000000119945726 , a0=0.0 , w0=0.0
2026-01-21 11:47:05,090 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:05,091 - INFO - integration_test - Dyn residual k=0: pred=[2.5898211210301114, 1.2355337451432664, 0.5191574260082177, 2.999999986018549, 3.0000000105964277], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.5898211210301114, 1.2355337451432664, 0.5191574260082177, 2.999999986018549, 3.0000000105964277], res_norm=5.148e+00
2026-01-21 11:47:05,092 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:05,093 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:05,109 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,265 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,286 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,336 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,358 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,406 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,428 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,478 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,498 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,546 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,568 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,624 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,654 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,702 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,723 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,773 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,795 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,843 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:05,867 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,912 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:05,932 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:05,981 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:06,733 - INFO - integration_test - Step 12: MPC solve successful
2026-01-21 11:47:06,794 - INFO - integration_test - Step 12: Computed 6 numeric contouring constraints for visualization (s=2.700)
2026-01-21 11:47:06,795 - DEBUG - integration_test - Step 12: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:06,795 - INFO - integration_test - === Applying control at step 12 ===
2026-01-21 11:47:06,795 - INFO - integration_test -   Control dict from planner: {'a': 4.398133144674353e-07, 'w': -0.06915408306351235}
2026-01-21 11:47:06,795 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:06,795 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:06,796 - INFO - integration_test - Step 12 completed in 1.942s
2026-01-21 11:47:06,861 - INFO - integration_test - Step 13 (contouring until path end)
2026-01-21 11:47:06,862 - DEBUG - integration_test - Syncing planner state at step 13: vehicle_state=[2.59033371 1.23463193 0.51224202 3.00000003 3.00000001]
2026-01-21 11:47:06,863 - DEBUG - integration_test - Step 13: Using propagated spline 3.0000 (close to path, dist=0.173m, drift=0.558m)
2026-01-21 11:47:06,863 - DEBUG - integration_test -   Set spline state to 3.0000
2026-01-21 11:47:06,866 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:07,059 - DEBUG - integration_test - Step 13: Checking path alignment: vehicle=(2.590, 1.235), path_start=(0.000, 0.000), dist=2.870m
2026-01-21 11:47:07,059 - INFO - integration_test - === Calling planner.solve_mpc() at step 13 ===
2026-01-21 11:47:07,154 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:07,179 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:07,179 - INFO - integration_test - Warmstart k=0: x0=2.5903337055036424 , y0=1.2346319309050848 , psi0=0.5122420177018664 , v0=3.0000000299998804 , spline0=3.0000000149945607 , a0=0.0 , w0=0.0
2026-01-21 11:47:07,179 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:07,180 - INFO - integration_test - Dyn residual k=0: pred=[2.8518280520326025, 1.3816717504553857, 0.5122420177018664, 3.0000000299998804, 3.300000017994549], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[2.8518280520326025, 1.3816717504553857, 0.5122420177018664, 3.0000000299998804, 3.300000017994549], res_norm=5.495e+00
2026-01-21 11:47:07,181 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:07,182 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:07,198 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,350 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,373 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,422 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,443 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,491 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,511 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,559 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,582 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,632 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,654 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,704 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,724 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,772 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,794 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,842 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,864 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,913 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:07,934 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:07,981 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:08,003 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:08,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:08,950 - INFO - integration_test - Step 13: MPC solve successful
2026-01-21 11:47:09,009 - INFO - integration_test - Step 13: Computed 6 numeric contouring constraints for visualization (s=3.000)
2026-01-21 11:47:09,010 - DEBUG - integration_test - Step 13: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:09,010 - INFO - integration_test - === Applying control at step 13 ===
2026-01-21 11:47:09,010 - INFO - integration_test -   Control dict from planner: {'a': -3.630995666070307e-07, 'w': -0.047310432280314035}
2026-01-21 11:47:09,010 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:09,010 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:09,011 - INFO - integration_test - Step 13 completed in 2.149s
2026-01-21 11:47:09,073 - INFO - integration_test - Step 14 (contouring until path end)
2026-01-21 11:47:09,079 - DEBUG - integration_test - Syncing planner state at step 14: vehicle_state=[2.8521749  1.38105263 0.50751097 2.99999999 3.30000001]
2026-01-21 11:47:09,079 - DEBUG - integration_test - Step 14: Using propagated spline 3.3000 (close to path, dist=0.147m, drift=0.370m)
2026-01-21 11:47:09,079 - DEBUG - integration_test -   Set spline state to 3.3000
2026-01-21 11:47:09,082 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:09,190 - DEBUG - integration_test - Step 14: Checking path alignment: vehicle=(2.852, 1.381), path_start=(0.000, 0.000), dist=3.169m
2026-01-21 11:47:09,190 - INFO - integration_test - === Calling planner.solve_mpc() at step 14 ===
2026-01-21 11:47:09,289 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:09,314 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:09,314 - INFO - integration_test - Warmstart k=0: x0=2.8521749001763226 , y0=1.3810526316698941 , psi0=0.507510974473835 , v0=2.9999999936899235 , spline0=3.300000014363553 , a0=0.0 , w0=0.0
2026-01-21 11:47:09,314 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:09,315 - INFO - integration_test - Dyn residual k=0: pred=[3.114361966200932, 1.526853667437143, 0.507510974473835, 2.9999999936899235, 3.6000000137325454], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.114361966200932, 1.526853667437143, 0.507510974473835, 2.9999999936899235, 3.6000000137325454], res_norm=5.852e+00
2026-01-21 11:47:09,316 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:09,317 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:09,332 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,486 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,510 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,555 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,579 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,629 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,650 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,697 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,719 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,768 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,788 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,839 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,862 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,907 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,928 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:09,977 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:09,997 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:10,048 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:10,070 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:10,113 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:10,133 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:10,180 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:10,785 - INFO - integration_test - Step 14: MPC solve successful
2026-01-21 11:47:10,931 - INFO - integration_test - Step 14: Computed 6 numeric contouring constraints for visualization (s=3.300)
2026-01-21 11:47:10,931 - DEBUG - integration_test - Step 14: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:10,931 - INFO - integration_test - === Applying control at step 14 ===
2026-01-21 11:47:10,931 - INFO - integration_test -   Control dict from planner: {'a': 3.4605112518269427e-07, 'w': -0.06789686200850459}
2026-01-21 11:47:10,931 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:10,931 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:10,932 - INFO - integration_test - Step 14 completed in 1.854s
2026-01-21 11:47:10,991 - INFO - integration_test - Step 15 (contouring until path end)
2026-01-21 11:47:10,996 - DEBUG - integration_test - Syncing planner state at step 15: vehicle_state=[3.11485492 1.52596247 0.50072129 3.00000003 3.60000002]
2026-01-21 11:47:10,997 - DEBUG - integration_test - Step 15: Using propagated spline 3.6000 (close to path, dist=0.254m, drift=0.182m)
2026-01-21 11:47:10,997 - DEBUG - integration_test -   Set spline state to 3.6000
2026-01-21 11:47:11,000 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:11,109 - DEBUG - integration_test - Step 15: Checking path alignment: vehicle=(3.115, 1.526), path_start=(0.000, 0.000), dist=3.469m
2026-01-21 11:47:11,110 - INFO - integration_test - === Calling planner.solve_mpc() at step 15 ===
2026-01-21 11:47:11,203 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:11,231 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:11,231 - INFO - integration_test - Warmstart k=0: x0=3.1148549229969538 , y0=1.5259624675071235 , psi0=0.5007212882729846 , v0=3.000000028295036 , spline0=3.6000000171930564 , a0=0.0 , w0=0.0
2026-01-21 11:47:11,232 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:11,232 - INFO - integration_test - Dyn residual k=0: pred=[3.378025884364338, 1.6699799900197299, 0.5007212882729846, 3.000000028295036, 3.90000002002256], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.378025884364338, 1.6699799900197299, 0.5007212882729846, 3.000000028295036, 3.90000002002256], res_norm=6.218e+00
2026-01-21 11:47:11,233 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:11,234 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:11,251 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,401 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,425 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,473 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,494 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,541 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,563 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,610 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,634 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,682 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,704 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,751 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,772 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,823 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,846 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,893 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,917 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:11,968 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:11,988 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:12,037 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:12,059 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:12,104 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:12,749 - INFO - integration_test - Step 15: MPC solve successful
2026-01-21 11:47:12,809 - INFO - integration_test - Step 15: Computed 6 numeric contouring constraints for visualization (s=3.600)
2026-01-21 11:47:12,809 - DEBUG - integration_test - Step 15: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:12,810 - INFO - integration_test - === Applying control at step 15 ===
2026-01-21 11:47:12,810 - INFO - integration_test -   Control dict from planner: {'a': 1.695973989214047e-08, 'w': -0.05720637075058114}
2026-01-21 11:47:12,810 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:12,810 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:12,811 - INFO - integration_test - Step 15 completed in 1.815s
2026-01-21 11:47:12,873 - INFO - integration_test - Step 16 (contouring until path end)
2026-01-21 11:47:12,878 - DEBUG - integration_test - Syncing planner state at step 16: vehicle_state=[3.37843638 1.66922645 0.49500065 3.00000003 3.90000002]
2026-01-21 11:47:12,878 - DEBUG - integration_test - Step 16: Using propagated spline 3.9000 (close to path, dist=0.147m, drift=0.482m)
2026-01-21 11:47:12,878 - DEBUG - integration_test -   Set spline state to 3.9000
2026-01-21 11:47:12,881 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:12,988 - DEBUG - integration_test - Step 16: Checking path alignment: vehicle=(3.378, 1.669), path_start=(0.000, 0.000), dist=3.768m
2026-01-21 11:47:12,988 - INFO - integration_test - === Calling planner.solve_mpc() at step 16 ===
2026-01-21 11:47:13,086 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:13,111 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:13,111 - INFO - integration_test - Warmstart k=0: x0=3.378436383898807 , y0=1.669226453822917 , psi0=0.49500065119792647 , v0=3.00000002999101 , spline0=3.9000000201921576 , a0=0.0 , w0=0.0
2026-01-21 11:47:13,111 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:13,112 - INFO - integration_test - Dyn residual k=0: pred=[3.642426906686839, 1.8117361225389814, 0.49500065119792647, 3.00000002999101, 4.200000023191259], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.642426906686839, 1.8117361225389814, 0.49500065119792647, 3.00000002999101, 4.200000023191259], res_norm=6.590e+00
2026-01-21 11:47:13,113 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:13,114 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:13,130 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,370 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,392 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,441 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,465 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,514 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,535 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,583 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,604 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,657 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,680 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,728 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,749 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,798 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,820 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,871 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,892 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:13,941 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:13,961 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:14,008 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:14,031 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:14,079 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:14,645 - INFO - integration_test - Step 16: MPC solve successful
2026-01-21 11:47:14,708 - INFO - integration_test - Step 16: Computed 6 numeric contouring constraints for visualization (s=3.900)
2026-01-21 11:47:14,708 - DEBUG - integration_test - Step 16: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:14,709 - INFO - integration_test - === Applying control at step 16 ===
2026-01-21 11:47:14,709 - INFO - integration_test -   Control dict from planner: {'a': -9.347705538497046e-08, 'w': -0.051532668479435134}
2026-01-21 11:47:14,709 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:14,709 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:14,710 - INFO - integration_test - Step 16 completed in 1.832s
2026-01-21 11:47:14,771 - INFO - integration_test - Step 17 (contouring until path end)
2026-01-21 11:47:14,772 - DEBUG - integration_test - Syncing planner state at step 17: vehicle_state=[3.64279293 1.81105529 0.48984738 3.00000002 4.20000002]
2026-01-21 11:47:14,772 - DEBUG - integration_test - Step 17: Using propagated spline 4.2000 (close to path, dist=0.144m, drift=0.294m)
2026-01-21 11:47:14,772 - DEBUG - integration_test -   Set spline state to 4.2000
2026-01-21 11:47:14,775 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:14,884 - DEBUG - integration_test - Step 17: Checking path alignment: vehicle=(3.643, 1.811), path_start=(0.000, 0.000), dist=4.068m
2026-01-21 11:47:14,884 - INFO - integration_test - === Calling planner.solve_mpc() at step 17 ===
2026-01-21 11:47:14,983 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:15,008 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:15,008 - INFO - integration_test - Warmstart k=0: x0=3.642792932210398 , y0=1.8110552862683478 , psi0=0.48984738434998293 , v0=3.0000000206433044 , spline0=4.200000022256488 , a0=0.0 , w0=0.0
2026-01-21 11:47:15,008 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:15,009 - INFO - integration_test - Dyn residual k=0: pred=[3.9075143359950437, 1.952202654706037, 0.48984738434998293, 3.0000000206433044, 4.500000024320819], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[3.9075143359950437, 1.952202654706037, 0.48984738434998293, 3.0000000206433044, 4.500000024320819], res_norm=6.969e+00
2026-01-21 11:47:15,010 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:15,010 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:15,027 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,179 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,200 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,250 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,272 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,317 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,338 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,386 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,406 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,456 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,477 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,522 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,541 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,591 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,612 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,663 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,686 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,732 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:15,753 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,800 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:15,822 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:15,873 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:16,531 - INFO - integration_test - Step 17: MPC solve successful
2026-01-21 11:47:16,690 - INFO - integration_test - Step 17: Computed 6 numeric contouring constraints for visualization (s=4.200)
2026-01-21 11:47:16,690 - DEBUG - integration_test - Step 17: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:16,690 - INFO - integration_test - === Applying control at step 17 ===
2026-01-21 11:47:16,691 - INFO - integration_test -   Control dict from planner: {'a': 9.356565928375919e-08, 'w': -0.06625898390639011}
2026-01-21 11:47:16,691 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:16,691 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:16,692 - INFO - integration_test - Step 17 completed in 1.920s
2026-01-21 11:47:16,746 - INFO - integration_test - Step 18 (contouring until path end)
2026-01-21 11:47:16,747 - DEBUG - integration_test - Syncing planner state at step 18: vehicle_state=[3.90798001 1.95132462 0.48322149 3.00000003 4.50000003]
2026-01-21 11:47:16,748 - DEBUG - integration_test - Step 18: Using propagated spline 4.5000 (close to path, dist=0.248m, drift=0.594m)
2026-01-21 11:47:16,748 - DEBUG - integration_test -   Set spline state to 4.5000
2026-01-21 11:47:16,753 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:16,862 - DEBUG - integration_test - Step 18: Checking path alignment: vehicle=(3.908, 1.951), path_start=(0.000, 0.000), dist=4.368m
2026-01-21 11:47:16,862 - INFO - integration_test - === Calling planner.solve_mpc() at step 18 ===
2026-01-21 11:47:16,957 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:16,981 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:16,981 - INFO - integration_test - Warmstart k=0: x0=3.9079800117732852 , y0=1.951324616785848 , psi0=0.48322148595934394 , v0=3.00000002999987 , spline0=4.500000025256475 , a0=0.0 , w0=0.0
2026-01-21 11:47:16,981 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:16,982 - INFO - integration_test - Dyn residual k=0: pred=[4.173630826716343, 2.090714883017324, 0.48322148595934394, 3.00000002999987, 4.800000028256462], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.173630826716343, 2.090714883017324, 0.48322148595934394, 3.00000002999987, 4.800000028256462], res_norm=7.353e+00
2026-01-21 11:47:16,983 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:16,983 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:16,999 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,148 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,172 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,218 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,240 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,289 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,309 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,355 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,378 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,424 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,448 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,496 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,517 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,566 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,589 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,640 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,667 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,721 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:17,741 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,787 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:17,808 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:17,855 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:19,015 - INFO - integration_test - Step 18: MPC solve successful
2026-01-21 11:47:19,086 - INFO - integration_test - Step 18: Computed 6 numeric contouring constraints for visualization (s=4.500)
2026-01-21 11:47:19,086 - DEBUG - integration_test - Step 18: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:19,086 - INFO - integration_test - === Applying control at step 18 ===
2026-01-21 11:47:19,086 - INFO - integration_test -   Control dict from planner: {'a': -2.7389410893040666e-08, 'w': -0.0433220622660815}
2026-01-21 11:47:19,086 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:19,086 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:19,087 - INFO - integration_test - Step 18 completed in 2.340s
2026-01-21 11:47:19,144 - INFO - integration_test - Step 19 (contouring until path end)
2026-01-21 11:47:19,146 - DEBUG - integration_test - Syncing planner state at step 19: vehicle_state=[4.17393193 2.09013902 0.47888928 3.00000003 4.80000003]
2026-01-21 11:47:19,147 - DEBUG - integration_test - Step 19: Using propagated spline 4.8000 (close to path, dist=0.127m, drift=0.405m)
2026-01-21 11:47:19,147 - DEBUG - integration_test -   Set spline state to 4.8000
2026-01-21 11:47:19,150 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:19,257 - DEBUG - integration_test - Step 19: Checking path alignment: vehicle=(4.174, 2.090), path_start=(0.000, 0.000), dist=4.668m
2026-01-21 11:47:19,257 - INFO - integration_test - === Calling planner.solve_mpc() at step 19 ===
2026-01-21 11:47:19,353 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:19,378 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:19,378 - INFO - integration_test - Warmstart k=0: x0=4.173931928856902 , y0=2.090139020784135 , psi0=0.4788892797327358 , v0=3.000000027260929 , spline0=4.800000027982568 , a0=0.0 , w0=0.0
2026-01-21 11:47:19,378 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:19,379 - INFO - integration_test - Dyn residual k=0: pred=[4.440184116182495, 2.2283771283377085, 0.4788892797327358, 3.000000027260929, 5.100000030708661], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.440184116182495, 2.2283771283377085, 0.4788892797327358, 3.000000027260929, 5.100000030708661], res_norm=7.741e+00
2026-01-21 11:47:19,380 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:19,381 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:19,396 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,548 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,570 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,614 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,635 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,684 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,704 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,753 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,774 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,819 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,840 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,889 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,910 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:19,958 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:19,979 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:20,025 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:20,047 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:20,096 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:20,116 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:20,162 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:20,182 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:20,225 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:21,035 - INFO - integration_test - Step 19: MPC solve successful
2026-01-21 11:47:21,205 - INFO - integration_test - Step 19: Computed 6 numeric contouring constraints for visualization (s=4.800)
2026-01-21 11:47:21,206 - DEBUG - integration_test - Step 19: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:21,206 - INFO - integration_test - === Applying control at step 19 ===
2026-01-21 11:47:21,206 - INFO - integration_test -   Control dict from planner: {'a': 2.7389368600240315e-08, 'w': -0.07464744024097036}
2026-01-21 11:47:21,206 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:21,206 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:21,207 - INFO - integration_test - Step 19 completed in 2.061s
2026-01-21 11:47:21,266 - INFO - integration_test - Step 20 (contouring until path end)
2026-01-21 11:47:21,269 - DEBUG - integration_test - Syncing planner state at step 20: vehicle_state=[4.4406976  2.2273821  0.47142454 3.00000003 5.10000003]
2026-01-21 11:47:21,269 - DEBUG - integration_test - Step 20: Using propagated spline 5.1000 (close to path, dist=0.153m, drift=0.217m)
2026-01-21 11:47:21,269 - DEBUG - integration_test -   Set spline state to 5.1000
2026-01-21 11:47:21,272 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:21,380 - DEBUG - integration_test - Step 20: Checking path alignment: vehicle=(4.441, 2.227), path_start=(0.000, 0.000), dist=4.968m
2026-01-21 11:47:21,380 - INFO - integration_test - === Calling planner.solve_mpc() at step 20 ===
2026-01-21 11:47:21,477 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:21,503 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:21,503 - INFO - integration_test - Warmstart k=0: x0=4.44069759725734 , y0=2.2273820969797264 , psi0=0.4714245357086388 , v0=3.000000029999866 , spline0=5.100000030982555 , a0=0.0 , w0=0.0
2026-01-21 11:47:21,503 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:21,504 - INFO - integration_test - Dyn residual k=0: pred=[4.7079742692593625, 2.3636288672295755, 0.4714245357086388, 3.000000029999866, 5.400000033982542], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.7079742692593625, 2.3636288672295755, 0.4714245357086388, 3.000000029999866, 5.400000033982542], res_norm=8.132e+00
2026-01-21 11:47:21,505 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:21,506 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:21,524 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:21,694 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:21,717 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:21,764 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:21,785 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:21,835 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:21,859 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:21,908 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:21,930 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:21,977 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:21,997 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:22,047 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:22,069 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:22,118 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:22,139 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:22,186 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:22,206 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:22,253 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:22,277 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:22,325 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:22,349 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:22,398 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:23,217 - INFO - integration_test - Step 20: MPC solve successful
2026-01-21 11:47:23,298 - INFO - integration_test - Step 20: Computed 6 numeric contouring constraints for visualization (s=5.100)
2026-01-21 11:47:23,298 - DEBUG - integration_test - Step 20: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:23,298 - INFO - integration_test - === Applying control at step 20 ===
2026-01-21 11:47:23,298 - INFO - integration_test -   Control dict from planner: {'a': -3.223656299036969e-10, 'w': -0.05454799828676737}
2026-01-21 11:47:23,298 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:23,298 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:23,299 - INFO - integration_test - Step 20 completed in 2.031s
2026-01-21 11:47:23,357 - INFO - integration_test - Step 21 (contouring until path end)
2026-01-21 11:47:23,361 - DEBUG - integration_test - Syncing planner state at step 21: vehicle_state=[4.70834454 2.36289922 0.46596974 3.00000003 5.40000003]
2026-01-21 11:47:23,362 - DEBUG - integration_test - Step 21: Using propagated spline 5.4000 (close to path, dist=0.224m, drift=0.517m)
2026-01-21 11:47:23,362 - DEBUG - integration_test -   Set spline state to 5.4000
2026-01-21 11:47:23,365 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:23,473 - DEBUG - integration_test - Step 21: Checking path alignment: vehicle=(4.708, 2.363), path_start=(0.000, 0.000), dist=5.268m
2026-01-21 11:47:23,473 - INFO - integration_test - === Calling planner.solve_mpc() at step 21 ===
2026-01-21 11:47:23,681 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:23,706 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:23,706 - INFO - integration_test - Warmstart k=0: x0=4.708344542305593 , y0=2.3628992229982693 , psi0=0.46596973587996204 , v0=3.0000000299676297 , spline0=5.4000000339793175 , a0=0.0 , w0=0.0
2026-01-21 11:47:23,706 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:23,707 - INFO - integration_test - Dyn residual k=0: pred=[4.976360433100528, 2.4976860327366674, 0.46596973587996204, 3.0000000299676297, 5.70000003697608], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[4.976360433100528, 2.4976860327366674, 0.46596973587996204, 3.0000000299676297, 5.70000003697608], res_norm=8.527e+00
2026-01-21 11:47:23,708 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:23,709 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:23,725 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:23,898 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:23,919 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:23,968 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:23,990 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,035 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,057 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,107 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,127 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,177 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,198 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,248 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,271 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,332 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,365 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,424 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,444 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,496 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:24,519 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,567 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:24,586 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:24,630 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:25,555 - INFO - integration_test - Step 21: MPC solve successful
2026-01-21 11:47:25,615 - INFO - integration_test - Step 21: Computed 6 numeric contouring constraints for visualization (s=5.400)
2026-01-21 11:47:25,616 - DEBUG - integration_test - Step 21: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:25,616 - INFO - integration_test - === Applying control at step 21 ===
2026-01-21 11:47:25,616 - INFO - integration_test -   Control dict from planner: {'a': -7.692736736296559e-08, 'w': -0.06183751964729388}
2026-01-21 11:47:25,616 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:25,616 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:25,617 - INFO - integration_test - Step 21 completed in 2.256s
2026-01-21 11:47:25,682 - INFO - integration_test - Step 22 (contouring until path end)
2026-01-21 11:47:25,683 - DEBUG - integration_test - Syncing planner state at step 22: vehicle_state=[4.97677547 2.4968565  0.45978598 3.00000002 5.70000004]
2026-01-21 11:47:25,683 - DEBUG - integration_test - Step 22: Using propagated spline 5.7000 (close to path, dist=0.114m, drift=0.329m)
2026-01-21 11:47:25,683 - DEBUG - integration_test -   Set spline state to 5.7000
2026-01-21 11:47:25,686 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:25,794 - DEBUG - integration_test - Step 22: Checking path alignment: vehicle=(4.977, 2.497), path_start=(0.000, 0.000), dist=5.568m
2026-01-21 11:47:25,794 - INFO - integration_test - === Calling planner.solve_mpc() at step 22 ===
2026-01-21 11:47:25,893 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:25,917 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:25,917 - INFO - integration_test - Warmstart k=0: x0=4.976775467430893 , y0=2.4968565042979076 , psi0=0.4597859839152327 , v0=3.000000022274893 , spline0=5.700000036206807 , a0=0.0 , w0=0.0
2026-01-21 11:47:25,917 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:25,918 - INFO - integration_test - Dyn residual k=0: pred=[5.245619716138932, 2.6299834034321696, 0.4597859839152327, 3.000000022274893, 6.000000038434296], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.245619716138932, 2.6299834034321696, 0.4597859839152327, 3.000000022274893, 6.000000038434296], res_norm=8.924e+00
2026-01-21 11:47:25,919 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:25,920 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:25,936 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,105 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,126 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,176 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,197 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,246 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,269 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,316 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,336 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,385 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,405 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,454 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,478 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,524 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,544 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,593 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,613 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,664 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:26,686 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,730 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:26,751 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:26,798 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:27,416 - INFO - integration_test - Step 22: MPC solve successful
2026-01-21 11:47:27,597 - INFO - integration_test - Step 22: Computed 6 numeric contouring constraints for visualization (s=5.700)
2026-01-21 11:47:27,597 - DEBUG - integration_test - Step 22: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:27,597 - INFO - integration_test - === Applying control at step 22 ===
2026-01-21 11:47:27,597 - INFO - integration_test -   Control dict from planner: {'a': -1.5995627548978542e-07, 'w': -0.04324520126400501}
2026-01-21 11:47:27,597 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:27,597 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:27,598 - INFO - integration_test - Step 22 completed in 1.916s
2026-01-21 11:47:27,664 - INFO - integration_test - Step 23 (contouring until path end)
2026-01-21 11:47:27,665 - DEBUG - integration_test - Syncing planner state at step 23: vehicle_state=[5.24590673 2.62940168 0.45546146 3.00000001 6.00000004]
2026-01-21 11:47:27,666 - DEBUG - integration_test - Step 23: Using propagated spline 6.0000 (close to path, dist=0.174m, drift=0.140m)
2026-01-21 11:47:27,666 - DEBUG - integration_test -   Set spline state to 6.0000
2026-01-21 11:47:27,669 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:27,779 - DEBUG - integration_test - Step 23: Checking path alignment: vehicle=(5.246, 2.629), path_start=(0.000, 0.000), dist=5.868m
2026-01-21 11:47:27,780 - INFO - integration_test - === Calling planner.solve_mpc() at step 23 ===
2026-01-21 11:47:27,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:27,906 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:27,906 - INFO - integration_test - Warmstart k=0: x0=5.245906731986763 , y0=2.629401677858598 , psi0=0.4554614637888322 , v0=3.0000000062792656 , spline0=6.0000000368347335 , a0=0.0 , w0=0.0
2026-01-21 11:47:27,906 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:27,907 - INFO - integration_test - Dyn residual k=0: pred=[5.515324173530548, 2.76136471271593, 0.4554614637888322, 3.0000000062792656, 6.30000003746266], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.515324173530548, 2.76136471271593, 0.4554614637888322, 3.0000000062792656, 6.30000003746266], res_norm=9.324e+00
2026-01-21 11:47:27,908 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:27,909 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:27,925 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,096 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,117 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,167 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,188 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,234 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,258 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,306 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,327 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,375 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,395 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,440 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,465 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,513 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,533 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,582 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,603 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,656 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:28,685 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,756 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:28,786 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:28,837 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:29,440 - INFO - integration_test - Step 23: MPC solve successful
2026-01-21 11:47:29,513 - INFO - integration_test - Step 23: Computed 6 numeric contouring constraints for visualization (s=6.000)
2026-01-21 11:47:29,513 - DEBUG - integration_test - Step 23: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:29,513 - INFO - integration_test - === Applying control at step 23 ===
2026-01-21 11:47:29,513 - INFO - integration_test -   Control dict from planner: {'a': 2.263128591880239e-07, 'w': -0.07442542964463984}
2026-01-21 11:47:29,513 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:29,513 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:29,514 - INFO - integration_test - Step 23 completed in 1.849s
2026-01-21 11:47:29,578 - INFO - integration_test - Step 24 (contouring until path end)
2026-01-21 11:47:29,579 - DEBUG - integration_test - Syncing planner state at step 24: vehicle_state=[5.51581276 2.76036092 0.44801892 3.00000003 6.30000004]
2026-01-21 11:47:29,580 - DEBUG - integration_test - Step 24: Using propagated spline 6.3000 (close to path, dist=0.199m, drift=0.440m)
2026-01-21 11:47:29,580 - DEBUG - integration_test -   Set spline state to 6.3000
2026-01-21 11:47:29,583 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:29,693 - DEBUG - integration_test - Step 24: Checking path alignment: vehicle=(5.516, 2.760), path_start=(0.000, 0.000), dist=6.168m
2026-01-21 11:47:29,693 - INFO - integration_test - === Calling planner.solve_mpc() at step 24 ===
2026-01-21 11:47:29,793 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:29,817 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:29,818 - INFO - integration_test - Warmstart k=0: x0=5.515812755331026 , y0=2.760360924127396 , psi0=0.44801892082436817 , v0=3.0000000289105513 , spline0=6.300000039725789 , a0=0.0 , w0=0.0
2026-01-21 11:47:29,818 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:29,818 - INFO - integration_test - Dyn residual k=0: pred=[5.786204868727865, 2.8903151727975485, 0.44801892082436817, 3.0000000289105513, 6.600000042616844], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[5.786204868727865, 2.8903151727975485, 0.44801892082436817, 3.0000000289105513, 6.600000042616844], res_norm=9.726e+00
2026-01-21 11:47:29,819 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:29,820 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:29,836 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,006 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,027 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,078 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,100 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,145 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,168 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,214 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,235 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,288 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,308 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,358 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,380 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,425 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,446 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,497 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,518 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,567 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:30,589 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,633 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:30,655 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:30,704 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:31,392 - INFO - integration_test - Step 24: MPC solve successful
2026-01-21 11:47:31,574 - INFO - integration_test - Step 24: Computed 6 numeric contouring constraints for visualization (s=6.300)
2026-01-21 11:47:31,575 - DEBUG - integration_test - Step 24: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:31,575 - INFO - integration_test - === Applying control at step 24 ===
2026-01-21 11:47:31,575 - INFO - integration_test -   Control dict from planner: {'a': 1.0893019048217512e-08, 'w': -0.060913864548876026}
2026-01-21 11:47:31,575 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:31,575 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:31,576 - INFO - integration_test - Step 24 completed in 1.997s
2026-01-21 11:47:31,636 - INFO - integration_test - Step 25 (contouring until path end)
2026-01-21 11:47:31,637 - DEBUG - integration_test - Syncing planner state at step 25: vehicle_state=[5.786599   2.88949084 0.44192753 3.00000003 6.60000004]
2026-01-21 11:47:31,638 - DEBUG - integration_test - Step 25: Using propagated spline 6.6000 (close to path, dist=0.112m, drift=0.252m)
2026-01-21 11:47:31,638 - DEBUG - integration_test -   Set spline state to 6.6000
2026-01-21 11:47:31,641 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:31,748 - DEBUG - integration_test - Step 25: Checking path alignment: vehicle=(5.787, 2.889), path_start=(0.000, 0.000), dist=6.468m
2026-01-21 11:47:31,748 - INFO - integration_test - === Calling planner.solve_mpc() at step 25 ===
2026-01-21 11:47:31,847 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:31,876 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:31,876 - INFO - integration_test - Warmstart k=0: x0=5.78659899618209 , y0=2.8894908402818986 , psi0=0.44192753436948057 , v0=3.0000000299998533 , spline0=6.600000042725774 , a0=0.0 , w0=0.0
2026-01-21 11:47:31,876 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:31,877 - INFO - integration_test - Dyn residual k=0: pred=[6.057777689899436, 3.017795625359249, 0.44192753436948057, 3.0000000299998533, 6.900000045725759], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.057777689899436, 3.017795625359249, 0.44192753436948057, 3.0000000299998533, 6.900000045725759], res_norm=1.013e+01
2026-01-21 11:47:31,878 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:31,879 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:31,896 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,070 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,094 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,140 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,163 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,210 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,230 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,281 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,304 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,352 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,373 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,423 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,444 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,496 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,521 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,570 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,593 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,642 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:32,666 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,713 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:32,736 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:32,781 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:33,567 - INFO - integration_test - Step 25: MPC solve successful
2026-01-21 11:47:33,644 - INFO - integration_test - Step 25: Computed 6 numeric contouring constraints for visualization (s=6.600)
2026-01-21 11:47:33,644 - DEBUG - integration_test - Step 25: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:33,644 - INFO - integration_test - === Applying control at step 25 ===
2026-01-21 11:47:33,644 - INFO - integration_test -   Control dict from planner: {'a': -1.875383587399624e-07, 'w': -0.041358705320292566}
2026-01-21 11:47:33,644 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:33,644 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:33,646 - INFO - integration_test - Step 25 completed in 2.009s
2026-01-21 11:47:33,707 - INFO - integration_test - Step 26 (contouring until path end)
2026-01-21 11:47:33,711 - DEBUG - integration_test - Syncing planner state at step 26: vehicle_state=[6.05804224 3.01723448 0.43779166 3.00000001 6.90000004]
2026-01-21 11:47:33,712 - DEBUG - integration_test - Step 26: Using propagated spline 6.9000 (close to path, dist=0.204m, drift=0.064m)
2026-01-21 11:47:33,712 - DEBUG - integration_test -   Set spline state to 6.9000
2026-01-21 11:47:33,714 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:33,821 - DEBUG - integration_test - Step 26: Checking path alignment: vehicle=(6.058, 3.017), path_start=(0.000, 0.000), dist=6.768m
2026-01-21 11:47:33,821 - INFO - integration_test - === Calling planner.solve_mpc() at step 26 ===
2026-01-21 11:47:34,035 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:34,062 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:34,062 - INFO - integration_test - Warmstart k=0: x0=6.058042241558597 , y0=3.0172344799914663 , psi0=0.43779166383745133 , v0=3.0000000112460175 , spline0=6.900000043850375 , a0=0.0 , w0=0.0
2026-01-21 11:47:34,062 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:34,064 - INFO - integration_test - Dyn residual k=0: pred=[6.329749264734204, 3.144416610150585, 0.43779166383745133, 3.0000000112460175, 7.200000044974977], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.329749264734204, 3.144416610150585, 0.43779166383745133, 3.0000000112460175, 7.200000044974977], res_norm=1.053e+01
2026-01-21 11:47:34,065 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:34,066 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:34,084 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,253 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,280 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,327 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,348 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,400 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,420 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,471 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,494 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,542 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,565 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,613 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,635 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,687 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,709 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,758 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,779 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,828 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:34,850 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,899 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:34,920 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:34,966 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:35,629 - INFO - integration_test - Step 26: MPC solve successful
2026-01-21 11:47:35,710 - INFO - integration_test - Step 26: Computed 6 numeric contouring constraints for visualization (s=6.900)
2026-01-21 11:47:35,710 - DEBUG - integration_test - Step 26: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:35,710 - INFO - integration_test - === Applying control at step 26 ===
2026-01-21 11:47:35,710 - INFO - integration_test -   Control dict from planner: {'a': -8.40163339593633e-09, 'w': -0.0815499291749807}
2026-01-21 11:47:35,710 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:35,710 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:35,712 - INFO - integration_test - Step 26 completed in 2.001s
2026-01-21 11:47:35,775 - INFO - integration_test - Step 27 (contouring until path end)
2026-01-21 11:47:35,775 - DEBUG - integration_test - Syncing planner state at step 27: vehicle_state=[6.33026483 3.14330732 0.42963667 3.00000001 7.20000004]
2026-01-21 11:47:35,776 - DEBUG - integration_test - Step 27: Using propagated spline 7.2000 (close to path, dist=0.174m, drift=0.364m)
2026-01-21 11:47:35,776 - DEBUG - integration_test -   Set spline state to 7.2000
2026-01-21 11:47:35,779 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:35,889 - DEBUG - integration_test - Step 27: Checking path alignment: vehicle=(6.330, 3.143), path_start=(0.000, 0.000), dist=7.068m
2026-01-21 11:47:35,889 - INFO - integration_test - === Calling planner.solve_mpc() at step 27 ===
2026-01-21 11:47:35,986 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:36,011 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:36,011 - INFO - integration_test - Warmstart k=0: x0=6.3302648349213015 , y0=3.1433073221681096 , psi0=0.4296366709199533 , v0=3.000000010405854 , spline0=7.2000000448909605 , a0=0.0 , w0=0.0
2026-01-21 11:47:36,011 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:36,012 - INFO - integration_test - Dyn residual k=0: pred=[6.60299998115571, 3.2682694789710682, 0.4296366709199533, 3.000000010405854, 7.500000045931546], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.60299998115571, 3.2682694789710682, 0.4296366709199533, 3.000000010405854, 7.500000045931546], res_norm=1.094e+01
2026-01-21 11:47:36,012 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:36,013 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:36,029 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,204 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,225 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,275 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,298 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,346 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,368 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,414 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,434 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,484 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,504 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,551 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,573 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,619 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,639 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,694 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,724 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,798 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:36,824 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,873 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:36,893 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:36,940 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:38,072 - INFO - integration_test - Step 27: MPC solve successful
2026-01-21 11:47:38,271 - INFO - integration_test - Step 27: Computed 6 numeric contouring constraints for visualization (s=7.200)
2026-01-21 11:47:38,271 - DEBUG - integration_test - Step 27: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:38,271 - INFO - integration_test - === Applying control at step 27 ===
2026-01-21 11:47:38,271 - INFO - integration_test -   Control dict from planner: {'a': 1.886864595357911e-07, 'w': -0.058411896446616804}
2026-01-21 11:47:38,271 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:38,271 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:38,273 - INFO - integration_test - Step 27 completed in 2.497s
2026-01-21 11:47:38,336 - INFO - integration_test - Step 28 (contouring until path end)
2026-01-21 11:47:38,337 - DEBUG - integration_test - Syncing planner state at step 28: vehicle_state=[6.60336339 3.26747222 0.42379548 3.00000003 7.50000005]
2026-01-21 11:47:38,338 - DEBUG - integration_test - Step 28: Using propagated spline 7.5000 (close to path, dist=0.124m, drift=0.175m)
2026-01-21 11:47:38,338 - DEBUG - integration_test -   Set spline state to 7.5000
2026-01-21 11:47:38,341 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:38,444 - DEBUG - integration_test - Step 28: Checking path alignment: vehicle=(6.603, 3.267), path_start=(0.000, 0.000), dist=7.368m
2026-01-21 11:47:38,444 - INFO - integration_test - === Calling planner.solve_mpc() at step 28 ===
2026-01-21 11:47:38,550 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:38,580 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:38,580 - INFO - integration_test - Warmstart k=0: x0=6.603363393877152 , y0=3.2674722221631787 , psi0=0.4237954812752916 , v0=3.0000000292744997 , spline0=7.500000047818411 , a0=0.0 , w0=0.0
2026-01-21 11:47:38,580 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:38,581 - INFO - integration_test - Dyn residual k=0: pred=[6.8768238125573085, 3.3908391592725344, 0.4237954812752916, 3.0000000292744997, 7.800000050745861], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[6.8768238125573085, 3.3908391592725344, 0.4237954812752916, 3.0000000292744997, 7.800000050745861], res_norm=1.135e+01
2026-01-21 11:47:38,582 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:38,583 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:38,601 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:38,859 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:38,887 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:38,954 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:38,978 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,027 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,051 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,101 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,125 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,182 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,206 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,259 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,284 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,337 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,363 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,413 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,436 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,492 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:39,516 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,567 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:39,590 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:39,664 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:40,509 - INFO - integration_test - Step 28: MPC solve successful
2026-01-21 11:47:40,595 - INFO - integration_test - Step 28: Computed 6 numeric contouring constraints for visualization (s=7.500)
2026-01-21 11:47:40,596 - DEBUG - integration_test - Step 28: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:40,596 - INFO - integration_test - === Applying control at step 28 ===
2026-01-21 11:47:40,596 - INFO - integration_test -   Control dict from planner: {'a': -6.311941742657822e-07, 'w': -0.28516072402393094}
2026-01-21 11:47:40,596 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:40,596 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:40,597 - INFO - integration_test - Step 28 completed in 2.260s
2026-01-21 11:47:40,677 - INFO - integration_test - Step 29 (contouring until path end)
2026-01-21 11:47:40,678 - DEBUG - integration_test - Syncing planner state at step 29: vehicle_state=[6.8785456  3.38692369 0.39527941 2.99999997 7.80000004]
2026-01-21 11:47:40,679 - DEBUG - integration_test - Step 29: Using propagated spline 7.8000 (close to path, dist=0.244m, drift=0.013m)
2026-01-21 11:47:40,679 - DEBUG - integration_test -   Set spline state to 7.8000
2026-01-21 11:47:40,683 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:40,805 - DEBUG - integration_test - Step 29: Checking path alignment: vehicle=(6.879, 3.387), path_start=(0.000, 0.000), dist=7.667m
2026-01-21 11:47:40,805 - INFO - integration_test - === Calling planner.solve_mpc() at step 29 ===
2026-01-21 11:47:40,914 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:40,941 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:40,941 - INFO - integration_test - Warmstart k=0: x0=6.878545600820371 , y0=3.386923694751422 , psi0=0.3952794088728985 , v0=2.9999999661550825 , spline0=7.800000044433919 , a0=0.0 , w0=0.0
2026-01-21 11:47:40,941 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:40,942 - INFO - integration_test - Dyn residual k=0: pred=[7.155412300550864, 3.5024435136123, 0.3952794088728985, 2.9999999661550825, 8.100000041049427], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.155412300550864, 3.5024435136123, 0.3952794088728985, 2.9999999661550825, 8.100000041049427], res_norm=1.176e+01
2026-01-21 11:47:40,943 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:40,943 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:40,963 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,144 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,167 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,215 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,236 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,286 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,307 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,352 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,376 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,422 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,442 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,493 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,514 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,561 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,582 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,628 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,650 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,701 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:41,721 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,766 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:41,789 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:41,838 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:42,599 - INFO - integration_test - Step 29: MPC solve successful
2026-01-21 11:47:42,807 - INFO - integration_test - Step 29: Computed 6 numeric contouring constraints for visualization (s=7.800)
2026-01-21 11:47:42,808 - DEBUG - integration_test - Step 29: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:42,808 - INFO - integration_test - === Applying control at step 29 ===
2026-01-21 11:47:42,808 - INFO - integration_test -   Control dict from planner: {'a': 6.051056453531731e-07, 'w': -0.7999875677836815}
2026-01-21 11:47:42,808 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:42,808 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:42,809 - INFO - integration_test - Step 29 completed in 2.131s
2026-01-21 11:47:42,874 - INFO - integration_test - Step 30 (contouring until path end)
2026-01-21 11:47:42,875 - DEBUG - integration_test - Syncing planner state at step 30: vehicle_state=[7.15973534 3.49125175 0.31528065 3.00000003 8.10000005]
2026-01-21 11:47:42,876 - DEBUG - integration_test - Step 30: Using propagated spline 8.1000 (close to path, dist=0.169m, drift=0.287m)
2026-01-21 11:47:42,876 - DEBUG - integration_test -   Set spline state to 8.1000
2026-01-21 11:47:42,879 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:42,987 - DEBUG - integration_test - Step 30: Checking path alignment: vehicle=(7.160, 3.491), path_start=(0.000, 0.000), dist=7.966m
2026-01-21 11:47:42,987 - INFO - integration_test - === Calling planner.solve_mpc() at step 30 ===
2026-01-21 11:47:43,085 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:43,111 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:43,111 - INFO - integration_test - Warmstart k=0: x0=7.159735343746793 , y0=3.4912517472910927 , psi0=0.3152806520945303 , v0=3.000000026665647 , spline0=8.100000047100483 , a0=0.0 , w0=0.0
2026-01-21 11:47:43,112 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:43,114 - INFO - integration_test - Dyn residual k=0: pred=[7.444948163530502, 3.5842767387233123, 0.3152806520945303, 3.000000026665647, 8.400000049767048], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.444948163530502, 3.5842767387233123, 0.3152806520945303, 3.000000026665647, 8.400000049767048], res_norm=1.216e+01
2026-01-21 11:47:43,115 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:43,116 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:43,133 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,303 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,327 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,374 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,394 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,442 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,464 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,511 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,531 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,580 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,601 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,651 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,675 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,724 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,746 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,794 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,814 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,864 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:43,887 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,932 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:43,956 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:43,999 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:45,167 - INFO - integration_test - Step 30: MPC solve successful
2026-01-21 11:47:45,246 - INFO - integration_test - Step 30: Computed 6 numeric contouring constraints for visualization (s=8.100)
2026-01-21 11:47:45,247 - DEBUG - integration_test - Step 30: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:45,247 - INFO - integration_test - === Applying control at step 30 ===
2026-01-21 11:47:45,247 - INFO - integration_test -   Control dict from planner: {'a': 3.265841013077849e-08, 'w': -0.7999998836560299}
2026-01-21 11:47:45,247 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:45,247 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:45,248 - INFO - integration_test - Step 30 completed in 2.373s
2026-01-21 11:47:45,313 - INFO - integration_test - Step 31 (contouring until path end)
2026-01-21 11:47:45,315 - DEBUG - integration_test - Syncing planner state at step 31: vehicle_state=[7.44836305 3.57277512 0.23528066 3.00000003 8.40000005]
2026-01-21 11:47:45,315 - DEBUG - integration_test - Step 31: Using propagated spline 8.4000 (close to path, dist=0.206m, drift=0.099m)
2026-01-21 11:47:45,315 - DEBUG - integration_test -   Set spline state to 8.4000
2026-01-21 11:47:45,318 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:45,423 - DEBUG - integration_test - Step 31: Checking path alignment: vehicle=(7.448, 3.573), path_start=(0.000, 0.000), dist=8.261m
2026-01-21 11:47:45,423 - INFO - integration_test - === Calling planner.solve_mpc() at step 31 ===
2026-01-21 11:47:45,521 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:45,545 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:45,546 - INFO - integration_test - Warmstart k=0: x0=7.448363053219551 , y0=3.572775117151668 , psi0=0.2352806637289273 , v0=3.000000029931488 , spline0=8.400000050093633 , a0=0.0 , w0=0.0
2026-01-21 11:47:45,546 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:45,547 - INFO - integration_test - Dyn residual k=0: pred=[7.740097741865061, 3.6427098956012802, 0.2352806637289273, 3.000000029931488, 8.700000053086782], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[7.740097741865061, 3.6427098956012802, 0.2352806637289273, 3.000000029931488, 8.700000053086782], res_norm=1.257e+01
2026-01-21 11:47:45,547 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:45,548 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:45,567 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:45,735 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:45,759 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:45,807 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:45,827 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:45,878 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:45,901 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:45,951 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:45,973 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,019 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:46,039 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,089 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:46,111 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,159 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:46,181 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,227 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:46,250 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,299 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:46,320 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,367 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:46,388 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:46,432 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:47,621 - INFO - integration_test - Step 31: MPC solve successful
2026-01-21 11:47:47,826 - INFO - integration_test - Step 31: Computed 6 numeric contouring constraints for visualization (s=8.400)
2026-01-21 11:47:47,826 - DEBUG - integration_test - Step 31: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:47,827 - INFO - integration_test - === Applying control at step 31 ===
2026-01-21 11:47:47,827 - INFO - integration_test -   Control dict from planner: {'a': 3.1835379290607613e-10, 'w': -0.5846715065162065}
2026-01-21 11:47:47,827 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:47,827 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:47,828 - INFO - integration_test - Step 31 completed in 2.514s
2026-01-21 11:47:47,896 - INFO - integration_test - Step 32 (contouring until path end)
2026-01-21 11:47:47,897 - DEBUG - integration_test - Syncing planner state at step 32: vehicle_state=[7.74197542 3.63414404 0.17681351 3.00000003 8.70000005]
2026-01-21 11:47:47,897 - DEBUG - integration_test - Step 32: Using propagated spline 8.7000 (close to path, dist=0.323m, drift=0.399m)
2026-01-21 11:47:47,898 - DEBUG - integration_test -   Set spline state to 8.7000
2026-01-21 11:47:47,901 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:48,009 - DEBUG - integration_test - Step 32: Checking path alignment: vehicle=(7.742, 3.634), path_start=(0.000, 0.000), dist=8.552m
2026-01-21 11:47:48,009 - INFO - integration_test - === Calling planner.solve_mpc() at step 32 ===
2026-01-21 11:47:48,110 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:48,136 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:48,136 - INFO - integration_test - Warmstart k=0: x0=7.741975421398309 , y0=3.6341440395995512 , psi0=0.17681351307730667 , v0=3.0000000299633234 , spline0=8.700000053089965 , a0=0.0 , w0=0.0
2026-01-21 11:47:48,136 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:48,137 - INFO - integration_test - Dyn residual k=0: pred=[8.037298176066464, 3.6869121395559885, 0.17681351307730667, 3.0000000299633234, 9.000000056086298], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.037298176066464, 3.6869121395559885, 0.17681351307730667, 3.0000000299633234, 9.000000056086298], res_norm=1.297e+01
2026-01-21 11:47:48,138 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:48,138 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:48,157 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,327 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,350 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,398 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,419 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,468 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,490 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,538 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,559 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,606 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,627 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,678 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,700 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,747 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,771 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,818 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,838 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,892 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:48,915 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:48,961 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:48,982 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:49,028 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:50,082 - INFO - integration_test - Step 32: MPC solve successful
2026-01-21 11:47:50,159 - INFO - integration_test - Step 32: Computed 6 numeric contouring constraints for visualization (s=8.700)
2026-01-21 11:47:50,159 - DEBUG - integration_test - Step 32: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:50,159 - INFO - integration_test - === Applying control at step 32 ===
2026-01-21 11:47:50,160 - INFO - integration_test -   Control dict from planner: {'a': -9.956572333782753e-09, 'w': -0.1358193840703145}
2026-01-21 11:47:50,160 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:50,160 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:50,161 - INFO - integration_test - Step 32 completed in 2.265s
2026-01-21 11:47:50,227 - INFO - integration_test - Step 33 (contouring until path end)
2026-01-21 11:47:50,228 - DEBUG - integration_test - Syncing planner state at step 33: vehicle_state=[8.03764744 3.68490502 0.16323157 3.00000003 9.00000006]
2026-01-21 11:47:50,229 - DEBUG - integration_test - Step 33: Using propagated spline 9.0000 (close to path, dist=0.319m, drift=0.211m)
2026-01-21 11:47:50,229 - DEBUG - integration_test -   Set spline state to 9.0000
2026-01-21 11:47:50,232 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:50,343 - DEBUG - integration_test - Step 33: Checking path alignment: vehicle=(8.038, 3.685), path_start=(0.000, 0.000), dist=8.842m
2026-01-21 11:47:50,343 - INFO - integration_test - === Calling planner.solve_mpc() at step 33 ===
2026-01-21 11:47:50,575 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:50,603 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:50,603 - INFO - integration_test - Warmstart k=0: x0=8.037647437486354 , y0=3.6849050203139315 , psi0=0.16323157467027521 , v0=3.000000028967666 , spline0=9.000000055986732 , a0=0.0 , w0=0.0
2026-01-21 11:47:50,603 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:50,604 - INFO - integration_test - Dyn residual k=0: pred=[8.333659624569915, 3.7336573211423785, 0.16323157467027521, 3.000000028967666, 9.300000058883498], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.333659624569915, 3.7336573211423785, 0.16323157467027521, 3.000000028967666, 9.300000058883498], res_norm=1.338e+01
2026-01-21 11:47:50,605 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:50,606 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:50,621 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:50,802 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:50,825 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:50,872 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:50,897 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:50,946 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:50,969 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,018 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:51,040 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,090 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:51,111 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,161 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:51,183 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,229 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:51,252 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,300 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:51,322 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,371 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:51,391 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,434 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:51,458 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:51,505 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:52,650 - INFO - integration_test - Step 33: MPC solve successful
2026-01-21 11:47:52,736 - INFO - integration_test - Step 33: Computed 6 numeric contouring constraints for visualization (s=9.000)
2026-01-21 11:47:52,736 - DEBUG - integration_test - Step 33: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:52,736 - INFO - integration_test - === Applying control at step 33 ===
2026-01-21 11:47:52,736 - INFO - integration_test -   Control dict from planner: {'a': 9.3018871860195e-09, 'w': -0.09394807028362567}
2026-01-21 11:47:52,736 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:52,736 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:52,737 - INFO - integration_test - Step 33 completed in 2.509s
2026-01-21 11:47:52,797 - INFO - integration_test - Step 34 (contouring until path end)
2026-01-21 11:47:52,798 - DEBUG - integration_test - Syncing planner state at step 34: vehicle_state=[8.33388428 3.73226613 0.15383677 3.00000003 9.30000006]
2026-01-21 11:47:52,799 - DEBUG - integration_test - Step 34: Using propagated spline 9.3000 (close to path, dist=0.422m, drift=0.022m)
2026-01-21 11:47:52,799 - DEBUG - integration_test -   Set spline state to 9.3000
2026-01-21 11:47:52,802 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:52,913 - DEBUG - integration_test - Step 34: Checking path alignment: vehicle=(8.334, 3.732), path_start=(0.000, 0.000), dist=9.131m
2026-01-21 11:47:52,913 - INFO - integration_test - === Calling planner.solve_mpc() at step 34 ===
2026-01-21 11:47:53,008 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:53,033 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:53,033 - INFO - integration_test - Warmstart k=0: x0=8.33388427772307 , y0=3.732266125526549 , psi0=0.15383676764191265 , v0=3.000000029897855 , spline0=9.300000058976517 , a0=0.0 , w0=0.0
2026-01-21 11:47:53,033 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:53,034 - INFO - integration_test - Dyn residual k=0: pred=[8.630341413342604, 3.7782353384209726, 0.15383676764191265, 3.000000029897855, 9.600000061966302], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.630341413342604, 3.7782353384209726, 0.15383676764191265, 3.000000029897855, 9.600000061966302], res_norm=1.378e+01
2026-01-21 11:47:53,034 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:53,035 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:53,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,226 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,246 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,297 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,319 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,366 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,388 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,432 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,455 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,507 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,531 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,580 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,602 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,651 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,673 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,723 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,743 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,794 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:53,814 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,857 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:53,881 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:53,929 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:54,823 - INFO - integration_test - Step 34: MPC solve successful
2026-01-21 11:47:55,058 - INFO - integration_test - Step 34: Computed 6 numeric contouring constraints for visualization (s=9.300)
2026-01-21 11:47:55,059 - DEBUG - integration_test - Step 34: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:55,059 - INFO - integration_test - === Applying control at step 34 ===
2026-01-21 11:47:55,059 - INFO - integration_test -   Control dict from planner: {'a': -2.3549536200293626e-08, 'w': -0.4364918590024455}
2026-01-21 11:47:55,059 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:55,059 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:55,061 - INFO - integration_test - Step 34 completed in 2.263s
2026-01-21 11:47:55,118 - INFO - integration_test - Step 35 (contouring until path end)
2026-01-21 11:47:55,119 - DEBUG - integration_test - Syncing planner state at step 35: vehicle_state=[8.63125039 3.77175171 0.11018758 3.00000003 9.60000006]
2026-01-21 11:47:55,120 - DEBUG - integration_test - Step 35: Using propagated spline 9.6000 (close to path, dist=0.486m, drift=0.322m)
2026-01-21 11:47:55,120 - DEBUG - integration_test -   Set spline state to 9.6000
2026-01-21 11:47:55,123 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:55,228 - DEBUG - integration_test - Step 35: Checking path alignment: vehicle=(8.631, 3.772), path_start=(0.000, 0.000), dist=9.419m
2026-01-21 11:47:55,228 - INFO - integration_test - === Calling planner.solve_mpc() at step 35 ===
2026-01-21 11:47:55,332 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:55,357 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:55,357 - INFO - integration_test - Warmstart k=0: x0=8.631250385085728 , y0=3.7717517135748726 , psi0=0.1101875817416681 , v0=3.0000000275429013 , spline0=9.600000061730807 , a0=0.0 , w0=0.0
2026-01-21 11:47:55,357 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:55,358 - INFO - integration_test - Dyn residual k=0: pred=[8.929431034242763, 3.804741137953957, 0.1101875817416681, 3.0000000275429013, 9.900000064485097], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[8.929431034242763, 3.804741137953957, 0.1101875817416681, 3.0000000275429013, 9.900000064485097], res_norm=1.419e+01
2026-01-21 11:47:55,359 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:55,360 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:55,380 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,550 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,574 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,621 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,642 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,692 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,715 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,765 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,787 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,833 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,853 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,904 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,926 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:55,974 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:55,996 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:56,042 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:56,066 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:56,116 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:56,137 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:56,182 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:56,203 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:56,249 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:57,171 - INFO - integration_test - Step 35: MPC solve successful
2026-01-21 11:47:57,257 - INFO - integration_test - Step 35: Computed 6 numeric contouring constraints for visualization (s=9.600)
2026-01-21 11:47:57,258 - DEBUG - integration_test - Step 35: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:57,258 - INFO - integration_test - === Applying control at step 35 ===
2026-01-21 11:47:57,258 - INFO - integration_test -   Control dict from planner: {'a': -1.088820082464733e-05, 'w': 0.799903448804401}
2026-01-21 11:47:57,258 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:57,258 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:57,259 - INFO - integration_test - Step 35 completed in 2.140s
2026-01-21 11:47:57,319 - INFO - integration_test - Step 36 (contouring until path end)
2026-01-21 11:47:57,320 - DEBUG - integration_test - Syncing planner state at step 36: vehicle_state=[8.92779439 3.81662539 0.19017793 2.99999894 9.89999996]
2026-01-21 11:47:57,321 - DEBUG - integration_test - Step 36: Using propagated spline 9.9000 (close to path, dist=0.542m, drift=0.134m)
2026-01-21 11:47:57,321 - DEBUG - integration_test -   Set spline state to 9.9000
2026-01-21 11:47:57,324 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:57,432 - DEBUG - integration_test - Step 36: Checking path alignment: vehicle=(8.928, 3.817), path_start=(0.000, 0.000), dist=9.709m
2026-01-21 11:47:57,432 - INFO - integration_test - === Calling planner.solve_mpc() at step 36 ===
2026-01-21 11:47:57,533 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:47:57,562 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:47:57,562 - INFO - integration_test - Warmstart k=0: x0=8.927794389529751 , y0=3.8166253897116547 , psi0=0.1901779266221082 , v0=2.9999989387228188 , spline0=9.89999995560309 , a0=0.0 , w0=0.0
2026-01-21 11:47:57,562 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:47:57,563 - INFO - integration_test - Dyn residual k=0: pred=[9.222385470279887, 3.8733354546547263, 0.1901779266221082, 2.9999989387228188, 10.199999849475372], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.222385470279887, 3.8733354546547263, 0.1901779266221082, 2.9999989387228188, 10.199999849475372], res_norm=1.460e+01
2026-01-21 11:47:57,564 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:57,564 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:47:57,583 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:57,769 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:57,791 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:57,840 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:57,862 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:57,912 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:57,935 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:57,983 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:58,004 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,053 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:58,076 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,126 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:58,148 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,195 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:58,216 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,268 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:58,289 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,336 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:47:58,360 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,405 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:58,424 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:47:58,471 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:47:59,692 - INFO - integration_test - Step 36: MPC solve successful
2026-01-21 11:47:59,968 - INFO - integration_test - Step 36: Computed 6 numeric contouring constraints for visualization (s=9.900)
2026-01-21 11:47:59,969 - DEBUG - integration_test - Step 36: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:47:59,969 - INFO - integration_test - === Applying control at step 36 ===
2026-01-21 11:47:59,969 - INFO - integration_test -   Control dict from planner: {'a': 1.0909710790012663e-05, 'w': 0.7999999935100419}
2026-01-21 11:47:59,969 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:47:59,969 - INFO - integration_test -   Planner output success: True
2026-01-21 11:47:59,970 - INFO - integration_test - Step 36 completed in 2.650s
2026-01-21 11:48:00,031 - INFO - integration_test - Step 37 (contouring until path end)
2026-01-21 11:48:00,032 - DEBUG - integration_test - Syncing planner state at step 37: vehicle_state=[ 9.2198042   3.88505236  0.27017793  3.00000003 10.19999996]
2026-01-21 11:48:00,033 - DEBUG - integration_test - Step 37: Using propagated spline 10.2000 (close to path, dist=0.630m, drift=0.054m)
2026-01-21 11:48:00,033 - DEBUG - integration_test -   Set spline state to 10.2000
2026-01-21 11:48:00,037 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:00,147 - DEBUG - integration_test - Step 37: Checking path alignment: vehicle=(9.220, 3.885), path_start=(0.000, 0.000), dist=10.005m
2026-01-21 11:48:00,147 - WARNING - integration_test - Step 37: Vehicle is far from path start (dist=10.005m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:00,147 - INFO - integration_test - === Calling planner.solve_mpc() at step 37 ===
2026-01-21 11:48:00,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:00,269 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:00,269 - INFO - integration_test - Warmstart k=0: x0=9.219804204398233 , y0=3.885052357262546 , psi0=0.2701779259731124 , v0=3.0000000296938976 , spline0=10.199999958572478 , a0=0.0 , w0=0.0
2026-01-21 11:48:00,269 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:00,270 - INFO - integration_test - Dyn residual k=0: pred=[9.508921234058008, 3.9651232317572274, 0.2701779259731124, 3.0000000296938976, 10.499999961541867], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.508921234058008, 3.9651232317572274, 0.2701779259731124, 3.0000000296938976, 10.499999961541867], res_norm=1.502e+01
2026-01-21 11:48:00,271 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:00,272 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:00,289 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,466 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,489 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,537 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,563 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,609 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,629 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,677 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,698 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,745 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,769 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,815 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,835 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,884 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,905 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:00,955 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:00,978 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:01,022 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:01,044 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:01,091 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:01,111 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:01,161 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:02,317 - INFO - integration_test - Step 37: MPC solve successful
2026-01-21 11:48:02,407 - INFO - integration_test - Step 37: Computed 6 numeric contouring constraints for visualization (s=10.200)
2026-01-21 11:48:02,407 - DEBUG - integration_test - Step 37: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:02,407 - INFO - integration_test - === Applying control at step 37 ===
2026-01-21 11:48:02,407 - INFO - integration_test -   Control dict from planner: {'a': -1.699131649441279e-06, 'w': 0.7999864948781086}
2026-01-21 11:48:02,407 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:02,407 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:02,409 - INFO - integration_test - Step 37 completed in 2.377s
2026-01-21 11:48:02,475 - INFO - integration_test - Step 38 (contouring until path end)
2026-01-21 11:48:02,476 - DEBUG - integration_test - Syncing planner state at step 38: vehicle_state=[ 9.50541187  3.97659617  0.35017658  2.99999986 10.49999994]
2026-01-21 11:48:02,476 - DEBUG - integration_test - Step 38: Using propagated spline 10.5000 (close to path, dist=0.608m, drift=0.246m)
2026-01-21 11:48:02,476 - DEBUG - integration_test -   Set spline state to 10.5000
2026-01-21 11:48:02,479 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:02,590 - DEBUG - integration_test - Step 38: Checking path alignment: vehicle=(9.505, 3.977), path_start=(0.000, 0.000), dist=10.304m
2026-01-21 11:48:02,590 - WARNING - integration_test - Step 38: Vehicle is far from path start (dist=10.304m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:02,590 - INFO - integration_test - === Calling planner.solve_mpc() at step 38 ===
2026-01-21 11:48:02,689 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:02,716 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:02,716 - INFO - integration_test - Warmstart k=0: x0=9.505411874460682 , y0=3.976596171391054 , psi0=0.3501765754609233 , v0=2.9999998597807327 , spline0=10.499999944550552 , a0=0.0 , w0=0.0
2026-01-21 11:48:02,716 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:02,717 - INFO - integration_test - Dyn residual k=0: pred=[9.787205506549213, 4.079515268264266, 0.3501765754609233, 2.9999998597807327, 10.799999930528626], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[9.787205506549213, 4.079515268264266, 0.3501765754609233, 2.9999998597807327, 10.799999930528626], res_norm=1.543e+01
2026-01-21 11:48:02,718 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:02,719 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:02,737 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:02,909 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:02,933 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:02,980 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,001 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,051 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,073 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,124 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,146 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,193 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,215 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,263 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,284 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,335 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,358 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,403 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,424 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,472 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:03,492 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,540 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:03,561 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:03,605 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:04,911 - INFO - integration_test - Step 38: MPC solve successful
2026-01-21 11:48:05,187 - INFO - integration_test - Step 38: Computed 6 numeric contouring constraints for visualization (s=10.500)
2026-01-21 11:48:05,187 - DEBUG - integration_test - Step 38: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:05,187 - INFO - integration_test - === Applying control at step 38 ===
2026-01-21 11:48:05,187 - INFO - integration_test -   Control dict from planner: {'a': 1.6992704938059275e-06, 'w': 0.7999998613554747}
2026-01-21 11:48:05,187 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:05,187 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:05,189 - INFO - integration_test - Step 38 completed in 2.713s
2026-01-21 11:48:05,259 - INFO - integration_test - Step 39 (contouring until path end)
2026-01-21 11:48:05,261 - DEBUG - integration_test - Syncing planner state at step 39: vehicle_state=[ 9.78279047  4.09067126  0.43017656  3.00000003 10.79999995]
2026-01-21 11:48:05,262 - DEBUG - integration_test - Step 39: Using propagated spline 10.8000 (close to path, dist=0.608m, drift=0.057m)
2026-01-21 11:48:05,262 - DEBUG - integration_test -   Set spline state to 10.8000
2026-01-21 11:48:05,265 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:05,394 - DEBUG - integration_test - Step 39: Checking path alignment: vehicle=(9.783, 4.091), path_start=(0.000, 0.000), dist=10.604m
2026-01-21 11:48:05,395 - WARNING - integration_test - Step 39: Vehicle is far from path start (dist=10.604m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:05,395 - INFO - integration_test - === Calling planner.solve_mpc() at step 39 ===
2026-01-21 11:48:05,509 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:05,544 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:05,544 - INFO - integration_test - Warmstart k=0: x0=9.782790466684753 , y0=4.090671261032904 , psi0=0.4301765615964708 , v0=3.000000029707782 , spline0=10.79999994752133 , a0=0.0 , w0=0.0
2026-01-21 11:48:05,544 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:05,545 - INFO - integration_test - Dyn residual k=0: pred=[10.055458109024716, 4.2157806475841655, 0.4301765615964708, 3.000000029707782, 11.099999950492109], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.055458109024716, 4.2157806475841655, 0.4301765615964708, 3.000000029707782, 11.099999950492109], res_norm=1.585e+01
2026-01-21 11:48:05,547 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:05,548 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:05,566 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:05,733 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:05,758 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:05,805 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:05,829 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:05,876 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:05,897 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:05,946 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:05,969 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,015 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:06,038 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,084 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:06,104 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,155 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:06,177 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,225 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:06,248 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,293 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:06,315 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,363 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:06,384 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:06,431 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:07,436 - INFO - integration_test - Step 39: MPC solve successful
2026-01-21 11:48:07,524 - INFO - integration_test - Step 39: Computed 6 numeric contouring constraints for visualization (s=10.800)
2026-01-21 11:48:07,524 - DEBUG - integration_test - Step 39: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:07,524 - INFO - integration_test - === Applying control at step 39 ===
2026-01-21 11:48:07,524 - INFO - integration_test -   Control dict from planner: {'a': -9.902357435706472e-07, 'w': 0.5623683173678183}
2026-01-21 11:48:07,524 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:07,524 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:07,526 - INFO - integration_test - Step 39 completed in 2.266s
2026-01-21 11:48:07,589 - INFO - integration_test - Step 40 (contouring until path end)
2026-01-21 11:48:07,596 - DEBUG - integration_test - Syncing planner state at step 40: vehicle_state=[10.05179746  4.22337967  0.48641339  2.99999993 11.09999994]
2026-01-21 11:48:07,597 - DEBUG - integration_test - Step 40: Using propagated spline 11.1000 (close to path, dist=0.599m, drift=0.357m)
2026-01-21 11:48:07,597 - DEBUG - integration_test -   Set spline state to 11.1000
2026-01-21 11:48:07,600 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:07,707 - DEBUG - integration_test - Step 40: Checking path alignment: vehicle=(10.052, 4.223), path_start=(0.000, 0.000), dist=10.903m
2026-01-21 11:48:07,707 - WARNING - integration_test - Step 40: Vehicle is far from path start (dist=10.903m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:07,707 - INFO - integration_test - === Calling planner.solve_mpc() at step 40 ===
2026-01-21 11:48:07,815 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:07,840 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:07,840 - INFO - integration_test - Warmstart k=0: x0=10.051797455276304 , y0=4.223379673226717 , psi0=0.4864133933332526 , v0=2.999999930684208 , spline0=11.09999994058975 , a0=0.0 , w0=0.0
2026-01-21 11:48:07,840 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:07,841 - INFO - integration_test - Dyn residual k=0: pred=[10.317001988116244, 4.363617156098456, 0.4864133933332526, 2.999999930684208, 11.39999993365817], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.317001988116244, 4.363617156098456, 0.4864133933332526, 2.999999930684208, 11.39999993365817], res_norm=1.627e+01
2026-01-21 11:48:07,842 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:07,843 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:07,862 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,035 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,059 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,108 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,130 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,181 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,202 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,251 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,273 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,322 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,343 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,396 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,417 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,465 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,487 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,535 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,567 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,645 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:08,673 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,719 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:08,740 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:08,788 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:09,682 - INFO - integration_test - Step 40: MPC solve successful
2026-01-21 11:48:09,934 - INFO - integration_test - Step 40: Computed 6 numeric contouring constraints for visualization (s=11.100)
2026-01-21 11:48:09,934 - DEBUG - integration_test - Step 40: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:09,934 - INFO - integration_test - === Applying control at step 40 ===
2026-01-21 11:48:09,934 - INFO - integration_test -   Control dict from planner: {'a': 9.931271392559951e-07, 'w': -0.40199914188592484}
2026-01-21 11:48:09,934 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:09,935 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:09,936 - INFO - integration_test - Step 40 completed in 2.340s
2026-01-21 11:48:10,001 - INFO - integration_test - Step 41 (contouring until path end)
2026-01-21 11:48:10,002 - DEBUG - integration_test - Syncing planner state at step 41: vehicle_state=[10.31974896  4.35824951  0.44621348  3.00000003 11.39999994]
2026-01-21 11:48:10,003 - DEBUG - integration_test - Step 41: Using propagated spline 11.4000 (close to path, dist=0.535m, drift=0.169m)
2026-01-21 11:48:10,003 - DEBUG - integration_test -   Set spline state to 11.4000
2026-01-21 11:48:10,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:10,114 - DEBUG - integration_test - Step 41: Checking path alignment: vehicle=(10.320, 4.358), path_start=(0.000, 0.000), dist=11.202m
2026-01-21 11:48:10,114 - WARNING - integration_test - Step 41: Vehicle is far from path start (dist=11.202m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:10,114 - INFO - integration_test - === Calling planner.solve_mpc() at step 41 ===
2026-01-21 11:48:10,213 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:10,242 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:10,242 - INFO - integration_test - Warmstart k=0: x0=10.31974895650426 , y0=4.358249508171756 , psi0=0.44621347914466014 , v0=3.000000029996922 , spline0=11.399999943589442 , a0=0.0 , w0=0.0
2026-01-21 11:48:10,242 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:10,243 - INFO - integration_test - Dyn residual k=0: pred=[10.590375254001033, 4.4877153681619575, 0.44621347914466014, 3.000000029996922, 11.699999946589134], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.590375254001033, 4.4877153681619575, 0.44621347914466014, 3.000000029996922, 11.699999946589134], res_norm=1.668e+01
2026-01-21 11:48:10,244 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:10,245 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:10,262 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,436 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,458 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,504 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,526 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,576 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,597 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,642 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,666 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,712 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,733 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,783 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,804 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,850 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,872 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,919 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:10,940 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:10,992 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:11,013 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:11,060 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:11,081 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:11,126 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:12,293 - INFO - integration_test - Step 41: MPC solve successful
2026-01-21 11:48:12,397 - INFO - integration_test - Step 41: Computed 6 numeric contouring constraints for visualization (s=11.400)
2026-01-21 11:48:12,397 - DEBUG - integration_test - Step 41: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:12,397 - INFO - integration_test - === Applying control at step 41 ===
2026-01-21 11:48:12,397 - INFO - integration_test -   Control dict from planner: {'a': -2.0655143326749403e-07, 'w': -0.08477397905928245}
2026-01-21 11:48:12,397 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:12,398 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:12,399 - INFO - integration_test - Step 41 completed in 2.397s
2026-01-21 11:48:12,464 - INFO - integration_test - Step 42 (contouring until path end)
2026-01-21 11:48:12,465 - DEBUG - integration_test - Syncing planner state at step 42: vehicle_state=[10.59092078  4.48656672  0.43773608  3.00000001 11.69999994]
2026-01-21 11:48:12,466 - DEBUG - integration_test - Step 42: Using propagated spline 11.7000 (close to path, dist=0.537m, drift=0.019m)
2026-01-21 11:48:12,466 - DEBUG - integration_test -   Set spline state to 11.7000
2026-01-21 11:48:12,469 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:12,583 - DEBUG - integration_test - Step 42: Checking path alignment: vehicle=(10.591, 4.487), path_start=(0.000, 0.000), dist=11.502m
2026-01-21 11:48:12,583 - WARNING - integration_test - Step 42: Vehicle is far from path start (dist=11.502m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:12,583 - INFO - integration_test - === Calling planner.solve_mpc() at step 42 ===
2026-01-21 11:48:12,685 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:12,710 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:12,711 - INFO - integration_test - Warmstart k=0: x0=10.590920775113737 , y0=4.486566720488466 , psi0=0.4377360812387319 , v0=3.0000000093417785 , spline0=11.69999994452362 , a0=0.0 , w0=0.0
2026-01-21 11:48:12,711 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:12,712 - INFO - integration_test - Dyn residual k=0: pred=[10.862634866810467, 4.613733748187975, 0.4377360812387319, 3.0000000093417785, 11.999999945457798], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[10.862634866810467, 4.613733748187975, 0.4377360812387319, 3.0000000093417785, 11.999999945457798], res_norm=1.710e+01
2026-01-21 11:48:12,712 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:12,713 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:12,732 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:12,947 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:12,973 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,019 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,039 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,090 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,110 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,160 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,182 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,227 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,251 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,298 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,319 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,369 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,390 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,435 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,458 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,503 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:13,524 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,574 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:13,594 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:13,639 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:14,652 - INFO - integration_test - Step 42: MPC solve successful
2026-01-21 11:48:14,749 - INFO - integration_test - Step 42: Computed 6 numeric contouring constraints for visualization (s=11.700)
2026-01-21 11:48:14,749 - DEBUG - integration_test - Step 42: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:14,749 - INFO - integration_test - === Applying control at step 42 ===
2026-01-21 11:48:14,749 - INFO - integration_test -   Control dict from planner: {'a': 2.0288607568608026e-07, 'w': -0.18734249233888786}
2026-01-21 11:48:14,749 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:14,750 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:14,751 - INFO - integration_test - Step 42 completed in 2.286s
2026-01-21 11:48:14,809 - INFO - integration_test - Step 43 (contouring until path end)
2026-01-21 11:48:14,813 - DEBUG - integration_test - Syncing planner state at step 43: vehicle_state=[10.86381013  4.6111812   0.41900183  3.00000003 11.99999995]
2026-01-21 11:48:14,814 - DEBUG - integration_test - Step 43: Using propagated spline 12.0000 (close to path, dist=0.495m, drift=0.281m)
2026-01-21 11:48:14,814 - DEBUG - integration_test -   Set spline state to 12.0000
2026-01-21 11:48:14,817 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:15,083 - DEBUG - integration_test - Step 43: Checking path alignment: vehicle=(10.864, 4.611), path_start=(0.000, 0.000), dist=11.802m
2026-01-21 11:48:15,083 - WARNING - integration_test - Step 43: Vehicle is far from path start (dist=11.802m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:15,083 - INFO - integration_test - === Calling planner.solve_mpc() at step 43 ===
2026-01-21 11:48:15,185 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:15,210 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:15,211 - INFO - integration_test - Warmstart k=0: x0=10.863810128571005 , y0=4.611181204745278 , psi0=0.41900183200484314 , v0=3.000000029630386 , spline0=11.999999947486659 , a0=0.0 , w0=0.0
2026-01-21 11:48:15,211 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:15,212 - INFO - integration_test - Dyn residual k=0: pred=[11.13785878091937, 4.7332358561268135, 0.41900183200484314, 3.000000029630386, 12.299999950449697], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.13785878091937, 4.7332358561268135, 0.41900183200484314, 3.000000029630386, 12.299999950449697], res_norm=1.752e+01
2026-01-21 11:48:15,212 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:15,213 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:15,229 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,404 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,425 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,476 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,498 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,546 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,572 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,618 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,642 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,691 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,713 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,762 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,784 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,834 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,858 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,904 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,925 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:15,974 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:15,999 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:16,042 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:16,065 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:16,109 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:17,568 - INFO - integration_test - Step 43: MPC solve successful
2026-01-21 11:48:17,676 - INFO - integration_test - Step 43: Computed 6 numeric contouring constraints for visualization (s=12.000)
2026-01-21 11:48:17,676 - DEBUG - integration_test - Step 43: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:17,676 - INFO - integration_test - === Applying control at step 43 ===
2026-01-21 11:48:17,676 - INFO - integration_test -   Control dict from planner: {'a': -4.9671421590850917e-08, 'w': -0.22807941242853386}
2026-01-21 11:48:17,676 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:17,676 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:17,678 - INFO - integration_test - Step 43 completed in 2.865s
2026-01-21 11:48:17,738 - INFO - integration_test - Step 44 (contouring until path end)
2026-01-21 11:48:17,740 - DEBUG - integration_test - Syncing planner state at step 44: vehicle_state=[11.13922687  4.73010017  0.39619389  3.00000002 12.29999995]
2026-01-21 11:48:17,741 - DEBUG - integration_test - Step 44: Using propagated spline 12.3000 (close to path, dist=0.462m, drift=0.092m)
2026-01-21 11:48:17,741 - DEBUG - integration_test -   Set spline state to 12.3000
2026-01-21 11:48:17,744 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:17,856 - DEBUG - integration_test - Step 44: Checking path alignment: vehicle=(11.139, 4.730), path_start=(0.000, 0.000), dist=12.102m
2026-01-21 11:48:17,857 - WARNING - integration_test - Step 44: Vehicle is far from path start (dist=12.102m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:17,857 - INFO - integration_test - === Calling planner.solve_mpc() at step 44 ===
2026-01-21 11:48:17,958 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:17,984 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:17,984 - INFO - integration_test - Warmstart k=0: x0=11.139226868537124 , y0=4.730100166830221 , psi0=0.39619389076198974 , v0=3.000000024663244 , spline0=12.299999949952984 , a0=0.0 , w0=0.0
2026-01-21 11:48:17,984 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:17,985 - INFO - integration_test - Dyn residual k=0: pred=[11.415987817129118, 4.845873129193006, 0.39619389076198974, 3.000000024663244, 12.599999952419308], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.415987817129118, 4.845873129193006, 0.39619389076198974, 3.000000024663244, 12.599999952419308], res_norm=1.794e+01
2026-01-21 11:48:17,986 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:17,987 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:18,003 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,175 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,196 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,244 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,266 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,312 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,335 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,383 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,404 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,453 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,475 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,521 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,543 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,591 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,612 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,660 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,682 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,730 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:18,757 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,802 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:18,822 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:18,869 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:20,263 - INFO - integration_test - Step 44: MPC solve successful
2026-01-21 11:48:20,362 - INFO - integration_test - Step 44: Computed 6 numeric contouring constraints for visualization (s=12.300)
2026-01-21 11:48:20,362 - DEBUG - integration_test - Step 44: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:20,362 - INFO - integration_test - === Applying control at step 44 ===
2026-01-21 11:48:20,362 - INFO - integration_test -   Control dict from planner: {'a': 4.143860575847544e-08, 'w': -0.017795104545269853}
2026-01-21 11:48:20,362 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:20,362 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:20,364 - INFO - integration_test - Step 44 completed in 2.624s
2026-01-21 11:48:20,425 - INFO - integration_test - Step 45 (contouring until path end)
2026-01-21 11:48:20,426 - DEBUG - integration_test - Syncing planner state at step 45: vehicle_state=[11.41609068  4.84562682  0.39441438  3.00000003 12.59999995]
2026-01-21 11:48:20,426 - DEBUG - integration_test - Step 45: Using propagated spline 12.6000 (close to path, dist=0.495m, drift=0.392m)
2026-01-21 11:48:20,426 - DEBUG - integration_test -   Set spline state to 12.6000
2026-01-21 11:48:20,430 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:20,705 - DEBUG - integration_test - Step 45: Checking path alignment: vehicle=(11.416, 4.846), path_start=(0.000, 0.000), dist=12.402m
2026-01-21 11:48:20,705 - WARNING - integration_test - Step 45: Vehicle is far from path start (dist=12.402m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:20,705 - INFO - integration_test - === Calling planner.solve_mpc() at step 45 ===
2026-01-21 11:48:20,807 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:20,831 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:20,831 - INFO - integration_test - Warmstart k=0: x0=11.41609068082378 , y0=4.845626818734798 , psi0=0.39441438030746273 , v0=3.0000000288071043 , spline0=12.599999952833693 , a0=0.0 , w0=0.0
2026-01-21 11:48:20,831 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:20,832 - INFO - integration_test - Dyn residual k=0: pred=[11.693057210683042, 4.960907099208715, 0.39441438030746273, 3.0000000288071043, 12.899999955714403], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.693057210683042, 4.960907099208715, 0.39441438030746273, 3.0000000288071043, 12.899999955714403], res_norm=1.835e+01
2026-01-21 11:48:20,833 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:20,833 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:20,849 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,024 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,045 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,094 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,115 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,165 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,188 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,234 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,257 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,304 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,325 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,375 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,396 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,443 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,465 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,512 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,534 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,583 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:21,604 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,649 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:21,671 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:21,715 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:23,095 - INFO - integration_test - Step 45: MPC solve successful
2026-01-21 11:48:23,205 - INFO - integration_test - Step 45: Computed 6 numeric contouring constraints for visualization (s=12.600)
2026-01-21 11:48:23,205 - DEBUG - integration_test - Step 45: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:23,205 - INFO - integration_test - === Applying control at step 45 ===
2026-01-21 11:48:23,205 - INFO - integration_test -   Control dict from planner: {'a': -3.6112932410180596e-06, 'w': -0.14111808137573534}
2026-01-21 11:48:23,206 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:23,206 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:23,207 - INFO - integration_test - Step 45 completed in 2.781s
2026-01-21 11:48:23,268 - INFO - integration_test - Step 46 (contouring until path end)
2026-01-21 11:48:23,274 - DEBUG - integration_test - Syncing planner state at step 46: vehicle_state=[11.69386139  4.95894905  0.38030257  2.99999967 12.89999992]
2026-01-21 11:48:23,274 - DEBUG - integration_test - Step 46: Using propagated spline 12.9000 (close to path, dist=0.418m, drift=0.204m)
2026-01-21 11:48:23,274 - DEBUG - integration_test -   Set spline state to 12.9000
2026-01-21 11:48:23,277 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:23,388 - DEBUG - integration_test - Step 46: Checking path alignment: vehicle=(11.694, 4.959), path_start=(0.000, 0.000), dist=12.702m
2026-01-21 11:48:23,389 - WARNING - integration_test - Step 46: Vehicle is far from path start (dist=12.702m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:23,389 - INFO - integration_test - === Calling planner.solve_mpc() at step 46 ===
2026-01-21 11:48:23,486 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:23,512 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:23,512 - INFO - integration_test - Warmstart k=0: x0=11.693861394481713 , y0=4.9589490494205135 , psi0=0.3803025721698892 , v0=2.99999966767778 , spline0=12.899999919601472 , a0=0.0 , w0=0.0
2026-01-21 11:48:23,512 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:23,513 - INFO - integration_test - Dyn residual k=0: pred=[11.97242707248106, 5.070309469235778, 0.3803025721698892, 2.99999966767778, 13.19999988636925], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[11.97242707248106, 5.070309469235778, 0.3803025721698892, 2.99999966767778, 13.19999988636925], res_norm=1.877e+01
2026-01-21 11:48:23,514 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:23,515 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:23,531 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:23,707 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:23,729 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:23,779 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:23,801 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:23,852 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:23,875 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:23,923 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:23,949 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:23,995 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:24,016 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:24,064 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:24,085 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:24,132 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:24,155 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:24,201 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:24,221 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:24,270 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:24,290 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:24,337 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:24,359 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:24,403 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:25,320 - INFO - integration_test - Step 46: MPC solve successful
2026-01-21 11:48:25,420 - INFO - integration_test - Step 46: Computed 6 numeric contouring constraints for visualization (s=12.900)
2026-01-21 11:48:25,420 - DEBUG - integration_test - Step 46: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:25,420 - INFO - integration_test - === Applying control at step 46 ===
2026-01-21 11:48:25,421 - INFO - integration_test -   Control dict from planner: {'a': 3.596540764497197e-06, 'w': -0.15878790811535742}
2026-01-21 11:48:25,421 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:25,421 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:25,422 - INFO - integration_test - Step 46 completed in 2.148s
2026-01-21 11:48:25,484 - INFO - integration_test - Step 47 (contouring until path end)
2026-01-21 11:48:25,485 - DEBUG - integration_test - Syncing planner state at step 47: vehicle_state=[11.9732995   5.0680932   0.36442378  3.00000003 13.19999992]
2026-01-21 11:48:25,486 - DEBUG - integration_test - Step 47: Using propagated spline 13.2000 (close to path, dist=0.423m, drift=0.016m)
2026-01-21 11:48:25,486 - DEBUG - integration_test -   Set spline state to 13.2000
2026-01-21 11:48:25,489 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:25,784 - DEBUG - integration_test - Step 47: Checking path alignment: vehicle=(11.973, 5.068), path_start=(0.000, 0.000), dist=13.002m
2026-01-21 11:48:25,784 - WARNING - integration_test - Step 47: Vehicle is far from path start (dist=13.002m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:25,784 - INFO - integration_test - === Calling planner.solve_mpc() at step 47 ===
2026-01-21 11:48:25,905 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:25,931 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:25,931 - INFO - integration_test - Warmstart k=0: x0=11.973299499158552 , y0=5.068093199538519 , psi0=0.36442378135835346 , v0=3.0000000273318563 , spline0=13.199999922334657 , a0=0.0 , w0=0.0
2026-01-21 11:48:25,931 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:25,932 - INFO - integration_test - Dyn residual k=0: pred=[12.25359828778624, 5.17501649322966, 0.36442378135835346, 3.0000000273318563, 13.499999925067842], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.25359828778624, 5.17501649322966, 0.36442378135835346, 3.0000000273318563, 13.499999925067842], res_norm=1.919e+01
2026-01-21 11:48:25,933 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:25,934 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:25,951 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,124 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,150 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,197 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,219 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,267 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,288 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,337 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,360 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,408 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,429 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,476 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,497 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,546 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,568 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,614 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,636 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,683 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:26,703 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,751 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:26,773 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:26,818 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:28,371 - INFO - integration_test - Step 47: MPC solve successful
2026-01-21 11:48:28,470 - INFO - integration_test - Step 47: Computed 6 numeric contouring constraints for visualization (s=13.200)
2026-01-21 11:48:28,470 - DEBUG - integration_test - Step 47: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:28,470 - INFO - integration_test - === Applying control at step 47 ===
2026-01-21 11:48:28,471 - INFO - integration_test -   Control dict from planner: {'a': -2.556828180643926e-08, 'w': -0.11327743634221935}
2026-01-21 11:48:28,471 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:28,471 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:28,472 - INFO - integration_test - Step 47 completed in 2.987s
2026-01-21 11:48:28,534 - INFO - integration_test - Step 48 (contouring until path end)
2026-01-21 11:48:28,536 - DEBUG - integration_test - Syncing planner state at step 48: vehicle_state=[12.25419789  5.17342665  0.35309604  3.00000002 13.49999992]
2026-01-21 11:48:28,536 - DEBUG - integration_test - Step 48: Using propagated spline 13.5000 (close to path, dist=0.410m, drift=0.316m)
2026-01-21 11:48:28,536 - DEBUG - integration_test -   Set spline state to 13.5000
2026-01-21 11:48:28,540 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:28,654 - DEBUG - integration_test - Step 48: Checking path alignment: vehicle=(12.254, 5.173), path_start=(0.000, 0.000), dist=13.301m
2026-01-21 11:48:28,654 - WARNING - integration_test - Step 48: Vehicle is far from path start (dist=13.301m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:28,654 - INFO - integration_test - === Calling planner.solve_mpc() at step 48 ===
2026-01-21 11:48:28,756 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:28,782 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:28,783 - INFO - integration_test - Warmstart k=0: x0=12.254197886507654 , y0=5.173426647073906 , psi0=0.3530960377241315 , v0=3.0000000247750283 , spline0=13.49999992481216 , a0=0.0 , w0=0.0
2026-01-21 11:48:28,783 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:28,784 - INFO - integration_test - Dyn residual k=0: pred=[12.535689865185722, 5.277167995756135, 0.3530960377241315, 3.0000000247750283, 13.799999927289663], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.535689865185722, 5.277167995756135, 0.3530960377241315, 3.0000000247750283, 13.799999927289663], res_norm=1.961e+01
2026-01-21 11:48:28,785 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:28,785 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:28,803 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:28,979 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,004 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,052 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,075 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,122 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,144 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,193 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,215 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,264 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,284 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,331 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,355 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,401 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,422 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,470 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,491 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,538 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:29,561 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,605 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:29,626 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:29,673 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:30,613 - INFO - integration_test - Step 48: MPC solve successful
2026-01-21 11:48:30,722 - INFO - integration_test - Step 48: Computed 6 numeric contouring constraints for visualization (s=13.500)
2026-01-21 11:48:30,723 - DEBUG - integration_test - Step 48: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:30,723 - INFO - integration_test - === Applying control at step 48 ===
2026-01-21 11:48:30,723 - INFO - integration_test -   Control dict from planner: {'a': 5.198531982352671e-08, 'w': -0.1248977421241096}
2026-01-21 11:48:30,723 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:30,723 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:30,724 - INFO - integration_test - Step 48 completed in 2.189s
2026-01-21 11:48:30,795 - INFO - integration_test - Step 49 (contouring until path end)
2026-01-21 11:48:30,796 - DEBUG - integration_test - Syncing planner state at step 49: vehicle_state=[12.53633039  5.27540744  0.34060626  3.00000003 13.79999993]
2026-01-21 11:48:30,797 - DEBUG - integration_test - Step 49: Using propagated spline 13.8000 (close to path, dist=0.366m, drift=0.127m)
2026-01-21 11:48:30,797 - DEBUG - integration_test -   Set spline state to 13.8000
2026-01-21 11:48:30,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:30,907 - DEBUG - integration_test - Step 49: Checking path alignment: vehicle=(12.536, 5.275), path_start=(0.000, 0.000), dist=13.601m
2026-01-21 11:48:30,907 - WARNING - integration_test - Step 49: Vehicle is far from path start (dist=13.601m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:30,907 - INFO - integration_test - === Calling planner.solve_mpc() at step 49 ===
2026-01-21 11:48:31,007 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:31,035 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:31,035 - INFO - integration_test - Warmstart k=0: x0=12.53633039154731 , y0=5.275407435910043 , psi0=0.3406062635117205 , v0=3.00000002997356 , spline0=13.799999927809516 , a0=0.0 , w0=0.0
2026-01-21 11:48:31,035 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:31,036 - INFO - integration_test - Dyn residual k=0: pred=[12.819096087740826, 5.3756250134830905, 0.3406062635117205, 3.00000002997356, 14.099999930806872], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[12.819096087740826, 5.3756250134830905, 0.3406062635117205, 3.00000002997356, 14.099999930806872], res_norm=2.003e+01
2026-01-21 11:48:31,037 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:31,038 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:31,053 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,395 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,417 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,466 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,487 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,532 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,557 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,603 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,624 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,671 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,691 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,739 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,763 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,808 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,831 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,878 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,898 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:31,945 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:31,969 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:32,012 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:32,035 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:32,080 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:33,104 - INFO - integration_test - Step 49: MPC solve successful
2026-01-21 11:48:33,215 - INFO - integration_test - Step 49: Computed 6 numeric contouring constraints for visualization (s=13.800)
2026-01-21 11:48:33,216 - DEBUG - integration_test - Step 49: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:33,216 - INFO - integration_test - === Applying control at step 49 ===
2026-01-21 11:48:33,216 - INFO - integration_test -   Control dict from planner: {'a': -2.412808620181129e-07, 'w': -0.08925498740156639}
2026-01-21 11:48:33,216 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:33,216 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:33,218 - INFO - integration_test - Step 49 completed in 2.422s
2026-01-21 11:48:33,281 - INFO - integration_test - Step 50 (contouring until path end)
2026-01-21 11:48:33,282 - DEBUG - integration_test - Syncing planner state at step 50: vehicle_state=[12.81953958  5.37436178  0.33168076  3.00000001 14.09999993]
2026-01-21 11:48:33,283 - DEBUG - integration_test - Step 50: Using propagated spline 14.1000 (close to path, dist=0.421m, drift=0.061m)
2026-01-21 11:48:33,283 - DEBUG - integration_test -   Set spline state to 14.1000
2026-01-21 11:48:33,286 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:33,395 - DEBUG - integration_test - Step 50: Checking path alignment: vehicle=(12.820, 5.374), path_start=(0.000, 0.000), dist=13.901m
2026-01-21 11:48:33,396 - WARNING - integration_test - Step 50: Vehicle is far from path start (dist=13.901m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:33,396 - INFO - integration_test - === Calling planner.solve_mpc() at step 50 ===
2026-01-21 11:48:33,491 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:33,516 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:33,517 - INFO - integration_test - Warmstart k=0: x0=12.81953957517971 , y0=5.374361778406257 , psi0=0.3316807647715639 , v0=3.000000005845474 , spline0=14.099999928394064 , a0=0.0 , w0=0.0
2026-01-21 11:48:33,517 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:33,518 - INFO - integration_test - Dyn residual k=0: pred=[13.103188485954743, 5.47205157197174, 0.3316807647715639, 3.000000005845474, 14.399999928978612], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.103188485954743, 5.47205157197174, 0.3316807647715639, 3.000000005845474, 14.399999928978612], res_norm=2.045e+01
2026-01-21 11:48:33,518 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:33,519 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:33,535 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:33,710 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:33,732 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:33,783 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:33,804 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:33,853 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:33,874 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:33,920 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:33,943 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:33,992 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:34,013 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:34,061 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:34,082 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:34,128 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:34,152 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:34,199 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:34,222 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:34,270 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:34,291 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:34,336 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:34,360 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:34,403 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:35,300 - INFO - integration_test - Step 50: MPC solve successful
2026-01-21 11:48:35,415 - INFO - integration_test - Step 50: Computed 6 numeric contouring constraints for visualization (s=14.100)
2026-01-21 11:48:35,415 - DEBUG - integration_test - Step 50: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:35,415 - INFO - integration_test - === Applying control at step 50 ===
2026-01-21 11:48:35,415 - INFO - integration_test -   Control dict from planner: {'a': 2.4149269385355013e-07, 'w': -0.14020956436186377}
2026-01-21 11:48:35,415 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:35,415 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:35,417 - INFO - integration_test - Step 50 completed in 2.134s
2026-01-21 11:48:35,479 - INFO - integration_test - Step 51 (contouring until path end)
2026-01-21 11:48:35,486 - DEBUG - integration_test - Syncing planner state at step 51: vehicle_state=[13.10386403  5.47005989  0.31765981  3.00000003 14.39999993]
2026-01-21 11:48:35,487 - DEBUG - integration_test - Step 51: Using propagated spline 14.4000 (close to path, dist=0.341m, drift=0.239m)
2026-01-21 11:48:35,487 - DEBUG - integration_test -   Set spline state to 14.4000
2026-01-21 11:48:35,490 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:35,605 - DEBUG - integration_test - Step 51: Checking path alignment: vehicle=(13.104, 5.470), path_start=(0.000, 0.000), dist=14.200m
2026-01-21 11:48:35,605 - WARNING - integration_test - Step 51: Vehicle is far from path start (dist=14.200m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:35,605 - INFO - integration_test - === Calling planner.solve_mpc() at step 51 ===
2026-01-21 11:48:35,706 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:35,732 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:35,732 - INFO - integration_test - Warmstart k=0: x0=13.103864034520633 , y0=5.470059889691761 , psi0=0.3176598083353775 , v0=3.000000029994743 , spline0=14.39999993139354 , a0=0.0 , w0=0.0
2026-01-21 11:48:35,732 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:35,733 - INFO - integration_test - Dyn residual k=0: pred=[13.388854726633749, 5.563763183169482, 0.3176598083353775, 3.000000029994743, 14.699999934393015], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.388854726633749, 5.563763183169482, 0.3176598083353775, 3.000000029994743, 14.699999934393015], res_norm=2.087e+01
2026-01-21 11:48:35,734 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:35,735 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:35,752 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:35,930 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:35,952 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,003 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,025 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,073 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,094 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,142 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,166 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,216 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,236 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,284 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,306 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,355 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,377 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,425 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,446 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,491 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:36,512 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,560 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:36,581 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:36,624 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:37,357 - INFO - integration_test - Step 51: MPC solve successful
2026-01-21 11:48:37,658 - INFO - integration_test - Step 51: Computed 6 numeric contouring constraints for visualization (s=14.400)
2026-01-21 11:48:37,658 - DEBUG - integration_test - Step 51: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:37,658 - INFO - integration_test - === Applying control at step 51 ===
2026-01-21 11:48:37,658 - INFO - integration_test -   Control dict from planner: {'a': -3.436293862836447e-09, 'w': -0.11297420009622826}
2026-01-21 11:48:37,658 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:37,659 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:37,660 - INFO - integration_test - Step 51 completed in 2.174s
2026-01-21 11:48:37,723 - INFO - integration_test - Step 52 (contouring until path end)
2026-01-21 11:48:37,724 - DEBUG - integration_test - Syncing planner state at step 52: vehicle_state=[13.38937796  5.56215138  0.30636239  3.00000003 14.69999993]
2026-01-21 11:48:37,725 - DEBUG - integration_test - Step 52: Using propagated spline 14.7000 (close to path, dist=0.349m, drift=0.051m)
2026-01-21 11:48:37,725 - DEBUG - integration_test -   Set spline state to 14.7000
2026-01-21 11:48:37,728 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:37,836 - DEBUG - integration_test - Step 52: Checking path alignment: vehicle=(13.389, 5.562), path_start=(0.000, 0.000), dist=14.499m
2026-01-21 11:48:37,836 - WARNING - integration_test - Step 52: Vehicle is far from path start (dist=14.499m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:37,836 - INFO - integration_test - === Calling planner.solve_mpc() at step 52 ===
2026-01-21 11:48:37,935 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:37,961 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:37,961 - INFO - integration_test - Warmstart k=0: x0=13.389377961451714 , y0=5.562151377273942 , psi0=0.3063623883257547 , v0=3.0000000296511136 , spline0=14.699999934358651 , a0=0.0 , w0=0.0
2026-01-21 11:48:37,961 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:37,962 - INFO - integration_test - Dyn residual k=0: pred=[13.675409049746648, 5.652629099989996, 0.3063623883257547, 3.0000000296511136, 14.999999937323762], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.675409049746648, 5.652629099989996, 0.3063623883257547, 3.0000000296511136, 14.999999937323762], res_norm=2.129e+01
2026-01-21 11:48:37,965 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:37,966 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:37,984 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,156 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,180 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,227 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,250 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,297 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,318 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,368 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,390 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,438 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,462 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,509 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,531 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,579 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,602 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,655 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,677 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,724 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:38,747 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,793 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:38,814 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:38,858 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:40,221 - INFO - integration_test - Step 52: MPC solve successful
2026-01-21 11:48:40,335 - INFO - integration_test - Step 52: Computed 6 numeric contouring constraints for visualization (s=14.700)
2026-01-21 11:48:40,335 - DEBUG - integration_test - Step 52: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:40,335 - INFO - integration_test - === Applying control at step 52 ===
2026-01-21 11:48:40,335 - INFO - integration_test -   Control dict from planner: {'a': -3.0883758338620905e-06, 'w': -0.011407303604569997}
2026-01-21 11:48:40,335 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:40,335 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:40,337 - INFO - integration_test - Step 52 completed in 2.613s
2026-01-21 11:48:40,404 - INFO - integration_test - Step 53 (contouring until path end)
2026-01-21 11:48:40,406 - DEBUG - integration_test - Syncing planner state at step 53: vehicle_state=[13.67546058  5.65246593  0.30522166  2.99999972 14.99999991]
2026-01-21 11:48:40,406 - DEBUG - integration_test - Step 53: Using propagated spline 15.0000 (close to path, dist=0.353m, drift=0.351m)
2026-01-21 11:48:40,406 - DEBUG - integration_test -   Set spline state to 15.0000
2026-01-21 11:48:40,409 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:40,516 - DEBUG - integration_test - Step 53: Checking path alignment: vehicle=(13.675, 5.652), path_start=(0.000, 0.000), dist=14.798m
2026-01-21 11:48:40,516 - WARNING - integration_test - Step 53: Vehicle is far from path start (dist=14.798m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:40,516 - INFO - integration_test - === Calling planner.solve_mpc() at step 53 ===
2026-01-21 11:48:40,617 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:40,642 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:40,642 - INFO - integration_test - Warmstart k=0: x0=13.675460578323541 , y0=5.652465933565912 , psi0=0.3052216579652977 , v0=2.99999972081353 , spline0=14.999999906440005 , a0=0.0 , w0=0.0
2026-01-21 11:48:40,642 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:40,643 - INFO - integration_test - Dyn residual k=0: pred=[13.961594661723804, 5.742617303857791, 0.3052216579652977, 2.99999972081353, 15.299999878521358], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[13.961594661723804, 5.742617303857791, 0.3052216579652977, 2.99999972081353, 15.299999878521358], res_norm=2.170e+01
2026-01-21 11:48:40,644 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:40,645 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:40,664 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:40,838 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:40,862 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:40,909 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:40,930 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:40,981 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,003 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,049 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,073 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,119 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,140 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,195 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,217 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,264 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,288 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,335 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,360 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,410 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:41,430 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,478 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:41,501 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:41,550 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:42,388 - INFO - integration_test - Step 53: MPC solve successful
2026-01-21 11:48:42,708 - INFO - integration_test - Step 53: Computed 6 numeric contouring constraints for visualization (s=15.000)
2026-01-21 11:48:42,709 - DEBUG - integration_test - Step 53: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:42,709 - INFO - integration_test - === Applying control at step 53 ===
2026-01-21 11:48:42,709 - INFO - integration_test -   Control dict from planner: {'a': 3.07840114484317e-06, 'w': -0.002738589484172051}
2026-01-21 11:48:42,709 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:42,709 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:42,710 - INFO - integration_test - Step 53 completed in 2.305s
2026-01-21 11:48:42,785 - INFO - integration_test - Step 54 (contouring until path end)
2026-01-21 11:48:42,787 - DEBUG - integration_test - Syncing planner state at step 54: vehicle_state=[13.96160702  5.74257813  0.3049478   3.00000003 15.29999991]
2026-01-21 11:48:42,787 - DEBUG - integration_test - Step 54: Using propagated spline 15.3000 (close to path, dist=0.297m, drift=0.163m)
2026-01-21 11:48:42,787 - DEBUG - integration_test -   Set spline state to 15.3000
2026-01-21 11:48:42,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:42,896 - DEBUG - integration_test - Step 54: Checking path alignment: vehicle=(13.962, 5.743), path_start=(0.000, 0.000), dist=15.096m
2026-01-21 11:48:42,896 - WARNING - integration_test - Step 54: Vehicle is far from path start (dist=15.096m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:42,896 - INFO - integration_test - === Calling planner.solve_mpc() at step 54 ===
2026-01-21 11:48:42,994 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:43,020 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:43,020 - INFO - integration_test - Warmstart k=0: x0=13.961607017208284 , y0=5.742578127164258 , psi0=0.3049477990168805 , v0=3.0000000286536443 , spline0=15.299999909305368 , a0=0.0 , w0=0.0
2026-01-21 11:48:43,020 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:43,021 - INFO - integration_test - Dyn residual k=0: pred=[14.247765808001578, 5.832651142940007, 0.3049477990168805, 3.0000000286536443, 15.599999912170732], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.247765808001578, 5.832651142940007, 0.3049477990168805, 3.0000000286536443, 15.599999912170732], res_norm=2.212e+01
2026-01-21 11:48:43,023 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:43,025 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:43,042 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,215 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,241 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,288 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,310 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,362 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,385 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,437 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,458 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,503 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,526 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,581 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,601 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,651 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,674 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,721 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,742 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,793 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:43,814 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,861 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:43,883 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:43,927 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:45,825 - INFO - integration_test - Step 54: MPC solve successful
2026-01-21 11:48:45,940 - INFO - integration_test - Step 54: Computed 6 numeric contouring constraints for visualization (s=15.300)
2026-01-21 11:48:45,940 - DEBUG - integration_test - Step 54: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:45,940 - INFO - integration_test - === Applying control at step 54 ===
2026-01-21 11:48:45,940 - INFO - integration_test -   Control dict from planner: {'a': -1.57427223812224e-07, 'w': 0.6931194032164885}
2026-01-21 11:48:45,940 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:45,940 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:45,941 - INFO - integration_test - Step 54 completed in 3.155s
2026-01-21 11:48:46,010 - INFO - integration_test - Step 55 (contouring until path end)
2026-01-21 11:48:46,020 - DEBUG - integration_test - Syncing planner state at step 55: vehicle_state=[14.24441642  5.84249218  0.37425974  3.00000001 15.59999991]
2026-01-21 11:48:46,021 - DEBUG - integration_test - Step 55: Using propagated spline 15.6000 (close to path, dist=0.357m, drift=0.026m)
2026-01-21 11:48:46,021 - DEBUG - integration_test -   Set spline state to 15.6000
2026-01-21 11:48:46,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:46,130 - DEBUG - integration_test - Step 55: Checking path alignment: vehicle=(14.244, 5.842), path_start=(0.000, 0.000), dist=15.396m
2026-01-21 11:48:46,130 - WARNING - integration_test - Step 55: Vehicle is far from path start (dist=15.396m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:46,130 - INFO - integration_test - === Calling planner.solve_mpc() at step 55 ===
2026-01-21 11:48:46,236 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:46,260 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:46,260 - INFO - integration_test - Warmstart k=0: x0=14.24441642159458 , y0=5.842492181033806 , psi0=0.37425973933852935 , v0=3.000000012910922 , spline0=15.59999991059646 , a0=0.0 , w0=0.0
2026-01-21 11:48:46,260 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:46,262 - INFO - integration_test - Dyn residual k=0: pred=[14.523649974020218, 5.952167264687362, 0.37425973933852935, 3.000000012910922, 15.899999911887553], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.523649974020218, 5.952167264687362, 0.37425973933852935, 3.000000012910922, 15.899999911887553], res_norm=2.255e+01
2026-01-21 11:48:46,263 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:46,264 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:46,280 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,453 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,474 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,519 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,541 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,591 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,612 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,662 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,687 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,732 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,757 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,805 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,828 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,878 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,898 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:46,945 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:46,969 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:47,015 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:47,035 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:47,082 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:47,102 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:47,146 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:48,054 - INFO - integration_test - Step 55: MPC solve successful
2026-01-21 11:48:48,180 - INFO - integration_test - Step 55: Computed 6 numeric contouring constraints for visualization (s=15.600)
2026-01-21 11:48:48,181 - DEBUG - integration_test - Step 55: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:48,181 - INFO - integration_test - === Applying control at step 55 ===
2026-01-21 11:48:48,181 - INFO - integration_test -   Control dict from planner: {'a': -1.5079455072100612e-05, 'w': -0.7961282530897039}
2026-01-21 11:48:48,181 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:48,181 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:48,182 - INFO - integration_test - Step 55 completed in 2.162s
2026-01-21 11:48:48,250 - INFO - integration_test - Step 56 (contouring until path end)
2026-01-21 11:48:48,259 - DEBUG - integration_test - Syncing planner state at step 56: vehicle_state=[14.52771849  5.94094201  0.29464691  2.9999985  15.89999976]
2026-01-21 11:48:48,260 - DEBUG - integration_test - Step 56: Using propagated spline 15.9000 (close to path, dist=0.249m, drift=0.274m)
2026-01-21 11:48:48,260 - DEBUG - integration_test -   Set spline state to 15.9000
2026-01-21 11:48:48,263 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:48,369 - DEBUG - integration_test - Step 56: Checking path alignment: vehicle=(14.528, 5.941), path_start=(0.000, 0.000), dist=15.696m
2026-01-21 11:48:48,369 - WARNING - integration_test - Step 56: Vehicle is far from path start (dist=15.696m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:48,369 - INFO - integration_test - === Calling planner.solve_mpc() at step 56 ===
2026-01-21 11:48:48,657 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:48,682 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:48,682 - INFO - integration_test - Warmstart k=0: x0=14.527718492998066 , y0=5.9409420054908795 , psi0=0.29464691402955895 , v0=2.999998504965415 , spline0=15.899999761093003 , a0=0.0 , w0=0.0
2026-01-21 11:48:48,682 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:48,683 - INFO - integration_test - Dyn residual k=0: pred=[14.814789771589165, 6.028062561653125, 0.29464691402955895, 2.999998504965415, 16.199999611589543], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[14.814789771589165, 6.028062561653125, 0.29464691402955895, 2.999998504965415, 16.199999611589543], res_norm=2.296e+01
2026-01-21 11:48:48,684 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:48,685 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:48,700 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:48,872 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:48,894 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:48,940 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:48,964 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,010 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,031 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,080 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,100 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,147 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,172 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,218 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,241 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,288 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,308 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,356 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,379 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,425 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:49,449 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,493 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:49,513 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:49,560 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:50,420 - INFO - integration_test - Step 56: MPC solve successful
2026-01-21 11:48:50,538 - INFO - integration_test - Step 56: Computed 6 numeric contouring constraints for visualization (s=15.900)
2026-01-21 11:48:50,539 - DEBUG - integration_test - Step 56: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:50,539 - INFO - integration_test - === Applying control at step 56 ===
2026-01-21 11:48:50,539 - INFO - integration_test -   Control dict from planner: {'a': 1.4718206124823245e-05, 'w': 0.7999966427085069}
2026-01-21 11:48:50,539 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:50,539 - INFO - integration_test -   Planner output success: True
2026-01-21 11:48:50,540 - INFO - integration_test - Step 56 completed in 2.281s
2026-01-21 11:48:50,608 - INFO - integration_test - Step 57 (contouring until path end)
2026-01-21 11:48:50,609 - DEBUG - integration_test - Syncing planner state at step 57: vehicle_state=[14.81100079  6.03944637  0.37464658  2.99999998 16.19999976]
2026-01-21 11:48:50,610 - DEBUG - integration_test - Step 57: Using propagated spline 16.2000 (close to path, dist=0.254m, drift=0.086m)
2026-01-21 11:48:50,610 - DEBUG - integration_test -   Set spline state to 16.2000
2026-01-21 11:48:50,613 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:50,719 - DEBUG - integration_test - Step 57: Checking path alignment: vehicle=(14.811, 6.039), path_start=(0.000, 0.000), dist=15.995m
2026-01-21 11:48:50,719 - WARNING - integration_test - Step 57: Vehicle is far from path start (dist=15.995m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:50,719 - INFO - integration_test - === Calling planner.solve_mpc() at step 57 ===
2026-01-21 11:48:50,827 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:50,856 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:50,856 - INFO - integration_test - Warmstart k=0: x0=14.811000786493388 , y0=6.039446370213852 , psi0=0.37464657830040965 , v0=2.9999999767860275 , spline0=16.199999758771607 , a0=0.0 , w0=0.0
2026-01-21 11:48:50,856 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:50,857 - INFO - integration_test - Dyn residual k=0: pred=[15.090191888069795, 6.1492294627541595, 0.37464657830040965, 2.9999999767860275, 16.49999975645021], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.090191888069795, 6.1492294627541595, 0.37464657830040965, 2.9999999767860275, 16.49999975645021], res_norm=2.339e+01
2026-01-21 11:48:50,858 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:50,859 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:50,876 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,049 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,073 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,120 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,141 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,191 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,214 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,261 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,282 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,330 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,351 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,402 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,424 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,472 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,493 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,541 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,564 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,611 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:51,635 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,679 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:51,700 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:51,749 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:55,099 - WARNING - integration_test - Step 57: MPC solve failed
2026-01-21 11:48:55,099 - WARNING - integration_test -   Consecutive MPC failures: 1/15
2026-01-21 11:48:55,231 - INFO - integration_test - Step 57: Computed 6 numeric contouring constraints for visualization (s=16.200)
2026-01-21 11:48:55,231 - DEBUG - integration_test - Step 57: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:55,232 - INFO - integration_test - === Applying control at step 57 ===
2026-01-21 11:48:55,232 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:48:55,232 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:55,232 - INFO - integration_test -   Planner output success: False
2026-01-21 11:48:55,232 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:48:55,233 - INFO - integration_test - Step 57 completed in 4.624s
2026-01-21 11:48:55,301 - INFO - integration_test - Step 58 (contouring until path end)
2026-01-21 11:48:55,304 - DEBUG - integration_test - Syncing planner state at step 58: vehicle_state=[15.09019189  6.14922946  0.37464658  2.99999998 16.49999976]
2026-01-21 11:48:55,304 - DEBUG - integration_test - Step 58: Using propagated spline 16.5000 (close to path, dist=0.227m, drift=0.386m)
2026-01-21 11:48:55,304 - DEBUG - integration_test -   Set spline state to 16.5000
2026-01-21 11:48:55,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:55,417 - DEBUG - integration_test - Step 58: Checking path alignment: vehicle=(15.090, 6.149), path_start=(0.000, 0.000), dist=16.295m
2026-01-21 11:48:55,417 - WARNING - integration_test - Step 58: Vehicle is far from path start (dist=16.295m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:48:55,417 - INFO - integration_test - === Calling planner.solve_mpc() at step 58 ===
2026-01-21 11:48:55,710 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:48:55,737 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:48:55,737 - INFO - integration_test - Warmstart k=0: x0=15.090191888069795 , y0=6.1492294627541595 , psi0=0.37464657830040965 , v0=2.9999999767860275 , spline0=16.49999975645021 , a0=0.0 , w0=0.0
2026-01-21 11:48:55,737 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:48:55,738 - INFO - integration_test - Dyn residual k=0: pred=[15.369382989646201, 6.259012555294467, 0.37464657830040965, 2.9999999767860275, 16.799999754128816], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.369382989646201, 6.259012555294467, 0.37464657830040965, 2.9999999767860275, 16.799999754128816], res_norm=2.381e+01
2026-01-21 11:48:55,738 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:55,739 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:48:55,759 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:55,934 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:55,956 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,009 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,030 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,079 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,101 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,150 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,173 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,220 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,241 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,291 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,311 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,356 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,382 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,428 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,449 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,501 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:48:56,523 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,571 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:56,594 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:48:56,638 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:48:59,729 - WARNING - integration_test - Step 58: MPC solve failed
2026-01-21 11:48:59,729 - WARNING - integration_test -   Consecutive MPC failures: 2/15
2026-01-21 11:48:59,872 - INFO - integration_test - Step 58: Computed 6 numeric contouring constraints for visualization (s=16.500)
2026-01-21 11:48:59,872 - DEBUG - integration_test - Step 58: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:48:59,872 - INFO - integration_test - === Applying control at step 58 ===
2026-01-21 11:48:59,872 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:48:59,872 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:48:59,872 - INFO - integration_test -   Planner output success: False
2026-01-21 11:48:59,872 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:48:59,874 - INFO - integration_test - Step 58 completed in 4.571s
2026-01-21 11:48:59,943 - INFO - integration_test - Step 59 (contouring until path end)
2026-01-21 11:48:59,944 - DEBUG - integration_test - Syncing planner state at step 59: vehicle_state=[15.36938299  6.25901256  0.37464658  2.99999998 16.79999975]
2026-01-21 11:48:59,945 - DEBUG - integration_test - Step 59: Using propagated spline 16.8000 (close to path, dist=0.132m, drift=0.198m)
2026-01-21 11:48:59,945 - DEBUG - integration_test -   Set spline state to 16.8000
2026-01-21 11:48:59,950 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:00,063 - DEBUG - integration_test - Step 59: Checking path alignment: vehicle=(15.369, 6.259), path_start=(0.000, 0.000), dist=16.595m
2026-01-21 11:49:00,063 - WARNING - integration_test - Step 59: Vehicle is far from path start (dist=16.595m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:00,063 - INFO - integration_test - === Calling planner.solve_mpc() at step 59 ===
2026-01-21 11:49:00,163 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:00,190 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:00,190 - INFO - integration_test - Warmstart k=0: x0=15.369382989646201 , y0=6.259012555294467 , psi0=0.37464657830040965 , v0=2.9999999767860275 , spline0=16.799999754128816 , a0=0.0 , w0=0.0
2026-01-21 11:49:00,190 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:00,191 - INFO - integration_test - Dyn residual k=0: pred=[15.648574091222608, 6.368795647834774, 0.37464657830040965, 2.9999999767860275, 17.09999975180742], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.648574091222608, 6.368795647834774, 0.37464657830040965, 2.9999999767860275, 17.09999975180742], res_norm=2.423e+01
2026-01-21 11:49:00,192 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:00,193 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:00,210 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,384 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,407 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,454 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,476 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,525 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,546 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,598 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,678 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,698 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,746 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,769 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,817 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,841 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,888 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,909 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:00,959 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:00,981 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:01,026 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:01,048 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:01,093 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:04,154 - WARNING - integration_test - Step 59: MPC solve failed
2026-01-21 11:49:04,154 - WARNING - integration_test -   Consecutive MPC failures: 3/15
2026-01-21 11:49:04,288 - INFO - integration_test - Step 59: Computed 6 numeric contouring constraints for visualization (s=16.800)
2026-01-21 11:49:04,288 - DEBUG - integration_test - Step 59: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:04,289 - INFO - integration_test - === Applying control at step 59 ===
2026-01-21 11:49:04,289 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:49:04,289 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:04,289 - INFO - integration_test -   Planner output success: False
2026-01-21 11:49:04,289 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:49:04,290 - INFO - integration_test - Step 59 completed in 4.346s
2026-01-21 11:49:04,362 - INFO - integration_test - Step 60 (contouring until path end)
2026-01-21 11:49:04,370 - DEBUG - integration_test - Syncing planner state at step 60: vehicle_state=[15.64857409  6.36879565  0.37464658  2.99999998 17.09999975]
2026-01-21 11:49:04,370 - DEBUG - integration_test - Step 60: Using propagated spline 17.1000 (close to path, dist=0.252m, drift=0.498m)
2026-01-21 11:49:04,370 - DEBUG - integration_test -   Set spline state to 17.1000
2026-01-21 11:49:04,374 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:04,688 - DEBUG - integration_test - Step 60: Checking path alignment: vehicle=(15.649, 6.369), path_start=(0.000, 0.000), dist=16.895m
2026-01-21 11:49:04,688 - WARNING - integration_test - Step 60: Vehicle is far from path start (dist=16.895m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:04,688 - INFO - integration_test - === Calling planner.solve_mpc() at step 60 ===
2026-01-21 11:49:04,786 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:04,812 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:04,812 - INFO - integration_test - Warmstart k=0: x0=15.648574091222608 , y0=6.368795647834774 , psi0=0.37464657830040965 , v0=2.9999999767860275 , spline0=17.09999975180742 , a0=0.0 , w0=0.0
2026-01-21 11:49:04,812 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:04,813 - INFO - integration_test - Dyn residual k=0: pred=[15.927765192799015, 6.478578740375081, 0.37464657830040965, 2.9999999767860275, 17.399999749486025], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[15.927765192799015, 6.478578740375081, 0.37464657830040965, 2.9999999767860275, 17.399999749486025], res_norm=2.465e+01
2026-01-21 11:49:04,813 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:04,814 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:04,831 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,003 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,025 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,074 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,095 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,143 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,166 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,215 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,237 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,285 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,306 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,351 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,375 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,424 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,446 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,493 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,514 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,563 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:05,586 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,632 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:05,656 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:05,702 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:08,767 - WARNING - integration_test - Step 60: MPC solve failed
2026-01-21 11:49:08,767 - WARNING - integration_test -   Consecutive MPC failures: 4/15
2026-01-21 11:49:08,904 - INFO - integration_test - Step 60: Computed 6 numeric contouring constraints for visualization (s=17.100)
2026-01-21 11:49:08,904 - DEBUG - integration_test - Step 60: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:08,904 - INFO - integration_test - === Applying control at step 60 ===
2026-01-21 11:49:08,904 - INFO - integration_test -   Control dict from planner: {'a': 0.0, 'w': 0.0}
2026-01-21 11:49:08,905 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:08,905 - INFO - integration_test -   Planner output success: False
2026-01-21 11:49:08,905 - WARNING - integration_test -   MPC solve failed - applying safe fallback control: {'a': 0.0, 'w': 0.0}
2026-01-21 11:49:08,906 - INFO - integration_test - Step 60 completed in 4.537s
2026-01-21 11:49:08,974 - INFO - integration_test - Step 61 (contouring until path end)
2026-01-21 11:49:08,987 - DEBUG - integration_test - Syncing planner state at step 61: vehicle_state=[15.92776519  6.47857874  0.37464658  2.99999998 17.39999975]
2026-01-21 11:49:08,987 - DEBUG - integration_test - Step 61: Using propagated spline 17.4000 (close to path, dist=0.036m, drift=0.309m)
2026-01-21 11:49:08,987 - DEBUG - integration_test -   Set spline state to 17.4000
2026-01-21 11:49:08,991 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:09,099 - DEBUG - integration_test - Step 61: Checking path alignment: vehicle=(15.928, 6.479), path_start=(0.000, 0.000), dist=17.195m
2026-01-21 11:49:09,099 - WARNING - integration_test - Step 61: Vehicle is far from path start (dist=17.195m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:09,099 - INFO - integration_test - === Calling planner.solve_mpc() at step 61 ===
2026-01-21 11:49:09,211 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:09,236 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:09,236 - INFO - integration_test - Warmstart k=0: x0=15.927765192799015 , y0=6.478578740375081 , psi0=0.37464657830040965 , v0=2.9999999767860275 , spline0=17.399999749486025 , a0=0.0 , w0=0.0
2026-01-21 11:49:09,236 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:09,237 - INFO - integration_test - Dyn residual k=0: pred=[16.206956294375424, 6.588361832915388, 0.37464657830040965, 2.9999999767860275, 17.69999974716463], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.206956294375424, 6.588361832915388, 0.37464657830040965, 2.9999999767860275, 17.69999974716463], res_norm=2.507e+01
2026-01-21 11:49:09,238 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:09,239 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:09,257 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,429 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,451 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,504 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,525 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,576 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,599 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,646 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,672 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,718 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,739 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,791 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,812 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,861 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,881 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:09,929 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:09,952 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:10,000 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:10,026 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:10,071 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:10,092 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:10,139 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:11,204 - INFO - integration_test - Step 61: MPC solve successful
2026-01-21 11:49:11,337 - INFO - integration_test - Step 61: Computed 6 numeric contouring constraints for visualization (s=17.400)
2026-01-21 11:49:11,337 - DEBUG - integration_test - Step 61: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:11,337 - INFO - integration_test - === Applying control at step 61 ===
2026-01-21 11:49:11,337 - INFO - integration_test -   Control dict from planner: {'a': 5.287243697869642e-07, 'w': -0.8000000090883231}
2026-01-21 11:49:11,337 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:11,337 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:11,338 - INFO - integration_test - Step 61 completed in 2.352s
2026-01-21 11:49:11,406 - INFO - integration_test - Step 62 (contouring until path end)
2026-01-21 11:49:11,413 - DEBUG - integration_test - Syncing planner state at step 62: vehicle_state=[16.21104757  6.57708308  0.29464658  3.00000003 17.69999975]
2026-01-21 11:49:11,414 - DEBUG - integration_test - Step 62: Using propagated spline 17.7000 (close to path, dist=0.186m, drift=0.121m)
2026-01-21 11:49:11,414 - DEBUG - integration_test -   Set spline state to 17.7000
2026-01-21 11:49:11,419 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:11,529 - DEBUG - integration_test - Step 62: Checking path alignment: vehicle=(16.211, 6.577), path_start=(0.000, 0.000), dist=17.494m
2026-01-21 11:49:11,529 - WARNING - integration_test - Step 62: Vehicle is far from path start (dist=17.494m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:11,529 - INFO - integration_test - === Calling planner.solve_mpc() at step 62 ===
2026-01-21 11:49:11,630 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:11,654 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:11,654 - INFO - integration_test - Warmstart k=0: x0=16.21104757455893 , y0=6.57708308126686 , psi0=0.29464657739157735 , v0=3.0000000296584646 , spline0=17.69999975245187 , a0=0.0 , w0=0.0
2026-01-21 11:49:11,654 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:11,655 - INFO - integration_test - Dyn residual k=0: pred=[16.498119028376713, 6.664203585067346, 0.29464657739157735, 3.0000000296584646, 17.999999755417715], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.498119028376713, 6.664203585067346, 0.29464657739157735, 3.0000000296584646, 17.999999755417715], res_norm=2.549e+01
2026-01-21 11:49:11,656 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:11,657 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:11,675 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,049 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,074 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,120 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,140 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,192 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,214 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,262 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,285 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,330 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,351 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,402 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,424 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,472 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,493 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,539 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,563 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,616 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:12,638 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,687 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:12,708 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:12,750 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:14,194 - INFO - integration_test - Step 62: MPC solve successful
2026-01-21 11:49:14,327 - INFO - integration_test - Step 62: Computed 6 numeric contouring constraints for visualization (s=17.700)
2026-01-21 11:49:14,328 - DEBUG - integration_test - Step 62: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:14,328 - INFO - integration_test - === Applying control at step 62 ===
2026-01-21 11:49:14,328 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000191708693, 'w': -0.7999999962070783}
2026-01-21 11:49:14,328 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:14,328 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:14,329 - INFO - integration_test - Step 62 completed in 2.916s
2026-01-21 11:49:14,397 - INFO - integration_test - Step 63 (contouring until path end)
2026-01-21 11:49:14,406 - DEBUG - integration_test - Syncing planner state at step 63: vehicle_state=[16.49158736  6.65024459  0.21464658  2.80000003 17.97999976]
2026-01-21 11:49:14,407 - DEBUG - integration_test - Step 63: Using propagated spline 17.9800 (close to path, dist=0.110m, drift=0.401m)
2026-01-21 11:49:14,407 - DEBUG - integration_test -   Set spline state to 17.9800
2026-01-21 11:49:14,411 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:14,519 - DEBUG - integration_test - Step 63: Checking path alignment: vehicle=(16.492, 6.650), path_start=(0.000, 0.000), dist=17.782m
2026-01-21 11:49:14,519 - WARNING - integration_test - Step 63: Vehicle is far from path start (dist=17.782m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:14,519 - INFO - integration_test - === Calling planner.solve_mpc() at step 63 ===
2026-01-21 11:49:14,621 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:14,646 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:14,646 - INFO - integration_test - Warmstart k=0: x0=16.491587361118654 , y0=6.65024458900896 , psi0=0.2146465777708695 , v0=2.8000000277413775 , spline0=17.979999755226007 , a0=0.0 , w0=0.0
2026-01-21 11:49:14,646 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:14,647 - INFO - integration_test - Dyn residual k=0: pred=[16.76516184960484, 6.7098851859462645, 0.2146465777708695, 2.8000000277413775, 18.259999758000145], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[16.76516184960484, 6.7098851859462645, 0.2146465777708695, 2.8000000277413775, 18.259999758000145], res_norm=2.583e+01
2026-01-21 11:49:14,648 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:14,649 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:14,665 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:14,841 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:14,863 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:14,911 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:14,934 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:14,982 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,004 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,054 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,075 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,120 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,145 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,193 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,214 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,264 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,284 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,331 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,354 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,402 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:15,423 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,468 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:15,488 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:15,531 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:16,640 - INFO - integration_test - Step 63: MPC solve successful
2026-01-21 11:49:16,818 - INFO - integration_test - Step 63: Computed 6 numeric contouring constraints for visualization (s=17.980)
2026-01-21 11:49:16,818 - DEBUG - integration_test - Step 63: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:16,818 - INFO - integration_test - === Applying control at step 63 ===
2026-01-21 11:49:16,818 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019283194, 'w': -0.7999999062117058}
2026-01-21 11:49:16,818 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:16,818 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:16,820 - INFO - integration_test - Step 63 completed in 2.414s
2026-01-21 11:49:16,887 - INFO - integration_test - Step 64 (contouring until path end)
2026-01-21 11:49:16,900 - DEBUG - integration_test - Syncing planner state at step 64: vehicle_state=[16.75738607  6.69727858  0.13464659  2.60000003 18.23999976]
2026-01-21 11:49:16,901 - DEBUG - integration_test - Step 64: Using propagated spline 18.2400 (close to path, dist=0.142m, drift=0.173m)
2026-01-21 11:49:16,901 - DEBUG - integration_test -   Set spline state to 18.2400
2026-01-21 11:49:16,904 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:17,020 - DEBUG - integration_test - Step 64: Checking path alignment: vehicle=(16.757, 6.697), path_start=(0.000, 0.000), dist=18.046m
2026-01-21 11:49:17,021 - WARNING - integration_test - Step 64: Vehicle is far from path start (dist=18.046m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:17,021 - INFO - integration_test - === Calling planner.solve_mpc() at step 64 ===
2026-01-21 11:49:17,124 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:17,149 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:17,149 - INFO - integration_test - Warmstart k=0: x0=16.757386069428428 , y0=6.697278579375512 , psi0=0.13464658714969893 , v0=2.600000025813058 , spline0=18.239999757807315 , a0=0.0 , w0=0.0
2026-01-21 11:49:17,149 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:17,150 - INFO - integration_test - Dyn residual k=0: pred=[17.01503276915576, 6.732181007111883, 0.13464658714969893, 2.600000025813058, 18.499999760388622], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.01503276915576, 6.732181007111883, 0.13464658714969893, 2.600000025813058, 18.499999760388622], res_norm=2.615e+01
2026-01-21 11:49:17,151 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:17,152 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:17,169 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,346 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,368 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,417 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,440 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,487 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,508 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,558 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,580 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,632 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,655 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,703 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,723 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,772 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,794 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,841 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,865 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,910 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:17,931 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:17,979 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:18,001 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:18,048 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:19,179 - INFO - integration_test - Step 64: MPC solve successful
2026-01-21 11:49:19,528 - INFO - integration_test - Step 64: Computed 6 numeric contouring constraints for visualization (s=18.240)
2026-01-21 11:49:19,528 - DEBUG - integration_test - Step 64: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:19,528 - INFO - integration_test - === Applying control at step 64 ===
2026-01-21 11:49:19,528 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199980996, 'w': 0.02698521093052403}
2026-01-21 11:49:19,528 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:19,528 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:19,530 - INFO - integration_test - Step 64 completed in 2.629s
2026-01-21 11:49:19,599 - INFO - integration_test - Step 65 (contouring until path end)
2026-01-21 11:49:19,607 - DEBUG - integration_test - Syncing planner state at step 65: vehicle_state=[17.00507831  6.73116837  0.13734511  2.40000002 18.47999976]
2026-01-21 11:49:19,608 - DEBUG - integration_test - Step 65: Using propagated spline 18.4800 (close to path, dist=0.113m, drift=0.413m)
2026-01-21 11:49:19,608 - DEBUG - integration_test -   Set spline state to 18.4800
2026-01-21 11:49:19,611 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:19,719 - DEBUG - integration_test - Step 65: Checking path alignment: vehicle=(17.005, 6.731), path_start=(0.000, 0.000), dist=18.289m
2026-01-21 11:49:19,719 - WARNING - integration_test - Step 65: Vehicle is far from path start (dist=18.289m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:19,719 - INFO - integration_test - === Calling planner.solve_mpc() at step 65 ===
2026-01-21 11:49:19,823 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:19,849 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:19,849 - INFO - integration_test - Warmstart k=0: x0=17.005078308602897 , y0=6.731168371149239 , psi0=0.13734510824275134 , v0=2.400000023813248 , spline0=18.47999976018864 , a0=0.0 , w0=0.0
2026-01-21 11:49:19,849 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:19,850 - INFO - integration_test - Dyn residual k=0: pred=[17.242818225657853, 6.76402766179493, 0.13734510824275134, 2.400000023813248, 18.719999762569966], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.242818225657853, 6.76402766179493, 0.13734510824275134, 2.400000023813248, 18.719999762569966], res_norm=2.644e+01
2026-01-21 11:49:19,851 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:19,852 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:19,869 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,046 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,068 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,114 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,137 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,186 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,208 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,267 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,289 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,335 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,359 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,409 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,431 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,482 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,504 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,549 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,574 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,623 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:20,644 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,689 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:20,710 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:20,754 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:21,916 - INFO - integration_test - Step 65: MPC solve successful
2026-01-21 11:49:22,060 - INFO - integration_test - Step 65: Computed 6 numeric contouring constraints for visualization (s=18.480)
2026-01-21 11:49:22,060 - DEBUG - integration_test - Step 65: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:22,060 - INFO - integration_test - === Applying control at step 65 ===
2026-01-21 11:49:22,060 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019996996, 'w': -0.01344605505555383}
2026-01-21 11:49:22,060 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:22,060 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:22,061 - INFO - integration_test - Step 65 completed in 2.455s
2026-01-21 11:49:22,130 - INFO - integration_test - Step 66 (contouring until path end)
2026-01-21 11:49:22,140 - DEBUG - integration_test - Syncing planner state at step 66: vehicle_state=[17.23293319  6.76250756  0.1360005   2.20000002 18.69999976]
2026-01-21 11:49:22,141 - DEBUG - integration_test - Step 66: Using propagated spline 18.7000 (close to path, dist=0.173m, drift=0.144m)
2026-01-21 11:49:22,141 - DEBUG - integration_test -   Set spline state to 18.7000
2026-01-21 11:49:22,144 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:22,255 - DEBUG - integration_test - Step 66: Checking path alignment: vehicle=(17.233, 6.763), path_start=(0.000, 0.000), dist=18.512m
2026-01-21 11:49:22,255 - WARNING - integration_test - Step 66: Vehicle is far from path start (dist=18.512m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:22,255 - INFO - integration_test - === Calling planner.solve_mpc() at step 66 ===
2026-01-21 11:49:22,362 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:22,389 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:22,389 - INFO - integration_test - Warmstart k=0: x0=17.232933192708554 , y0=6.7625075618460135 , psi0=0.13600050273719597 , v0=2.2000000218135485 , spline0=18.699999762369995 , a0=0.0 , w0=0.0
2026-01-21 11:49:22,389 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:22,390 - INFO - integration_test - Dyn residual k=0: pred=[17.450901753876543, 6.792335523595887, 0.13600050273719597, 2.2000000218135485, 18.91999976455135], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.450901753876543, 6.792335523595887, 0.13600050273719597, 2.2000000218135485, 18.91999976455135], res_norm=2.671e+01
2026-01-21 11:49:22,391 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:22,392 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:22,410 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:22,590 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:22,615 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:22,666 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:22,688 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:22,733 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:22,757 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:22,805 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:22,827 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:22,877 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:22,898 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:22,944 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:22,968 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:23,050 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:23,087 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:23,138 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:23,161 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:23,211 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:23,233 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:23,282 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:23,303 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:23,346 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:24,404 - INFO - integration_test - Step 66: MPC solve successful
2026-01-21 11:49:24,550 - INFO - integration_test - Step 66: Computed 6 numeric contouring constraints for visualization (s=18.700)
2026-01-21 11:49:24,551 - DEBUG - integration_test - Step 66: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:24,551 - INFO - integration_test - === Applying control at step 66 ===
2026-01-21 11:49:24,551 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199983807, 'w': -0.013055611276052254}
2026-01-21 11:49:24,551 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:24,551 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:24,552 - INFO - integration_test - Step 66 completed in 2.412s
2026-01-21 11:49:24,623 - INFO - integration_test - Step 67 (contouring until path end)
2026-01-21 11:49:24,631 - DEBUG - integration_test - Syncing planner state at step 67: vehicle_state=[17.44101233  6.79084604  0.13469494  2.00000002 18.89999976]
2026-01-21 11:49:24,631 - DEBUG - integration_test - Step 67: Using propagated spline 18.9000 (close to path, dist=0.038m, drift=0.344m)
2026-01-21 11:49:24,631 - DEBUG - integration_test -   Set spline state to 18.9000
2026-01-21 11:49:24,634 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:24,743 - DEBUG - integration_test - Step 67: Checking path alignment: vehicle=(17.441, 6.791), path_start=(0.000, 0.000), dist=18.716m
2026-01-21 11:49:24,743 - WARNING - integration_test - Step 67: Vehicle is far from path start (dist=18.716m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:24,743 - INFO - integration_test - === Calling planner.solve_mpc() at step 67 ===
2026-01-21 11:49:24,848 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:24,873 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:24,873 - INFO - integration_test - Warmstart k=0: x0=17.441012325349092 , y0=6.790846037007331 , psi0=0.13469494160959075 , v0=2.0000000198137102 , spline0=18.899999764351367 , a0=0.0 , w0=0.0
2026-01-21 11:49:24,873 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:24,874 - INFO - integration_test - Dyn residual k=0: pred=[17.639200795912636, 6.817703641670277, 0.13469494160959075, 2.0000000198137102, 19.09999976633274], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.639200795912636, 6.817703641670277, 0.13469494160959075, 2.0000000198137102, 19.09999976633274], res_norm=2.695e+01
2026-01-21 11:49:24,875 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:24,876 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:24,893 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,066 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,087 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,136 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,157 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,209 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,231 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,279 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,302 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,348 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,372 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,423 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,444 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,493 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,517 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,563 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,587 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,635 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:25,658 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,702 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:25,724 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:25,770 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:27,104 - INFO - integration_test - Step 67: MPC solve successful
2026-01-21 11:49:27,490 - INFO - integration_test - Step 67: Computed 6 numeric contouring constraints for visualization (s=18.900)
2026-01-21 11:49:27,490 - DEBUG - integration_test - Step 67: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:27,491 - INFO - integration_test - === Applying control at step 67 ===
2026-01-21 11:49:27,491 - INFO - integration_test -   Control dict from planner: {'a': -2.000000019998336, 'w': -0.011429778306608688}
2026-01-21 11:49:27,491 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:27,491 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:27,492 - INFO - integration_test - Step 67 completed in 2.862s
2026-01-21 11:49:27,559 - INFO - integration_test - Step 68 (contouring until path end)
2026-01-21 11:49:27,573 - DEBUG - integration_test - Syncing planner state at step 68: vehicle_state=[17.62930566  6.81625504  0.13355196  1.80000002 19.07999977]
2026-01-21 11:49:27,573 - DEBUG - integration_test - Step 68: Using propagated spline 19.0800 (close to path, dist=0.228m, drift=0.524m)
2026-01-21 11:49:27,573 - DEBUG - integration_test -   Set spline state to 19.0800
2026-01-21 11:49:27,577 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:27,691 - DEBUG - integration_test - Step 68: Checking path alignment: vehicle=(17.629, 6.816), path_start=(0.000, 0.000), dist=18.901m
2026-01-21 11:49:27,691 - WARNING - integration_test - Step 68: Vehicle is far from path start (dist=18.901m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:27,691 - INFO - integration_test - === Calling planner.solve_mpc() at step 68 ===
2026-01-21 11:49:27,791 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:27,819 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:27,819 - INFO - integration_test - Warmstart k=0: x0=17.629305658034717 , y0=6.816255044359303 , psi0=0.1335519637789299 , v0=1.8000000178138766 , spline0=19.079999766132755 , a0=0.0 , w0=0.0
2026-01-21 11:49:27,820 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:27,821 - INFO - integration_test - Dyn residual k=0: pred=[17.80770279290523, 6.840223000285739, 0.1335519637789299, 1.8000000178138766, 19.25999976791414], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.80770279290523, 6.840223000285739, 0.1335519637789299, 1.8000000178138766, 19.25999976791414], res_norm=2.717e+01
2026-01-21 11:49:27,822 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:27,822 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:27,839 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,014 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,035 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,085 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,106 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,153 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,176 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,224 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,246 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,296 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,316 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,363 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,386 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,436 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,456 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,507 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,528 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,576 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:28,597 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,648 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:28,669 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:28,714 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:29,710 - INFO - integration_test - Step 68: MPC solve successful
2026-01-21 11:49:29,855 - INFO - integration_test - Step 68: Computed 6 numeric contouring constraints for visualization (s=19.080)
2026-01-21 11:49:29,856 - DEBUG - integration_test - Step 68: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:29,856 - INFO - integration_test - === Applying control at step 68 ===
2026-01-21 11:49:29,856 - INFO - integration_test -   Control dict from planner: {'a': -2.000000016828958, 'w': -0.013778106830181453}
2026-01-21 11:49:29,856 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:29,856 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:29,857 - INFO - integration_test - Step 68 completed in 2.285s
2026-01-21 11:49:29,928 - INFO - integration_test - Step 69 (contouring until path end)
2026-01-21 11:49:29,938 - DEBUG - integration_test - Syncing planner state at step 69: vehicle_state=[17.79780708  6.83877765  0.13217415  1.60000002 19.23999977]
2026-01-21 11:49:29,939 - DEBUG - integration_test - Step 69: Using propagated spline 19.2400 (close to path, dist=0.117m, drift=0.196m)
2026-01-21 11:49:29,939 - DEBUG - integration_test -   Set spline state to 19.2400
2026-01-21 11:49:29,942 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:30,054 - DEBUG - integration_test - Step 69: Checking path alignment: vehicle=(17.798, 6.839), path_start=(0.000, 0.000), dist=19.066m
2026-01-21 11:49:30,054 - WARNING - integration_test - Step 69: Vehicle is far from path start (dist=19.066m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:30,054 - INFO - integration_test - === Calling planner.solve_mpc() at step 69 ===
2026-01-21 11:49:30,152 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:30,177 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:30,177 - INFO - integration_test - Warmstart k=0: x0=17.797807077807683 , y0=6.838777645118133 , psi0=0.13217415309591174 , v0=1.6000000161309809 , spline0=19.239999767745854 , a0=0.0 , w0=0.0
2026-01-21 11:49:30,177 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:30,178 - INFO - integration_test - Dyn residual k=0: pred=[17.95641151235673, 6.859863988034068, 0.13217415309591174, 1.6000000161309809, 19.399999769358953], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[17.95641151235673, 6.859863988034068, 0.13217415309591174, 1.6000000161309809, 19.399999769358953], res_norm=2.736e+01
2026-01-21 11:49:30,179 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:30,180 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:30,196 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,365 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,387 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,437 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,458 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,505 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,528 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,576 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,598 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,648 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,670 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,715 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,736 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,785 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,807 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,857 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,889 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:30,972 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:30,994 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:31,039 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:31,062 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:31,108 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:32,019 - INFO - integration_test - Step 69: MPC solve successful
2026-01-21 11:49:32,173 - INFO - integration_test - Step 69: Computed 6 numeric contouring constraints for visualization (s=19.240)
2026-01-21 11:49:32,174 - DEBUG - integration_test - Step 69: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:32,174 - INFO - integration_test - === Applying control at step 69 ===
2026-01-21 11:49:32,174 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000199733425, 'w': 0.094567854297847}
2026-01-21 11:49:32,174 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:32,174 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:32,175 - INFO - integration_test - Step 69 completed in 2.237s
2026-01-21 11:49:32,248 - INFO - integration_test - Step 70 (contouring until path end)
2026-01-21 11:49:32,260 - DEBUG - integration_test - Syncing planner state at step 70: vehicle_state=[17.96621369  6.86199397  0.14163094  1.80000002 19.41999977]
2026-01-21 11:49:32,261 - DEBUG - integration_test - Step 70: Using propagated spline 19.4200 (close to path, dist=0.055m, drift=0.376m)
2026-01-21 11:49:32,261 - DEBUG - integration_test -   Set spline state to 19.4200
2026-01-21 11:49:32,264 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:32,373 - DEBUG - integration_test - Step 70: Checking path alignment: vehicle=(17.966, 6.862), path_start=(0.000, 0.000), dist=19.232m
2026-01-21 11:49:32,373 - WARNING - integration_test - Step 70: Vehicle is far from path start (dist=19.232m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:32,373 - INFO - integration_test - === Calling planner.solve_mpc() at step 70 ===
2026-01-21 11:49:32,474 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:32,499 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:32,499 - INFO - integration_test - Warmstart k=0: x0=17.96621369148152 , y0=6.861993973927397 , psi0=0.14163093852569644 , v0=1.8000000181283151 , spline0=19.419999769558686 , a0=0.0 , w0=0.0
2026-01-21 11:49:32,499 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:32,500 - INFO - integration_test - Dyn residual k=0: pred=[18.144411370035, 6.887402397939321, 0.14163093852569644, 1.8000000181283151, 19.599999771371518], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.144411370035, 6.887402397939321, 0.14163093852569644, 1.8000000181283151, 19.599999771371518], res_norm=2.764e+01
2026-01-21 11:49:32,500 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:32,501 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:32,519 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:32,702 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:32,723 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:32,773 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:32,795 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:32,844 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:32,867 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:32,914 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:32,935 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:32,984 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:33,006 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:33,057 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:33,081 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:33,126 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:33,147 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:33,198 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:33,220 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:33,270 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:33,290 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:33,334 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:33,357 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:33,402 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:34,231 - INFO - integration_test - Step 70: MPC solve successful
2026-01-21 11:49:34,630 - INFO - integration_test - Step 70: Computed 6 numeric contouring constraints for visualization (s=19.420)
2026-01-21 11:49:34,630 - DEBUG - integration_test - Step 70: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:34,630 - INFO - integration_test - === Applying control at step 70 ===
2026-01-21 11:49:34,630 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000172320154, 'w': -0.049571218463104236}
2026-01-21 11:49:34,631 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:34,631 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:34,632 - INFO - integration_test - Step 70 completed in 2.372s
2026-01-21 11:49:34,702 - INFO - integration_test - Step 71 (contouring until path end)
2026-01-21 11:49:34,713 - DEBUG - integration_test - Syncing planner state at step 71: vehicle_state=[18.15437809  6.88833947  0.13667382  2.00000002 19.61999977]
2026-01-21 11:49:34,713 - DEBUG - integration_test - Step 71: Using propagated spline 19.6200 (close to path, dist=0.244m, drift=0.576m)
2026-01-21 11:49:34,713 - DEBUG - integration_test -   Set spline state to 19.6200
2026-01-21 11:49:34,716 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:34,828 - DEBUG - integration_test - Step 71: Checking path alignment: vehicle=(18.154, 6.888), path_start=(0.000, 0.000), dist=19.417m
2026-01-21 11:49:34,828 - WARNING - integration_test - Step 71: Vehicle is far from path start (dist=19.417m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:34,828 - INFO - integration_test - === Calling planner.solve_mpc() at step 71 ===
2026-01-21 11:49:34,929 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:34,953 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:34,953 - INFO - integration_test - Warmstart k=0: x0=18.154378091523633 , y0=6.888339474924638 , psi0=0.13667381667938602 , v0=2.000000019851517 , spline0=19.61999977154384 , a0=0.0 , w0=0.0
2026-01-21 11:49:34,953 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:34,954 - INFO - integration_test - Dyn residual k=0: pred=[18.35251302623371, 6.915589216969196, 0.13667381667938602, 2.000000019851517, 19.81999977352899], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.35251302623371, 6.915589216969196, 0.13667381667938602, 2.000000019851517, 19.81999977352899], res_norm=2.796e+01
2026-01-21 11:49:34,955 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:34,956 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:34,975 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,178 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,205 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,268 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,291 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,337 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,360 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,407 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,430 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,480 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,501 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,549 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,571 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,619 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,641 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,689 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,710 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,755 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:35,779 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,825 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:35,846 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:35,893 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:36,701 - INFO - integration_test - Step 71: MPC solve successful
2026-01-21 11:49:36,865 - INFO - integration_test - Step 71: Computed 6 numeric contouring constraints for visualization (s=19.620)
2026-01-21 11:49:36,865 - DEBUG - integration_test - Step 71: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:36,866 - INFO - integration_test - === Applying control at step 71 ===
2026-01-21 11:49:36,866 - INFO - integration_test -   Control dict from planner: {'a': 2.000000019929969, 'w': -0.011053899141569776}
2026-01-21 11:49:36,866 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:36,866 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:36,867 - INFO - integration_test - Step 71 completed in 2.155s
2026-01-21 11:49:36,935 - INFO - integration_test - Step 72 (contouring until path end)
2026-01-21 11:49:36,939 - DEBUG - integration_test - Syncing planner state at step 72: vehicle_state=[18.36243579  6.91683489  0.13556843  2.20000002 19.83999977]
2026-01-21 11:49:36,939 - DEBUG - integration_test - Step 72: Using propagated spline 19.8400 (close to path, dist=0.066m, drift=0.308m)
2026-01-21 11:49:36,940 - DEBUG - integration_test -   Set spline state to 19.8400
2026-01-21 11:49:36,943 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:37,058 - DEBUG - integration_test - Step 72: Checking path alignment: vehicle=(18.362, 6.917), path_start=(0.000, 0.000), dist=19.622m
2026-01-21 11:49:37,058 - WARNING - integration_test - Step 72: Vehicle is far from path start (dist=19.622m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:37,058 - INFO - integration_test - === Calling planner.solve_mpc() at step 72 ===
2026-01-21 11:49:37,159 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:37,185 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:37,186 - INFO - integration_test - Warmstart k=0: x0=18.362435794439975 , y0=6.916834889393488 , psi0=0.13556842676522904 , v0=2.200000021844514 , spline0=19.83999977372829 , a0=0.0 , w0=0.0
2026-01-21 11:49:37,186 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:37,187 - INFO - integration_test - Dyn residual k=0: pred=[18.580417223209963, 6.9465686693845, 0.13556842676522904, 2.200000021844514, 20.059999775912743], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.580417223209963, 6.9465686693845, 0.13556842676522904, 2.200000021844514, 20.059999775912743], res_norm=2.830e+01
2026-01-21 11:49:37,188 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:37,189 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:37,206 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,385 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,408 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,458 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,480 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,529 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,551 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,602 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,628 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,676 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,696 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,746 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,767 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,816 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,838 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,891 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,912 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:37,960 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:37,983 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:38,029 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:38,050 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:38,097 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:38,826 - INFO - integration_test - Step 72: MPC solve successful
2026-01-21 11:49:38,978 - INFO - integration_test - Step 72: Computed 6 numeric contouring constraints for visualization (s=19.840)
2026-01-21 11:49:38,978 - DEBUG - integration_test - Step 72: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:38,978 - INFO - integration_test - === Applying control at step 72 ===
2026-01-21 11:49:38,978 - INFO - integration_test -   Control dict from planner: {'a': 1.9999998720446424, 'w': 0.03594325966214066}
2026-01-21 11:49:38,978 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:38,978 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:38,980 - INFO - integration_test - Step 72 completed in 2.041s
2026-01-21 11:49:39,050 - INFO - integration_test - Step 73 (contouring until path end)
2026-01-21 11:49:39,063 - DEBUG - integration_test - Syncing planner state at step 73: vehicle_state=[18.59026829  6.94833563  0.13916275  2.40000001 20.07999977]
2026-01-21 11:49:39,064 - DEBUG - integration_test - Step 73: Using propagated spline 20.0800 (close to path, dist=0.171m, drift=0.548m)
2026-01-21 11:49:39,064 - DEBUG - integration_test -   Set spline state to 20.0800
2026-01-21 11:49:39,067 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:39,180 - DEBUG - integration_test - Step 73: Checking path alignment: vehicle=(18.590, 6.948), path_start=(0.000, 0.000), dist=19.846m
2026-01-21 11:49:39,180 - WARNING - integration_test - Step 73: Vehicle is far from path start (dist=19.846m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:39,180 - INFO - integration_test - === Calling planner.solve_mpc() at step 73 ===
2026-01-21 11:49:39,285 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:39,310 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:39,310 - INFO - integration_test - Warmstart k=0: x0=18.59026829292256 , y0=6.948335626362683 , psi0=0.1391627527314431 , v0=2.400000009048978 , spline0=20.07999977463319 , a0=0.0 , w0=0.0
2026-01-21 11:49:39,310 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:39,311 - INFO - integration_test - Dyn residual k=0: pred=[18.8279480893135, 6.98162698893484, 0.1391627527314431, 2.400000009048978, 20.31999977553809], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[18.8279480893135, 6.98162698893484, 0.1391627527314431, 2.400000009048978, 20.31999977553809], res_norm=2.867e+01
2026-01-21 11:49:39,312 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:39,313 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:39,329 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,526 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,558 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,611 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,633 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,683 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,706 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,753 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,774 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,824 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,846 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,893 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,916 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:39,963 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:39,983 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:40,033 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:40,055 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:40,101 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:40,125 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:40,170 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:40,192 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:40,241 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:41,063 - INFO - integration_test - Step 73: MPC solve successful
2026-01-21 11:49:41,469 - INFO - integration_test - Step 73: Computed 6 numeric contouring constraints for visualization (s=20.080)
2026-01-21 11:49:41,469 - DEBUG - integration_test - Step 73: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:41,469 - INFO - integration_test - === Applying control at step 73 ===
2026-01-21 11:49:41,469 - INFO - integration_test -   Control dict from planner: {'a': 2.0000000112909913, 'w': -0.008902002439817933}
2026-01-21 11:49:41,469 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:41,469 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:41,470 - INFO - integration_test - Step 73 completed in 2.407s
2026-01-21 11:49:41,539 - INFO - integration_test - Step 74 (contouring until path end)
2026-01-21 11:49:41,546 - DEBUG - integration_test - Syncing planner state at step 74: vehicle_state=[18.83786702  6.98290246  0.13827255  2.60000001 20.33999978]
2026-01-21 11:49:41,546 - DEBUG - integration_test - Step 74: Using propagated spline 20.3400 (close to path, dist=0.101m, drift=0.320m)
2026-01-21 11:49:41,546 - DEBUG - integration_test -   Set spline state to 20.3400
2026-01-21 11:49:41,549 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:41,664 - DEBUG - integration_test - Step 74: Checking path alignment: vehicle=(18.838, 6.983), path_start=(0.000, 0.000), dist=20.090m
2026-01-21 11:49:41,664 - WARNING - integration_test - Step 74: Vehicle is far from path start (dist=20.090m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:41,664 - INFO - integration_test - === Calling planner.solve_mpc() at step 74 ===
2026-01-21 11:49:41,763 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:41,789 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:41,789 - INFO - integration_test - Warmstart k=0: x0=18.83786702203803 , y0=6.9829024557791035 , psi0=0.13827255248746131 , v0=2.600000010178077 , spline0=20.339999775651 , a0=0.0 , w0=0.0
2026-01-21 11:49:41,789 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:41,790 - INFO - integration_test - Dyn residual k=0: pred=[19.095385471781736, 7.018738869813693, 0.13827255248746131, 2.600000010178077, 20.599999776668806], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.095385471781736, 7.018738869813693, 0.13827255248746131, 2.600000010178077, 20.599999776668806], res_norm=2.907e+01
2026-01-21 11:49:41,790 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:41,791 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:41,809 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:41,983 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,006 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,057 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,081 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,127 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,148 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,198 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,221 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,270 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,292 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,337 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,361 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,413 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,438 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,496 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,519 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,572 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:42,598 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,655 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:42,679 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:42,731 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:43,504 - INFO - integration_test - Step 74: MPC solve successful
2026-01-21 11:49:43,663 - INFO - integration_test - Step 74: Computed 6 numeric contouring constraints for visualization (s=20.340)
2026-01-21 11:49:43,663 - DEBUG - integration_test - Step 74: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:43,663 - INFO - integration_test - === Applying control at step 74 ===
2026-01-21 11:49:43,663 - INFO - integration_test -   Control dict from planner: {'a': 1.9999999758185396, 'w': 0.014808104101372465}
2026-01-21 11:49:43,663 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:43,663 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:43,665 - INFO - integration_test - Step 74 completed in 2.119s
2026-01-21 11:49:43,734 - INFO - integration_test - Step 75 (contouring until path end)
2026-01-21 11:49:43,742 - DEBUG - integration_test - Syncing planner state at step 75: vehicle_state=[19.10526203  7.02031763  0.13975336  2.80000001 20.61999978]
2026-01-21 11:49:43,743 - DEBUG - integration_test - Step 75: Using propagated spline 20.6200 (close to path, dist=0.176m, drift=0.600m)
2026-01-21 11:49:43,743 - DEBUG - integration_test -   Set spline state to 20.6200
2026-01-21 11:49:43,746 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:43,899 - DEBUG - integration_test - Step 75: Checking path alignment: vehicle=(19.105, 7.020), path_start=(0.000, 0.000), dist=20.354m
2026-01-21 11:49:43,899 - WARNING - integration_test - Step 75: Vehicle is far from path start (dist=20.354m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:43,899 - INFO - integration_test - === Calling planner.solve_mpc() at step 75 ===
2026-01-21 11:49:44,003 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:44,029 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:44,029 - INFO - integration_test - Warmstart k=0: x0=19.10526203368559 , y0=7.020317625365285 , psi0=0.13975336289759857 , v0=2.800000007759931 , spline0=20.61999977642699 , a0=0.0 , w0=0.0
2026-01-21 11:49:44,029 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:44,030 - INFO - integration_test - Dyn residual k=0: pred=[19.382532141583248, 7.05932131366495, 0.13975336289759857, 2.800000007759931, 20.899999777202982], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.382532141583248, 7.05932131366495, 0.13975336289759857, 2.800000007759931, 20.899999777202982], res_norm=2.950e+01
2026-01-21 11:49:44,031 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:44,032 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:44,048 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,219 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,242 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,293 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,314 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,363 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,386 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,434 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,457 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,506 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,527 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,577 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,600 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,647 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,672 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,718 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,738 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,788 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:44,810 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,857 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:44,879 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:44,923 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:45,780 - INFO - integration_test - Step 75: MPC solve successful
2026-01-21 11:49:45,936 - INFO - integration_test - Step 75: Computed 6 numeric contouring constraints for visualization (s=20.620)
2026-01-21 11:49:45,936 - DEBUG - integration_test - Step 75: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:45,936 - INFO - integration_test - === Applying control at step 75 ===
2026-01-21 11:49:45,936 - INFO - integration_test -   Control dict from planner: {'a': 1.99999999509812, 'w': -0.01664881789620225}
2026-01-21 11:49:45,936 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:45,936 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:45,938 - INFO - integration_test - Step 75 completed in 2.196s
2026-01-21 11:49:46,009 - INFO - integration_test - Step 76 (contouring until path end)
2026-01-21 11:49:46,022 - DEBUG - integration_test - Syncing planner state at step 76: vehicle_state=[19.39246852  7.06047248  0.13808848  3.00000001 20.91999978]
2026-01-21 11:49:46,023 - DEBUG - integration_test - Step 76: Using propagated spline 20.9200 (close to path, dist=0.063m, drift=0.411m)
2026-01-21 11:49:46,023 - DEBUG - integration_test -   Set spline state to 20.9200
2026-01-21 11:49:46,026 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:46,136 - DEBUG - integration_test - Step 76: Checking path alignment: vehicle=(19.392, 7.060), path_start=(0.000, 0.000), dist=20.638m
2026-01-21 11:49:46,136 - WARNING - integration_test - Step 76: Vehicle is far from path start (dist=20.638m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:46,136 - INFO - integration_test - === Calling planner.solve_mpc() at step 76 ===
2026-01-21 11:49:46,242 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:46,268 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:46,268 - INFO - integration_test - Warmstart k=0: x0=19.392468524797128 , y0=7.060472481622563 , psi0=0.13808848110797833 , v0=3.000000007269743 , spline0=20.919999777153965 , a0=0.0 , w0=0.0
2026-01-21 11:49:46,268 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:46,269 - INFO - integration_test - Dyn residual k=0: pred=[19.689612803399175, 7.101767495004969, 0.13808848110797833, 3.000000007269743, 21.21999977788094], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.689612803399175, 7.101767495004969, 0.13808848110797833, 3.000000007269743, 21.21999977788094], res_norm=2.996e+01
2026-01-21 11:49:46,270 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:46,271 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:46,287 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,466 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,488 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,535 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,559 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,607 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,629 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,678 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,699 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,747 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,768 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,818 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,841 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,888 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,909 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:46,957 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:46,980 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:47,030 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:47,052 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:47,098 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:47,119 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:47,166 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:48,076 - INFO - integration_test - Step 76: MPC solve successful
2026-01-21 11:49:48,483 - INFO - integration_test - Step 76: Computed 6 numeric contouring constraints for visualization (s=20.920)
2026-01-21 11:49:48,484 - DEBUG - integration_test - Step 76: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:48,484 - INFO - integration_test - === Applying control at step 76 ===
2026-01-21 11:49:48,484 - INFO - integration_test -   Control dict from planner: {'a': 2.2707837244855497e-07, 'w': -0.0028239148702874934}
2026-01-21 11:49:48,484 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:48,484 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:48,485 - INFO - integration_test - Step 76 completed in 2.463s
2026-01-21 11:49:48,557 - INFO - integration_test - Step 77 (contouring until path end)
2026-01-21 11:49:48,567 - DEBUG - integration_test - Syncing planner state at step 77: vehicle_state=[19.68961863  7.10172554  0.13780609  3.00000003 21.21999978]
2026-01-21 11:49:48,568 - DEBUG - integration_test - Step 77: Using propagated spline 21.2200 (close to path, dist=0.250m, drift=0.711m)
2026-01-21 11:49:48,568 - DEBUG - integration_test -   Set spline state to 21.2200
2026-01-21 11:49:48,571 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:48,724 - DEBUG - integration_test - Step 77: Checking path alignment: vehicle=(19.690, 7.102), path_start=(0.000, 0.000), dist=20.931m
2026-01-21 11:49:48,724 - WARNING - integration_test - Step 77: Vehicle is far from path start (dist=20.931m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:48,724 - INFO - integration_test - === Calling planner.solve_mpc() at step 77 ===
2026-01-21 11:49:48,829 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:48,857 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:48,858 - INFO - integration_test - Warmstart k=0: x0=19.689618631254575 , y0=7.10172553910513 , psi0=0.1378060896209496 , v0=3.0000000299775804 , spline0=21.219999780151724 , a0=0.0 , w0=0.0
2026-01-21 11:49:48,858 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:48,859 - INFO - integration_test - Dyn residual k=0: pred=[19.98677456161808, 7.142936640139359, 0.1378060896209496, 3.0000000299775804, 21.519999783149483], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[19.98677456161808, 7.142936640139359, 0.1378060896209496, 3.0000000299775804, 21.519999783149483], res_norm=3.037e+01
2026-01-21 11:49:48,860 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:48,861 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:48,878 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,055 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,077 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,127 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,148 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,196 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,220 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,270 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,292 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,341 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,362 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,409 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,432 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,480 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,500 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,548 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,570 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,616 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:49,639 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,685 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:49,705 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:49,752 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:51,496 - INFO - integration_test - Step 77: MPC solve successful
2026-01-21 11:49:51,663 - INFO - integration_test - Step 77: Computed 6 numeric contouring constraints for visualization (s=21.220)
2026-01-21 11:49:51,663 - DEBUG - integration_test - Step 77: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:51,663 - INFO - integration_test - === Applying control at step 77 ===
2026-01-21 11:49:51,663 - INFO - integration_test -   Control dict from planner: {'a': -0.0002017090012341907, 'w': -0.09145268911950685}
2026-01-21 11:49:51,663 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:51,663 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:51,665 - INFO - integration_test - Step 77 completed in 3.098s
2026-01-21 11:49:51,735 - INFO - integration_test - Step 78 (contouring until path end)
2026-01-21 11:49:51,744 - DEBUG - integration_test - Syncing planner state at step 78: vehicle_state=[19.98695786  7.14157716  0.12866082  2.99997986 21.51999777]
2026-01-21 11:49:51,745 - DEBUG - integration_test - Step 78: Using propagated spline 21.5200 (close to path, dist=0.047m, drift=0.523m)
2026-01-21 11:49:51,745 - DEBUG - integration_test -   Set spline state to 21.5200
2026-01-21 11:49:51,748 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:51,859 - DEBUG - integration_test - Step 78: Checking path alignment: vehicle=(19.987, 7.142), path_start=(0.000, 0.000), dist=21.225m
2026-01-21 11:49:51,859 - WARNING - integration_test - Step 78: Vehicle is far from path start (dist=21.225m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:51,859 - INFO - integration_test - === Calling planner.solve_mpc() at step 78 ===
2026-01-21 11:49:51,960 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:51,985 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:51,985 - INFO - integration_test - Warmstart k=0: x0=19.986957861662994 , y0=7.1415771572605715 , psi0=0.1286608207089989 , v0=2.999979859077457 , spline0=21.51999776605947 , a0=0.0 , w0=0.0
2026-01-21 11:49:51,985 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:51,986 - INFO - integration_test - Dyn residual k=0: pred=[20.284476246584433, 7.180068743126092, 0.1286608207089989, 2.999979859077457, 21.819995751967213], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.284476246584433, 7.180068743126092, 0.1286608207089989, 2.999979859077457, 21.819995751967213], res_norm=3.079e+01
2026-01-21 11:49:51,986 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:51,987 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:52,005 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,181 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,203 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,254 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,277 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,322 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,345 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,407 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,435 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,500 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,522 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,572 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,596 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,649 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,672 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,720 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,741 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,789 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:52,811 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,859 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:52,882 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:52,928 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:54,136 - INFO - integration_test - Step 78: MPC solve successful
2026-01-21 11:49:54,320 - INFO - integration_test - Step 78: Computed 6 numeric contouring constraints for visualization (s=21.520)
2026-01-21 11:49:54,320 - DEBUG - integration_test - Step 78: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:54,320 - INFO - integration_test - === Applying control at step 78 ===
2026-01-21 11:49:54,320 - INFO - integration_test -   Control dict from planner: {'a': 0.00020142087440426618, 'w': 0.12876921071193712}
2026-01-21 11:49:54,320 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:54,320 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:54,322 - INFO - integration_test - Step 78 completed in 2.578s
2026-01-21 11:49:54,396 - INFO - integration_test - Step 79 (contouring until path end)
2026-01-21 11:49:54,403 - DEBUG - integration_test - Syncing planner state at step 79: vehicle_state=[20.2842212   7.18198335  0.14153774  3.         21.81999777]
2026-01-21 11:49:54,404 - DEBUG - integration_test - Step 79: Using propagated spline 21.8200 (close to path, dist=0.190m, drift=0.335m)
2026-01-21 11:49:54,404 - DEBUG - integration_test -   Set spline state to 21.8200
2026-01-21 11:49:54,407 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:54,519 - DEBUG - integration_test - Step 79: Checking path alignment: vehicle=(20.284, 7.182), path_start=(0.000, 0.000), dist=21.518m
2026-01-21 11:49:54,519 - WARNING - integration_test - Step 79: Vehicle is far from path start (dist=21.518m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:54,519 - INFO - integration_test - === Calling planner.solve_mpc() at step 79 ===
2026-01-21 11:49:54,619 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:54,646 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:54,646 - INFO - integration_test - Warmstart k=0: x0=20.28422119897964 , y0=7.1819833510849564 , psi0=0.1415377417801926 , v0=3.0000000011648975 , spline0=21.81999776617596 , a0=0.0 , w0=0.0
2026-01-21 11:49:54,646 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:54,647 - INFO - integration_test - Dyn residual k=0: pred=[20.58122127237383, 7.224303044771686, 0.1415377417801926, 3.0000000011648975, 22.11999776629245], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.58122127237383, 7.224303044771686, 0.1415377417801926, 3.0000000011648975, 22.11999776629245], res_norm=3.121e+01
2026-01-21 11:49:54,648 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:54,649 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:54,668 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:54,845 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:54,866 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:54,914 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:54,934 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:54,983 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,004 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,053 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,077 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,124 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,145 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,194 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,218 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,268 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,290 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,339 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,362 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,410 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:55,433 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,479 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:55,501 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:55,548 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:57,409 - INFO - integration_test - Step 79: MPC solve successful
2026-01-21 11:49:57,847 - INFO - integration_test - Step 79: Computed 6 numeric contouring constraints for visualization (s=21.820)
2026-01-21 11:49:57,848 - DEBUG - integration_test - Step 79: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:49:57,848 - INFO - integration_test - === Applying control at step 79 ===
2026-01-21 11:49:57,848 - INFO - integration_test -   Control dict from planner: {'a': 2.8834199997854746e-07, 'w': -0.05599100050175687}
2026-01-21 11:49:57,848 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:49:57,848 - INFO - integration_test -   Planner output success: True
2026-01-21 11:49:57,849 - INFO - integration_test - Step 79 completed in 3.446s
2026-01-21 11:49:57,916 - INFO - integration_test - Step 80 (contouring until path end)
2026-01-21 11:49:57,928 - DEBUG - integration_test - Syncing planner state at step 80: vehicle_state=[20.5813382   7.22347136  0.13593864  3.00000003 22.11999777]
2026-01-21 11:49:57,930 - DEBUG - integration_test - Step 80: Using propagated spline 22.1200 (close to path, dist=0.119m, drift=0.635m)
2026-01-21 11:49:57,931 - DEBUG - integration_test -   Set spline state to 22.1200
2026-01-21 11:49:57,934 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:58,043 - DEBUG - integration_test - Step 80: Checking path alignment: vehicle=(20.581, 7.223), path_start=(0.000, 0.000), dist=21.812m
2026-01-21 11:49:58,043 - WARNING - integration_test - Step 80: Vehicle is far from path start (dist=21.812m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:49:58,043 - INFO - integration_test - === Calling planner.solve_mpc() at step 80 ===
2026-01-21 11:49:58,148 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:49:58,174 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:49:58,174 - INFO - integration_test - Warmstart k=0: x0=20.581338197772922 , y0=7.223471359459525 , psi0=0.1359386417300169 , v0=3.0000000299990974 , spline0=22.119997769175868 , a0=0.0 , w0=0.0
2026-01-21 11:49:58,174 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:49:58,175 - INFO - integration_test - Dyn residual k=0: pred=[20.878570569532595, 7.2641274657421615, 0.1359386417300169, 3.0000000299990974, 22.419997772175776], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[20.878570569532595, 7.2641274657421615, 0.1359386417300169, 3.0000000299990974, 22.419997772175776], res_norm=3.163e+01
2026-01-21 11:49:58,176 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:58,177 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:49:58,193 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,366 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,387 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,437 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,461 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,507 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,528 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,578 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,599 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,651 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,673 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,719 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,740 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,788 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,809 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,860 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,881 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,926 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:49:58,949 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:58,994 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:49:59,015 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:49:59,063 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:00,699 - INFO - integration_test - Step 80: MPC solve successful
2026-01-21 11:50:00,885 - INFO - integration_test - Step 80: Computed 6 numeric contouring constraints for visualization (s=22.120)
2026-01-21 11:50:00,885 - DEBUG - integration_test - Step 80: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:50:00,885 - INFO - integration_test - === Applying control at step 80 ===
2026-01-21 11:50:00,885 - INFO - integration_test -   Control dict from planner: {'a': -3.483163674694478e-06, 'w': -0.02785919874750627}
2026-01-21 11:50:00,885 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:50:00,885 - INFO - integration_test -   Planner output success: True
2026-01-21 11:50:00,887 - INFO - integration_test - Step 80 completed in 2.959s
2026-01-21 11:50:00,953 - INFO - integration_test - Step 81 (contouring until path end)
2026-01-21 11:50:00,966 - DEBUG - integration_test - Syncing planner state at step 81: vehicle_state=[20.8786268   7.26371338  0.13315272  2.99999968 22.41999774]
2026-01-21 11:50:00,967 - DEBUG - integration_test - Step 81: Using propagated spline 22.4200 (close to path, dist=0.109m, drift=0.446m)
2026-01-21 11:50:00,967 - DEBUG - integration_test -   Set spline state to 22.4200
2026-01-21 11:50:00,972 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:50:01,125 - DEBUG - integration_test - Step 81: Checking path alignment: vehicle=(20.879, 7.264), path_start=(0.000, 0.000), dist=22.106m
2026-01-21 11:50:01,125 - WARNING - integration_test - Step 81: Vehicle is far from path start (dist=22.106m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:50:01,125 - INFO - integration_test - === Calling planner.solve_mpc() at step 81 ===
2026-01-21 11:50:01,233 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:50:01,261 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:50:01,261 - INFO - integration_test - Warmstart k=0: x0=20.878626800076496 , y0=7.26371337830483 , psi0=0.13315272185526628 , v0=2.99999968168273 , spline0=22.41999773734414 , a0=0.0 , w0=0.0
2026-01-21 11:50:01,261 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:50:01,262 - INFO - integration_test - Dyn residual k=0: pred=[21.175971248359442, 7.303541257689454, 0.13315272185526628, 2.99999968168273, 22.719997705512412], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.175971248359442, 7.303541257689454, 0.13315272185526628, 2.99999968168273, 22.719997705512412], res_norm=3.205e+01
2026-01-21 11:50:01,263 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:50:01,263 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:50:01,280 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,463 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,489 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,535 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,560 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,608 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,629 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,680 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,703 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,751 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,772 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,820 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,843 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,892 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,913 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:01,959 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:01,980 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:02,027 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:02,048 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:02,096 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:02,117 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:02,162 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:04,050 - INFO - integration_test - Step 81: MPC solve successful
2026-01-21 11:50:04,221 - INFO - integration_test - Step 81: Computed 6 numeric contouring constraints for visualization (s=22.420)
2026-01-21 11:50:04,221 - DEBUG - integration_test - Step 81: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:50:04,221 - INFO - integration_test - === Applying control at step 81 ===
2026-01-21 11:50:04,221 - INFO - integration_test -   Control dict from planner: {'a': -1.1277272809665018, 'w': -0.08795428057524568}
2026-01-21 11:50:04,222 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:50:04,222 - INFO - integration_test -   Planner output success: True
2026-01-21 11:50:04,223 - INFO - integration_test - Step 81 completed in 3.257s
2026-01-21 11:50:04,295 - INFO - integration_test - Step 82 (contouring until path end)
2026-01-21 11:50:04,303 - DEBUG - integration_test - Syncing planner state at step 82: vehicle_state=[21.17054956  7.30151732  0.12435729  2.88722695 22.70872043]
2026-01-21 11:50:04,303 - DEBUG - integration_test - Step 82: Using propagated spline 22.7087 (close to path, dist=0.193m, drift=0.735m)
2026-01-21 11:50:04,303 - DEBUG - integration_test -   Set spline state to 22.7087
2026-01-21 11:50:04,307 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:50:04,417 - DEBUG - integration_test - Step 82: Checking path alignment: vehicle=(21.171, 7.302), path_start=(0.000, 0.000), dist=22.394m
2026-01-21 11:50:04,417 - WARNING - integration_test - Step 82: Vehicle is far from path start (dist=22.394m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:50:04,417 - INFO - integration_test - === Calling planner.solve_mpc() at step 82 ===
2026-01-21 11:50:04,522 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:50:04,548 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:50:04,548 - INFO - integration_test - Warmstart k=0: x0=21.170549559148583 , y0=7.30151731794111 , psi0=0.12435729379774171 , v0=2.88722695358608 , spline0=22.708720432702748 , a0=0.0 , w0=0.0
2026-01-21 11:50:04,549 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:50:04,550 - INFO - integration_test - Dyn residual k=0: pred=[21.457042619917356, 7.337329619549342, 0.12435729379774171, 2.88722695358608, 22.997443128061356], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.457042619917356, 7.337329619549342, 0.12435729379774171, 2.88722695358608, 22.997443128061356], res_norm=3.243e+01
2026-01-21 11:50:04,552 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:50:04,553 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:50:04,572 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:04,743 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:04,765 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:04,814 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:04,837 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:04,886 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:04,909 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:04,956 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:04,978 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,026 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:05,048 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,097 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:05,118 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,166 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:05,189 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,236 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:05,260 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,326 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:05,369 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,425 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:05,448 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:05,495 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:08,047 - INFO - integration_test - Step 82: MPC solve successful
2026-01-21 11:50:08,504 - INFO - integration_test - Step 82: Computed 6 numeric contouring constraints for visualization (s=22.709)
2026-01-21 11:50:08,504 - DEBUG - integration_test - Step 82: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:50:08,504 - INFO - integration_test - === Applying control at step 82 ===
2026-01-21 11:50:08,504 - INFO - integration_test -   Control dict from planner: {'a': -1.9999999432380753, 'w': -0.7999986865812178}
2026-01-21 11:50:08,504 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:50:08,504 - INFO - integration_test -   Planner output success: True
2026-01-21 11:50:08,505 - INFO - integration_test - Step 82 completed in 4.203s
2026-01-21 11:50:08,574 - INFO - integration_test - Step 83 (contouring until path end)
2026-01-21 11:50:08,583 - DEBUG - integration_test - Syncing planner state at step 83: vehicle_state=[21.44819584  7.32512831  0.04435743  2.68722696 22.97744313]
2026-01-21 11:50:08,584 - DEBUG - integration_test - Step 83: Using propagated spline 22.9774 (close to path, dist=0.065m, drift=0.515m)
2026-01-21 11:50:08,584 - DEBUG - integration_test -   Set spline state to 22.9774
2026-01-21 11:50:08,588 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:50:08,699 - DEBUG - integration_test - Step 83: Checking path alignment: vehicle=(21.448, 7.325), path_start=(0.000, 0.000), dist=22.665m
2026-01-21 11:50:08,699 - WARNING - integration_test - Step 83: Vehicle is far from path start (dist=22.665m), but path remains FIXED per C++ reference. Spline parameter tracks position along fixed path.
2026-01-21 11:50:08,699 - INFO - integration_test - === Calling planner.solve_mpc() at step 83 ===
2026-01-21 11:50:08,800 - INFO - integration_test - ContouringObjective.update: reference_path=True, add_road_constraints=True
2026-01-21 11:50:08,827 - INFO - integration_test - Solver solve: module_manager has 6 modules: ['safe_horizon_constraint', 'contouring_constraints', 'control_effort_objective', 'control_jerk_objective', 'path_reference_velocity_objective', 'contouring_objective'], data=True
2026-01-21 11:50:08,827 - INFO - integration_test - Warmstart k=0: x0=21.448195841602566 , y0=7.32512831414187 , psi0=0.04435742513961993 , v0=2.6872269592622726 , spline0=22.977443128628977 , a0=0.0 , w0=0.0
2026-01-21 11:50:08,827 - INFO - integration_test - Bounds: x∈[-2000.0,2000.0] , y∈[-2000.0,2000.0] , psi∈[-18.84955592153876,18.84955592153876] , v∈[-0.01,3.0] , spline∈[-1.0,10000.0] , a∈[-2.0,2.0] , w∈[-0.8,0.8]
2026-01-21 11:50:08,828 - INFO - integration_test - Dyn residual k=0: pred=[21.71665421401533, 7.337044252516571, 0.04435742513961993, 2.6872269592622726, 23.246165824555206], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[21.71665421401533, 7.337044252516571, 0.04435742513961993, 2.6872269592622726, 23.246165824555206], res_norm=3.276e+01
2026-01-21 11:50:08,829 - INFO - integration_test - Dyn residual k=1: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:50:08,830 - INFO - integration_test - Dyn residual k=2: pred=[0.0, 0.0, 0.0, 0.0, 0.0], ws=[0.0, 0.0, 0.0, 0.0, 0.0], res=[0.0, 0.0, 0.0, 0.0, 0.0], res_norm=0.000e+00
2026-01-21 11:50:08,850 - INFO - integration_test - Stage 0: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,022 - INFO - integration_test - Stage 0: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,047 - INFO - integration_test - Stage 1: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,095 - INFO - integration_test - Stage 1: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,118 - INFO - integration_test - Stage 2: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,165 - INFO - integration_test - Stage 2: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,185 - INFO - integration_test - Stage 3: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,234 - INFO - integration_test - Stage 3: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,279 - INFO - integration_test - Stage 4: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,358 - INFO - integration_test - Stage 4: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,381 - INFO - integration_test - Stage 5: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,425 - INFO - integration_test - Stage 5: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,448 - INFO - integration_test - Stage 6: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,498 - INFO - integration_test - Stage 6: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,519 - INFO - integration_test - Stage 7: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,570 - INFO - integration_test - Stage 7: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,590 - INFO - integration_test - Stage 8: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,638 - INFO - integration_test - Stage 8: constraints count=10 (linearized=0, contouring=6, other=4)
2026-01-21 11:50:09,664 - INFO - integration_test - Stage 9: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,709 - INFO - integration_test - Stage 9: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:09,729 - INFO - integration_test - Stage 10: 1 objective(s) with keys: ['contouring_lag_cost', 'contouring_contour_cost', 'contouring_velocity_cost', 'contouring_goal_cost', 'contouring_terminal_cost']
2026-01-21 11:50:09,781 - INFO - integration_test - Stage 10: constraints count=6 (linearized=0, contouring=6, other=0)
2026-01-21 11:50:11,950 - INFO - integration_test - Step 83: MPC solve successful
2026-01-21 11:50:12,137 - INFO - integration_test - Step 83: Computed 6 numeric contouring constraints for visualization (s=22.977)
2026-01-21 11:50:12,138 - DEBUG - integration_test - Step 83: Captured 6 contouring constraint halfspaces for visualization
2026-01-21 11:50:12,138 - INFO - integration_test - === Applying control at step 83 ===
2026-01-21 11:50:12,138 - INFO - integration_test -   Control dict from planner: {'a': -2.0000000199947574, 'w': -0.6187711723318494}
2026-01-21 11:50:12,138 - INFO - integration_test -   Expected input names: ['a', 'w']
2026-01-21 11:50:12,138 - INFO - integration_test -   Planner output success: True
2026-01-21 11:50:12,139 - INFO - integration_test - Goal reached at step 83!
2026-01-21 11:50:12,139 - INFO - integration_test - Step 83 completed in 3.557s
2026-01-21 11:50:12,210 - INFO - integration_test - Goal reached at step 83, added 3 extra frames for visualization
2026-01-21 11:50:12,220 - INFO - integration_test - Saving test results...
2026-01-21 11:50:12,221 - INFO - integration_test - Saved 88 vehicle states to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/vehicle_states.csv
2026-01-21 11:50:12,221 - INFO - integration_test - Saved obstacle summary to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/obstacle_summary.csv
2026-01-21 11:50:12,222 - INFO - integration_test - Saved 95 states for obstacle 0 to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/obstacle_0_detailed_states.csv
2026-01-21 11:50:12,222 - INFO - integration_test - Saved 95 states for obstacle 1 to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/obstacle_1_detailed_states.csv
2026-01-21 11:50:12,222 - INFO - integration_test - Saved 95 states for obstacle 2 to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/obstacle_2_detailed_states.csv
2026-01-21 11:50:12,223 - INFO - integration_test - Saved 95 states for obstacle 3 to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/obstacle_3_detailed_states.csv
2026-01-21 11:50:12,223 - INFO - integration_test - Saved state history: 88 vehicle states, 4 obstacles
2026-01-21 11:50:12,223 - INFO - integration_test - Creating animation...
2026-01-21 11:50:12,272 - DEBUG - integration_test - Creating animation with 88 frames (range: 0 to 87)
2026-01-21 11:50:12,272 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 11:50:12,371 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:50:12,371 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 11:50:12,371 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:50:12,398 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 11:50:12,398 - DEBUG - integration_test - Frame 0: Drawing 6 contouring constraint halfspaces
2026-01-21 11:50:12,498 - INFO - integration_test - Frame 0: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:50:12,498 - INFO - integration_test - Frame 0: Calling Safe Horizon visualizer
2026-01-21 11:50:12,498 - DEBUG - integration_test - Frame 0: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:50:12,525 - INFO - integration_test - Frame 0: Safe Horizon visualizer completed
2026-01-21 11:50:12,717 - DEBUG - integration_test - Frame 1: Drawing 6 contouring constraint halfspaces
2026-01-21 11:50:12,821 - INFO - integration_test - Frame 1: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:50:12,821 - INFO - integration_test - Frame 1: Calling Safe Horizon visualizer
2026-01-21 11:50:12,821 - DEBUG - integration_test - Frame 1: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:50:13,115 - INFO - integration_test - Frame 1: Safe Horizon visualizer completed
2026-01-21 11:50:13,156 - DEBUG - integration_test - Frame 2: Drawing 6 contouring constraint halfspaces
2026-01-21 11:50:13,269 - INFO - integration_test - Frame 2: Safe Horizon module has 1000 scenarios after update
2026-01-21 11:50:13,269 - INFO - integration_test - Frame 2: Calling Safe Horizon visualizer
2026-01-21 11:50:13,269 - DEBUG - integration_test - Frame 2: Safe Horizon scenario_cache has 40 constraints across 10 keys: [(0, 0), (0, 1), (0, 2), (0, 3), (0, 4)]
2026-01-21 11:50:13,301 - INFO - integration_test - Frame 2: Safe Horizon visualizer completed
2026-01-21 11:50:39,388 - INFO - integration_test - Saved animation with 88 frames at 10.00 fps to test_outputs/20260121_114639_contouring_safe_horizon_contouring_unicycle/animation.gif (duration: 8.80s, size: 1433169 bytes)
2026-01-21 11:50:39,439 - INFO - integration_test - Animation created successfully
2026-01-21 11:50:39,439 - INFO - integration_test - Test completed successfully
